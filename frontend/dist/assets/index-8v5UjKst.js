(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))d(m);new MutationObserver(m=>{for(const p of m)if(p.type==="childList")for(const h of p.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&d(h)}).observe(document,{childList:!0,subtree:!0});function u(m){const p={};return m.integrity&&(p.integrity=m.integrity),m.referrerPolicy&&(p.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?p.credentials="include":m.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function d(m){if(m.ep)return;m.ep=!0;const p=u(m);fetch(m.href,p)}})();var Td={exports:{}},Wl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pf;function wv(){if(Pf)return Wl;Pf=1;var r=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function u(d,m,p){var h=null;if(p!==void 0&&(h=""+p),m.key!==void 0&&(h=""+m.key),"key"in m){p={};for(var g in m)g!=="key"&&(p[g]=m[g])}else p=m;return m=p.ref,{$$typeof:r,type:d,key:h,ref:m!==void 0?m:null,props:p}}return Wl.Fragment=l,Wl.jsx=u,Wl.jsxs=u,Wl}var eh;function kv(){return eh||(eh=1,Td.exports=wv()),Td.exports}var t=kv(),zd={exports:{}},et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var th;function Av(){if(th)return et;th=1;var r=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),p=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),N=Symbol.iterator;function I(A){return A===null||typeof A!="object"?null:(A=N&&A[N]||A["@@iterator"],typeof A=="function"?A:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,w={};function O(A,Y,ne){this.props=A,this.context=Y,this.refs=w,this.updater=ne||k}O.prototype.isReactComponent={},O.prototype.setState=function(A,Y){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,Y,"setState")},O.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function P(){}P.prototype=O.prototype;function z(A,Y,ne){this.props=A,this.context=Y,this.refs=w,this.updater=ne||k}var M=z.prototype=new P;M.constructor=z,L(M,O.prototype),M.isPureReactComponent=!0;var G=Array.isArray;function ee(){}var K={H:null,A:null,T:null,S:null},re=Object.prototype.hasOwnProperty;function F(A,Y,ne){var U=ne.ref;return{$$typeof:r,type:A,key:Y,ref:U!==void 0?U:null,props:ne}}function T(A,Y){return F(A.type,Y,A.props)}function te(A){return typeof A=="object"&&A!==null&&A.$$typeof===r}function de(A){var Y={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(ne){return Y[ne]})}var he=/\/+/g;function _e(A,Y){return typeof A=="object"&&A!==null&&A.key!=null?de(""+A.key):Y.toString(36)}function ye(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(ee,ee):(A.status="pending",A.then(function(Y){A.status==="pending"&&(A.status="fulfilled",A.value=Y)},function(Y){A.status==="pending"&&(A.status="rejected",A.reason=Y)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function j(A,Y,ne,U,ge){var be=typeof A;(be==="undefined"||be==="boolean")&&(A=null);var B=!1;if(A===null)B=!0;else switch(be){case"bigint":case"string":case"number":B=!0;break;case"object":switch(A.$$typeof){case r:case l:B=!0;break;case x:return B=A._init,j(B(A._payload),Y,ne,U,ge)}}if(B)return ge=ge(A),B=U===""?"."+_e(A,0):U,G(ge)?(ne="",B!=null&&(ne=B.replace(he,"$&/")+"/"),j(ge,Y,ne,"",function(Ie){return Ie})):ge!=null&&(te(ge)&&(ge=T(ge,ne+(ge.key==null||A&&A.key===ge.key?"":(""+ge.key).replace(he,"$&/")+"/")+B)),Y.push(ge)),1;B=0;var se=U===""?".":U+":";if(G(A))for(var Ae=0;Ae<A.length;Ae++)U=A[Ae],be=se+_e(U,Ae),B+=j(U,Y,ne,be,ge);else if(Ae=I(A),typeof Ae=="function")for(A=Ae.call(A),Ae=0;!(U=A.next()).done;)U=U.value,be=se+_e(U,Ae++),B+=j(U,Y,ne,be,ge);else if(be==="object"){if(typeof A.then=="function")return j(ye(A),Y,ne,U,ge);throw Y=String(A),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return B}function D(A,Y,ne){if(A==null)return A;var U=[],ge=0;return j(A,U,"","",function(be){return Y.call(ne,be,ge++)}),U}function X(A){if(A._status===-1){var Y=A._result;Y=Y(),Y.then(function(ne){(A._status===0||A._status===-1)&&(A._status=1,A._result=ne)},function(ne){(A._status===0||A._status===-1)&&(A._status=2,A._result=ne)}),A._status===-1&&(A._status=0,A._result=Y)}if(A._status===1)return A._result.default;throw A._result}var V=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},me={map:D,forEach:function(A,Y,ne){D(A,function(){Y.apply(this,arguments)},ne)},count:function(A){var Y=0;return D(A,function(){Y++}),Y},toArray:function(A){return D(A,function(Y){return Y})||[]},only:function(A){if(!te(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};return et.Activity=S,et.Children=me,et.Component=O,et.Fragment=u,et.Profiler=m,et.PureComponent=z,et.StrictMode=d,et.Suspense=b,et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,et.__COMPILER_RUNTIME={__proto__:null,c:function(A){return K.H.useMemoCache(A)}},et.cache=function(A){return function(){return A.apply(null,arguments)}},et.cacheSignal=function(){return null},et.cloneElement=function(A,Y,ne){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var U=L({},A.props),ge=A.key;if(Y!=null)for(be in Y.key!==void 0&&(ge=""+Y.key),Y)!re.call(Y,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&Y.ref===void 0||(U[be]=Y[be]);var be=arguments.length-2;if(be===1)U.children=ne;else if(1<be){for(var B=Array(be),se=0;se<be;se++)B[se]=arguments[se+2];U.children=B}return F(A.type,ge,U)},et.createContext=function(A){return A={$$typeof:h,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:p,_context:A},A},et.createElement=function(A,Y,ne){var U,ge={},be=null;if(Y!=null)for(U in Y.key!==void 0&&(be=""+Y.key),Y)re.call(Y,U)&&U!=="key"&&U!=="__self"&&U!=="__source"&&(ge[U]=Y[U]);var B=arguments.length-2;if(B===1)ge.children=ne;else if(1<B){for(var se=Array(B),Ae=0;Ae<B;Ae++)se[Ae]=arguments[Ae+2];ge.children=se}if(A&&A.defaultProps)for(U in B=A.defaultProps,B)ge[U]===void 0&&(ge[U]=B[U]);return F(A,be,ge)},et.createRef=function(){return{current:null}},et.forwardRef=function(A){return{$$typeof:g,render:A}},et.isValidElement=te,et.lazy=function(A){return{$$typeof:x,_payload:{_status:-1,_result:A},_init:X}},et.memo=function(A,Y){return{$$typeof:y,type:A,compare:Y===void 0?null:Y}},et.startTransition=function(A){var Y=K.T,ne={};K.T=ne;try{var U=A(),ge=K.S;ge!==null&&ge(ne,U),typeof U=="object"&&U!==null&&typeof U.then=="function"&&U.then(ee,V)}catch(be){V(be)}finally{Y!==null&&ne.types!==null&&(Y.types=ne.types),K.T=Y}},et.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},et.use=function(A){return K.H.use(A)},et.useActionState=function(A,Y,ne){return K.H.useActionState(A,Y,ne)},et.useCallback=function(A,Y){return K.H.useCallback(A,Y)},et.useContext=function(A){return K.H.useContext(A)},et.useDebugValue=function(){},et.useDeferredValue=function(A,Y){return K.H.useDeferredValue(A,Y)},et.useEffect=function(A,Y){return K.H.useEffect(A,Y)},et.useEffectEvent=function(A){return K.H.useEffectEvent(A)},et.useId=function(){return K.H.useId()},et.useImperativeHandle=function(A,Y,ne){return K.H.useImperativeHandle(A,Y,ne)},et.useInsertionEffect=function(A,Y){return K.H.useInsertionEffect(A,Y)},et.useLayoutEffect=function(A,Y){return K.H.useLayoutEffect(A,Y)},et.useMemo=function(A,Y){return K.H.useMemo(A,Y)},et.useOptimistic=function(A,Y){return K.H.useOptimistic(A,Y)},et.useReducer=function(A,Y,ne){return K.H.useReducer(A,Y,ne)},et.useRef=function(A){return K.H.useRef(A)},et.useState=function(A){return K.H.useState(A)},et.useSyncExternalStore=function(A,Y,ne){return K.H.useSyncExternalStore(A,Y,ne)},et.useTransition=function(){return K.H.useTransition()},et.version="19.2.4",et}var ah;function cu(){return ah||(ah=1,zd.exports=Av()),zd.exports}var c=cu(),Ed={exports:{}},Gl={},Dd={exports:{}},Od={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sh;function Nv(){return sh||(sh=1,(function(r){function l(j,D){var X=j.length;j.push(D);e:for(;0<X;){var V=X-1>>>1,me=j[V];if(0<m(me,D))j[V]=D,j[X]=me,X=V;else break e}}function u(j){return j.length===0?null:j[0]}function d(j){if(j.length===0)return null;var D=j[0],X=j.pop();if(X!==D){j[0]=X;e:for(var V=0,me=j.length,A=me>>>1;V<A;){var Y=2*(V+1)-1,ne=j[Y],U=Y+1,ge=j[U];if(0>m(ne,X))U<me&&0>m(ge,ne)?(j[V]=ge,j[U]=X,V=U):(j[V]=ne,j[Y]=X,V=Y);else if(U<me&&0>m(ge,X))j[V]=ge,j[U]=X,V=U;else break e}}return D}function m(j,D){var X=j.sortIndex-D.sortIndex;return X!==0?X:j.id-D.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var p=performance;r.unstable_now=function(){return p.now()}}else{var h=Date,g=h.now();r.unstable_now=function(){return h.now()-g}}var b=[],y=[],x=1,S=null,N=3,I=!1,k=!1,L=!1,w=!1,O=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function M(j){for(var D=u(y);D!==null;){if(D.callback===null)d(y);else if(D.startTime<=j)d(y),D.sortIndex=D.expirationTime,l(b,D);else break;D=u(y)}}function G(j){if(L=!1,M(j),!k)if(u(b)!==null)k=!0,ee||(ee=!0,de());else{var D=u(y);D!==null&&ye(G,D.startTime-j)}}var ee=!1,K=-1,re=5,F=-1;function T(){return w?!0:!(r.unstable_now()-F<re)}function te(){if(w=!1,ee){var j=r.unstable_now();F=j;var D=!0;try{e:{k=!1,L&&(L=!1,P(K),K=-1),I=!0;var X=N;try{t:{for(M(j),S=u(b);S!==null&&!(S.expirationTime>j&&T());){var V=S.callback;if(typeof V=="function"){S.callback=null,N=S.priorityLevel;var me=V(S.expirationTime<=j);if(j=r.unstable_now(),typeof me=="function"){S.callback=me,M(j),D=!0;break t}S===u(b)&&d(b),M(j)}else d(b);S=u(b)}if(S!==null)D=!0;else{var A=u(y);A!==null&&ye(G,A.startTime-j),D=!1}}break e}finally{S=null,N=X,I=!1}D=void 0}}finally{D?de():ee=!1}}}var de;if(typeof z=="function")de=function(){z(te)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,_e=he.port2;he.port1.onmessage=te,de=function(){_e.postMessage(null)}}else de=function(){O(te,0)};function ye(j,D){K=O(function(){j(r.unstable_now())},D)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(j){j.callback=null},r.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<j?Math.floor(1e3/j):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_next=function(j){switch(N){case 1:case 2:case 3:var D=3;break;default:D=N}var X=N;N=D;try{return j()}finally{N=X}},r.unstable_requestPaint=function(){w=!0},r.unstable_runWithPriority=function(j,D){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var X=N;N=j;try{return D()}finally{N=X}},r.unstable_scheduleCallback=function(j,D,X){var V=r.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?V+X:V):X=V,j){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=X+me,j={id:x++,callback:D,priorityLevel:j,startTime:X,expirationTime:me,sortIndex:-1},X>V?(j.sortIndex=X,l(y,j),u(b)===null&&j===u(y)&&(L?(P(K),K=-1):L=!0,ye(G,X-V))):(j.sortIndex=me,l(b,j),k||I||(k=!0,ee||(ee=!0,de()))),j},r.unstable_shouldYield=T,r.unstable_wrapCallback=function(j){var D=N;return function(){var X=N;N=D;try{return j.apply(this,arguments)}finally{N=X}}}})(Od)),Od}var nh;function Rv(){return nh||(nh=1,Dd.exports=Nv()),Dd.exports}var Ld={exports:{}},Da={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rh;function Mv(){if(rh)return Da;rh=1;var r=cu();function l(b){var y="https://react.dev/errors/"+b;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+b+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(){}var d={d:{f:u,r:function(){throw Error(l(522))},D:u,C:u,L:u,m:u,X:u,S:u,M:u},p:0,findDOMNode:null},m=Symbol.for("react.portal");function p(b,y,x){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:S==null?null:""+S,children:b,containerInfo:y,implementation:x}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(b,y){if(b==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Da.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=d,Da.createPortal=function(b,y){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(l(299));return p(b,y,null,x)},Da.flushSync=function(b){var y=h.T,x=d.p;try{if(h.T=null,d.p=2,b)return b()}finally{h.T=y,d.p=x,d.d.f()}},Da.preconnect=function(b,y){typeof b=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,d.d.C(b,y))},Da.prefetchDNS=function(b){typeof b=="string"&&d.d.D(b)},Da.preinit=function(b,y){if(typeof b=="string"&&y&&typeof y.as=="string"){var x=y.as,S=g(x,y.crossOrigin),N=typeof y.integrity=="string"?y.integrity:void 0,I=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;x==="style"?d.d.S(b,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:S,integrity:N,fetchPriority:I}):x==="script"&&d.d.X(b,{crossOrigin:S,integrity:N,fetchPriority:I,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Da.preinitModule=function(b,y){if(typeof b=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var x=g(y.as,y.crossOrigin);d.d.M(b,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&d.d.M(b)},Da.preload=function(b,y){if(typeof b=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var x=y.as,S=g(x,y.crossOrigin);d.d.L(b,x,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Da.preloadModule=function(b,y){if(typeof b=="string")if(y){var x=g(y.as,y.crossOrigin);d.d.m(b,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else d.d.m(b)},Da.requestFormReset=function(b){d.d.r(b)},Da.unstable_batchedUpdates=function(b,y){return b(y)},Da.useFormState=function(b,y,x){return h.H.useFormState(b,y,x)},Da.useFormStatus=function(){return h.H.useHostTransitionStatus()},Da.version="19.2.4",Da}var lh;function zh(){if(lh)return Ld.exports;lh=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(l){console.error(l)}}return r(),Ld.exports=Mv(),Ld.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oh;function Bv(){if(oh)return Gl;oh=1;var r=Rv(),l=cu(),u=zh();function d(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function p(e){var a=e,s=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(s=a.return),e=a.return;while(e)}return a.tag===3?s:null}function h(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function g(e){if(e.tag===31){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function b(e){if(p(e)!==e)throw Error(d(188))}function y(e){var a=e.alternate;if(!a){if(a=p(e),a===null)throw Error(d(188));return a!==e?null:e}for(var s=e,n=a;;){var o=s.return;if(o===null)break;var i=o.alternate;if(i===null){if(n=o.return,n!==null){s=n;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===s)return b(o),e;if(i===n)return b(o),a;i=i.sibling}throw Error(d(188))}if(s.return!==n.return)s=o,n=i;else{for(var f=!1,C=o.child;C;){if(C===s){f=!0,s=o,n=i;break}if(C===n){f=!0,n=o,s=i;break}C=C.sibling}if(!f){for(C=i.child;C;){if(C===s){f=!0,s=i,n=o;break}if(C===n){f=!0,n=i,s=o;break}C=C.sibling}if(!f)throw Error(d(189))}}if(s.alternate!==n)throw Error(d(190))}if(s.tag!==3)throw Error(d(188));return s.stateNode.current===s?e:a}function x(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=x(e),a!==null)return a;e=e.sibling}return null}var S=Object.assign,N=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),P=Symbol.for("react.consumer"),z=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),T=Symbol.for("react.memo_cache_sentinel"),te=Symbol.iterator;function de(e){return e===null||typeof e!="object"?null:(e=te&&e[te]||e["@@iterator"],typeof e=="function"?e:null)}var he=Symbol.for("react.client.reference");function _e(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===he?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case L:return"Fragment";case O:return"Profiler";case w:return"StrictMode";case G:return"Suspense";case ee:return"SuspenseList";case F:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case k:return"Portal";case z:return e.displayName||"Context";case P:return(e._context.displayName||"Context")+".Consumer";case M:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case K:return a=e.displayName||null,a!==null?a:_e(e.type)||"Memo";case re:a=e._payload,e=e._init;try{return _e(e(a))}catch{}}return null}var ye=Array.isArray,j=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=u.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},V=[],me=-1;function A(e){return{current:e}}function Y(e){0>me||(e.current=V[me],V[me]=null,me--)}function ne(e,a){me++,V[me]=e.current,e.current=a}var U=A(null),ge=A(null),be=A(null),B=A(null);function se(e,a){switch(ne(be,a),ne(ge,e),ne(U,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?jf(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=jf(a),e=Sf(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Y(U),ne(U,e)}function Ae(){Y(U),Y(ge),Y(be)}function Ie(e){e.memoizedState!==null&&ne(B,e);var a=U.current,s=Sf(a,e.type);a!==s&&(ne(ge,e),ne(U,s))}function Me(e){ge.current===e&&(Y(U),Y(ge)),B.current===e&&(Y(B),Fl._currentValue=X)}var Pe,ze;function tt(e){if(Pe===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);Pe=a&&a[1]||"",ze=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pe+e+ze}var Ne=!1;function He(e,a){if(!e||Ne)return"";Ne=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(a){var ke=function(){throw Error()};if(Object.defineProperty(ke.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ke,[])}catch(pe){var ce=pe}Reflect.construct(e,[],ke)}else{try{ke.call()}catch(pe){ce=pe}e.call(ke.prototype)}}else{try{throw Error()}catch(pe){ce=pe}(ke=e())&&typeof ke.catch=="function"&&ke.catch(function(){})}}catch(pe){if(pe&&ce&&typeof pe.stack=="string")return[pe.stack,ce.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=n.DetermineComponentFrameRoot(),f=i[0],C=i[1];if(f&&C){var W=f.split(`
`),ie=C.split(`
`);for(o=n=0;n<W.length&&!W[n].includes("DetermineComponentFrameRoot");)n++;for(;o<ie.length&&!ie[o].includes("DetermineComponentFrameRoot");)o++;if(n===W.length||o===ie.length)for(n=W.length-1,o=ie.length-1;1<=n&&0<=o&&W[n]!==ie[o];)o--;for(;1<=n&&0<=o;n--,o--)if(W[n]!==ie[o]){if(n!==1||o!==1)do if(n--,o--,0>o||W[n]!==ie[o]){var xe=`
`+W[n].replace(" at new "," at ");return e.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",e.displayName)),xe}while(1<=n&&0<=o);break}}}finally{Ne=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?tt(s):""}function Ue(e,a){switch(e.tag){case 26:case 27:case 5:return tt(e.type);case 16:return tt("Lazy");case 13:return e.child!==a&&a!==null?tt("Suspense Fallback"):tt("Suspense");case 19:return tt("SuspenseList");case 0:case 15:return He(e.type,!1);case 11:return He(e.type.render,!1);case 1:return He(e.type,!0);case 31:return tt("Activity");default:return""}}function we(e){try{var a="",s=null;do a+=Ue(e,s),s=e,e=e.return;while(e);return a}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var E=Object.prototype.hasOwnProperty,_=r.unstable_scheduleCallback,R=r.unstable_cancelCallback,le=r.unstable_shouldYield,fe=r.unstable_requestPaint,Re=r.unstable_now,Be=r.unstable_getCurrentPriorityLevel,je=r.unstable_ImmediatePriority,$e=r.unstable_UserBlockingPriority,pt=r.unstable_NormalPriority,at=r.unstable_LowPriority,_t=r.unstable_IdlePriority,jt=r.log,Ot=r.unstable_setDisableYieldValue,Qe=null,Tt=null;function Ge(e){if(typeof jt=="function"&&Ot(e),Tt&&typeof Tt.setStrictMode=="function")try{Tt.setStrictMode(Qe,e)}catch{}}var St=Math.clz32?Math.clz32:De,Ye=Math.log,vt=Math.LN2;function De(e){return e>>>=0,e===0?32:31-(Ye(e)/vt|0)|0}var fa=256,dt=262144,Jt=4194304;function ra(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ha(e,a,s){var n=e.pendingLanes;if(n===0)return 0;var o=0,i=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var C=n&134217727;return C!==0?(n=C&~i,n!==0?o=ra(n):(f&=C,f!==0?o=ra(f):s||(s=C&~e,s!==0&&(o=ra(s))))):(C=n&~i,C!==0?o=ra(C):f!==0?o=ra(f):s||(s=n&~e,s!==0&&(o=ra(s)))),o===0?0:a!==0&&a!==o&&(a&i)===0&&(i=o&-o,s=a&-a,i>=s||i===32&&(s&4194048)!==0)?a:o}function nt(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function It(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _a(){var e=Jt;return Jt<<=1,(Jt&62914560)===0&&(Jt=4194304),e}function va(e){for(var a=[],s=0;31>s;s++)a.push(e);return a}function Ut(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ja(e,a,s,n,o,i){var f=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var C=e.entanglements,W=e.expirationTimes,ie=e.hiddenUpdates;for(s=f&~s;0<s;){var xe=31-St(s),ke=1<<xe;C[xe]=0,W[xe]=-1;var ce=ie[xe];if(ce!==null)for(ie[xe]=null,xe=0;xe<ce.length;xe++){var pe=ce[xe];pe!==null&&(pe.lane&=-536870913)}s&=~ke}n!==0&&Lt(e,n,0),i!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=i&~(f&~a))}function Lt(e,a,s){e.pendingLanes|=a,e.suspendedLanes&=~a;var n=31-St(a);e.entangledLanes|=a,e.entanglements[n]=e.entanglements[n]|1073741824|s&261930}function Ct(e,a){var s=e.entangledLanes|=a;for(e=e.entanglements;s;){var n=31-St(s),o=1<<n;o&a|e[n]&a&&(e[n]|=a),s&=~o}}function Fa(e,a){var s=a&-a;return s=(s&42)!==0?1:la(s),(s&(e.suspendedLanes|a))!==0?0:s}function la(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function La(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ns(){var e=D.p;return e!==0?e:(e=window.event,e===void 0?32:Gf(e.type))}function Sa(e,a){var s=D.p;try{return D.p=e,a()}finally{D.p=s}}var Ht=Math.random().toString(36).slice(2),ut="__reactFiber$"+Ht,gt="__reactProps$"+Ht,Gt="__reactContainer$"+Ht,oa="__reactEvents$"+Ht,Ts="__reactListeners$"+Ht,Ba="__reactHandles$"+Ht,Ha="__reactResources$"+Ht,ia="__reactMarker$"+Ht;function Vt(e){delete e[ut],delete e[gt],delete e[oa],delete e[Ts],delete e[Ba]}function ea(e){var a=e[ut];if(a)return a;for(var s=e.parentNode;s;){if(a=s[Gt]||s[ut]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(e=Mf(e);e!==null;){if(s=e[ut])return s;e=Mf(e)}return a}e=s,s=e.parentNode}return null}function Qt(e){if(e=e[ut]||e[Gt]){var a=e.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return e}return null}function Xt(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(d(33))}function ya(e){var a=e[Ha];return a||(a=e[Ha]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ht(e){e[ia]=!0}var Ta=new Set,ga={};function Ia(e,a){Zt(e,a),Zt(e+"Capture",a)}function Zt(e,a){for(ga[e]=a,e=0;e<a.length;e++)Ta.add(a[e])}var $a=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ya={},zs={};function Ps(e){return E.call(zs,e)?!0:E.call(Ya,e)?!1:$a.test(e)?zs[e]=!0:(Ya[e]=!0,!1)}function hs(e,a,s){if(Ps(a))if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var n=a.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+s)}}function za(e,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+s)}}function Ca(e,a,s,n){if(n===null)e.removeAttribute(s);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(a,s,""+n)}}function zt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Wa(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ys(e,a,s){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,a);if(!e.hasOwnProperty(a)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return o.call(this)},set:function(f){s=""+f,i.call(this,f)}}),Object.defineProperty(e,a,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(f){s=""+f},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function Ga(e){if(!e._valueTracker){var a=Wa(e)?"checked":"value";e._valueTracker=ys(e,a,""+e[a])}}function bs(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var s=a.getValue(),n="";return e&&(n=Wa(e)?e.checked?"true":"false":e.value),e=n,e!==s?(a.setValue(e),!0):!1}function J(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Se=/[\n"\\]/g;function Te(e){return e.replace(Se,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Je(e,a,s,n,o,i,f,C){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),a!=null?f==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+zt(a)):e.value!==""+zt(a)&&(e.value=""+zt(a)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),a!=null?wa(e,f,zt(a)):s!=null?wa(e,f,zt(s)):n!=null&&e.removeAttribute("value"),o==null&&i!=null&&(e.defaultChecked=!!i),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+zt(C):e.removeAttribute("name")}function wt(e,a,s,n,o,i,f,C){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.type=i),a!=null||s!=null){if(!(i!=="submit"&&i!=="reset"||a!=null)){Ga(e);return}s=s!=null?""+zt(s):"",a=a!=null?""+zt(a):s,C||a===e.value||(e.value=a),e.defaultValue=a}n=n??o,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=C?e.checked:!!n,e.defaultChecked=!!n,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f),Ga(e)}function wa(e,a,s){a==="number"&&J(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function ka(e,a,s,n){if(e=e.options,a){a={};for(var o=0;o<s.length;o++)a["$"+s[o]]=!0;for(s=0;s<e.length;s++)o=a.hasOwnProperty("$"+e[s].value),e[s].selected!==o&&(e[s].selected=o),o&&n&&(e[s].defaultSelected=!0)}else{for(s=""+zt(s),a=null,o=0;o<e.length;o++){if(e[o].value===s){e[o].selected=!0,n&&(e[o].defaultSelected=!0);return}a!==null||e[o].disabled||(a=e[o])}a!==null&&(a.selected=!0)}}function Va(e,a,s){if(a!=null&&(a=""+zt(a),a!==e.value&&(e.value=a),s==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=s!=null?""+zt(s):""}function Hs(e,a,s,n){if(a==null){if(n!=null){if(s!=null)throw Error(d(92));if(ye(n)){if(1<n.length)throw Error(d(93));n=n[0]}s=n}s==null&&(s=""),a=s}s=zt(a),e.defaultValue=s,n=e.textContent,n===s&&n!==""&&n!==null&&(e.value=n),Ga(e)}function vs(e,a){if(a){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=a;return}}e.textContent=a}var $s=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ys(e,a,s){var n=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?n?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":n?e.setProperty(a,s):typeof s!="number"||s===0||$s.has(a)?a==="float"?e.cssFloat=s:e[a]=(""+s).trim():e[a]=s+"px"}function Es(e,a,s){if(a!=null&&typeof a!="object")throw Error(d(62));if(e=e.style,s!=null){for(var n in s)!s.hasOwnProperty(n)||a!=null&&a.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var o in a)n=a[o],a.hasOwnProperty(o)&&s[o]!==n&&Ys(e,o,n)}else for(var i in a)a.hasOwnProperty(i)&&Ys(e,i,a[i])}function q(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var v=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),H=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ve(e){return H.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Oe(){}var kt=null;function Q(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ee=null,Fe=null;function Xe(e){var a=Qt(e);if(a&&(e=a.stateNode)){var s=e[gt]||null;e:switch(e=a.stateNode,a.type){case"input":if(Je(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Te(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var n=s[a];if(n!==e&&n.form===e.form){var o=n[gt]||null;if(!o)throw Error(d(90));Je(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(a=0;a<s.length;a++)n=s[a],n.form===e.form&&bs(n)}break e;case"textarea":Va(e,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&ka(e,!!s.multiple,a,!1)}}}var $t=!1;function Ds(e,a,s){if($t)return e(a,s);$t=!0;try{var n=e(a);return n}finally{if($t=!1,(Ee!==null||Fe!==null)&&(Wo(),Ee&&(a=Ee,e=Fe,Fe=Ee=null,Xe(a),e)))for(a=0;a<e.length;a++)Xe(e[a])}}function Os(e,a){var s=e.stateNode;if(s===null)return null;var n=s[gt]||null;if(n===null)return null;s=n[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(d(231,a,typeof s));return s}var rs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),br=!1;if(rs)try{var jn={};Object.defineProperty(jn,"passive",{get:function(){br=!0}}),window.addEventListener("test",jn,jn),window.removeEventListener("test",jn,jn)}catch{br=!1}var Ea=null,rl=null,no=null;function ju(){if(no)return no;var e,a=rl,s=a.length,n,o="value"in Ea?Ea.value:Ea.textContent,i=o.length;for(e=0;e<s&&a[e]===o[e];e++);var f=s-e;for(n=1;n<=f&&a[s-n]===o[i-n];n++);return no=o.slice(e,1<n?1-n:void 0)}function ro(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function lo(){return!0}function Su(){return!1}function Qa(e){function a(s,n,o,i,f){this._reactName=s,this._targetInst=o,this.type=n,this.nativeEvent=i,this.target=f,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(s=e[C],this[C]=s?s(i):i[C]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?lo:Su,this.isPropagationStopped=Su,this}return S(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=lo)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=lo)},persist:function(){},isPersistent:lo}),a}var Gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oo=Qa(Gn),ll=S({},Gn,{view:0,detail:0}),Sy=Qa(ll),Ei,Di,ol,io=S({},ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Li,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ol&&(ol&&e.type==="mousemove"?(Ei=e.screenX-ol.screenX,Di=e.screenY-ol.screenY):Di=Ei=0,ol=e),Ei)},movementY:function(e){return"movementY"in e?e.movementY:Di}}),Cu=Qa(io),Cy=S({},io,{dataTransfer:0}),wy=Qa(Cy),ky=S({},ll,{relatedTarget:0}),Oi=Qa(ky),Ay=S({},Gn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ny=Qa(Ay),Ry=S({},Gn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),My=Qa(Ry),By=S({},Gn,{data:0}),wu=Qa(By),Ty={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ey={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dy(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=Ey[e])?!!a[e]:!1}function Li(){return Dy}var Oy=S({},ll,{key:function(e){if(e.key){var a=Ty[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=ro(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Li,charCode:function(e){return e.type==="keypress"?ro(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ro(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ly=Qa(Oy),Iy=S({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ku=Qa(Iy),Uy=S({},ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Li}),qy=Qa(Uy),Fy=S({},Gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hy=Qa(Fy),$y=S({},io,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Yy=Qa($y),Wy=S({},Gn,{newState:0,oldState:0}),Gy=Qa(Wy),Vy=[9,13,27,32],Ii=rs&&"CompositionEvent"in window,il=null;rs&&"documentMode"in document&&(il=document.documentMode);var Qy=rs&&"TextEvent"in window&&!il,Au=rs&&(!Ii||il&&8<il&&11>=il),Nu=" ",Ru=!1;function Mu(e,a){switch(e){case"keyup":return Vy.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vr=!1;function Xy(e,a){switch(e){case"compositionend":return Bu(a);case"keypress":return a.which!==32?null:(Ru=!0,Nu);case"textInput":return e=a.data,e===Nu&&Ru?null:e;default:return null}}function Zy(e,a){if(vr)return e==="compositionend"||!Ii&&Mu(e,a)?(e=ju(),no=rl=Ea=null,vr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Au&&a.locale!=="ko"?null:a.data;default:return null}}var Jy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tu(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!Jy[e.type]:a==="textarea"}function zu(e,a,s,n){Ee?Fe?Fe.push(n):Fe=[n]:Ee=n,a=Ko(a,"onChange"),0<a.length&&(s=new oo("onChange","change",null,s,n),e.push({event:s,listeners:a}))}var cl=null,dl=null;function Ky(e){yf(e,0)}function co(e){var a=Xt(e);if(bs(a))return e}function Eu(e,a){if(e==="change")return a}var Du=!1;if(rs){var Ui;if(rs){var qi="oninput"in document;if(!qi){var Ou=document.createElement("div");Ou.setAttribute("oninput","return;"),qi=typeof Ou.oninput=="function"}Ui=qi}else Ui=!1;Du=Ui&&(!document.documentMode||9<document.documentMode)}function Lu(){cl&&(cl.detachEvent("onpropertychange",Iu),dl=cl=null)}function Iu(e){if(e.propertyName==="value"&&co(dl)){var a=[];zu(a,dl,e,Q(e)),Ds(Ky,a)}}function Py(e,a,s){e==="focusin"?(Lu(),cl=a,dl=s,cl.attachEvent("onpropertychange",Iu)):e==="focusout"&&Lu()}function eb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return co(dl)}function tb(e,a){if(e==="click")return co(a)}function ab(e,a){if(e==="input"||e==="change")return co(a)}function sb(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var ls=typeof Object.is=="function"?Object.is:sb;function ul(e,a){if(ls(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var s=Object.keys(e),n=Object.keys(a);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var o=s[n];if(!E.call(a,o)||!ls(e[o],a[o]))return!1}return!0}function Uu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qu(e,a){var s=Uu(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=a&&n>=a)return{node:s,offset:a-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Uu(s)}}function Fu(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?Fu(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function Hu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=J(e.document);a instanceof e.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)e=a.contentWindow;else break;a=J(e.document)}return a}function Fi(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var nb=rs&&"documentMode"in document&&11>=document.documentMode,gr=null,Hi=null,ml=null,$i=!1;function $u(e,a,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;$i||gr==null||gr!==J(n)||(n=gr,"selectionStart"in n&&Fi(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ml&&ul(ml,n)||(ml=n,n=Ko(Hi,"onSelect"),0<n.length&&(a=new oo("onSelect","select",null,a,s),e.push({event:a,listeners:n}),a.target=gr)))}function Vn(e,a){var s={};return s[e.toLowerCase()]=a.toLowerCase(),s["Webkit"+e]="webkit"+a,s["Moz"+e]="moz"+a,s}var xr={animationend:Vn("Animation","AnimationEnd"),animationiteration:Vn("Animation","AnimationIteration"),animationstart:Vn("Animation","AnimationStart"),transitionrun:Vn("Transition","TransitionRun"),transitionstart:Vn("Transition","TransitionStart"),transitioncancel:Vn("Transition","TransitionCancel"),transitionend:Vn("Transition","TransitionEnd")},Yi={},Yu={};rs&&(Yu=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);function Qn(e){if(Yi[e])return Yi[e];if(!xr[e])return e;var a=xr[e],s;for(s in a)if(a.hasOwnProperty(s)&&s in Yu)return Yi[e]=a[s];return e}var Wu=Qn("animationend"),Gu=Qn("animationiteration"),Vu=Qn("animationstart"),rb=Qn("transitionrun"),lb=Qn("transitionstart"),ob=Qn("transitioncancel"),Qu=Qn("transitionend"),Xu=new Map,Wi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wi.push("scrollEnd");function Ls(e,a){Xu.set(e,a),Ia(a,[e])}var uo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},gs=[],_r=0,Gi=0;function mo(){for(var e=_r,a=Gi=_r=0;a<e;){var s=gs[a];gs[a++]=null;var n=gs[a];gs[a++]=null;var o=gs[a];gs[a++]=null;var i=gs[a];if(gs[a++]=null,n!==null&&o!==null){var f=n.pending;f===null?o.next=o:(o.next=f.next,f.next=o),n.pending=o}i!==0&&Zu(s,o,i)}}function po(e,a,s,n){gs[_r++]=e,gs[_r++]=a,gs[_r++]=s,gs[_r++]=n,Gi|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Vi(e,a,s,n){return po(e,a,s,n),fo(e)}function Xn(e,a){return po(e,null,null,a),fo(e)}function Zu(e,a,s){e.lanes|=s;var n=e.alternate;n!==null&&(n.lanes|=s);for(var o=!1,i=e.return;i!==null;)i.childLanes|=s,n=i.alternate,n!==null&&(n.childLanes|=s),i.tag===22&&(e=i.stateNode,e===null||e._visibility&1||(o=!0)),e=i,i=i.return;return e.tag===3?(i=e.stateNode,o&&a!==null&&(o=31-St(s),e=i.hiddenUpdates,n=e[o],n===null?e[o]=[a]:n.push(a),a.lane=s|536870912),i):null}function fo(e){if(50<El)throw El=0,ad=null,Error(d(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var jr={};function ib(e,a,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function os(e,a,s,n){return new ib(e,a,s,n)}function Qi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function en(e,a){var s=e.alternate;return s===null?(s=os(e.tag,a,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=a,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,a=e.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Ju(e,a){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,a=s.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function ho(e,a,s,n,o,i){var f=0;if(n=e,typeof e=="function")Qi(e)&&(f=1);else if(typeof e=="string")f=pv(e,s,U.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case F:return e=os(31,s,a,o),e.elementType=F,e.lanes=i,e;case L:return Zn(s.children,o,i,a);case w:f=8,o|=24;break;case O:return e=os(12,s,a,o|2),e.elementType=O,e.lanes=i,e;case G:return e=os(13,s,a,o),e.elementType=G,e.lanes=i,e;case ee:return e=os(19,s,a,o),e.elementType=ee,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case z:f=10;break e;case P:f=9;break e;case M:f=11;break e;case K:f=14;break e;case re:f=16,n=null;break e}f=29,s=Error(d(130,e===null?"null":typeof e,"")),n=null}return a=os(f,s,a,o),a.elementType=e,a.type=n,a.lanes=i,a}function Zn(e,a,s,n){return e=os(7,e,n,a),e.lanes=s,e}function Xi(e,a,s){return e=os(6,e,null,a),e.lanes=s,e}function Ku(e){var a=os(18,null,null,0);return a.stateNode=e,a}function Zi(e,a,s){return a=os(4,e.children!==null?e.children:[],e.key,a),a.lanes=s,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var Pu=new WeakMap;function xs(e,a){if(typeof e=="object"&&e!==null){var s=Pu.get(e);return s!==void 0?s:(a={value:e,source:a,stack:we(a)},Pu.set(e,a),a)}return{value:e,source:a,stack:we(a)}}var Sr=[],Cr=0,yo=null,pl=0,_s=[],js=0,Sn=null,Ws=1,Gs="";function tn(e,a){Sr[Cr++]=pl,Sr[Cr++]=yo,yo=e,pl=a}function em(e,a,s){_s[js++]=Ws,_s[js++]=Gs,_s[js++]=Sn,Sn=e;var n=Ws;e=Gs;var o=32-St(n)-1;n&=~(1<<o),s+=1;var i=32-St(a)+o;if(30<i){var f=o-o%5;i=(n&(1<<f)-1).toString(32),n>>=f,o-=f,Ws=1<<32-St(a)+o|s<<o|n,Gs=i+e}else Ws=1<<i|s<<o|n,Gs=e}function Ji(e){e.return!==null&&(tn(e,1),em(e,1,0))}function Ki(e){for(;e===yo;)yo=Sr[--Cr],Sr[Cr]=null,pl=Sr[--Cr],Sr[Cr]=null;for(;e===Sn;)Sn=_s[--js],_s[js]=null,Gs=_s[--js],_s[js]=null,Ws=_s[--js],_s[js]=null}function tm(e,a){_s[js++]=Ws,_s[js++]=Gs,_s[js++]=Sn,Ws=a.id,Gs=a.overflow,Sn=e}var Aa=null,qt=null,mt=!1,Cn=null,Ss=!1,Pi=Error(d(519));function wn(e){var a=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fl(xs(a,e)),Pi}function am(e){var a=e.stateNode,s=e.type,n=e.memoizedProps;switch(a[ut]=e,a[gt]=n,s){case"dialog":ot("cancel",a),ot("close",a);break;case"iframe":case"object":case"embed":ot("load",a);break;case"video":case"audio":for(s=0;s<Ol.length;s++)ot(Ol[s],a);break;case"source":ot("error",a);break;case"img":case"image":case"link":ot("error",a),ot("load",a);break;case"details":ot("toggle",a);break;case"input":ot("invalid",a),wt(a,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":ot("invalid",a);break;case"textarea":ot("invalid",a),Hs(a,n.value,n.defaultValue,n.children)}s=n.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||n.suppressHydrationWarning===!0||xf(a.textContent,s)?(n.popover!=null&&(ot("beforetoggle",a),ot("toggle",a)),n.onScroll!=null&&ot("scroll",a),n.onScrollEnd!=null&&ot("scrollend",a),n.onClick!=null&&(a.onclick=Oe),a=!0):a=!1,a||wn(e,!0)}function sm(e){for(Aa=e.return;Aa;)switch(Aa.tag){case 5:case 31:case 13:Ss=!1;return;case 27:case 3:Ss=!0;return;default:Aa=Aa.return}}function wr(e){if(e!==Aa)return!1;if(!mt)return sm(e),mt=!0,!1;var a=e.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||bd(e.type,e.memoizedProps)),s=!s),s&&qt&&wn(e),sm(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));qt=Rf(e)}else if(a===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));qt=Rf(e)}else a===27?(a=qt,Un(e.type)?(e=jd,jd=null,qt=e):qt=a):qt=Aa?ws(e.stateNode.nextSibling):null;return!0}function Jn(){qt=Aa=null,mt=!1}function ec(){var e=Cn;return e!==null&&(Ka===null?Ka=e:Ka.push.apply(Ka,e),Cn=null),e}function fl(e){Cn===null?Cn=[e]:Cn.push(e)}var tc=A(null),Kn=null,an=null;function kn(e,a,s){ne(tc,a._currentValue),a._currentValue=s}function sn(e){e._currentValue=tc.current,Y(tc)}function ac(e,a,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,n!==null&&(n.childLanes|=a)):n!==null&&(n.childLanes&a)!==a&&(n.childLanes|=a),e===s)break;e=e.return}}function sc(e,a,s,n){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var i=o.dependencies;if(i!==null){var f=o.child;i=i.firstContext;e:for(;i!==null;){var C=i;i=o;for(var W=0;W<a.length;W++)if(C.context===a[W]){i.lanes|=s,C=i.alternate,C!==null&&(C.lanes|=s),ac(i.return,s,e),n||(f=null);break e}i=C.next}}else if(o.tag===18){if(f=o.return,f===null)throw Error(d(341));f.lanes|=s,i=f.alternate,i!==null&&(i.lanes|=s),ac(f,s,e),f=null}else f=o.child;if(f!==null)f.return=o;else for(f=o;f!==null;){if(f===e){f=null;break}if(o=f.sibling,o!==null){o.return=f.return,f=o;break}f=f.return}o=f}}function kr(e,a,s,n){e=null;for(var o=a,i=!1;o!==null;){if(!i){if((o.flags&524288)!==0)i=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var f=o.alternate;if(f===null)throw Error(d(387));if(f=f.memoizedProps,f!==null){var C=o.type;ls(o.pendingProps.value,f.value)||(e!==null?e.push(C):e=[C])}}else if(o===B.current){if(f=o.alternate,f===null)throw Error(d(387));f.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(Fl):e=[Fl])}o=o.return}e!==null&&sc(a,e,s,n),a.flags|=262144}function bo(e){for(e=e.firstContext;e!==null;){if(!ls(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Pn(e){Kn=e,an=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Na(e){return nm(Kn,e)}function vo(e,a){return Kn===null&&Pn(e),nm(e,a)}function nm(e,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},an===null){if(e===null)throw Error(d(308));an=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else an=an.next=a;return s}var cb=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(s,n){e.push(n)}};this.abort=function(){a.aborted=!0,e.forEach(function(s){return s()})}},db=r.unstable_scheduleCallback,ub=r.unstable_NormalPriority,ca={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nc(){return{controller:new cb,data:new Map,refCount:0}}function hl(e){e.refCount--,e.refCount===0&&db(ub,function(){e.controller.abort()})}var yl=null,rc=0,Ar=0,Nr=null;function mb(e,a){if(yl===null){var s=yl=[];rc=0,Ar=id(),Nr={status:"pending",value:void 0,then:function(n){s.push(n)}}}return rc++,a.then(rm,rm),a}function rm(){if(--rc===0&&yl!==null){Nr!==null&&(Nr.status="fulfilled");var e=yl;yl=null,Ar=0,Nr=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function pb(e,a){var s=[],n={status:"pending",value:null,reason:null,then:function(o){s.push(o)}};return e.then(function(){n.status="fulfilled",n.value=a;for(var o=0;o<s.length;o++)(0,s[o])(a)},function(o){for(n.status="rejected",n.reason=o,o=0;o<s.length;o++)(0,s[o])(void 0)}),n}var lm=j.S;j.S=function(e,a){$p=Re(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&mb(e,a),lm!==null&&lm(e,a)};var er=A(null);function lc(){var e=er.current;return e!==null?e:Et.pooledCache}function go(e,a){a===null?ne(er,er.current):ne(er,a.pool)}function om(){var e=lc();return e===null?null:{parent:ca._currentValue,pool:e}}var Rr=Error(d(460)),oc=Error(d(474)),xo=Error(d(542)),_o={then:function(){}};function im(e){return e=e.status,e==="fulfilled"||e==="rejected"}function cm(e,a,s){switch(s=e[s],s===void 0?e.push(a):s!==a&&(a.then(Oe,Oe),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,um(e),e;default:if(typeof a.status=="string")a.then(Oe,Oe);else{if(e=Et,e!==null&&100<e.shellSuspendCounter)throw Error(d(482));e=a,e.status="pending",e.then(function(n){if(a.status==="pending"){var o=a;o.status="fulfilled",o.value=n}},function(n){if(a.status==="pending"){var o=a;o.status="rejected",o.reason=n}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,um(e),e}throw ar=a,Rr}}function tr(e){try{var a=e._init;return a(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(ar=s,Rr):s}}var ar=null;function dm(){if(ar===null)throw Error(d(459));var e=ar;return ar=null,e}function um(e){if(e===Rr||e===xo)throw Error(d(483))}var Mr=null,bl=0;function jo(e){var a=bl;return bl+=1,Mr===null&&(Mr=[]),cm(Mr,e,a)}function vl(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function So(e,a){throw a.$$typeof===N?Error(d(525)):(e=Object.prototype.toString.call(a),Error(d(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function mm(e){function a(ae,Z){if(e){var oe=ae.deletions;oe===null?(ae.deletions=[Z],ae.flags|=16):oe.push(Z)}}function s(ae,Z){if(!e)return null;for(;Z!==null;)a(ae,Z),Z=Z.sibling;return null}function n(ae){for(var Z=new Map;ae!==null;)ae.key!==null?Z.set(ae.key,ae):Z.set(ae.index,ae),ae=ae.sibling;return Z}function o(ae,Z){return ae=en(ae,Z),ae.index=0,ae.sibling=null,ae}function i(ae,Z,oe){return ae.index=oe,e?(oe=ae.alternate,oe!==null?(oe=oe.index,oe<Z?(ae.flags|=67108866,Z):oe):(ae.flags|=67108866,Z)):(ae.flags|=1048576,Z)}function f(ae){return e&&ae.alternate===null&&(ae.flags|=67108866),ae}function C(ae,Z,oe,Ce){return Z===null||Z.tag!==6?(Z=Xi(oe,ae.mode,Ce),Z.return=ae,Z):(Z=o(Z,oe),Z.return=ae,Z)}function W(ae,Z,oe,Ce){var We=oe.type;return We===L?xe(ae,Z,oe.props.children,Ce,oe.key):Z!==null&&(Z.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===re&&tr(We)===Z.type)?(Z=o(Z,oe.props),vl(Z,oe),Z.return=ae,Z):(Z=ho(oe.type,oe.key,oe.props,null,ae.mode,Ce),vl(Z,oe),Z.return=ae,Z)}function ie(ae,Z,oe,Ce){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==oe.containerInfo||Z.stateNode.implementation!==oe.implementation?(Z=Zi(oe,ae.mode,Ce),Z.return=ae,Z):(Z=o(Z,oe.children||[]),Z.return=ae,Z)}function xe(ae,Z,oe,Ce,We){return Z===null||Z.tag!==7?(Z=Zn(oe,ae.mode,Ce,We),Z.return=ae,Z):(Z=o(Z,oe),Z.return=ae,Z)}function ke(ae,Z,oe){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=Xi(""+Z,ae.mode,oe),Z.return=ae,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case I:return oe=ho(Z.type,Z.key,Z.props,null,ae.mode,oe),vl(oe,Z),oe.return=ae,oe;case k:return Z=Zi(Z,ae.mode,oe),Z.return=ae,Z;case re:return Z=tr(Z),ke(ae,Z,oe)}if(ye(Z)||de(Z))return Z=Zn(Z,ae.mode,oe,null),Z.return=ae,Z;if(typeof Z.then=="function")return ke(ae,jo(Z),oe);if(Z.$$typeof===z)return ke(ae,vo(ae,Z),oe);So(ae,Z)}return null}function ce(ae,Z,oe,Ce){var We=Z!==null?Z.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return We!==null?null:C(ae,Z,""+oe,Ce);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case I:return oe.key===We?W(ae,Z,oe,Ce):null;case k:return oe.key===We?ie(ae,Z,oe,Ce):null;case re:return oe=tr(oe),ce(ae,Z,oe,Ce)}if(ye(oe)||de(oe))return We!==null?null:xe(ae,Z,oe,Ce,null);if(typeof oe.then=="function")return ce(ae,Z,jo(oe),Ce);if(oe.$$typeof===z)return ce(ae,Z,vo(ae,oe),Ce);So(ae,oe)}return null}function pe(ae,Z,oe,Ce,We){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return ae=ae.get(oe)||null,C(Z,ae,""+Ce,We);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case I:return ae=ae.get(Ce.key===null?oe:Ce.key)||null,W(Z,ae,Ce,We);case k:return ae=ae.get(Ce.key===null?oe:Ce.key)||null,ie(Z,ae,Ce,We);case re:return Ce=tr(Ce),pe(ae,Z,oe,Ce,We)}if(ye(Ce)||de(Ce))return ae=ae.get(oe)||null,xe(Z,ae,Ce,We,null);if(typeof Ce.then=="function")return pe(ae,Z,oe,jo(Ce),We);if(Ce.$$typeof===z)return pe(ae,Z,oe,vo(Z,Ce),We);So(Z,Ce)}return null}function Le(ae,Z,oe,Ce){for(var We=null,yt=null,qe=Z,rt=Z=0,ct=null;qe!==null&&rt<oe.length;rt++){qe.index>rt?(ct=qe,qe=null):ct=qe.sibling;var bt=ce(ae,qe,oe[rt],Ce);if(bt===null){qe===null&&(qe=ct);break}e&&qe&&bt.alternate===null&&a(ae,qe),Z=i(bt,Z,rt),yt===null?We=bt:yt.sibling=bt,yt=bt,qe=ct}if(rt===oe.length)return s(ae,qe),mt&&tn(ae,rt),We;if(qe===null){for(;rt<oe.length;rt++)qe=ke(ae,oe[rt],Ce),qe!==null&&(Z=i(qe,Z,rt),yt===null?We=qe:yt.sibling=qe,yt=qe);return mt&&tn(ae,rt),We}for(qe=n(qe);rt<oe.length;rt++)ct=pe(qe,ae,rt,oe[rt],Ce),ct!==null&&(e&&ct.alternate!==null&&qe.delete(ct.key===null?rt:ct.key),Z=i(ct,Z,rt),yt===null?We=ct:yt.sibling=ct,yt=ct);return e&&qe.forEach(function(Yn){return a(ae,Yn)}),mt&&tn(ae,rt),We}function Ve(ae,Z,oe,Ce){if(oe==null)throw Error(d(151));for(var We=null,yt=null,qe=Z,rt=Z=0,ct=null,bt=oe.next();qe!==null&&!bt.done;rt++,bt=oe.next()){qe.index>rt?(ct=qe,qe=null):ct=qe.sibling;var Yn=ce(ae,qe,bt.value,Ce);if(Yn===null){qe===null&&(qe=ct);break}e&&qe&&Yn.alternate===null&&a(ae,qe),Z=i(Yn,Z,rt),yt===null?We=Yn:yt.sibling=Yn,yt=Yn,qe=ct}if(bt.done)return s(ae,qe),mt&&tn(ae,rt),We;if(qe===null){for(;!bt.done;rt++,bt=oe.next())bt=ke(ae,bt.value,Ce),bt!==null&&(Z=i(bt,Z,rt),yt===null?We=bt:yt.sibling=bt,yt=bt);return mt&&tn(ae,rt),We}for(qe=n(qe);!bt.done;rt++,bt=oe.next())bt=pe(qe,ae,rt,bt.value,Ce),bt!==null&&(e&&bt.alternate!==null&&qe.delete(bt.key===null?rt:bt.key),Z=i(bt,Z,rt),yt===null?We=bt:yt.sibling=bt,yt=bt);return e&&qe.forEach(function(Cv){return a(ae,Cv)}),mt&&tn(ae,rt),We}function Bt(ae,Z,oe,Ce){if(typeof oe=="object"&&oe!==null&&oe.type===L&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case I:e:{for(var We=oe.key;Z!==null;){if(Z.key===We){if(We=oe.type,We===L){if(Z.tag===7){s(ae,Z.sibling),Ce=o(Z,oe.props.children),Ce.return=ae,ae=Ce;break e}}else if(Z.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===re&&tr(We)===Z.type){s(ae,Z.sibling),Ce=o(Z,oe.props),vl(Ce,oe),Ce.return=ae,ae=Ce;break e}s(ae,Z);break}else a(ae,Z);Z=Z.sibling}oe.type===L?(Ce=Zn(oe.props.children,ae.mode,Ce,oe.key),Ce.return=ae,ae=Ce):(Ce=ho(oe.type,oe.key,oe.props,null,ae.mode,Ce),vl(Ce,oe),Ce.return=ae,ae=Ce)}return f(ae);case k:e:{for(We=oe.key;Z!==null;){if(Z.key===We)if(Z.tag===4&&Z.stateNode.containerInfo===oe.containerInfo&&Z.stateNode.implementation===oe.implementation){s(ae,Z.sibling),Ce=o(Z,oe.children||[]),Ce.return=ae,ae=Ce;break e}else{s(ae,Z);break}else a(ae,Z);Z=Z.sibling}Ce=Zi(oe,ae.mode,Ce),Ce.return=ae,ae=Ce}return f(ae);case re:return oe=tr(oe),Bt(ae,Z,oe,Ce)}if(ye(oe))return Le(ae,Z,oe,Ce);if(de(oe)){if(We=de(oe),typeof We!="function")throw Error(d(150));return oe=We.call(oe),Ve(ae,Z,oe,Ce)}if(typeof oe.then=="function")return Bt(ae,Z,jo(oe),Ce);if(oe.$$typeof===z)return Bt(ae,Z,vo(ae,oe),Ce);So(ae,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,Z!==null&&Z.tag===6?(s(ae,Z.sibling),Ce=o(Z,oe),Ce.return=ae,ae=Ce):(s(ae,Z),Ce=Xi(oe,ae.mode,Ce),Ce.return=ae,ae=Ce),f(ae)):s(ae,Z)}return function(ae,Z,oe,Ce){try{bl=0;var We=Bt(ae,Z,oe,Ce);return Mr=null,We}catch(qe){if(qe===Rr||qe===xo)throw qe;var yt=os(29,qe,null,ae.mode);return yt.lanes=Ce,yt.return=ae,yt}finally{}}}var sr=mm(!0),pm=mm(!1),An=!1;function ic(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cc(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Nn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Rn(e,a,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(xt&2)!==0){var o=n.pending;return o===null?a.next=a:(a.next=o.next,o.next=a),n.pending=a,a=fo(e),Zu(e,null,s),a}return po(e,n,a,s),fo(e)}function gl(e,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var n=a.lanes;n&=e.pendingLanes,s|=n,a.lanes=s,Ct(e,s)}}function dc(e,a){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var o=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var f={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};i===null?o=i=f:i=i.next=f,s=s.next}while(s!==null);i===null?o=i=a:i=i.next=a}else o=i=a;s={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:n.shared,callbacks:n.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=a:e.next=a,s.lastBaseUpdate=a}var uc=!1;function xl(){if(uc){var e=Nr;if(e!==null)throw e}}function _l(e,a,s,n){uc=!1;var o=e.updateQueue;An=!1;var i=o.firstBaseUpdate,f=o.lastBaseUpdate,C=o.shared.pending;if(C!==null){o.shared.pending=null;var W=C,ie=W.next;W.next=null,f===null?i=ie:f.next=ie,f=W;var xe=e.alternate;xe!==null&&(xe=xe.updateQueue,C=xe.lastBaseUpdate,C!==f&&(C===null?xe.firstBaseUpdate=ie:C.next=ie,xe.lastBaseUpdate=W))}if(i!==null){var ke=o.baseState;f=0,xe=ie=W=null,C=i;do{var ce=C.lane&-536870913,pe=ce!==C.lane;if(pe?(it&ce)===ce:(n&ce)===ce){ce!==0&&ce===Ar&&(uc=!0),xe!==null&&(xe=xe.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Le=e,Ve=C;ce=a;var Bt=s;switch(Ve.tag){case 1:if(Le=Ve.payload,typeof Le=="function"){ke=Le.call(Bt,ke,ce);break e}ke=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=Ve.payload,ce=typeof Le=="function"?Le.call(Bt,ke,ce):Le,ce==null)break e;ke=S({},ke,ce);break e;case 2:An=!0}}ce=C.callback,ce!==null&&(e.flags|=64,pe&&(e.flags|=8192),pe=o.callbacks,pe===null?o.callbacks=[ce]:pe.push(ce))}else pe={lane:ce,tag:C.tag,payload:C.payload,callback:C.callback,next:null},xe===null?(ie=xe=pe,W=ke):xe=xe.next=pe,f|=ce;if(C=C.next,C===null){if(C=o.shared.pending,C===null)break;pe=C,C=pe.next,pe.next=null,o.lastBaseUpdate=pe,o.shared.pending=null}}while(!0);xe===null&&(W=ke),o.baseState=W,o.firstBaseUpdate=ie,o.lastBaseUpdate=xe,i===null&&(o.shared.lanes=0),En|=f,e.lanes=f,e.memoizedState=ke}}function fm(e,a){if(typeof e!="function")throw Error(d(191,e));e.call(a)}function hm(e,a){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)fm(s[e],a)}var Br=A(null),Co=A(0);function ym(e,a){e=pn,ne(Co,e),ne(Br,a),pn=e|a.baseLanes}function mc(){ne(Co,pn),ne(Br,Br.current)}function pc(){pn=Co.current,Y(Br),Y(Co)}var is=A(null),Cs=null;function Mn(e){var a=e.alternate;ne(ta,ta.current&1),ne(is,e),Cs===null&&(a===null||Br.current!==null||a.memoizedState!==null)&&(Cs=e)}function fc(e){ne(ta,ta.current),ne(is,e),Cs===null&&(Cs=e)}function bm(e){e.tag===22?(ne(ta,ta.current),ne(is,e),Cs===null&&(Cs=e)):Bn()}function Bn(){ne(ta,ta.current),ne(is,is.current)}function cs(e){Y(is),Cs===e&&(Cs=null),Y(ta)}var ta=A(0);function wo(e){for(var a=e;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||xd(s)||_d(s)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var nn=0,st=null,Rt=null,da=null,ko=!1,Tr=!1,nr=!1,Ao=0,jl=0,zr=null,fb=0;function Kt(){throw Error(d(321))}function hc(e,a){if(a===null)return!1;for(var s=0;s<a.length&&s<e.length;s++)if(!ls(e[s],a[s]))return!1;return!0}function yc(e,a,s,n,o,i){return nn=i,st=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,j.H=e===null||e.memoizedState===null?ep:Bc,nr=!1,i=s(n,o),nr=!1,Tr&&(i=gm(a,s,n,o)),vm(e),i}function vm(e){j.H=wl;var a=Rt!==null&&Rt.next!==null;if(nn=0,da=Rt=st=null,ko=!1,jl=0,zr=null,a)throw Error(d(300));e===null||ua||(e=e.dependencies,e!==null&&bo(e)&&(ua=!0))}function gm(e,a,s,n){st=e;var o=0;do{if(Tr&&(zr=null),jl=0,Tr=!1,25<=o)throw Error(d(301));if(o+=1,da=Rt=null,e.updateQueue!=null){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}j.H=tp,i=a(s,n)}while(Tr);return i}function hb(){var e=j.H,a=e.useState()[0];return a=typeof a.then=="function"?Sl(a):a,e=e.useState()[0],(Rt!==null?Rt.memoizedState:null)!==e&&(st.flags|=1024),a}function bc(){var e=Ao!==0;return Ao=0,e}function vc(e,a,s){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~s}function gc(e){if(ko){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}ko=!1}nn=0,da=Rt=st=null,Tr=!1,jl=Ao=0,zr=null}function Ua(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return da===null?st.memoizedState=da=e:da=da.next=e,da}function aa(){if(Rt===null){var e=st.alternate;e=e!==null?e.memoizedState:null}else e=Rt.next;var a=da===null?st.memoizedState:da.next;if(a!==null)da=a,Rt=e;else{if(e===null)throw st.alternate===null?Error(d(467)):Error(d(310));Rt=e,e={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},da===null?st.memoizedState=da=e:da=da.next=e}return da}function No(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sl(e){var a=jl;return jl+=1,zr===null&&(zr=[]),e=cm(zr,e,a),a=st,(da===null?a.memoizedState:da.next)===null&&(a=a.alternate,j.H=a===null||a.memoizedState===null?ep:Bc),e}function Ro(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Sl(e);if(e.$$typeof===z)return Na(e)}throw Error(d(438,String(e)))}function xc(e){var a=null,s=st.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var n=st.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(a={data:n.data.map(function(o){return o.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=No(),st.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(e),n=0;n<e;n++)s[n]=T;return a.index++,s}function rn(e,a){return typeof a=="function"?a(e):a}function Mo(e){var a=aa();return _c(a,Rt,e)}function _c(e,a,s){var n=e.queue;if(n===null)throw Error(d(311));n.lastRenderedReducer=s;var o=e.baseQueue,i=n.pending;if(i!==null){if(o!==null){var f=o.next;o.next=i.next,i.next=f}a.baseQueue=o=i,n.pending=null}if(i=e.baseState,o===null)e.memoizedState=i;else{a=o.next;var C=f=null,W=null,ie=a,xe=!1;do{var ke=ie.lane&-536870913;if(ke!==ie.lane?(it&ke)===ke:(nn&ke)===ke){var ce=ie.revertLane;if(ce===0)W!==null&&(W=W.next={lane:0,revertLane:0,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),ke===Ar&&(xe=!0);else if((nn&ce)===ce){ie=ie.next,ce===Ar&&(xe=!0);continue}else ke={lane:0,revertLane:ie.revertLane,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},W===null?(C=W=ke,f=i):W=W.next=ke,st.lanes|=ce,En|=ce;ke=ie.action,nr&&s(i,ke),i=ie.hasEagerState?ie.eagerState:s(i,ke)}else ce={lane:ke,revertLane:ie.revertLane,gesture:ie.gesture,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},W===null?(C=W=ce,f=i):W=W.next=ce,st.lanes|=ke,En|=ke;ie=ie.next}while(ie!==null&&ie!==a);if(W===null?f=i:W.next=C,!ls(i,e.memoizedState)&&(ua=!0,xe&&(s=Nr,s!==null)))throw s;e.memoizedState=i,e.baseState=f,e.baseQueue=W,n.lastRenderedState=i}return o===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function jc(e){var a=aa(),s=a.queue;if(s===null)throw Error(d(311));s.lastRenderedReducer=e;var n=s.dispatch,o=s.pending,i=a.memoizedState;if(o!==null){s.pending=null;var f=o=o.next;do i=e(i,f.action),f=f.next;while(f!==o);ls(i,a.memoizedState)||(ua=!0),a.memoizedState=i,a.baseQueue===null&&(a.baseState=i),s.lastRenderedState=i}return[i,n]}function xm(e,a,s){var n=st,o=aa(),i=mt;if(i){if(s===void 0)throw Error(d(407));s=s()}else s=a();var f=!ls((Rt||o).memoizedState,s);if(f&&(o.memoizedState=s,ua=!0),o=o.queue,wc(Sm.bind(null,n,o,e),[e]),o.getSnapshot!==a||f||da!==null&&da.memoizedState.tag&1){if(n.flags|=2048,Er(9,{destroy:void 0},jm.bind(null,n,o,s,a),null),Et===null)throw Error(d(349));i||(nn&127)!==0||_m(n,a,s)}return s}function _m(e,a,s){e.flags|=16384,e={getSnapshot:a,value:s},a=st.updateQueue,a===null?(a=No(),st.updateQueue=a,a.stores=[e]):(s=a.stores,s===null?a.stores=[e]:s.push(e))}function jm(e,a,s,n){a.value=s,a.getSnapshot=n,Cm(a)&&wm(e)}function Sm(e,a,s){return s(function(){Cm(a)&&wm(e)})}function Cm(e){var a=e.getSnapshot;e=e.value;try{var s=a();return!ls(e,s)}catch{return!0}}function wm(e){var a=Xn(e,2);a!==null&&Pa(a,e,2)}function Sc(e){var a=Ua();if(typeof e=="function"){var s=e;if(e=s(),nr){Ge(!0);try{s()}finally{Ge(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rn,lastRenderedState:e},a}function km(e,a,s,n){return e.baseState=s,_c(e,Rt,typeof n=="function"?n:rn)}function yb(e,a,s,n,o){if(zo(e))throw Error(d(485));if(e=a.action,e!==null){var i={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){i.listeners.push(f)}};j.T!==null?s(!0):i.isTransition=!1,n(i),s=a.pending,s===null?(i.next=a.pending=i,Am(a,i)):(i.next=s.next,a.pending=s.next=i)}}function Am(e,a){var s=a.action,n=a.payload,o=e.state;if(a.isTransition){var i=j.T,f={};j.T=f;try{var C=s(o,n),W=j.S;W!==null&&W(f,C),Nm(e,a,C)}catch(ie){Cc(e,a,ie)}finally{i!==null&&f.types!==null&&(i.types=f.types),j.T=i}}else try{i=s(o,n),Nm(e,a,i)}catch(ie){Cc(e,a,ie)}}function Nm(e,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(n){Rm(e,a,n)},function(n){return Cc(e,a,n)}):Rm(e,a,s)}function Rm(e,a,s){a.status="fulfilled",a.value=s,Mm(a),e.state=s,a=e.pending,a!==null&&(s=a.next,s===a?e.pending=null:(s=s.next,a.next=s,Am(e,s)))}function Cc(e,a,s){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do a.status="rejected",a.reason=s,Mm(a),a=a.next;while(a!==n)}e.action=null}function Mm(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function Bm(e,a){return a}function Tm(e,a){if(mt){var s=Et.formState;if(s!==null){e:{var n=st;if(mt){if(qt){t:{for(var o=qt,i=Ss;o.nodeType!==8;){if(!i){o=null;break t}if(o=ws(o.nextSibling),o===null){o=null;break t}}i=o.data,o=i==="F!"||i==="F"?o:null}if(o){qt=ws(o.nextSibling),n=o.data==="F!";break e}}wn(n)}n=!1}n&&(a=s[0])}}return s=Ua(),s.memoizedState=s.baseState=a,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bm,lastRenderedState:a},s.queue=n,s=Jm.bind(null,st,n),n.dispatch=s,n=Sc(!1),i=Mc.bind(null,st,!1,n.queue),n=Ua(),o={state:a,dispatch:null,action:e,pending:null},n.queue=o,s=yb.bind(null,st,o,i,s),o.dispatch=s,n.memoizedState=e,[a,s,!1]}function zm(e){var a=aa();return Em(a,Rt,e)}function Em(e,a,s){if(a=_c(e,a,Bm)[0],e=Mo(rn)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var n=Sl(a)}catch(f){throw f===Rr?xo:f}else n=a;a=aa();var o=a.queue,i=o.dispatch;return s!==a.memoizedState&&(st.flags|=2048,Er(9,{destroy:void 0},bb.bind(null,o,s),null)),[n,i,e]}function bb(e,a){e.action=a}function Dm(e){var a=aa(),s=Rt;if(s!==null)return Em(a,s,e);aa(),a=a.memoizedState,s=aa();var n=s.queue.dispatch;return s.memoizedState=e,[a,n,!1]}function Er(e,a,s,n){return e={tag:e,create:s,deps:n,inst:a,next:null},a=st.updateQueue,a===null&&(a=No(),st.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,a.lastEffect=e),e}function Om(){return aa().memoizedState}function Bo(e,a,s,n){var o=Ua();st.flags|=e,o.memoizedState=Er(1|a,{destroy:void 0},s,n===void 0?null:n)}function To(e,a,s,n){var o=aa();n=n===void 0?null:n;var i=o.memoizedState.inst;Rt!==null&&n!==null&&hc(n,Rt.memoizedState.deps)?o.memoizedState=Er(a,i,s,n):(st.flags|=e,o.memoizedState=Er(1|a,i,s,n))}function Lm(e,a){Bo(8390656,8,e,a)}function wc(e,a){To(2048,8,e,a)}function vb(e){st.flags|=4;var a=st.updateQueue;if(a===null)a=No(),st.updateQueue=a,a.events=[e];else{var s=a.events;s===null?a.events=[e]:s.push(e)}}function Im(e){var a=aa().memoizedState;return vb({ref:a,nextImpl:e}),function(){if((xt&2)!==0)throw Error(d(440));return a.impl.apply(void 0,arguments)}}function Um(e,a){return To(4,2,e,a)}function qm(e,a){return To(4,4,e,a)}function Fm(e,a){if(typeof a=="function"){e=e();var s=a(e);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function Hm(e,a,s){s=s!=null?s.concat([e]):null,To(4,4,Fm.bind(null,a,e),s)}function kc(){}function $m(e,a){var s=aa();a=a===void 0?null:a;var n=s.memoizedState;return a!==null&&hc(a,n[1])?n[0]:(s.memoizedState=[e,a],e)}function Ym(e,a){var s=aa();a=a===void 0?null:a;var n=s.memoizedState;if(a!==null&&hc(a,n[1]))return n[0];if(n=e(),nr){Ge(!0);try{e()}finally{Ge(!1)}}return s.memoizedState=[n,a],n}function Ac(e,a,s){return s===void 0||(nn&1073741824)!==0&&(it&261930)===0?e.memoizedState=a:(e.memoizedState=s,e=Wp(),st.lanes|=e,En|=e,s)}function Wm(e,a,s,n){return ls(s,a)?s:Br.current!==null?(e=Ac(e,s,n),ls(e,a)||(ua=!0),e):(nn&42)===0||(nn&1073741824)!==0&&(it&261930)===0?(ua=!0,e.memoizedState=s):(e=Wp(),st.lanes|=e,En|=e,a)}function Gm(e,a,s,n,o){var i=D.p;D.p=i!==0&&8>i?i:8;var f=j.T,C={};j.T=C,Mc(e,!1,a,s);try{var W=o(),ie=j.S;if(ie!==null&&ie(C,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var xe=pb(W,n);Cl(e,a,xe,ms(e))}else Cl(e,a,n,ms(e))}catch(ke){Cl(e,a,{then:function(){},status:"rejected",reason:ke},ms())}finally{D.p=i,f!==null&&C.types!==null&&(f.types=C.types),j.T=f}}function gb(){}function Nc(e,a,s,n){if(e.tag!==5)throw Error(d(476));var o=Vm(e).queue;Gm(e,o,a,X,s===null?gb:function(){return Qm(e),s(n)})}function Vm(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rn,lastRenderedState:X},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rn,lastRenderedState:s},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function Qm(e){var a=Vm(e);a.next===null&&(a=e.alternate.memoizedState),Cl(e,a.next.queue,{},ms())}function Rc(){return Na(Fl)}function Xm(){return aa().memoizedState}function Zm(){return aa().memoizedState}function xb(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var s=ms();e=Nn(s);var n=Rn(a,e,s);n!==null&&(Pa(n,a,s),gl(n,a,s)),a={cache:nc()},e.payload=a;return}a=a.return}}function _b(e,a,s){var n=ms();s={lane:n,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},zo(e)?Km(a,s):(s=Vi(e,a,s,n),s!==null&&(Pa(s,e,n),Pm(s,a,n)))}function Jm(e,a,s){var n=ms();Cl(e,a,s,n)}function Cl(e,a,s,n){var o={lane:n,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(zo(e))Km(a,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=a.lastRenderedReducer,i!==null))try{var f=a.lastRenderedState,C=i(f,s);if(o.hasEagerState=!0,o.eagerState=C,ls(C,f))return po(e,a,o,0),Et===null&&mo(),!1}catch{}finally{}if(s=Vi(e,a,o,n),s!==null)return Pa(s,e,n),Pm(s,a,n),!0}return!1}function Mc(e,a,s,n){if(n={lane:2,revertLane:id(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},zo(e)){if(a)throw Error(d(479))}else a=Vi(e,s,n,2),a!==null&&Pa(a,e,2)}function zo(e){var a=e.alternate;return e===st||a!==null&&a===st}function Km(e,a){Tr=ko=!0;var s=e.pending;s===null?a.next=a:(a.next=s.next,s.next=a),e.pending=a}function Pm(e,a,s){if((s&4194048)!==0){var n=a.lanes;n&=e.pendingLanes,s|=n,a.lanes=s,Ct(e,s)}}var wl={readContext:Na,use:Ro,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useLayoutEffect:Kt,useInsertionEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useSyncExternalStore:Kt,useId:Kt,useHostTransitionStatus:Kt,useFormState:Kt,useActionState:Kt,useOptimistic:Kt,useMemoCache:Kt,useCacheRefresh:Kt};wl.useEffectEvent=Kt;var ep={readContext:Na,use:Ro,useCallback:function(e,a){return Ua().memoizedState=[e,a===void 0?null:a],e},useContext:Na,useEffect:Lm,useImperativeHandle:function(e,a,s){s=s!=null?s.concat([e]):null,Bo(4194308,4,Fm.bind(null,a,e),s)},useLayoutEffect:function(e,a){return Bo(4194308,4,e,a)},useInsertionEffect:function(e,a){Bo(4,2,e,a)},useMemo:function(e,a){var s=Ua();a=a===void 0?null:a;var n=e();if(nr){Ge(!0);try{e()}finally{Ge(!1)}}return s.memoizedState=[n,a],n},useReducer:function(e,a,s){var n=Ua();if(s!==void 0){var o=s(a);if(nr){Ge(!0);try{s(a)}finally{Ge(!1)}}}else o=a;return n.memoizedState=n.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},n.queue=e,e=e.dispatch=_b.bind(null,st,e),[n.memoizedState,e]},useRef:function(e){var a=Ua();return e={current:e},a.memoizedState=e},useState:function(e){e=Sc(e);var a=e.queue,s=Jm.bind(null,st,a);return a.dispatch=s,[e.memoizedState,s]},useDebugValue:kc,useDeferredValue:function(e,a){var s=Ua();return Ac(s,e,a)},useTransition:function(){var e=Sc(!1);return e=Gm.bind(null,st,e.queue,!0,!1),Ua().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,s){var n=st,o=Ua();if(mt){if(s===void 0)throw Error(d(407));s=s()}else{if(s=a(),Et===null)throw Error(d(349));(it&127)!==0||_m(n,a,s)}o.memoizedState=s;var i={value:s,getSnapshot:a};return o.queue=i,Lm(Sm.bind(null,n,i,e),[e]),n.flags|=2048,Er(9,{destroy:void 0},jm.bind(null,n,i,s,a),null),s},useId:function(){var e=Ua(),a=Et.identifierPrefix;if(mt){var s=Gs,n=Ws;s=(n&~(1<<32-St(n)-1)).toString(32)+s,a="_"+a+"R_"+s,s=Ao++,0<s&&(a+="H"+s.toString(32)),a+="_"}else s=fb++,a="_"+a+"r_"+s.toString(32)+"_";return e.memoizedState=a},useHostTransitionStatus:Rc,useFormState:Tm,useActionState:Tm,useOptimistic:function(e){var a=Ua();a.memoizedState=a.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=Mc.bind(null,st,!0,s),s.dispatch=a,[e,a]},useMemoCache:xc,useCacheRefresh:function(){return Ua().memoizedState=xb.bind(null,st)},useEffectEvent:function(e){var a=Ua(),s={impl:e};return a.memoizedState=s,function(){if((xt&2)!==0)throw Error(d(440));return s.impl.apply(void 0,arguments)}}},Bc={readContext:Na,use:Ro,useCallback:$m,useContext:Na,useEffect:wc,useImperativeHandle:Hm,useInsertionEffect:Um,useLayoutEffect:qm,useMemo:Ym,useReducer:Mo,useRef:Om,useState:function(){return Mo(rn)},useDebugValue:kc,useDeferredValue:function(e,a){var s=aa();return Wm(s,Rt.memoizedState,e,a)},useTransition:function(){var e=Mo(rn)[0],a=aa().memoizedState;return[typeof e=="boolean"?e:Sl(e),a]},useSyncExternalStore:xm,useId:Xm,useHostTransitionStatus:Rc,useFormState:zm,useActionState:zm,useOptimistic:function(e,a){var s=aa();return km(s,Rt,e,a)},useMemoCache:xc,useCacheRefresh:Zm};Bc.useEffectEvent=Im;var tp={readContext:Na,use:Ro,useCallback:$m,useContext:Na,useEffect:wc,useImperativeHandle:Hm,useInsertionEffect:Um,useLayoutEffect:qm,useMemo:Ym,useReducer:jc,useRef:Om,useState:function(){return jc(rn)},useDebugValue:kc,useDeferredValue:function(e,a){var s=aa();return Rt===null?Ac(s,e,a):Wm(s,Rt.memoizedState,e,a)},useTransition:function(){var e=jc(rn)[0],a=aa().memoizedState;return[typeof e=="boolean"?e:Sl(e),a]},useSyncExternalStore:xm,useId:Xm,useHostTransitionStatus:Rc,useFormState:Dm,useActionState:Dm,useOptimistic:function(e,a){var s=aa();return Rt!==null?km(s,Rt,e,a):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:xc,useCacheRefresh:Zm};tp.useEffectEvent=Im;function Tc(e,a,s,n){a=e.memoizedState,s=s(n,a),s=s==null?a:S({},a,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var zc={enqueueSetState:function(e,a,s){e=e._reactInternals;var n=ms(),o=Nn(n);o.payload=a,s!=null&&(o.callback=s),a=Rn(e,o,n),a!==null&&(Pa(a,e,n),gl(a,e,n))},enqueueReplaceState:function(e,a,s){e=e._reactInternals;var n=ms(),o=Nn(n);o.tag=1,o.payload=a,s!=null&&(o.callback=s),a=Rn(e,o,n),a!==null&&(Pa(a,e,n),gl(a,e,n))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var s=ms(),n=Nn(s);n.tag=2,a!=null&&(n.callback=a),a=Rn(e,n,s),a!==null&&(Pa(a,e,s),gl(a,e,s))}};function ap(e,a,s,n,o,i,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,f):a.prototype&&a.prototype.isPureReactComponent?!ul(s,n)||!ul(o,i):!0}function sp(e,a,s,n){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,n),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,n),a.state!==e&&zc.enqueueReplaceState(a,a.state,null)}function rr(e,a){var s=a;if("ref"in a){s={};for(var n in a)n!=="ref"&&(s[n]=a[n])}if(e=e.defaultProps){s===a&&(s=S({},s));for(var o in e)s[o]===void 0&&(s[o]=e[o])}return s}function np(e){uo(e)}function rp(e){console.error(e)}function lp(e){uo(e)}function Eo(e,a){try{var s=e.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(n){setTimeout(function(){throw n})}}function op(e,a,s){try{var n=e.onCaughtError;n(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Ec(e,a,s){return s=Nn(s),s.tag=3,s.payload={element:null},s.callback=function(){Eo(e,a)},s}function ip(e){return e=Nn(e),e.tag=3,e}function cp(e,a,s,n){var o=s.type.getDerivedStateFromError;if(typeof o=="function"){var i=n.value;e.payload=function(){return o(i)},e.callback=function(){op(a,s,n)}}var f=s.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){op(a,s,n),typeof o!="function"&&(Dn===null?Dn=new Set([this]):Dn.add(this));var C=n.stack;this.componentDidCatch(n.value,{componentStack:C!==null?C:""})})}function jb(e,a,s,n,o){if(s.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(a=s.alternate,a!==null&&kr(a,s,o,!0),s=is.current,s!==null){switch(s.tag){case 31:case 13:return Cs===null?Go():s.alternate===null&&Pt===0&&(Pt=3),s.flags&=-257,s.flags|=65536,s.lanes=o,n===_o?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([n]):a.add(n),rd(e,n,o)),!1;case 22:return s.flags|=65536,n===_o?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([n])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([n]):s.add(n)),rd(e,n,o)),!1}throw Error(d(435,s.tag))}return rd(e,n,o),Go(),!1}if(mt)return a=is.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=o,n!==Pi&&(e=Error(d(422),{cause:n}),fl(xs(e,s)))):(n!==Pi&&(a=Error(d(423),{cause:n}),fl(xs(a,s))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,n=xs(n,s),o=Ec(e.stateNode,n,o),dc(e,o),Pt!==4&&(Pt=2)),!1;var i=Error(d(520),{cause:n});if(i=xs(i,s),zl===null?zl=[i]:zl.push(i),Pt!==4&&(Pt=2),a===null)return!0;n=xs(n,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,e=o&-o,s.lanes|=e,e=Ec(s.stateNode,n,e),dc(s,e),!1;case 1:if(a=s.type,i=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(Dn===null||!Dn.has(i))))return s.flags|=65536,o&=-o,s.lanes|=o,o=ip(o),cp(o,e,s,n),dc(s,o),!1}s=s.return}while(s!==null);return!1}var Dc=Error(d(461)),ua=!1;function Ra(e,a,s,n){a.child=e===null?pm(a,null,s,n):sr(a,e.child,s,n)}function dp(e,a,s,n,o){s=s.render;var i=a.ref;if("ref"in n){var f={};for(var C in n)C!=="ref"&&(f[C]=n[C])}else f=n;return Pn(a),n=yc(e,a,s,f,i,o),C=bc(),e!==null&&!ua?(vc(e,a,o),ln(e,a,o)):(mt&&C&&Ji(a),a.flags|=1,Ra(e,a,n,o),a.child)}function up(e,a,s,n,o){if(e===null){var i=s.type;return typeof i=="function"&&!Qi(i)&&i.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=i,mp(e,a,i,n,o)):(e=ho(s.type,null,n,a,a.mode,o),e.ref=a.ref,e.return=a,a.child=e)}if(i=e.child,!$c(e,o)){var f=i.memoizedProps;if(s=s.compare,s=s!==null?s:ul,s(f,n)&&e.ref===a.ref)return ln(e,a,o)}return a.flags|=1,e=en(i,n),e.ref=a.ref,e.return=a,a.child=e}function mp(e,a,s,n,o){if(e!==null){var i=e.memoizedProps;if(ul(i,n)&&e.ref===a.ref)if(ua=!1,a.pendingProps=n=i,$c(e,o))(e.flags&131072)!==0&&(ua=!0);else return a.lanes=e.lanes,ln(e,a,o)}return Oc(e,a,s,n,o)}function pp(e,a,s,n){var o=n.children,i=e!==null?e.memoizedState:null;if(e===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((a.flags&128)!==0){if(i=i!==null?i.baseLanes|s:s,e!==null){for(n=a.child=e.child,o=0;n!==null;)o=o|n.lanes|n.childLanes,n=n.sibling;n=o&~i}else n=0,a.child=null;return fp(e,a,i,s,n)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&go(a,i!==null?i.cachePool:null),i!==null?ym(a,i):mc(),bm(a);else return n=a.lanes=536870912,fp(e,a,i!==null?i.baseLanes|s:s,s,n)}else i!==null?(go(a,i.cachePool),ym(a,i),Bn(),a.memoizedState=null):(e!==null&&go(a,null),mc(),Bn());return Ra(e,a,o,s),a.child}function kl(e,a){return e!==null&&e.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function fp(e,a,s,n,o){var i=lc();return i=i===null?null:{parent:ca._currentValue,pool:i},a.memoizedState={baseLanes:s,cachePool:i},e!==null&&go(a,null),mc(),bm(a),e!==null&&kr(e,a,n,!0),a.childLanes=o,null}function Do(e,a){return a=Lo({mode:a.mode,children:a.children},e.mode),a.ref=e.ref,e.child=a,a.return=e,a}function hp(e,a,s){return sr(a,e.child,null,s),e=Do(a,a.pendingProps),e.flags|=2,cs(a),a.memoizedState=null,e}function Sb(e,a,s){var n=a.pendingProps,o=(a.flags&128)!==0;if(a.flags&=-129,e===null){if(mt){if(n.mode==="hidden")return e=Do(a,n),a.lanes=536870912,kl(null,e);if(fc(a),(e=qt)?(e=Nf(e,Ss),e=e!==null&&e.data==="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:Sn!==null?{id:Ws,overflow:Gs}:null,retryLane:536870912,hydrationErrors:null},s=Ku(e),s.return=a,a.child=s,Aa=a,qt=null)):e=null,e===null)throw wn(a);return a.lanes=536870912,null}return Do(a,n)}var i=e.memoizedState;if(i!==null){var f=i.dehydrated;if(fc(a),o)if(a.flags&256)a.flags&=-257,a=hp(e,a,s);else if(a.memoizedState!==null)a.child=e.child,a.flags|=128,a=null;else throw Error(d(558));else if(ua||kr(e,a,s,!1),o=(s&e.childLanes)!==0,ua||o){if(n=Et,n!==null&&(f=Fa(n,s),f!==0&&f!==i.retryLane))throw i.retryLane=f,Xn(e,f),Pa(n,e,f),Dc;Go(),a=hp(e,a,s)}else e=i.treeContext,qt=ws(f.nextSibling),Aa=a,mt=!0,Cn=null,Ss=!1,e!==null&&tm(a,e),a=Do(a,n),a.flags|=4096;return a}return e=en(e.child,{mode:n.mode,children:n.children}),e.ref=a.ref,a.child=e,e.return=a,e}function Oo(e,a){var s=a.ref;if(s===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(d(284));(e===null||e.ref!==s)&&(a.flags|=4194816)}}function Oc(e,a,s,n,o){return Pn(a),s=yc(e,a,s,n,void 0,o),n=bc(),e!==null&&!ua?(vc(e,a,o),ln(e,a,o)):(mt&&n&&Ji(a),a.flags|=1,Ra(e,a,s,o),a.child)}function yp(e,a,s,n,o,i){return Pn(a),a.updateQueue=null,s=gm(a,n,s,o),vm(e),n=bc(),e!==null&&!ua?(vc(e,a,i),ln(e,a,i)):(mt&&n&&Ji(a),a.flags|=1,Ra(e,a,s,i),a.child)}function bp(e,a,s,n,o){if(Pn(a),a.stateNode===null){var i=jr,f=s.contextType;typeof f=="object"&&f!==null&&(i=Na(f)),i=new s(n,i),a.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=zc,a.stateNode=i,i._reactInternals=a,i=a.stateNode,i.props=n,i.state=a.memoizedState,i.refs={},ic(a),f=s.contextType,i.context=typeof f=="object"&&f!==null?Na(f):jr,i.state=a.memoizedState,f=s.getDerivedStateFromProps,typeof f=="function"&&(Tc(a,s,f,n),i.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(f=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),f!==i.state&&zc.enqueueReplaceState(i,i.state,null),_l(a,n,i,o),xl(),i.state=a.memoizedState),typeof i.componentDidMount=="function"&&(a.flags|=4194308),n=!0}else if(e===null){i=a.stateNode;var C=a.memoizedProps,W=rr(s,C);i.props=W;var ie=i.context,xe=s.contextType;f=jr,typeof xe=="object"&&xe!==null&&(f=Na(xe));var ke=s.getDerivedStateFromProps;xe=typeof ke=="function"||typeof i.getSnapshotBeforeUpdate=="function",C=a.pendingProps!==C,xe||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(C||ie!==f)&&sp(a,i,n,f),An=!1;var ce=a.memoizedState;i.state=ce,_l(a,n,i,o),xl(),ie=a.memoizedState,C||ce!==ie||An?(typeof ke=="function"&&(Tc(a,s,ke,n),ie=a.memoizedState),(W=An||ap(a,s,W,n,ce,ie,f))?(xe||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(a.flags|=4194308)):(typeof i.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=n,a.memoizedState=ie),i.props=n,i.state=ie,i.context=f,n=W):(typeof i.componentDidMount=="function"&&(a.flags|=4194308),n=!1)}else{i=a.stateNode,cc(e,a),f=a.memoizedProps,xe=rr(s,f),i.props=xe,ke=a.pendingProps,ce=i.context,ie=s.contextType,W=jr,typeof ie=="object"&&ie!==null&&(W=Na(ie)),C=s.getDerivedStateFromProps,(ie=typeof C=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(f!==ke||ce!==W)&&sp(a,i,n,W),An=!1,ce=a.memoizedState,i.state=ce,_l(a,n,i,o),xl();var pe=a.memoizedState;f!==ke||ce!==pe||An||e!==null&&e.dependencies!==null&&bo(e.dependencies)?(typeof C=="function"&&(Tc(a,s,C,n),pe=a.memoizedState),(xe=An||ap(a,s,xe,n,ce,pe,W)||e!==null&&e.dependencies!==null&&bo(e.dependencies))?(ie||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,pe,W),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,pe,W)),typeof i.componentDidUpdate=="function"&&(a.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof i.componentDidUpdate!="function"||f===e.memoizedProps&&ce===e.memoizedState||(a.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&ce===e.memoizedState||(a.flags|=1024),a.memoizedProps=n,a.memoizedState=pe),i.props=n,i.state=pe,i.context=W,n=xe):(typeof i.componentDidUpdate!="function"||f===e.memoizedProps&&ce===e.memoizedState||(a.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&ce===e.memoizedState||(a.flags|=1024),n=!1)}return i=n,Oo(e,a),n=(a.flags&128)!==0,i||n?(i=a.stateNode,s=n&&typeof s.getDerivedStateFromError!="function"?null:i.render(),a.flags|=1,e!==null&&n?(a.child=sr(a,e.child,null,o),a.child=sr(a,null,s,o)):Ra(e,a,s,o),a.memoizedState=i.state,e=a.child):e=ln(e,a,o),e}function vp(e,a,s,n){return Jn(),a.flags|=256,Ra(e,a,s,n),a.child}var Lc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ic(e){return{baseLanes:e,cachePool:om()}}function Uc(e,a,s){return e=e!==null?e.childLanes&~s:0,a&&(e|=us),e}function gp(e,a,s){var n=a.pendingProps,o=!1,i=(a.flags&128)!==0,f;if((f=i)||(f=e!==null&&e.memoizedState===null?!1:(ta.current&2)!==0),f&&(o=!0,a.flags&=-129),f=(a.flags&32)!==0,a.flags&=-33,e===null){if(mt){if(o?Mn(a):Bn(),(e=qt)?(e=Nf(e,Ss),e=e!==null&&e.data!=="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:Sn!==null?{id:Ws,overflow:Gs}:null,retryLane:536870912,hydrationErrors:null},s=Ku(e),s.return=a,a.child=s,Aa=a,qt=null)):e=null,e===null)throw wn(a);return _d(e)?a.lanes=32:a.lanes=536870912,null}var C=n.children;return n=n.fallback,o?(Bn(),o=a.mode,C=Lo({mode:"hidden",children:C},o),n=Zn(n,o,s,null),C.return=a,n.return=a,C.sibling=n,a.child=C,n=a.child,n.memoizedState=Ic(s),n.childLanes=Uc(e,f,s),a.memoizedState=Lc,kl(null,n)):(Mn(a),qc(a,C))}var W=e.memoizedState;if(W!==null&&(C=W.dehydrated,C!==null)){if(i)a.flags&256?(Mn(a),a.flags&=-257,a=Fc(e,a,s)):a.memoizedState!==null?(Bn(),a.child=e.child,a.flags|=128,a=null):(Bn(),C=n.fallback,o=a.mode,n=Lo({mode:"visible",children:n.children},o),C=Zn(C,o,s,null),C.flags|=2,n.return=a,C.return=a,n.sibling=C,a.child=n,sr(a,e.child,null,s),n=a.child,n.memoizedState=Ic(s),n.childLanes=Uc(e,f,s),a.memoizedState=Lc,a=kl(null,n));else if(Mn(a),_d(C)){if(f=C.nextSibling&&C.nextSibling.dataset,f)var ie=f.dgst;f=ie,n=Error(d(419)),n.stack="",n.digest=f,fl({value:n,source:null,stack:null}),a=Fc(e,a,s)}else if(ua||kr(e,a,s,!1),f=(s&e.childLanes)!==0,ua||f){if(f=Et,f!==null&&(n=Fa(f,s),n!==0&&n!==W.retryLane))throw W.retryLane=n,Xn(e,n),Pa(f,e,n),Dc;xd(C)||Go(),a=Fc(e,a,s)}else xd(C)?(a.flags|=192,a.child=e.child,a=null):(e=W.treeContext,qt=ws(C.nextSibling),Aa=a,mt=!0,Cn=null,Ss=!1,e!==null&&tm(a,e),a=qc(a,n.children),a.flags|=4096);return a}return o?(Bn(),C=n.fallback,o=a.mode,W=e.child,ie=W.sibling,n=en(W,{mode:"hidden",children:n.children}),n.subtreeFlags=W.subtreeFlags&65011712,ie!==null?C=en(ie,C):(C=Zn(C,o,s,null),C.flags|=2),C.return=a,n.return=a,n.sibling=C,a.child=n,kl(null,n),n=a.child,C=e.child.memoizedState,C===null?C=Ic(s):(o=C.cachePool,o!==null?(W=ca._currentValue,o=o.parent!==W?{parent:W,pool:W}:o):o=om(),C={baseLanes:C.baseLanes|s,cachePool:o}),n.memoizedState=C,n.childLanes=Uc(e,f,s),a.memoizedState=Lc,kl(e.child,n)):(Mn(a),s=e.child,e=s.sibling,s=en(s,{mode:"visible",children:n.children}),s.return=a,s.sibling=null,e!==null&&(f=a.deletions,f===null?(a.deletions=[e],a.flags|=16):f.push(e)),a.child=s,a.memoizedState=null,s)}function qc(e,a){return a=Lo({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function Lo(e,a){return e=os(22,e,null,a),e.lanes=0,e}function Fc(e,a,s){return sr(a,e.child,null,s),e=qc(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function xp(e,a,s){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a),ac(e.return,a,s)}function Hc(e,a,s,n,o,i){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:o,treeForkCount:i}:(f.isBackwards=a,f.rendering=null,f.renderingStartTime=0,f.last=n,f.tail=s,f.tailMode=o,f.treeForkCount=i)}function _p(e,a,s){var n=a.pendingProps,o=n.revealOrder,i=n.tail;n=n.children;var f=ta.current,C=(f&2)!==0;if(C?(f=f&1|2,a.flags|=128):f&=1,ne(ta,f),Ra(e,a,n,s),n=mt?pl:0,!C&&e!==null&&(e.flags&128)!==0)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&xp(e,s,a);else if(e.tag===19)xp(e,s,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(s=a.child,o=null;s!==null;)e=s.alternate,e!==null&&wo(e)===null&&(o=s),s=s.sibling;s=o,s===null?(o=a.child,a.child=null):(o=s.sibling,s.sibling=null),Hc(a,!1,o,s,i,n);break;case"backwards":case"unstable_legacy-backwards":for(s=null,o=a.child,a.child=null;o!==null;){if(e=o.alternate,e!==null&&wo(e)===null){a.child=o;break}e=o.sibling,o.sibling=s,s=o,o=e}Hc(a,!0,s,null,i,n);break;case"together":Hc(a,!1,null,null,void 0,n);break;default:a.memoizedState=null}return a.child}function ln(e,a,s){if(e!==null&&(a.dependencies=e.dependencies),En|=a.lanes,(s&a.childLanes)===0)if(e!==null){if(kr(e,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(d(153));if(a.child!==null){for(e=a.child,s=en(e,e.pendingProps),a.child=s,s.return=a;e.sibling!==null;)e=e.sibling,s=s.sibling=en(e,e.pendingProps),s.return=a;s.sibling=null}return a.child}function $c(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&bo(e)))}function Cb(e,a,s){switch(a.tag){case 3:se(a,a.stateNode.containerInfo),kn(a,ca,e.memoizedState.cache),Jn();break;case 27:case 5:Ie(a);break;case 4:se(a,a.stateNode.containerInfo);break;case 10:kn(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,fc(a),null;break;case 13:var n=a.memoizedState;if(n!==null)return n.dehydrated!==null?(Mn(a),a.flags|=128,null):(s&a.child.childLanes)!==0?gp(e,a,s):(Mn(a),e=ln(e,a,s),e!==null?e.sibling:null);Mn(a);break;case 19:var o=(e.flags&128)!==0;if(n=(s&a.childLanes)!==0,n||(kr(e,a,s,!1),n=(s&a.childLanes)!==0),o){if(n)return _p(e,a,s);a.flags|=128}if(o=a.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ne(ta,ta.current),n)break;return null;case 22:return a.lanes=0,pp(e,a,s,a.pendingProps);case 24:kn(a,ca,e.memoizedState.cache)}return ln(e,a,s)}function jp(e,a,s){if(e!==null)if(e.memoizedProps!==a.pendingProps)ua=!0;else{if(!$c(e,s)&&(a.flags&128)===0)return ua=!1,Cb(e,a,s);ua=(e.flags&131072)!==0}else ua=!1,mt&&(a.flags&1048576)!==0&&em(a,pl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var n=a.pendingProps;if(e=tr(a.elementType),a.type=e,typeof e=="function")Qi(e)?(n=rr(e,n),a.tag=1,a=bp(null,a,e,n,s)):(a.tag=0,a=Oc(null,a,e,n,s));else{if(e!=null){var o=e.$$typeof;if(o===M){a.tag=11,a=dp(null,a,e,n,s);break e}else if(o===K){a.tag=14,a=up(null,a,e,n,s);break e}}throw a=_e(e)||e,Error(d(306,a,""))}}return a;case 0:return Oc(e,a,a.type,a.pendingProps,s);case 1:return n=a.type,o=rr(n,a.pendingProps),bp(e,a,n,o,s);case 3:e:{if(se(a,a.stateNode.containerInfo),e===null)throw Error(d(387));n=a.pendingProps;var i=a.memoizedState;o=i.element,cc(e,a),_l(a,n,null,s);var f=a.memoizedState;if(n=f.cache,kn(a,ca,n),n!==i.cache&&sc(a,[ca],s,!0),xl(),n=f.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:f.cache},a.updateQueue.baseState=i,a.memoizedState=i,a.flags&256){a=vp(e,a,n,s);break e}else if(n!==o){o=xs(Error(d(424)),a),fl(o),a=vp(e,a,n,s);break e}else{switch(e=a.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(qt=ws(e.firstChild),Aa=a,mt=!0,Cn=null,Ss=!0,s=pm(a,null,n,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Jn(),n===o){a=ln(e,a,s);break e}Ra(e,a,n,s)}a=a.child}return a;case 26:return Oo(e,a),e===null?(s=Ef(a.type,null,a.pendingProps,null))?a.memoizedState=s:mt||(s=a.type,e=a.pendingProps,n=Po(be.current).createElement(s),n[ut]=a,n[gt]=e,Ma(n,s,e),ht(n),a.stateNode=n):a.memoizedState=Ef(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return Ie(a),e===null&&mt&&(n=a.stateNode=Bf(a.type,a.pendingProps,be.current),Aa=a,Ss=!0,o=qt,Un(a.type)?(jd=o,qt=ws(n.firstChild)):qt=o),Ra(e,a,a.pendingProps.children,s),Oo(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&mt&&((o=n=qt)&&(n=ev(n,a.type,a.pendingProps,Ss),n!==null?(a.stateNode=n,Aa=a,qt=ws(n.firstChild),Ss=!1,o=!0):o=!1),o||wn(a)),Ie(a),o=a.type,i=a.pendingProps,f=e!==null?e.memoizedProps:null,n=i.children,bd(o,i)?n=null:f!==null&&bd(o,f)&&(a.flags|=32),a.memoizedState!==null&&(o=yc(e,a,hb,null,null,s),Fl._currentValue=o),Oo(e,a),Ra(e,a,n,s),a.child;case 6:return e===null&&mt&&((e=s=qt)&&(s=tv(s,a.pendingProps,Ss),s!==null?(a.stateNode=s,Aa=a,qt=null,e=!0):e=!1),e||wn(a)),null;case 13:return gp(e,a,s);case 4:return se(a,a.stateNode.containerInfo),n=a.pendingProps,e===null?a.child=sr(a,null,n,s):Ra(e,a,n,s),a.child;case 11:return dp(e,a,a.type,a.pendingProps,s);case 7:return Ra(e,a,a.pendingProps,s),a.child;case 8:return Ra(e,a,a.pendingProps.children,s),a.child;case 12:return Ra(e,a,a.pendingProps.children,s),a.child;case 10:return n=a.pendingProps,kn(a,a.type,n.value),Ra(e,a,n.children,s),a.child;case 9:return o=a.type._context,n=a.pendingProps.children,Pn(a),o=Na(o),n=n(o),a.flags|=1,Ra(e,a,n,s),a.child;case 14:return up(e,a,a.type,a.pendingProps,s);case 15:return mp(e,a,a.type,a.pendingProps,s);case 19:return _p(e,a,s);case 31:return Sb(e,a,s);case 22:return pp(e,a,s,a.pendingProps);case 24:return Pn(a),n=Na(ca),e===null?(o=lc(),o===null&&(o=Et,i=nc(),o.pooledCache=i,i.refCount++,i!==null&&(o.pooledCacheLanes|=s),o=i),a.memoizedState={parent:n,cache:o},ic(a),kn(a,ca,o)):((e.lanes&s)!==0&&(cc(e,a),_l(a,null,null,s),xl()),o=e.memoizedState,i=a.memoizedState,o.parent!==n?(o={parent:n,cache:n},a.memoizedState=o,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=o),kn(a,ca,n)):(n=i.cache,kn(a,ca,n),n!==o.cache&&sc(a,[ca],s,!0))),Ra(e,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(d(156,a.tag))}function on(e){e.flags|=4}function Yc(e,a,s,n,o){if((a=(e.mode&32)!==0)&&(a=!1),a){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(Xp())e.flags|=8192;else throw ar=_o,oc}else e.flags&=-16777217}function Sp(e,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Uf(a))if(Xp())e.flags|=8192;else throw ar=_o,oc}function Io(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?_a():536870912,e.lanes|=a,Ir|=a)}function Al(e,a){if(!mt)switch(e.tailMode){case"hidden":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ft(e){var a=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(a)for(var o=e.child;o!==null;)s|=o.lanes|o.childLanes,n|=o.subtreeFlags&65011712,n|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)s|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=n,e.childLanes=s,a}function wb(e,a,s){var n=a.pendingProps;switch(Ki(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(a),null;case 1:return Ft(a),null;case 3:return s=a.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),a.memoizedState.cache!==n&&(a.flags|=2048),sn(ca),Ae(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(wr(a)?on(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ec())),Ft(a),null;case 26:var o=a.type,i=a.memoizedState;return e===null?(on(a),i!==null?(Ft(a),Sp(a,i)):(Ft(a),Yc(a,o,null,n,s))):i?i!==e.memoizedState?(on(a),Ft(a),Sp(a,i)):(Ft(a),a.flags&=-16777217):(e=e.memoizedProps,e!==n&&on(a),Ft(a),Yc(a,o,e,n,s)),null;case 27:if(Me(a),s=be.current,o=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==n&&on(a);else{if(!n){if(a.stateNode===null)throw Error(d(166));return Ft(a),null}e=U.current,wr(a)?am(a):(e=Bf(o,n,s),a.stateNode=e,on(a))}return Ft(a),null;case 5:if(Me(a),o=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==n&&on(a);else{if(!n){if(a.stateNode===null)throw Error(d(166));return Ft(a),null}if(i=U.current,wr(a))am(a);else{var f=Po(be.current);switch(i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof n.is=="string"?f.createElement("select",{is:n.is}):f.createElement("select"),n.multiple?i.multiple=!0:n.size&&(i.size=n.size);break;default:i=typeof n.is=="string"?f.createElement(o,{is:n.is}):f.createElement(o)}}i[ut]=a,i[gt]=n;e:for(f=a.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===a)break e;for(;f.sibling===null;){if(f.return===null||f.return===a)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}a.stateNode=i;e:switch(Ma(i,o,n),o){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&on(a)}}return Ft(a),Yc(a,a.type,e===null?null:e.memoizedProps,a.pendingProps,s),null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==n&&on(a);else{if(typeof n!="string"&&a.stateNode===null)throw Error(d(166));if(e=be.current,wr(a)){if(e=a.stateNode,s=a.memoizedProps,n=null,o=Aa,o!==null)switch(o.tag){case 27:case 5:n=o.memoizedProps}e[ut]=a,e=!!(e.nodeValue===s||n!==null&&n.suppressHydrationWarning===!0||xf(e.nodeValue,s)),e||wn(a,!0)}else e=Po(e).createTextNode(n),e[ut]=a,a.stateNode=e}return Ft(a),null;case 31:if(s=a.memoizedState,e===null||e.memoizedState!==null){if(n=wr(a),s!==null){if(e===null){if(!n)throw Error(d(318));if(e=a.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(557));e[ut]=a}else Jn(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ft(a),e=!1}else s=ec(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return a.flags&256?(cs(a),a):(cs(a),null);if((a.flags&128)!==0)throw Error(d(558))}return Ft(a),null;case 13:if(n=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=wr(a),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(d(318));if(o=a.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(d(317));o[ut]=a}else Jn(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ft(a),o=!1}else o=ec(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return a.flags&256?(cs(a),a):(cs(a),null)}return cs(a),(a.flags&128)!==0?(a.lanes=s,a):(s=n!==null,e=e!==null&&e.memoizedState!==null,s&&(n=a.child,o=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(o=n.alternate.memoizedState.cachePool.pool),i=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),i!==o&&(n.flags|=2048)),s!==e&&s&&(a.child.flags|=8192),Io(a,a.updateQueue),Ft(a),null);case 4:return Ae(),e===null&&md(a.stateNode.containerInfo),Ft(a),null;case 10:return sn(a.type),Ft(a),null;case 19:if(Y(ta),n=a.memoizedState,n===null)return Ft(a),null;if(o=(a.flags&128)!==0,i=n.rendering,i===null)if(o)Al(n,!1);else{if(Pt!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(i=wo(e),i!==null){for(a.flags|=128,Al(n,!1),e=i.updateQueue,a.updateQueue=e,Io(a,e),a.subtreeFlags=0,e=s,s=a.child;s!==null;)Ju(s,e),s=s.sibling;return ne(ta,ta.current&1|2),mt&&tn(a,n.treeForkCount),a.child}e=e.sibling}n.tail!==null&&Re()>$o&&(a.flags|=128,o=!0,Al(n,!1),a.lanes=4194304)}else{if(!o)if(e=wo(i),e!==null){if(a.flags|=128,o=!0,e=e.updateQueue,a.updateQueue=e,Io(a,e),Al(n,!0),n.tail===null&&n.tailMode==="hidden"&&!i.alternate&&!mt)return Ft(a),null}else 2*Re()-n.renderingStartTime>$o&&s!==536870912&&(a.flags|=128,o=!0,Al(n,!1),a.lanes=4194304);n.isBackwards?(i.sibling=a.child,a.child=i):(e=n.last,e!==null?e.sibling=i:a.child=i,n.last=i)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=Re(),e.sibling=null,s=ta.current,ne(ta,o?s&1|2:s&1),mt&&tn(a,n.treeForkCount),e):(Ft(a),null);case 22:case 23:return cs(a),pc(),n=a.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(a.flags|=8192):n&&(a.flags|=8192),n?(s&536870912)!==0&&(a.flags&128)===0&&(Ft(a),a.subtreeFlags&6&&(a.flags|=8192)):Ft(a),s=a.updateQueue,s!==null&&Io(a,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==s&&(a.flags|=2048),e!==null&&Y(er),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),sn(ca),Ft(a),null;case 25:return null;case 30:return null}throw Error(d(156,a.tag))}function kb(e,a){switch(Ki(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return sn(ca),Ae(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return Me(a),null;case 31:if(a.memoizedState!==null){if(cs(a),a.alternate===null)throw Error(d(340));Jn()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 13:if(cs(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(d(340));Jn()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return Y(ta),null;case 4:return Ae(),null;case 10:return sn(a.type),null;case 22:case 23:return cs(a),pc(),e!==null&&Y(er),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return sn(ca),null;case 25:return null;default:return null}}function Cp(e,a){switch(Ki(a),a.tag){case 3:sn(ca),Ae();break;case 26:case 27:case 5:Me(a);break;case 4:Ae();break;case 31:a.memoizedState!==null&&cs(a);break;case 13:cs(a);break;case 19:Y(ta);break;case 10:sn(a.type);break;case 22:case 23:cs(a),pc(),e!==null&&Y(er);break;case 24:sn(ca)}}function Nl(e,a){try{var s=a.updateQueue,n=s!==null?s.lastEffect:null;if(n!==null){var o=n.next;s=o;do{if((s.tag&e)===e){n=void 0;var i=s.create,f=s.inst;n=i(),f.destroy=n}s=s.next}while(s!==o)}}catch(C){Nt(a,a.return,C)}}function Tn(e,a,s){try{var n=a.updateQueue,o=n!==null?n.lastEffect:null;if(o!==null){var i=o.next;n=i;do{if((n.tag&e)===e){var f=n.inst,C=f.destroy;if(C!==void 0){f.destroy=void 0,o=a;var W=s,ie=C;try{ie()}catch(xe){Nt(o,W,xe)}}}n=n.next}while(n!==i)}}catch(xe){Nt(a,a.return,xe)}}function wp(e){var a=e.updateQueue;if(a!==null){var s=e.stateNode;try{hm(a,s)}catch(n){Nt(e,e.return,n)}}}function kp(e,a,s){s.props=rr(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(n){Nt(e,a,n)}}function Rl(e,a){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof s=="function"?e.refCleanup=s(n):s.current=n}}catch(o){Nt(e,a,o)}}function Vs(e,a){var s=e.ref,n=e.refCleanup;if(s!==null)if(typeof n=="function")try{n()}catch(o){Nt(e,a,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(o){Nt(e,a,o)}else s.current=null}function Ap(e){var a=e.type,s=e.memoizedProps,n=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&n.focus();break e;case"img":s.src?n.src=s.src:s.srcSet&&(n.srcset=s.srcSet)}}catch(o){Nt(e,e.return,o)}}function Wc(e,a,s){try{var n=e.stateNode;Qb(n,e.type,s,a),n[gt]=a}catch(o){Nt(e,e.return,o)}}function Np(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Un(e.type)||e.tag===4}function Gc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Np(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Un(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vc(e,a,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(e),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=Oe));else if(n!==4&&(n===27&&Un(e.type)&&(s=e.stateNode,a=null),e=e.child,e!==null))for(Vc(e,a,s),e=e.sibling;e!==null;)Vc(e,a,s),e=e.sibling}function Uo(e,a,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,a?s.insertBefore(e,a):s.appendChild(e);else if(n!==4&&(n===27&&Un(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Uo(e,a,s),e=e.sibling;e!==null;)Uo(e,a,s),e=e.sibling}function Rp(e){var a=e.stateNode,s=e.memoizedProps;try{for(var n=e.type,o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Ma(a,n,s),a[ut]=e,a[gt]=s}catch(i){Nt(e,e.return,i)}}var cn=!1,ma=!1,Qc=!1,Mp=typeof WeakSet=="function"?WeakSet:Set,xa=null;function Ab(e,a){if(e=e.containerInfo,hd=li,e=Hu(e),Fi(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var o=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var f=0,C=-1,W=-1,ie=0,xe=0,ke=e,ce=null;t:for(;;){for(var pe;ke!==s||o!==0&&ke.nodeType!==3||(C=f+o),ke!==i||n!==0&&ke.nodeType!==3||(W=f+n),ke.nodeType===3&&(f+=ke.nodeValue.length),(pe=ke.firstChild)!==null;)ce=ke,ke=pe;for(;;){if(ke===e)break t;if(ce===s&&++ie===o&&(C=f),ce===i&&++xe===n&&(W=f),(pe=ke.nextSibling)!==null)break;ke=ce,ce=ke.parentNode}ke=pe}s=C===-1||W===-1?null:{start:C,end:W}}else s=null}s=s||{start:0,end:0}}else s=null;for(yd={focusedElem:e,selectionRange:s},li=!1,xa=a;xa!==null;)if(a=xa,e=a.child,(a.subtreeFlags&1028)!==0&&e!==null)e.return=a,xa=e;else for(;xa!==null;){switch(a=xa,i=a.alternate,e=a.flags,a.tag){case 0:if((e&4)!==0&&(e=a.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)o=e[s],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&i!==null){e=void 0,s=a,o=i.memoizedProps,i=i.memoizedState,n=s.stateNode;try{var Le=rr(s.type,o);e=n.getSnapshotBeforeUpdate(Le,i),n.__reactInternalSnapshotBeforeUpdate=e}catch(Ve){Nt(s,s.return,Ve)}}break;case 3:if((e&1024)!==0){if(e=a.stateNode.containerInfo,s=e.nodeType,s===9)gd(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(d(163))}if(e=a.sibling,e!==null){e.return=a.return,xa=e;break}xa=a.return}}function Bp(e,a,s){var n=s.flags;switch(s.tag){case 0:case 11:case 15:un(e,s),n&4&&Nl(5,s);break;case 1:if(un(e,s),n&4)if(e=s.stateNode,a===null)try{e.componentDidMount()}catch(f){Nt(s,s.return,f)}else{var o=rr(s.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(o,a,e.__reactInternalSnapshotBeforeUpdate)}catch(f){Nt(s,s.return,f)}}n&64&&wp(s),n&512&&Rl(s,s.return);break;case 3:if(un(e,s),n&64&&(e=s.updateQueue,e!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{hm(e,a)}catch(f){Nt(s,s.return,f)}}break;case 27:a===null&&n&4&&Rp(s);case 26:case 5:un(e,s),a===null&&n&4&&Ap(s),n&512&&Rl(s,s.return);break;case 12:un(e,s);break;case 31:un(e,s),n&4&&Ep(e,s);break;case 13:un(e,s),n&4&&Dp(e,s),n&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=Ob.bind(null,s),av(e,s))));break;case 22:if(n=s.memoizedState!==null||cn,!n){a=a!==null&&a.memoizedState!==null||ma,o=cn;var i=ma;cn=n,(ma=a)&&!i?mn(e,s,(s.subtreeFlags&8772)!==0):un(e,s),cn=o,ma=i}break;case 30:break;default:un(e,s)}}function Tp(e){var a=e.alternate;a!==null&&(e.alternate=null,Tp(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&Vt(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Yt=null,Xa=!1;function dn(e,a,s){for(s=s.child;s!==null;)zp(e,a,s),s=s.sibling}function zp(e,a,s){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(Qe,s)}catch{}switch(s.tag){case 26:ma||Vs(s,a),dn(e,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:ma||Vs(s,a);var n=Yt,o=Xa;Un(s.type)&&(Yt=s.stateNode,Xa=!1),dn(e,a,s),Il(s.stateNode),Yt=n,Xa=o;break;case 5:ma||Vs(s,a);case 6:if(n=Yt,o=Xa,Yt=null,dn(e,a,s),Yt=n,Xa=o,Yt!==null)if(Xa)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(s.stateNode)}catch(i){Nt(s,a,i)}else try{Yt.removeChild(s.stateNode)}catch(i){Nt(s,a,i)}break;case 18:Yt!==null&&(Xa?(e=Yt,kf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),Gr(e)):kf(Yt,s.stateNode));break;case 4:n=Yt,o=Xa,Yt=s.stateNode.containerInfo,Xa=!0,dn(e,a,s),Yt=n,Xa=o;break;case 0:case 11:case 14:case 15:Tn(2,s,a),ma||Tn(4,s,a),dn(e,a,s);break;case 1:ma||(Vs(s,a),n=s.stateNode,typeof n.componentWillUnmount=="function"&&kp(s,a,n)),dn(e,a,s);break;case 21:dn(e,a,s);break;case 22:ma=(n=ma)||s.memoizedState!==null,dn(e,a,s),ma=n;break;default:dn(e,a,s)}}function Ep(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Gr(e)}catch(s){Nt(a,a.return,s)}}}function Dp(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Gr(e)}catch(s){Nt(a,a.return,s)}}function Nb(e){switch(e.tag){case 31:case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new Mp),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new Mp),a;default:throw Error(d(435,e.tag))}}function qo(e,a){var s=Nb(e);a.forEach(function(n){if(!s.has(n)){s.add(n);var o=Lb.bind(null,e,n);n.then(o,o)}})}function Za(e,a){var s=a.deletions;if(s!==null)for(var n=0;n<s.length;n++){var o=s[n],i=e,f=a,C=f;e:for(;C!==null;){switch(C.tag){case 27:if(Un(C.type)){Yt=C.stateNode,Xa=!1;break e}break;case 5:Yt=C.stateNode,Xa=!1;break e;case 3:case 4:Yt=C.stateNode.containerInfo,Xa=!0;break e}C=C.return}if(Yt===null)throw Error(d(160));zp(i,f,o),Yt=null,Xa=!1,i=o.alternate,i!==null&&(i.return=null),o.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Op(a,e),a=a.sibling}var Is=null;function Op(e,a){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Za(a,e),Ja(e),n&4&&(Tn(3,e,e.return),Nl(3,e),Tn(5,e,e.return));break;case 1:Za(a,e),Ja(e),n&512&&(ma||s===null||Vs(s,s.return)),n&64&&cn&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?n:s.concat(n))));break;case 26:var o=Is;if(Za(a,e),Ja(e),n&512&&(ma||s===null||Vs(s,s.return)),n&4){var i=s!==null?s.memoizedState:null;if(n=e.memoizedState,s===null)if(n===null)if(e.stateNode===null){e:{n=e.type,s=e.memoizedProps,o=o.ownerDocument||o;t:switch(n){case"title":i=o.getElementsByTagName("title")[0],(!i||i[ia]||i[ut]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=o.createElement(n),o.head.insertBefore(i,o.querySelector("head > title"))),Ma(i,n,s),i[ut]=e,ht(i),n=i;break e;case"link":var f=Lf("link","href",o).get(n+(s.href||""));if(f){for(var C=0;C<f.length;C++)if(i=f[C],i.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&i.getAttribute("rel")===(s.rel==null?null:s.rel)&&i.getAttribute("title")===(s.title==null?null:s.title)&&i.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){f.splice(C,1);break t}}i=o.createElement(n),Ma(i,n,s),o.head.appendChild(i);break;case"meta":if(f=Lf("meta","content",o).get(n+(s.content||""))){for(C=0;C<f.length;C++)if(i=f[C],i.getAttribute("content")===(s.content==null?null:""+s.content)&&i.getAttribute("name")===(s.name==null?null:s.name)&&i.getAttribute("property")===(s.property==null?null:s.property)&&i.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&i.getAttribute("charset")===(s.charSet==null?null:s.charSet)){f.splice(C,1);break t}}i=o.createElement(n),Ma(i,n,s),o.head.appendChild(i);break;default:throw Error(d(468,n))}i[ut]=e,ht(i),n=i}e.stateNode=n}else If(o,e.type,e.stateNode);else e.stateNode=Of(o,n,e.memoizedProps);else i!==n?(i===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):i.count--,n===null?If(o,e.type,e.stateNode):Of(o,n,e.memoizedProps)):n===null&&e.stateNode!==null&&Wc(e,e.memoizedProps,s.memoizedProps)}break;case 27:Za(a,e),Ja(e),n&512&&(ma||s===null||Vs(s,s.return)),s!==null&&n&4&&Wc(e,e.memoizedProps,s.memoizedProps);break;case 5:if(Za(a,e),Ja(e),n&512&&(ma||s===null||Vs(s,s.return)),e.flags&32){o=e.stateNode;try{vs(o,"")}catch(Le){Nt(e,e.return,Le)}}n&4&&e.stateNode!=null&&(o=e.memoizedProps,Wc(e,o,s!==null?s.memoizedProps:o)),n&1024&&(Qc=!0);break;case 6:if(Za(a,e),Ja(e),n&4){if(e.stateNode===null)throw Error(d(162));n=e.memoizedProps,s=e.stateNode;try{s.nodeValue=n}catch(Le){Nt(e,e.return,Le)}}break;case 3:if(ai=null,o=Is,Is=ei(a.containerInfo),Za(a,e),Is=o,Ja(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Gr(a.containerInfo)}catch(Le){Nt(e,e.return,Le)}Qc&&(Qc=!1,Lp(e));break;case 4:n=Is,Is=ei(e.stateNode.containerInfo),Za(a,e),Ja(e),Is=n;break;case 12:Za(a,e),Ja(e);break;case 31:Za(a,e),Ja(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,qo(e,n)));break;case 13:Za(a,e),Ja(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Ho=Re()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,qo(e,n)));break;case 22:o=e.memoizedState!==null;var W=s!==null&&s.memoizedState!==null,ie=cn,xe=ma;if(cn=ie||o,ma=xe||W,Za(a,e),ma=xe,cn=ie,Ja(e),n&8192)e:for(a=e.stateNode,a._visibility=o?a._visibility&-2:a._visibility|1,o&&(s===null||W||cn||ma||lr(e)),s=null,a=e;;){if(a.tag===5||a.tag===26){if(s===null){W=s=a;try{if(i=W.stateNode,o)f=i.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{C=W.stateNode;var ke=W.memoizedProps.style,ce=ke!=null&&ke.hasOwnProperty("display")?ke.display:null;C.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(Le){Nt(W,W.return,Le)}}}else if(a.tag===6){if(s===null){W=a;try{W.stateNode.nodeValue=o?"":W.memoizedProps}catch(Le){Nt(W,W.return,Le)}}}else if(a.tag===18){if(s===null){W=a;try{var pe=W.stateNode;o?Af(pe,!0):Af(W.stateNode,!1)}catch(Le){Nt(W,W.return,Le)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}n&4&&(n=e.updateQueue,n!==null&&(s=n.retryQueue,s!==null&&(n.retryQueue=null,qo(e,s))));break;case 19:Za(a,e),Ja(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,qo(e,n)));break;case 30:break;case 21:break;default:Za(a,e),Ja(e)}}function Ja(e){var a=e.flags;if(a&2){try{for(var s,n=e.return;n!==null;){if(Np(n)){s=n;break}n=n.return}if(s==null)throw Error(d(160));switch(s.tag){case 27:var o=s.stateNode,i=Gc(e);Uo(e,i,o);break;case 5:var f=s.stateNode;s.flags&32&&(vs(f,""),s.flags&=-33);var C=Gc(e);Uo(e,C,f);break;case 3:case 4:var W=s.stateNode.containerInfo,ie=Gc(e);Vc(e,ie,W);break;default:throw Error(d(161))}}catch(xe){Nt(e,e.return,xe)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function Lp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;Lp(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function un(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Bp(e,a.alternate,a),a=a.sibling}function lr(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:Tn(4,a,a.return),lr(a);break;case 1:Vs(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&kp(a,a.return,s),lr(a);break;case 27:Il(a.stateNode);case 26:case 5:Vs(a,a.return),lr(a);break;case 22:a.memoizedState===null&&lr(a);break;case 30:lr(a);break;default:lr(a)}e=e.sibling}}function mn(e,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var n=a.alternate,o=e,i=a,f=i.flags;switch(i.tag){case 0:case 11:case 15:mn(o,i,s),Nl(4,i);break;case 1:if(mn(o,i,s),n=i,o=n.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(ie){Nt(n,n.return,ie)}if(n=i,o=n.updateQueue,o!==null){var C=n.stateNode;try{var W=o.shared.hiddenCallbacks;if(W!==null)for(o.shared.hiddenCallbacks=null,o=0;o<W.length;o++)fm(W[o],C)}catch(ie){Nt(n,n.return,ie)}}s&&f&64&&wp(i),Rl(i,i.return);break;case 27:Rp(i);case 26:case 5:mn(o,i,s),s&&n===null&&f&4&&Ap(i),Rl(i,i.return);break;case 12:mn(o,i,s);break;case 31:mn(o,i,s),s&&f&4&&Ep(o,i);break;case 13:mn(o,i,s),s&&f&4&&Dp(o,i);break;case 22:i.memoizedState===null&&mn(o,i,s),Rl(i,i.return);break;case 30:break;default:mn(o,i,s)}a=a.sibling}}function Xc(e,a){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&hl(s))}function Zc(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&hl(e))}function Us(e,a,s,n){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ip(e,a,s,n),a=a.sibling}function Ip(e,a,s,n){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Us(e,a,s,n),o&2048&&Nl(9,a);break;case 1:Us(e,a,s,n);break;case 3:Us(e,a,s,n),o&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&hl(e)));break;case 12:if(o&2048){Us(e,a,s,n),e=a.stateNode;try{var i=a.memoizedProps,f=i.id,C=i.onPostCommit;typeof C=="function"&&C(f,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(W){Nt(a,a.return,W)}}else Us(e,a,s,n);break;case 31:Us(e,a,s,n);break;case 13:Us(e,a,s,n);break;case 23:break;case 22:i=a.stateNode,f=a.alternate,a.memoizedState!==null?i._visibility&2?Us(e,a,s,n):Ml(e,a):i._visibility&2?Us(e,a,s,n):(i._visibility|=2,Dr(e,a,s,n,(a.subtreeFlags&10256)!==0||!1)),o&2048&&Xc(f,a);break;case 24:Us(e,a,s,n),o&2048&&Zc(a.alternate,a);break;default:Us(e,a,s,n)}}function Dr(e,a,s,n,o){for(o=o&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var i=e,f=a,C=s,W=n,ie=f.flags;switch(f.tag){case 0:case 11:case 15:Dr(i,f,C,W,o),Nl(8,f);break;case 23:break;case 22:var xe=f.stateNode;f.memoizedState!==null?xe._visibility&2?Dr(i,f,C,W,o):Ml(i,f):(xe._visibility|=2,Dr(i,f,C,W,o)),o&&ie&2048&&Xc(f.alternate,f);break;case 24:Dr(i,f,C,W,o),o&&ie&2048&&Zc(f.alternate,f);break;default:Dr(i,f,C,W,o)}a=a.sibling}}function Ml(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=e,n=a,o=n.flags;switch(n.tag){case 22:Ml(s,n),o&2048&&Xc(n.alternate,n);break;case 24:Ml(s,n),o&2048&&Zc(n.alternate,n);break;default:Ml(s,n)}a=a.sibling}}var Bl=8192;function Or(e,a,s){if(e.subtreeFlags&Bl)for(e=e.child;e!==null;)Up(e,a,s),e=e.sibling}function Up(e,a,s){switch(e.tag){case 26:Or(e,a,s),e.flags&Bl&&e.memoizedState!==null&&fv(s,Is,e.memoizedState,e.memoizedProps);break;case 5:Or(e,a,s);break;case 3:case 4:var n=Is;Is=ei(e.stateNode.containerInfo),Or(e,a,s),Is=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Bl,Bl=16777216,Or(e,a,s),Bl=n):Or(e,a,s));break;default:Or(e,a,s)}}function qp(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function Tl(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var n=a[s];xa=n,Hp(n,e)}qp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Fp(e),e=e.sibling}function Fp(e){switch(e.tag){case 0:case 11:case 15:Tl(e),e.flags&2048&&Tn(9,e,e.return);break;case 3:Tl(e);break;case 12:Tl(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,Fo(e)):Tl(e);break;default:Tl(e)}}function Fo(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var n=a[s];xa=n,Hp(n,e)}qp(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:Tn(8,a,a.return),Fo(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,Fo(a));break;default:Fo(a)}e=e.sibling}}function Hp(e,a){for(;xa!==null;){var s=xa;switch(s.tag){case 0:case 11:case 15:Tn(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var n=s.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:hl(s.memoizedState.cache)}if(n=s.child,n!==null)n.return=s,xa=n;else e:for(s=e;xa!==null;){n=xa;var o=n.sibling,i=n.return;if(Tp(n),n===s){xa=null;break e}if(o!==null){o.return=i,xa=o;break e}xa=i}}}var Rb={getCacheForType:function(e){var a=Na(ca),s=a.data.get(e);return s===void 0&&(s=e(),a.data.set(e,s)),s},cacheSignal:function(){return Na(ca).controller.signal}},Mb=typeof WeakMap=="function"?WeakMap:Map,xt=0,Et=null,lt=null,it=0,At=0,ds=null,zn=!1,Lr=!1,Jc=!1,pn=0,Pt=0,En=0,or=0,Kc=0,us=0,Ir=0,zl=null,Ka=null,Pc=!1,Ho=0,$p=0,$o=1/0,Yo=null,Dn=null,ba=0,On=null,Ur=null,fn=0,ed=0,td=null,Yp=null,El=0,ad=null;function ms(){return(xt&2)!==0&&it!==0?it&-it:j.T!==null?id():ns()}function Wp(){if(us===0)if((it&536870912)===0||mt){var e=dt;dt<<=1,(dt&3932160)===0&&(dt=262144),us=e}else us=536870912;return e=is.current,e!==null&&(e.flags|=32),us}function Pa(e,a,s){(e===Et&&(At===2||At===9)||e.cancelPendingCommit!==null)&&(qr(e,0),Ln(e,it,us,!1)),Ut(e,s),((xt&2)===0||e!==Et)&&(e===Et&&((xt&2)===0&&(or|=s),Pt===4&&Ln(e,it,us,!1)),Qs(e))}function Gp(e,a,s){if((xt&6)!==0)throw Error(d(327));var n=!s&&(a&127)===0&&(a&e.expiredLanes)===0||nt(e,a),o=n?zb(e,a):nd(e,a,!0),i=n;do{if(o===0){Lr&&!n&&Ln(e,a,0,!1);break}else{if(s=e.current.alternate,i&&!Bb(s)){o=nd(e,a,!1),i=!1;continue}if(o===2){if(i=a,e.errorRecoveryDisabledLanes&i)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){a=f;e:{var C=e;o=zl;var W=C.current.memoizedState.isDehydrated;if(W&&(qr(C,f).flags|=256),f=nd(C,f,!1),f!==2){if(Jc&&!W){C.errorRecoveryDisabledLanes|=i,or|=i,o=4;break e}i=Ka,Ka=o,i!==null&&(Ka===null?Ka=i:Ka.push.apply(Ka,i))}o=f}if(i=!1,o!==2)continue}}if(o===1){qr(e,0),Ln(e,a,0,!0);break}e:{switch(n=e,i=o,i){case 0:case 1:throw Error(d(345));case 4:if((a&4194048)!==a)break;case 6:Ln(n,a,us,!zn);break e;case 2:Ka=null;break;case 3:case 5:break;default:throw Error(d(329))}if((a&62914560)===a&&(o=Ho+300-Re(),10<o)){if(Ln(n,a,us,!zn),ha(n,0,!0)!==0)break e;fn=a,n.timeoutHandle=Cf(Vp.bind(null,n,s,Ka,Yo,Pc,a,us,or,Ir,zn,i,"Throttled",-0,0),o);break e}Vp(n,s,Ka,Yo,Pc,a,us,or,Ir,zn,i,null,-0,0)}}break}while(!0);Qs(e)}function Vp(e,a,s,n,o,i,f,C,W,ie,xe,ke,ce,pe){if(e.timeoutHandle=-1,ke=a.subtreeFlags,ke&8192||(ke&16785408)===16785408){ke={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Oe},Up(a,i,ke);var Le=(i&62914560)===i?Ho-Re():(i&4194048)===i?$p-Re():0;if(Le=hv(ke,Le),Le!==null){fn=i,e.cancelPendingCommit=Le(tf.bind(null,e,a,i,s,n,o,f,C,W,xe,ke,null,ce,pe)),Ln(e,i,f,!ie);return}}tf(e,a,i,s,n,o,f,C,W)}function Bb(e){for(var a=e;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var n=0;n<s.length;n++){var o=s[n],i=o.getSnapshot;o=o.value;try{if(!ls(i(),o))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ln(e,a,s,n){a&=~Kc,a&=~or,e.suspendedLanes|=a,e.pingedLanes&=~a,n&&(e.warmLanes|=a),n=e.expirationTimes;for(var o=a;0<o;){var i=31-St(o),f=1<<i;n[i]=-1,o&=~f}s!==0&&Lt(e,s,a)}function Wo(){return(xt&6)===0?(Dl(0),!1):!0}function sd(){if(lt!==null){if(At===0)var e=lt.return;else e=lt,an=Kn=null,gc(e),Mr=null,bl=0,e=lt;for(;e!==null;)Cp(e.alternate,e),e=e.return;lt=null}}function qr(e,a){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,Jb(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),fn=0,sd(),Et=e,lt=s=en(e.current,null),it=a,At=0,ds=null,zn=!1,Lr=nt(e,a),Jc=!1,Ir=us=Kc=or=En=Pt=0,Ka=zl=null,Pc=!1,(a&8)!==0&&(a|=a&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=a;0<n;){var o=31-St(n),i=1<<o;a|=e[o],n&=~i}return pn=a,mo(),s}function Qp(e,a){st=null,j.H=wl,a===Rr||a===xo?(a=dm(),At=3):a===oc?(a=dm(),At=4):At=a===Dc?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ds=a,lt===null&&(Pt=1,Eo(e,xs(a,e.current)))}function Xp(){var e=is.current;return e===null?!0:(it&4194048)===it?Cs===null:(it&62914560)===it||(it&536870912)!==0?e===Cs:!1}function Zp(){var e=j.H;return j.H=wl,e===null?wl:e}function Jp(){var e=j.A;return j.A=Rb,e}function Go(){Pt=4,zn||(it&4194048)!==it&&is.current!==null||(Lr=!0),(En&134217727)===0&&(or&134217727)===0||Et===null||Ln(Et,it,us,!1)}function nd(e,a,s){var n=xt;xt|=2;var o=Zp(),i=Jp();(Et!==e||it!==a)&&(Yo=null,qr(e,a)),a=!1;var f=Pt;e:do try{if(At!==0&&lt!==null){var C=lt,W=ds;switch(At){case 8:sd(),f=6;break e;case 3:case 2:case 9:case 6:is.current===null&&(a=!0);var ie=At;if(At=0,ds=null,Fr(e,C,W,ie),s&&Lr){f=0;break e}break;default:ie=At,At=0,ds=null,Fr(e,C,W,ie)}}Tb(),f=Pt;break}catch(xe){Qp(e,xe)}while(!0);return a&&e.shellSuspendCounter++,an=Kn=null,xt=n,j.H=o,j.A=i,lt===null&&(Et=null,it=0,mo()),f}function Tb(){for(;lt!==null;)Kp(lt)}function zb(e,a){var s=xt;xt|=2;var n=Zp(),o=Jp();Et!==e||it!==a?(Yo=null,$o=Re()+500,qr(e,a)):Lr=nt(e,a);e:do try{if(At!==0&&lt!==null){a=lt;var i=ds;t:switch(At){case 1:At=0,ds=null,Fr(e,a,i,1);break;case 2:case 9:if(im(i)){At=0,ds=null,Pp(a);break}a=function(){At!==2&&At!==9||Et!==e||(At=7),Qs(e)},i.then(a,a);break e;case 3:At=7;break e;case 4:At=5;break e;case 7:im(i)?(At=0,ds=null,Pp(a)):(At=0,ds=null,Fr(e,a,i,7));break;case 5:var f=null;switch(lt.tag){case 26:f=lt.memoizedState;case 5:case 27:var C=lt;if(f?Uf(f):C.stateNode.complete){At=0,ds=null;var W=C.sibling;if(W!==null)lt=W;else{var ie=C.return;ie!==null?(lt=ie,Vo(ie)):lt=null}break t}}At=0,ds=null,Fr(e,a,i,5);break;case 6:At=0,ds=null,Fr(e,a,i,6);break;case 8:sd(),Pt=6;break e;default:throw Error(d(462))}}Eb();break}catch(xe){Qp(e,xe)}while(!0);return an=Kn=null,j.H=n,j.A=o,xt=s,lt!==null?0:(Et=null,it=0,mo(),Pt)}function Eb(){for(;lt!==null&&!le();)Kp(lt)}function Kp(e){var a=jp(e.alternate,e,pn);e.memoizedProps=e.pendingProps,a===null?Vo(e):lt=a}function Pp(e){var a=e,s=a.alternate;switch(a.tag){case 15:case 0:a=yp(s,a,a.pendingProps,a.type,void 0,it);break;case 11:a=yp(s,a,a.pendingProps,a.type.render,a.ref,it);break;case 5:gc(a);default:Cp(s,a),a=lt=Ju(a,pn),a=jp(s,a,pn)}e.memoizedProps=e.pendingProps,a===null?Vo(e):lt=a}function Fr(e,a,s,n){an=Kn=null,gc(a),Mr=null,bl=0;var o=a.return;try{if(jb(e,o,a,s,it)){Pt=1,Eo(e,xs(s,e.current)),lt=null;return}}catch(i){if(o!==null)throw lt=o,i;Pt=1,Eo(e,xs(s,e.current)),lt=null;return}a.flags&32768?(mt||n===1?e=!0:Lr||(it&536870912)!==0?e=!1:(zn=e=!0,(n===2||n===9||n===3||n===6)&&(n=is.current,n!==null&&n.tag===13&&(n.flags|=16384))),ef(a,e)):Vo(a)}function Vo(e){var a=e;do{if((a.flags&32768)!==0){ef(a,zn);return}e=a.return;var s=wb(a.alternate,a,pn);if(s!==null){lt=s;return}if(a=a.sibling,a!==null){lt=a;return}lt=a=e}while(a!==null);Pt===0&&(Pt=5)}function ef(e,a){do{var s=kb(e.alternate,e);if(s!==null){s.flags&=32767,lt=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(e=e.sibling,e!==null)){lt=e;return}lt=e=s}while(e!==null);Pt=6,lt=null}function tf(e,a,s,n,o,i,f,C,W){e.cancelPendingCommit=null;do Qo();while(ba!==0);if((xt&6)!==0)throw Error(d(327));if(a!==null){if(a===e.current)throw Error(d(177));if(i=a.lanes|a.childLanes,i|=Gi,ja(e,s,i,f,C,W),e===Et&&(lt=Et=null,it=0),Ur=a,On=e,fn=s,ed=i,td=o,Yp=n,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ib(pt,function(){return lf(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||n){n=j.T,j.T=null,o=D.p,D.p=2,f=xt,xt|=4;try{Ab(e,a,s)}finally{xt=f,D.p=o,j.T=n}}ba=1,af(),sf(),nf()}}function af(){if(ba===1){ba=0;var e=On,a=Ur,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=j.T,j.T=null;var n=D.p;D.p=2;var o=xt;xt|=4;try{Op(a,e);var i=yd,f=Hu(e.containerInfo),C=i.focusedElem,W=i.selectionRange;if(f!==C&&C&&C.ownerDocument&&Fu(C.ownerDocument.documentElement,C)){if(W!==null&&Fi(C)){var ie=W.start,xe=W.end;if(xe===void 0&&(xe=ie),"selectionStart"in C)C.selectionStart=ie,C.selectionEnd=Math.min(xe,C.value.length);else{var ke=C.ownerDocument||document,ce=ke&&ke.defaultView||window;if(ce.getSelection){var pe=ce.getSelection(),Le=C.textContent.length,Ve=Math.min(W.start,Le),Bt=W.end===void 0?Ve:Math.min(W.end,Le);!pe.extend&&Ve>Bt&&(f=Bt,Bt=Ve,Ve=f);var ae=qu(C,Ve),Z=qu(C,Bt);if(ae&&Z&&(pe.rangeCount!==1||pe.anchorNode!==ae.node||pe.anchorOffset!==ae.offset||pe.focusNode!==Z.node||pe.focusOffset!==Z.offset)){var oe=ke.createRange();oe.setStart(ae.node,ae.offset),pe.removeAllRanges(),Ve>Bt?(pe.addRange(oe),pe.extend(Z.node,Z.offset)):(oe.setEnd(Z.node,Z.offset),pe.addRange(oe))}}}}for(ke=[],pe=C;pe=pe.parentNode;)pe.nodeType===1&&ke.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<ke.length;C++){var Ce=ke[C];Ce.element.scrollLeft=Ce.left,Ce.element.scrollTop=Ce.top}}li=!!hd,yd=hd=null}finally{xt=o,D.p=n,j.T=s}}e.current=a,ba=2}}function sf(){if(ba===2){ba=0;var e=On,a=Ur,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=j.T,j.T=null;var n=D.p;D.p=2;var o=xt;xt|=4;try{Bp(e,a.alternate,a)}finally{xt=o,D.p=n,j.T=s}}ba=3}}function nf(){if(ba===4||ba===3){ba=0,fe();var e=On,a=Ur,s=fn,n=Yp;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?ba=5:(ba=0,Ur=On=null,rf(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Dn=null),La(s),a=a.stateNode,Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(Qe,a,void 0,(a.current.flags&128)===128)}catch{}if(n!==null){a=j.T,o=D.p,D.p=2,j.T=null;try{for(var i=e.onRecoverableError,f=0;f<n.length;f++){var C=n[f];i(C.value,{componentStack:C.stack})}}finally{j.T=a,D.p=o}}(fn&3)!==0&&Qo(),Qs(e),o=e.pendingLanes,(s&261930)!==0&&(o&42)!==0?e===ad?El++:(El=0,ad=e):El=0,Dl(0)}}function rf(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,hl(a)))}function Qo(){return af(),sf(),nf(),lf()}function lf(){if(ba!==5)return!1;var e=On,a=ed;ed=0;var s=La(fn),n=j.T,o=D.p;try{D.p=32>s?32:s,j.T=null,s=td,td=null;var i=On,f=fn;if(ba=0,Ur=On=null,fn=0,(xt&6)!==0)throw Error(d(331));var C=xt;if(xt|=4,Fp(i.current),Ip(i,i.current,f,s),xt=C,Dl(0,!1),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(Qe,i)}catch{}return!0}finally{D.p=o,j.T=n,rf(e,a)}}function of(e,a,s){a=xs(s,a),a=Ec(e.stateNode,a,2),e=Rn(e,a,2),e!==null&&(Ut(e,2),Qs(e))}function Nt(e,a,s){if(e.tag===3)of(e,e,s);else for(;a!==null;){if(a.tag===3){of(a,e,s);break}else if(a.tag===1){var n=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Dn===null||!Dn.has(n))){e=xs(s,e),s=ip(2),n=Rn(a,s,2),n!==null&&(cp(s,n,a,e),Ut(n,2),Qs(n));break}}a=a.return}}function rd(e,a,s){var n=e.pingCache;if(n===null){n=e.pingCache=new Mb;var o=new Set;n.set(a,o)}else o=n.get(a),o===void 0&&(o=new Set,n.set(a,o));o.has(s)||(Jc=!0,o.add(s),e=Db.bind(null,e,a,s),a.then(e,e))}function Db(e,a,s){var n=e.pingCache;n!==null&&n.delete(a),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Et===e&&(it&s)===s&&(Pt===4||Pt===3&&(it&62914560)===it&&300>Re()-Ho?(xt&2)===0&&qr(e,0):Kc|=s,Ir===it&&(Ir=0)),Qs(e)}function cf(e,a){a===0&&(a=_a()),e=Xn(e,a),e!==null&&(Ut(e,a),Qs(e))}function Ob(e){var a=e.memoizedState,s=0;a!==null&&(s=a.retryLane),cf(e,s)}function Lb(e,a){var s=0;switch(e.tag){case 31:case 13:var n=e.stateNode,o=e.memoizedState;o!==null&&(s=o.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(d(314))}n!==null&&n.delete(a),cf(e,s)}function Ib(e,a){return _(e,a)}var Xo=null,Hr=null,ld=!1,Zo=!1,od=!1,In=0;function Qs(e){e!==Hr&&e.next===null&&(Hr===null?Xo=Hr=e:Hr=Hr.next=e),Zo=!0,ld||(ld=!0,qb())}function Dl(e,a){if(!od&&Zo){od=!0;do for(var s=!1,n=Xo;n!==null;){if(e!==0){var o=n.pendingLanes;if(o===0)var i=0;else{var f=n.suspendedLanes,C=n.pingedLanes;i=(1<<31-St(42|e)+1)-1,i&=o&~(f&~C),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(s=!0,pf(n,i))}else i=it,i=ha(n,n===Et?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(i&3)===0||nt(n,i)||(s=!0,pf(n,i));n=n.next}while(s);od=!1}}function Ub(){df()}function df(){Zo=ld=!1;var e=0;In!==0&&Zb()&&(e=In);for(var a=Re(),s=null,n=Xo;n!==null;){var o=n.next,i=uf(n,a);i===0?(n.next=null,s===null?Xo=o:s.next=o,o===null&&(Hr=s)):(s=n,(e!==0||(i&3)!==0)&&(Zo=!0)),n=o}ba!==0&&ba!==5||Dl(e),In!==0&&(In=0)}function uf(e,a){for(var s=e.suspendedLanes,n=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes&-62914561;0<i;){var f=31-St(i),C=1<<f,W=o[f];W===-1?((C&s)===0||(C&n)!==0)&&(o[f]=It(C,a)):W<=a&&(e.expiredLanes|=C),i&=~C}if(a=Et,s=it,s=ha(e,e===a?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,s===0||e===a&&(At===2||At===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&R(n),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||nt(e,s)){if(a=s&-s,a===e.callbackPriority)return a;switch(n!==null&&R(n),La(s)){case 2:case 8:s=$e;break;case 32:s=pt;break;case 268435456:s=_t;break;default:s=pt}return n=mf.bind(null,e),s=_(s,n),e.callbackPriority=a,e.callbackNode=s,a}return n!==null&&n!==null&&R(n),e.callbackPriority=2,e.callbackNode=null,2}function mf(e,a){if(ba!==0&&ba!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Qo()&&e.callbackNode!==s)return null;var n=it;return n=ha(e,e===Et?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(Gp(e,n,a),uf(e,Re()),e.callbackNode!=null&&e.callbackNode===s?mf.bind(null,e):null)}function pf(e,a){if(Qo())return null;Gp(e,a,!0)}function qb(){Kb(function(){(xt&6)!==0?_(je,Ub):df()})}function id(){if(In===0){var e=Ar;e===0&&(e=fa,fa<<=1,(fa&261888)===0&&(fa=256)),In=e}return In}function ff(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ve(""+e)}function hf(e,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,e.id&&s.setAttribute("form",e.id),a.parentNode.insertBefore(s,a),e=new FormData(e),s.parentNode.removeChild(s),e}function Fb(e,a,s,n,o){if(a==="submit"&&s&&s.stateNode===o){var i=ff((o[gt]||null).action),f=n.submitter;f&&(a=(a=f[gt]||null)?ff(a.formAction):f.getAttribute("formAction"),a!==null&&(i=a,f=null));var C=new oo("action","action",null,n,o);e.push({event:C,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(In!==0){var W=f?hf(o,f):new FormData(o);Nc(s,{pending:!0,data:W,method:o.method,action:i},null,W)}}else typeof i=="function"&&(C.preventDefault(),W=f?hf(o,f):new FormData(o),Nc(s,{pending:!0,data:W,method:o.method,action:i},i,W))},currentTarget:o}]})}}for(var cd=0;cd<Wi.length;cd++){var dd=Wi[cd],Hb=dd.toLowerCase(),$b=dd[0].toUpperCase()+dd.slice(1);Ls(Hb,"on"+$b)}Ls(Wu,"onAnimationEnd"),Ls(Gu,"onAnimationIteration"),Ls(Vu,"onAnimationStart"),Ls("dblclick","onDoubleClick"),Ls("focusin","onFocus"),Ls("focusout","onBlur"),Ls(rb,"onTransitionRun"),Ls(lb,"onTransitionStart"),Ls(ob,"onTransitionCancel"),Ls(Qu,"onTransitionEnd"),Zt("onMouseEnter",["mouseout","mouseover"]),Zt("onMouseLeave",["mouseout","mouseover"]),Zt("onPointerEnter",["pointerout","pointerover"]),Zt("onPointerLeave",["pointerout","pointerover"]),Ia("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ia("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ia("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ia("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ia("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ia("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ol));function yf(e,a){a=(a&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],o=n.event;n=n.listeners;e:{var i=void 0;if(a)for(var f=n.length-1;0<=f;f--){var C=n[f],W=C.instance,ie=C.currentTarget;if(C=C.listener,W!==i&&o.isPropagationStopped())break e;i=C,o.currentTarget=ie;try{i(o)}catch(xe){uo(xe)}o.currentTarget=null,i=W}else for(f=0;f<n.length;f++){if(C=n[f],W=C.instance,ie=C.currentTarget,C=C.listener,W!==i&&o.isPropagationStopped())break e;i=C,o.currentTarget=ie;try{i(o)}catch(xe){uo(xe)}o.currentTarget=null,i=W}}}}function ot(e,a){var s=a[oa];s===void 0&&(s=a[oa]=new Set);var n=e+"__bubble";s.has(n)||(bf(a,e,2,!1),s.add(n))}function ud(e,a,s){var n=0;a&&(n|=4),bf(s,e,n,a)}var Jo="_reactListening"+Math.random().toString(36).slice(2);function md(e){if(!e[Jo]){e[Jo]=!0,Ta.forEach(function(s){s!=="selectionchange"&&(Yb.has(s)||ud(s,!1,e),ud(s,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[Jo]||(a[Jo]=!0,ud("selectionchange",!1,a))}}function bf(e,a,s,n){switch(Gf(a)){case 2:var o=vv;break;case 8:o=gv;break;default:o=Ad}s=o.bind(null,a,s,e),o=void 0,!br||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(o=!0),n?o!==void 0?e.addEventListener(a,s,{capture:!0,passive:o}):e.addEventListener(a,s,!0):o!==void 0?e.addEventListener(a,s,{passive:o}):e.addEventListener(a,s,!1)}function pd(e,a,s,n,o){var i=n;if((a&1)===0&&(a&2)===0&&n!==null)e:for(;;){if(n===null)return;var f=n.tag;if(f===3||f===4){var C=n.stateNode.containerInfo;if(C===o)break;if(f===4)for(f=n.return;f!==null;){var W=f.tag;if((W===3||W===4)&&f.stateNode.containerInfo===o)return;f=f.return}for(;C!==null;){if(f=ea(C),f===null)return;if(W=f.tag,W===5||W===6||W===26||W===27){n=i=f;continue e}C=C.parentNode}}n=n.return}Ds(function(){var ie=i,xe=Q(s),ke=[];e:{var ce=Xu.get(e);if(ce!==void 0){var pe=oo,Le=e;switch(e){case"keypress":if(ro(s)===0)break e;case"keydown":case"keyup":pe=Ly;break;case"focusin":Le="focus",pe=Oi;break;case"focusout":Le="blur",pe=Oi;break;case"beforeblur":case"afterblur":pe=Oi;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=Cu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=wy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=qy;break;case Wu:case Gu:case Vu:pe=Ny;break;case Qu:pe=Hy;break;case"scroll":case"scrollend":pe=Sy;break;case"wheel":pe=Yy;break;case"copy":case"cut":case"paste":pe=My;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=ku;break;case"toggle":case"beforetoggle":pe=Gy}var Ve=(a&4)!==0,Bt=!Ve&&(e==="scroll"||e==="scrollend"),ae=Ve?ce!==null?ce+"Capture":null:ce;Ve=[];for(var Z=ie,oe;Z!==null;){var Ce=Z;if(oe=Ce.stateNode,Ce=Ce.tag,Ce!==5&&Ce!==26&&Ce!==27||oe===null||ae===null||(Ce=Os(Z,ae),Ce!=null&&Ve.push(Ll(Z,Ce,oe))),Bt)break;Z=Z.return}0<Ve.length&&(ce=new pe(ce,Le,null,s,xe),ke.push({event:ce,listeners:Ve}))}}if((a&7)===0){e:{if(ce=e==="mouseover"||e==="pointerover",pe=e==="mouseout"||e==="pointerout",ce&&s!==kt&&(Le=s.relatedTarget||s.fromElement)&&(ea(Le)||Le[Gt]))break e;if((pe||ce)&&(ce=xe.window===xe?xe:(ce=xe.ownerDocument)?ce.defaultView||ce.parentWindow:window,pe?(Le=s.relatedTarget||s.toElement,pe=ie,Le=Le?ea(Le):null,Le!==null&&(Bt=p(Le),Ve=Le.tag,Le!==Bt||Ve!==5&&Ve!==27&&Ve!==6)&&(Le=null)):(pe=null,Le=ie),pe!==Le)){if(Ve=Cu,Ce="onMouseLeave",ae="onMouseEnter",Z="mouse",(e==="pointerout"||e==="pointerover")&&(Ve=ku,Ce="onPointerLeave",ae="onPointerEnter",Z="pointer"),Bt=pe==null?ce:Xt(pe),oe=Le==null?ce:Xt(Le),ce=new Ve(Ce,Z+"leave",pe,s,xe),ce.target=Bt,ce.relatedTarget=oe,Ce=null,ea(xe)===ie&&(Ve=new Ve(ae,Z+"enter",Le,s,xe),Ve.target=oe,Ve.relatedTarget=Bt,Ce=Ve),Bt=Ce,pe&&Le)t:{for(Ve=Wb,ae=pe,Z=Le,oe=0,Ce=ae;Ce;Ce=Ve(Ce))oe++;Ce=0;for(var We=Z;We;We=Ve(We))Ce++;for(;0<oe-Ce;)ae=Ve(ae),oe--;for(;0<Ce-oe;)Z=Ve(Z),Ce--;for(;oe--;){if(ae===Z||Z!==null&&ae===Z.alternate){Ve=ae;break t}ae=Ve(ae),Z=Ve(Z)}Ve=null}else Ve=null;pe!==null&&vf(ke,ce,pe,Ve,!1),Le!==null&&Bt!==null&&vf(ke,Bt,Le,Ve,!0)}}e:{if(ce=ie?Xt(ie):window,pe=ce.nodeName&&ce.nodeName.toLowerCase(),pe==="select"||pe==="input"&&ce.type==="file")var yt=Eu;else if(Tu(ce))if(Du)yt=ab;else{yt=eb;var qe=Py}else pe=ce.nodeName,!pe||pe.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?ie&&q(ie.elementType)&&(yt=Eu):yt=tb;if(yt&&(yt=yt(e,ie))){zu(ke,yt,s,xe);break e}qe&&qe(e,ce,ie),e==="focusout"&&ie&&ce.type==="number"&&ie.memoizedProps.value!=null&&wa(ce,"number",ce.value)}switch(qe=ie?Xt(ie):window,e){case"focusin":(Tu(qe)||qe.contentEditable==="true")&&(gr=qe,Hi=ie,ml=null);break;case"focusout":ml=Hi=gr=null;break;case"mousedown":$i=!0;break;case"contextmenu":case"mouseup":case"dragend":$i=!1,$u(ke,s,xe);break;case"selectionchange":if(nb)break;case"keydown":case"keyup":$u(ke,s,xe)}var rt;if(Ii)e:{switch(e){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else vr?Mu(e,s)&&(ct="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(ct="onCompositionStart");ct&&(Au&&s.locale!=="ko"&&(vr||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&vr&&(rt=ju()):(Ea=xe,rl="value"in Ea?Ea.value:Ea.textContent,vr=!0)),qe=Ko(ie,ct),0<qe.length&&(ct=new wu(ct,e,null,s,xe),ke.push({event:ct,listeners:qe}),rt?ct.data=rt:(rt=Bu(s),rt!==null&&(ct.data=rt)))),(rt=Qy?Xy(e,s):Zy(e,s))&&(ct=Ko(ie,"onBeforeInput"),0<ct.length&&(qe=new wu("onBeforeInput","beforeinput",null,s,xe),ke.push({event:qe,listeners:ct}),qe.data=rt)),Fb(ke,e,ie,s,xe)}yf(ke,a)})}function Ll(e,a,s){return{instance:e,listener:a,currentTarget:s}}function Ko(e,a){for(var s=a+"Capture",n=[];e!==null;){var o=e,i=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||i===null||(o=Os(e,s),o!=null&&n.unshift(Ll(e,o,i)),o=Os(e,a),o!=null&&n.push(Ll(e,o,i))),e.tag===3)return n;e=e.return}return[]}function Wb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function vf(e,a,s,n,o){for(var i=a._reactName,f=[];s!==null&&s!==n;){var C=s,W=C.alternate,ie=C.stateNode;if(C=C.tag,W!==null&&W===n)break;C!==5&&C!==26&&C!==27||ie===null||(W=ie,o?(ie=Os(s,i),ie!=null&&f.unshift(Ll(s,ie,W))):o||(ie=Os(s,i),ie!=null&&f.push(Ll(s,ie,W)))),s=s.return}f.length!==0&&e.push({event:a,listeners:f})}var Gb=/\r\n?/g,Vb=/\u0000|\uFFFD/g;function gf(e){return(typeof e=="string"?e:""+e).replace(Gb,`
`).replace(Vb,"")}function xf(e,a){return a=gf(a),gf(e)===a}function Mt(e,a,s,n,o,i){switch(s){case"children":typeof n=="string"?a==="body"||a==="textarea"&&n===""||vs(e,n):(typeof n=="number"||typeof n=="bigint")&&a!=="body"&&vs(e,""+n);break;case"className":za(e,"class",n);break;case"tabIndex":za(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":za(e,s,n);break;case"style":Es(e,n,i);break;case"data":if(a!=="object"){za(e,"data",n);break}case"src":case"href":if(n===""&&(a!=="a"||s!=="href")){e.removeAttribute(s);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(s);break}n=ve(""+n),e.setAttribute(s,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(s==="formAction"?(a!=="input"&&Mt(e,a,"name",o.name,o,null),Mt(e,a,"formEncType",o.formEncType,o,null),Mt(e,a,"formMethod",o.formMethod,o,null),Mt(e,a,"formTarget",o.formTarget,o,null)):(Mt(e,a,"encType",o.encType,o,null),Mt(e,a,"method",o.method,o,null),Mt(e,a,"target",o.target,o,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(s);break}n=ve(""+n),e.setAttribute(s,n);break;case"onClick":n!=null&&(e.onclick=Oe);break;case"onScroll":n!=null&&ot("scroll",e);break;case"onScrollEnd":n!=null&&ot("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(d(61));if(s=n.__html,s!=null){if(o.children!=null)throw Error(d(60));e.innerHTML=s}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}s=ve(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,""+n):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":n===!0?e.setAttribute(s,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,n):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(s,n):e.removeAttribute(s);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(s):e.setAttribute(s,n);break;case"popover":ot("beforetoggle",e),ot("toggle",e),hs(e,"popover",n);break;case"xlinkActuate":Ca(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Ca(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Ca(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Ca(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Ca(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Ca(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Ca(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Ca(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Ca(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":hs(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=v.get(s)||s,hs(e,s,n))}}function fd(e,a,s,n,o,i){switch(s){case"style":Es(e,n,i);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(d(61));if(s=n.__html,s!=null){if(o.children!=null)throw Error(d(60));e.innerHTML=s}}break;case"children":typeof n=="string"?vs(e,n):(typeof n=="number"||typeof n=="bigint")&&vs(e,""+n);break;case"onScroll":n!=null&&ot("scroll",e);break;case"onScrollEnd":n!=null&&ot("scrollend",e);break;case"onClick":n!=null&&(e.onclick=Oe);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ga.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(o=s.endsWith("Capture"),a=s.slice(2,o?s.length-7:void 0),i=e[gt]||null,i=i!=null?i[s]:null,typeof i=="function"&&e.removeEventListener(a,i,o),typeof n=="function")){typeof i!="function"&&i!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(a,n,o);break e}s in e?e[s]=n:n===!0?e.setAttribute(s,""):hs(e,s,n)}}}function Ma(e,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ot("error",e),ot("load",e);var n=!1,o=!1,i;for(i in s)if(s.hasOwnProperty(i)){var f=s[i];if(f!=null)switch(i){case"src":n=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,a));default:Mt(e,a,i,f,s,null)}}o&&Mt(e,a,"srcSet",s.srcSet,s,null),n&&Mt(e,a,"src",s.src,s,null);return;case"input":ot("invalid",e);var C=i=f=o=null,W=null,ie=null;for(n in s)if(s.hasOwnProperty(n)){var xe=s[n];if(xe!=null)switch(n){case"name":o=xe;break;case"type":f=xe;break;case"checked":W=xe;break;case"defaultChecked":ie=xe;break;case"value":i=xe;break;case"defaultValue":C=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(d(137,a));break;default:Mt(e,a,n,xe,s,null)}}wt(e,i,C,W,ie,f,o,!1);return;case"select":ot("invalid",e),n=f=i=null;for(o in s)if(s.hasOwnProperty(o)&&(C=s[o],C!=null))switch(o){case"value":i=C;break;case"defaultValue":f=C;break;case"multiple":n=C;default:Mt(e,a,o,C,s,null)}a=i,s=f,e.multiple=!!n,a!=null?ka(e,!!n,a,!1):s!=null&&ka(e,!!n,s,!0);return;case"textarea":ot("invalid",e),i=o=n=null;for(f in s)if(s.hasOwnProperty(f)&&(C=s[f],C!=null))switch(f){case"value":n=C;break;case"defaultValue":o=C;break;case"children":i=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(d(91));break;default:Mt(e,a,f,C,s,null)}Hs(e,n,o,i);return;case"option":for(W in s)if(s.hasOwnProperty(W)&&(n=s[W],n!=null))switch(W){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:Mt(e,a,W,n,s,null)}return;case"dialog":ot("beforetoggle",e),ot("toggle",e),ot("cancel",e),ot("close",e);break;case"iframe":case"object":ot("load",e);break;case"video":case"audio":for(n=0;n<Ol.length;n++)ot(Ol[n],e);break;case"image":ot("error",e),ot("load",e);break;case"details":ot("toggle",e);break;case"embed":case"source":case"link":ot("error",e),ot("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in s)if(s.hasOwnProperty(ie)&&(n=s[ie],n!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,a));default:Mt(e,a,ie,n,s,null)}return;default:if(q(a)){for(xe in s)s.hasOwnProperty(xe)&&(n=s[xe],n!==void 0&&fd(e,a,xe,n,s,void 0));return}}for(C in s)s.hasOwnProperty(C)&&(n=s[C],n!=null&&Mt(e,a,C,n,s,null))}function Qb(e,a,s,n){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,i=null,f=null,C=null,W=null,ie=null,xe=null;for(pe in s){var ke=s[pe];if(s.hasOwnProperty(pe)&&ke!=null)switch(pe){case"checked":break;case"value":break;case"defaultValue":W=ke;default:n.hasOwnProperty(pe)||Mt(e,a,pe,null,n,ke)}}for(var ce in n){var pe=n[ce];if(ke=s[ce],n.hasOwnProperty(ce)&&(pe!=null||ke!=null))switch(ce){case"type":i=pe;break;case"name":o=pe;break;case"checked":ie=pe;break;case"defaultChecked":xe=pe;break;case"value":f=pe;break;case"defaultValue":C=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(d(137,a));break;default:pe!==ke&&Mt(e,a,ce,pe,n,ke)}}Je(e,f,C,W,ie,xe,i,o);return;case"select":pe=f=C=ce=null;for(i in s)if(W=s[i],s.hasOwnProperty(i)&&W!=null)switch(i){case"value":break;case"multiple":pe=W;default:n.hasOwnProperty(i)||Mt(e,a,i,null,n,W)}for(o in n)if(i=n[o],W=s[o],n.hasOwnProperty(o)&&(i!=null||W!=null))switch(o){case"value":ce=i;break;case"defaultValue":C=i;break;case"multiple":f=i;default:i!==W&&Mt(e,a,o,i,n,W)}a=C,s=f,n=pe,ce!=null?ka(e,!!s,ce,!1):!!n!=!!s&&(a!=null?ka(e,!!s,a,!0):ka(e,!!s,s?[]:"",!1));return;case"textarea":pe=ce=null;for(C in s)if(o=s[C],s.hasOwnProperty(C)&&o!=null&&!n.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Mt(e,a,C,null,n,o)}for(f in n)if(o=n[f],i=s[f],n.hasOwnProperty(f)&&(o!=null||i!=null))switch(f){case"value":ce=o;break;case"defaultValue":pe=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(d(91));break;default:o!==i&&Mt(e,a,f,o,n,i)}Va(e,ce,pe);return;case"option":for(var Le in s)if(ce=s[Le],s.hasOwnProperty(Le)&&ce!=null&&!n.hasOwnProperty(Le))switch(Le){case"selected":e.selected=!1;break;default:Mt(e,a,Le,null,n,ce)}for(W in n)if(ce=n[W],pe=s[W],n.hasOwnProperty(W)&&ce!==pe&&(ce!=null||pe!=null))switch(W){case"selected":e.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:Mt(e,a,W,ce,n,pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in s)ce=s[Ve],s.hasOwnProperty(Ve)&&ce!=null&&!n.hasOwnProperty(Ve)&&Mt(e,a,Ve,null,n,ce);for(ie in n)if(ce=n[ie],pe=s[ie],n.hasOwnProperty(ie)&&ce!==pe&&(ce!=null||pe!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(d(137,a));break;default:Mt(e,a,ie,ce,n,pe)}return;default:if(q(a)){for(var Bt in s)ce=s[Bt],s.hasOwnProperty(Bt)&&ce!==void 0&&!n.hasOwnProperty(Bt)&&fd(e,a,Bt,void 0,n,ce);for(xe in n)ce=n[xe],pe=s[xe],!n.hasOwnProperty(xe)||ce===pe||ce===void 0&&pe===void 0||fd(e,a,xe,ce,n,pe);return}}for(var ae in s)ce=s[ae],s.hasOwnProperty(ae)&&ce!=null&&!n.hasOwnProperty(ae)&&Mt(e,a,ae,null,n,ce);for(ke in n)ce=n[ke],pe=s[ke],!n.hasOwnProperty(ke)||ce===pe||ce==null&&pe==null||Mt(e,a,ke,ce,n,pe)}function _f(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Xb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,a=0,s=performance.getEntriesByType("resource"),n=0;n<s.length;n++){var o=s[n],i=o.transferSize,f=o.initiatorType,C=o.duration;if(i&&C&&_f(f)){for(f=0,C=o.responseEnd,n+=1;n<s.length;n++){var W=s[n],ie=W.startTime;if(ie>C)break;var xe=W.transferSize,ke=W.initiatorType;xe&&_f(ke)&&(W=W.responseEnd,f+=xe*(W<C?1:(C-ie)/(W-ie)))}if(--n,a+=8*(i+f)/(o.duration/1e3),e++,10<e)break}}if(0<e)return a/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var hd=null,yd=null;function Po(e){return e.nodeType===9?e:e.ownerDocument}function jf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sf(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function bd(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var vd=null;function Zb(){var e=window.event;return e&&e.type==="popstate"?e===vd?!1:(vd=e,!0):(vd=null,!1)}var Cf=typeof setTimeout=="function"?setTimeout:void 0,Jb=typeof clearTimeout=="function"?clearTimeout:void 0,wf=typeof Promise=="function"?Promise:void 0,Kb=typeof queueMicrotask=="function"?queueMicrotask:typeof wf<"u"?function(e){return wf.resolve(null).then(e).catch(Pb)}:Cf;function Pb(e){setTimeout(function(){throw e})}function Un(e){return e==="head"}function kf(e,a){var s=a,n=0;do{var o=s.nextSibling;if(e.removeChild(s),o&&o.nodeType===8)if(s=o.data,s==="/$"||s==="/&"){if(n===0){e.removeChild(o),Gr(a);return}n--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")n++;else if(s==="html")Il(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,Il(s);for(var i=s.firstChild;i;){var f=i.nextSibling,C=i.nodeName;i[ia]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&i.rel.toLowerCase()==="stylesheet"||s.removeChild(i),i=f}}else s==="body"&&Il(e.ownerDocument.body);s=o}while(s);Gr(a)}function Af(e,a){var s=e;e=0;do{var n=s.nextSibling;if(s.nodeType===1?a?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(a?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),n&&n.nodeType===8)if(s=n.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=n}while(s)}function gd(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":gd(s),Vt(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function ev(e,a,s,n){for(;e.nodeType===1;){var o=s;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[ia])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(i=e.getAttribute("rel"),i==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(i!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(i=e.getAttribute("src"),(i!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var i=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===i)return e}else return e;if(e=ws(e.nextSibling),e===null)break}return null}function tv(e,a,s){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=ws(e.nextSibling),e===null))return null;return e}function Nf(e,a){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ws(e.nextSibling),e===null))return null;return e}function xd(e){return e.data==="$?"||e.data==="$~"}function _d(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function av(e,a){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=a;else if(e.data!=="$?"||s.readyState!=="loading")a();else{var n=function(){a(),s.removeEventListener("DOMContentLoaded",n)};s.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function ws(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return e}var jd=null;function Rf(e){e=e.nextSibling;for(var a=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(a===0)return ws(e.nextSibling);a--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||a++}e=e.nextSibling}return null}function Mf(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(a===0)return e;a--}else s!=="/$"&&s!=="/&"||a++}e=e.previousSibling}return null}function Bf(e,a,s){switch(a=Po(s),e){case"html":if(e=a.documentElement,!e)throw Error(d(452));return e;case"head":if(e=a.head,!e)throw Error(d(453));return e;case"body":if(e=a.body,!e)throw Error(d(454));return e;default:throw Error(d(451))}}function Il(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);Vt(e)}var ks=new Map,Tf=new Set;function ei(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var hn=D.d;D.d={f:sv,r:nv,D:rv,C:lv,L:ov,m:iv,X:dv,S:cv,M:uv};function sv(){var e=hn.f(),a=Wo();return e||a}function nv(e){var a=Qt(e);a!==null&&a.tag===5&&a.type==="form"?Qm(a):hn.r(e)}var $r=typeof document>"u"?null:document;function zf(e,a,s){var n=$r;if(n&&typeof a=="string"&&a){var o=Te(a);o='link[rel="'+e+'"][href="'+o+'"]',typeof s=="string"&&(o+='[crossorigin="'+s+'"]'),Tf.has(o)||(Tf.add(o),e={rel:e,crossOrigin:s,href:a},n.querySelector(o)===null&&(a=n.createElement("link"),Ma(a,"link",e),ht(a),n.head.appendChild(a)))}}function rv(e){hn.D(e),zf("dns-prefetch",e,null)}function lv(e,a){hn.C(e,a),zf("preconnect",e,a)}function ov(e,a,s){hn.L(e,a,s);var n=$r;if(n&&e&&a){var o='link[rel="preload"][as="'+Te(a)+'"]';a==="image"&&s&&s.imageSrcSet?(o+='[imagesrcset="'+Te(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(o+='[imagesizes="'+Te(s.imageSizes)+'"]')):o+='[href="'+Te(e)+'"]';var i=o;switch(a){case"style":i=Yr(e);break;case"script":i=Wr(e)}ks.has(i)||(e=S({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:e,as:a},s),ks.set(i,e),n.querySelector(o)!==null||a==="style"&&n.querySelector(Ul(i))||a==="script"&&n.querySelector(ql(i))||(a=n.createElement("link"),Ma(a,"link",e),ht(a),n.head.appendChild(a)))}}function iv(e,a){hn.m(e,a);var s=$r;if(s&&e){var n=a&&typeof a.as=="string"?a.as:"script",o='link[rel="modulepreload"][as="'+Te(n)+'"][href="'+Te(e)+'"]',i=o;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Wr(e)}if(!ks.has(i)&&(e=S({rel:"modulepreload",href:e},a),ks.set(i,e),s.querySelector(o)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(ql(i)))return}n=s.createElement("link"),Ma(n,"link",e),ht(n),s.head.appendChild(n)}}}function cv(e,a,s){hn.S(e,a,s);var n=$r;if(n&&e){var o=ya(n).hoistableStyles,i=Yr(e);a=a||"default";var f=o.get(i);if(!f){var C={loading:0,preload:null};if(f=n.querySelector(Ul(i)))C.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":a},s),(s=ks.get(i))&&Sd(e,s);var W=f=n.createElement("link");ht(W),Ma(W,"link",e),W._p=new Promise(function(ie,xe){W.onload=ie,W.onerror=xe}),W.addEventListener("load",function(){C.loading|=1}),W.addEventListener("error",function(){C.loading|=2}),C.loading|=4,ti(f,a,n)}f={type:"stylesheet",instance:f,count:1,state:C},o.set(i,f)}}}function dv(e,a){hn.X(e,a);var s=$r;if(s&&e){var n=ya(s).hoistableScripts,o=Wr(e),i=n.get(o);i||(i=s.querySelector(ql(o)),i||(e=S({src:e,async:!0},a),(a=ks.get(o))&&Cd(e,a),i=s.createElement("script"),ht(i),Ma(i,"link",e),s.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(o,i))}}function uv(e,a){hn.M(e,a);var s=$r;if(s&&e){var n=ya(s).hoistableScripts,o=Wr(e),i=n.get(o);i||(i=s.querySelector(ql(o)),i||(e=S({src:e,async:!0,type:"module"},a),(a=ks.get(o))&&Cd(e,a),i=s.createElement("script"),ht(i),Ma(i,"link",e),s.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(o,i))}}function Ef(e,a,s,n){var o=(o=be.current)?ei(o):null;if(!o)throw Error(d(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=Yr(s.href),s=ya(o).hoistableStyles,n=s.get(a),n||(n={type:"style",instance:null,count:0,state:null},s.set(a,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Yr(s.href);var i=ya(o).hoistableStyles,f=i.get(e);if(f||(o=o.ownerDocument||o,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(e,f),(i=o.querySelector(Ul(e)))&&!i._p&&(f.instance=i,f.state.loading=5),ks.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},ks.set(e,s),i||mv(o,e,s,f.state))),a&&n===null)throw Error(d(528,""));return f}if(a&&n!==null)throw Error(d(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Wr(s),s=ya(o).hoistableScripts,n=s.get(a),n||(n={type:"script",instance:null,count:0,state:null},s.set(a,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,e))}}function Yr(e){return'href="'+Te(e)+'"'}function Ul(e){return'link[rel="stylesheet"]['+e+"]"}function Df(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function mv(e,a,s,n){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?n.loading=1:(a=e.createElement("link"),n.preload=a,a.addEventListener("load",function(){return n.loading|=1}),a.addEventListener("error",function(){return n.loading|=2}),Ma(a,"link",s),ht(a),e.head.appendChild(a))}function Wr(e){return'[src="'+Te(e)+'"]'}function ql(e){return"script[async]"+e}function Of(e,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var n=e.querySelector('style[data-href~="'+Te(s.href)+'"]');if(n)return a.instance=n,ht(n),n;var o=S({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),ht(n),Ma(n,"style",o),ti(n,s.precedence,e),a.instance=n;case"stylesheet":o=Yr(s.href);var i=e.querySelector(Ul(o));if(i)return a.state.loading|=4,a.instance=i,ht(i),i;n=Df(s),(o=ks.get(o))&&Sd(n,o),i=(e.ownerDocument||e).createElement("link"),ht(i);var f=i;return f._p=new Promise(function(C,W){f.onload=C,f.onerror=W}),Ma(i,"link",n),a.state.loading|=4,ti(i,s.precedence,e),a.instance=i;case"script":return i=Wr(s.src),(o=e.querySelector(ql(i)))?(a.instance=o,ht(o),o):(n=s,(o=ks.get(i))&&(n=S({},s),Cd(n,o)),e=e.ownerDocument||e,o=e.createElement("script"),ht(o),Ma(o,"link",n),e.head.appendChild(o),a.instance=o);case"void":return null;default:throw Error(d(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(n=a.instance,a.state.loading|=4,ti(n,s.precedence,e));return a.instance}function ti(e,a,s){for(var n=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=n.length?n[n.length-1]:null,i=o,f=0;f<n.length;f++){var C=n[f];if(C.dataset.precedence===a)i=C;else if(i!==o)break}i?i.parentNode.insertBefore(e,i.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(e,a.firstChild))}function Sd(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function Cd(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var ai=null;function Lf(e,a,s){if(ai===null){var n=new Map,o=ai=new Map;o.set(s,n)}else o=ai,n=o.get(s),n||(n=new Map,o.set(s,n));if(n.has(e))return n;for(n.set(e,null),s=s.getElementsByTagName(e),o=0;o<s.length;o++){var i=s[o];if(!(i[ia]||i[ut]||e==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var f=i.getAttribute(a)||"";f=e+f;var C=n.get(f);C?C.push(i):n.set(f,[i])}}return n}function If(e,a,s){e=e.ownerDocument||e,e.head.insertBefore(s,a==="title"?e.querySelector("head > title"):null)}function pv(e,a,s){if(s===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return e=a.disabled,typeof a.precedence=="string"&&e==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Uf(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function fv(e,a,s,n){if(s.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var o=Yr(n.href),i=a.querySelector(Ul(o));if(i){a=i._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(e.count++,e=si.bind(e),a.then(e,e)),s.state.loading|=4,s.instance=i,ht(i);return}i=a.ownerDocument||a,n=Df(n),(o=ks.get(o))&&Sd(n,o),i=i.createElement("link"),ht(i);var f=i;f._p=new Promise(function(C,W){f.onload=C,f.onerror=W}),Ma(i,"link",n),s.instance=i}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,a),(a=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=si.bind(e),a.addEventListener("load",s),a.addEventListener("error",s))}}var wd=0;function hv(e,a){return e.stylesheets&&e.count===0&&ri(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var n=setTimeout(function(){if(e.stylesheets&&ri(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4+a);0<e.imgBytes&&wd===0&&(wd=62500*Xb());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ri(e,e.stylesheets),e.unsuspend)){var i=e.unsuspend;e.unsuspend=null,i()}},(e.imgBytes>wd?50:800)+a);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(o)}}:null}function si(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ri(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ni=null;function ri(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ni=new Map,a.forEach(yv,e),ni=null,si.call(e))}function yv(e,a){if(!(a.state.loading&4)){var s=ni.get(e);if(s)var n=s.get(null);else{s=new Map,ni.set(e,s);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<o.length;i++){var f=o[i];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(s.set(f.dataset.precedence,f),n=f)}n&&s.set(null,n)}o=a.instance,f=o.getAttribute("data-precedence"),i=s.get(f)||n,i===n&&s.set(null,o),s.set(f,o),this.count++,n=si.bind(this),o.addEventListener("load",n),o.addEventListener("error",n),i?i.parentNode.insertBefore(o,i.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),a.state.loading|=4}}var Fl={$$typeof:z,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function bv(e,a,s,n,o,i,f,C,W){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=va(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=va(0),this.hiddenUpdates=va(null),this.identifierPrefix=n,this.onUncaughtError=o,this.onCaughtError=i,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=W,this.incompleteTransitions=new Map}function qf(e,a,s,n,o,i,f,C,W,ie,xe,ke){return e=new bv(e,a,s,f,W,ie,xe,ke,C),a=1,i===!0&&(a|=24),i=os(3,null,null,a),e.current=i,i.stateNode=e,a=nc(),a.refCount++,e.pooledCache=a,a.refCount++,i.memoizedState={element:n,isDehydrated:s,cache:a},ic(i),e}function Ff(e){return e?(e=jr,e):jr}function Hf(e,a,s,n,o,i){o=Ff(o),n.context===null?n.context=o:n.pendingContext=o,n=Nn(a),n.payload={element:s},i=i===void 0?null:i,i!==null&&(n.callback=i),s=Rn(e,n,a),s!==null&&(Pa(s,e,a),gl(s,e,a))}function $f(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<a?s:a}}function kd(e,a){$f(e,a),(e=e.alternate)&&$f(e,a)}function Yf(e){if(e.tag===13||e.tag===31){var a=Xn(e,67108864);a!==null&&Pa(a,e,67108864),kd(e,67108864)}}function Wf(e){if(e.tag===13||e.tag===31){var a=ms();a=la(a);var s=Xn(e,a);s!==null&&Pa(s,e,a),kd(e,a)}}var li=!0;function vv(e,a,s,n){var o=j.T;j.T=null;var i=D.p;try{D.p=2,Ad(e,a,s,n)}finally{D.p=i,j.T=o}}function gv(e,a,s,n){var o=j.T;j.T=null;var i=D.p;try{D.p=8,Ad(e,a,s,n)}finally{D.p=i,j.T=o}}function Ad(e,a,s,n){if(li){var o=Nd(n);if(o===null)pd(e,a,n,oi,s),Vf(e,n);else if(_v(o,e,a,s,n))n.stopPropagation();else if(Vf(e,n),a&4&&-1<xv.indexOf(e)){for(;o!==null;){var i=Qt(o);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var f=ra(i.pendingLanes);if(f!==0){var C=i;for(C.pendingLanes|=2,C.entangledLanes|=2;f;){var W=1<<31-St(f);C.entanglements[1]|=W,f&=~W}Qs(i),(xt&6)===0&&($o=Re()+500,Dl(0))}}break;case 31:case 13:C=Xn(i,2),C!==null&&Pa(C,i,2),Wo(),kd(i,2)}if(i=Nd(n),i===null&&pd(e,a,n,oi,s),i===o)break;o=i}o!==null&&n.stopPropagation()}else pd(e,a,n,null,s)}}function Nd(e){return e=Q(e),Rd(e)}var oi=null;function Rd(e){if(oi=null,e=ea(e),e!==null){var a=p(e);if(a===null)e=null;else{var s=a.tag;if(s===13){if(e=h(a),e!==null)return e;e=null}else if(s===31){if(e=g(a),e!==null)return e;e=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return oi=e,null}function Gf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Be()){case je:return 2;case $e:return 8;case pt:case at:return 32;case _t:return 268435456;default:return 32}default:return 32}}var Md=!1,qn=null,Fn=null,Hn=null,Hl=new Map,$l=new Map,$n=[],xv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vf(e,a){switch(e){case"focusin":case"focusout":qn=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":Hn=null;break;case"pointerover":case"pointerout":Hl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":$l.delete(a.pointerId)}}function Yl(e,a,s,n,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:a,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[o]},a!==null&&(a=Qt(a),a!==null&&Yf(a)),e):(e.eventSystemFlags|=n,a=e.targetContainers,o!==null&&a.indexOf(o)===-1&&a.push(o),e)}function _v(e,a,s,n,o){switch(a){case"focusin":return qn=Yl(qn,e,a,s,n,o),!0;case"dragenter":return Fn=Yl(Fn,e,a,s,n,o),!0;case"mouseover":return Hn=Yl(Hn,e,a,s,n,o),!0;case"pointerover":var i=o.pointerId;return Hl.set(i,Yl(Hl.get(i)||null,e,a,s,n,o)),!0;case"gotpointercapture":return i=o.pointerId,$l.set(i,Yl($l.get(i)||null,e,a,s,n,o)),!0}return!1}function Qf(e){var a=ea(e.target);if(a!==null){var s=p(a);if(s!==null){if(a=s.tag,a===13){if(a=h(s),a!==null){e.blockedOn=a,Sa(e.priority,function(){Wf(s)});return}}else if(a===31){if(a=g(s),a!==null){e.blockedOn=a,Sa(e.priority,function(){Wf(s)});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ii(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var s=Nd(e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);kt=n,s.target.dispatchEvent(n),kt=null}else return a=Qt(s),a!==null&&Yf(a),e.blockedOn=s,!1;a.shift()}return!0}function Xf(e,a,s){ii(e)&&s.delete(a)}function jv(){Md=!1,qn!==null&&ii(qn)&&(qn=null),Fn!==null&&ii(Fn)&&(Fn=null),Hn!==null&&ii(Hn)&&(Hn=null),Hl.forEach(Xf),$l.forEach(Xf)}function ci(e,a){e.blockedOn===a&&(e.blockedOn=null,Md||(Md=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,jv)))}var di=null;function Zf(e){di!==e&&(di=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){di===e&&(di=null);for(var a=0;a<e.length;a+=3){var s=e[a],n=e[a+1],o=e[a+2];if(typeof n!="function"){if(Rd(n||s)===null)continue;break}var i=Qt(s);i!==null&&(e.splice(a,3),a-=3,Nc(i,{pending:!0,data:o,method:s.method,action:n},n,o))}}))}function Gr(e){function a(W){return ci(W,e)}qn!==null&&ci(qn,e),Fn!==null&&ci(Fn,e),Hn!==null&&ci(Hn,e),Hl.forEach(a),$l.forEach(a);for(var s=0;s<$n.length;s++){var n=$n[s];n.blockedOn===e&&(n.blockedOn=null)}for(;0<$n.length&&(s=$n[0],s.blockedOn===null);)Qf(s),s.blockedOn===null&&$n.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(n=0;n<s.length;n+=3){var o=s[n],i=s[n+1],f=o[gt]||null;if(typeof i=="function")f||Zf(s);else if(f){var C=null;if(i&&i.hasAttribute("formAction")){if(o=i,f=i[gt]||null)C=f.formAction;else if(Rd(o)!==null)continue}else C=f.action;typeof C=="function"?s[n+1]=C:(s.splice(n,3),n-=3),Zf(s)}}}function Jf(){function e(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(f){return o=f})},focusReset:"manual",scroll:"manual"})}function a(){o!==null&&(o(),o=null),n||setTimeout(s,20)}function s(){if(!n&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(s,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),o!==null&&(o(),o=null)}}}function Bd(e){this._internalRoot=e}ui.prototype.render=Bd.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(d(409));var s=a.current,n=ms();Hf(s,n,e,a,null,null)},ui.prototype.unmount=Bd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;Hf(e.current,2,null,e,null,null),Wo(),a[Gt]=null}};function ui(e){this._internalRoot=e}ui.prototype.unstable_scheduleHydration=function(e){if(e){var a=ns();e={blockedOn:null,target:e,priority:a};for(var s=0;s<$n.length&&a!==0&&a<$n[s].priority;s++);$n.splice(s,0,e),s===0&&Qf(e)}};var Kf=l.version;if(Kf!=="19.2.4")throw Error(d(527,Kf,"19.2.4"));D.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(d(188)):(e=Object.keys(e).join(","),Error(d(268,e)));return e=y(a),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var Sv={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mi.isDisabled&&mi.supportsFiber)try{Qe=mi.inject(Sv),Tt=mi}catch{}}return Gl.createRoot=function(e,a){if(!m(e))throw Error(d(299));var s=!1,n="",o=np,i=rp,f=lp;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(n=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(i=a.onCaughtError),a.onRecoverableError!==void 0&&(f=a.onRecoverableError)),a=qf(e,1,!1,null,null,s,n,null,o,i,f,Jf),e[Gt]=a.current,md(e),new Bd(a)},Gl.hydrateRoot=function(e,a,s){if(!m(e))throw Error(d(299));var n=!1,o="",i=np,f=rp,C=lp,W=null;return s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onUncaughtError!==void 0&&(i=s.onUncaughtError),s.onCaughtError!==void 0&&(f=s.onCaughtError),s.onRecoverableError!==void 0&&(C=s.onRecoverableError),s.formState!==void 0&&(W=s.formState)),a=qf(e,1,!0,a,s??null,n,o,W,i,f,C,Jf),a.context=Ff(null),s=a.current,n=ms(),n=la(n),o=Nn(n),o.callback=null,Rn(s,o,n),s=n,a.current.lanes=s,Ut(a,s),Qs(a),e[Gt]=a.current,md(e),new ui(a)},Gl.version="19.2.4",Gl}var ih;function Tv(){if(ih)return Ed.exports;ih=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(l){console.error(l)}}return r(),Ed.exports=Bv(),Ed.exports}var zv=Tv();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ch="popstate";function Ev(r={}){function l(d,m){let{pathname:p,search:h,hash:g}=d.location;return Kd("",{pathname:p,search:h,hash:g},m.state&&m.state.usr||null,m.state&&m.state.key||"default")}function u(d,m){return typeof m=="string"?m:Zl(m)}return Ov(l,u,null,r)}function Wt(r,l){if(r===!1||r===null||typeof r>"u")throw new Error(l)}function Rs(r,l){if(!r){typeof console<"u"&&console.warn(l);try{throw new Error(l)}catch{}}}function Dv(){return Math.random().toString(36).substring(2,10)}function dh(r,l){return{usr:r.state,key:r.key,idx:l}}function Kd(r,l,u=null,d){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof l=="string"?tl(l):l,state:u,key:l&&l.key||d||Dv()}}function Zl({pathname:r="/",search:l="",hash:u=""}){return l&&l!=="?"&&(r+=l.charAt(0)==="?"?l:"?"+l),u&&u!=="#"&&(r+=u.charAt(0)==="#"?u:"#"+u),r}function tl(r){let l={};if(r){let u=r.indexOf("#");u>=0&&(l.hash=r.substring(u),r=r.substring(0,u));let d=r.indexOf("?");d>=0&&(l.search=r.substring(d),r=r.substring(0,d)),r&&(l.pathname=r)}return l}function Ov(r,l,u,d={}){let{window:m=document.defaultView,v5Compat:p=!1}=d,h=m.history,g="POP",b=null,y=x();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function x(){return(h.state||{idx:null}).idx}function S(){g="POP";let w=x(),O=w==null?null:w-y;y=w,b&&b({action:g,location:L.location,delta:O})}function N(w,O){g="PUSH";let P=Kd(L.location,w,O);y=x()+1;let z=dh(P,y),M=L.createHref(P);try{h.pushState(z,"",M)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;m.location.assign(M)}p&&b&&b({action:g,location:L.location,delta:1})}function I(w,O){g="REPLACE";let P=Kd(L.location,w,O);y=x();let z=dh(P,y),M=L.createHref(P);h.replaceState(z,"",M),p&&b&&b({action:g,location:L.location,delta:0})}function k(w){return Lv(w)}let L={get action(){return g},get location(){return r(m,h)},listen(w){if(b)throw new Error("A history only accepts one active listener");return m.addEventListener(ch,S),b=w,()=>{m.removeEventListener(ch,S),b=null}},createHref(w){return l(m,w)},createURL:k,encodeLocation(w){let O=k(w);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:N,replace:I,go(w){return h.go(w)}};return L}function Lv(r,l=!1){let u="http://localhost";typeof window<"u"&&(u=window.location.origin!=="null"?window.location.origin:window.location.href),Wt(u,"No window.location.(origin|href) available to create URL");let d=typeof r=="string"?r:Zl(r);return d=d.replace(/ $/,"%20"),!l&&d.startsWith("//")&&(d=u+d),new URL(d,u)}function Eh(r,l,u="/"){return Iv(r,l,u,!1)}function Iv(r,l,u,d){let m=typeof l=="string"?tl(l):l,p=xn(m.pathname||"/",u);if(p==null)return null;let h=Dh(r);Uv(h);let g=null;for(let b=0;g==null&&b<h.length;++b){let y=Zv(p);g=Qv(h[b],y,d)}return g}function Dh(r,l=[],u=[],d="",m=!1){let p=(h,g,b=m,y)=>{let x={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:g,route:h};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(d)&&b)return;Wt(x.relativePath.startsWith(d),`Absolute route path "${x.relativePath}" nested under path "${d}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(d.length)}let S=bn([d,x.relativePath]),N=u.concat(x);h.children&&h.children.length>0&&(Wt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),Dh(h.children,l,N,S,b)),!(h.path==null&&!h.index)&&l.push({path:S,score:Gv(S,h.index),routesMeta:N})};return r.forEach((h,g)=>{var b;if(h.path===""||!((b=h.path)!=null&&b.includes("?")))p(h,g);else for(let y of Oh(h.path))p(h,g,!0,y)}),l}function Oh(r){let l=r.split("/");if(l.length===0)return[];let[u,...d]=l,m=u.endsWith("?"),p=u.replace(/\?$/,"");if(d.length===0)return m?[p,""]:[p];let h=Oh(d.join("/")),g=[];return g.push(...h.map(b=>b===""?p:[p,b].join("/"))),m&&g.push(...h),g.map(b=>r.startsWith("/")&&b===""?"/":b)}function Uv(r){r.sort((l,u)=>l.score!==u.score?u.score-l.score:Vv(l.routesMeta.map(d=>d.childrenIndex),u.routesMeta.map(d=>d.childrenIndex)))}var qv=/^:[\w-]+$/,Fv=3,Hv=2,$v=1,Yv=10,Wv=-2,uh=r=>r==="*";function Gv(r,l){let u=r.split("/"),d=u.length;return u.some(uh)&&(d+=Wv),l&&(d+=Hv),u.filter(m=>!uh(m)).reduce((m,p)=>m+(qv.test(p)?Fv:p===""?$v:Yv),d)}function Vv(r,l){return r.length===l.length&&r.slice(0,-1).every((d,m)=>d===l[m])?r[r.length-1]-l[l.length-1]:0}function Qv(r,l,u=!1){let{routesMeta:d}=r,m={},p="/",h=[];for(let g=0;g<d.length;++g){let b=d[g],y=g===d.length-1,x=p==="/"?l:l.slice(p.length)||"/",S=Si({path:b.relativePath,caseSensitive:b.caseSensitive,end:y},x),N=b.route;if(!S&&y&&u&&!d[d.length-1].route.index&&(S=Si({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},x)),!S)return null;Object.assign(m,S.params),h.push({params:m,pathname:bn([p,S.pathname]),pathnameBase:eg(bn([p,S.pathnameBase])),route:N}),S.pathnameBase!=="/"&&(p=bn([p,S.pathnameBase]))}return h}function Si(r,l){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[u,d]=Xv(r.path,r.caseSensitive,r.end),m=l.match(u);if(!m)return null;let p=m[0],h=p.replace(/(.)\/+$/,"$1"),g=m.slice(1);return{params:d.reduce((y,{paramName:x,isOptional:S},N)=>{if(x==="*"){let k=g[N]||"";h=p.slice(0,p.length-k.length).replace(/(.)\/+$/,"$1")}const I=g[N];return S&&!I?y[x]=void 0:y[x]=(I||"").replace(/%2F/g,"/"),y},{}),pathname:p,pathnameBase:h,pattern:r}}function Xv(r,l=!1,u=!0){Rs(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let d=[],m="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,g,b)=>(d.push({paramName:g,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(d.push({paramName:"*"}),m+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):u?m+="\\/*$":r!==""&&r!=="/"&&(m+="(?:(?=\\/|$))"),[new RegExp(m,l?void 0:"i"),d]}function Zv(r){try{return r.split("/").map(l=>decodeURIComponent(l).replace(/\//g,"%2F")).join("/")}catch(l){return Rs(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${l}).`),r}}function xn(r,l){if(l==="/")return r;if(!r.toLowerCase().startsWith(l.toLowerCase()))return null;let u=l.endsWith("/")?l.length-1:l.length,d=r.charAt(u);return d&&d!=="/"?null:r.slice(u)||"/"}var Jv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Kv(r,l="/"){let{pathname:u,search:d="",hash:m=""}=typeof r=="string"?tl(r):r,p;return u?(u=u.replace(/\/\/+/g,"/"),u.startsWith("/")?p=mh(u.substring(1),"/"):p=mh(u,l)):p=l,{pathname:p,search:tg(d),hash:ag(m)}}function mh(r,l){let u=l.replace(/\/+$/,"").split("/");return r.split("/").forEach(m=>{m===".."?u.length>1&&u.pop():m!=="."&&u.push(m)}),u.length>1?u.join("/"):"/"}function Id(r,l,u,d){return`Cannot include a '${r}' character in a manually specified \`to.${l}\` field [${JSON.stringify(d)}].  Please separate it out to the \`to.${u}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Pv(r){return r.filter((l,u)=>u===0||l.route.path&&l.route.path.length>0)}function du(r){let l=Pv(r);return l.map((u,d)=>d===l.length-1?u.pathname:u.pathnameBase)}function uu(r,l,u,d=!1){let m;typeof r=="string"?m=tl(r):(m={...r},Wt(!m.pathname||!m.pathname.includes("?"),Id("?","pathname","search",m)),Wt(!m.pathname||!m.pathname.includes("#"),Id("#","pathname","hash",m)),Wt(!m.search||!m.search.includes("#"),Id("#","search","hash",m)));let p=r===""||m.pathname==="",h=p?"/":m.pathname,g;if(h==null)g=u;else{let S=l.length-1;if(!d&&h.startsWith("..")){let N=h.split("/");for(;N[0]==="..";)N.shift(),S-=1;m.pathname=N.join("/")}g=S>=0?l[S]:"/"}let b=Kv(m,g),y=h&&h!=="/"&&h.endsWith("/"),x=(p||h===".")&&u.endsWith("/");return!b.pathname.endsWith("/")&&(y||x)&&(b.pathname+="/"),b}var bn=r=>r.join("/").replace(/\/\/+/g,"/"),eg=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),tg=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,ag=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,sg=class{constructor(r,l,u,d=!1){this.status=r,this.statusText=l||"",this.internal=d,u instanceof Error?(this.data=u.toString(),this.error=u):this.data=u}};function ng(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function rg(r){return r.map(l=>l.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Lh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ih(r,l){let u=r;if(typeof u!="string"||!Jv.test(u))return{absoluteURL:void 0,isExternal:!1,to:u};let d=u,m=!1;if(Lh)try{let p=new URL(window.location.href),h=u.startsWith("//")?new URL(p.protocol+u):new URL(u),g=xn(h.pathname,l);h.origin===p.origin&&g!=null?u=g+h.search+h.hash:m=!0}catch{Rs(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:d,isExternal:m,to:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Uh=["POST","PUT","PATCH","DELETE"];new Set(Uh);var lg=["GET",...Uh];new Set(lg);var al=c.createContext(null);al.displayName="DataRouter";var Ai=c.createContext(null);Ai.displayName="DataRouterState";var og=c.createContext(!1),qh=c.createContext({isTransitioning:!1});qh.displayName="ViewTransition";var ig=c.createContext(new Map);ig.displayName="Fetchers";var cg=c.createContext(null);cg.displayName="Await";var ps=c.createContext(null);ps.displayName="Navigation";var Jl=c.createContext(null);Jl.displayName="Location";var Ms=c.createContext({outlet:null,matches:[],isDataRoute:!1});Ms.displayName="Route";var mu=c.createContext(null);mu.displayName="RouteError";var Fh="REACT_ROUTER_ERROR",dg="REDIRECT",ug="ROUTE_ERROR_RESPONSE";function mg(r){if(r.startsWith(`${Fh}:${dg}:{`))try{let l=JSON.parse(r.slice(28));if(typeof l=="object"&&l&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.location=="string"&&typeof l.reloadDocument=="boolean"&&typeof l.replace=="boolean")return l}catch{}}function pg(r){if(r.startsWith(`${Fh}:${ug}:{`))try{let l=JSON.parse(r.slice(40));if(typeof l=="object"&&l&&typeof l.status=="number"&&typeof l.statusText=="string")return new sg(l.status,l.statusText,l.data)}catch{}}function fg(r,{relative:l}={}){Wt(sl(),"useHref() may be used only in the context of a <Router> component.");let{basename:u,navigator:d}=c.useContext(ps),{hash:m,pathname:p,search:h}=Kl(r,{relative:l}),g=p;return u!=="/"&&(g=p==="/"?u:bn([u,p])),d.createHref({pathname:g,search:h,hash:m})}function sl(){return c.useContext(Jl)!=null}function qa(){return Wt(sl(),"useLocation() may be used only in the context of a <Router> component."),c.useContext(Jl).location}var Hh="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $h(r){c.useContext(ps).static||c.useLayoutEffect(r)}function Dt(){let{isDataRoute:r}=c.useContext(Ms);return r?Rg():hg()}function hg(){Wt(sl(),"useNavigate() may be used only in the context of a <Router> component.");let r=c.useContext(al),{basename:l,navigator:u}=c.useContext(ps),{matches:d}=c.useContext(Ms),{pathname:m}=qa(),p=JSON.stringify(du(d)),h=c.useRef(!1);return $h(()=>{h.current=!0}),c.useCallback((b,y={})=>{if(Rs(h.current,Hh),!h.current)return;if(typeof b=="number"){u.go(b);return}let x=uu(b,JSON.parse(p),m,y.relative==="path");r==null&&l!=="/"&&(x.pathname=x.pathname==="/"?l:bn([l,x.pathname])),(y.replace?u.replace:u.push)(x,y.state,y)},[l,u,p,m,r])}var yg=c.createContext(null);function bg(r){let l=c.useContext(Ms).outlet;return c.useMemo(()=>l&&c.createElement(yg.Provider,{value:r},l),[l,r])}function yr(){let{matches:r}=c.useContext(Ms),l=r[r.length-1];return l?l.params:{}}function Kl(r,{relative:l}={}){let{matches:u}=c.useContext(Ms),{pathname:d}=qa(),m=JSON.stringify(du(u));return c.useMemo(()=>uu(r,JSON.parse(m),d,l==="path"),[r,m,d,l])}function vg(r,l){return Yh(r,l)}function Yh(r,l,u,d,m){var P;Wt(sl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:p}=c.useContext(ps),{matches:h}=c.useContext(Ms),g=h[h.length-1],b=g?g.params:{},y=g?g.pathname:"/",x=g?g.pathnameBase:"/",S=g&&g.route;{let z=S&&S.path||"";Gh(y,!S||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let N=qa(),I;if(l){let z=typeof l=="string"?tl(l):l;Wt(x==="/"||((P=z.pathname)==null?void 0:P.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${z.pathname}" was given in the \`location\` prop.`),I=z}else I=N;let k=I.pathname||"/",L=k;if(x!=="/"){let z=x.replace(/^\//,"").split("/");L="/"+k.replace(/^\//,"").split("/").slice(z.length).join("/")}let w=Eh(r,{pathname:L});Rs(S||w!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),Rs(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=Sg(w&&w.map(z=>Object.assign({},z,{params:Object.assign({},b,z.params),pathname:bn([x,p.encodeLocation?p.encodeLocation(z.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?x:bn([x,p.encodeLocation?p.encodeLocation(z.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathnameBase])})),h,u,d,m);return l&&O?c.createElement(Jl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},O):O}function gg(){let r=Ng(),l=ng(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),u=r instanceof Error?r.stack:null,d="rgba(200,200,200, 0.5)",m={padding:"0.5rem",backgroundColor:d},p={padding:"2px 4px",backgroundColor:d},h=null;return console.error("Error handled by React Router default ErrorBoundary:",r),h=c.createElement(c.Fragment,null,c.createElement("p",null," Hey developer "),c.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",c.createElement("code",{style:p},"ErrorBoundary")," or"," ",c.createElement("code",{style:p},"errorElement")," prop on your route.")),c.createElement(c.Fragment,null,c.createElement("h2",null,"Unexpected Application Error!"),c.createElement("h3",{style:{fontStyle:"italic"}},l),u?c.createElement("pre",{style:m},u):null,h)}var xg=c.createElement(gg,null),Wh=class extends c.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,l){return l.location!==r.location||l.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:l.error,location:l.location,revalidation:r.revalidation||l.revalidation}}componentDidCatch(r,l){this.props.onError?this.props.onError(r,l):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const u=pg(r.digest);u&&(r=u)}let l=r!==void 0?c.createElement(Ms.Provider,{value:this.props.routeContext},c.createElement(mu.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?c.createElement(_g,{error:r},l):l}};Wh.contextType=og;var Ud=new WeakMap;function _g({children:r,error:l}){let{basename:u}=c.useContext(ps);if(typeof l=="object"&&l&&"digest"in l&&typeof l.digest=="string"){let d=mg(l.digest);if(d){let m=Ud.get(l);if(m)throw m;let p=Ih(d.location,u);if(Lh&&!Ud.get(l))if(p.isExternal||d.reloadDocument)window.location.href=p.absoluteURL||p.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(p.to,{replace:d.replace}));throw Ud.set(l,h),h}return c.createElement("meta",{httpEquiv:"refresh",content:`0;url=${p.absoluteURL||p.to}`})}}return r}function jg({routeContext:r,match:l,children:u}){let d=c.useContext(al);return d&&d.static&&d.staticContext&&(l.route.errorElement||l.route.ErrorBoundary)&&(d.staticContext._deepestRenderedBoundaryId=l.route.id),c.createElement(Ms.Provider,{value:r},u)}function Sg(r,l=[],u=null,d=null,m=null){if(r==null){if(!u)return null;if(u.errors)r=u.matches;else if(l.length===0&&!u.initialized&&u.matches.length>0)r=u.matches;else return null}let p=r,h=u==null?void 0:u.errors;if(h!=null){let x=p.findIndex(S=>S.route.id&&(h==null?void 0:h[S.route.id])!==void 0);Wt(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),p=p.slice(0,Math.min(p.length,x+1))}let g=!1,b=-1;if(u)for(let x=0;x<p.length;x++){let S=p[x];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(b=x),S.route.id){let{loaderData:N,errors:I}=u,k=S.route.loader&&!N.hasOwnProperty(S.route.id)&&(!I||I[S.route.id]===void 0);if(S.route.lazy||k){g=!0,b>=0?p=p.slice(0,b+1):p=[p[0]];break}}}let y=u&&d?(x,S)=>{var N,I;d(x,{location:u.location,params:((I=(N=u.matches)==null?void 0:N[0])==null?void 0:I.params)??{},unstable_pattern:rg(u.matches),errorInfo:S})}:void 0;return p.reduceRight((x,S,N)=>{let I,k=!1,L=null,w=null;u&&(I=h&&S.route.id?h[S.route.id]:void 0,L=S.route.errorElement||xg,g&&(b<0&&N===0?(Gh("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,w=null):b===N&&(k=!0,w=S.route.hydrateFallbackElement||null)));let O=l.concat(p.slice(0,N+1)),P=()=>{let z;return I?z=L:k?z=w:S.route.Component?z=c.createElement(S.route.Component,null):S.route.element?z=S.route.element:z=x,c.createElement(jg,{match:S,routeContext:{outlet:x,matches:O,isDataRoute:u!=null},children:z})};return u&&(S.route.ErrorBoundary||S.route.errorElement||N===0)?c.createElement(Wh,{location:u.location,revalidation:u.revalidation,component:L,error:I,children:P(),routeContext:{outlet:null,matches:O,isDataRoute:!0},onError:y}):P()},null)}function pu(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Cg(r){let l=c.useContext(al);return Wt(l,pu(r)),l}function wg(r){let l=c.useContext(Ai);return Wt(l,pu(r)),l}function kg(r){let l=c.useContext(Ms);return Wt(l,pu(r)),l}function fu(r){let l=kg(r),u=l.matches[l.matches.length-1];return Wt(u.route.id,`${r} can only be used on routes that contain a unique "id"`),u.route.id}function Ag(){return fu("useRouteId")}function Ng(){var d;let r=c.useContext(mu),l=wg("useRouteError"),u=fu("useRouteError");return r!==void 0?r:(d=l.errors)==null?void 0:d[u]}function Rg(){let{router:r}=Cg("useNavigate"),l=fu("useNavigate"),u=c.useRef(!1);return $h(()=>{u.current=!0}),c.useCallback(async(m,p={})=>{Rs(u.current,Hh),u.current&&(typeof m=="number"?await r.navigate(m):await r.navigate(m,{fromRouteId:l,...p}))},[r,l])}var ph={};function Gh(r,l,u){!l&&!ph[r]&&(ph[r]=!0,Rs(!1,u))}c.memo(Mg);function Mg({routes:r,future:l,state:u,onError:d}){return Yh(r,void 0,u,d,l)}function Xs({to:r,replace:l,state:u,relative:d}){Wt(sl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:m}=c.useContext(ps);Rs(!m,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:p}=c.useContext(Ms),{pathname:h}=qa(),g=Dt(),b=uu(r,du(p),h,d==="path"),y=JSON.stringify(b);return c.useEffect(()=>{g(JSON.parse(y),{replace:l,state:u,relative:d})},[g,y,d,l,u]),null}function Bg(r){return bg(r.context)}function Ke(r){Wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Tg({basename:r="/",children:l=null,location:u,navigationType:d="POP",navigator:m,static:p=!1,unstable_useTransitions:h}){Wt(!sl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let g=r.replace(/^\/*/,"/"),b=c.useMemo(()=>({basename:g,navigator:m,static:p,unstable_useTransitions:h,future:{}}),[g,m,p,h]);typeof u=="string"&&(u=tl(u));let{pathname:y="/",search:x="",hash:S="",state:N=null,key:I="default"}=u,k=c.useMemo(()=>{let L=xn(y,g);return L==null?null:{location:{pathname:L,search:x,hash:S,state:N,key:I},navigationType:d}},[g,y,x,S,N,I,d]);return Rs(k!=null,`<Router basename="${g}"> is not able to match the URL "${y}${x}${S}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:c.createElement(ps.Provider,{value:b},c.createElement(Jl.Provider,{children:l,value:k}))}function zg({children:r,location:l}){return vg(Pd(r),l)}function Pd(r,l=[]){let u=[];return c.Children.forEach(r,(d,m)=>{if(!c.isValidElement(d))return;let p=[...l,m];if(d.type===c.Fragment){u.push.apply(u,Pd(d.props.children,p));return}Wt(d.type===Ke,`[${typeof d.type=="string"?d.type:d.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Wt(!d.props.index||!d.props.children,"An index route cannot have child routes.");let h={id:d.props.id||p.join("-"),caseSensitive:d.props.caseSensitive,element:d.props.element,Component:d.props.Component,index:d.props.index,path:d.props.path,middleware:d.props.middleware,loader:d.props.loader,action:d.props.action,hydrateFallbackElement:d.props.hydrateFallbackElement,HydrateFallback:d.props.HydrateFallback,errorElement:d.props.errorElement,ErrorBoundary:d.props.ErrorBoundary,hasErrorBoundary:d.props.hasErrorBoundary===!0||d.props.ErrorBoundary!=null||d.props.errorElement!=null,shouldRevalidate:d.props.shouldRevalidate,handle:d.props.handle,lazy:d.props.lazy};d.props.children&&(h.children=Pd(d.props.children,p)),u.push(h)}),u}var vi="get",gi="application/x-www-form-urlencoded";function Ni(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function Eg(r){return Ni(r)&&r.tagName.toLowerCase()==="button"}function Dg(r){return Ni(r)&&r.tagName.toLowerCase()==="form"}function Og(r){return Ni(r)&&r.tagName.toLowerCase()==="input"}function Lg(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Ig(r,l){return r.button===0&&(!l||l==="_self")&&!Lg(r)}function eu(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((l,u)=>{let d=r[u];return l.concat(Array.isArray(d)?d.map(m=>[u,m]):[[u,d]])},[]))}function Ug(r,l){let u=eu(r);return l&&l.forEach((d,m)=>{u.has(m)||l.getAll(m).forEach(p=>{u.append(m,p)})}),u}var pi=null;function qg(){if(pi===null)try{new FormData(document.createElement("form"),0),pi=!1}catch{pi=!0}return pi}var Fg=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qd(r){return r!=null&&!Fg.has(r)?(Rs(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gi}"`),null):r}function Hg(r,l){let u,d,m,p,h;if(Dg(r)){let g=r.getAttribute("action");d=g?xn(g,l):null,u=r.getAttribute("method")||vi,m=qd(r.getAttribute("enctype"))||gi,p=new FormData(r)}else if(Eg(r)||Og(r)&&(r.type==="submit"||r.type==="image")){let g=r.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=r.getAttribute("formaction")||g.getAttribute("action");if(d=b?xn(b,l):null,u=r.getAttribute("formmethod")||g.getAttribute("method")||vi,m=qd(r.getAttribute("formenctype"))||qd(g.getAttribute("enctype"))||gi,p=new FormData(g,r),!qg()){let{name:y,type:x,value:S}=r;if(x==="image"){let N=y?`${y}.`:"";p.append(`${N}x`,"0"),p.append(`${N}y`,"0")}else y&&p.append(y,S)}}else{if(Ni(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');u=vi,d=null,m=gi,h=r}return p&&m==="text/plain"&&(h=p,p=void 0),{action:d,method:u.toLowerCase(),encType:m,formData:p,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function hu(r,l){if(r===!1||r===null||typeof r>"u")throw new Error(l)}function $g(r,l,u,d){let m=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return u?m.pathname.endsWith("/")?m.pathname=`${m.pathname}_.${d}`:m.pathname=`${m.pathname}.${d}`:m.pathname==="/"?m.pathname=`_root.${d}`:l&&xn(m.pathname,l)==="/"?m.pathname=`${l.replace(/\/$/,"")}/_root.${d}`:m.pathname=`${m.pathname.replace(/\/$/,"")}.${d}`,m}async function Yg(r,l){if(r.id in l)return l[r.id];try{let u=await import(r.module);return l[r.id]=u,u}catch(u){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(u),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Wg(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Gg(r,l,u){let d=await Promise.all(r.map(async m=>{let p=l.routes[m.route.id];if(p){let h=await Yg(p,u);return h.links?h.links():[]}return[]}));return Zg(d.flat(1).filter(Wg).filter(m=>m.rel==="stylesheet"||m.rel==="preload").map(m=>m.rel==="stylesheet"?{...m,rel:"prefetch",as:"style"}:{...m,rel:"prefetch"}))}function fh(r,l,u,d,m,p){let h=(b,y)=>u[y]?b.route.id!==u[y].route.id:!0,g=(b,y)=>{var x;return u[y].pathname!==b.pathname||((x=u[y].route.path)==null?void 0:x.endsWith("*"))&&u[y].params["*"]!==b.params["*"]};return p==="assets"?l.filter((b,y)=>h(b,y)||g(b,y)):p==="data"?l.filter((b,y)=>{var S;let x=d.routes[b.route.id];if(!x||!x.hasLoader)return!1;if(h(b,y)||g(b,y))return!0;if(b.route.shouldRevalidate){let N=b.route.shouldRevalidate({currentUrl:new URL(m.pathname+m.search+m.hash,window.origin),currentParams:((S=u[0])==null?void 0:S.params)||{},nextUrl:new URL(r,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof N=="boolean")return N}return!0}):[]}function Vg(r,l,{includeHydrateFallback:u}={}){return Qg(r.map(d=>{let m=l.routes[d.route.id];if(!m)return[];let p=[m.module];return m.clientActionModule&&(p=p.concat(m.clientActionModule)),m.clientLoaderModule&&(p=p.concat(m.clientLoaderModule)),u&&m.hydrateFallbackModule&&(p=p.concat(m.hydrateFallbackModule)),m.imports&&(p=p.concat(m.imports)),p}).flat(1))}function Qg(r){return[...new Set(r)]}function Xg(r){let l={},u=Object.keys(r).sort();for(let d of u)l[d]=r[d];return l}function Zg(r,l){let u=new Set;return new Set(l),r.reduce((d,m)=>{let p=JSON.stringify(Xg(m));return u.has(p)||(u.add(p),d.push({key:p,link:m})),d},[])}function Vh(){let r=c.useContext(al);return hu(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Jg(){let r=c.useContext(Ai);return hu(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var yu=c.createContext(void 0);yu.displayName="FrameworkContext";function Qh(){let r=c.useContext(yu);return hu(r,"You must render this element inside a <HydratedRouter> element"),r}function Kg(r,l){let u=c.useContext(yu),[d,m]=c.useState(!1),[p,h]=c.useState(!1),{onFocus:g,onBlur:b,onMouseEnter:y,onMouseLeave:x,onTouchStart:S}=l,N=c.useRef(null);c.useEffect(()=>{if(r==="render"&&h(!0),r==="viewport"){let L=O=>{O.forEach(P=>{h(P.isIntersecting)})},w=new IntersectionObserver(L,{threshold:.5});return N.current&&w.observe(N.current),()=>{w.disconnect()}}},[r]),c.useEffect(()=>{if(d){let L=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(L)}}},[d]);let I=()=>{m(!0)},k=()=>{m(!1),h(!1)};return u?r!=="intent"?[p,N,{}]:[p,N,{onFocus:Vl(g,I),onBlur:Vl(b,k),onMouseEnter:Vl(y,I),onMouseLeave:Vl(x,k),onTouchStart:Vl(S,I)}]:[!1,N,{}]}function Vl(r,l){return u=>{r&&r(u),u.defaultPrevented||l(u)}}function Pg({page:r,...l}){let{router:u}=Vh(),d=c.useMemo(()=>Eh(u.routes,r,u.basename),[u.routes,r,u.basename]);return d?c.createElement(tx,{page:r,matches:d,...l}):null}function ex(r){let{manifest:l,routeModules:u}=Qh(),[d,m]=c.useState([]);return c.useEffect(()=>{let p=!1;return Gg(r,l,u).then(h=>{p||m(h)}),()=>{p=!0}},[r,l,u]),d}function tx({page:r,matches:l,...u}){let d=qa(),{future:m,manifest:p,routeModules:h}=Qh(),{basename:g}=Vh(),{loaderData:b,matches:y}=Jg(),x=c.useMemo(()=>fh(r,l,y,p,d,"data"),[r,l,y,p,d]),S=c.useMemo(()=>fh(r,l,y,p,d,"assets"),[r,l,y,p,d]),N=c.useMemo(()=>{if(r===d.pathname+d.search+d.hash)return[];let L=new Set,w=!1;if(l.forEach(P=>{var M;let z=p.routes[P.route.id];!z||!z.hasLoader||(!x.some(G=>G.route.id===P.route.id)&&P.route.id in b&&((M=h[P.route.id])!=null&&M.shouldRevalidate)||z.hasClientLoader?w=!0:L.add(P.route.id))}),L.size===0)return[];let O=$g(r,g,m.unstable_trailingSlashAwareDataRequests,"data");return w&&L.size>0&&O.searchParams.set("_routes",l.filter(P=>L.has(P.route.id)).map(P=>P.route.id).join(",")),[O.pathname+O.search]},[g,m.unstable_trailingSlashAwareDataRequests,b,d,p,x,l,r,h]),I=c.useMemo(()=>Vg(S,p),[S,p]),k=ex(S);return c.createElement(c.Fragment,null,N.map(L=>c.createElement("link",{key:L,rel:"prefetch",as:"fetch",href:L,...u})),I.map(L=>c.createElement("link",{key:L,rel:"modulepreload",href:L,...u})),k.map(({key:L,link:w})=>c.createElement("link",{key:L,nonce:u.nonce,...w,crossOrigin:w.crossOrigin??u.crossOrigin})))}function ax(...r){return l=>{r.forEach(u=>{typeof u=="function"?u(l):u!=null&&(u.current=l)})}}var sx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sx&&(window.__reactRouterVersion="7.13.0")}catch{}function nx({basename:r,children:l,unstable_useTransitions:u,window:d}){let m=c.useRef();m.current==null&&(m.current=Ev({window:d,v5Compat:!0}));let p=m.current,[h,g]=c.useState({action:p.action,location:p.location}),b=c.useCallback(y=>{u===!1?g(y):c.startTransition(()=>g(y))},[u]);return c.useLayoutEffect(()=>p.listen(b),[p,b]),c.createElement(Tg,{basename:r,children:l,location:h.location,navigationType:h.action,navigator:p,unstable_useTransitions:u})}var Xh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zh=c.forwardRef(function({onClick:l,discover:u="render",prefetch:d="none",relative:m,reloadDocument:p,replace:h,state:g,target:b,to:y,preventScrollReset:x,viewTransition:S,unstable_defaultShouldRevalidate:N,...I},k){let{basename:L,unstable_useTransitions:w}=c.useContext(ps),O=typeof y=="string"&&Xh.test(y),P=Ih(y,L);y=P.to;let z=fg(y,{relative:m}),[M,G,ee]=Kg(d,I),K=ox(y,{replace:h,state:g,target:b,preventScrollReset:x,relative:m,viewTransition:S,unstable_defaultShouldRevalidate:N,unstable_useTransitions:w});function re(T){l&&l(T),T.defaultPrevented||K(T)}let F=c.createElement("a",{...I,...ee,href:P.absoluteURL||z,onClick:P.isExternal||p?l:re,ref:ax(k,G),target:b,"data-discover":!O&&u==="render"?"true":void 0});return M&&!O?c.createElement(c.Fragment,null,F,c.createElement(Pg,{page:z})):F});Zh.displayName="Link";var pa=c.forwardRef(function({"aria-current":l="page",caseSensitive:u=!1,className:d="",end:m=!1,style:p,to:h,viewTransition:g,children:b,...y},x){let S=Kl(h,{relative:y.relative}),N=qa(),I=c.useContext(Ai),{navigator:k,basename:L}=c.useContext(ps),w=I!=null&&mx(S)&&g===!0,O=k.encodeLocation?k.encodeLocation(S).pathname:S.pathname,P=N.pathname,z=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;u||(P=P.toLowerCase(),z=z?z.toLowerCase():null,O=O.toLowerCase()),z&&L&&(z=xn(z,L)||z);const M=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let G=P===O||!m&&P.startsWith(O)&&P.charAt(M)==="/",ee=z!=null&&(z===O||!m&&z.startsWith(O)&&z.charAt(O.length)==="/"),K={isActive:G,isPending:ee,isTransitioning:w},re=G?l:void 0,F;typeof d=="function"?F=d(K):F=[d,G?"active":null,ee?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let T=typeof p=="function"?p(K):p;return c.createElement(Zh,{...y,"aria-current":re,className:F,ref:x,style:T,to:h,viewTransition:g},typeof b=="function"?b(K):b)});pa.displayName="NavLink";var rx=c.forwardRef(({discover:r="render",fetcherKey:l,navigate:u,reloadDocument:d,replace:m,state:p,method:h=vi,action:g,onSubmit:b,relative:y,preventScrollReset:x,viewTransition:S,unstable_defaultShouldRevalidate:N,...I},k)=>{let{unstable_useTransitions:L}=c.useContext(ps),w=dx(),O=ux(g,{relative:y}),P=h.toLowerCase()==="get"?"get":"post",z=typeof g=="string"&&Xh.test(g),M=G=>{if(b&&b(G),G.defaultPrevented)return;G.preventDefault();let ee=G.nativeEvent.submitter,K=(ee==null?void 0:ee.getAttribute("formmethod"))||h,re=()=>w(ee||G.currentTarget,{fetcherKey:l,method:K,navigate:u,replace:m,state:p,relative:y,preventScrollReset:x,viewTransition:S,unstable_defaultShouldRevalidate:N});L&&u!==!1?c.startTransition(()=>re()):re()};return c.createElement("form",{ref:k,method:P,action:O,onSubmit:d?b:M,...I,"data-discover":!z&&r==="render"?"true":void 0})});rx.displayName="Form";function lx(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jh(r){let l=c.useContext(al);return Wt(l,lx(r)),l}function ox(r,{target:l,replace:u,state:d,preventScrollReset:m,relative:p,viewTransition:h,unstable_defaultShouldRevalidate:g,unstable_useTransitions:b}={}){let y=Dt(),x=qa(),S=Kl(r,{relative:p});return c.useCallback(N=>{if(Ig(N,l)){N.preventDefault();let I=u!==void 0?u:Zl(x)===Zl(S),k=()=>y(r,{replace:I,state:d,preventScrollReset:m,relative:p,viewTransition:h,unstable_defaultShouldRevalidate:g});b?c.startTransition(()=>k()):k()}},[x,y,S,u,d,l,r,m,p,h,g,b])}function Bs(r){Rs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let l=c.useRef(eu(r)),u=c.useRef(!1),d=qa(),m=c.useMemo(()=>Ug(d.search,u.current?null:l.current),[d.search]),p=Dt(),h=c.useCallback((g,b)=>{const y=eu(typeof g=="function"?g(new URLSearchParams(m)):g);u.current=!0,p("?"+y,b)},[p,m]);return[m,h]}var ix=0,cx=()=>`__${String(++ix)}__`;function dx(){let{router:r}=Jh("useSubmit"),{basename:l}=c.useContext(ps),u=Ag(),d=r.fetch,m=r.navigate;return c.useCallback(async(p,h={})=>{let{action:g,method:b,encType:y,formData:x,body:S}=Hg(p,l);if(h.navigate===!1){let N=h.fetcherKey||cx();await d(N,u,h.action||g,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:x,body:S,formMethod:h.method||b,formEncType:h.encType||y,flushSync:h.flushSync})}else await m(h.action||g,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:x,body:S,formMethod:h.method||b,formEncType:h.encType||y,replace:h.replace,state:h.state,fromRouteId:u,flushSync:h.flushSync,viewTransition:h.viewTransition})},[d,m,l,u])}function ux(r,{relative:l}={}){let{basename:u}=c.useContext(ps),d=c.useContext(Ms);Wt(d,"useFormAction must be used inside a RouteContext");let[m]=d.matches.slice(-1),p={...Kl(r||".",{relative:l})},h=qa();if(r==null){p.search=h.search;let g=new URLSearchParams(p.search),b=g.getAll("index");if(b.some(x=>x==="")){g.delete("index"),b.filter(S=>S).forEach(S=>g.append("index",S));let x=g.toString();p.search=x?`?${x}`:""}}return(!r||r===".")&&m.route.index&&(p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index"),u!=="/"&&(p.pathname=p.pathname==="/"?u:bn([u,p.pathname])),Zl(p)}function mx(r,{relative:l}={}){let u=c.useContext(qh);Wt(u!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:d}=Jh("useViewTransitionState"),m=Kl(r,{relative:l});if(!u.isTransitioning)return!1;let p=xn(u.currentLocation.pathname,d)||u.currentLocation.pathname,h=xn(u.nextLocation.pathname,d)||u.nextLocation.pathname;return Si(m.pathname,h)!=null||Si(m.pathname,p)!=null}var Ql=zh();function Kh(r,l){return function(){return r.apply(l,arguments)}}const{toString:px}=Object.prototype,{getPrototypeOf:bu}=Object,{iterator:Ri,toStringTag:Ph}=Symbol,Mi=(r=>l=>{const u=px.call(l);return r[u]||(r[u]=u.slice(8,-1).toLowerCase())})(Object.create(null)),Fs=r=>(r=r.toLowerCase(),l=>Mi(l)===r),Bi=r=>l=>typeof l===r,{isArray:nl}=Array,el=Bi("undefined");function Pl(r){return r!==null&&!el(r)&&r.constructor!==null&&!el(r.constructor)&&as(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const ey=Fs("ArrayBuffer");function fx(r){let l;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?l=ArrayBuffer.isView(r):l=r&&r.buffer&&ey(r.buffer),l}const hx=Bi("string"),as=Bi("function"),ty=Bi("number"),eo=r=>r!==null&&typeof r=="object",yx=r=>r===!0||r===!1,xi=r=>{if(Mi(r)!=="object")return!1;const l=bu(r);return(l===null||l===Object.prototype||Object.getPrototypeOf(l)===null)&&!(Ph in r)&&!(Ri in r)},bx=r=>{if(!eo(r)||Pl(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},vx=Fs("Date"),gx=Fs("File"),xx=Fs("Blob"),_x=Fs("FileList"),jx=r=>eo(r)&&as(r.pipe),Sx=r=>{let l;return r&&(typeof FormData=="function"&&r instanceof FormData||as(r.append)&&((l=Mi(r))==="formdata"||l==="object"&&as(r.toString)&&r.toString()==="[object FormData]"))},Cx=Fs("URLSearchParams"),[wx,kx,Ax,Nx]=["ReadableStream","Request","Response","Headers"].map(Fs),Rx=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function to(r,l,{allOwnKeys:u=!1}={}){if(r===null||typeof r>"u")return;let d,m;if(typeof r!="object"&&(r=[r]),nl(r))for(d=0,m=r.length;d<m;d++)l.call(null,r[d],d,r);else{if(Pl(r))return;const p=u?Object.getOwnPropertyNames(r):Object.keys(r),h=p.length;let g;for(d=0;d<h;d++)g=p[d],l.call(null,r[g],g,r)}}function ay(r,l){if(Pl(r))return null;l=l.toLowerCase();const u=Object.keys(r);let d=u.length,m;for(;d-- >0;)if(m=u[d],l===m.toLowerCase())return m;return null}const cr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,sy=r=>!el(r)&&r!==cr;function tu(){const{caseless:r,skipUndefined:l}=sy(this)&&this||{},u={},d=(m,p)=>{if(p==="__proto__"||p==="constructor"||p==="prototype")return;const h=r&&ay(u,p)||p;xi(u[h])&&xi(m)?u[h]=tu(u[h],m):xi(m)?u[h]=tu({},m):nl(m)?u[h]=m.slice():(!l||!el(m))&&(u[h]=m)};for(let m=0,p=arguments.length;m<p;m++)arguments[m]&&to(arguments[m],d);return u}const Mx=(r,l,u,{allOwnKeys:d}={})=>(to(l,(m,p)=>{u&&as(m)?Object.defineProperty(r,p,{value:Kh(m,u),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(r,p,{value:m,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:d}),r),Bx=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),Tx=(r,l,u,d)=>{r.prototype=Object.create(l.prototype,d),Object.defineProperty(r.prototype,"constructor",{value:r,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(r,"super",{value:l.prototype}),u&&Object.assign(r.prototype,u)},zx=(r,l,u,d)=>{let m,p,h;const g={};if(l=l||{},r==null)return l;do{for(m=Object.getOwnPropertyNames(r),p=m.length;p-- >0;)h=m[p],(!d||d(h,r,l))&&!g[h]&&(l[h]=r[h],g[h]=!0);r=u!==!1&&bu(r)}while(r&&(!u||u(r,l))&&r!==Object.prototype);return l},Ex=(r,l,u)=>{r=String(r),(u===void 0||u>r.length)&&(u=r.length),u-=l.length;const d=r.indexOf(l,u);return d!==-1&&d===u},Dx=r=>{if(!r)return null;if(nl(r))return r;let l=r.length;if(!ty(l))return null;const u=new Array(l);for(;l-- >0;)u[l]=r[l];return u},Ox=(r=>l=>r&&l instanceof r)(typeof Uint8Array<"u"&&bu(Uint8Array)),Lx=(r,l)=>{const d=(r&&r[Ri]).call(r);let m;for(;(m=d.next())&&!m.done;){const p=m.value;l.call(r,p[0],p[1])}},Ix=(r,l)=>{let u;const d=[];for(;(u=r.exec(l))!==null;)d.push(u);return d},Ux=Fs("HTMLFormElement"),qx=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(u,d,m){return d.toUpperCase()+m}),hh=(({hasOwnProperty:r})=>(l,u)=>r.call(l,u))(Object.prototype),Fx=Fs("RegExp"),ny=(r,l)=>{const u=Object.getOwnPropertyDescriptors(r),d={};to(u,(m,p)=>{let h;(h=l(m,p,r))!==!1&&(d[p]=h||m)}),Object.defineProperties(r,d)},Hx=r=>{ny(r,(l,u)=>{if(as(r)&&["arguments","caller","callee"].indexOf(u)!==-1)return!1;const d=r[u];if(as(d)){if(l.enumerable=!1,"writable"in l){l.writable=!1;return}l.set||(l.set=()=>{throw Error("Can not rewrite read-only method '"+u+"'")})}})},$x=(r,l)=>{const u={},d=m=>{m.forEach(p=>{u[p]=!0})};return nl(r)?d(r):d(String(r).split(l)),u},Yx=()=>{},Wx=(r,l)=>r!=null&&Number.isFinite(r=+r)?r:l;function Gx(r){return!!(r&&as(r.append)&&r[Ph]==="FormData"&&r[Ri])}const Vx=r=>{const l=new Array(10),u=(d,m)=>{if(eo(d)){if(l.indexOf(d)>=0)return;if(Pl(d))return d;if(!("toJSON"in d)){l[m]=d;const p=nl(d)?[]:{};return to(d,(h,g)=>{const b=u(h,m+1);!el(b)&&(p[g]=b)}),l[m]=void 0,p}}return d};return u(r,0)},Qx=Fs("AsyncFunction"),Xx=r=>r&&(eo(r)||as(r))&&as(r.then)&&as(r.catch),ry=((r,l)=>r?setImmediate:l?((u,d)=>(cr.addEventListener("message",({source:m,data:p})=>{m===cr&&p===u&&d.length&&d.shift()()},!1),m=>{d.push(m),cr.postMessage(u,"*")}))(`axios@${Math.random()}`,[]):u=>setTimeout(u))(typeof setImmediate=="function",as(cr.postMessage)),Zx=typeof queueMicrotask<"u"?queueMicrotask.bind(cr):typeof process<"u"&&process.nextTick||ry,Jx=r=>r!=null&&as(r[Ri]),ue={isArray:nl,isArrayBuffer:ey,isBuffer:Pl,isFormData:Sx,isArrayBufferView:fx,isString:hx,isNumber:ty,isBoolean:yx,isObject:eo,isPlainObject:xi,isEmptyObject:bx,isReadableStream:wx,isRequest:kx,isResponse:Ax,isHeaders:Nx,isUndefined:el,isDate:vx,isFile:gx,isBlob:xx,isRegExp:Fx,isFunction:as,isStream:jx,isURLSearchParams:Cx,isTypedArray:Ox,isFileList:_x,forEach:to,merge:tu,extend:Mx,trim:Rx,stripBOM:Bx,inherits:Tx,toFlatObject:zx,kindOf:Mi,kindOfTest:Fs,endsWith:Ex,toArray:Dx,forEachEntry:Lx,matchAll:Ix,isHTMLForm:Ux,hasOwnProperty:hh,hasOwnProp:hh,reduceDescriptors:ny,freezeMethods:Hx,toObjectSet:$x,toCamelCase:qx,noop:Yx,toFiniteNumber:Wx,findKey:ay,global:cr,isContextDefined:sy,isSpecCompliantForm:Gx,toJSONObject:Vx,isAsyncFn:Qx,isThenable:Xx,setImmediate:ry,asap:Zx,isIterable:Jx};let Ze=class ly extends Error{static from(l,u,d,m,p,h){const g=new ly(l.message,u||l.code,d,m,p);return g.cause=l,g.name=l.name,h&&Object.assign(g,h),g}constructor(l,u,d,m,p){super(l),this.name="AxiosError",this.isAxiosError=!0,u&&(this.code=u),d&&(this.config=d),m&&(this.request=m),p&&(this.response=p,this.status=p.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ue.toJSONObject(this.config),code:this.code,status:this.status}}};Ze.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";Ze.ERR_BAD_OPTION="ERR_BAD_OPTION";Ze.ECONNABORTED="ECONNABORTED";Ze.ETIMEDOUT="ETIMEDOUT";Ze.ERR_NETWORK="ERR_NETWORK";Ze.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";Ze.ERR_DEPRECATED="ERR_DEPRECATED";Ze.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";Ze.ERR_BAD_REQUEST="ERR_BAD_REQUEST";Ze.ERR_CANCELED="ERR_CANCELED";Ze.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";Ze.ERR_INVALID_URL="ERR_INVALID_URL";const Kx=null;function au(r){return ue.isPlainObject(r)||ue.isArray(r)}function oy(r){return ue.endsWith(r,"[]")?r.slice(0,-2):r}function yh(r,l,u){return r?r.concat(l).map(function(m,p){return m=oy(m),!u&&p?"["+m+"]":m}).join(u?".":""):l}function Px(r){return ue.isArray(r)&&!r.some(au)}const e_=ue.toFlatObject(ue,{},null,function(l){return/^is[A-Z]/.test(l)});function Ti(r,l,u){if(!ue.isObject(r))throw new TypeError("target must be an object");l=l||new FormData,u=ue.toFlatObject(u,{metaTokens:!0,dots:!1,indexes:!1},!1,function(L,w){return!ue.isUndefined(w[L])});const d=u.metaTokens,m=u.visitor||x,p=u.dots,h=u.indexes,b=(u.Blob||typeof Blob<"u"&&Blob)&&ue.isSpecCompliantForm(l);if(!ue.isFunction(m))throw new TypeError("visitor must be a function");function y(k){if(k===null)return"";if(ue.isDate(k))return k.toISOString();if(ue.isBoolean(k))return k.toString();if(!b&&ue.isBlob(k))throw new Ze("Blob is not supported. Use a Buffer instead.");return ue.isArrayBuffer(k)||ue.isTypedArray(k)?b&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function x(k,L,w){let O=k;if(k&&!w&&typeof k=="object"){if(ue.endsWith(L,"{}"))L=d?L:L.slice(0,-2),k=JSON.stringify(k);else if(ue.isArray(k)&&Px(k)||(ue.isFileList(k)||ue.endsWith(L,"[]"))&&(O=ue.toArray(k)))return L=oy(L),O.forEach(function(z,M){!(ue.isUndefined(z)||z===null)&&l.append(h===!0?yh([L],M,p):h===null?L:L+"[]",y(z))}),!1}return au(k)?!0:(l.append(yh(w,L,p),y(k)),!1)}const S=[],N=Object.assign(e_,{defaultVisitor:x,convertValue:y,isVisitable:au});function I(k,L){if(!ue.isUndefined(k)){if(S.indexOf(k)!==-1)throw Error("Circular reference detected in "+L.join("."));S.push(k),ue.forEach(k,function(O,P){(!(ue.isUndefined(O)||O===null)&&m.call(l,O,ue.isString(P)?P.trim():P,L,N))===!0&&I(O,L?L.concat(P):[P])}),S.pop()}}if(!ue.isObject(r))throw new TypeError("data must be an object");return I(r),l}function bh(r){const l={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(d){return l[d]})}function vu(r,l){this._pairs=[],r&&Ti(r,this,l)}const iy=vu.prototype;iy.append=function(l,u){this._pairs.push([l,u])};iy.toString=function(l){const u=l?function(d){return l.call(this,d,bh)}:bh;return this._pairs.map(function(m){return u(m[0])+"="+u(m[1])},"").join("&")};function t_(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function cy(r,l,u){if(!l)return r;const d=u&&u.encode||t_,m=ue.isFunction(u)?{serialize:u}:u,p=m&&m.serialize;let h;if(p?h=p(l,m):h=ue.isURLSearchParams(l)?l.toString():new vu(l,m).toString(d),h){const g=r.indexOf("#");g!==-1&&(r=r.slice(0,g)),r+=(r.indexOf("?")===-1?"?":"&")+h}return r}class vh{constructor(){this.handlers=[]}use(l,u,d){return this.handlers.push({fulfilled:l,rejected:u,synchronous:d?d.synchronous:!1,runWhen:d?d.runWhen:null}),this.handlers.length-1}eject(l){this.handlers[l]&&(this.handlers[l]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(l){ue.forEach(this.handlers,function(d){d!==null&&l(d)})}}const gu={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},a_=typeof URLSearchParams<"u"?URLSearchParams:vu,s_=typeof FormData<"u"?FormData:null,n_=typeof Blob<"u"?Blob:null,r_={isBrowser:!0,classes:{URLSearchParams:a_,FormData:s_,Blob:n_},protocols:["http","https","file","blob","url","data"]},xu=typeof window<"u"&&typeof document<"u",su=typeof navigator=="object"&&navigator||void 0,l_=xu&&(!su||["ReactNative","NativeScript","NS"].indexOf(su.product)<0),o_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",i_=xu&&window.location.href||"http://localhost",c_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:xu,hasStandardBrowserEnv:l_,hasStandardBrowserWebWorkerEnv:o_,navigator:su,origin:i_},Symbol.toStringTag,{value:"Module"})),Oa={...c_,...r_};function d_(r,l){return Ti(r,new Oa.classes.URLSearchParams,{visitor:function(u,d,m,p){return Oa.isNode&&ue.isBuffer(u)?(this.append(d,u.toString("base64")),!1):p.defaultVisitor.apply(this,arguments)},...l})}function u_(r){return ue.matchAll(/\w+|\[(\w*)]/g,r).map(l=>l[0]==="[]"?"":l[1]||l[0])}function m_(r){const l={},u=Object.keys(r);let d;const m=u.length;let p;for(d=0;d<m;d++)p=u[d],l[p]=r[p];return l}function dy(r){function l(u,d,m,p){let h=u[p++];if(h==="__proto__")return!0;const g=Number.isFinite(+h),b=p>=u.length;return h=!h&&ue.isArray(m)?m.length:h,b?(ue.hasOwnProp(m,h)?m[h]=[m[h],d]:m[h]=d,!g):((!m[h]||!ue.isObject(m[h]))&&(m[h]=[]),l(u,d,m[h],p)&&ue.isArray(m[h])&&(m[h]=m_(m[h])),!g)}if(ue.isFormData(r)&&ue.isFunction(r.entries)){const u={};return ue.forEachEntry(r,(d,m)=>{l(u_(d),m,u,0)}),u}return null}function p_(r,l,u){if(ue.isString(r))try{return(l||JSON.parse)(r),ue.trim(r)}catch(d){if(d.name!=="SyntaxError")throw d}return(u||JSON.stringify)(r)}const ao={transitional:gu,adapter:["xhr","http","fetch"],transformRequest:[function(l,u){const d=u.getContentType()||"",m=d.indexOf("application/json")>-1,p=ue.isObject(l);if(p&&ue.isHTMLForm(l)&&(l=new FormData(l)),ue.isFormData(l))return m?JSON.stringify(dy(l)):l;if(ue.isArrayBuffer(l)||ue.isBuffer(l)||ue.isStream(l)||ue.isFile(l)||ue.isBlob(l)||ue.isReadableStream(l))return l;if(ue.isArrayBufferView(l))return l.buffer;if(ue.isURLSearchParams(l))return u.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),l.toString();let g;if(p){if(d.indexOf("application/x-www-form-urlencoded")>-1)return d_(l,this.formSerializer).toString();if((g=ue.isFileList(l))||d.indexOf("multipart/form-data")>-1){const b=this.env&&this.env.FormData;return Ti(g?{"files[]":l}:l,b&&new b,this.formSerializer)}}return p||m?(u.setContentType("application/json",!1),p_(l)):l}],transformResponse:[function(l){const u=this.transitional||ao.transitional,d=u&&u.forcedJSONParsing,m=this.responseType==="json";if(ue.isResponse(l)||ue.isReadableStream(l))return l;if(l&&ue.isString(l)&&(d&&!this.responseType||m)){const h=!(u&&u.silentJSONParsing)&&m;try{return JSON.parse(l,this.parseReviver)}catch(g){if(h)throw g.name==="SyntaxError"?Ze.from(g,Ze.ERR_BAD_RESPONSE,this,null,this.response):g}}return l}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Oa.classes.FormData,Blob:Oa.classes.Blob},validateStatus:function(l){return l>=200&&l<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ue.forEach(["delete","get","head","post","put","patch"],r=>{ao.headers[r]={}});const f_=ue.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),h_=r=>{const l={};let u,d,m;return r&&r.split(`
`).forEach(function(h){m=h.indexOf(":"),u=h.substring(0,m).trim().toLowerCase(),d=h.substring(m+1).trim(),!(!u||l[u]&&f_[u])&&(u==="set-cookie"?l[u]?l[u].push(d):l[u]=[d]:l[u]=l[u]?l[u]+", "+d:d)}),l},gh=Symbol("internals");function Xl(r){return r&&String(r).trim().toLowerCase()}function _i(r){return r===!1||r==null?r:ue.isArray(r)?r.map(_i):String(r)}function y_(r){const l=Object.create(null),u=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let d;for(;d=u.exec(r);)l[d[1]]=d[2];return l}const b_=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function Fd(r,l,u,d,m){if(ue.isFunction(d))return d.call(this,l,u);if(m&&(l=u),!!ue.isString(l)){if(ue.isString(d))return l.indexOf(d)!==-1;if(ue.isRegExp(d))return d.test(l)}}function v_(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(l,u,d)=>u.toUpperCase()+d)}function g_(r,l){const u=ue.toCamelCase(" "+l);["get","set","has"].forEach(d=>{Object.defineProperty(r,d+u,{value:function(m,p,h){return this[d].call(this,l,m,p,h)},configurable:!0})})}let ss=class{constructor(l){l&&this.set(l)}set(l,u,d){const m=this;function p(g,b,y){const x=Xl(b);if(!x)throw new Error("header name must be a non-empty string");const S=ue.findKey(m,x);(!S||m[S]===void 0||y===!0||y===void 0&&m[S]!==!1)&&(m[S||b]=_i(g))}const h=(g,b)=>ue.forEach(g,(y,x)=>p(y,x,b));if(ue.isPlainObject(l)||l instanceof this.constructor)h(l,u);else if(ue.isString(l)&&(l=l.trim())&&!b_(l))h(h_(l),u);else if(ue.isObject(l)&&ue.isIterable(l)){let g={},b,y;for(const x of l){if(!ue.isArray(x))throw TypeError("Object iterator must return a key-value pair");g[y=x[0]]=(b=g[y])?ue.isArray(b)?[...b,x[1]]:[b,x[1]]:x[1]}h(g,u)}else l!=null&&p(u,l,d);return this}get(l,u){if(l=Xl(l),l){const d=ue.findKey(this,l);if(d){const m=this[d];if(!u)return m;if(u===!0)return y_(m);if(ue.isFunction(u))return u.call(this,m,d);if(ue.isRegExp(u))return u.exec(m);throw new TypeError("parser must be boolean|regexp|function")}}}has(l,u){if(l=Xl(l),l){const d=ue.findKey(this,l);return!!(d&&this[d]!==void 0&&(!u||Fd(this,this[d],d,u)))}return!1}delete(l,u){const d=this;let m=!1;function p(h){if(h=Xl(h),h){const g=ue.findKey(d,h);g&&(!u||Fd(d,d[g],g,u))&&(delete d[g],m=!0)}}return ue.isArray(l)?l.forEach(p):p(l),m}clear(l){const u=Object.keys(this);let d=u.length,m=!1;for(;d--;){const p=u[d];(!l||Fd(this,this[p],p,l,!0))&&(delete this[p],m=!0)}return m}normalize(l){const u=this,d={};return ue.forEach(this,(m,p)=>{const h=ue.findKey(d,p);if(h){u[h]=_i(m),delete u[p];return}const g=l?v_(p):String(p).trim();g!==p&&delete u[p],u[g]=_i(m),d[g]=!0}),this}concat(...l){return this.constructor.concat(this,...l)}toJSON(l){const u=Object.create(null);return ue.forEach(this,(d,m)=>{d!=null&&d!==!1&&(u[m]=l&&ue.isArray(d)?d.join(", "):d)}),u}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([l,u])=>l+": "+u).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(l){return l instanceof this?l:new this(l)}static concat(l,...u){const d=new this(l);return u.forEach(m=>d.set(m)),d}static accessor(l){const d=(this[gh]=this[gh]={accessors:{}}).accessors,m=this.prototype;function p(h){const g=Xl(h);d[g]||(g_(m,h),d[g]=!0)}return ue.isArray(l)?l.forEach(p):p(l),this}};ss.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ue.reduceDescriptors(ss.prototype,({value:r},l)=>{let u=l[0].toUpperCase()+l.slice(1);return{get:()=>r,set(d){this[u]=d}}});ue.freezeMethods(ss);function Hd(r,l){const u=this||ao,d=l||u,m=ss.from(d.headers);let p=d.data;return ue.forEach(r,function(g){p=g.call(u,p,m.normalize(),l?l.status:void 0)}),m.normalize(),p}function uy(r){return!!(r&&r.__CANCEL__)}let so=class extends Ze{constructor(l,u,d){super(l??"canceled",Ze.ERR_CANCELED,u,d),this.name="CanceledError",this.__CANCEL__=!0}};function my(r,l,u){const d=u.config.validateStatus;!u.status||!d||d(u.status)?r(u):l(new Ze("Request failed with status code "+u.status,[Ze.ERR_BAD_REQUEST,Ze.ERR_BAD_RESPONSE][Math.floor(u.status/100)-4],u.config,u.request,u))}function x_(r){const l=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return l&&l[1]||""}function __(r,l){r=r||10;const u=new Array(r),d=new Array(r);let m=0,p=0,h;return l=l!==void 0?l:1e3,function(b){const y=Date.now(),x=d[p];h||(h=y),u[m]=b,d[m]=y;let S=p,N=0;for(;S!==m;)N+=u[S++],S=S%r;if(m=(m+1)%r,m===p&&(p=(p+1)%r),y-h<l)return;const I=x&&y-x;return I?Math.round(N*1e3/I):void 0}}function j_(r,l){let u=0,d=1e3/l,m,p;const h=(y,x=Date.now())=>{u=x,m=null,p&&(clearTimeout(p),p=null),r(...y)};return[(...y)=>{const x=Date.now(),S=x-u;S>=d?h(y,x):(m=y,p||(p=setTimeout(()=>{p=null,h(m)},d-S)))},()=>m&&h(m)]}const Ci=(r,l,u=3)=>{let d=0;const m=__(50,250);return j_(p=>{const h=p.loaded,g=p.lengthComputable?p.total:void 0,b=h-d,y=m(b),x=h<=g;d=h;const S={loaded:h,total:g,progress:g?h/g:void 0,bytes:b,rate:y||void 0,estimated:y&&g&&x?(g-h)/y:void 0,event:p,lengthComputable:g!=null,[l?"download":"upload"]:!0};r(S)},u)},xh=(r,l)=>{const u=r!=null;return[d=>l[0]({lengthComputable:u,total:r,loaded:d}),l[1]]},_h=r=>(...l)=>ue.asap(()=>r(...l)),S_=Oa.hasStandardBrowserEnv?((r,l)=>u=>(u=new URL(u,Oa.origin),r.protocol===u.protocol&&r.host===u.host&&(l||r.port===u.port)))(new URL(Oa.origin),Oa.navigator&&/(msie|trident)/i.test(Oa.navigator.userAgent)):()=>!0,C_=Oa.hasStandardBrowserEnv?{write(r,l,u,d,m,p,h){if(typeof document>"u")return;const g=[`${r}=${encodeURIComponent(l)}`];ue.isNumber(u)&&g.push(`expires=${new Date(u).toUTCString()}`),ue.isString(d)&&g.push(`path=${d}`),ue.isString(m)&&g.push(`domain=${m}`),p===!0&&g.push("secure"),ue.isString(h)&&g.push(`SameSite=${h}`),document.cookie=g.join("; ")},read(r){if(typeof document>"u")return null;const l=document.cookie.match(new RegExp("(?:^|; )"+r+"=([^;]*)"));return l?decodeURIComponent(l[1]):null},remove(r){this.write(r,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function w_(r){return typeof r!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function k_(r,l){return l?r.replace(/\/?\/$/,"")+"/"+l.replace(/^\/+/,""):r}function py(r,l,u){let d=!w_(l);return r&&(d||u==!1)?k_(r,l):l}const jh=r=>r instanceof ss?{...r}:r;function hr(r,l){l=l||{};const u={};function d(y,x,S,N){return ue.isPlainObject(y)&&ue.isPlainObject(x)?ue.merge.call({caseless:N},y,x):ue.isPlainObject(x)?ue.merge({},x):ue.isArray(x)?x.slice():x}function m(y,x,S,N){if(ue.isUndefined(x)){if(!ue.isUndefined(y))return d(void 0,y,S,N)}else return d(y,x,S,N)}function p(y,x){if(!ue.isUndefined(x))return d(void 0,x)}function h(y,x){if(ue.isUndefined(x)){if(!ue.isUndefined(y))return d(void 0,y)}else return d(void 0,x)}function g(y,x,S){if(S in l)return d(y,x);if(S in r)return d(void 0,y)}const b={url:p,method:p,data:p,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:g,headers:(y,x,S)=>m(jh(y),jh(x),S,!0)};return ue.forEach(Object.keys({...r,...l}),function(x){if(x==="__proto__"||x==="constructor"||x==="prototype")return;const S=ue.hasOwnProp(b,x)?b[x]:m,N=S(r[x],l[x],x);ue.isUndefined(N)&&S!==g||(u[x]=N)}),u}const fy=r=>{const l=hr({},r);let{data:u,withXSRFToken:d,xsrfHeaderName:m,xsrfCookieName:p,headers:h,auth:g}=l;if(l.headers=h=ss.from(h),l.url=cy(py(l.baseURL,l.url,l.allowAbsoluteUrls),r.params,r.paramsSerializer),g&&h.set("Authorization","Basic "+btoa((g.username||"")+":"+(g.password?unescape(encodeURIComponent(g.password)):""))),ue.isFormData(u)){if(Oa.hasStandardBrowserEnv||Oa.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if(ue.isFunction(u.getHeaders)){const b=u.getHeaders(),y=["content-type","content-length"];Object.entries(b).forEach(([x,S])=>{y.includes(x.toLowerCase())&&h.set(x,S)})}}if(Oa.hasStandardBrowserEnv&&(d&&ue.isFunction(d)&&(d=d(l)),d||d!==!1&&S_(l.url))){const b=m&&p&&C_.read(p);b&&h.set(m,b)}return l},A_=typeof XMLHttpRequest<"u",N_=A_&&function(r){return new Promise(function(u,d){const m=fy(r);let p=m.data;const h=ss.from(m.headers).normalize();let{responseType:g,onUploadProgress:b,onDownloadProgress:y}=m,x,S,N,I,k;function L(){I&&I(),k&&k(),m.cancelToken&&m.cancelToken.unsubscribe(x),m.signal&&m.signal.removeEventListener("abort",x)}let w=new XMLHttpRequest;w.open(m.method.toUpperCase(),m.url,!0),w.timeout=m.timeout;function O(){if(!w)return;const z=ss.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),G={data:!g||g==="text"||g==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:z,config:r,request:w};my(function(K){u(K),L()},function(K){d(K),L()},G),w=null}"onloadend"in w?w.onloadend=O:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(O)},w.onabort=function(){w&&(d(new Ze("Request aborted",Ze.ECONNABORTED,r,w)),w=null)},w.onerror=function(M){const G=M&&M.message?M.message:"Network Error",ee=new Ze(G,Ze.ERR_NETWORK,r,w);ee.event=M||null,d(ee),w=null},w.ontimeout=function(){let M=m.timeout?"timeout of "+m.timeout+"ms exceeded":"timeout exceeded";const G=m.transitional||gu;m.timeoutErrorMessage&&(M=m.timeoutErrorMessage),d(new Ze(M,G.clarifyTimeoutError?Ze.ETIMEDOUT:Ze.ECONNABORTED,r,w)),w=null},p===void 0&&h.setContentType(null),"setRequestHeader"in w&&ue.forEach(h.toJSON(),function(M,G){w.setRequestHeader(G,M)}),ue.isUndefined(m.withCredentials)||(w.withCredentials=!!m.withCredentials),g&&g!=="json"&&(w.responseType=m.responseType),y&&([N,k]=Ci(y,!0),w.addEventListener("progress",N)),b&&w.upload&&([S,I]=Ci(b),w.upload.addEventListener("progress",S),w.upload.addEventListener("loadend",I)),(m.cancelToken||m.signal)&&(x=z=>{w&&(d(!z||z.type?new so(null,r,w):z),w.abort(),w=null)},m.cancelToken&&m.cancelToken.subscribe(x),m.signal&&(m.signal.aborted?x():m.signal.addEventListener("abort",x)));const P=x_(m.url);if(P&&Oa.protocols.indexOf(P)===-1){d(new Ze("Unsupported protocol "+P+":",Ze.ERR_BAD_REQUEST,r));return}w.send(p||null)})},R_=(r,l)=>{const{length:u}=r=r?r.filter(Boolean):[];if(l||u){let d=new AbortController,m;const p=function(y){if(!m){m=!0,g();const x=y instanceof Error?y:this.reason;d.abort(x instanceof Ze?x:new so(x instanceof Error?x.message:x))}};let h=l&&setTimeout(()=>{h=null,p(new Ze(`timeout of ${l}ms exceeded`,Ze.ETIMEDOUT))},l);const g=()=>{r&&(h&&clearTimeout(h),h=null,r.forEach(y=>{y.unsubscribe?y.unsubscribe(p):y.removeEventListener("abort",p)}),r=null)};r.forEach(y=>y.addEventListener("abort",p));const{signal:b}=d;return b.unsubscribe=()=>ue.asap(g),b}},M_=function*(r,l){let u=r.byteLength;if(u<l){yield r;return}let d=0,m;for(;d<u;)m=d+l,yield r.slice(d,m),d=m},B_=async function*(r,l){for await(const u of T_(r))yield*M_(u,l)},T_=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const l=r.getReader();try{for(;;){const{done:u,value:d}=await l.read();if(u)break;yield d}}finally{await l.cancel()}},Sh=(r,l,u,d)=>{const m=B_(r,l);let p=0,h,g=b=>{h||(h=!0,d&&d(b))};return new ReadableStream({async pull(b){try{const{done:y,value:x}=await m.next();if(y){g(),b.close();return}let S=x.byteLength;if(u){let N=p+=S;u(N)}b.enqueue(new Uint8Array(x))}catch(y){throw g(y),y}},cancel(b){return g(b),m.return()}},{highWaterMark:2})},Ch=64*1024,{isFunction:fi}=ue,z_=(({Request:r,Response:l})=>({Request:r,Response:l}))(ue.global),{ReadableStream:wh,TextEncoder:kh}=ue.global,Ah=(r,...l)=>{try{return!!r(...l)}catch{return!1}},E_=r=>{r=ue.merge.call({skipUndefined:!0},z_,r);const{fetch:l,Request:u,Response:d}=r,m=l?fi(l):typeof fetch=="function",p=fi(u),h=fi(d);if(!m)return!1;const g=m&&fi(wh),b=m&&(typeof kh=="function"?(k=>L=>k.encode(L))(new kh):async k=>new Uint8Array(await new u(k).arrayBuffer())),y=p&&g&&Ah(()=>{let k=!1;const L=new u(Oa.origin,{body:new wh,method:"POST",get duplex(){return k=!0,"half"}}).headers.has("Content-Type");return k&&!L}),x=h&&g&&Ah(()=>ue.isReadableStream(new d("").body)),S={stream:x&&(k=>k.body)};m&&["text","arrayBuffer","blob","formData","stream"].forEach(k=>{!S[k]&&(S[k]=(L,w)=>{let O=L&&L[k];if(O)return O.call(L);throw new Ze(`Response type '${k}' is not supported`,Ze.ERR_NOT_SUPPORT,w)})});const N=async k=>{if(k==null)return 0;if(ue.isBlob(k))return k.size;if(ue.isSpecCompliantForm(k))return(await new u(Oa.origin,{method:"POST",body:k}).arrayBuffer()).byteLength;if(ue.isArrayBufferView(k)||ue.isArrayBuffer(k))return k.byteLength;if(ue.isURLSearchParams(k)&&(k=k+""),ue.isString(k))return(await b(k)).byteLength},I=async(k,L)=>{const w=ue.toFiniteNumber(k.getContentLength());return w??N(L)};return async k=>{let{url:L,method:w,data:O,signal:P,cancelToken:z,timeout:M,onDownloadProgress:G,onUploadProgress:ee,responseType:K,headers:re,withCredentials:F="same-origin",fetchOptions:T}=fy(k),te=l||fetch;K=K?(K+"").toLowerCase():"text";let de=R_([P,z&&z.toAbortSignal()],M),he=null;const _e=de&&de.unsubscribe&&(()=>{de.unsubscribe()});let ye;try{if(ee&&y&&w!=="get"&&w!=="head"&&(ye=await I(re,O))!==0){let A=new u(L,{method:"POST",body:O,duplex:"half"}),Y;if(ue.isFormData(O)&&(Y=A.headers.get("content-type"))&&re.setContentType(Y),A.body){const[ne,U]=xh(ye,Ci(_h(ee)));O=Sh(A.body,Ch,ne,U)}}ue.isString(F)||(F=F?"include":"omit");const j=p&&"credentials"in u.prototype,D={...T,signal:de,method:w.toUpperCase(),headers:re.normalize().toJSON(),body:O,duplex:"half",credentials:j?F:void 0};he=p&&new u(L,D);let X=await(p?te(he,T):te(L,D));const V=x&&(K==="stream"||K==="response");if(x&&(G||V&&_e)){const A={};["status","statusText","headers"].forEach(ge=>{A[ge]=X[ge]});const Y=ue.toFiniteNumber(X.headers.get("content-length")),[ne,U]=G&&xh(Y,Ci(_h(G),!0))||[];X=new d(Sh(X.body,Ch,ne,()=>{U&&U(),_e&&_e()}),A)}K=K||"text";let me=await S[ue.findKey(S,K)||"text"](X,k);return!V&&_e&&_e(),await new Promise((A,Y)=>{my(A,Y,{data:me,headers:ss.from(X.headers),status:X.status,statusText:X.statusText,config:k,request:he})})}catch(j){throw _e&&_e(),j&&j.name==="TypeError"&&/Load failed|fetch/i.test(j.message)?Object.assign(new Ze("Network Error",Ze.ERR_NETWORK,k,he,j&&j.response),{cause:j.cause||j}):Ze.from(j,j&&j.code,k,he,j&&j.response)}}},D_=new Map,hy=r=>{let l=r&&r.env||{};const{fetch:u,Request:d,Response:m}=l,p=[d,m,u];let h=p.length,g=h,b,y,x=D_;for(;g--;)b=p[g],y=x.get(b),y===void 0&&x.set(b,y=g?new Map:E_(l)),x=y;return y};hy();const _u={http:Kx,xhr:N_,fetch:{get:hy}};ue.forEach(_u,(r,l)=>{if(r){try{Object.defineProperty(r,"name",{value:l})}catch{}Object.defineProperty(r,"adapterName",{value:l})}});const Nh=r=>`- ${r}`,O_=r=>ue.isFunction(r)||r===null||r===!1;function L_(r,l){r=ue.isArray(r)?r:[r];const{length:u}=r;let d,m;const p={};for(let h=0;h<u;h++){d=r[h];let g;if(m=d,!O_(d)&&(m=_u[(g=String(d)).toLowerCase()],m===void 0))throw new Ze(`Unknown adapter '${g}'`);if(m&&(ue.isFunction(m)||(m=m.get(l))))break;p[g||"#"+h]=m}if(!m){const h=Object.entries(p).map(([b,y])=>`adapter ${b} `+(y===!1?"is not supported by the environment":"is not available in the build"));let g=u?h.length>1?`since :
`+h.map(Nh).join(`
`):" "+Nh(h[0]):"as no adapter specified";throw new Ze("There is no suitable adapter to dispatch the request "+g,"ERR_NOT_SUPPORT")}return m}const yy={getAdapter:L_,adapters:_u};function $d(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new so(null,r)}function Rh(r){return $d(r),r.headers=ss.from(r.headers),r.data=Hd.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),yy.getAdapter(r.adapter||ao.adapter,r)(r).then(function(d){return $d(r),d.data=Hd.call(r,r.transformResponse,d),d.headers=ss.from(d.headers),d},function(d){return uy(d)||($d(r),d&&d.response&&(d.response.data=Hd.call(r,r.transformResponse,d.response),d.response.headers=ss.from(d.response.headers))),Promise.reject(d)})}const by="1.13.5",zi={};["object","boolean","number","function","string","symbol"].forEach((r,l)=>{zi[r]=function(d){return typeof d===r||"a"+(l<1?"n ":" ")+r}});const Mh={};zi.transitional=function(l,u,d){function m(p,h){return"[Axios v"+by+"] Transitional option '"+p+"'"+h+(d?". "+d:"")}return(p,h,g)=>{if(l===!1)throw new Ze(m(h," has been removed"+(u?" in "+u:"")),Ze.ERR_DEPRECATED);return u&&!Mh[h]&&(Mh[h]=!0,console.warn(m(h," has been deprecated since v"+u+" and will be removed in the near future"))),l?l(p,h,g):!0}};zi.spelling=function(l){return(u,d)=>(console.warn(`${d} is likely a misspelling of ${l}`),!0)};function I_(r,l,u){if(typeof r!="object")throw new Ze("options must be an object",Ze.ERR_BAD_OPTION_VALUE);const d=Object.keys(r);let m=d.length;for(;m-- >0;){const p=d[m],h=l[p];if(h){const g=r[p],b=g===void 0||h(g,p,r);if(b!==!0)throw new Ze("option "+p+" must be "+b,Ze.ERR_BAD_OPTION_VALUE);continue}if(u!==!0)throw new Ze("Unknown option "+p,Ze.ERR_BAD_OPTION)}}const ji={assertOptions:I_,validators:zi},As=ji.validators;let dr=class{constructor(l){this.defaults=l||{},this.interceptors={request:new vh,response:new vh}}async request(l,u){try{return await this._request(l,u)}catch(d){if(d instanceof Error){let m={};Error.captureStackTrace?Error.captureStackTrace(m):m=new Error;const p=m.stack?m.stack.replace(/^.+\n/,""):"";try{d.stack?p&&!String(d.stack).endsWith(p.replace(/^.+\n.+\n/,""))&&(d.stack+=`
`+p):d.stack=p}catch{}}throw d}}_request(l,u){typeof l=="string"?(u=u||{},u.url=l):u=l||{},u=hr(this.defaults,u);const{transitional:d,paramsSerializer:m,headers:p}=u;d!==void 0&&ji.assertOptions(d,{silentJSONParsing:As.transitional(As.boolean),forcedJSONParsing:As.transitional(As.boolean),clarifyTimeoutError:As.transitional(As.boolean),legacyInterceptorReqResOrdering:As.transitional(As.boolean)},!1),m!=null&&(ue.isFunction(m)?u.paramsSerializer={serialize:m}:ji.assertOptions(m,{encode:As.function,serialize:As.function},!0)),u.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?u.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:u.allowAbsoluteUrls=!0),ji.assertOptions(u,{baseUrl:As.spelling("baseURL"),withXsrfToken:As.spelling("withXSRFToken")},!0),u.method=(u.method||this.defaults.method||"get").toLowerCase();let h=p&&ue.merge(p.common,p[u.method]);p&&ue.forEach(["delete","get","head","post","put","patch","common"],k=>{delete p[k]}),u.headers=ss.concat(h,p);const g=[];let b=!0;this.interceptors.request.forEach(function(L){if(typeof L.runWhen=="function"&&L.runWhen(u)===!1)return;b=b&&L.synchronous;const w=u.transitional||gu;w&&w.legacyInterceptorReqResOrdering?g.unshift(L.fulfilled,L.rejected):g.push(L.fulfilled,L.rejected)});const y=[];this.interceptors.response.forEach(function(L){y.push(L.fulfilled,L.rejected)});let x,S=0,N;if(!b){const k=[Rh.bind(this),void 0];for(k.unshift(...g),k.push(...y),N=k.length,x=Promise.resolve(u);S<N;)x=x.then(k[S++],k[S++]);return x}N=g.length;let I=u;for(;S<N;){const k=g[S++],L=g[S++];try{I=k(I)}catch(w){L.call(this,w);break}}try{x=Rh.call(this,I)}catch(k){return Promise.reject(k)}for(S=0,N=y.length;S<N;)x=x.then(y[S++],y[S++]);return x}getUri(l){l=hr(this.defaults,l);const u=py(l.baseURL,l.url,l.allowAbsoluteUrls);return cy(u,l.params,l.paramsSerializer)}};ue.forEach(["delete","get","head","options"],function(l){dr.prototype[l]=function(u,d){return this.request(hr(d||{},{method:l,url:u,data:(d||{}).data}))}});ue.forEach(["post","put","patch"],function(l){function u(d){return function(p,h,g){return this.request(hr(g||{},{method:l,headers:d?{"Content-Type":"multipart/form-data"}:{},url:p,data:h}))}}dr.prototype[l]=u(),dr.prototype[l+"Form"]=u(!0)});let U_=class vy{constructor(l){if(typeof l!="function")throw new TypeError("executor must be a function.");let u;this.promise=new Promise(function(p){u=p});const d=this;this.promise.then(m=>{if(!d._listeners)return;let p=d._listeners.length;for(;p-- >0;)d._listeners[p](m);d._listeners=null}),this.promise.then=m=>{let p;const h=new Promise(g=>{d.subscribe(g),p=g}).then(m);return h.cancel=function(){d.unsubscribe(p)},h},l(function(p,h,g){d.reason||(d.reason=new so(p,h,g),u(d.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(l){if(this.reason){l(this.reason);return}this._listeners?this._listeners.push(l):this._listeners=[l]}unsubscribe(l){if(!this._listeners)return;const u=this._listeners.indexOf(l);u!==-1&&this._listeners.splice(u,1)}toAbortSignal(){const l=new AbortController,u=d=>{l.abort(d)};return this.subscribe(u),l.signal.unsubscribe=()=>this.unsubscribe(u),l.signal}static source(){let l;return{token:new vy(function(m){l=m}),cancel:l}}};function q_(r){return function(u){return r.apply(null,u)}}function F_(r){return ue.isObject(r)&&r.isAxiosError===!0}const nu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(nu).forEach(([r,l])=>{nu[l]=r});function gy(r){const l=new dr(r),u=Kh(dr.prototype.request,l);return ue.extend(u,dr.prototype,l,{allOwnKeys:!0}),ue.extend(u,l,null,{allOwnKeys:!0}),u.create=function(m){return gy(hr(r,m))},u}const na=gy(ao);na.Axios=dr;na.CanceledError=so;na.CancelToken=U_;na.isCancel=uy;na.VERSION=by;na.toFormData=Ti;na.AxiosError=Ze;na.Cancel=na.CanceledError;na.all=function(l){return Promise.all(l)};na.spread=q_;na.isAxiosError=F_;na.mergeConfig=hr;na.AxiosHeaders=ss;na.formToJSON=r=>dy(ue.isHTMLForm(r)?new FormData(r):r);na.getAdapter=yy.getAdapter;na.HttpStatusCode=nu;na.default=na;const{Axios:Qj,AxiosError:Xj,CanceledError:Zj,isCancel:Jj,CancelToken:Kj,VERSION:Pj,all:e0,Cancel:t0,isAxiosError:a0,spread:s0,toFormData:n0,AxiosHeaders:r0,HttpStatusCode:l0,formToJSON:o0,getAdapter:i0,mergeConfig:c0}=na,H_="/api/",$=na.create({baseURL:H_,headers:{"Content-Type":"application/json"}}),xy=async(r,l)=>await $.post(r,l,{headers:{"Content-Type":"multipart/form-data"}});$.interceptors.request.use(r=>{const l=localStorage.getItem("access_token");return l&&(r.headers.Authorization=`Bearer ${l}`),r},r=>Promise.reject(r));$.interceptors.response.use(r=>r,async r=>{var l;return((l=r.response)==null?void 0:l.status)===401&&(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(r)});const sa={login:async(r,l)=>{const u=await $.post("auth/login/",{username:r,password:l}),{access:d,refresh:m,user:p}=u.data;return localStorage.setItem("access_token",d),localStorage.setItem("refresh_token",m),localStorage.setItem("user",JSON.stringify(p)),p},logout:()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user")},getUser:()=>{const r=localStorage.getItem("user");return r?JSON.parse(r):null},isAuthenticated:()=>!!localStorage.getItem("access_token"),isSuperuser:()=>{const r=sa.getUser();return(r==null?void 0:r.is_superuser)||!1}},Yd={getAll:async()=>(await $.get("company-asset-requests/")).data,create:async r=>(typeof FormData<"u"&&r instanceof FormData?await xy("company-asset-requests/",r):await $.post("company-asset-requests/",r)).data,getById:async r=>(await $.get(`company-asset-requests/${r}/`)).data},$_={getAll:async()=>(await $.get("external-maintenance-providers/")).data},Y_={getAll:async()=>(await $.get("external-maintenance-typical-steps/")).data},Wn={getAll:async r=>(await $.get("external-maintenances/",{params:r})).data,getById:async r=>(await $.get(`external-maintenances/${r}/`)).data,createForMaintenance:async r=>(await $.post("external-maintenances/create-for-maintenance/",{maintenance_id:r})).data,sendToProvider:async(r,l,u)=>(await $.post(`external-maintenances/${r}/send-to-provider/`,{external_maintenance_provider_id:l,destination_room_id:u})).data,createStep:async(r,l)=>(await $.post(`external-maintenances/${r}/create-step/`,{external_maintenance_typical_step_id:l})).data,confirmReceivedByProvider:async r=>(await $.post(`external-maintenances/${r}/confirm-received-by-provider/`)).data,confirmSentToCompany:async r=>(await $.post(`external-maintenances/${r}/confirm-sent-to-company/`)).data,confirmReceivedByCompany:async(r,l)=>(await $.post(`external-maintenances/${r}/confirm-received-by-company/`,{destination_room_id:l})).data},W_={getAll:async r=>(await $.get("external-maintenance-steps/",{params:r})).data,getById:async r=>(await $.get(`external-maintenance-steps/${r}/`)).data},_n={getAll:async r=>(await $.get("persons/",{params:r})).data,getById:async r=>(await $.get(`persons/${r}/`)).data,create:async r=>(await $.post("persons/",r)).data,update:async(r,l)=>(await $.put(`persons/${r}/`,l)).data,delete:async r=>{await $.delete(`persons/${r}/`)}},G_={create:async r=>(await $.post("user-accounts/",r)).data},V_={get:async()=>(await $.get("my-items/")).data},wi={getAll:async()=>(await $.get("problem-reports/")).data,create:async r=>(await $.post("problem-reports/",r)).data,createMaintenance:async r=>(await $.post("problem-reports/create-maintenance/",r)).data},Zs={getAll:async()=>(await $.get("asset-types/")).data,getById:async r=>(await $.get(`asset-types/${r}/`)).data,create:async r=>(await $.post("asset-types/",r)).data,update:async(r,l)=>(await $.put(`asset-types/${r}/`,l)).data,delete:async r=>{await $.delete(`asset-types/${r}/`)}},ru={getAll:async()=>(await $.get("asset-brands/")).data,getById:async r=>(await $.get(`asset-brands/${r}/`)).data,create:async r=>(await $.post("asset-brands/",r)).data,update:async(r,l)=>(await $.put(`asset-brands/${r}/`,l)).data,delete:async r=>{await $.delete(`asset-brands/${r}/`)}},ft={getAll:async()=>(await $.get("asset-models/")).data,getByAssetType:async r=>(await $.get(`asset-models/?asset_type=${r}`)).data,getById:async r=>(await $.get(`asset-models/${r}/`)).data,create:async r=>(await $.post("asset-models/",r)).data,update:async(r,l)=>(await $.put(`asset-models/${r}/`,l)).data,delete:async r=>{await $.delete(`asset-models/${r}/`)},getCompatibleStockItemModels:async r=>(await $.get(`asset-models/${r}/compatible-stock-item-models/`)).data,addCompatibleStockItemModel:async(r,l)=>(await $.post(`asset-models/${r}/compatible-stock-item-models/`,{stock_item_model_id:l})).data,removeCompatibleStockItemModel:async(r,l)=>(await $.delete(`asset-models/${r}/compatible-stock-item-models/${l}/`)).data,getCompatibleConsumableModels:async r=>(await $.get(`asset-models/${r}/compatible-consumable-models/`)).data,addCompatibleConsumableModel:async(r,l)=>(await $.post(`asset-models/${r}/compatible-consumable-models/`,{consumable_model_id:l})).data,removeCompatibleConsumableModel:async(r,l)=>(await $.delete(`asset-models/${r}/compatible-consumable-models/${l}/`)).data,getDefaultStockItems:async r=>(await $.get(`asset-model-default-stock-items/?asset_model=${r}`)).data,addDefaultStockItem:async(r,l,u=1,d="")=>(await $.post("asset-model-default-stock-items/",{asset_model:r,stock_item_model:l,quantity:u,notes:d})).data,removeDefaultStockItem:async r=>{await $.delete(`asset-model-default-stock-items/${r}/`)},getDefaultConsumables:async r=>(await $.get(`asset-model-default-consumables/?asset_model=${r}`)).data,addDefaultConsumable:async(r,l,u=1,d="")=>(await $.post("asset-model-default-consumables/",{asset_model:r,consumable_model:l,quantity:u,notes:d})).data,removeDefaultConsumable:async r=>{await $.delete(`asset-model-default-consumables/${r}/`)}},ur={getAll:async()=>(await $.get("asset-attribute-definitions/")).data,create:async r=>(await $.post("asset-attribute-definitions/",r)).data,update:async(r,l)=>(await $.put(`asset-attribute-definitions/${r}/`,l)).data,delete:async r=>{await $.delete(`asset-attribute-definitions/${r}/`)}},vn={getByAssetType:async r=>(await $.get(`asset-type-attributes/?asset_type=${r}`)).data,create:async r=>(await $.post("asset-type-attributes/",r)).data,update:async(r,l,u)=>(await $.put(`asset-type-attributes/${r}/`,{asset_type:r,asset_attribute_definition:l,...u})).data,delete:async(r,l)=>{await $.delete(`asset-type-attributes/${l}/`,{params:{asset_type:r,asset_attribute_definition:l}})}},Kr={getByAssetModel:async r=>(await $.get(`asset-model-attributes/?asset_model=${r}`)).data,create:async r=>(await $.post("asset-model-attributes/",r)).data,update:async(r,l,u)=>(await $.put(`asset-model-attributes/${r}/`,{asset_model:r,asset_attribute_definition:l,...u})).data,delete:async(r,l)=>{await $.delete(`asset-model-attributes/${l}/`,{params:{asset_model:r,asset_attribute_definition:l}})}},Wd={getByAsset:async r=>(await $.get(`asset-attributes/?asset=${r}`)).data,create:async r=>(await $.post("asset-attributes/",r)).data,update:async(r,l,u)=>(await $.put(`asset-attributes/${l}/`,{asset:r,asset_attribute_definition:l,...u})).data,delete:async(r,l)=>{await $.delete(`asset-attributes/${l}/`,{params:{asset:r,asset_attribute_definition:l}})}},mr={getAll:async()=>(await $.get("stock-item-attribute-definitions/")).data,create:async r=>(await $.post("stock-item-attribute-definitions/",r)).data,update:async(r,l)=>(await $.put(`stock-item-attribute-definitions/${r}/`,l)).data,delete:async r=>{await $.delete(`stock-item-attribute-definitions/${r}/`)}},pr={getByStockItemType:async r=>(await $.get(`stock-item-type-attributes/?stock_item_type=${r}`)).data,create:async r=>(await $.post("stock-item-type-attributes/",r)).data,delete:async(r,l)=>{await $.delete(`stock-item-type-attributes/${l}/`,{params:{stock_item_type:r,stock_item_attribute_definition:l}})}},Gd={getByStockItemModel:async r=>(await $.get(`stock-item-model-attributes/?stock_item_model=${r}`)).data,create:async r=>(await $.post("stock-item-model-attributes/",r)).data,delete:async(r,l)=>{await $.delete(`stock-item-model-attributes/${l}/`,{params:{stock_item_model:r,stock_item_attribute_definition:l}})}},Vd={getByStockItem:async r=>(await $.get(`stock-item-attributes/?stock_item=${r}`)).data,create:async r=>(await $.post("stock-item-attributes/",r)).data,delete:async(r,l)=>{await $.delete(`stock-item-attributes/${l}/`,{params:{stock_item:r,stock_item_attribute_definition:l}})}},fr={getAll:async()=>(await $.get("consumable-attribute-definitions/")).data,create:async r=>(await $.post("consumable-attribute-definitions/",r)).data,update:async(r,l)=>(await $.put(`consumable-attribute-definitions/${r}/`,l)).data,delete:async r=>{await $.delete(`consumable-attribute-definitions/${r}/`)}},gn={getByConsumableType:async r=>(await $.get(`consumable-type-attributes/?consumable_type=${r}`)).data,create:async r=>(await $.post("consumable-type-attributes/",r)).data,delete:async(r,l)=>{await $.delete(`consumable-type-attributes/${l}/`,{params:{consumable_type:r,consumable_attribute_definition:l}})}},Pr={getByConsumableModel:async r=>(await $.get(`consumable-model-attributes/?consumable_model=${r}`)).data,create:async r=>(await $.post("consumable-model-attributes/",r)).data,delete:async(r,l)=>{await $.delete(`consumable-model-attributes/${l}/`,{params:{consumable_model:r,consumable_attribute_definition:l}})}},Qd={getByConsumable:async r=>(await $.get(`consumable-attributes/?consumable=${r}`)).data,create:async r=>(await $.post("consumable-attributes/",r)).data,delete:async(r,l)=>{await $.delete(`consumable-attributes/${l}/`,{params:{consumable:r,consumable_attribute_definition:l}})}},Js={getAll:async()=>(await $.get("stock-item-types/")).data,getById:async r=>(await $.get(`stock-item-types/${r}/`)).data,create:async r=>(await $.post("stock-item-types/",r)).data,update:async(r,l)=>(await $.put(`stock-item-types/${r}/`,l)).data,delete:async r=>{await $.delete(`stock-item-types/${r}/`)}},lu={getAll:async()=>(await $.get("stock-item-brands/")).data,getById:async r=>(await $.get(`stock-item-brands/${r}/`)).data,create:async r=>(await $.post("stock-item-brands/",r)).data,update:async(r,l)=>(await $.put(`stock-item-brands/${r}/`,l)).data,delete:async r=>{await $.delete(`stock-item-brands/${r}/`)}},es={getAll:async()=>(await $.get("stock-item-models/")).data,getByStockItemType:async r=>(await $.get(`stock-item-models/?stock_item_type=${r}`)).data,getById:async r=>(await $.get(`stock-item-models/${r}/`)).data,create:async r=>(await $.post("stock-item-models/",r)).data,update:async(r,l)=>(await $.put(`stock-item-models/${r}/`,l)).data,delete:async r=>{await $.delete(`stock-item-models/${r}/`)},getCompatibleAssetModels:async r=>(await $.get(`stock-item-models/${r}/compatible-asset-models/`)).data,addCompatibleAssetModel:async(r,l)=>(await $.post(`stock-item-models/${r}/compatible-asset-models/`,{asset_model_id:l})).data,removeCompatibleAssetModel:async(r,l)=>(await $.delete(`stock-item-models/${r}/compatible-asset-models/${l}/`)).data},Ks={getAll:async()=>(await $.get("consumable-types/")).data,getById:async r=>(await $.get(`consumable-types/${r}/`)).data,create:async r=>(await $.post("consumable-types/",r)).data,update:async(r,l)=>(await $.put(`consumable-types/${r}/`,l)).data,delete:async r=>{await $.delete(`consumable-types/${r}/`)}},ou={getAll:async()=>(await $.get("consumable-brands/")).data,getById:async r=>(await $.get(`consumable-brands/${r}/`)).data,create:async r=>(await $.post("consumable-brands/",r)).data,update:async(r,l)=>(await $.put(`consumable-brands/${r}/`,l)).data,delete:async r=>{await $.delete(`consumable-brands/${r}/`)}},ts={getAll:async()=>(await $.get("consumable-models/")).data,getByConsumableType:async r=>(await $.get(`consumable-models/?consumable_type=${r}`)).data,getById:async r=>(await $.get(`consumable-models/${r}/`)).data,create:async r=>(await $.post("consumable-models/",r)).data,update:async(r,l)=>(await $.put(`consumable-models/${r}/`,l)).data,delete:async r=>{await $.delete(`consumable-models/${r}/`)},getCompatibleAssetModels:async r=>(await $.get(`consumable-models/${r}/compatible-asset-models/`)).data,addCompatibleAssetModel:async(r,l)=>(await $.post(`consumable-models/${r}/compatible-asset-models/`,{asset_model_id:l})).data,removeCompatibleAssetModel:async(r,l)=>(await $.delete(`consumable-models/${r}/compatible-asset-models/${l}/`)).data},Q_={getAll:async()=>(await $.get("room-types/")).data,getById:async r=>(await $.get(`room-types/${r}/`)).data,create:async r=>(await $.post("room-types/",r)).data,update:async(r,l)=>(await $.put(`room-types/${r}/`,l)).data,delete:async r=>{await $.delete(`room-types/${r}/`)}},qs={getAll:async()=>(await $.get("rooms/")).data,getByRoomType:async r=>(await $.get(`rooms/?room_type=${r}`)).data,getById:async r=>(await $.get(`rooms/${r}/`)).data,create:async r=>(await $.post("rooms/",r)).data,update:async(r,l)=>(await $.put(`rooms/${r}/`,l)).data,delete:async r=>{await $.delete(`rooms/${r}/`)}},hi={getAll:async()=>(await $.get("positions/")).data,getById:async r=>(await $.get(`positions/${r}/`)).data,create:async r=>(await $.post("positions/",r)).data,update:async(r,l)=>(await $.put(`positions/${r}/`,l)).data,delete:async r=>{await $.delete(`positions/${r}/`)}},yi={getAll:async()=>(await $.get("organizational-structures/")).data,getById:async r=>(await $.get(`organizational-structures/${r}/`)).data,create:async r=>(await $.post("organizational-structures/",r)).data,update:async(r,l)=>(await $.put(`organizational-structures/${r}/`,l)).data,delete:async r=>{await $.delete(`organizational-structures/${r}/`)}},ir={getAll:async()=>(await $.get("organizational-structure-relations/")).data,getByStructureId:async r=>(await $.get(`organizational-structure-relations/?org_structure_id=${r}`)).data,create:async r=>(await $.post("organizational-structure-relations/",r)).data,update:async(r,l,u)=>(await $.put(`organizational-structure-relations/${r}/${l}/`,u)).data,delete:async(r,l)=>{await $.delete(`organizational-structure-relations/${r}/${l}/`)}},Ns={getAll:async r=>(await $.get("assets/",{params:r})).data,getById:async r=>(await $.get(`assets/${r}/`)).data,create:async r=>(await $.post("assets/",r)).data,update:async(r,l)=>(await $.put(`assets/${r}/`,l)).data,delete:async r=>{await $.delete(`assets/${r}/`)},getCurrentRoom:async r=>(await $.get(`assets/${r}/current-room/`)).data,move:async(r,l)=>(await $.post(`assets/${r}/move/`,l)).data},Vr={getAll:async r=>(await $.get("stock-items/",{params:r})).data,getById:async r=>(await $.get(`stock-items/${r}/`)).data,create:async r=>(await $.post("stock-items/",r)).data,update:async(r,l)=>(await $.put(`stock-items/${r}/`,l)).data,delete:async r=>{await $.delete(`stock-items/${r}/`)},getCurrentRoom:async r=>(await $.get(`stock-items/${r}/current-room/`)).data,move:async(r,l)=>(await $.post(`stock-items/${r}/move/`,l)).data},Qr={getAll:async r=>(await $.get("consumables/",{params:r})).data,getById:async r=>(await $.get(`consumables/${r}/`)).data,create:async r=>(await $.post("consumables/",r)).data,update:async(r,l)=>(await $.put(`consumables/${r}/`,l)).data,delete:async r=>{await $.delete(`consumables/${r}/`)},getCurrentRoom:async r=>(await $.get(`consumables/${r}/current-room/`)).data,move:async(r,l)=>(await $.post(`consumables/${r}/move/`,l)).data},Zr={getAll:async()=>(await $.get("maintenances/")).data,getById:async r=>(await $.get(`maintenances/${r}/`)).data,create:async r=>(await $.post("maintenances/",r)).data,createDirect:async r=>(await $.post("maintenances/create-direct/",r)).data,end:async(r,l)=>(await $.post(`maintenances/${r}/end/`,l||{})).data,update:async(r,l)=>(await $.put(`maintenances/${r}/`,l)).data,delete:async r=>{await $.delete(`maintenances/${r}/`)}},yn={getAll:async r=>(await $.get("maintenance-steps/",{params:r})).data,getById:async r=>(await $.get(`maintenance-steps/${r}/`)).data,create:async r=>(await $.post("maintenance-steps/",r)).data,update:async(r,l)=>(await $.put(`maintenance-steps/${r}/`,l)).data,patch:async(r,l)=>(await $.patch(`maintenance-steps/${r}/`,l)).data,requestStockItem:async(r,l)=>(await $.post(`maintenance-steps/${r}/request-stock-item/`,l)).data,requestConsumable:async(r,l)=>(await $.post(`maintenance-steps/${r}/request-consumable/`,l)).data,getComponents:async r=>(await $.get(`maintenance-steps/${r}/components/`)).data,removeComponent:async(r,l)=>(await $.post(`maintenance-steps/${r}/remove-component/`,l)).data,updateAssetCondition:async(r,l)=>(await $.post(`maintenance-steps/${r}/update-asset-condition/`,l)).data,delete:async r=>{await $.delete(`maintenance-steps/${r}/`)}},X_={getAll:async()=>(await $.get("physical-conditions/")).data},Z_={getAll:async()=>(await $.get("asset-maintenance-timeline/")).data,getByAssetId:async r=>(await $.get(`asset-maintenance-timeline/${r}/`)).data},Xr={getAll:async r=>(await $.get("maintenance-step-item-requests/",{params:r})).data,fulfill:async(r,l)=>(await $.post(`maintenance-step-item-requests/${r}/fulfill/`,l)).data,reject:async(r,l)=>(await $.post(`maintenance-step-item-requests/${r}/reject/`,l)).data,selectRandom:async r=>(await $.get(`maintenance-step-item-requests/${r}/select-random/`)).data,eligibleItems:async r=>(await $.get(`maintenance-step-item-requests/${r}/eligible-items/`)).data},J_={getAll:async()=>(await $.get("maintenance-typical-steps/")).data},bi={getAll:async r=>(await $.get("asset-assignments/",{params:r})).data,create:async r=>(await $.post("asset-assignments/",r)).data,confirm:async r=>(await $.post(`asset-assignments/${r}/confirm/`)).data,discharge:async r=>(await $.post(`asset-assignments/${r}/discharge/`)).data},Xd={getAll:async r=>(await $.get("stock-item-assignments/",{params:r})).data,create:async r=>(await $.post("stock-item-assignments/",r)).data,discharge:async r=>(await $.post(`stock-item-assignments/${r}/discharge/`)).data},Zd={getAll:async r=>(await $.get("consumable-assignments/",{params:r})).data,create:async r=>(await $.post("consumable-assignments/",r)).data,discharge:async r=>(await $.post(`consumable-assignments/${r}/discharge/`)).data},_y={getAll:async()=>(await $.get("warehouses/")).data,create:async r=>(await $.post("warehouses/",r)).data},Jr={getAll:async()=>(await $.get("attribution-orders/")).data,getById:async r=>(await $.get(`attribution-orders/${r}/`)).data,create:async r=>(await $.post("attribution-orders/",r)).data,getIncludedItems:async r=>(await $.get(`attribution-orders/${r}/included-items/`)).data},iu={getById:async r=>(await $.get(`receipt-reports/${r}/`)).data,create:async r=>(await $.post("receipt-reports/",r,{headers:{"Content-Type":"multipart/form-data"}})).data},ki={getAll:async r=>(await $.get("administrative-certificates/",{params:r})).data,create:async r=>(typeof FormData<"u"&&r instanceof FormData?await xy("administrative-certificates/",r):await $.post("administrative-certificates/",r)).data},jy=c.createContext(null),K_=({children:r})=>{const[l,u]=c.useState(null),[d,m]=c.useState(!0);c.useEffect(()=>{const b=sa.getUser();b&&sa.isAuthenticated()&&u(b),m(!1)},[]);const g={user:l,login:async(b,y)=>{const x=await sa.login(b,y);return u(x),x},logout:()=>{sa.logout(),u(null)},loading:d,isAuthenticated:!!l,isSuperuser:(l==null?void 0:l.is_superuser)||!1};return t.jsx(jy.Provider,{value:g,children:!d&&r})},fs=()=>{const r=c.useContext(jy);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},P_=()=>{const[r,l]=c.useState(""),[u,d]=c.useState(""),[m,p]=c.useState(""),[h,g]=c.useState(!1),{login:b}=fs(),y=Dt(),x=async S=>{var N,I;S.preventDefault(),p(""),g(!0);try{await b(r,u),y("/dashboard")}catch(k){p(((I=(N=k.response)==null?void 0:N.data)==null?void 0:I.error)||"Login failed. Please try again.")}finally{g(!1)}};return t.jsx("div",{className:"login-page",children:t.jsx("div",{className:"login-container",children:t.jsxs("div",{className:"login-card",children:[t.jsxs("div",{className:"login-header",children:[t.jsx("div",{className:"login-logo",children:t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})}),t.jsx("h1",{className:"login-title",children:"Equipment Management"}),t.jsx("p",{className:"login-subtitle",children:"Sign in to your account"})]}),t.jsxs("form",{onSubmit:x,children:[m&&t.jsx("div",{className:"error-message",children:m}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"username",className:"form-label",children:"Username"}),t.jsx("input",{type:"text",id:"username",className:"form-input",placeholder:"Enter your username",value:r,onChange:S=>l(S.target.value),required:!0,autoFocus:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),t.jsx("input",{type:"password",id:"password",className:"form-input",placeholder:"Enter your password",value:u,onChange:S=>d(S.target.value),required:!0})]}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:h,children:h?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"loading-spinner"}),"Signing in..."]}):"Sign In"})]})]})})})},ej=()=>{var k,L,w,O,P;const{user:r,logout:l,isSuperuser:u}=fs(),d=Dt(),m=()=>{l(),d("/login")},p=()=>{var z,M;return r!=null&&r.person?`${r.person.first_name[0]}${r.person.last_name[0]}`.toUpperCase():((M=(z=r==null?void 0:r.username)==null?void 0:z[0])==null?void 0:M.toUpperCase())||"U"},h=()=>r!=null&&r.person?`${r.person.first_name} ${r.person.last_name}`:(r==null?void 0:r.username)||"User",g=()=>u?"Superuser":r!=null&&r.roles&&r.roles.length>0?r.roles[0].role_label:"User",b=(k=r==null?void 0:r.roles)==null?void 0:k.some(z=>z.role_code==="maintenance_chief"),y=(L=r==null?void 0:r.roles)==null?void 0:L.some(z=>z.role_code==="maintenance_technician"),x=(w=r==null?void 0:r.roles)==null?void 0:w.some(z=>z.role_code==="exploitation_chief"),S=(O=r==null?void 0:r.roles)==null?void 0:O.some(z=>z.role_code==="stock_consumable_responsible"),N=(P=r==null?void 0:r.roles)==null?void 0:P.some(z=>z.role_code==="asset_responsible"),I=u||b||x;return t.jsxs("div",{className:"dashboard-layout",children:[t.jsxs("aside",{className:"sidebar",children:[t.jsx("div",{className:"sidebar-header",children:t.jsxs("div",{className:"sidebar-logo",children:[t.jsx("div",{className:"sidebar-logo-icon",children:t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})}),t.jsx("span",{className:"sidebar-logo-text",children:"EMS"})]})}),t.jsxs("nav",{className:"sidebar-nav",children:[t.jsxs("div",{className:"nav-section",children:[t.jsx("span",{className:"nav-section-title",children:"Dashboard"}),t.jsxs(pa,{to:"/dashboard",end:!0,className:({isActive:z})=>`nav-link ${z?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),t.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),t.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),t.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),"Dashboard"]})]}),u&&t.jsx(t.Fragment,{children:t.jsxs("div",{className:"nav-section",children:[t.jsx("span",{className:"nav-section-title",children:"Management"}),t.jsxs(pa,{to:"/dashboard/organizational-structure",className:({isActive:z})=>`nav-link ${z?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),t.jsx("circle",{cx:"12",cy:"7",r:"4"}),t.jsx("path",{d:"M3.27 6.96a3 3 0 0 1 5.46 0"}),t.jsx("path",{d:"M15.27 6.96a3 3 0 0 1 5.46 0"})]}),"Organizational Structure"]}),t.jsxs(pa,{to:"/dashboard/persons",className:({isActive:z})=>`nav-link ${z?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),t.jsx("circle",{cx:"9",cy:"7",r:"4"}),t.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),t.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),"Persons"]}),t.jsxs(pa,{to:"/dashboard/assets",className:({isActive:z})=>`nav-link ${z?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),t.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),"Assets"]}),t.jsxs(pa,{to:"/dashboard/stock-items",className:({isActive:z})=>`nav-link ${z?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("circle",{cx:"9",cy:"21",r:"1"}),t.jsx("circle",{cx:"20",cy:"21",r:"1"}),t.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),"Stock Items"]}),t.jsxs(pa,{to:"/dashboard/consumables",className:({isActive:z})=>`nav-link ${z?"active":""}`,children:[t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})}),"Consumables"]}),t.jsxs(pa,{to:"/dashboard/rooms",className:({isActive:z})=>`nav-link ${z?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),t.jsx("path",{d:"M9 3v18M9 9h12M9 15h12"})]}),"Rooms"]}),t.jsxs(pa,{to:"/dashboard/positions",className:({isActive:z})=>`nav-link ${z?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),t.jsx("circle",{cx:"9",cy:"7",r:"4"}),t.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),t.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),"Positions"]})]})}),t.jsxs("div",{className:"nav-section",children:[t.jsx("span",{className:"nav-section-title",children:"My"}),t.jsxs(pa,{to:"/dashboard/my-items",className:({isActive:z})=>`nav-link ${z?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),t.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"My Items"]})]}),I&&t.jsxs("div",{className:"nav-section",children:[t.jsx("span",{className:"nav-section-title",children:"Reports"}),t.jsxs(pa,{to:"/dashboard/reports",className:({isActive:z})=>`nav-link ${z?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M3 3h18v18H3z"}),t.jsx("path",{d:"M7 7h10"}),t.jsx("path",{d:"M7 12h10"}),t.jsx("path",{d:"M7 17h6"})]}),"Reports"]})]}),(x||S||N)&&t.jsxs("div",{className:"nav-section",children:[t.jsx("span",{className:"nav-section-title",children:"Inventory"}),(x||N)&&t.jsxs(pa,{to:"/dashboard/assets",className:({isActive:z})=>`nav-link ${z?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),t.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),"Assets"]}),N&&t.jsxs(pa,{to:"/dashboard/attribution-orders",className:({isActive:z})=>`nav-link ${z?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),t.jsx("polyline",{points:"14 2 14 8 20 8"}),t.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),t.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),t.jsx("polyline",{points:"10 9 9 9 8 9"})]}),"Attribution Orders"]}),N&&t.jsxs(pa,{to:"/dashboard/company-asset-requests",className:({isActive:z})=>`nav-link ${z?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M9 12h6"}),t.jsx("path",{d:"M9 16h6"}),t.jsx("path",{d:"M9 8h6"}),t.jsx("path",{d:"M7 22h10a2 2 0 0 0 2-2V6l-4-4H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2z"}),t.jsx("path",{d:"M15 2v4h4"})]}),"Company Asset Requests"]}),N&&t.jsxs(pa,{to:"/dashboard/administrative-certificates",className:({isActive:z})=>`nav-link ${z?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),t.jsx("polyline",{points:"14 2 14 8 20 8"}),t.jsx("path",{d:"M8 13h8"}),t.jsx("path",{d:"M8 17h8"})]}),"Administrative Certificates"]}),N&&t.jsxs(pa,{to:"/dashboard/external-maintenances",className:({isActive:z})=>`nav-link ${z?"active":""}`,children:[t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),"External Maintenances"]}),(x||S)&&t.jsxs(t.Fragment,{children:[S&&t.jsxs(pa,{to:"/dashboard/item-requests-inbox",className:({isActive:z})=>`nav-link ${z?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M9 12h6"}),t.jsx("path",{d:"M9 16h6"}),t.jsx("path",{d:"M9 8h6"}),t.jsx("path",{d:"M7 22h10a2 2 0 0 0 2-2V6l-4-4H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2z"}),t.jsx("path",{d:"M15 2v4h4"})]}),"Item Requests Inbox"]}),t.jsxs(pa,{to:"/dashboard/stock-items",className:({isActive:z})=>`nav-link ${z?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("circle",{cx:"9",cy:"21",r:"1"}),t.jsx("circle",{cx:"20",cy:"21",r:"1"}),t.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),"Stock Items"]}),t.jsxs(pa,{to:"/dashboard/consumables",className:({isActive:z})=>`nav-link ${z?"active":""}`,children:[t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})}),"Consumables"]})]})]}),(u||b||y)&&t.jsxs("div",{className:"nav-section",children:[t.jsx("span",{className:"nav-section-title",children:"Maintenance"}),t.jsxs(pa,{to:"/dashboard/maintenances",className:({isActive:z})=>`nav-link ${z?"active":""}`,children:[t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),"Maintenance"]})]})]}),t.jsx("div",{className:"sidebar-footer",children:t.jsxs("div",{className:"user-info",children:[t.jsx("div",{className:"user-avatar",children:p()}),t.jsxs("div",{className:"user-details",children:[t.jsx("div",{className:"user-name",children:h()}),t.jsx("div",{className:"user-role",children:g()})]}),t.jsx("button",{className:"logout-btn",onClick:m,title:"Logout",children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),t.jsx("polyline",{points:"16,17 21,12 16,7"}),t.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})})]}),t.jsx("main",{className:"main-content",children:t.jsx(Bg,{})})]})},tj=()=>t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",children:[t.jsx("h1",{className:"page-title",children:"Dashboard"}),t.jsx("p",{className:"page-subtitle",children:"Welcome to the Equipment Management System"})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"var(--space-6)"},children:[t.jsx("div",{className:"card",children:t.jsxs("div",{className:"card-body",style:{textAlign:"center"},children:[t.jsx("div",{style:{width:"48px",height:"48px",background:"var(--gradient-primary)",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto var(--space-4)"},children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"white",strokeWidth:"2",children:[t.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),t.jsx("circle",{cx:"9",cy:"7",r:"4"})]})}),t.jsx("h3",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",marginBottom:"var(--space-1)"},children:"Persons"}),t.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-sm)"},children:"Manage registered personnel"})]})}),t.jsx("div",{className:"card",children:t.jsxs("div",{className:"card-body",style:{textAlign:"center"},children:[t.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto var(--space-4)"},children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"white",strokeWidth:"2",children:[t.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),t.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]})}),t.jsx("h3",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",marginBottom:"var(--space-1)"},children:"Assets"}),t.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-sm)"},children:"Track equipment & assets"})]})}),t.jsx("div",{className:"card",children:t.jsxs("div",{className:"card-body",style:{textAlign:"center"},children:[t.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto var(--space-4)"},children:t.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"white",strokeWidth:"2",children:t.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})})}),t.jsx("h3",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",marginBottom:"var(--space-1)"},children:"Maintenance"}),t.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-sm)"},children:"Schedule & track repairs"})]})})]})]}),aj=()=>{const[r,l]=c.useState([]),[u,d]=c.useState(!0),[m,p]=c.useState(""),[h,g]=c.useState(!1),[b,y]=c.useState(!1),[x,S]=c.useState(null),[N,I]=c.useState({first_name:"",last_name:"",sex:"Male",birth_date:"",is_approved:!1}),[k,L]=c.useState({username:"",password:"",account_status:"active",role_code:""}),[w,O]=c.useState(!1),[P,z]=c.useState(!1);c.useEffect(()=>{M()},[]);const M=async()=>{try{d(!0);const te=await _n.getAll();l(te)}catch{p("Failed to load persons")}finally{d(!1)}},G=te=>{const{name:de,value:he,type:_e,checked:ye}=te.target;I(j=>({...j,[de]:_e==="checkbox"?ye:he}))},ee=te=>{const{name:de,value:he}=te.target;L(_e=>({..._e,[de]:he}))},K=async te=>{te.preventDefault(),O(!0),p("");try{await _n.create(N),g(!1),I({first_name:"",last_name:"",sex:"Male",birth_date:"",is_approved:!1}),M()}catch{p("Failed to create person")}finally{O(!1)}},re=te=>{S(te),L({username:"",password:"",account_status:"active",role_code:""}),y(!0),p("")},F=async te=>{if(te.preventDefault(),!!x){z(!0),p("");try{await G_.create({person_id:x.person_id,username:k.username,password:k.password,account_status:k.account_status,role_code:k.role_code||void 0}),y(!1),S(null)}catch{p("Failed to create account")}finally{z(!1)}}},T=te=>new Date(te).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",children:[t.jsx("h1",{className:"page-title",children:"Persons"}),t.jsx("p",{className:"page-subtitle",children:"Manage all registered persons in the system"})]}),t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"card-header",children:[t.jsx("h2",{className:"card-title",children:"All Persons"}),t.jsxs("button",{className:"btn btn-primary",onClick:()=>g(!0),children:[t.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Person"]})]}),t.jsx("div",{className:"table-container",children:u?t.jsxs("div",{className:"empty-state",children:[t.jsx("div",{className:"loading-spinner",style:{margin:"0 auto"}}),t.jsx("p",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading persons..."})]}):m?t.jsx("div",{className:"empty-state",children:t.jsx("p",{className:"empty-state-title",style:{color:"var(--color-error)"},children:m})}):r.length===0?t.jsxs("div",{className:"empty-state",children:[t.jsxs("svg",{className:"empty-state-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[t.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),t.jsx("circle",{cx:"9",cy:"7",r:"4"}),t.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),t.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),t.jsx("h3",{className:"empty-state-title",children:"No persons yet"}),t.jsx("p",{className:"empty-state-text",children:"Get started by adding your first person"})]}):t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"ID"}),t.jsx("th",{children:"Name"}),t.jsx("th",{children:"Sex"}),t.jsx("th",{children:"Birth Date"}),t.jsx("th",{children:"Status"}),sa.isSuperuser()&&t.jsx("th",{children:"Actions"})]})}),t.jsx("tbody",{children:r.map(te=>t.jsxs("tr",{children:[t.jsx("td",{children:te.person_id}),t.jsx("td",{children:t.jsxs("strong",{children:[te.first_name," ",te.last_name]})}),t.jsx("td",{children:te.sex}),t.jsx("td",{children:T(te.birth_date)}),t.jsx("td",{children:t.jsx("span",{className:`badge ${te.is_approved?"badge-success":"badge-warning"}`,children:te.is_approved?"Approved":"Pending"})}),sa.isSuperuser()&&t.jsx("td",{children:t.jsx("button",{className:"btn btn-secondary",onClick:()=>re(te),children:"Create Account"})})]},te.person_id))})]})})]}),h&&t.jsx("div",{className:"modal-overlay",onClick:()=>g(!1),children:t.jsxs("div",{className:"modal",onClick:te=>te.stopPropagation(),children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Add New Person"}),t.jsx("button",{className:"modal-close",onClick:()=>g(!1),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsxs("form",{onSubmit:K,children:[t.jsxs("div",{className:"modal-body",children:[t.jsxs("div",{className:"form-row",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"first_name",className:"form-label",children:"First Name"}),t.jsx("input",{type:"text",id:"first_name",name:"first_name",className:"form-input",value:N.first_name,onChange:G,required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"last_name",className:"form-label",children:"Last Name"}),t.jsx("input",{type:"text",id:"last_name",name:"last_name",className:"form-input",value:N.last_name,onChange:G,required:!0})]})]}),t.jsxs("div",{className:"form-row",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"sex",className:"form-label",children:"Sex"}),t.jsxs("select",{id:"sex",name:"sex",className:"form-input",value:N.sex,onChange:G,required:!0,children:[t.jsx("option",{value:"Male",children:"Male"}),t.jsx("option",{value:"Female",children:"Female"})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"birth_date",className:"form-label",children:"Birth Date"}),t.jsx("input",{type:"date",id:"birth_date",name:"birth_date",className:"form-input",value:N.birth_date,onChange:G,required:!0})]})]}),t.jsx("div",{className:"form-group",children:t.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",name:"is_approved",checked:N.is_approved,onChange:G}),"Approved"]})})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>g(!1),children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:w,children:w?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"loading-spinner"}),"Creating..."]}):"Create Person"})]})]})]})}),b&&t.jsx("div",{className:"modal-overlay",onClick:()=>y(!1),children:t.jsxs("div",{className:"modal",onClick:te=>te.stopPropagation(),children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Create Account"}),t.jsx("button",{className:"modal-close",onClick:()=>y(!1),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsxs("form",{onSubmit:F,children:[t.jsxs("div",{className:"modal-body",children:[t.jsxs("p",{style:{color:"var(--color-text-secondary)",marginBottom:"1rem"},children:["Creating an account for ",t.jsxs("strong",{children:[x==null?void 0:x.first_name," ",x==null?void 0:x.last_name]})]}),t.jsxs("div",{className:"form-row",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"username",className:"form-label",children:"Username"}),t.jsx("input",{type:"text",id:"username",name:"username",className:"form-input",value:k.username,onChange:ee,required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"account_status",className:"form-label",children:"Account Status"}),t.jsxs("select",{id:"account_status",name:"account_status",className:"form-input",value:k.account_status,onChange:ee,children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"disabled",children:"Disabled"})]})]})]}),t.jsxs("div",{className:"form-row",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),t.jsx("input",{type:"password",id:"password",name:"password",className:"form-input",value:k.password,onChange:ee,required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"role_code",className:"form-label",children:"Role Code (optional)"}),t.jsx("input",{type:"text",id:"role_code",name:"role_code",className:"form-input",value:k.role_code,onChange:ee,placeholder:"e.g. maintenance_chief"})]})]})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>y(!1),children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:P,children:P?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"loading-spinner"}),"Creating..."]}):"Create Account"})]})]})]})})]})},sj=()=>{var Ys,Es,q;const r=Dt(),l=qa(),[u]=Bs(),d=u.get("typeId"),m=u.get("modelId"),p=l.pathname.endsWith("/instances"),h=v=>[v==null?void 0:v.brand_name,v==null?void 0:v.model_name].filter(Boolean).join(" "),[g,b]=c.useState([]),[y,x]=c.useState([]),[S,N]=c.useState([]),[I,k]=c.useState([]),[L,w]=c.useState([]),[O,P]=c.useState([]),[z,M]=c.useState([]),[G,ee]=c.useState([]),[K,re]=c.useState(!1),[F,T]=c.useState(null),[te,de]=c.useState([]),[he,_e]=c.useState([]),[ye,j]=c.useState(!1),[D,X]=c.useState(!1),[V,me]=c.useState(!1),[A,Y]=c.useState(!1),[ne,U]=c.useState(!1),[ge,be]=c.useState(!1),[B,se]=c.useState(!1),[Ae,Ie]=c.useState(!1),[Me,Pe]=c.useState(null),[ze,tt]=c.useState(null),[Ne,He]=c.useState(null),[Ue,we]=c.useState(null),[E,_]=c.useState(null),[R,le]=c.useState({asset_type_label:"",asset_type_code:""}),[fe,Re]=c.useState({model_name:"",model_code:"",asset_brand:"",asset_type:"",release_year:"",discontinued_year:"",is_active:!0,notes:"",warranty_expiry_in_months:""}),[Be,je]=c.useState({asset_serial_number:"",asset_inventory_number:"",asset_service_tag:"",asset_name:"",asset_status:"active",attribution_order_id:"",destruction_certificate_id:""}),[$e,pt]=c.useState({asset_attribute_definition:"",is_mandatory:!1,default_value:""}),[at,_t]=c.useState({asset_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[jt,Ot]=c.useState({asset_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[Qe,Tt]=c.useState({person:"",start_datetime:"",end_datetime:"",condition_on_assignment:"New"}),[Ge,St]=c.useState(null),[Ye,vt]=c.useState(!1),[De,fa]=c.useState(null),[dt,Jt]=c.useState(!1),[ra,ha]=c.useState([]),[nt,It]=c.useState(null),[_a,va]=c.useState(""),[Ut,ja]=c.useState(""),[Lt,Ct]=c.useState(!1);c.useEffect(()=>{La(),ns(),ut(),Ts(),Ba()},[]),c.useEffect(()=>{p&&(!d||!m)&&r("/dashboard/assets/types",{replace:!0})},[p,d,m,r]),c.useEffect(()=>{Me?(Sa(Me.asset_type_id),gt(Me.asset_type_id),tt(null),k([]),M([])):(N([]),P([]))},[Me]),c.useEffect(()=>{if(!p||!d||!Array.isArray(g)||g.length===0)return;const v=g.find(H=>String(H.asset_type_id)===String(d))||null;v&&(Me==null?void 0:Me.asset_type_id)!==v.asset_type_id&&Pe(v)},[p,d,g,Me]),c.useEffect(()=>{ze?(Ht(ze.asset_model_id),Gt(ze.asset_model_id)):(k([]),M([]),He(null),ee([]))},[ze]),c.useEffect(()=>{if(!p||!m||!Array.isArray(S)||S.length===0)return;const v=S.find(H=>String(H.asset_model_id)===String(m))||null;v&&(ze==null?void 0:ze.asset_model_id)!==v.asset_model_id&&tt(v)},[p,m,S,ze]),c.useEffect(()=>{Ne?oa(Ne.asset_id):ee([])},[Ne]);const Fa=c.useMemo(()=>{const v=new Map;return he.forEach(H=>{var ve;H.is_active&&v.set((ve=H.asset)==null?void 0:ve.asset_id,H)}),v},[he]),la=c.useMemo(()=>{const v=new Map;return L.forEach(H=>{v.set(H.asset_attribute_definition_id,H)}),v},[L]),La=async()=>{re(!0),T(null);try{const v=await Zs.getAll();b(Array.isArray(v)?v:[])}catch(v){T("Failed to fetch asset types: "+v.message),b([])}finally{re(!1)}},ns=async()=>{try{const v=await ru.getAll();x(Array.isArray(v)?v:[])}catch(v){console.error("Failed to fetch asset brands:",v),x([])}},Sa=async v=>{try{const H=await ft.getByAssetType(v);N(Array.isArray(H)?H:[])}catch(H){T("Failed to fetch asset models: "+H.message),N([])}},Ht=async v=>{try{const H=await Ns.getAll({asset_model:v});k(Array.isArray(H)?H:[])}catch(H){T("Failed to fetch assets: "+H.message),k([])}},ut=async()=>{try{const v=await ur.getAll();w(Array.isArray(v)?v:[])}catch(v){T("Failed to fetch attribute definitions: "+v.message),w([])}},gt=async v=>{try{const H=await vn.getByAssetType(v);P(Array.isArray(H)?H:[])}catch(H){T("Failed to fetch asset type attributes: "+H.message),P([])}},Gt=async v=>{try{const H=await Kr.getByAssetModel(v);M(Array.isArray(H)?H:[])}catch(H){T("Failed to fetch asset model attributes: "+H.message),M([])}},oa=async v=>{try{const H=await Wd.getByAsset(v);ee(Array.isArray(H)?H:[])}catch(H){T("Failed to fetch asset attributes: "+H.message),ee([])}},Ts=async()=>{try{const v=await _n.getAll();de(Array.isArray(v)?v:[])}catch(v){console.error("Failed to fetch persons:",v)}},Ba=async()=>{try{const v=await bi.getAll();_e(Array.isArray(v)?v:[])}catch(v){console.error("Failed to fetch assignments:",v)}},Ha=v=>{const{name:H,value:ve}=v.target;Tt(Oe=>({...Oe,[H]:ve}))},ia=async v=>{var H,ve;if(v.preventDefault(),!!Ue){vt(!0),T(null);try{await bi.create({...Qe,asset:Ue.asset_id,start_datetime:new Date(Qe.start_datetime).toISOString(),end_datetime:Qe.end_datetime?new Date(Qe.end_datetime).toISOString():null}),se(!1),we(null),Ba(),alert("Asset assigned successfully!")}catch(Oe){T("Failed to assign asset: "+(((ve=(H=Oe.response)==null?void 0:H.data)==null?void 0:ve.error)||Oe.message))}finally{vt(!1)}}},Vt=async v=>{var H,ve;vt(!0),T(null);try{await bi.discharge(v),_(null),Ba(),alert("Asset discharged successfully!")}catch(Oe){T("Failed to discharge asset: "+(((ve=(H=Oe.response)==null?void 0:H.data)==null?void 0:ve.error)||Oe.message))}finally{vt(!1)}},ea=async v=>{var H,ve;vt(!0),T(null);try{await bi.confirm(v),Ba(),alert("Assignment confirmed successfully!")}catch(Oe){T("Failed to confirm assignment: "+(((ve=(H=Oe.response)==null?void 0:H.data)==null?void 0:ve.error)||Oe.message))}finally{vt(!1)}},Qt=v=>{const{name:H,value:ve}=v.target;le(Oe=>({...Oe,[H]:ve}))},Xt=v=>{const{name:H,value:ve,type:Oe,checked:kt}=v.target;Re(Q=>({...Q,[H]:Oe==="checkbox"?kt:Oe==="number"?ve?parseInt(ve):"":ve}))},ya=v=>{const{name:H,value:ve}=v.target;je(Oe=>({...Oe,[H]:ve}))},ht=v=>{const{name:H,value:ve,type:Oe,checked:kt}=v.target;pt(Q=>({...Q,[H]:Oe==="checkbox"?kt:ve}))},Ta=v=>{const{name:H,value:ve,type:Oe,checked:kt}=v.target;_t(Q=>({...Q,[H]:Oe==="checkbox"?kt:ve}))},ga=v=>{const{name:H,value:ve,type:Oe,checked:kt}=v.target;Ot(Q=>({...Q,[H]:Oe==="checkbox"?kt:ve}))},Ia=async v=>{var H,ve;v.preventDefault(),vt(!0),T(null);try{await Zs.create(R),le({asset_type_label:"",asset_type_code:""}),j(!1),await La()}catch(Oe){T("Failed to create asset type: "+(((ve=(H=Oe.response)==null?void 0:H.data)==null?void 0:ve.error)||Oe.message))}finally{vt(!1)}},Zt=async v=>{var H;if(v.preventDefault(),!Me){T("Please select an asset type first");return}if(!fe.asset_brand){T("Please select a brand");return}vt(!0),T(null);try{const ve={model_name:fe.model_name,model_code:fe.model_code,asset_brand:parseInt(fe.asset_brand),asset_type:Me.asset_type_id,is_active:fe.is_active,notes:fe.notes||"",release_year:fe.release_year?parseInt(fe.release_year):null,discontinued_year:fe.discontinued_year?parseInt(fe.discontinued_year):null,warranty_expiry_in_months:fe.warranty_expiry_in_months?parseInt(fe.warranty_expiry_in_months):null};await ft.create(ve),Re({model_name:"",model_code:"",asset_brand:"",asset_type:"",release_year:"",discontinued_year:"",is_active:!0,notes:"",warranty_expiry_in_months:""}),X(!1),await Sa(Me.asset_type_id)}catch(ve){const Oe=(H=ve.response)!=null&&H.data?typeof ve.response.data=="object"?JSON.stringify(ve.response.data):ve.response.data:ve.message;T("Failed to create asset model: "+Oe)}finally{vt(!1)}},$a=async v=>{var H;if(v.preventDefault(),!ze){T("Please select an asset model first");return}vt(!0),T(null);try{const ve={...Be,asset_model:ze.asset_model_id,attribution_order_id:Be.attribution_order_id?Number(Be.attribution_order_id):null,destruction_certificate_id:Be.destruction_certificate_id?Number(Be.destruction_certificate_id):null};Ge?await Ns.update(Ge,ve):await Ns.create(ve),je({asset_serial_number:"",asset_inventory_number:"",asset_service_tag:"",asset_name:"",asset_status:"active",attribution_order_id:"",destruction_certificate_id:""}),St(null),me(!1),await Ht(ze.asset_model_id)}catch(ve){const Oe=(H=ve.response)!=null&&H.data?typeof ve.response.data=="object"?JSON.stringify(ve.response.data):ve.response.data:ve.message;T(`Failed to ${Ge?"update":"create"} asset: `+Oe)}finally{vt(!1)}},Ya=async v=>{if(v.preventDefault(),!Me){T("Please select an asset type first");return}if(!$e.asset_attribute_definition){T("Please select an attribute definition");return}vt(!0),T(null);try{const H={asset_type:Me.asset_type_id,asset_attribute_definition:Number($e.asset_attribute_definition),is_mandatory:$e.is_mandatory,default_value:$e.default_value||null};await vn.create(H),pt({asset_attribute_definition:"",is_mandatory:!1,default_value:""}),Y(!1),await gt(Me.asset_type_id)}catch(H){T("Failed to assign attribute to asset type: "+H.message)}finally{vt(!1)}},zs=async v=>{if(v.preventDefault(),!ze){T("Please select an asset model first");return}if(!at.asset_attribute_definition){T("Please select an attribute definition");return}vt(!0),T(null);try{const H={asset_model:ze.asset_model_id,asset_attribute_definition:Number(at.asset_attribute_definition),value_string:at.value_string||null,value_number:at.value_number?Number(at.value_number):null,value_bool:at.value_bool,value_date:at.value_date||null};await Kr.create(H),_t({asset_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),U(!1),await Gt(ze.asset_model_id)}catch(H){T("Failed to add model attribute value: "+H.message)}finally{vt(!1)}},Ps=async v=>{if(v.preventDefault(),!Ne){T("Please select an asset first");return}if(!jt.asset_attribute_definition){T("Please select an attribute definition");return}vt(!0),T(null);try{const H={asset:Ne.asset_id,asset_attribute_definition:Number(jt.asset_attribute_definition),value_string:jt.value_string||null,value_number:jt.value_number?Number(jt.value_number):null,value_bool:jt.value_bool,value_date:jt.value_date||null};await Wd.create(H),Ot({asset_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),be(!1),await oa(Ne.asset_id)}catch(H){T("Failed to add asset attribute value: "+H.message)}finally{vt(!1)}},hs=v=>{St(v.asset_id),je({asset_serial_number:v.asset_serial_number||"",asset_inventory_number:v.asset_inventory_number||"",asset_service_tag:v.asset_service_tag||"",asset_name:v.asset_name||"",asset_status:v.asset_status||"active",attribution_order_id:v.attribution_order_id??"",destruction_certificate_id:v.destruction_certificate_id??""}),me(!0)},za=async v=>{if(window.confirm("Are you sure you want to delete this asset type?"))try{await Zs.delete(v),(Me==null?void 0:Me.asset_type_id)===v&&Pe(null),await La()}catch(H){T("Failed to delete asset type: "+H.message)}},Ca=async v=>{if(window.confirm("Are you sure you want to delete this asset model?"))try{await ft.delete(v),Me&&await Sa(Me.asset_type_id)}catch(H){T("Failed to delete asset model: "+H.message)}},zt=async v=>{if(window.confirm("Are you sure you want to delete this asset?"))try{await Ns.delete(v),ze&&await Ht(ze.asset_model_id)}catch(H){T("Failed to delete asset: "+H.message)}},Wa=async(v,H)=>{if(window.confirm("Remove this attribute from the asset type?"))try{await vn.delete(v,H),Me&&await gt(Me.asset_type_id)}catch(ve){T("Failed to remove asset type attribute: "+ve.message)}},ys=async(v,H)=>{if(window.confirm("Remove this attribute value from the asset model?"))try{await Kr.delete(v,H),ze&&await Gt(ze.asset_model_id)}catch(ve){T("Failed to remove asset model attribute: "+ve.message)}},Ga=async(v,H)=>{if(window.confirm("Remove this attribute value from the asset?"))try{await Wd.delete(v,H),Ne&&await oa(Ne.asset_id)}catch(ve){T("Failed to remove asset attribute: "+ve.message)}},bs=v=>{He(v),Ie(!0)},J=()=>{Ie(!1),be(!1)},Se=()=>{Jt(!1),fa(null),ha([]),It(null),va(""),ja(""),Ct(!1)},Te=async v=>{var H;T(null),fa(v),It(null),va(""),ja(""),Jt(!0);try{const[ve,Oe]=await Promise.all([qs.getAll(),Ns.getCurrentRoom(v.asset_id)]),kt=Array.isArray(ve)?ve:[];ha(kt);const Q=((H=Oe==null?void 0:Oe.room)==null?void 0:H.room_id)??null;It(Q);const Ee=kt.find(Fe=>Fe.room_id===Q);va((Ee==null?void 0:Ee.room_name)||(Q?`Room ${Q}`:"Unknown"))}catch(ve){console.error(ve),ha([]),T("Failed to load rooms")}},Je=async v=>{var H,ve;if(v.preventDefault(),!!De){if(!Ut){T("Please select a destination room");return}try{Ct(!0),await Ns.move(De.asset_id,{destination_room_id:Number(Ut)}),ze&&await Ht(ze.asset_model_id),Se()}catch(Oe){console.error(Oe),T(((ve=(H=Oe.response)==null?void 0:H.data)==null?void 0:ve.error)||"Failed to move asset")}finally{Ct(!1)}}},wt=sa.getUser(),wa=wt==null?void 0:wt.is_superuser,ka=((Ys=wt==null?void 0:wt.roles)==null?void 0:Ys.some(v=>v.role_code==="asset_responsible"))||wa,Va=((Es=wt==null?void 0:wt.roles)==null?void 0:Es.some(v=>v.role_code==="exploitation_chief"))||wa,Hs=ka||Va,vs=ka||Va,$s=he.filter(v=>!v.is_confirmed_by_exploitation_chief&&v.is_active);return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Assets Explorer"}),t.jsx("p",{className:"page-subtitle",children:"Manage asset types, models, and inventory"})]}),Va&&$s.length>0&&t.jsxs("div",{style:{backgroundColor:"rgba(59, 130, 246, 0.1)",border:"1px solid var(--color-primary)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)",marginBottom:"var(--space-4)"},children:[t.jsxs("h3",{style:{fontSize:"var(--font-size-sm)",fontWeight:"600",color:"var(--color-primary)",marginBottom:"var(--space-2)"},children:["Pending Confirmations (",$s.length,")"]}),t.jsx("div",{style:{display:"flex",gap:"var(--space-4)",overflowX:"auto",paddingBottom:"var(--space-2)"},children:$s.map(v=>{var H,ve;return t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-3)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",minWidth:"250px",fontSize:"var(--font-size-xs)"},children:[t.jsxs("div",{style:{fontWeight:"600"},children:[((H=v.asset)==null?void 0:H.asset_name)||"Asset"," (ID: ",(ve=v.asset)==null?void 0:ve.asset_id,")"]}),t.jsxs("div",{style:{color:"var(--color-text-secondary)"},children:["Assignee ID: ",v.person]}),t.jsx("div",{style:{marginTop:"var(--space-2)",display:"flex",justifyContent:"flex-end"},children:t.jsx("button",{onClick:()=>ea(v.assignment_id),style:{backgroundColor:"var(--color-primary)",color:"white",border:"none",padding:"4px 8px",borderRadius:"4px",cursor:"pointer"},children:"Confirm"})})]},v.assignment_id)})})]}),F&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:F}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:p?"1fr":"300px 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[!p&&t.jsxs("div",{className:"card",style:{display:"flex",flexDirection:"column",overflow:"hidden",height:"100%"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Library"}),t.jsx("button",{onClick:()=>j(!ye),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Asset Type",children:"+"})]}),ye&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:Ia,children:[t.jsx("input",{type:"text",name:"asset_type_label",value:R.asset_type_label,onChange:Qt,placeholder:"Type Name",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsx("input",{type:"text",name:"asset_type_code",value:R.asset_type_code,onChange:Qt,placeholder:"Code (e.g. LAP)",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:Ye,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>j(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[g.map(v=>t.jsxs("div",{children:[t.jsxs("div",{onClick:()=>Pe((Me==null?void 0:Me.asset_type_id)===v.asset_type_id?null:v),style:{padding:"var(--space-3) var(--space-4)",cursor:"pointer",backgroundColor:(Me==null?void 0:Me.asset_type_id)===v.asset_type_id?"var(--color-bg-secondary)":"transparent",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsx("span",{style:{fontWeight:"500"},children:v.asset_type_label}),t.jsx("button",{onClick:H=>{H.stopPropagation(),za(v.asset_type_id)},style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]}),(Me==null?void 0:Me.asset_type_id)===v.asset_type_id&&t.jsxs("div",{style:{backgroundColor:"var(--color-bg-secondary)",borderBottom:"1px solid var(--color-border)"},children:[t.jsx("div",{onClick:()=>X(!0),style:{padding:"var(--space-2) var(--space-4)",fontSize:"var(--font-size-xs)",color:"var(--color-primary)",cursor:"pointer",borderBottom:"1px dashed var(--color-border)",textAlign:"center"},children:"+ Add Model"}),S.map(H=>t.jsxs("div",{onClick:()=>tt(H),style:{padding:"var(--space-2) var(--space-4)",paddingLeft:"var(--space-8)",cursor:"pointer",backgroundColor:(ze==null?void 0:ze.asset_model_id)===H.asset_model_id?"var(--color-primary)":"transparent",color:(ze==null?void 0:ze.asset_model_id)===H.asset_model_id?"white":"var(--color-text)",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"var(--font-size-sm)"},children:[t.jsx("span",{children:h(H)||`Model ${H.asset_model_id}`}),(ze==null?void 0:ze.asset_model_id)===H.asset_model_id&&t.jsx("button",{onClick:ve=>{ve.stopPropagation(),Ca(H.asset_model_id)},style:{border:"none",background:"none",color:"white",cursor:"pointer",opacity:.8},children:""})]},H.asset_model_id))]})]},v.asset_type_id)),g.length===0&&!K&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No asset types."})]})]}),t.jsx("div",{className:"card",style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:D?t.jsxs("div",{style:{padding:"var(--space-6)",overflowY:"auto"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-6)"},children:[t.jsxs("h2",{children:["Add New Model for ",Me==null?void 0:Me.asset_type_label]}),t.jsx("button",{onClick:()=>X(!1),style:{padding:"var(--space-2) var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]}),y.length===0?t.jsx("div",{style:{color:"#c33",backgroundColor:"#fee",padding:"var(--space-4)",borderRadius:"var(--radius-sm)"},children:"No asset brands found. Please create a brand first."}):t.jsxs("form",{onSubmit:Zt,style:{maxWidth:"600px"},children:[t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Brand *"}),t.jsxs("select",{name:"asset_brand",value:fe.asset_brand,onChange:Xt,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"},children:[t.jsx("option",{value:"",children:"Select a brand..."}),y.map(v=>t.jsx("option",{value:v.asset_brand_id,children:v.brand_name},v.asset_brand_id))]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Model Name *"}),t.jsx("input",{type:"text",name:"model_name",value:fe.model_name,onChange:Xt,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Model Code *"}),t.jsx("input",{type:"text",name:"model_code",value:fe.model_code,onChange:Xt,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Release Year"}),t.jsx("input",{type:"number",name:"release_year",value:fe.release_year,onChange:Xt,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Warranty (Months)"}),t.jsx("input",{type:"number",name:"warranty_expiry_in_months",value:fe.warranty_expiry_in_months,onChange:Xt,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]})]}),t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Notes"}),t.jsx("textarea",{name:"notes",value:fe.notes,onChange:Xt,rows:"3",style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),t.jsx("div",{style:{marginBottom:"var(--space-6)"},children:t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",name:"is_active",checked:fe.is_active,onChange:Xt}),"Active Model"]})}),t.jsx("button",{type:"submit",disabled:Ye,style:{padding:"var(--space-2) var(--space-6)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:Ye?"Creating...":"Create Model"})]})]}):ze?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsxs("h2",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",margin:0},children:[h(ze)||ze.model_name||""," ",t.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-md)",fontWeight:"normal"},children:["(",ze.model_code,")"]})]}),t.jsxs("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)",marginTop:"var(--space-1)"},children:[ze.brand_name,"  ",I.length," Assets"]})]}),t.jsx("button",{onClick:()=>{St(null),je({asset_serial_number:"",asset_inventory_number:"",asset_service_tag:"",asset_name:"",asset_status:"active",attribution_order_id:0,destruction_certificate_id:0}),me(!0)},style:{backgroundColor:"var(--color-primary)",color:"white",border:"none",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:"pointer",fontWeight:"500"},children:"+ Add Asset"})]}),t.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"var(--space-4)"},children:[!p&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"var(--space-4)",marginBottom:"var(--space-6)"},children:t.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[t.jsx("div",{style:{fontWeight:"600"},children:"Asset Type Attributes"}),t.jsx("button",{onClick:()=>Y(!A),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Assign"})]}),A&&t.jsxs("form",{onSubmit:Ya,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"asset_attribute_definition",value:$e.asset_attribute_definition,onChange:ht,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),L.map(v=>t.jsx("option",{value:v.asset_attribute_definition_id,children:v.description||`Attribute ${v.asset_attribute_definition_id}`},v.asset_attribute_definition_id))]}),t.jsx("input",{type:"text",name:"default_value",placeholder:"Default value",value:$e.default_value,onChange:ht,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"is_mandatory",checked:$e.is_mandatory,onChange:ht}),"Mandatory"]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:Ye,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>Y(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),t.jsx("div",{style:{maxHeight:"240px",overflowY:"auto"},children:O.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned."}):O.map(v=>{const H=v.definition||la.get(v.asset_attribute_definition);return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(H==null?void 0:H.description)||`Attribute ${v.asset_attribute_definition}`}),t.jsxs("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:[(H==null?void 0:H.data_type)||"type",H!=null&&H.unit?`  ${H.unit}`:"",v.is_mandatory?"  mandatory":"",v.default_value?`  default: ${v.default_value}`:""]})]}),t.jsx("button",{onClick:()=>Wa(v.asset_type,v.asset_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${v.asset_type}-${v.asset_attribute_definition}`)})})]})}),t.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)",marginBottom:"var(--space-6)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[t.jsx("div",{style:{fontWeight:"600"},children:"Asset Model Attributes"}),t.jsx("button",{onClick:()=>U(!ne),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add Value"})]}),ne&&t.jsxs("form",{onSubmit:zs,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"asset_attribute_definition",value:at.asset_attribute_definition,onChange:Ta,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),L.map(v=>t.jsx("option",{value:v.asset_attribute_definition_id,children:v.description||`Attribute ${v.asset_attribute_definition_id}`},v.asset_attribute_definition_id))]}),(()=>{var ve;const v=la.get(Number(at.asset_attribute_definition)),H=(ve=v==null?void 0:v.data_type)==null?void 0:ve.toLowerCase();return H==="number"?t.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:at.value_number,onChange:Ta,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):H==="bool"||H==="boolean"?t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"value_bool",checked:at.value_bool,onChange:Ta}),"True"]}):H==="date"?t.jsx("input",{type:"date",name:"value_date",value:at.value_date,onChange:Ta,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):t.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:at.value_string,onChange:Ta,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:Ye,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>U(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),t.jsx("div",{style:{maxHeight:"240px",overflowY:"auto"},children:z.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No model attribute values."}):z.map(v=>{const H=v.definition||la.get(v.asset_attribute_definition),ve=v.value_string??v.value_number??v.value_bool??v.value_date??"";return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(H==null?void 0:H.description)||`Attribute ${v.asset_attribute_definition}`}),t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:ve===""?"No value":String(ve)})]}),t.jsx("button",{onClick:()=>ys(v.asset_model,v.asset_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${v.asset_model}-${v.asset_attribute_definition}`)})})]})]}),V&&t.jsxs("div",{style:{marginBottom:"var(--space-6)",padding:"var(--space-4)",backgroundColor:"var(--color-bg-secondary)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"},children:[t.jsx("div",{style:{fontWeight:"600",marginBottom:"var(--space-4)"},children:Ge?"Edit Asset":"New Asset"}),t.jsxs("form",{onSubmit:$a,children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Name"}),t.jsx("input",{type:"text",name:"asset_name",value:Be.asset_name,onChange:ya,placeholder:"Asset Name",style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Status"}),t.jsxs("select",{name:"asset_status",value:Be.asset_status,onChange:ya,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"},children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"}),t.jsx("option",{value:"maintenance",children:"Maintenance"}),t.jsx("option",{value:"retired",children:"Retired"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Serial Number"}),t.jsx("input",{type:"text",name:"asset_serial_number",value:Be.asset_serial_number,onChange:ya,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Inventory Number"}),t.jsx("input",{type:"text",name:"asset_inventory_number",value:Be.asset_inventory_number,onChange:ya,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]})]}),t.jsxs("div",{style:{marginTop:"var(--space-4)",display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",style:{padding:"var(--space-2) var(--space-4)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Save Asset"}),t.jsx("button",{type:"button",onClick:()=>me(!1),style:{padding:"var(--space-2) var(--space-4)",backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})]})]}),I.length===0?t.jsx("div",{style:{textAlign:"center",color:"var(--color-text-secondary)",padding:"var(--space-8)"},children:"No assets found for this model."}):t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"var(--font-size-sm)"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{borderBottom:"2px solid var(--color-border)",textAlign:"left"},children:[t.jsx("th",{style:{padding:"var(--space-2)"},children:"Name"}),t.jsx("th",{style:{padding:"var(--space-2)"},children:"Serial / Tag"}),t.jsx("th",{style:{padding:"var(--space-2)"},children:"Status"}),t.jsx("th",{style:{padding:"var(--space-2)",textAlign:"right"},children:"Actions"})]})}),t.jsx("tbody",{children:I.map(v=>t.jsxs("tr",{onClick:()=>bs(v),style:{borderBottom:"1px solid var(--color-border)",cursor:"pointer"},children:[t.jsxs("td",{style:{padding:"var(--space-3) var(--space-2)"},children:[t.jsx("div",{style:{fontWeight:"500"},children:v.asset_name||"Unnamed Asset"}),t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:v.asset_inventory_number})]}),t.jsxs("td",{style:{padding:"var(--space-3) var(--space-2)"},children:[t.jsx("div",{children:v.asset_serial_number}),t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:v.asset_service_tag})]}),t.jsx("td",{style:{padding:"var(--space-3) var(--space-2)"},children:t.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"var(--font-size-xs)",backgroundColor:v.asset_status==="active"?"rgba(16, 185, 129, 0.15)":"var(--color-bg-secondary)",color:v.asset_status==="active"?"var(--color-success)":"var(--color-text-secondary)"},children:v.asset_status})}),t.jsxs("td",{style:{padding:"var(--space-3) var(--space-2)",textAlign:"right"},children:[t.jsx("button",{onClick:H=>{H.stopPropagation(),bs(v)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-text-secondary)",cursor:"pointer",fontWeight:"500"},children:"Attributes"}),t.jsx("button",{onClick:H=>{H.stopPropagation(),hs(v)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-primary)",cursor:"pointer",fontWeight:"500"},children:"Edit"}),Hs&&t.jsx("button",{onClick:H=>{H.stopPropagation(),Te(v)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-primary)",cursor:"pointer",fontWeight:"500"},children:"Move"}),vs&&(()=>{const H=Fa.get(v.asset_id);return H?t.jsx("button",{onClick:ve=>{ve.stopPropagation(),_(H)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontWeight:"500"},children:"Discharge"}):t.jsx("button",{onClick:ve=>{ve.stopPropagation(),we(v);const Oe=new Date,kt=Oe.getTimezoneOffset()*6e4,Q=new Date(Oe-kt).toISOString().slice(0,16);Tt({person:"",start_datetime:Q,end_datetime:"",condition_on_assignment:v.asset_status==="active"?"Good":"Needs Repair"}),se(!0)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"#10b981",cursor:"pointer",fontWeight:"500"},children:"Assign"})})(),t.jsx("button",{onClick:H=>{H.stopPropagation(),zt(v.asset_id)},style:{background:"none",border:"none",color:"#c33",cursor:"pointer",fontWeight:"500"},children:"Delete"})]})]},v.asset_id))})]})]})]}):Me?t.jsxs("div",{style:{padding:"var(--space-6)",overflowY:"auto"},children:[t.jsxs("h2",{style:{marginBottom:"var(--space-4)"},children:[Me.asset_type_label," Attributes"]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"var(--space-4)"},children:!p&&t.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[t.jsx("div",{style:{fontWeight:"600"},children:"Asset Type Attributes"}),t.jsx("button",{onClick:()=>Y(!A),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Assign"})]}),A&&t.jsxs("form",{onSubmit:Ya,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"asset_attribute_definition",value:$e.asset_attribute_definition,onChange:ht,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),L.map(v=>t.jsx("option",{value:v.asset_attribute_definition_id,children:v.description||`Attribute ${v.asset_attribute_definition_id}`},v.asset_attribute_definition_id))]}),t.jsx("input",{type:"text",name:"default_value",placeholder:"Default value",value:$e.default_value,onChange:ht,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"is_mandatory",checked:$e.is_mandatory,onChange:ht}),"Mandatory"]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:Ye,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>Y(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),t.jsx("div",{style:{maxHeight:"320px",overflowY:"auto"},children:O.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned."}):O.map(v=>{const H=v.definition||la.get(v.asset_attribute_definition);return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(H==null?void 0:H.description)||`Attribute ${v.asset_attribute_definition}`}),t.jsxs("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:[(H==null?void 0:H.data_type)||"type",H!=null&&H.unit?`  ${H.unit}`:"",v.is_mandatory?"  mandatory":"",v.default_value?`  default: ${v.default_value}`:""]})]}),t.jsx("button",{onClick:()=>Wa(v.asset_type,v.asset_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${v.asset_type}-${v.asset_attribute_definition}`)})})]})})]}):t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--color-text-secondary)"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"var(--space-4)",opacity:.2},children:""}),t.jsx("p",{children:"Select a model from the sidebar to view assets."})]})})]}),B&&Ue&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t.jsxs("div",{style:{backgroundColor:"white",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"500px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},children:[t.jsxs("h2",{style:{marginBottom:"var(--space-4)"},children:["Assign Asset: ",Ue.asset_name]}),t.jsxs("form",{onSubmit:ia,children:[t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Assign to Person"}),t.jsxs("select",{name:"person",value:Qe.person,onChange:Ha,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"},children:[t.jsx("option",{value:"",children:"Select a person..."}),te.map(v=>t.jsxs("option",{value:v.person_id,children:[v.first_name," ",v.last_name," (",v.person_id,")"]},v.person_id))]})]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Start Date (Automatic)"}),t.jsx("input",{type:"datetime-local",name:"start_datetime",value:Qe.start_datetime,onChange:Ha,required:!0,readOnly:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-secondary)",cursor:"not-allowed"}})]})}),t.jsxs("div",{style:{marginBottom:"var(--space-6)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Condition"}),t.jsx("input",{type:"text",name:"condition_on_assignment",value:Qe.condition_on_assignment,onChange:Ha,placeholder:"e.g. Good, New",required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[t.jsx("button",{type:"button",onClick:()=>{se(!1),we(null)},style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"}),t.jsx("button",{type:"submit",disabled:Ye,style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:Ye?"Assigning...":"Assign Asset"})]})]})]})}),Ae&&Ne&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"var(--space-4)"},children:t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"900px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12,marginBottom:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:Ne.asset_name||`Asset ${Ne.asset_id}`}),t.jsxs("div",{style:{marginTop:6,color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:["ID: ",Ne.asset_id,Ne.asset_inventory_number?`  Inv: ${Ne.asset_inventory_number}`:"",Ne.asset_serial_number?`  SN: ${Ne.asset_serial_number}`:"",Ne.asset_service_tag?`  Tag: ${Ne.asset_service_tag}`:""]})]}),t.jsx("button",{type:"button",onClick:J,style:{border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",cursor:"pointer"},children:"Close"})]}),t.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[t.jsx("div",{style:{fontWeight:"600"},children:"Asset Attributes"}),t.jsx("button",{onClick:()=>be(!ge),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add Value"})]}),ge&&t.jsxs("form",{onSubmit:Ps,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"asset_attribute_definition",value:jt.asset_attribute_definition,onChange:ga,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),L.map(v=>t.jsx("option",{value:v.asset_attribute_definition_id,children:v.description||`Attribute ${v.asset_attribute_definition_id}`},v.asset_attribute_definition_id))]}),(()=>{var ve;const v=la.get(Number(jt.asset_attribute_definition)),H=(ve=v==null?void 0:v.data_type)==null?void 0:ve.toLowerCase();return H==="number"?t.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:jt.value_number,onChange:ga,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):H==="bool"||H==="boolean"?t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"value_bool",checked:jt.value_bool,onChange:ga}),"True"]}):H==="date"?t.jsx("input",{type:"date",name:"value_date",value:jt.value_date,onChange:ga,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):t.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:jt.value_string,onChange:ga,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:Ye,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>be(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),G.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attribute values set for this asset."}):G.map(v=>{const H=v.definition||la.get(v.asset_attribute_definition),ve=v.value_string??v.value_number??v.value_bool??v.value_date??"";return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(H==null?void 0:H.description)||`Attribute ${v.asset_attribute_definition}`}),t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:ve===""?"No value":String(ve)})]}),t.jsx("button",{onClick:()=>Ga(v.asset,v.asset_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${v.asset}-${v.asset_attribute_definition}`)})]})]})}),E&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"400px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[t.jsx("h2",{style:{marginBottom:"var(--space-4)"},children:"Confirm Discharge"}),t.jsxs("p",{style:{marginBottom:"var(--space-6)"},children:["Are you sure you want to end the assignment of ",t.jsx("strong",{children:(q=E.asset)==null?void 0:q.asset_name})," to person ",t.jsx("strong",{children:E.person}),"?",t.jsx("br",{}),t.jsx("br",{}),"The end date will be set to right now."]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[t.jsx("button",{type:"button",onClick:()=>_(null),style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"}),t.jsx("button",{type:"button",onClick:()=>Vt(E.assignment_id),disabled:Ye,style:{padding:"var(--space-2) var(--space-4)",background:"#ef4444",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:Ye?"Discharging...":"Confirm Discharge"})]})]})}),dt&&De&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"520px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,marginBottom:"var(--space-4)"},children:[t.jsxs("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:["Move Asset: ",De.asset_name||`Asset ${De.asset_id}`]}),t.jsx("button",{type:"button",onClick:()=>!Lt&&Se(),style:{border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",cursor:"pointer"},children:"Close"})]}),t.jsxs("form",{onSubmit:Je,children:[t.jsxs("div",{style:{marginBottom:"var(--space-6)"},children:[t.jsxs("div",{style:{marginBottom:"var(--space-3)",padding:"var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"2px"},children:"Current room"}),t.jsx("div",{style:{fontWeight:600},children:_a||"Unknown"})]}),t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Destination room"}),t.jsxs("select",{value:Ut,onChange:v=>ja(v.target.value),required:!0,disabled:Lt,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[t.jsx("option",{value:"",children:"Select a room..."}),ra.map(v=>t.jsxs("option",{value:v.room_id,children:[v.room_name||`Room ${v.room_id}`,v.room_type_label?` (${v.room_type_label})`:""]},v.room_id))]})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[t.jsx("button",{type:"button",onClick:()=>!Lt&&Se(),style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"}),t.jsx("button",{type:"submit",disabled:Lt||!Ut,style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:Lt?"Moving...":"Move"})]})]})]})})]})},nj=()=>{const r=Dt(),[l,u]=c.useState([]),[d,m]=c.useState([]),[p,h]=c.useState(null),[g,b]=c.useState([]),[y,x]=c.useState(!1),[S,N]=c.useState(!1),[I,k]=c.useState(null),[L,w]=c.useState(!1),[O,P]=c.useState(!1),[z,M]=c.useState(!1),[G,ee]=c.useState({asset_type_label:"",asset_type_code:""}),[K,re]=c.useState({description:"",data_type:"",unit:""}),[F,T]=c.useState(!1),[te,de]=c.useState({asset_attribute_definition:"",is_mandatory:!1,default_value:""});c.useEffect(()=>{he(),X()},[]);const he=async()=>{N(!0),k(null);try{const B=await Zs.getAll();u(Array.isArray(B)?B:[])}catch(B){k("Failed to fetch asset types: "+B.message),u([])}finally{N(!1)}},_e=async B=>{x(!0),k(null);try{const se=await vn.getByAssetType(B);b(Array.isArray(se)?se:[])}catch(se){k("Failed to fetch type attributes: "+se.message),b([])}finally{x(!1)}},ye=B=>{const{name:se,value:Ae,type:Ie,checked:Me}=B.target;de(Pe=>({...Pe,[se]:Ie==="checkbox"?Me:Ae}))},j=async B=>{if(B.preventDefault(),!p){k("Please select an asset type first");return}if(!te.asset_attribute_definition){k("Please select an attribute definition");return}M(!0),k(null);try{const se={asset_type:p.asset_type_id,asset_attribute_definition:Number(te.asset_attribute_definition),is_mandatory:!!te.is_mandatory,default_value:te.default_value||null};await vn.create(se),de({asset_attribute_definition:"",is_mandatory:!1,default_value:""}),T(!1),await _e(p.asset_type_id)}catch(se){k("Failed to add type attribute: "+se.message)}finally{M(!1)}},D=async B=>{if(p&&window.confirm("Remove this attribute from the asset type?"))try{await vn.delete(p.asset_type_id,B),await _e(p.asset_type_id)}catch(se){k("Failed to remove type attribute: "+se.message)}},X=async()=>{try{const B=await ur.getAll();m(Array.isArray(B)?B:[])}catch(B){k("Failed to fetch attribute definitions: "+B.message),m([])}},V=B=>{const{name:se,value:Ae}=B.target;ee(Ie=>({...Ie,[se]:Ae}))},me=async B=>{var se,Ae;B.preventDefault(),M(!0),k(null);try{await Zs.create(G),ee({asset_type_label:"",asset_type_code:""}),w(!1),await he()}catch(Ie){k("Failed to create asset type: "+(((Ae=(se=Ie.response)==null?void 0:se.data)==null?void 0:Ae.error)||Ie.message))}finally{M(!1)}},A=async B=>{if(window.confirm("Are you sure you want to delete this asset type?"))try{await Zs.delete(B),await he()}catch(se){k("Failed to delete asset type: "+se.message)}},Y=B=>{r(`/dashboard/assets/models?typeId=${B.asset_type_id}`)},ne=async B=>{h(B),T(!1),de({asset_attribute_definition:"",is_mandatory:!1,default_value:""}),await _e(B.asset_type_id)},U=new Set((Array.isArray(g)?g:[]).map(B=>B.asset_attribute_definition)),ge=(Array.isArray(d)?d:[]).filter(B=>!U.has(B.asset_attribute_definition_id)),be=()=>{r("/dashboard/assets/attribute-definitions")};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Assets"}),t.jsx("p",{className:"page-subtitle",children:"Select an asset type"})]}),I&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:I}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Types"}),t.jsx("button",{onClick:()=>w(!L),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Asset Type",children:"+"})]}),L&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:me,children:[t.jsx("input",{type:"text",name:"asset_type_label",value:G.asset_type_label,onChange:V,placeholder:"Type Name",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsx("input",{type:"text",name:"asset_type_code",value:G.asset_type_code,onChange:V,placeholder:"Code (e.g. LAP)",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:z,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>w(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[l.map(B=>t.jsxs("div",{onClick:()=>Y(B),style:{padding:"var(--space-3) var(--space-4)",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsx("span",{style:{fontWeight:"500"},children:B.asset_type_label}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("button",{onClick:se=>{se.stopPropagation(),ne(B)},style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Attributes"}),t.jsx("button",{onClick:se=>{se.stopPropagation(),A(B.asset_type_id)},style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]})]},B.asset_type_id)),l.length===0&&!S&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No asset types."})]})]}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsxs("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:["Type Attributes ",p?` ${p.asset_type_label}`:""]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{onClick:()=>T(B=>!B),disabled:!p,style:{border:"none",background:"none",color:"var(--color-primary)",cursor:p?"pointer":"not-allowed",opacity:p?1:.6},children:"+ Add"}),t.jsx("button",{onClick:be,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Manage"})]})]}),t.jsx("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:p?t.jsxs(t.Fragment,{children:[F&&t.jsxs("form",{onSubmit:j,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"asset_attribute_definition",value:te.asset_attribute_definition,onChange:ye,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),ge.map(B=>t.jsx("option",{value:B.asset_attribute_definition_id,children:B.description||`Attribute ${B.asset_attribute_definition_id}`},B.asset_attribute_definition_id))]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"is_mandatory",checked:te.is_mandatory,onChange:ye}),"Mandatory"]}),t.jsx("input",{type:"text",name:"default_value",placeholder:"Default value (optional)",value:te.default_value,onChange:ye,style:{padding:"var(--space-2)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:z,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>T(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),y&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!y&&g.length===0&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned to this type."}),!y&&g.map(B=>{const se=B.definition||d.find(Ae=>Ae.asset_attribute_definition_id===B.asset_attribute_definition);return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(se==null?void 0:se.description)||`Attribute ${B.asset_attribute_definition}`}),t.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[(se==null?void 0:se.data_type)||"n/a",se!=null&&se.unit?`  ${se.unit}`:"",B.is_mandatory?"  mandatory":"",B.default_value?`  default: ${B.default_value}`:""]})]}),t.jsx("button",{onClick:()=>D(B.asset_attribute_definition),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},`${B.asset_type}-${B.asset_attribute_definition}`)})]}):t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:'Click "Attributes" on a type to view its attributes.'})})]})]})]})},rj=()=>{const r=Dt(),l=qa(),d=c.useMemo(()=>new URLSearchParams(l.search),[l.search]).get("typeId"),[m,p]=c.useState(null),[h,g]=c.useState([]),[b,y]=c.useState([]),[x,S]=c.useState(!1),[N,I]=c.useState(null),[k,L]=c.useState(!1),[w,O]=c.useState(!1),[P,z]=c.useState({asset_attribute_definition:"",is_mandatory:!1,default_value:""});c.useEffect(()=>{if(!d){I("typeId is required");return}M()},[d]);const M=async()=>{S(!0),I(null);try{const[T,te,de]=await Promise.all([Zs.getById(d),ur.getAll(),vn.getByAssetType(d)]);p(T),y(Array.isArray(te)?te:[]),g(Array.isArray(de)?de:[])}catch(T){I("Failed to load type attributes: "+T.message)}finally{S(!1)}},G=T=>{const{name:te,value:de,type:he,checked:_e}=T.target;z(ye=>({...ye,[te]:he==="checkbox"?_e:de}))},ee=async T=>{if(T.preventDefault(),!P.asset_attribute_definition){I("Please select an attribute definition");return}O(!0),I(null);try{const te={asset_type:Number(d),asset_attribute_definition:Number(P.asset_attribute_definition),is_mandatory:P.is_mandatory,default_value:P.default_value||null};await vn.create(te),z({asset_attribute_definition:"",is_mandatory:!1,default_value:""}),L(!1),await M()}catch(te){I("Failed to add attribute to type: "+te.message)}finally{O(!1)}},K=async T=>{if(window.confirm("Remove this attribute from the asset type?"))try{await vn.delete(Number(d),Number(T)),await M()}catch(te){I("Failed to remove type attribute: "+te.message)}},re=c.useMemo(()=>new Set(h.map(T=>T.asset_attribute_definition)),[h]),F=c.useMemo(()=>b.filter(T=>!re.has(T.asset_attribute_definition_id)),[b,re]);return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"flex-end",gap:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("h1",{className:"page-title",children:"Asset Type Attributes"}),t.jsxs("p",{className:"page-subtitle",children:[m?m.asset_type_label:"Type","  Manage attributes"]})]}),t.jsx("button",{onClick:()=>r("/dashboard/assets/types"),style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back to Types","aria-label":"Back to Types",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})]}),N&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:N}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Attributes"}),t.jsx("button",{onClick:()=>L(!k),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add"})]}),k&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:ee,children:[t.jsxs("select",{name:"asset_attribute_definition",value:P.asset_attribute_definition,onChange:G,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition"}),F.map(T=>t.jsxs("option",{value:T.asset_attribute_definition_id,children:[T.description," (",T.data_type||"n/a",T.unit?`  ${T.unit}`:"",")"]},T.asset_attribute_definition_id))]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"is_mandatory",checked:P.is_mandatory,onChange:G}),"Mandatory"]}),t.jsx("input",{type:"text",name:"default_value",placeholder:"Default value (optional)",value:P.default_value,onChange:G,style:{padding:"var(--space-2)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:w,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>L(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:[x&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!x&&h.length===0&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned to this type."}),h.map(T=>{var te,de,he;return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:((te=T.definition)==null?void 0:te.description)||`Definition ${T.asset_attribute_definition}`}),t.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[((de=T.definition)==null?void 0:de.data_type)||"n/a",(he=T.definition)!=null&&he.unit?`  ${T.definition.unit}`:"",T.is_mandatory?"  mandatory":"",T.default_value?`  default: ${T.default_value}`:""]})]}),t.jsx("button",{onClick:()=>K(T.asset_attribute_definition),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},T.asset_attribute_definition)})]})]})]})},lj=()=>{const r=Dt(),[l]=Bs(),u=l.get("typeId"),d=_=>[_==null?void 0:_.brand_name,_==null?void 0:_.model_name].filter(Boolean).join(" "),[m,p]=c.useState(null),[h,g]=c.useState([]),[b,y]=c.useState(null),[x,S]=c.useState([]),[N,I]=c.useState([]),[k,L]=c.useState([]),[w,O]=c.useState(!1),[P,z]=c.useState(!1),[M,G]=c.useState({asset_brand:"",model_name:"",model_code:""}),[ee,K]=c.useState(!1),[re,F]=c.useState({asset_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[T,te]=c.useState(!1),[de,he]=c.useState(null),[_e,ye]=c.useState(!1),[j,D]=c.useState(!1),[X,V]=c.useState(!1),[me,A]=c.useState({brand_name:""}),Y=_=>String(_||"").trim().toUpperCase().replace(/\s+/g,"_").replace(/[^A-Z0-9_\-]/g,"").slice(0,16);c.useEffect(()=>{u&&ne(u)},[u]),c.useEffect(()=>{be(),B()},[]),c.useEffect(()=>{if(!b){L([]),K(!1),F({asset_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""});return}se(b.asset_model_id)},[b]);const ne=async _=>{te(!0),he(null);try{const[R,le]=await Promise.all([Zs.getById(_),ft.getByAssetType(_)]);p(R||null),g(Array.isArray(le)?le:[]),y(null)}catch(R){he("Failed to fetch asset models: "+R.message),p(null),g([]),y(null)}finally{te(!1)}},U=_=>{const{name:R,value:le}=_.target;A(fe=>({...fe,[R]:le}))},ge=async _=>{var le,fe,Re;if(_.preventDefault(),!sa.isSuperuser())return;const R=(le=me.brand_name)==null?void 0:le.trim();if(!R){he("Please enter a brand name");return}V(!0),he(null);try{await ru.create({brand_name:R,brand_code:Y(R),is_active:!0}),A({brand_name:""}),D(!1),await B()}catch(Be){he("Failed to create asset brand: "+(((Re=(fe=Be.response)==null?void 0:fe.data)==null?void 0:Re.error)||Be.message))}finally{V(!1)}},be=async()=>{try{const _=await ur.getAll();I(Array.isArray(_)?_:[])}catch{I([])}},B=async()=>{try{const _=await ru.getAll();S(Array.isArray(_)?_:[])}catch{S([])}},se=async _=>{try{const R=await Kr.getByAssetModel(_);L(Array.isArray(R)?R:[])}catch(R){he("Failed to fetch asset model attributes: "+R.message),L([])}},Ae=_=>{const{name:R,value:le,type:fe,checked:Re}=_.target;F(Be=>({...Be,[R]:fe==="checkbox"?Re:le}))},Ie=_=>{const{name:R,value:le}=_.target;G(fe=>({...fe,[R]:le}))},Me=async _=>{var R,le;if(_.preventDefault(),!!u){if(!M.asset_brand){he("Please select a brand");return}z(!0),he(null);try{const fe={asset_type:Number(u),asset_brand:Number(M.asset_brand),model_name:M.model_name||null,model_code:M.model_code||null};await ft.create(fe),G({asset_brand:"",model_name:"",model_code:""}),O(!1),await ne(u)}catch(fe){he("Failed to create asset model: "+(((le=(R=fe.response)==null?void 0:R.data)==null?void 0:le.error)||fe.message))}finally{z(!1)}}},Pe=async _=>{if(_.preventDefault(),!b){he("Please select an asset model first");return}if(!re.asset_attribute_definition){he("Please select an attribute definition");return}ye(!0),he(null);try{const R={asset_model:b.asset_model_id,asset_attribute_definition:Number(re.asset_attribute_definition),value_string:re.value_string||null,value_number:re.value_number?Number(re.value_number):null,value_bool:re.value_bool,value_date:re.value_date||null};await Kr.create(R),F({asset_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),K(!1),await se(b.asset_model_id)}catch(R){he("Failed to add model attribute value: "+R.message)}finally{ye(!1)}},ze=async(_,R)=>{if(window.confirm("Remove this attribute value from the asset model?"))try{await Kr.delete(_,R),b&&await se(b.asset_model_id)}catch(le){he("Failed to remove asset model attribute: "+le.message)}},tt=c.useMemo(()=>{const _=new Map;return(Array.isArray(N)?N:[]).forEach(R=>{_.set(R.asset_attribute_definition_id,R)}),_},[N]),Ne=c.useMemo(()=>{if(!b)return N;const _=new Set((Array.isArray(k)?k:[]).map(R=>R.asset_attribute_definition));return(Array.isArray(N)?N:[]).filter(R=>!_.has(R.asset_attribute_definition_id))},[N,k,b]),He=()=>{r("/dashboard/assets/types")},Ue=_=>{r(`/dashboard/assets/instances?typeId=${u}&modelId=${_.asset_model_id}`)},we=_=>{r(`/dashboard/assets/models/${_.asset_model_id}/compatibility?typeId=${u}`)},E=_=>{r(`/dashboard/assets/models/${_.asset_model_id}/default-composition?typeId=${u}`)};return u?t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Assets"}),t.jsxs("p",{className:"page-subtitle",children:["Select a model",m!=null&&m.asset_type_label?` for ${m.asset_type_label}`:""]})]}),de&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:de}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsxs("div",{style:{display:"flex",gap:"var(--space-3)",alignItems:"center"},children:[t.jsx("button",{onClick:He,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})}),t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Models"})]}),t.jsx("button",{onClick:()=>O(_=>!_),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Model",children:"+"})]}),w&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:Me,children:[t.jsxs("select",{name:"asset_brand",value:M.asset_brand,onChange:Ie,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select brand..."}),x.map(_=>t.jsx("option",{value:_.asset_brand_id,children:_.brand_name},_.asset_brand_id))]}),t.jsx("input",{type:"text",name:"model_name",value:M.model_name,onChange:Ie,placeholder:"Model Name",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsx("input",{type:"text",name:"model_code",value:M.model_code,onChange:Ie,placeholder:"Model Code",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:P,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>O(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[h.map(_=>t.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[t.jsx("span",{style:{fontWeight:"500"},children:d(_)||`Model ${_.asset_model_id}`}),t.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:_.model_code})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{onClick:()=>y(_),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:(b==null?void 0:b.asset_model_id)===_.asset_model_id?"var(--color-bg-secondary)":"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Attributes"}),t.jsx("button",{onClick:()=>we(_),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Compatibility"}),t.jsx("button",{onClick:()=>E(_),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Default configuration"}),t.jsx("button",{onClick:()=>Ue(_),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Instances"})]})]},_.asset_model_id)),h.length===0&&!T&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No models."})]})]}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsxs("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:["Model Attributes ",b?` ${d(b)||b.model_name||""}`:""]}),t.jsx("button",{onClick:()=>K(_=>!_),disabled:!b,style:{border:"none",background:"none",color:"var(--color-primary)",cursor:b?"pointer":"not-allowed",opacity:b?1:.6},children:"+ Add Value"})]}),t.jsx("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:b?t.jsxs(t.Fragment,{children:[ee&&t.jsxs("form",{onSubmit:Pe,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"asset_attribute_definition",value:re.asset_attribute_definition,onChange:Ae,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),Ne.map(_=>t.jsx("option",{value:_.asset_attribute_definition_id,children:_.description||`Attribute ${_.asset_attribute_definition_id}`},_.asset_attribute_definition_id))]}),(()=>{var le;const _=tt.get(Number(re.asset_attribute_definition)),R=(le=_==null?void 0:_.data_type)==null?void 0:le.toLowerCase();return R==="number"?t.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:re.value_number,onChange:Ae,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):R==="bool"||R==="boolean"?t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"value_bool",checked:re.value_bool,onChange:Ae}),"True"]}):R==="date"?t.jsx("input",{type:"date",name:"value_date",value:re.value_date,onChange:Ae,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):t.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:re.value_string,onChange:Ae,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:_e,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>K(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),k.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No model attribute values."}):k.map(_=>{const R=_.definition||tt.get(_.asset_attribute_definition),le=_.value_string??_.value_number??_.value_bool??_.value_date??"";return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(R==null?void 0:R.description)||`Attribute ${_.asset_attribute_definition}`}),t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:le===""?"No value":String(le)})]}),t.jsx("button",{onClick:()=>ze(_.asset_model,_.asset_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${_.asset_model}-${_.asset_attribute_definition}`)})]}):t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Select a model to view or add values."})})]}),sa.isSuperuser()&&t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",gridColumn:"1 / -1"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Brands"}),t.jsx("button",{onClick:()=>D(_=>!_),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},title:"Add Brand",children:"+ Add Brand"})]}),t.jsxs("div",{style:{padding:"var(--space-4)"},children:[j&&t.jsxs("form",{onSubmit:ge,children:[t.jsx("input",{type:"text",name:"brand_name",value:me.brand_name,onChange:U,placeholder:"Brand Name",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:X,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>D(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),!j&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Add brands to populate the brand selector when creating models."})]})]})]})]}):t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Assets"}),t.jsx("p",{className:"page-subtitle",children:"Select a type first"})]}),t.jsx("div",{className:"card",style:{padding:"var(--space-6)"},children:t.jsx("button",{className:"btn",onClick:He,style:{padding:"var(--space-2) var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer",width:"fit-content"},title:"Back to types","aria-label":"Back to types",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})})]})},oj=()=>{const[r,l]=c.useState([]),[u,d]=c.useState(!1),[m,p]=c.useState(null),[h,g]=c.useState(!1),[b,y]=c.useState(!1),[x,S]=c.useState({description:"",data_type:"",unit:""});c.useEffect(()=>{N()},[]);const N=async()=>{d(!0),p(null);try{const w=await ur.getAll();l(Array.isArray(w)?w:[])}catch(w){p("Failed to fetch attribute definitions: "+w.message),l([])}finally{d(!1)}},I=w=>{const{name:O,value:P}=w.target;S(z=>({...z,[O]:P}))},k=async w=>{w.preventDefault(),y(!0),p(null);try{const O={description:x.description||null,data_type:x.data_type||null,unit:x.unit||null};await ur.create(O),S({description:"",data_type:"",unit:""}),g(!1),await N()}catch(O){p("Failed to create attribute definition: "+O.message)}finally{y(!1)}},L=async w=>{if(window.confirm("Delete this attribute definition?"))try{await ur.delete(w),await N()}catch(O){p("Failed to delete attribute definition: "+O.message)}};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Asset Attribute Definitions"}),t.jsx("p",{className:"page-subtitle",children:"Manage asset attribute definitions"})]}),m&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:m}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Definitions"}),t.jsx("button",{onClick:()=>g(!h),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add"})]}),h&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:k,children:[t.jsx("input",{type:"text",name:"description",placeholder:"Description",value:x.description,onChange:I,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)"},children:[t.jsxs("select",{name:"data_type",value:x.data_type,onChange:I,style:{padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Data Type"}),t.jsx("option",{value:"string",children:"String"}),t.jsx("option",{value:"number",children:"Number"}),t.jsx("option",{value:"bool",children:"Boolean"}),t.jsx("option",{value:"date",children:"Date"})]}),t.jsx("input",{type:"text",name:"unit",placeholder:"Unit",value:x.unit,onChange:I,style:{padding:"var(--space-2)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:b,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>g(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:[u&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!u&&r.length===0&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attribute definitions."}),r.map(w=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:w.description}),t.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[w.data_type,w.unit?`  ${w.unit}`:""]})]}),t.jsx("button",{onClick:()=>L(w.asset_attribute_definition_id),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},w.asset_attribute_definition_id))]})]})]})},ij=()=>{const r=Dt(),{modelId:l}=yr(),[u]=Bs(),d=u.get("typeId"),[m,p]=c.useState(null),[h,g]=c.useState([]),[b,y]=c.useState([]),[x,S]=c.useState([]),[N,I]=c.useState([]),[k,L]=c.useState([]),[w,O]=c.useState([]),[P,z]=c.useState(!1),[M,G]=c.useState(null),[ee,K]=c.useState(""),[re,F]=c.useState(""),[T,te]=c.useState(!1),[de,he]=c.useState(!1),[_e,ye]=c.useState(!1),[j,D]=c.useState(!1),[X,V]=c.useState(""),[me,A]=c.useState(""),[Y,ne]=c.useState(1),[U,ge]=c.useState(1),be=c.useRef(null),B=sa.isSuperuser(),se=()=>{if(d){r(`/dashboard/assets/models?typeId=${d}`);return}r(-1)},Ae=c.useCallback(async()=>{if(l){z(!0),G(null);try{const[je,$e,pt,at,_t,jt,Ot]=await Promise.all([ft.getById(l),ft.getCompatibleStockItemModels(l),ft.getCompatibleConsumableModels(l),es.getAll(),ts.getAll(),ft.getDefaultStockItems(l),ft.getDefaultConsumables(l)]);p(je||null),g(Array.isArray($e)?$e:[]),y(Array.isArray(pt)?pt:[]),L(Array.isArray(at)?at:[]),O(Array.isArray(_t)?_t:[]),S(Array.isArray(jt)?jt:[]),I(Array.isArray(Ot)?Ot:[])}catch(je){G("Failed to fetch compatibility: "+je.message)}finally{z(!1)}}},[l]);c.useEffect(()=>{Ae()},[Ae]);const Ie=c.useMemo(()=>new Set((Array.isArray(h)?h:[]).map(je=>je.stock_item_model_id)),[h]),Me=c.useMemo(()=>new Set((Array.isArray(b)?b:[]).map(je=>je.consumable_model_id)),[b]),Pe=c.useMemo(()=>(Array.isArray(k)?k:[]).filter(je=>!Ie.has(je.stock_item_model_id)),[k,Ie]),ze=c.useMemo(()=>(Array.isArray(w)?w:[]).filter(je=>!Me.has(je.consumable_model_id)),[w,Me]),tt=async()=>{if(ee){G(null);try{await ft.addCompatibleStockItemModel(l,Number(ee)),K(""),te(!1),await Ae()}catch(je){G("Failed to add compatible stock item model: "+je.message)}}},Ne=async je=>{G(null);try{await ft.removeCompatibleStockItemModel(l,je),await Ae()}catch($e){G("Failed to remove compatible stock item model: "+$e.message)}},He=async()=>{if(re){G(null);try{await ft.addCompatibleConsumableModel(l,Number(re)),F(""),he(!1),await Ae()}catch(je){G("Failed to add compatible consumable model: "+je.message)}}},Ue=async je=>{G(null);try{await ft.removeCompatibleConsumableModel(l,je),await Ae()}catch($e){G("Failed to remove compatible consumable model: "+$e.message)}},we=c.useMemo(()=>new Set(x.map(je=>je.stock_item_model)),[x]),E=c.useMemo(()=>new Set(N.map(je=>je.consumable_model)),[N]),_=c.useMemo(()=>(Array.isArray(k)?k:[]).filter(je=>!we.has(je.stock_item_model_id)),[k,we]),R=c.useMemo(()=>(Array.isArray(w)?w:[]).filter(je=>!E.has(je.consumable_model_id)),[w,E]),le=async()=>{if(X){G(null);try{await ft.addDefaultStockItem(l,Number(X),Y),V(""),ne(1),ye(!1),await Ae()}catch(je){G("Failed to add default stock item: "+je.message)}}},fe=async je=>{G(null);try{await ft.removeDefaultStockItem(je),await Ae()}catch($e){G("Failed to remove default stock item: "+$e.message)}},Re=async()=>{if(me){G(null);try{await ft.addDefaultConsumable(l,Number(me),U),A(""),ge(1),D(!1),await Ae()}catch(je){G("Failed to add default consumable: "+je.message)}}},Be=async je=>{G(null);try{await ft.removeDefaultConsumable(je),await Ae()}catch($e){G("Failed to remove default consumable: "+$e.message)}};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Assets"}),t.jsxs("p",{className:"page-subtitle",children:["Compatibility ",m!=null&&m.model_name?` ${m.model_name}`:""]})]}),M&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:M}),t.jsx("div",{className:"card",style:{padding:"var(--space-4)",marginBottom:"var(--space-4)",display:"flex",justifyContent:"space-between",gap:"var(--space-3)"},children:t.jsx("button",{onClick:se,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Compatible Stock Item Models"}),B&&!T&&t.jsx("button",{onClick:()=>te(!0),style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add compatible model"})]}),B&&T&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsxs("select",{value:ee,onChange:je=>K(je.target.value),style:{flex:1,padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select stock item model..."}),Pe.map(je=>t.jsx("option",{value:je.stock_item_model_id,children:je.model_name||`Model ${je.stock_item_model_id}`},je.stock_item_model_id))]}),t.jsx("button",{onClick:tt,disabled:!ee||P,style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add"}),t.jsx("button",{onClick:()=>{te(!1),K("")},style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[(Array.isArray(h)?h:[]).map(je=>t.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[t.jsx("span",{style:{fontWeight:"500"},children:je.model_name}),t.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:je.model_code})]}),B&&t.jsx("button",{onClick:()=>Ne(je.stock_item_model_id),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},je.stock_item_model_id)),h.length===0&&!P&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No compatible stock item models."})]})]}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Compatible Consumable Models"}),B&&!de&&t.jsx("button",{onClick:()=>he(!0),style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add compatible model"})]}),B&&de&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsxs("select",{value:re,onChange:je=>F(je.target.value),style:{flex:1,padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select consumable model..."}),ze.map(je=>t.jsx("option",{value:je.consumable_model_id,children:je.model_name||`Model ${je.consumable_model_id}`},je.consumable_model_id))]}),t.jsx("button",{onClick:He,disabled:!re||P,style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add"}),t.jsx("button",{onClick:()=>{he(!1),F("")},style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[(Array.isArray(b)?b:[]).map(je=>t.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[t.jsx("span",{style:{fontWeight:"500"},children:je.model_name}),t.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:je.model_code})]}),B&&t.jsx("button",{onClick:()=>Ue(je.consumable_model_id),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},je.consumable_model_id)),b.length===0&&!P&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No compatible consumable models."})]})]})]}),t.jsx("div",{ref:be}),t.jsx("h2",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",marginTop:"var(--space-6)",marginBottom:"var(--space-4)"},children:"Default Composition (Included with new assets)"}),t.jsx("p",{style:{color:"var(--color-text-secondary)",marginBottom:"var(--space-4)",fontSize:"var(--font-size-sm)"},children:"These items will be automatically created and linked to new assets of this model when added via an attribution order."}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Default Stock Items"}),B&&!_e&&t.jsx("button",{onClick:()=>ye(!0),style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add default item"})]}),B&&_e&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",alignItems:"center"},children:[t.jsxs("select",{value:X,onChange:je=>V(je.target.value),style:{flex:1,padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select stock item model..."}),_.map(je=>t.jsx("option",{value:je.stock_item_model_id,children:je.model_name||`Model ${je.stock_item_model_id}`},je.stock_item_model_id))]}),t.jsx("input",{type:"number",min:"1",value:Y,onChange:je=>ne(Number(je.target.value)),style:{width:"60px",padding:"var(--space-2)"},placeholder:"Qty"}),t.jsx("button",{onClick:le,disabled:!X||P,style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add"}),t.jsx("button",{onClick:()=>{ye(!1),V(""),ne(1)},style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[x.map(je=>t.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[t.jsx("span",{style:{fontWeight:"500"},children:je.stock_item_model_name}),t.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:["Qty: ",je.quantity]})]}),B&&t.jsx("button",{onClick:()=>fe(je.id),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},je.id)),x.length===0&&!P&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No default stock items defined."})]})]}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Default Consumables"}),B&&!j&&t.jsx("button",{onClick:()=>D(!0),style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add default item"})]}),B&&j&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",alignItems:"center"},children:[t.jsxs("select",{value:me,onChange:je=>A(je.target.value),style:{flex:1,padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select consumable model..."}),R.map(je=>t.jsx("option",{value:je.consumable_model_id,children:je.model_name||`Model ${je.consumable_model_id}`},je.consumable_model_id))]}),t.jsx("input",{type:"number",min:"1",value:U,onChange:je=>ge(Number(je.target.value)),style:{width:"60px",padding:"var(--space-2)"},placeholder:"Qty"}),t.jsx("button",{onClick:Re,disabled:!me||P,style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add"}),t.jsx("button",{onClick:()=>{D(!1),A(""),ge(1)},style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[N.map(je=>t.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[t.jsx("span",{style:{fontWeight:"500"},children:je.consumable_model_name}),t.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:["Qty: ",je.quantity]})]}),B&&t.jsx("button",{onClick:()=>Be(je.id),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},je.id)),N.length===0&&!P&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No default consumables defined."})]})]})]})]})},Bh=()=>{const r=Dt(),{modelId:l}=yr(),[u]=Bs(),d=u.get("typeId")||"",[m,p]=c.useState(null),[h,g]=c.useState([]),[b,y]=c.useState([]),[x,S]=c.useState([]),[N,I]=c.useState([]),[k,L]=c.useState([]),[w,O]=c.useState([]),[P,z]=c.useState([]),[M,G]=c.useState([]),[ee,K]=c.useState(new Set),[re,F]=c.useState(new Set),[T,te]=c.useState(d),[de,he]=c.useState(l?[Number(l)]:[]);c.useEffect(()=>{if(l){const we=Number(l);he([we]),console.log("Auto-selecting modelId:",we)}},[l]);const[_e,ye]=c.useState(""),[j,D]=c.useState(""),[X,V]=c.useState(1),[me,A]=c.useState(""),[Y,ne]=c.useState(""),[U,ge]=c.useState(1),[be,B]=c.useState(!1),[se,Ae]=c.useState(null),[Ie,Me]=c.useState(sa.isSuperuser());c.useEffect(()=>{Me(sa.isSuperuser())},[]),c.useEffect(()=>{(async()=>{B(!0),Ae(null);try{const[E,_,R,le,fe]=await Promise.all([Zs.getAll(),Js.getAll(),Ks.getAll(),es.getAll(),ts.getAll()]);if(g((E==null?void 0:E.results)||E||[]),S((_==null?void 0:_.results)||_||[]),O((R==null?void 0:R.results)||R||[]),L((le==null?void 0:le.results)||le||[]),G((fe==null?void 0:fe.results)||fe||[]),l){const[Re,Be,je]=await Promise.all([ft.getById(l),ft.getDefaultStockItems(l),ft.getDefaultConsumables(l)]);p(Re),K(new Set((Be||[]).map($e=>$e.stock_item_model))),F(new Set((je||[]).map($e=>$e.consumable_model)))}}catch{Ae("Failed to fetch initial data")}finally{B(!1)}})()},[l]),c.useEffect(()=>{(async()=>{if(!_e){I([]),D("");return}B(!0),Ae(null);try{const E=await es.getByStockItemType(_e),_=(E==null?void 0:E.results)||E||[];I(Array.isArray(_)?_:[]),D("")}catch{Ae("Failed to fetch stock item models")}finally{B(!1)}})()},[_e]),c.useEffect(()=>{(async()=>{if(!me){z([]),ne("");return}B(!0),Ae(null);try{const E=await ts.getByConsumableType(me),_=(E==null?void 0:E.results)||E||[];z(Array.isArray(_)?_:[]),ne("")}catch{Ae("Failed to fetch consumable models")}finally{B(!1)}})()},[me]),c.useEffect(()=>{(async()=>{if(!T){y([]),he([]);return}B(!0),Ae(null);try{const E=await ft.getByAssetType(T),_=(E==null?void 0:E.results)||E||[];y(Array.isArray(_)?_:[]),he([])}catch{Ae("Failed to fetch asset models")}finally{B(!1)}})()},[T]);const Pe=we=>{he(E=>E.includes(we)?E.filter(_=>_!==we):[...E,we])};c.useMemo(()=>{const we=new Set(de);return b.filter(E=>we.has(E.asset_model_id))},[b,de]);const ze=async()=>{const we=l?[Number(l)]:de;if(!(!j||we.length===0)){B(!0),Ae(null);try{for(const E of we)await ft.addDefaultStockItem(E,Number(j),X);l&&K(E=>new Set([...E,Number(j)])),D(""),V(1)}catch{Ae("Failed to insert default stock items")}finally{B(!1)}}},tt=async()=>{const we=l?[Number(l)]:de;if(!(!Y||we.length===0)){B(!0),Ae(null);try{for(const E of we)await ft.addDefaultConsumable(E,Number(Y),U);l&&F(E=>new Set([...E,Number(Y)])),ne(""),ge(1)}catch{Ae("Failed to insert default consumables")}finally{B(!1)}}},Ne=c.useMemo(()=>l?x.filter(we=>{const E=k.filter(_=>_.stock_item_type===we.stock_item_type_id);return E.length===0?!1:E.some(_=>!ee.has(_.stock_item_model_id))}):x,[x,k,ee,l]),He=c.useMemo(()=>l?w.filter(we=>{const E=M.filter(_=>_.consumable_type===we.consumable_type_id);return E.length===0?!1:E.some(_=>!re.has(_.consumable_model_id))}):w,[w,M,re,l]),Ue=()=>{if(l){r(`/dashboard/assets/models/${l}/compatibility?typeId=${d}`);return}if(T){r(`/dashboard/assets/models?typeId=${T}`);return}r("/dashboard/assets/models")};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Assets"}),t.jsxs("p",{className:"page-subtitle",children:["Default composition ",m?` ${m.model_name}`:" Select asset type + asset model(s), then choose stock/consumable models"]})]}),se&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:se}),!l&&t.jsx("div",{className:"card",style:{padding:"var(--space-4)",marginBottom:"var(--space-4)"},children:t.jsxs("div",{style:{display:"flex",gap:"var(--space-3)",alignItems:"center",flexWrap:"wrap"},children:[t.jsx("button",{onClick:Ue,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})}),t.jsxs("div",{style:{minWidth:"260px"},children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"4px"},children:"Asset Type"}),t.jsxs("select",{value:T,onChange:we=>te(we.target.value),style:{width:"100%",padding:"var(--space-2)"},disabled:be,children:[t.jsx("option",{value:"",children:"Select type..."}),h.map(we=>t.jsx("option",{value:we.asset_type_id,children:we.asset_type_label||`Type ${we.asset_type_id}`},we.asset_type_id))]})]})]})}),l&&t.jsx("div",{className:"card",style:{padding:"var(--space-4)",marginBottom:"var(--space-4)"},children:t.jsxs("div",{style:{display:"flex",gap:"var(--space-3)",alignItems:"center"},children:[t.jsx("button",{onClick:Ue,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back to Compatibility","aria-label":"Back to Compatibility",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})}),t.jsxs("div",{style:{fontWeight:"500"},children:["Adding to: ",t.jsx("span",{style:{color:"var(--color-primary)"},children:m==null?void 0:m.model_name})]})]})}),(T||l)&&t.jsxs("div",{style:{display:"grid",gridTemplateColumns:l?"1fr":"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[!l&&t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",minHeight:0},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Target Asset Model(s)"}),t.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[de.length," selected"]})]}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[b.map(we=>t.jsxs("label",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",gap:"var(--space-3)",alignItems:"center",borderBottom:"1px solid var(--color-border)",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",checked:de.includes(we.asset_model_id),onChange:()=>Pe(we.asset_model_id)}),t.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[t.jsx("span",{style:{fontWeight:"500"},children:we.model_name||`Model ${we.asset_model_id}`}),t.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:we.model_code||""})]})]},we.asset_model_id)),b.length===0&&!be&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No models for this type."})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",minHeight:0},children:[t.jsxs("div",{className:"card",style:{padding:"var(--space-4)"},children:[t.jsx("div",{style:{fontWeight:600,marginBottom:"var(--space-3)"},children:"Add default stock item models"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"var(--space-3)"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"4px"},children:"Stock Item Type"}),t.jsxs("select",{value:_e,onChange:we=>ye(we.target.value),style:{width:"100%",padding:"var(--space-2)"},disabled:be,children:[t.jsx("option",{value:"",children:"Select type..."}),Ne.map(we=>t.jsx("option",{value:we.stock_item_type_id,children:we.stock_item_type_label||`Type ${we.stock_item_type_id}`},we.stock_item_type_id))]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"4px"},children:"Stock Item Model"}),t.jsxs("select",{value:j,onChange:we=>D(we.target.value),style:{width:"100%",padding:"var(--space-2)"},disabled:be||!_e,children:[t.jsx("option",{value:"",children:"Select model..."}),N.filter(we=>!ee.has(we.stock_item_model_id)).map(we=>t.jsx("option",{value:we.stock_item_model_id,children:we.model_name||`Model ${we.stock_item_model_id}`},we.stock_item_model_id))]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"4px"},children:"Qty"}),t.jsx("input",{type:"number",min:"1",value:X,onChange:we=>V(Number(we.target.value)),style:{width:"100%",padding:"var(--space-2)"}})]}),t.jsx("button",{onClick:ze,disabled:!j||(l?!1:de.length===0)||be,style:{padding:"var(--space-2) var(--space-3)",border:"none",background:"var(--color-primary)",color:"white",borderRadius:"var(--radius-sm)",cursor:!j||!l&&de.length===0||be?"not-allowed":"pointer",opacity:!j||!l&&de.length===0||be?.7:1,width:"100%"},title:!j||!l&&de.length===0?"Select a stock model":void 0,children:"Add to selected"})]})]}),t.jsxs("div",{className:"card",style:{padding:"var(--space-4)"},children:[t.jsx("div",{style:{fontWeight:600,marginBottom:"var(--space-3)"},children:"Add default consumable models"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"var(--space-3)"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"4px"},children:"Consumable Type"}),t.jsxs("select",{value:me,onChange:we=>A(we.target.value),style:{width:"100%",padding:"var(--space-2)"},disabled:be,children:[t.jsx("option",{value:"",children:"Select type..."}),He.map(we=>t.jsx("option",{value:we.consumable_type_id,children:we.consumable_type_label||`Type ${we.consumable_type_id}`},we.consumable_type_id))]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"4px"},children:"Consumable Model"}),t.jsxs("select",{value:Y,onChange:we=>ne(we.target.value),style:{width:"100%",padding:"var(--space-2)"},disabled:be||!me,children:[t.jsx("option",{value:"",children:"Select model..."}),P.filter(we=>!re.has(we.consumable_model_id)).map(we=>t.jsx("option",{value:we.consumable_model_id,children:we.model_name||`Model ${we.consumable_model_id}`},we.consumable_model_id))]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"4px"},children:"Qty"}),t.jsx("input",{type:"number",min:"1",value:U,onChange:we=>ge(Number(we.target.value)),style:{width:"100%",padding:"var(--space-2)"}})]}),t.jsx("button",{onClick:tt,disabled:!Y||(l?!1:de.length===0)||be,style:{padding:"var(--space-2) var(--space-3)",border:"none",background:"var(--color-primary)",color:"white",borderRadius:"var(--radius-sm)",cursor:!Y||!l&&de.length===0||be?"not-allowed":"pointer",opacity:!Y||!l&&de.length===0||be?.7:1,width:"100%"},title:!Y||!l&&de.length===0?"Select a consumable model":void 0,children:"Add to selected"})]})]})]})]})]})},cj=()=>{const{user:r,isSuperuser:l}=fs(),u=Dt(),[d,m]=c.useState([]),[p,h]=c.useState([]),[g,b]=c.useState(!0),[y,x]=c.useState(""),[S,N]=c.useState(!1),[I,k]=c.useState(null),[L,w]=c.useState(""),[O,P]=c.useState(!1),[z,M]=c.useState([]),[G,ee]=c.useState(!1),[K,re]=c.useState(""),[F,T]=c.useState(""),[te,de]=c.useState(null),[he,_e]=c.useState([]),[ye,j]=c.useState(""),[D,X]=c.useState(!1),[V,me]=c.useState("start_datetime"),[A,Y]=c.useState("desc"),ne=c.useMemo(()=>{var _;return l?!0:((_=r==null?void 0:r.roles)==null?void 0:_.some(R=>R.role_code==="maintenance_chief"||R.role_code==="exploitation_chief"))||!1},[l,r]);c.useMemo(()=>{var _;return((_=r==null?void 0:r.roles)==null?void 0:_.some(R=>R.role_code==="maintenance_technician"))||!1},[r]),c.useEffect(()=>{U(),ne&&(ge(),be())},[ne]);const U=async()=>{try{b(!0);const _=await Zr.getAll();m(_)}catch(_){x("Failed to load maintenances"),console.error(_)}finally{b(!1)}},ge=async()=>{try{const _=await _n.getAll({role:"maintenance_technician"});h(_)}catch(_){console.error("Failed to load technicians",_)}},be=async()=>{try{const _=await Ns.getAll();M(Array.isArray(_)?_:[])}catch(_){console.error("Failed to load assets",_),M([])}},B=()=>{x(""),re(""),w(""),T(""),de(null),_e([]),j(""),ee(!0)},se=_=>{const R=((_==null?void 0:_.room_type_code)||"").toUpperCase(),le=((_==null?void 0:_.room_type_label)||"").toLowerCase();return R&&["MR","MAINTENANCE","MAINT"].includes(R)?!0:le.includes("maintenance")},Ae=async()=>{try{const _=await qs.getAll(),R=(Array.isArray(_)?_:[]).filter(se);_e(R)}catch(_){console.error(_),_e([])}},Ie=async _=>{var R,le;if(_.preventDefault(),!K){x("Please select an asset");return}if(!L){x("Please select a technician");return}P(!0);try{const fe={asset_id:K,technician_person_id:L,description:F};if(te&&!se(te)){if(!ye){x("Please select the maintenance room to move the asset to"),P(!1);return}fe.destination_room_id=Number(ye)}await Zr.createDirect(fe),ee(!1),U()}catch(fe){const Re=((le=(R=fe==null?void 0:fe.response)==null?void 0:R.data)==null?void 0:le.error)||(fe==null?void 0:fe.message)||"Failed to create maintenance";x(typeof Re=="string"?Re:"Failed to create maintenance")}finally{P(!1)}},Me=_=>{k(_),w(_.performed_by_person||""),N(!0)},Pe=async _=>{if(_.preventDefault(),!!I){P(!0);try{await Zr.update(I.maintenance_id,{...I,performed_by_person:L||null}),N(!1),U()}catch(R){x("Failed to assign technician"),console.error(R)}finally{P(!1)}}},ze=async _=>{var R,le;if(window.confirm("Are you sure you want to cancel this maintenance? This will delete it from the database."))try{b(!0),await Zr.delete(_),U()}catch(fe){const Re=((le=(R=fe==null?void 0:fe.response)==null?void 0:R.data)==null?void 0:le.error)||(fe==null?void 0:fe.message)||"Failed to cancel maintenance";x(typeof Re=="string"?Re:"Failed to cancel maintenance")}finally{b(!1)}},tt=_=>_?new Date(_).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",Ne=_=>(_==null?void 0:_.asset_name)||(_==null?void 0:_.stock_item_name)||(_==null?void 0:_.consumable_name)||(_!=null&&_.asset?`Asset ${_.asset}`:_!=null&&_.stock_item?`Stock Item ${_.stock_item}`:_!=null&&_.consumable?`Consumable ${_.consumable}`:"Unknown"),He=(_,R)=>{switch(R){case"maintenance_id":return Number((_==null?void 0:_.maintenance_id)??0);case"asset":return(Ne(_)||"").toString().toLowerCase();case"description":return((_==null?void 0:_.description)||"").toString().toLowerCase();case"maintenance_status":return((_==null?void 0:_.maintenance_status)||"").toString().toLowerCase();case"start_datetime":{const le=_!=null&&_.start_datetime?new Date(_.start_datetime).getTime():null;return Number.isFinite(le)?le:null}case"end_datetime":{const le=_!=null&&_.end_datetime?new Date(_.end_datetime).getTime():null;return Number.isFinite(le)?le:null}case"performed_by_person_name":return((_==null?void 0:_.performed_by_person_name)||"").toString().toLowerCase();default:return""}},Ue=c.useMemo(()=>{const _=Array.isArray(d)?d:[],R=A==="asc"?1:-1;return[..._].sort((le,fe)=>{const Re=He(le,V),Be=He(fe,V);if(Re==null&&Be==null)return 0;if(Re==null)return 1;if(Be==null)return-1;if(typeof Re=="number"&&typeof Be=="number")return Re===Be?0:Re>Be?R:-R;const je=String(Re),$e=String(Be),pt=je.localeCompare($e);return pt===0?0:pt*R})},[d,A,V]),we=_=>{if(V===_){Y(R=>R==="asc"?"desc":"asc");return}me(_),Y("asc")},E=_=>V!==_?"":A==="asc"?" ":" ";return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",children:[t.jsx("h1",{className:"page-title",children:"Maintenance"}),t.jsx("p",{className:"page-subtitle",children:"Manage maintenance tasks and assignments"})]}),t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsxs("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"nowrap",gap:"0.75rem"},children:[t.jsx("h2",{className:"card-title",style:{margin:0,flex:"1 1 auto",minWidth:0},children:ne?"All Maintenances":"My Maintenances"}),ne&&t.jsx("button",{className:"btn btn-sm btn-primary",onClick:B,style:{width:"auto",whiteSpace:"nowrap",flex:"0 0 auto"},children:"Create Maintenance"})]})}),t.jsx("div",{className:"table-container",children:g?t.jsxs("div",{className:"empty-state",children:[t.jsx("div",{className:"loading-spinner",style:{margin:"0 auto"}}),t.jsx("p",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading maintenances..."})]}):y?t.jsx("div",{className:"empty-state",children:t.jsx("p",{className:"empty-state-title",style:{color:"var(--color-error)"},children:y})}):d.length===0?t.jsx("div",{className:"empty-state",children:t.jsx("h3",{className:"empty-state-title",children:"No maintenances found"})}):t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsxs("th",{style:{cursor:"pointer"},onClick:()=>we("maintenance_id"),children:["ID",E("maintenance_id")]}),t.jsxs("th",{style:{cursor:"pointer"},onClick:()=>we("asset"),children:["Asset",E("asset")]}),t.jsxs("th",{style:{cursor:"pointer"},onClick:()=>we("description"),children:["Description",E("description")]}),ne&&t.jsxs("th",{style:{cursor:"pointer"},onClick:()=>we("maintenance_status"),children:["Status",E("maintenance_status")]}),t.jsxs("th",{style:{cursor:"pointer"},onClick:()=>we("start_datetime"),children:["Start Date",E("start_datetime")]}),t.jsxs("th",{style:{cursor:"pointer"},onClick:()=>we("end_datetime"),children:["End Date",E("end_datetime")]}),t.jsxs("th",{style:{cursor:"pointer"},onClick:()=>we("performed_by_person_name"),children:["Technician",E("performed_by_person_name")]}),t.jsx("th",{children:"Actions"})]})}),t.jsx("tbody",{children:Ue.map(_=>{var R;return t.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>u(`/dashboard/maintenances/${_.maintenance_id}/steps`),children:[t.jsx("td",{children:_.maintenance_id}),t.jsx("td",{children:Ne(_)}),t.jsx("td",{children:_.description}),ne&&t.jsx("td",{children:_.maintenance_status?t.jsx("span",{className:"badge badge-info",children:_.maintenance_status}):t.jsx("span",{className:"badge badge-warning",children:"-"})}),t.jsx("td",{children:tt(_.start_datetime)}),t.jsx("td",{children:tt(_.end_datetime)}),t.jsx("td",{children:_.performed_by_person_name?t.jsx("span",{className:"badge badge-info",children:_.performed_by_person_name}):t.jsx("span",{className:"badge badge-warning",children:"Unassigned"})}),t.jsx("td",{children:t.jsxs("div",{className:"d-flex align-items-center",children:[!_.performed_by_person&&ne&&t.jsx("button",{className:"btn btn-sm btn-secondary",onClick:le=>{le.stopPropagation(),Me(_)},children:"Assign"}),!_.has_steps&&!_.has_external_maintenances&&(l||ne||_.performed_by_person===((R=r==null?void 0:r.person)==null?void 0:R.person_id))&&t.jsx("button",{className:"btn btn-sm btn-danger ml-2",onClick:le=>{le.stopPropagation(),ze(_.maintenance_id)},style:{marginLeft:"0.5rem"},children:"Cancel maintenance"})]})})]},_.maintenance_id)})})]})})]}),S&&t.jsx("div",{className:"modal-overlay",onClick:()=>N(!1),children:t.jsxs("div",{className:"modal",onClick:_=>_.stopPropagation(),children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Assign Technician"}),t.jsx("button",{className:"modal-close",onClick:()=>N(!1),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsxs("form",{onSubmit:Pe,children:[t.jsxs("div",{className:"modal-body",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Maintenance Task"}),t.jsxs("div",{className:"form-input",style:{backgroundColor:"#f5f5f5"},children:[(I==null?void 0:I.description)||"No description","(",I==null?void 0:I.asset_name,")"]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"technician",className:"form-label",children:"Technician"}),t.jsxs("select",{id:"technician",className:"form-input",value:L,onChange:_=>w(_.target.value),children:[t.jsx("option",{value:"",children:"-- Select Technician --"}),p.map(_=>t.jsxs("option",{value:_.person_id,children:[_.first_name," ",_.last_name]},_.person_id))]})]})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>N(!1),children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:O,children:O?"Saving...":"Save Assignment"})]})]})]})}),G&&t.jsx("div",{className:"modal-overlay",onClick:()=>!O&&ee(!1),children:t.jsxs("div",{className:"modal",onClick:_=>_.stopPropagation(),style:{maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Create Maintenance"}),t.jsx("button",{className:"modal-close",onClick:()=>!O&&ee(!1),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsxs("form",{onSubmit:Ie,style:{display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"modal-body",style:{overflowY:"auto",flex:1,minHeight:0},children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"asset",className:"form-label",children:"Asset"}),t.jsxs("select",{id:"asset",className:"form-input",value:K,onChange:async _=>{const R=_.target.value;if(re(R),de(null),j(""),!!R)try{X(!0);const le=await Ns.getCurrentRoom(R),fe=(le==null?void 0:le.room)||null;de(fe),fe&&!se(fe)&&await Ae()}catch(le){console.error(le),de(null)}finally{X(!1)}},children:[t.jsx("option",{value:"",children:"-- Select Asset --"}),z.map(_=>t.jsx("option",{value:_.asset_id,children:_.asset_name?`${_.asset_name} (#${_.asset_id})`:`Asset #${_.asset_id}`},_.asset_id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Asset Current Room"}),t.jsx("div",{className:"form-input",style:{backgroundColor:"var(--color-bg-secondary)",color:"var(--color-text-primary)"},children:D?"Loading...":te?`${te.room_name}${te.room_type_label?` (${te.room_type_label})`:""}`:"-"})]}),te&&!se(te)&&t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Move asset to maintenance room"}),t.jsxs("select",{className:"form-input",value:ye,onChange:_=>j(_.target.value),children:[t.jsx("option",{value:"",children:"-- Select Maintenance Room --"}),he.map(_=>t.jsxs("option",{value:_.room_id,children:[_.room_name,_.room_type_label?` (${_.room_type_label})`:""]},_.room_id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"technician_create",className:"form-label",children:"Technician"}),t.jsxs("select",{id:"technician_create",className:"form-input",value:L,onChange:_=>w(_.target.value),children:[t.jsx("option",{value:"",children:"-- Select Technician --"}),p.map(_=>t.jsxs("option",{value:_.person_id,children:[_.first_name," ",_.last_name]},_.person_id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"description_create",className:"form-label",children:"Description"}),t.jsx("textarea",{id:"description_create",className:"form-input",rows:4,value:F,onChange:_=>T(_.target.value)})]})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>!O&&ee(!1),children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:O,children:O?"Creating...":"Create"})]})]})]})})]})},dj=()=>{var ys,Ga,bs;const r=Dt(),l=qa(),[u]=Bs(),d=u.get("typeId"),m=u.get("modelId"),p=l.pathname.endsWith("/instances"),h=J=>[J==null?void 0:J.brand_name,J==null?void 0:J.model_name].filter(Boolean).join(" "),[g,b]=c.useState([]),[y,x]=c.useState([]),[S,N]=c.useState([]),[I,k]=c.useState([]),[L,w]=c.useState([]),[O,P]=c.useState([]),[z,M]=c.useState([]),[G,ee]=c.useState([]),[K,re]=c.useState([]),[F,T]=c.useState([]),[te,de]=c.useState(!1),[he,_e]=c.useState(null),[ye,j]=c.useState(!1),[D,X]=c.useState(null),[V,me]=c.useState(null),[A,Y]=c.useState(""),[ne,U]=c.useState(""),[ge,be]=c.useState(!1),[B,se]=c.useState(!1),[Ae,Ie]=c.useState(null),[Me,Pe]=c.useState(null),[ze,tt]=c.useState({person:"",start_datetime:"",condition_on_assignment:"Good"}),[Ne,He]=c.useState(!1),[Ue,we]=c.useState(!1),[E,_]=c.useState(!1),[R,le]=c.useState(null),[fe,Re]=c.useState({stock_item_attribute_definition:"",is_mandatory:!1,default_value:""}),[Be,je]=c.useState({stock_item_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[$e,pt]=c.useState(!1),[at,_t]=c.useState(!1),[jt,Ot]=c.useState(!1),[Qe,Tt]=c.useState(null),[Ge,St]=c.useState(null),[Ye,vt]=c.useState({stock_item_type_label:"",stock_item_type_code:""}),[De,fa]=c.useState({model_name:"",model_code:"",stock_item_brand:"",stock_item_type:"",release_year:"",discontinued_year:"",is_active:!0,notes:"",warranty_expiry_in_months:""}),[dt,Jt]=c.useState({stock_item_name:"",stock_item_inventory_number:"",stock_item_status:"active",stock_item_warranty_expiry_in_months:"",stock_item_name_in_administrative_certificate:"",destruction_certificate_id:"",maintenance_step_id:null}),[ra,ha]=c.useState(null),[nt,It]=c.useState(!1);c.useEffect(()=>{ja(),Lt(),La(),_a(),va(),Ut()},[]),c.useEffect(()=>{p&&(!d||!m)&&r("/dashboard/stock-items/types",{replace:!0})},[p,d,m,r]);const _a=async()=>{try{const J=await qs.getAll();M(Array.isArray(J)?J:[])}catch(J){console.error("Failed to fetch rooms:",J),M([])}},va=async()=>{try{const J=await _n.getAll();w(Array.isArray(J)?J:[])}catch(J){console.error("Failed to fetch persons:",J),w([])}},Ut=async()=>{try{const J=await Xd.getAll();P(Array.isArray(J)?J:[])}catch(J){console.error("Failed to fetch stock item assignments:",J),P([])}};c.useEffect(()=>{(async()=>{if(!(!ye||!D))try{const Se=await Vr.getCurrentRoom(D.stock_item_id),Te=(Se==null?void 0:Se.room_id)??null;me(Te);const Je=z.find(wt=>wt.room_id===Te);Y((Je==null?void 0:Je.room_name)||(Te?`Room ${Te}`:"Unknown"))}catch(Se){console.error(Se),me(null),Y("Unknown")}})()},[ye,D,z]),c.useEffect(()=>{Qe?(Ct(Qe.stock_item_type_id),ns(Qe.stock_item_type_id),St(null),le(null),k([]),T([])):(N([]),re([]))},[Qe]),c.useEffect(()=>{if(!p||!d||!Array.isArray(g)||g.length===0)return;const J=g.find(Se=>String(Se.stock_item_type_id)===String(d))||null;J&&(Qe==null?void 0:Qe.stock_item_type_id)!==J.stock_item_type_id&&Tt(J)},[p,d,g,Qe]),c.useEffect(()=>{Ge?la(Ge.stock_item_model_id):(k([]),le(null),T([]))},[Ge]),c.useEffect(()=>{if(!p||!m||!Array.isArray(S)||S.length===0)return;const J=S.find(Se=>String(Se.stock_item_model_id)===String(m))||null;J&&(Ge==null?void 0:Ge.stock_item_model_id)!==J.stock_item_model_id&&St(J)},[p,m,S,Ge]);const ja=async()=>{de(!0),_e(null);try{const J=await Js.getAll();b(Array.isArray(J)?J:[])}catch(J){_e("Failed to fetch stock item types: "+J.message),b([])}finally{de(!1)}},Lt=async()=>{try{const J=await lu.getAll();x(Array.isArray(J)?J:[])}catch(J){console.error("Failed to fetch stock item brands:",J),x([])}},Ct=async J=>{try{const Se=await es.getByStockItemType(J);N(Array.isArray(Se)?Se:[])}catch(Se){_e("Failed to fetch stock item models: "+Se.message),N([])}};c.useEffect(()=>{R?Sa(R.stock_item_id):T([])},[R]);const Fa=c.useMemo(()=>{const J=new Map;return G.forEach(Se=>{J.set(Se.stock_item_attribute_definition_id,Se)}),J},[G]),la=async J=>{try{const Se=await Vr.getAll({stock_item_model:J});k(Array.isArray(Se)?Se:[])}catch(Se){_e("Failed to fetch stock items: "+Se.message),k([])}},La=async()=>{try{const J=await mr.getAll();ee(Array.isArray(J)?J:[])}catch(J){_e("Failed to fetch stock item attribute definitions: "+J.message),ee([])}},ns=async J=>{try{const Se=await pr.getByStockItemType(J);re(Array.isArray(Se)?Se:[])}catch(Se){_e("Failed to fetch stock item type attributes: "+Se.message),re([])}},Sa=async J=>{try{const Se=await Vd.getByStockItem(J);T(Array.isArray(Se)?Se:[])}catch(Se){_e("Failed to fetch stock item attributes: "+Se.message),T([])}},Ht=J=>{const{name:Se,value:Te}=J.target;vt(Je=>({...Je,[Se]:Te}))},ut=J=>{const{name:Se,value:Te,type:Je,checked:wt}=J.target;fa(wa=>({...wa,[Se]:Je==="checkbox"?wt:Te}))},gt=J=>{const{name:Se,value:Te}=J.target;Jt(Je=>({...Je,[Se]:Te}))},Gt=J=>{const{name:Se,value:Te,type:Je,checked:wt}=J.target;je(wa=>({...wa,[Se]:Je==="checkbox"?wt:Te}))},oa=async J=>{var Se,Te;J.preventDefault(),It(!0),_e(null);try{await Js.create(Ye),vt({stock_item_type_label:"",stock_item_type_code:""}),pt(!1),await ja()}catch(Je){_e("Failed to create stock item type: "+(((Te=(Se=Je.response)==null?void 0:Se.data)==null?void 0:Te.error)||Je.message))}finally{It(!1)}},Ts=J=>{le(J),_(!0)},Ba=()=>{_(!1),we(!1)},Ha=async J=>{var Se,Te;if(J.preventDefault(),!Qe){_e("Please select a stock item type first");return}It(!0),_e(null);try{const Je={...De,stock_item_brand:De.stock_item_brand?Number(De.stock_item_brand):null,stock_item_type:Qe.stock_item_type_id,release_year:De.release_year?Number(De.release_year):null,discontinued_year:De.discontinued_year?Number(De.discontinued_year):null,warranty_expiry_in_months:De.warranty_expiry_in_months?Number(De.warranty_expiry_in_months):null};await es.create(Je),fa({model_name:"",model_code:"",stock_item_brand:"",stock_item_type:"",release_year:"",discontinued_year:"",is_active:!0,notes:"",warranty_expiry_in_months:""}),_t(!1),await Ct(Qe.stock_item_type_id)}catch(Je){_e("Failed to create stock item model: "+(((Te=(Se=Je.response)==null?void 0:Se.data)==null?void 0:Te.error)||Je.message))}finally{It(!1)}},ia=async J=>{if(window.confirm("Are you sure you want to delete this stock item model?"))try{await es.delete(J),(Ge==null?void 0:Ge.stock_item_model_id)===J&&St(null),Qe&&await Ct(Qe.stock_item_type_id)}catch(Se){_e("Failed to delete stock item model: "+Se.message)}},Vt=async J=>{var Se;J.preventDefault(),It(!0),_e(null);try{const Te={...dt,stock_item_model:Ge.stock_item_model_id,destruction_certificate_id:dt.destruction_certificate_id?Number(dt.destruction_certificate_id):null};ra?await Vr.update(ra,Te):await Vr.create(Te),Jt({stock_item_name:"",stock_item_inventory_number:"",stock_item_status:"active",stock_item_warranty_expiry_in_months:"",stock_item_name_in_administrative_certificate:"",destruction_certificate_id:"",maintenance_step_id:null}),ha(null),Ot(!1),await la(Ge.stock_item_model_id)}catch(Te){const Je=(Se=Te.response)!=null&&Se.data?typeof Te.response.data=="object"?JSON.stringify(Te.response.data):Te.response.data:Te.message;_e(`Failed to ${ra?"update":"create"} stock item: `+Je)}finally{It(!1)}},ea=J=>{ha(J.stock_item_id),Jt({stock_item_name:J.stock_item_name||"",stock_item_inventory_number:J.stock_item_inventory_number||"",stock_item_status:J.stock_item_status||"active",stock_item_warranty_expiry_in_months:J.stock_item_warranty_expiry_in_months||"",stock_item_name_in_administrative_certificate:J.stock_item_name_in_administrative_certificate||"",destruction_certificate_id:J.destruction_certificate_id??"",maintenance_step_id:J.maintenance_step_id||null}),Ot(!0)},Qt=async J=>{if(J.preventDefault(),!R){_e("Please select a stock item first");return}if(!Be.stock_item_attribute_definition){_e("Please select an attribute definition");return}It(!0),_e(null);try{const Se={stock_item:R.stock_item_id,stock_item_attribute_definition:Number(Be.stock_item_attribute_definition),value_string:Be.value_string||null,value_number:Be.value_number?Number(Be.value_number):null,value_bool:Be.value_bool,value_date:Be.value_date||null};await Vd.create(Se),je({stock_item_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),we(!1),await Sa(R.stock_item_id)}catch(Se){_e("Failed to add stock item attribute value: "+Se.message)}finally{It(!1)}},Xt=async(J,Se)=>{if(window.confirm("Remove this attribute value from the stock item?"))try{await Vd.delete(J,Se),R&&await Sa(R.stock_item_id)}catch(Te){_e("Failed to remove stock item attribute: "+Te.message)}},ya=async J=>{if(window.confirm("Are you sure you want to delete this stock item type?"))try{await Js.delete(J),(Qe==null?void 0:Qe.stock_item_type_id)===J&&Tt(null),await ja()}catch(Se){_e("Failed to delete stock item type: "+Se.message)}},ht=async J=>{if(window.confirm("Are you sure you want to delete this stock item?"))try{await Vr.delete(J),Ge&&await la(Ge.stock_item_model_id)}catch(Se){_e("Failed to delete stock item: "+Se.message)}},Ta=J=>{const{name:Se,value:Te}=J.target;tt(Je=>({...Je,[Se]:Te}))},ga=async J=>{var Se,Te;if(J.preventDefault(),!!Ae){It(!0),_e(null);try{await Xd.create({person:ze.person,stock_item:Ae.stock_item_id,start_datetime:new Date(ze.start_datetime).toISOString(),condition_on_assignment:ze.condition_on_assignment}),se(!1),Ie(null),await Ut(),alert("Stock item assigned successfully!")}catch(Je){_e("Failed to assign stock item: "+(((Te=(Se=Je.response)==null?void 0:Se.data)==null?void 0:Te.error)||Je.message))}finally{It(!1)}}},Ia=async J=>{var Se,Te;It(!0),_e(null);try{await Xd.discharge(J),Pe(null),await Ut(),alert("Stock item discharged successfully!")}catch(Je){_e("Failed to discharge stock item: "+(((Te=(Se=Je.response)==null?void 0:Se.data)==null?void 0:Te.error)||Je.message))}finally{It(!1)}},Zt=sa.getUser(),$a=Zt==null?void 0:Zt.is_superuser,Ya=((ys=Zt==null?void 0:Zt.roles)==null?void 0:ys.some(J=>J.role_code==="stock_consumable_responsible"))||$a,zs=((Ga=Zt==null?void 0:Zt.roles)==null?void 0:Ga.some(J=>J.role_code==="exploitation_chief"))||$a,Ps=Ya,hs=Ya||zs,za=c.useMemo(()=>{const J=new Map;return O.forEach(Se=>{var Te;Se.is_active&&J.set(((Te=Se.stock_item)==null?void 0:Te.stock_item_id)??Se.stock_item,Se)}),J},[O]),Ca=J=>{X(J),me(null),Y(""),U(""),j(!0)},zt=()=>{j(!1),X(null),me(null),Y(""),U("")},Wa=async J=>{var Se,Te;if(J.preventDefault(),!(!D||!ne)){be(!0),_e(null);try{await Vr.move(D.stock_item_id,{destination_room_id:ne}),Ge&&await la(Ge.stock_item_model_id),zt()}catch(Je){_e("Failed to move stock item: "+(((Te=(Se=Je==null?void 0:Je.response)==null?void 0:Se.data)==null?void 0:Te.error)||Je.message))}finally{be(!1)}}};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsx("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("h1",{className:"page-title",children:"Stock Items Explorer"}),t.jsx("p",{className:"page-subtitle",children:"Manage stock item types, models, and inventory"})]}),p&&t.jsx("button",{type:"button",onClick:()=>{r(d?`/dashboard/stock-items/models?typeId=${d}`:"/dashboard/stock-items/types")},style:{padding:"var(--space-2) var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer",height:"fit-content"},title:"Back","aria-label":"Back",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})]})}),he&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:he}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:p?"1fr":"300px 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[!p&&t.jsxs("div",{className:"card",style:{display:"flex",flexDirection:"column",overflow:"hidden",height:"100%"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Library"}),t.jsx("button",{onClick:()=>pt(!$e),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Stock Item Type",children:"+"})]}),$e&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:oa,children:[t.jsx("input",{type:"text",name:"stock_item_type_label",value:Ye.stock_item_type_label,onChange:Ht,placeholder:"Type Name",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsx("input",{type:"text",name:"stock_item_type_code",value:Ye.stock_item_type_code,onChange:Ht,placeholder:"Code (e.g. CBL)",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:nt,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>pt(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[g.map(J=>t.jsxs("div",{children:[t.jsxs("div",{onClick:()=>Tt((Qe==null?void 0:Qe.stock_item_type_id)===J.stock_item_type_id?null:J),style:{padding:"var(--space-3) var(--space-4)",cursor:"pointer",backgroundColor:(Qe==null?void 0:Qe.stock_item_type_id)===J.stock_item_type_id?"var(--color-bg-secondary)":"transparent",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsx("span",{style:{fontWeight:"500"},children:J.stock_item_type_label}),t.jsx("button",{onClick:Se=>{Se.stopPropagation(),ya(J.stock_item_type_id)},style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]}),(Qe==null?void 0:Qe.stock_item_type_id)===J.stock_item_type_id&&t.jsxs("div",{style:{backgroundColor:"var(--color-bg-secondary)",borderBottom:"1px solid var(--color-border)"},children:[t.jsx("div",{onClick:()=>_t(!0),style:{padding:"var(--space-2) var(--space-4)",fontSize:"var(--font-size-xs)",color:"var(--color-primary)",cursor:"pointer",borderBottom:"1px dashed var(--color-border)",textAlign:"center"},children:"+ Add Model"}),S.map(Se=>t.jsxs("div",{onClick:()=>St(Se),style:{padding:"var(--space-2) var(--space-4)",paddingLeft:"var(--space-8)",cursor:"pointer",backgroundColor:(Ge==null?void 0:Ge.stock_item_model_id)===Se.stock_item_model_id?"var(--color-primary)":"transparent",color:(Ge==null?void 0:Ge.stock_item_model_id)===Se.stock_item_model_id?"white":"var(--color-text)",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"var(--font-size-sm)"},children:[t.jsx("span",{children:h(Se)||`Model ${Se.stock_item_model_id}`}),(Ge==null?void 0:Ge.stock_item_model_id)===Se.stock_item_model_id&&t.jsx("button",{onClick:Te=>{Te.stopPropagation(),ia(Se.stock_item_model_id)},style:{border:"none",background:"none",color:"white",cursor:"pointer",opacity:.8},children:""})]},Se.stock_item_model_id))]})]},J.stock_item_type_id)),g.length===0&&!te&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No stock item types."})]})]}),t.jsx("div",{className:"card",style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:at?t.jsxs("div",{style:{padding:"var(--space-6)",overflowY:"auto"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-6)"},children:[t.jsxs("h2",{children:["Add New Model for ",Qe==null?void 0:Qe.stock_item_type_label]}),t.jsx("button",{onClick:()=>_t(!1),style:{padding:"var(--space-2) var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]}),y.length===0?t.jsx("div",{style:{color:"#c33",backgroundColor:"#fee",padding:"var(--space-4)",borderRadius:"var(--radius-sm)"},children:"No stock item brands found. Please create a brand first."}):t.jsxs("form",{onSubmit:Ha,style:{maxWidth:"600px"},children:[t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Brand *"}),t.jsxs("select",{name:"stock_item_brand",value:De.stock_item_brand,onChange:ut,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"},children:[t.jsx("option",{value:"",children:"Select a brand..."}),y.map(J=>t.jsx("option",{value:J.stock_item_brand_id,children:J.brand_name},J.stock_item_brand_id))]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Model Name *"}),t.jsx("input",{type:"text",name:"model_name",value:De.model_name,onChange:ut,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Model Code *"}),t.jsx("input",{type:"text",name:"model_code",value:De.model_code,onChange:ut,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Release Year"}),t.jsx("input",{type:"number",name:"release_year",value:De.release_year,onChange:ut,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Warranty (Months)"}),t.jsx("input",{type:"number",name:"warranty_expiry_in_months",value:De.warranty_expiry_in_months,onChange:ut,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]})]}),t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Notes"}),t.jsx("textarea",{name:"notes",value:De.notes,onChange:ut,rows:"3",style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),t.jsx("div",{style:{marginBottom:"var(--space-6)"},children:t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",name:"is_active",checked:De.is_active,onChange:ut}),"Active Model"]})}),t.jsx("button",{type:"submit",disabled:nt,style:{padding:"var(--space-2) var(--space-6)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:nt?"Creating...":"Create Model"})]})]}):Ge?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsxs("h2",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",margin:0},children:[h(Ge)||Ge.model_name||""," ",t.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-md)",fontWeight:"normal"},children:["(",Ge.model_code,")"]})]}),t.jsxs("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)",marginTop:"var(--space-1)"},children:[Ge.brand_name,"  ",I.length," Items"]})]}),t.jsx("button",{onClick:()=>{ha(null),Jt({stock_item_name:"",stock_item_inventory_number:"",stock_item_status:"active",stock_item_warranty_expiry_in_months:"",stock_item_name_in_administrative_certificate:"",destruction_certificate_id:0,maintenance_step_id:null}),Ot(!0)},style:{backgroundColor:"var(--color-primary)",color:"white",border:"none",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:"pointer",fontWeight:"500"},children:"+ Add Item"})]}),t.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"var(--space-4)"},children:[jt&&t.jsxs("div",{style:{marginBottom:"var(--space-6)",padding:"var(--space-4)",backgroundColor:"var(--color-bg-secondary)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"},children:[t.jsx("div",{style:{fontWeight:"600",marginBottom:"var(--space-4)"},children:ra?"Edit Stock Item":"New Stock Item"}),t.jsxs("form",{onSubmit:Vt,children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Name"}),t.jsx("input",{type:"text",name:"stock_item_name",value:dt.stock_item_name,onChange:gt,placeholder:"Stock Item Name",style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Status"}),t.jsxs("select",{name:"stock_item_status",value:dt.stock_item_status,onChange:gt,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"},children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"}),t.jsx("option",{value:"maintenance",children:"Maintenance"}),t.jsx("option",{value:"retired",children:"Retired"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Inventory Number"}),t.jsx("input",{type:"text",name:"stock_item_inventory_number",value:dt.stock_item_inventory_number,onChange:gt,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Warranty (Months)"}),t.jsx("input",{type:"number",name:"stock_item_warranty_expiry_in_months",value:dt.stock_item_warranty_expiry_in_months,onChange:gt,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]})]}),t.jsxs("div",{style:{marginTop:"var(--space-4)",display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",style:{padding:"var(--space-2) var(--space-4)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Save Item"}),t.jsx("button",{type:"button",onClick:()=>Ot(!1),style:{padding:"var(--space-2) var(--space-4)",backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})]})]}),I.length===0?t.jsx("div",{style:{textAlign:"center",color:"var(--color-text-secondary)",padding:"var(--space-8)"},children:"No stock items found for this model."}):t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"var(--font-size-sm)"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{borderBottom:"2px solid var(--color-border)",textAlign:"left"},children:[t.jsx("th",{style:{padding:"var(--space-2)"},children:"Name"}),t.jsx("th",{style:{padding:"var(--space-2)"},children:"Inventory No."}),t.jsx("th",{style:{padding:"var(--space-2)"},children:"Status"}),t.jsx("th",{style:{padding:"var(--space-2)",textAlign:"right"},children:"Actions"})]})}),t.jsx("tbody",{children:I.map(J=>t.jsxs("tr",{onClick:()=>Ts(J),style:{borderBottom:"1px solid var(--color-border)",cursor:"pointer",backgroundColor:(R==null?void 0:R.stock_item_id)===J.stock_item_id?"var(--color-bg-secondary)":"transparent"},children:[t.jsx("td",{style:{padding:"var(--space-3) var(--space-2)"},children:t.jsx("div",{style:{fontWeight:"500"},children:J.stock_item_name||"Unnamed Item"})}),t.jsx("td",{style:{padding:"var(--space-3) var(--space-2)"},children:t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:J.stock_item_inventory_number})}),t.jsx("td",{style:{padding:"var(--space-3) var(--space-2)"},children:t.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"var(--font-size-xs)",backgroundColor:J.stock_item_status==="active"?"rgba(16, 185, 129, 0.15)":"var(--color-bg-secondary)",color:J.stock_item_status==="active"?"var(--color-success)":"var(--color-text-secondary)"},children:J.stock_item_status})}),t.jsxs("td",{style:{padding:"var(--space-3) var(--space-2)",textAlign:"right"},children:[t.jsx("button",{onClick:Se=>{Se.stopPropagation(),Ts(J)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-text-secondary)",cursor:"pointer",fontWeight:"500"},children:"Attributes"}),Ps&&t.jsx("button",{onClick:Se=>{Se.stopPropagation(),Ca(J)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-primary)",cursor:"pointer",fontWeight:"500"},children:"Move"}),hs&&(()=>{const Se=za.get(J.stock_item_id);return Se?t.jsx("button",{onClick:Te=>{Te.stopPropagation(),Pe(Se)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontWeight:"500"},children:"Discharge"}):t.jsx("button",{onClick:Te=>{Te.stopPropagation(),Ie(J);const Je=new Date,wt=Je.getTimezoneOffset()*6e4,wa=new Date(Je-wt).toISOString().slice(0,16);tt({person:"",start_datetime:wa,condition_on_assignment:J.stock_item_status==="active"?"Good":"Needs Repair"}),se(!0)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"#10b981",cursor:"pointer",fontWeight:"500"},children:"Assign"})})(),t.jsx("button",{onClick:Se=>{Se.stopPropagation(),ea(J)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-primary)",cursor:"pointer",fontWeight:"500"},children:"Edit"}),t.jsx("button",{onClick:Se=>{Se.stopPropagation(),ht(J.stock_item_id)},style:{background:"none",border:"none",color:"#c33",cursor:"pointer",fontWeight:"500"},children:"Delete"})]})]},J.stock_item_id))})]})]})]}):Qe?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:t.jsx("div",{children:t.jsx("h2",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",margin:0},children:Qe.stock_item_type_label})})}),t.jsx("div",{style:{flex:1,overflowY:"auto",padding:"var(--space-4)"},children:t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"var(--space-4)"}})})]}):t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--color-text-secondary)"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"var(--space-4)",opacity:.2},children:""}),t.jsx("p",{children:"Select a stock item model from the sidebar to view inventory."})]})})]}),E&&R&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"var(--space-4)"},children:t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"720px",maxHeight:"85vh",overflowY:"auto",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,marginBottom:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:R.stock_item_name||`Item ${R.stock_item_id}`}),t.jsxs("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)",marginTop:"var(--space-1)"},children:["Inventory: ",R.stock_item_inventory_number||"","  Status: ",R.stock_item_status||""]})]}),t.jsx("button",{type:"button",onClick:Ba,style:{border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",cursor:"pointer"},children:"Close"})]}),t.jsx("div",{style:{marginBottom:"var(--space-6)",padding:"var(--space-4)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",background:"var(--color-bg-secondary)"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:2},children:"Warranty (months)"}),t.jsx("div",{style:{fontWeight:600},children:R.stock_item_warranty_expiry_in_months??""})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:2},children:"Assigned to"}),(()=>{const J=za.get(R.stock_item_id);return t.jsx("div",{style:{fontWeight:600},children:(J==null?void 0:J.person_name)||""})})()]})]})}),t.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[t.jsx("div",{style:{fontWeight:"600"},children:"Stock Item Attributes"}),t.jsx("button",{onClick:()=>we(!Ue),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add Value"})]}),Ue&&t.jsxs("form",{onSubmit:Qt,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"stock_item_attribute_definition",value:Be.stock_item_attribute_definition,onChange:Gt,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),G.map(J=>t.jsx("option",{value:J.stock_item_attribute_definition_id,children:J.description||`Attribute ${J.stock_item_attribute_definition_id}`},J.stock_item_attribute_definition_id))]}),(()=>{var Te;const J=Fa.get(Number(Be.stock_item_attribute_definition)),Se=(Te=J==null?void 0:J.data_type)==null?void 0:Te.toLowerCase();return Se==="number"?t.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:Be.value_number,onChange:Gt,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):Se==="bool"||Se==="boolean"?t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"value_bool",checked:Be.value_bool,onChange:Gt}),"True"]}):Se==="date"?t.jsx("input",{type:"date",name:"value_date",value:Be.value_date,onChange:Gt,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):t.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:Be.value_string,onChange:Gt,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:nt,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>we(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),F.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attribute values set for this stock item."}):F.map(J=>{const Se=J.definition||Fa.get(J.stock_item_attribute_definition),Te=J.value_string??J.value_number??J.value_bool??J.value_date??"";return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(Se==null?void 0:Se.description)||`Attribute ${J.stock_item_attribute_definition}`}),t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:Te===""?"No value":String(Te)})]}),t.jsx("button",{onClick:()=>Xt(J.stock_item,J.stock_item_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${J.stock_item}-${J.stock_item_attribute_definition}`)})]})]})}),ye&&D&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"520px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,marginBottom:"var(--space-4)"},children:[t.jsxs("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:["Move Stock Item: ",D.stock_item_name||`Item ${D.stock_item_id}`]}),t.jsx("button",{type:"button",onClick:()=>!ge&&zt(),style:{border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",cursor:"pointer"},children:"Close"})]}),t.jsxs("form",{onSubmit:Wa,children:[t.jsxs("div",{style:{marginBottom:"var(--space-6)"},children:[t.jsxs("div",{style:{marginBottom:"var(--space-3)",padding:"var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"2px"},children:"Current room"}),t.jsx("div",{style:{fontWeight:600},children:A||"Unknown"})]}),t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Destination room"}),t.jsxs("select",{value:ne,onChange:J=>U(J.target.value),required:!0,disabled:ge,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[t.jsx("option",{value:"",children:"Select a room..."}),z.map(J=>t.jsx("option",{value:J.room_id,children:J.room_name||`Room ${J.room_id}`},J.room_id))]})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[t.jsx("button",{type:"button",onClick:()=>!ge&&zt(),style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"}),t.jsx("button",{type:"submit",disabled:ge||!ne,style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:ge?"Moving...":"Move"})]})]})]})}),B&&Ae&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"520px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[t.jsxs("h2",{style:{marginBottom:"var(--space-4)"},children:["Assign Stock Item: ",Ae.stock_item_name||`Item ${Ae.stock_item_id}`]}),t.jsxs("form",{onSubmit:ga,children:[t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Assign to Person"}),t.jsxs("select",{name:"person",value:ze.person,onChange:Ta,required:!0,disabled:nt,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[t.jsx("option",{value:"",children:"Select a person..."}),L.map(J=>t.jsxs("option",{value:J.person_id,children:[J.first_name," ",J.last_name," (",J.person_id,")"]},J.person_id))]})]}),t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Start Date (Automatic)"}),t.jsx("input",{type:"datetime-local",name:"start_datetime",value:ze.start_datetime,onChange:Ta,required:!0,readOnly:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-secondary)",cursor:"not-allowed",color:"var(--color-text)"}})]}),t.jsxs("div",{style:{marginBottom:"var(--space-6)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Condition"}),t.jsx("input",{type:"text",name:"condition_on_assignment",value:ze.condition_on_assignment,onChange:Ta,placeholder:"e.g. Good, New",required:!0,disabled:nt,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[t.jsx("button",{type:"button",onClick:()=>{se(!1),Ie(null)},style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer",color:"var(--color-text)"},children:"Cancel"}),t.jsx("button",{type:"submit",disabled:nt,style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:nt?"Assigning...":"Assign Stock Item"})]})]})]})}),Me&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"420px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[t.jsx("h2",{style:{marginBottom:"var(--space-4)"},children:"Confirm Discharge"}),t.jsxs("p",{style:{marginBottom:"var(--space-6)"},children:["Are you sure you want to end the assignment of ",t.jsx("strong",{children:((bs=Me.stock_item)==null?void 0:bs.stock_item_name)||"Stock Item"})," to person ",t.jsx("strong",{children:Me.person}),"?",t.jsx("br",{}),t.jsx("br",{}),"The end date will be set to right now."]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[t.jsx("button",{type:"button",onClick:()=>Pe(null),style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer",color:"var(--color-text)"},children:"Cancel"}),t.jsx("button",{type:"button",onClick:()=>Ia(Me.assignment_id),disabled:nt,style:{padding:"var(--space-2) var(--space-4)",background:"#ef4444",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:nt?"Discharging...":"Confirm Discharge"})]})]})})]})},uj=()=>{const r=Dt(),[l,u]=c.useState([]),[d,m]=c.useState([]),[p,h]=c.useState(null),[g,b]=c.useState([]),[y,x]=c.useState(!1),[S,N]=c.useState(!1),[I,k]=c.useState(null),[L,w]=c.useState(!1),[O,P]=c.useState(!1),[z,M]=c.useState(!1),[G,ee]=c.useState({stock_item_type_label:"",stock_item_type_code:""}),[K,re]=c.useState({description:"",data_type:"",unit:""}),[F,T]=c.useState(!1),[te,de]=c.useState({stock_item_attribute_definition:"",is_mandatory:!1,default_value:""});c.useEffect(()=>{he(),X()},[]);const he=async()=>{N(!0),k(null);try{const B=await Js.getAll();u(Array.isArray(B)?B:[])}catch(B){k("Failed to fetch stock item types: "+B.message),u([])}finally{N(!1)}},_e=async B=>{x(!0),k(null);try{const se=await pr.getByStockItemType(B);b(Array.isArray(se)?se:[])}catch(se){k("Failed to fetch type attributes: "+se.message),b([])}finally{x(!1)}},ye=B=>{const{name:se,value:Ae,type:Ie,checked:Me}=B.target;de(Pe=>({...Pe,[se]:Ie==="checkbox"?Me:Ae}))},j=async B=>{if(B.preventDefault(),!p){k("Please select a stock item type first");return}if(!te.stock_item_attribute_definition){k("Please select an attribute definition");return}M(!0),k(null);try{const se={stock_item_type:p.stock_item_type_id,stock_item_attribute_definition:Number(te.stock_item_attribute_definition),is_mandatory:!!te.is_mandatory,default_value:te.default_value||null};await pr.create(se),de({stock_item_attribute_definition:"",is_mandatory:!1,default_value:""}),T(!1),await _e(p.stock_item_type_id)}catch(se){k("Failed to add type attribute: "+se.message)}finally{M(!1)}},D=async B=>{if(p&&window.confirm("Remove this attribute from the stock item type?"))try{await pr.delete(p.stock_item_type_id,B),await _e(p.stock_item_type_id)}catch(se){k("Failed to remove type attribute: "+se.message)}},X=async()=>{try{const B=await mr.getAll();m(Array.isArray(B)?B:[])}catch(B){k("Failed to fetch stock item attribute definitions: "+B.message),m([])}},V=B=>{const{name:se,value:Ae}=B.target;ee(Ie=>({...Ie,[se]:Ae}))},me=async B=>{var se,Ae;B.preventDefault(),M(!0),k(null);try{await Js.create(G),ee({stock_item_type_label:"",stock_item_type_code:""}),w(!1),await he()}catch(Ie){k("Failed to create stock item type: "+(((Ae=(se=Ie.response)==null?void 0:se.data)==null?void 0:Ae.error)||Ie.message))}finally{M(!1)}},A=async B=>{if(window.confirm("Are you sure you want to delete this stock item type?"))try{await Js.delete(B),await he()}catch(se){k("Failed to delete stock item type: "+se.message)}},Y=B=>{r(`/dashboard/stock-items/models?typeId=${B.stock_item_type_id}`)},ne=async B=>{h(B),T(!1),de({stock_item_attribute_definition:"",is_mandatory:!1,default_value:""}),await _e(B.stock_item_type_id)},U=new Set((Array.isArray(g)?g:[]).map(B=>B.stock_item_attribute_definition)),ge=(Array.isArray(d)?d:[]).filter(B=>!U.has(B.stock_item_attribute_definition_id)),be=()=>{r("/dashboard/stock-items/attribute-definitions")};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Stock Items"}),t.jsx("p",{className:"page-subtitle",children:"Select a stock item type"})]}),I&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:I}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Types"}),t.jsx("button",{onClick:()=>w(!L),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Stock Item Type",children:"+"})]}),L&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:me,children:[t.jsx("input",{type:"text",name:"stock_item_type_label",value:G.stock_item_type_label,onChange:V,placeholder:"Type Name",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsx("input",{type:"text",name:"stock_item_type_code",value:G.stock_item_type_code,onChange:V,placeholder:"Code (e.g. CBL)",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:z,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>w(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[l.map(B=>t.jsxs("div",{onClick:()=>Y(B),style:{padding:"var(--space-3) var(--space-4)",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsx("span",{style:{fontWeight:"500"},children:B.stock_item_type_label}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("button",{onClick:se=>{se.stopPropagation(),ne(B)},style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Attributes"}),t.jsx("button",{onClick:se=>{se.stopPropagation(),A(B.stock_item_type_id)},style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]})]},B.stock_item_type_id)),l.length===0&&!S&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No stock item types."})]})]}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsxs("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:["Type Attributes ",p?` ${p.stock_item_type_label}`:""]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{onClick:()=>T(B=>!B),disabled:!p,style:{border:"none",background:"none",color:"var(--color-primary)",cursor:p?"pointer":"not-allowed",opacity:p?1:.6},children:"+ Add"}),t.jsx("button",{onClick:be,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Manage"})]})]}),t.jsx("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:p?t.jsxs(t.Fragment,{children:[F&&t.jsxs("form",{onSubmit:j,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"stock_item_attribute_definition",value:te.stock_item_attribute_definition,onChange:ye,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),ge.map(B=>t.jsx("option",{value:B.stock_item_attribute_definition_id,children:B.description||`Attribute ${B.stock_item_attribute_definition_id}`},B.stock_item_attribute_definition_id))]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"is_mandatory",checked:te.is_mandatory,onChange:ye}),"Mandatory"]}),t.jsx("input",{type:"text",name:"default_value",placeholder:"Default value (optional)",value:te.default_value,onChange:ye,style:{padding:"var(--space-2)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:z,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>T(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),y&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!y&&g.length===0&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned to this type."}),!y&&g.map(B=>{const se=B.definition||d.find(Ae=>Ae.stock_item_attribute_definition_id===B.stock_item_attribute_definition);return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(se==null?void 0:se.description)||`Attribute ${B.stock_item_attribute_definition}`}),t.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[(se==null?void 0:se.data_type)||"n/a",se!=null&&se.unit?`  ${se.unit}`:"",B.is_mandatory?"  mandatory":"",B.default_value?`  default: ${B.default_value}`:""]})]}),t.jsx("button",{onClick:()=>D(B.stock_item_attribute_definition),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},`${B.stock_item_type}-${B.stock_item_attribute_definition}`)})]}):t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:'Click "Attributes" on a type to view its attributes.'})})]})]})]})},mj=()=>{const r=Dt(),l=qa(),d=c.useMemo(()=>new URLSearchParams(l.search),[l.search]).get("typeId"),[m,p]=c.useState(null),[h,g]=c.useState([]),[b,y]=c.useState([]),[x,S]=c.useState(!1),[N,I]=c.useState(null),[k,L]=c.useState(!1),[w,O]=c.useState(!1),[P,z]=c.useState({stock_item_attribute_definition:"",is_mandatory:!1,default_value:""});c.useEffect(()=>{if(!d){I("typeId is required");return}M()},[d]);const M=async()=>{S(!0),I(null);try{const[T,te,de]=await Promise.all([Js.getById(d),mr.getAll(),pr.getByStockItemType(d)]);p(T),y(Array.isArray(te)?te:[]),g(Array.isArray(de)?de:[])}catch(T){I("Failed to load type attributes: "+T.message)}finally{S(!1)}},G=T=>{const{name:te,value:de,type:he,checked:_e}=T.target;z(ye=>({...ye,[te]:he==="checkbox"?_e:de}))},ee=async T=>{if(T.preventDefault(),!P.stock_item_attribute_definition){I("Please select an attribute definition");return}O(!0),I(null);try{const te={stock_item_type:Number(d),stock_item_attribute_definition:Number(P.stock_item_attribute_definition),is_mandatory:P.is_mandatory,default_value:P.default_value||null};await pr.create(te),z({stock_item_attribute_definition:"",is_mandatory:!1,default_value:""}),L(!1),await M()}catch(te){I("Failed to add attribute to type: "+te.message)}finally{O(!1)}},K=async T=>{if(window.confirm("Remove this attribute from the stock item type?"))try{await pr.delete(Number(d),Number(T)),await M()}catch(te){I("Failed to remove type attribute: "+te.message)}},re=c.useMemo(()=>new Set(h.map(T=>T.stock_item_attribute_definition)),[h]),F=c.useMemo(()=>b.filter(T=>!re.has(T.stock_item_attribute_definition_id)),[b,re]);return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"flex-end",gap:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("h1",{className:"page-title",children:"Stock Item Type Attributes"}),t.jsxs("p",{className:"page-subtitle",children:[m?m.stock_item_type_label:"Type","  Manage attributes"]})]}),t.jsx("button",{onClick:()=>r("/dashboard/stock-items/types"),style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back to Types","aria-label":"Back to Types",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})]}),N&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:N}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Attributes"}),t.jsx("button",{onClick:()=>L(!k),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add"})]}),k&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:ee,children:[t.jsxs("select",{name:"stock_item_attribute_definition",value:P.stock_item_attribute_definition,onChange:G,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition"}),F.map(T=>t.jsxs("option",{value:T.stock_item_attribute_definition_id,children:[T.description," (",T.data_type||"n/a",T.unit?`  ${T.unit}`:"",")"]},T.stock_item_attribute_definition_id))]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"is_mandatory",checked:P.is_mandatory,onChange:G}),"Mandatory"]}),t.jsx("input",{type:"text",name:"default_value",placeholder:"Default value (optional)",value:P.default_value,onChange:G,style:{padding:"var(--space-2)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:w,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>L(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:[x&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!x&&h.length===0&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned to this type."}),h.map(T=>{var te,de,he;return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:((te=T.definition)==null?void 0:te.description)||`Definition ${T.stock_item_attribute_definition}`}),t.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[((de=T.definition)==null?void 0:de.data_type)||"n/a",(he=T.definition)!=null&&he.unit?`  ${T.definition.unit}`:"",T.is_mandatory?"  mandatory":"",T.default_value?`  default: ${T.default_value}`:""]})]}),t.jsx("button",{onClick:()=>K(T.stock_item_attribute_definition),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},T.stock_item_attribute_definition)})]})]})]})},pj=()=>{const r=Dt(),[l]=Bs(),u=l.get("typeId"),d=E=>[E==null?void 0:E.brand_name,E==null?void 0:E.model_name].filter(Boolean).join(" "),[m,p]=c.useState(null),[h,g]=c.useState([]),[b,y]=c.useState(null),[x,S]=c.useState([]),[N,I]=c.useState([]),[k,L]=c.useState([]),[w,O]=c.useState(!1),[P,z]=c.useState(!1),[M,G]=c.useState({stock_item_brand:"",model_name:"",model_code:""}),[ee,K]=c.useState(!1),[re,F]=c.useState({stock_item_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[T,te]=c.useState(!1),[de,he]=c.useState(null),[_e,ye]=c.useState(!1),[j,D]=c.useState(!1),[X,V]=c.useState(!1),[me,A]=c.useState({brand_name:""}),Y=E=>String(E||"").trim().toUpperCase().replace(/\s+/g,"_").replace(/[^A-Z0-9_\-]/g,"").slice(0,16);c.useEffect(()=>{u&&ne(u)},[u]),c.useEffect(()=>{be(),B()},[]),c.useEffect(()=>{if(!b){L([]),K(!1),F({stock_item_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""});return}se(b.stock_item_model_id)},[b]);const ne=async E=>{te(!0),he(null);try{const[_,R]=await Promise.all([Js.getAll(),es.getByStockItemType(E)]),fe=(Array.isArray(_)?_:[]).find(Re=>String(Re.stock_item_type_id)===String(E))||null;p(fe),g(Array.isArray(R)?R:[]),y(null)}catch(_){he("Failed to fetch stock item models: "+_.message),p(null),g([]),y(null)}finally{te(!1)}},U=E=>{const{name:_,value:R}=E.target;A(le=>({...le,[_]:R}))},ge=async E=>{var R,le,fe;if(E.preventDefault(),!sa.isSuperuser())return;const _=(R=me.brand_name)==null?void 0:R.trim();if(!_){he("Please enter a brand name");return}V(!0),he(null);try{await lu.create({brand_name:_,brand_code:Y(_),is_active:!0}),A({brand_name:""}),D(!1),await B()}catch(Re){he("Failed to create stock item brand: "+(((fe=(le=Re.response)==null?void 0:le.data)==null?void 0:fe.error)||Re.message))}finally{V(!1)}},be=async()=>{try{const E=await mr.getAll();I(Array.isArray(E)?E:[])}catch{I([])}},B=async()=>{try{const E=await lu.getAll();S(Array.isArray(E)?E:[])}catch{S([])}},se=async E=>{try{const _=await Gd.getByStockItemModel(E);L(Array.isArray(_)?_:[])}catch(_){he("Failed to fetch stock item model attributes: "+_.message),L([])}},Ae=E=>{const{name:_,value:R,type:le,checked:fe}=E.target;F(Re=>({...Re,[_]:le==="checkbox"?fe:R}))},Ie=E=>{const{name:_,value:R}=E.target;G(le=>({...le,[_]:R}))},Me=async E=>{var _,R;if(E.preventDefault(),!!u){if(!M.stock_item_brand){he("Please select a brand");return}z(!0),he(null);try{const le={stock_item_type:Number(u),stock_item_brand:Number(M.stock_item_brand),model_name:M.model_name||null,model_code:M.model_code||null};await es.create(le),G({stock_item_brand:"",model_name:"",model_code:""}),O(!1),await ne(u)}catch(le){he("Failed to create stock item model: "+(((R=(_=le.response)==null?void 0:_.data)==null?void 0:R.error)||le.message))}finally{z(!1)}}},Pe=async E=>{if(E.preventDefault(),!b){he("Please select a stock item model first");return}if(!re.stock_item_attribute_definition){he("Please select an attribute definition");return}ye(!0),he(null);try{const _={stock_item_model:b.stock_item_model_id,stock_item_attribute_definition:Number(re.stock_item_attribute_definition),value_string:re.value_string||null,value_number:re.value_number?Number(re.value_number):null,value_bool:re.value_bool,value_date:re.value_date||null};await Gd.create(_),F({stock_item_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),K(!1),await se(b.stock_item_model_id)}catch(_){he("Failed to add model attribute value: "+_.message)}finally{ye(!1)}},ze=async(E,_)=>{if(window.confirm("Remove this attribute value from the stock item model?"))try{await Gd.delete(E,_),b&&await se(b.stock_item_model_id)}catch(R){he("Failed to remove stock item model attribute: "+R.message)}},tt=c.useMemo(()=>{const E=new Map;return(Array.isArray(N)?N:[]).forEach(_=>{E.set(_.stock_item_attribute_definition_id,_)}),E},[N]),Ne=c.useMemo(()=>{if(!b)return N;const E=new Set((Array.isArray(k)?k:[]).map(_=>_.stock_item_attribute_definition));return(Array.isArray(N)?N:[]).filter(_=>!E.has(_.stock_item_attribute_definition_id))},[b,N,k]),He=()=>{r("/dashboard/stock-items/types")},Ue=E=>{r(`/dashboard/stock-items/instances?typeId=${u}&modelId=${E.stock_item_model_id}`)},we=E=>{r(`/dashboard/stock-items/models/${E.stock_item_model_id}/compatibility?typeId=${u}`)};return u?t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Stock Items"}),t.jsxs("p",{className:"page-subtitle",children:["Select a model",m!=null&&m.stock_item_type_label?` for ${m.stock_item_type_label}`:""]})]}),de&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:de}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsxs("div",{style:{display:"flex",gap:"var(--space-3)",alignItems:"center"},children:[t.jsx("button",{onClick:He,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})}),t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Models"})]}),t.jsx("button",{onClick:()=>O(E=>!E),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Model",children:"+"})]}),w&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:Me,children:[t.jsxs("select",{name:"stock_item_brand",value:M.stock_item_brand,onChange:Ie,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select brand..."}),x.map(E=>t.jsx("option",{value:E.stock_item_brand_id,children:E.brand_name},E.stock_item_brand_id))]}),t.jsx("input",{type:"text",name:"model_name",value:M.model_name,onChange:Ie,placeholder:"Model Name",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsx("input",{type:"text",name:"model_code",value:M.model_code,onChange:Ie,placeholder:"Model Code",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:P,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>O(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[h.map(E=>t.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[t.jsx("span",{style:{fontWeight:"500"},children:d(E)||`Model ${E.stock_item_model_id}`}),t.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:E.model_code})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{onClick:()=>y(E),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:(b==null?void 0:b.stock_item_model_id)===E.stock_item_model_id?"var(--color-bg-secondary)":"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Attributes"}),t.jsx("button",{onClick:()=>we(E),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Compatibility"}),t.jsx("button",{onClick:()=>Ue(E),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Instances"})]})]},E.stock_item_model_id)),h.length===0&&!T&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No models."})]})]}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsxs("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:["Model Attributes ",b?` ${d(b)||b.model_name||""}`:""]}),t.jsx("button",{onClick:()=>K(E=>!E),disabled:!b,style:{border:"none",background:"none",color:"var(--color-primary)",cursor:b?"pointer":"not-allowed",opacity:b?1:.6},children:"+ Add Value"})]}),t.jsx("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:b?t.jsxs(t.Fragment,{children:[ee&&t.jsxs("form",{onSubmit:Pe,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"stock_item_attribute_definition",value:re.stock_item_attribute_definition,onChange:Ae,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),Ne.map(E=>t.jsx("option",{value:E.stock_item_attribute_definition_id,children:E.description||`Attribute ${E.stock_item_attribute_definition_id}`},E.stock_item_attribute_definition_id))]}),(()=>{var R;const E=tt.get(Number(re.stock_item_attribute_definition)),_=(R=E==null?void 0:E.data_type)==null?void 0:R.toLowerCase();return _==="number"?t.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:re.value_number,onChange:Ae,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):_==="bool"||_==="boolean"?t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"value_bool",checked:re.value_bool,onChange:Ae}),"True"]}):_==="date"?t.jsx("input",{type:"date",name:"value_date",value:re.value_date,onChange:Ae,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):t.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:re.value_string,onChange:Ae,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:_e,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>K(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),k.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No model attribute values."}):k.map(E=>{const _=E.definition||tt.get(E.stock_item_attribute_definition),R=E.value_string??E.value_number??E.value_bool??E.value_date??"";return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(_==null?void 0:_.description)||`Attribute ${E.stock_item_attribute_definition}`}),t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:R===""?"No value":String(R)})]}),t.jsx("button",{onClick:()=>ze(E.stock_item_model,E.stock_item_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${E.stock_item_model}-${E.stock_item_attribute_definition}`)})]}):t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Select a model to view or add values."})})]}),sa.isSuperuser()&&t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",gridColumn:"1 / -1"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Brands"}),t.jsx("button",{onClick:()=>D(E=>!E),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},title:"Add Brand",children:"+ Add Brand"})]}),t.jsxs("div",{style:{padding:"var(--space-4)"},children:[j&&t.jsxs("form",{onSubmit:ge,children:[t.jsx("input",{type:"text",name:"brand_name",value:me.brand_name,onChange:U,placeholder:"Brand Name",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:X,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>D(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),!j&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Add brands to populate the brand selector when creating models."})]})]})]})]}):t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Stock Items"}),t.jsx("p",{className:"page-subtitle",children:"Select a type first"})]}),t.jsx("div",{className:"card",style:{padding:"var(--space-6)"},children:t.jsx("button",{onClick:He,style:{padding:"var(--space-2) var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer",width:"fit-content"},title:"Back to types","aria-label":"Back to types",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})})]})},fj=()=>{const r=Dt(),{modelId:l}=yr(),[u]=Bs(),d=u.get("typeId"),[m,p]=c.useState(null),[h,g]=c.useState([]),[b,y]=c.useState([]),[x,S]=c.useState(""),[N,I]=c.useState(!1),[k,L]=c.useState(!1),[w,O]=c.useState(null),P=sa.isSuperuser(),z=()=>{if(d){r(`/dashboard/stock-items/models?typeId=${d}`);return}r(-1)},M=c.useCallback(async()=>{if(l){L(!0),O(null);try{const[F,T,te]=await Promise.all([es.getById(l),es.getCompatibleAssetModels(l),ft.getAll()]);p(F||null),g(Array.isArray(T)?T:[]),y(Array.isArray(te)?te:[])}catch(F){O("Failed to fetch compatibility: "+F.message)}finally{L(!1)}}},[l]);c.useEffect(()=>{M()},[M]);const G=c.useMemo(()=>new Set((Array.isArray(h)?h:[]).map(F=>F.asset_model_id)),[h]),ee=c.useMemo(()=>(Array.isArray(b)?b:[]).filter(F=>!G.has(F.asset_model_id)),[b,G]),K=async()=>{if(x){O(null);try{await es.addCompatibleAssetModel(l,Number(x)),S(""),I(!1),await M()}catch(F){O("Failed to add compatible asset model: "+F.message)}}},re=async F=>{O(null);try{await es.removeCompatibleAssetModel(l,F),await M()}catch(T){O("Failed to remove compatible asset model: "+T.message)}};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Stock Items"}),t.jsxs("p",{className:"page-subtitle",children:["Compatibility ",m!=null&&m.model_name?` ${m.model_name}`:""]})]}),w&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:w}),t.jsx("div",{className:"card",style:{padding:"var(--space-4)",marginBottom:"var(--space-4)"},children:t.jsx("button",{onClick:z,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Compatible Asset Models"}),P&&!N&&t.jsx("button",{onClick:()=>I(!0),style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add compatible model"})]}),P&&N&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsxs("select",{value:x,onChange:F=>S(F.target.value),style:{flex:1,padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select asset model..."}),ee.map(F=>t.jsx("option",{value:F.asset_model_id,children:F.model_name||`Model ${F.asset_model_id}`},F.asset_model_id))]}),t.jsx("button",{onClick:K,disabled:!x||k,style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add"}),t.jsx("button",{onClick:()=>{I(!1),S("")},style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[(Array.isArray(h)?h:[]).map(F=>t.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[t.jsx("span",{style:{fontWeight:"500"},children:F.model_name}),t.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:F.model_code})]}),P&&t.jsx("button",{onClick:()=>re(F.asset_model_id),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},F.asset_model_id)),h.length===0&&!k&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No compatible asset models."})]})]})]})},hj=()=>{const[r,l]=c.useState([]),[u,d]=c.useState(!1),[m,p]=c.useState(null),[h,g]=c.useState(!1),[b,y]=c.useState(!1),[x,S]=c.useState({description:"",data_type:"",unit:""});c.useEffect(()=>{N()},[]);const N=async()=>{d(!0),p(null);try{const w=await mr.getAll();l(Array.isArray(w)?w:[])}catch(w){p("Failed to fetch stock item attribute definitions: "+w.message),l([])}finally{d(!1)}},I=w=>{const{name:O,value:P}=w.target;S(z=>({...z,[O]:P}))},k=async w=>{w.preventDefault(),y(!0),p(null);try{const O={description:x.description||null,data_type:x.data_type||null,unit:x.unit||null};await mr.create(O),S({description:"",data_type:"",unit:""}),g(!1),await N()}catch(O){p("Failed to create stock item attribute definition: "+O.message)}finally{y(!1)}},L=async w=>{if(window.confirm("Delete this attribute definition?"))try{await mr.delete(w),await N()}catch(O){p("Failed to delete stock item attribute definition: "+O.message)}};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Stock Item Attribute Definitions"}),t.jsx("p",{className:"page-subtitle",children:"Manage stock item attribute definitions"})]}),m&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:m}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Definitions"}),t.jsx("button",{onClick:()=>g(!h),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add"})]}),h&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:k,children:[t.jsx("input",{type:"text",name:"description",placeholder:"Description",value:x.description,onChange:I,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)"},children:[t.jsxs("select",{name:"data_type",value:x.data_type,onChange:I,style:{padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Data Type"}),t.jsx("option",{value:"string",children:"String"}),t.jsx("option",{value:"number",children:"Number"}),t.jsx("option",{value:"bool",children:"Boolean"}),t.jsx("option",{value:"date",children:"Date"})]}),t.jsx("input",{type:"text",name:"unit",placeholder:"Unit",value:x.unit,onChange:I,style:{padding:"var(--space-2)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:b,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>g(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:[u&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!u&&r.length===0&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attribute definitions."}),r.map(w=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:w.description}),t.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[w.data_type,w.unit?`  ${w.unit}`:""]})]}),t.jsx("button",{onClick:()=>L(w.stock_item_attribute_definition_id),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},w.stock_item_attribute_definition_id))]})]})]})},yj=()=>{var $s,Ys,Es;const r=Dt(),l=qa(),[u]=Bs(),d=u.get("typeId"),m=u.get("modelId"),p=l.pathname.endsWith("/instances"),h=q=>[q==null?void 0:q.brand_name,q==null?void 0:q.model_name].filter(Boolean).join(" "),[g,b]=c.useState([]),[y,x]=c.useState([]),[S,N]=c.useState([]),[I,k]=c.useState([]),[L,w]=c.useState([]),[O,P]=c.useState([]),[z,M]=c.useState([]),[G,ee]=c.useState([]),[K,re]=c.useState([]),[F,T]=c.useState([]),[te,de]=c.useState([]),[he,_e]=c.useState(!1),[ye,j]=c.useState(null),[D,X]=c.useState(!1),[V,me]=c.useState(null),[A,Y]=c.useState(null),[ne,U]=c.useState(""),[ge,be]=c.useState(""),[B,se]=c.useState(!1),[Ae,Ie]=c.useState(!1),[Me,Pe]=c.useState(null),[ze,tt]=c.useState(null),[Ne,He]=c.useState({person:"",start_datetime:"",condition_on_assignment:"Good"}),[Ue,we]=c.useState(!1),[E,_]=c.useState(!1),[R,le]=c.useState(!1),[fe,Re]=c.useState(!1),[Be,je]=c.useState({consumable_attribute_definition:"",is_mandatory:!1,default_value:""}),[$e,pt]=c.useState({consumable_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[at,_t]=c.useState({consumable_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[jt,Ot]=c.useState(!1),[Qe,Tt]=c.useState(!1),[Ge,St]=c.useState(!1),[Ye,vt]=c.useState(null),[De,fa]=c.useState(null),[dt,Jt]=c.useState(null),[ra,ha]=c.useState({consumable_type_label:"",consumable_type_code:""}),[nt,It]=c.useState({model_name:"",model_code:"",consumable_brand:"",consumable_type:"",release_year:"",discontinued_year:"",is_active:!0,notes:"",warranty_expiry_in_months:""}),[_a,va]=c.useState({consumable_name:"",consumable_inventory_number:"",consumable_status:"active",consumable_warranty_expiry_in_months:"",consumable_name_in_administrative_certificate:"",destruction_certificate_id:"",maintenance_step_id:null}),[Ut,ja]=c.useState(null),[Lt,Ct]=c.useState(!1);c.useEffect(()=>{ns(),Sa(),Ts(),Fa(),la(),La()},[]),c.useEffect(()=>{p&&(!d||!m)&&r("/dashboard/consumables/types",{replace:!0})},[p,d,m,r]);const Fa=async()=>{try{const q=await qs.getAll();M(Array.isArray(q)?q:[])}catch(q){console.error("Failed to fetch rooms:",q),M([])}},la=async()=>{try{const q=await _n.getAll();w(Array.isArray(q)?q:[])}catch(q){console.error("Failed to fetch persons:",q),w([])}},La=async()=>{try{const q=await Zd.getAll();P(Array.isArray(q)?q:[])}catch(q){console.error("Failed to fetch consumable assignments:",q),P([])}};c.useEffect(()=>{(async()=>{if(!(!D||!V))try{const v=await Qr.getCurrentRoom(V.consumable_id),H=(v==null?void 0:v.room_id)??null;Y(H);const ve=z.find(Oe=>Oe.room_id===H);U((ve==null?void 0:ve.room_name)||(H?`Room ${H}`:"Unknown"))}catch(v){console.error(v),Y(null),U("Unknown")}})()},[D,V,z]),c.useEffect(()=>{Ye?(Ht(Ye.consumable_type_id),Ba(Ye.consumable_type_id),fa(null),k([]),T([]),Jt(null),de([])):(N([]),re([]),T([]),Jt(null),de([]))},[Ye]),c.useEffect(()=>{if(!p||!d||!Array.isArray(g)||g.length===0)return;const q=g.find(v=>String(v.consumable_type_id)===String(d))||null;q&&(Ye==null?void 0:Ye.consumable_type_id)!==q.consumable_type_id&&vt(q)},[p,d,g,Ye]),c.useEffect(()=>{De?(ut(De.consumable_model_id),gt(De.consumable_model_id)):(k([]),T([]),Jt(null),de([]))},[De]),c.useEffect(()=>{if(!p||!m||!Array.isArray(S)||S.length===0)return;const q=S.find(v=>String(v.consumable_model_id)===String(m))||null;q&&(De==null?void 0:De.consumable_model_id)!==q.consumable_model_id&&fa(q)},[p,m,S,De]),c.useEffect(()=>{dt?Gt(dt.consumable_id):de([])},[dt]);const ns=async()=>{_e(!0),j(null);try{const q=await Ks.getAll();b(Array.isArray(q)?q:[])}catch(q){j("Failed to fetch consumable types: "+q.message),b([])}finally{_e(!1)}},Sa=async()=>{try{const q=await ou.getAll();x(Array.isArray(q)?q:[])}catch(q){console.error("Failed to fetch consumable brands:",q),x([])}},Ht=async q=>{try{const v=await ts.getByConsumableType(q);N(Array.isArray(v)?v:[])}catch(v){j("Failed to fetch consumable models: "+v.message),N([])}},ut=async q=>{try{const v=await Qr.getAll({consumable_model:q});k(Array.isArray(v)?v:[])}catch(v){j("Failed to fetch consumables: "+v.message),k([])}},gt=async q=>{try{const v=await Pr.getByConsumableModel(q);T(Array.isArray(v)?v:[])}catch(v){j("Failed to fetch model attributes: "+v.message),T([])}},Gt=async q=>{try{const v=await Qd.getByConsumable(q);de(Array.isArray(v)?v:[])}catch(v){j("Failed to fetch consumable attributes: "+v.message),de([])}},oa=c.useMemo(()=>{const q=new Map;return G.forEach(v=>{q.set(v.consumable_attribute_definition_id,v)}),q},[G]),Ts=async()=>{try{const q=await fr.getAll();ee(Array.isArray(q)?q:[])}catch(q){j("Failed to fetch attribute definitions: "+q.message),ee([])}},Ba=async q=>{try{const v=await gn.getByConsumableType(q);re(Array.isArray(v)?v:[])}catch(v){j("Failed to fetch type attributes: "+v.message),re([])}},Ha=q=>{const{name:v,value:H}=q.target;ha(ve=>({...ve,[v]:H}))},ia=q=>{const{name:v,value:H,type:ve,checked:Oe}=q.target;je(kt=>({...kt,[v]:ve==="checkbox"?Oe:H}))},Vt=q=>{const{name:v,value:H,type:ve,checked:Oe}=q.target;pt(kt=>({...kt,[v]:ve==="checkbox"?Oe:H}))},ea=q=>{const{name:v,value:H,type:ve,checked:Oe}=q.target;_t(kt=>({...kt,[v]:ve==="checkbox"?Oe:H}))},Qt=q=>{const{name:v,value:H,type:ve,checked:Oe}=q.target;It(kt=>({...kt,[v]:ve==="checkbox"?Oe:ve==="number"?H?parseInt(H):"":H}))},Xt=q=>{const{name:v,value:H}=q.target;va(ve=>({...ve,[v]:H}))},ya=async q=>{if(q.preventDefault(),!Ye){j("Please select a consumable type first");return}if(!Be.consumable_attribute_definition){j("Please select an attribute definition");return}Ct(!0),j(null);try{const v={consumable_type:Ye.consumable_type_id,consumable_attribute_definition:Number(Be.consumable_attribute_definition),is_mandatory:Be.is_mandatory,default_value:Be.default_value||null};await gn.create(v),je({consumable_attribute_definition:"",is_mandatory:!1,default_value:""}),we(!1),await Ba(Ye.consumable_type_id)}catch(v){j("Failed to assign attribute to type: "+v.message)}finally{Ct(!1)}},ht=async q=>{if(q.preventDefault(),!De){j("Please select a consumable model first");return}if(!$e.consumable_attribute_definition){j("Please select an attribute definition");return}Ct(!0),j(null);try{const v={consumable_model:De.consumable_model_id,consumable_attribute_definition:Number($e.consumable_attribute_definition),value_string:$e.value_string||null,value_number:$e.value_number?Number($e.value_number):null,value_bool:$e.value_bool,value_date:$e.value_date||null};await Pr.create(v),pt({consumable_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),_(!1),await gt(De.consumable_model_id)}catch(v){j("Failed to add model attribute value: "+v.message)}finally{Ct(!1)}},Ta=async q=>{if(q.preventDefault(),!dt){j("Please select a consumable first");return}if(!at.consumable_attribute_definition){j("Please select an attribute definition");return}Ct(!0),j(null);try{const v={consumable:dt.consumable_id,consumable_attribute_definition:Number(at.consumable_attribute_definition),value_string:at.value_string||null,value_number:at.value_number?Number(at.value_number):null,value_bool:at.value_bool,value_date:at.value_date||null};await Qd.create(v),_t({consumable_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),le(!1),await Gt(dt.consumable_id)}catch(v){j("Failed to add consumable attribute value: "+v.message)}finally{Ct(!1)}},ga=async(q,v)=>{if(window.confirm("Remove this attribute from the consumable type?"))try{await gn.delete(q,v),Ye&&await Ba(Ye.consumable_type_id)}catch(H){j("Failed to remove type attribute: "+H.message)}},Ia=async(q,v)=>{if(window.confirm("Remove this attribute value from the consumable model?"))try{await Pr.delete(q,v),De&&await gt(De.consumable_model_id)}catch(H){j("Failed to remove model attribute: "+H.message)}},Zt=async(q,v)=>{if(window.confirm("Remove this attribute value from the consumable?"))try{await Qd.delete(q,v),dt&&await Gt(dt.consumable_id)}catch(H){j("Failed to remove consumable attribute: "+H.message)}},$a=q=>{Jt(q),Re(!0)},Ya=()=>{Re(!1),le(!1)},zs=async q=>{var v,H;q.preventDefault(),Ct(!0),j(null);try{await Ks.create(ra),ha({consumable_type_label:"",consumable_type_code:""}),Ot(!1),await ns()}catch(ve){j("Failed to create consumable type: "+(((H=(v=ve.response)==null?void 0:v.data)==null?void 0:H.error)||ve.message))}finally{Ct(!1)}},Ps=async q=>{var v;if(q.preventDefault(),!Ye){j("Please select a consumable type first");return}if(!nt.consumable_brand){j("Please select a brand");return}Ct(!0),j(null);try{const H={model_name:nt.model_name,model_code:nt.model_code,consumable_brand:parseInt(nt.consumable_brand),consumable_type:Ye.consumable_type_id,is_active:nt.is_active,notes:nt.notes||"",release_year:nt.release_year?parseInt(nt.release_year):null,discontinued_year:nt.discontinued_year?parseInt(nt.discontinued_year):null,warranty_expiry_in_months:nt.warranty_expiry_in_months?parseInt(nt.warranty_expiry_in_months):null};await ts.create(H),It({model_name:"",model_code:"",consumable_brand:"",consumable_type:"",release_year:"",discontinued_year:"",is_active:!0,notes:"",warranty_expiry_in_months:""}),Tt(!1),await Ht(Ye.consumable_type_id)}catch(H){const ve=(v=H.response)!=null&&v.data?typeof H.response.data=="object"?JSON.stringify(H.response.data):H.response.data:H.message;j("Failed to create consumable model: "+ve)}finally{Ct(!1)}},hs=async q=>{var v;if(q.preventDefault(),!De){j("Please select a consumable model first");return}Ct(!0),j(null);try{const H={..._a,consumable_model:De.consumable_model_id,destruction_certificate_id:_a.destruction_certificate_id?Number(_a.destruction_certificate_id):null};Ut?await Qr.update(Ut,H):await Qr.create(H),va({consumable_name:"",consumable_inventory_number:"",consumable_status:"active",consumable_warranty_expiry_in_months:"",consumable_name_in_administrative_certificate:"",destruction_certificate_id:"",maintenance_step_id:null}),ja(null),St(!1),await ut(De.consumable_model_id)}catch(H){const ve=(v=H.response)!=null&&v.data?typeof H.response.data=="object"?JSON.stringify(H.response.data):H.response.data:H.message;j(`Failed to ${Ut?"update":"create"} consumable: `+ve)}finally{Ct(!1)}},za=q=>{ja(q.consumable_id),va({consumable_name:q.consumable_name||"",consumable_inventory_number:q.consumable_inventory_number||"",consumable_status:q.consumable_status||"active",consumable_warranty_expiry_in_months:q.consumable_warranty_expiry_in_months||"",consumable_name_in_administrative_certificate:q.consumable_name_in_administrative_certificate||"",destruction_certificate_id:q.destruction_certificate_id??"",maintenance_step_id:q.maintenance_step_id||null}),St(!0)},Ca=async q=>{if(window.confirm("Are you sure you want to delete this consumable type?"))try{await Ks.delete(q),(Ye==null?void 0:Ye.consumable_type_id)===q&&vt(null),await ns()}catch(v){j("Failed to delete consumable type: "+v.message)}},zt=async q=>{if(window.confirm("Are you sure you want to delete this consumable model?"))try{await ts.delete(q),Ye&&await Ht(Ye.consumable_type_id)}catch(v){j("Failed to delete consumable model: "+v.message)}},Wa=async q=>{if(window.confirm("Are you sure you want to delete this consumable?"))try{await Qr.delete(q),De&&await ut(De.consumable_model_id)}catch(v){j("Failed to delete consumable: "+v.message)}},ys=q=>{const{name:v,value:H}=q.target;He(ve=>({...ve,[v]:H}))},Ga=async q=>{var v,H;if(q.preventDefault(),!!Me){Ct(!0),j(null);try{await Zd.create({person:Ne.person,consumable:Me.consumable_id,start_datetime:new Date(Ne.start_datetime).toISOString(),condition_on_assignment:Ne.condition_on_assignment}),Ie(!1),Pe(null),await La(),alert("Consumable assigned successfully!")}catch(ve){j("Failed to assign consumable: "+(((H=(v=ve.response)==null?void 0:v.data)==null?void 0:H.error)||ve.message))}finally{Ct(!1)}}},bs=async q=>{var v,H;Ct(!0),j(null);try{await Zd.discharge(q),tt(null),await La(),alert("Consumable discharged successfully!")}catch(ve){j("Failed to discharge consumable: "+(((H=(v=ve.response)==null?void 0:v.data)==null?void 0:H.error)||ve.message))}finally{Ct(!1)}},J=sa.getUser(),Se=J==null?void 0:J.is_superuser,Te=(($s=J==null?void 0:J.roles)==null?void 0:$s.some(q=>q.role_code==="stock_consumable_responsible"))||Se,Je=((Ys=J==null?void 0:J.roles)==null?void 0:Ys.some(q=>q.role_code==="exploitation_chief"))||Se,wt=Te,wa=Te||Je,ka=c.useMemo(()=>{const q=new Map;return O.forEach(v=>{var H;v.is_active&&q.set(((H=v.consumable)==null?void 0:H.consumable_id)??v.consumable,v)}),q},[O]),Va=q=>{me(q),Y(null),U(""),be(""),X(!0)},Hs=()=>{X(!1),me(null),Y(null),U(""),be("")},vs=async q=>{var v,H;if(q.preventDefault(),!(!V||!ge)){se(!0),j(null);try{await Qr.move(V.consumable_id,{destination_room_id:ge}),De&&await ut(De.consumable_model_id),Hs()}catch(ve){j("Failed to move consumable: "+(((H=(v=ve==null?void 0:ve.response)==null?void 0:v.data)==null?void 0:H.error)||ve.message))}finally{se(!1)}}};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Consumables Explorer"}),t.jsx("p",{className:"page-subtitle",children:"Manage consumable types, models, and inventory"})]}),ye&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:ye}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:p?"1fr":"300px 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[!p&&t.jsxs("div",{className:"card",style:{display:"flex",flexDirection:"column",overflow:"hidden",height:"100%"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Library"}),t.jsx("button",{onClick:()=>Ot(!jt),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Consumable Type",children:"+"})]}),jt&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:zs,children:[t.jsx("input",{type:"text",name:"consumable_type_label",value:ra.consumable_type_label,onChange:Ha,placeholder:"Type Name",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsx("input",{type:"text",name:"consumable_type_code",value:ra.consumable_type_code,onChange:Ha,placeholder:"Code (e.g. INK)",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:Lt,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>Ot(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[g.map(q=>t.jsxs("div",{children:[t.jsxs("div",{onClick:()=>vt((Ye==null?void 0:Ye.consumable_type_id)===q.consumable_type_id?null:q),style:{padding:"var(--space-3) var(--space-4)",cursor:"pointer",backgroundColor:(Ye==null?void 0:Ye.consumable_type_id)===q.consumable_type_id?"var(--color-bg-secondary)":"transparent",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsx("span",{style:{fontWeight:"500"},children:q.consumable_type_label}),t.jsx("button",{onClick:v=>{v.stopPropagation(),Ca(q.consumable_type_id)},style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]}),(Ye==null?void 0:Ye.consumable_type_id)===q.consumable_type_id&&t.jsxs("div",{style:{backgroundColor:"var(--color-bg-secondary)",borderBottom:"1px solid var(--color-border)"},children:[t.jsx("div",{onClick:()=>Tt(!0),style:{padding:"var(--space-2) var(--space-4)",fontSize:"var(--font-size-xs)",color:"var(--color-primary)",cursor:"pointer",borderBottom:"1px dashed var(--color-border)",textAlign:"center"},children:"+ Add Model"}),S.map(v=>t.jsxs("div",{onClick:()=>fa(v),style:{padding:"var(--space-2) var(--space-4)",paddingLeft:"var(--space-8)",cursor:"pointer",backgroundColor:(De==null?void 0:De.consumable_model_id)===v.consumable_model_id?"var(--color-primary)":"transparent",color:(De==null?void 0:De.consumable_model_id)===v.consumable_model_id?"white":"var(--color-text)",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"var(--font-size-sm)"},children:[t.jsx("span",{children:h(v)||`Model ${v.consumable_model_id}`}),(De==null?void 0:De.consumable_model_id)===v.consumable_model_id&&t.jsx("button",{onClick:H=>{H.stopPropagation(),zt(v.consumable_model_id)},style:{border:"none",background:"none",color:"white",cursor:"pointer",opacity:.8},children:""})]},v.consumable_model_id))]})]},q.consumable_type_id)),g.length===0&&!he&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No consumable types."})]})]}),t.jsx("div",{className:"card",style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:Qe?t.jsxs("div",{style:{padding:"var(--space-6)",overflowY:"auto"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-6)"},children:[t.jsxs("h2",{children:["Add New Model for ",Ye==null?void 0:Ye.consumable_type_label]}),t.jsx("button",{onClick:()=>Tt(!1),style:{padding:"var(--space-2) var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]}),y.length===0?t.jsx("div",{style:{color:"#c33",backgroundColor:"#fee",padding:"var(--space-4)",borderRadius:"var(--radius-sm)"},children:"No consumable brands found. Please create a brand first."}):t.jsxs("form",{onSubmit:Ps,style:{maxWidth:"600px"},children:[t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Brand *"}),t.jsxs("select",{name:"consumable_brand",value:nt.consumable_brand,onChange:Qt,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"},children:[t.jsx("option",{value:"",children:"Select a brand..."}),y.map(q=>t.jsx("option",{value:q.consumable_brand_id,children:q.brand_name},q.consumable_brand_id))]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Model Name *"}),t.jsx("input",{type:"text",name:"model_name",value:nt.model_name,onChange:Qt,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Model Code *"}),t.jsx("input",{type:"text",name:"model_code",value:nt.model_code,onChange:Qt,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Release Year"}),t.jsx("input",{type:"number",name:"release_year",value:nt.release_year,onChange:Qt,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Warranty (Months)"}),t.jsx("input",{type:"number",name:"warranty_expiry_in_months",value:nt.warranty_expiry_in_months,onChange:Qt,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]})]}),t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Notes"}),t.jsx("textarea",{name:"notes",value:nt.notes,onChange:Qt,rows:"3",style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),t.jsx("div",{style:{marginBottom:"var(--space-6)"},children:t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",name:"is_active",checked:nt.is_active,onChange:Qt}),"Active Model"]})}),t.jsx("button",{type:"submit",disabled:Lt,style:{padding:"var(--space-2) var(--space-6)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:Lt?"Creating...":"Create Model"})]})]}):De?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsxs("h2",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",margin:0},children:[h(De)||De.model_name||""," ",t.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-md)",fontWeight:"normal"},children:["(",De.model_code,")"]})]}),t.jsxs("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)",marginTop:"var(--space-1)"},children:[De.brand_name,"  ",I.length," Items"]})]}),t.jsx("button",{onClick:()=>{ja(null),va({consumable_name:"",consumable_inventory_number:"",consumable_status:"active",consumable_warranty_expiry_in_months:"",consumable_name_in_administrative_certificate:"",destruction_certificate_id:0,maintenance_step_id:null}),St(!0)},style:{backgroundColor:"var(--color-primary)",color:"white",border:"none",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:"pointer",fontWeight:"500"},children:"+ Add Item"})]}),t.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"var(--space-4)"},children:[!p&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"var(--space-4)",marginBottom:"var(--space-6)"},children:t.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[t.jsx("div",{style:{fontWeight:"600"},children:"Consumable Type Attributes"}),t.jsx("button",{onClick:()=>we(!Ue),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Assign"})]}),Ue&&t.jsxs("form",{onSubmit:ya,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"consumable_attribute_definition",value:Be.consumable_attribute_definition,onChange:ia,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),G.map(q=>t.jsx("option",{value:q.consumable_attribute_definition_id,children:q.description||`Attribute ${q.consumable_attribute_definition_id}`},q.consumable_attribute_definition_id))]}),t.jsx("input",{type:"text",name:"default_value",placeholder:"Default value",value:Be.default_value,onChange:ia,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"is_mandatory",checked:Be.is_mandatory,onChange:ia}),"Mandatory"]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:Lt,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>we(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),t.jsx("div",{style:{maxHeight:"240px",overflowY:"auto"},children:K.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned."}):K.map(q=>{const v=q.definition||oa.get(q.consumable_attribute_definition);return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(v==null?void 0:v.description)||`Attribute ${q.consumable_attribute_definition}`}),t.jsxs("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:[(v==null?void 0:v.data_type)||"type",v!=null&&v.unit?`  ${v.unit}`:"",q.is_mandatory?"  mandatory":"",q.default_value?`  default: ${q.default_value}`:""]})]}),t.jsx("button",{onClick:()=>ga(q.consumable_type,q.consumable_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${q.consumable_type}-${q.consumable_attribute_definition}`)})})]})}),t.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)",marginBottom:"var(--space-6)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[t.jsx("div",{style:{fontWeight:"600"},children:"Consumable Model Attributes"}),t.jsx("button",{onClick:()=>_(!E),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add Value"})]}),E&&t.jsxs("form",{onSubmit:ht,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"consumable_attribute_definition",value:$e.consumable_attribute_definition,onChange:Vt,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),G.map(q=>t.jsx("option",{value:q.consumable_attribute_definition_id,children:q.description||`Attribute ${q.consumable_attribute_definition_id}`},q.consumable_attribute_definition_id))]}),(()=>{var H;const q=oa.get(Number($e.consumable_attribute_definition)),v=(H=q==null?void 0:q.data_type)==null?void 0:H.toLowerCase();return v==="number"?t.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:$e.value_number,onChange:Vt,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):v==="bool"||v==="boolean"?t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"value_bool",checked:$e.value_bool,onChange:Vt}),"True"]}):v==="date"?t.jsx("input",{type:"date",name:"value_date",value:$e.value_date,onChange:Vt,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):t.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:$e.value_string,onChange:Vt,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:Lt,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>_(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),F.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No model attribute values."}):F.map(q=>{const v=q.definition||oa.get(q.consumable_attribute_definition),H=q.value_string??q.value_number??q.value_bool??q.value_date??"";return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(v==null?void 0:v.description)||`Attribute ${q.consumable_attribute_definition}`}),t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:H===""?"No value":String(H)})]}),t.jsx("button",{onClick:()=>Ia(q.consumable_model,q.consumable_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${q.consumable_model}-${q.consumable_attribute_definition}`)})]})]}),Ge&&t.jsxs("div",{style:{marginBottom:"var(--space-6)",padding:"var(--space-4)",backgroundColor:"var(--color-bg-secondary)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"},children:[t.jsx("div",{style:{fontWeight:"600",marginBottom:"var(--space-4)"},children:Ut?"Edit Consumable":"New Consumable"}),t.jsxs("form",{onSubmit:hs,children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Name"}),t.jsx("input",{type:"text",name:"consumable_name",value:_a.consumable_name,onChange:Xt,placeholder:"Consumable Name",style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Status"}),t.jsxs("select",{name:"consumable_status",value:_a.consumable_status,onChange:Xt,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"},children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"}),t.jsx("option",{value:"maintenance",children:"Maintenance"}),t.jsx("option",{value:"retired",children:"Retired"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Inventory Number"}),t.jsx("input",{type:"text",name:"consumable_inventory_number",value:_a.consumable_inventory_number,onChange:Xt,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Warranty (Months)"}),t.jsx("input",{type:"number",name:"consumable_warranty_expiry_in_months",value:_a.consumable_warranty_expiry_in_months,onChange:Xt,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]})]}),t.jsxs("div",{style:{marginTop:"var(--space-4)",display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",style:{padding:"var(--space-2) var(--space-4)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Save Item"}),t.jsx("button",{type:"button",onClick:()=>St(!1),style:{padding:"var(--space-2) var(--space-4)",backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})]})]}),I.length===0?t.jsx("div",{style:{textAlign:"center",color:"var(--color-text-secondary)",padding:"var(--space-8)"},children:"No consumables found for this model."}):t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"var(--font-size-sm)"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{borderBottom:"2px solid var(--color-border)",textAlign:"left"},children:[t.jsx("th",{style:{padding:"var(--space-2)"},children:"Name"}),t.jsx("th",{style:{padding:"var(--space-2)"},children:"Inventory No."}),t.jsx("th",{style:{padding:"var(--space-2)"},children:"Status"}),t.jsx("th",{style:{padding:"var(--space-2)",textAlign:"right"},children:"Actions"})]})}),t.jsx("tbody",{children:I.map(q=>t.jsxs("tr",{style:{borderBottom:"1px solid var(--color-border)",cursor:"pointer"},onClick:()=>$a(q),children:[t.jsx("td",{style:{padding:"var(--space-3) var(--space-2)"},children:t.jsx("div",{style:{fontWeight:"500"},children:q.consumable_name||"Unnamed Item"})}),t.jsx("td",{style:{padding:"var(--space-3) var(--space-2)"},children:t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:q.consumable_inventory_number})}),t.jsx("td",{style:{padding:"var(--space-3) var(--space-2)"},children:t.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"var(--font-size-xs)",backgroundColor:q.consumable_status==="active"?"rgba(16, 185, 129, 0.15)":"var(--color-bg-secondary)",color:q.consumable_status==="active"?"var(--color-success)":"var(--color-text-secondary)"},children:q.consumable_status})}),t.jsxs("td",{style:{padding:"var(--space-3) var(--space-2)",textAlign:"right"},children:[t.jsx("button",{onClick:v=>{v.stopPropagation(),$a(q)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-text-secondary)",cursor:"pointer",fontWeight:"500"},children:"Attributes"}),t.jsx("button",{onClick:v=>{v.stopPropagation(),za(q)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-primary)",cursor:"pointer",fontWeight:"500"},children:"Edit"}),wt&&t.jsx("button",{onClick:v=>{v.stopPropagation(),Va(q)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-primary)",cursor:"pointer",fontWeight:"500"},children:"Move"}),wa&&(()=>{const v=ka.get(q.consumable_id);return v?t.jsx("button",{onClick:H=>{H.stopPropagation(),tt(v)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontWeight:"500"},children:"Discharge"}):t.jsx("button",{onClick:H=>{H.stopPropagation(),Pe(q);const ve=new Date,Oe=ve.getTimezoneOffset()*6e4,kt=new Date(ve-Oe).toISOString().slice(0,16);He({person:"",start_datetime:kt,condition_on_assignment:q.consumable_status==="active"?"Good":"Needs Repair"}),Ie(!0)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"#10b981",cursor:"pointer",fontWeight:"500"},children:"Assign"})})(),t.jsx("button",{onClick:v=>{v.stopPropagation(),Wa(q.consumable_id)},style:{background:"none",border:"none",color:"#c33",cursor:"pointer",fontWeight:"500"},children:"Delete"})]})]},q.consumable_id))})]})]})]}):Ye?t.jsx("div",{style:{flex:1,overflowY:"auto",padding:"var(--space-4)"},children:t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"var(--space-4)"},children:!p&&t.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[t.jsx("div",{style:{fontWeight:"600"},children:"Consumable Type Attributes"}),t.jsx("button",{onClick:()=>we(!Ue),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Assign"})]}),Ue&&t.jsxs("form",{onSubmit:ya,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"consumable_attribute_definition",value:Be.consumable_attribute_definition,onChange:ia,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),G.map(q=>t.jsx("option",{value:q.consumable_attribute_definition_id,children:q.description||`Attribute ${q.consumable_attribute_definition_id}`},q.consumable_attribute_definition_id))]}),t.jsx("input",{type:"text",name:"default_value",placeholder:"Default value",value:Be.default_value,onChange:ia,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"is_mandatory",checked:Be.is_mandatory,onChange:ia}),"Mandatory"]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:Lt,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>we(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),t.jsx("div",{style:{maxHeight:"240px",overflowY:"auto"},children:K.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned."}):K.map(q=>{const v=q.definition||oa.get(q.consumable_attribute_definition);return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(v==null?void 0:v.description)||`Attribute ${q.consumable_attribute_definition}`}),t.jsxs("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:[(v==null?void 0:v.data_type)||"type",v!=null&&v.unit?`  ${v.unit}`:"",q.is_mandatory?"  mandatory":"",q.default_value?`  default: ${q.default_value}`:""]})]}),t.jsx("button",{onClick:()=>ga(q.consumable_type,q.consumable_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${q.consumable_type}-${q.consumable_attribute_definition}`)})})]})})}):t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--color-text-secondary)"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"var(--space-4)",opacity:.2},children:""}),t.jsx("p",{children:"Select a consumable model from the sidebar to view inventory."})]})})]}),D&&V&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"520px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,marginBottom:"var(--space-4)"},children:[t.jsxs("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:["Move Consumable: ",V.consumable_name||`Consumable ${V.consumable_id}`]}),t.jsx("button",{type:"button",onClick:()=>!B&&Hs(),style:{border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",cursor:"pointer"},children:"Close"})]}),t.jsxs("form",{onSubmit:vs,children:[t.jsxs("div",{style:{marginBottom:"var(--space-6)"},children:[t.jsxs("div",{style:{marginBottom:"var(--space-3)",padding:"var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"2px"},children:"Current room"}),t.jsx("div",{style:{fontWeight:600},children:ne||"Unknown"})]}),t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Destination room"}),t.jsxs("select",{value:ge,onChange:q=>be(q.target.value),required:!0,disabled:B,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[t.jsx("option",{value:"",children:"Select a room..."}),z.map(q=>t.jsx("option",{value:q.room_id,children:q.room_name||`Room ${q.room_id}`},q.room_id))]})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[t.jsx("button",{type:"button",onClick:()=>!B&&Hs(),style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"}),t.jsx("button",{type:"submit",disabled:B||!ge,style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:B?"Moving...":"Move"})]})]})]})}),fe&&dt&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"var(--space-4)"},children:t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"900px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12,marginBottom:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:dt.consumable_name||`Consumable ${dt.consumable_id}`}),t.jsxs("div",{style:{marginTop:6,color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:["ID: ",dt.consumable_id,dt.consumable_inventory_number?`  Inv: ${dt.consumable_inventory_number}`:""]})]}),t.jsx("button",{type:"button",onClick:Ya,style:{border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",cursor:"pointer"},children:"Close"})]}),t.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[t.jsx("div",{style:{fontWeight:"600"},children:"Consumable Attributes"}),t.jsx("button",{onClick:()=>le(!R),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add Value"})]}),R&&t.jsxs("form",{onSubmit:Ta,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"consumable_attribute_definition",value:at.consumable_attribute_definition,onChange:ea,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),G.map(q=>t.jsx("option",{value:q.consumable_attribute_definition_id,children:q.description||`Attribute ${q.consumable_attribute_definition_id}`},q.consumable_attribute_definition_id))]}),(()=>{var H;const q=oa.get(Number(at.consumable_attribute_definition)),v=(H=q==null?void 0:q.data_type)==null?void 0:H.toLowerCase();return v==="number"?t.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:at.value_number,onChange:ea,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):v==="bool"||v==="boolean"?t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"value_bool",checked:at.value_bool,onChange:ea}),"True"]}):v==="date"?t.jsx("input",{type:"date",name:"value_date",value:at.value_date,onChange:ea,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):t.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:at.value_string,onChange:ea,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:Lt,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>le(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),te.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No consumable attribute values."}):te.map(q=>{const v=q.definition||oa.get(q.consumable_attribute_definition),H=q.value_string??q.value_number??q.value_bool??q.value_date??"";return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(v==null?void 0:v.description)||`Attribute ${q.consumable_attribute_definition}`}),t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:H===""?"No value":String(H)})]}),t.jsx("button",{onClick:()=>Zt(q.consumable,q.consumable_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${q.consumable}-${q.consumable_attribute_definition}`)})]})]})}),Ae&&Me&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"520px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[t.jsxs("h2",{style:{marginBottom:"var(--space-4)"},children:["Assign Consumable: ",Me.consumable_name||`Consumable ${Me.consumable_id}`]}),t.jsxs("form",{onSubmit:Ga,children:[t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Assign to Person"}),t.jsxs("select",{name:"person",value:Ne.person,onChange:ys,required:!0,disabled:Lt,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[t.jsx("option",{value:"",children:"Select a person..."}),L.map(q=>t.jsxs("option",{value:q.person_id,children:[q.first_name," ",q.last_name," (",q.person_id,")"]},q.person_id))]})]}),t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Start Date (Automatic)"}),t.jsx("input",{type:"datetime-local",name:"start_datetime",value:Ne.start_datetime,onChange:ys,required:!0,readOnly:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-secondary)",cursor:"not-allowed",color:"var(--color-text)"}})]}),t.jsxs("div",{style:{marginBottom:"var(--space-6)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Condition"}),t.jsx("input",{type:"text",name:"condition_on_assignment",value:Ne.condition_on_assignment,onChange:ys,placeholder:"e.g. Good, New",required:!0,disabled:Lt,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[t.jsx("button",{type:"button",onClick:()=>{Ie(!1),Pe(null)},style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer",color:"var(--color-text)"},children:"Cancel"}),t.jsx("button",{type:"submit",disabled:Lt,style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:Lt?"Assigning...":"Assign Consumable"})]})]})]})}),ze&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"420px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[t.jsx("h2",{style:{marginBottom:"var(--space-4)"},children:"Confirm Discharge"}),t.jsxs("p",{style:{marginBottom:"var(--space-6)"},children:["Are you sure you want to end the assignment of ",t.jsx("strong",{children:((Es=ze.consumable)==null?void 0:Es.consumable_name)||"Consumable"})," to person ",t.jsx("strong",{children:ze.person}),"?",t.jsx("br",{}),t.jsx("br",{}),"The end date will be set to right now."]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[t.jsx("button",{type:"button",onClick:()=>tt(null),style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer",color:"var(--color-text)"},children:"Cancel"}),t.jsx("button",{type:"button",onClick:()=>bs(ze.assignment_id),disabled:Lt,style:{padding:"var(--space-2) var(--space-4)",background:"#ef4444",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:Lt?"Discharging...":"Confirm Discharge"})]})]})})]})},bj=()=>{const r=Dt(),[l,u]=c.useState([]),[d,m]=c.useState([]),[p,h]=c.useState(null),[g,b]=c.useState([]),[y,x]=c.useState(!1),[S,N]=c.useState(!1),[I,k]=c.useState(null),[L,w]=c.useState(!1),[O,P]=c.useState(!1),[z,M]=c.useState(!1),[G,ee]=c.useState({consumable_type_label:"",consumable_type_code:""}),[K,re]=c.useState({description:"",data_type:"",unit:""}),[F,T]=c.useState(!1),[te,de]=c.useState({consumable_attribute_definition:"",is_mandatory:!1,default_value:""});c.useEffect(()=>{he(),X()},[]);const he=async()=>{N(!0),k(null);try{const B=await Ks.getAll();u(Array.isArray(B)?B:[])}catch(B){k("Failed to fetch consumable types: "+B.message),u([])}finally{N(!1)}},_e=async B=>{x(!0),k(null);try{const se=await gn.getByConsumableType(B);b(Array.isArray(se)?se:[])}catch(se){k("Failed to fetch type attributes: "+se.message),b([])}finally{x(!1)}},ye=B=>{const{name:se,value:Ae,type:Ie,checked:Me}=B.target;de(Pe=>({...Pe,[se]:Ie==="checkbox"?Me:Ae}))},j=async B=>{if(B.preventDefault(),!p){k("Please select a consumable type first");return}if(!te.consumable_attribute_definition){k("Please select an attribute definition");return}M(!0),k(null);try{const se={consumable_type:p.consumable_type_id,consumable_attribute_definition:Number(te.consumable_attribute_definition),is_mandatory:!!te.is_mandatory,default_value:te.default_value||null};await gn.create(se),de({consumable_attribute_definition:"",is_mandatory:!1,default_value:""}),T(!1),await _e(p.consumable_type_id)}catch(se){k("Failed to add type attribute: "+se.message)}finally{M(!1)}},D=async B=>{if(p&&window.confirm("Remove this attribute from the consumable type?"))try{await gn.delete(p.consumable_type_id,B),await _e(p.consumable_type_id)}catch(se){k("Failed to remove type attribute: "+se.message)}},X=async()=>{try{const B=await fr.getAll();m(Array.isArray(B)?B:[])}catch(B){k("Failed to fetch attribute definitions: "+B.message),m([])}},V=B=>{const{name:se,value:Ae}=B.target;ee(Ie=>({...Ie,[se]:Ae}))},me=async B=>{var se,Ae;B.preventDefault(),M(!0),k(null);try{await Ks.create(G),ee({consumable_type_label:"",consumable_type_code:""}),w(!1),await he()}catch(Ie){k("Failed to create consumable type: "+(((Ae=(se=Ie.response)==null?void 0:se.data)==null?void 0:Ae.error)||Ie.message))}finally{M(!1)}},A=async B=>{if(window.confirm("Are you sure you want to delete this consumable type?"))try{await Ks.delete(B),await he()}catch(se){k("Failed to delete consumable type: "+se.message)}},Y=B=>{r(`/dashboard/consumables/models?typeId=${B.consumable_type_id}`)},ne=async B=>{h(B),T(!1),de({consumable_attribute_definition:"",is_mandatory:!1,default_value:""}),await _e(B.consumable_type_id)},U=new Set((Array.isArray(g)?g:[]).map(B=>B.consumable_attribute_definition)),ge=(Array.isArray(d)?d:[]).filter(B=>!U.has(B.consumable_attribute_definition_id)),be=()=>{r("/dashboard/consumables/attribute-definitions")};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Consumables"}),t.jsx("p",{className:"page-subtitle",children:"Select a consumable type"})]}),I&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:I}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Types"}),t.jsx("button",{onClick:()=>w(!L),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Consumable Type",children:"+"})]}),L&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:me,children:[t.jsx("input",{type:"text",name:"consumable_type_label",value:G.consumable_type_label,onChange:V,placeholder:"Type Name",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsx("input",{type:"text",name:"consumable_type_code",value:G.consumable_type_code,onChange:V,placeholder:"Code (e.g. PPR)",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:z,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>w(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[l.map(B=>t.jsxs("div",{onClick:()=>Y(B),style:{padding:"var(--space-3) var(--space-4)",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsx("span",{style:{fontWeight:"500"},children:B.consumable_type_label}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("button",{onClick:se=>{se.stopPropagation(),ne(B)},style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Attributes"}),t.jsx("button",{onClick:se=>{se.stopPropagation(),A(B.consumable_type_id)},style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]})]},B.consumable_type_id)),l.length===0&&!S&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No consumable types."})]})]}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsxs("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:["Type Attributes ",p?` ${p.consumable_type_label}`:""]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{onClick:()=>T(B=>!B),disabled:!p,style:{border:"none",background:"none",color:"var(--color-primary)",cursor:p?"pointer":"not-allowed",opacity:p?1:.6},children:"+ Add"}),t.jsx("button",{onClick:be,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Manage"})]})]}),t.jsx("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:p?t.jsxs(t.Fragment,{children:[F&&t.jsxs("form",{onSubmit:j,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"consumable_attribute_definition",value:te.consumable_attribute_definition,onChange:ye,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),ge.map(B=>t.jsx("option",{value:B.consumable_attribute_definition_id,children:B.description||`Attribute ${B.consumable_attribute_definition_id}`},B.consumable_attribute_definition_id))]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"is_mandatory",checked:te.is_mandatory,onChange:ye}),"Mandatory"]}),t.jsx("input",{type:"text",name:"default_value",placeholder:"Default value (optional)",value:te.default_value,onChange:ye,style:{padding:"var(--space-2)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:z,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>T(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),y&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!y&&g.length===0&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned to this type."}),!y&&g.map(B=>{const se=B.definition||d.find(Ae=>Ae.consumable_attribute_definition_id===B.consumable_attribute_definition);return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(se==null?void 0:se.description)||`Attribute ${B.consumable_attribute_definition}`}),t.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[(se==null?void 0:se.data_type)||"n/a",se!=null&&se.unit?`  ${se.unit}`:"",B.is_mandatory?"  mandatory":"",B.default_value?`  default: ${B.default_value}`:""]})]}),t.jsx("button",{onClick:()=>D(B.consumable_attribute_definition),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},`${B.consumable_type}-${B.consumable_attribute_definition}`)})]}):t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:'Click "Attributes" on a type to view its attributes.'})})]})]})]})},vj=()=>{const r=Dt(),l=qa(),d=c.useMemo(()=>new URLSearchParams(l.search),[l.search]).get("typeId"),[m,p]=c.useState(null),[h,g]=c.useState([]),[b,y]=c.useState([]),[x,S]=c.useState(!1),[N,I]=c.useState(null),[k,L]=c.useState(!1),[w,O]=c.useState(!1),[P,z]=c.useState({consumable_attribute_definition:"",is_mandatory:!1,default_value:""});c.useEffect(()=>{if(!d){I("typeId is required");return}M()},[d]);const M=async()=>{S(!0),I(null);try{const[T,te,de]=await Promise.all([Ks.getById(d),fr.getAll(),gn.getByConsumableType(d)]);p(T),y(Array.isArray(te)?te:[]),g(Array.isArray(de)?de:[])}catch(T){I("Failed to load type attributes: "+T.message)}finally{S(!1)}},G=T=>{const{name:te,value:de,type:he,checked:_e}=T.target;z(ye=>({...ye,[te]:he==="checkbox"?_e:de}))},ee=async T=>{if(T.preventDefault(),!P.consumable_attribute_definition){I("Please select an attribute definition");return}O(!0),I(null);try{const te={consumable_type:Number(d),consumable_attribute_definition:Number(P.consumable_attribute_definition),is_mandatory:P.is_mandatory,default_value:P.default_value||null};await gn.create(te),z({consumable_attribute_definition:"",is_mandatory:!1,default_value:""}),L(!1),await M()}catch(te){I("Failed to add attribute to type: "+te.message)}finally{O(!1)}},K=async T=>{if(window.confirm("Remove this attribute from the consumable type?"))try{await gn.delete(Number(d),Number(T)),await M()}catch(te){I("Failed to remove type attribute: "+te.message)}},re=c.useMemo(()=>new Set(h.map(T=>T.consumable_attribute_definition)),[h]),F=c.useMemo(()=>b.filter(T=>!re.has(T.consumable_attribute_definition_id)),[b,re]);return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"flex-end",gap:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("h1",{className:"page-title",children:"Consumable Type Attributes"}),t.jsxs("p",{className:"page-subtitle",children:[m?m.consumable_type_label:"Type","  Manage attributes"]})]}),t.jsx("button",{onClick:()=>r("/dashboard/consumables/types"),style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back to Types","aria-label":"Back to Types",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})]}),N&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:N}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Attributes"}),t.jsx("button",{onClick:()=>L(!k),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add"})]}),k&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:ee,children:[t.jsxs("select",{name:"consumable_attribute_definition",value:P.consumable_attribute_definition,onChange:G,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition"}),F.map(T=>t.jsxs("option",{value:T.consumable_attribute_definition_id,children:[T.description," (",T.data_type||"n/a",T.unit?`  ${T.unit}`:"",")"]},T.consumable_attribute_definition_id))]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"is_mandatory",checked:P.is_mandatory,onChange:G}),"Mandatory"]}),t.jsx("input",{type:"text",name:"default_value",placeholder:"Default value (optional)",value:P.default_value,onChange:G,style:{padding:"var(--space-2)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:w,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>L(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:[x&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!x&&h.length===0&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned to this type."}),h.map(T=>{var te,de,he;return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:((te=T.definition)==null?void 0:te.description)||`Definition ${T.consumable_attribute_definition}`}),t.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[((de=T.definition)==null?void 0:de.data_type)||"n/a",(he=T.definition)!=null&&he.unit?`  ${T.definition.unit}`:"",T.is_mandatory?"  mandatory":"",T.default_value?`  default: ${T.default_value}`:""]})]}),t.jsx("button",{onClick:()=>K(T.consumable_attribute_definition),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},T.consumable_attribute_definition)})]})]})]})},gj=()=>{const r=Dt(),[l]=Bs(),u=l.get("typeId"),d=E=>[E==null?void 0:E.brand_name,E==null?void 0:E.model_name].filter(Boolean).join(" "),[m,p]=c.useState(null),[h,g]=c.useState([]),[b,y]=c.useState(null),[x,S]=c.useState([]),[N,I]=c.useState([]),[k,L]=c.useState([]),[w,O]=c.useState(!1),[P,z]=c.useState(!1),[M,G]=c.useState({consumable_brand:"",model_name:"",model_code:""}),[ee,K]=c.useState(!1),[re,F]=c.useState({consumable_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[T,te]=c.useState(!1),[de,he]=c.useState(null),[_e,ye]=c.useState(!1),[j,D]=c.useState(!1),[X,V]=c.useState(!1),[me,A]=c.useState({brand_name:""}),Y=E=>String(E||"").trim().toUpperCase().replace(/\s+/g,"_").replace(/[^A-Z0-9_\-]/g,"").slice(0,16);c.useEffect(()=>{u&&ne(u)},[u]),c.useEffect(()=>{be(),B()},[]),c.useEffect(()=>{if(!b){L([]),K(!1),F({consumable_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""});return}se(b.consumable_model_id)},[b]);const ne=async E=>{te(!0),he(null);try{const[_,R]=await Promise.all([Ks.getAll(),ts.getByConsumableType(E)]),fe=(Array.isArray(_)?_:[]).find(Re=>String(Re.consumable_type_id)===String(E))||null;p(fe),g(Array.isArray(R)?R:[]),y(null)}catch(_){he("Failed to fetch consumable models: "+_.message),p(null),g([]),y(null)}finally{te(!1)}},U=E=>{const{name:_,value:R}=E.target;A(le=>({...le,[_]:R}))},ge=async E=>{var R,le,fe;if(E.preventDefault(),!sa.isSuperuser())return;const _=(R=me.brand_name)==null?void 0:R.trim();if(!_){he("Please enter a brand name");return}V(!0),he(null);try{await ou.create({brand_name:_,brand_code:Y(_),is_active:!0}),A({brand_name:""}),D(!1),await B()}catch(Re){he("Failed to create consumable brand: "+(((fe=(le=Re.response)==null?void 0:le.data)==null?void 0:fe.error)||Re.message))}finally{V(!1)}},be=async()=>{try{const E=await fr.getAll();I(Array.isArray(E)?E:[])}catch{I([])}},B=async()=>{try{const E=await ou.getAll();S(Array.isArray(E)?E:[])}catch{S([])}},se=async E=>{try{const _=await Pr.getByConsumableModel(E);L(Array.isArray(_)?_:[])}catch(_){he("Failed to fetch consumable model attributes: "+_.message),L([])}},Ae=E=>{const{name:_,value:R,type:le,checked:fe}=E.target;F(Re=>({...Re,[_]:le==="checkbox"?fe:R}))},Ie=E=>{const{name:_,value:R}=E.target;G(le=>({...le,[_]:R}))},Me=async E=>{var _,R;if(E.preventDefault(),!!u){if(!M.consumable_brand){he("Please select a brand");return}z(!0),he(null);try{const le={consumable_type:Number(u),consumable_brand:Number(M.consumable_brand),model_name:M.model_name||null,model_code:M.model_code||null};await ts.create(le),G({consumable_brand:"",model_name:"",model_code:""}),O(!1),await ne(u)}catch(le){he("Failed to create consumable model: "+(((R=(_=le.response)==null?void 0:_.data)==null?void 0:R.error)||le.message))}finally{z(!1)}}},Pe=async E=>{if(E.preventDefault(),!b){he("Please select a consumable model first");return}if(!re.consumable_attribute_definition){he("Please select an attribute definition");return}ye(!0),he(null);try{const _={consumable_model:b.consumable_model_id,consumable_attribute_definition:Number(re.consumable_attribute_definition),value_string:re.value_string||null,value_number:re.value_number?Number(re.value_number):null,value_bool:re.value_bool,value_date:re.value_date||null};await Pr.create(_),F({consumable_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),K(!1),await se(b.consumable_model_id)}catch(_){he("Failed to add model attribute value: "+_.message)}finally{ye(!1)}},ze=async(E,_)=>{if(window.confirm("Remove this attribute value from the consumable model?"))try{await Pr.delete(E,_),b&&await se(b.consumable_model_id)}catch(R){he("Failed to remove consumable model attribute: "+R.message)}},tt=c.useMemo(()=>{const E=new Map;return(Array.isArray(N)?N:[]).forEach(_=>{E.set(_.consumable_attribute_definition_id,_)}),E},[N]),Ne=c.useMemo(()=>{if(!b)return N;const E=new Set((Array.isArray(k)?k:[]).map(_=>_.consumable_attribute_definition));return(Array.isArray(N)?N:[]).filter(_=>!E.has(_.consumable_attribute_definition_id))},[N,k,b]),He=()=>{r("/dashboard/consumables/types")},Ue=E=>{r(`/dashboard/consumables/instances?typeId=${u}&modelId=${E.consumable_model_id}`)},we=E=>{r(`/dashboard/consumables/models/${E.consumable_model_id}/compatibility?typeId=${u}`)};return u?t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Consumables"}),t.jsxs("p",{className:"page-subtitle",children:["Select a model",m!=null&&m.consumable_type_label?` for ${m.consumable_type_label}`:""]})]}),de&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:de}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsxs("div",{style:{display:"flex",gap:"var(--space-3)",alignItems:"center"},children:[t.jsx("button",{onClick:He,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})}),t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Models"})]}),t.jsx("button",{onClick:()=>O(E=>!E),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Model",children:"+"})]}),w&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:Me,children:[t.jsxs("select",{name:"consumable_brand",value:M.consumable_brand,onChange:Ie,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select brand..."}),x.map(E=>t.jsx("option",{value:E.consumable_brand_id,children:E.brand_name},E.consumable_brand_id))]}),t.jsx("input",{type:"text",name:"model_name",value:M.model_name,onChange:Ie,placeholder:"Model Name",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsx("input",{type:"text",name:"model_code",value:M.model_code,onChange:Ie,placeholder:"Model Code",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:P,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>O(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[h.map(E=>t.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[t.jsx("span",{style:{fontWeight:"500"},children:d(E)||`Model ${E.consumable_model_id}`}),t.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:E.model_code})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{onClick:()=>y(E),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:(b==null?void 0:b.consumable_model_id)===E.consumable_model_id?"var(--color-bg-secondary)":"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Attributes"}),t.jsx("button",{onClick:()=>we(E),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Compatibility"}),t.jsx("button",{onClick:()=>Ue(E),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Instances"})]})]},E.consumable_model_id)),h.length===0&&!T&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No models."})]})]}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsxs("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:["Model Attributes ",b?` ${d(b)||b.model_name||""}`:""]}),t.jsx("button",{onClick:()=>K(E=>!E),disabled:!b,style:{border:"none",background:"none",color:"var(--color-primary)",cursor:b?"pointer":"not-allowed",opacity:b?1:.6},children:"+ Add Value"})]}),t.jsx("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:b?t.jsxs(t.Fragment,{children:[ee&&t.jsxs("form",{onSubmit:Pe,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"consumable_attribute_definition",value:re.consumable_attribute_definition,onChange:Ae,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),Ne.map(E=>t.jsx("option",{value:E.consumable_attribute_definition_id,children:E.description||`Attribute ${E.consumable_attribute_definition_id}`},E.consumable_attribute_definition_id))]}),(()=>{var R;const E=tt.get(Number(re.consumable_attribute_definition)),_=(R=E==null?void 0:E.data_type)==null?void 0:R.toLowerCase();return _==="number"?t.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:re.value_number,onChange:Ae,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):_==="bool"||_==="boolean"?t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"value_bool",checked:re.value_bool,onChange:Ae}),"True"]}):_==="date"?t.jsx("input",{type:"date",name:"value_date",value:re.value_date,onChange:Ae,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):t.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:re.value_string,onChange:Ae,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:_e,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>K(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),k.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No model attribute values."}):k.map(E=>{const _=E.definition||tt.get(E.consumable_attribute_definition),R=E.value_string??E.value_number??E.value_bool??E.value_date??"";return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(_==null?void 0:_.description)||`Attribute ${E.consumable_attribute_definition}`}),t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:R===""?"No value":String(R)})]}),t.jsx("button",{onClick:()=>ze(E.consumable_model,E.consumable_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${E.consumable_model}-${E.consumable_attribute_definition}`)})]}):t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Select a model to view or add values."})})]}),sa.isSuperuser()&&t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",gridColumn:"1 / -1"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Brands"}),t.jsx("button",{onClick:()=>D(E=>!E),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},title:"Add Brand",children:"+ Add Brand"})]}),t.jsxs("div",{style:{padding:"var(--space-4)"},children:[j&&t.jsxs("form",{onSubmit:ge,children:[t.jsx("input",{type:"text",name:"brand_name",value:me.brand_name,onChange:U,placeholder:"Brand Name",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:X,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>D(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),!j&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Add brands to populate the brand selector when creating models."})]})]})]})]}):t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Consumables"}),t.jsx("p",{className:"page-subtitle",children:"Select a type first"})]}),t.jsx("div",{className:"card",style:{padding:"var(--space-6)"},children:t.jsx("button",{onClick:He,style:{padding:"var(--space-2) var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer",width:"fit-content"},title:"Back to types","aria-label":"Back to types",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})})]})},xj=()=>{const r=Dt(),{modelId:l}=yr(),[u]=Bs(),d=u.get("typeId"),[m,p]=c.useState(null),[h,g]=c.useState([]),[b,y]=c.useState([]),[x,S]=c.useState(""),[N,I]=c.useState(!1),[k,L]=c.useState(!1),[w,O]=c.useState(null),P=sa.isSuperuser(),z=()=>{if(d){r(`/dashboard/consumables/models?typeId=${d}`);return}r(-1)},M=c.useCallback(async()=>{if(l){L(!0),O(null);try{const[F,T,te]=await Promise.all([ts.getById(l),ts.getCompatibleAssetModels(l),ft.getAll()]);p(F||null),g(Array.isArray(T)?T:[]),y(Array.isArray(te)?te:[])}catch(F){O("Failed to fetch compatibility: "+F.message)}finally{L(!1)}}},[l]);c.useEffect(()=>{M()},[M]);const G=c.useMemo(()=>new Set((Array.isArray(h)?h:[]).map(F=>F.asset_model_id)),[h]),ee=c.useMemo(()=>(Array.isArray(b)?b:[]).filter(F=>!G.has(F.asset_model_id)),[b,G]),K=async()=>{if(x){O(null);try{await ts.addCompatibleAssetModel(l,Number(x)),S(""),I(!1),await M()}catch(F){O("Failed to add compatible asset model: "+F.message)}}},re=async F=>{O(null);try{await ts.removeCompatibleAssetModel(l,F),await M()}catch(T){O("Failed to remove compatible asset model: "+T.message)}};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Consumables"}),t.jsxs("p",{className:"page-subtitle",children:["Compatibility ",m!=null&&m.model_name?` ${m.model_name}`:""]})]}),w&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:w}),t.jsx("div",{className:"card",style:{padding:"var(--space-4)",marginBottom:"var(--space-4)"},children:t.jsx("button",{onClick:z,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Compatible Asset Models"}),P&&!N&&t.jsx("button",{onClick:()=>I(!0),style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add compatible model"})]}),P&&N&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsxs("select",{value:x,onChange:F=>S(F.target.value),style:{flex:1,padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select asset model..."}),ee.map(F=>t.jsx("option",{value:F.asset_model_id,children:F.model_name||`Model ${F.asset_model_id}`},F.asset_model_id))]}),t.jsx("button",{onClick:K,disabled:!x||k,style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add"}),t.jsx("button",{onClick:()=>{I(!1),S("")},style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[(Array.isArray(h)?h:[]).map(F=>t.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[t.jsx("span",{style:{fontWeight:"500"},children:F.model_name}),t.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:F.model_code})]}),P&&t.jsx("button",{onClick:()=>re(F.asset_model_id),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},F.asset_model_id)),h.length===0&&!k&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No compatible asset models."})]})]})]})},_j=()=>{const[r,l]=c.useState([]),[u,d]=c.useState(!1),[m,p]=c.useState(null),[h,g]=c.useState(!1),[b,y]=c.useState(!1),[x,S]=c.useState({description:"",data_type:"",unit:""});c.useEffect(()=>{N()},[]);const N=async()=>{d(!0),p(null);try{const w=await fr.getAll();l(Array.isArray(w)?w:[])}catch(w){p("Failed to fetch attribute definitions: "+w.message),l([])}finally{d(!1)}},I=w=>{const{name:O,value:P}=w.target;S(z=>({...z,[O]:P}))},k=async w=>{w.preventDefault(),y(!0),p(null);try{const O={description:x.description||null,data_type:x.data_type||null,unit:x.unit||null};await fr.create(O),S({description:"",data_type:"",unit:""}),g(!1),await N()}catch(O){p("Failed to create attribute definition: "+O.message)}finally{y(!1)}},L=async w=>{if(window.confirm("Delete this attribute definition?"))try{await fr.delete(w),await N()}catch(O){p("Failed to delete attribute definition: "+O.message)}};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Consumable Attribute Definitions"}),t.jsx("p",{className:"page-subtitle",children:"Manage consumable attribute definitions"})]}),m&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:m}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Definitions"}),t.jsx("button",{onClick:()=>g(!h),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add"})]}),h&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:k,children:[t.jsx("input",{type:"text",name:"description",placeholder:"Description",value:x.description,onChange:I,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)"},children:[t.jsxs("select",{name:"data_type",value:x.data_type,onChange:I,style:{padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Data Type"}),t.jsx("option",{value:"string",children:"String"}),t.jsx("option",{value:"number",children:"Number"}),t.jsx("option",{value:"bool",children:"Boolean"}),t.jsx("option",{value:"date",children:"Date"})]}),t.jsx("input",{type:"text",name:"unit",placeholder:"Unit",value:x.unit,onChange:I,style:{padding:"var(--space-2)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:b,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>g(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:[u&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!u&&r.length===0&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attribute definitions."}),r.map(w=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:w.description}),t.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[w.data_type,w.unit?`  ${w.unit}`:""]})]}),t.jsx("button",{onClick:()=>L(w.consumable_attribute_definition_id),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},w.consumable_attribute_definition_id))]})]})]})},jj=()=>{const[r,l]=c.useState([]),[u,d]=c.useState([]),[m,p]=c.useState(!1),[h,g]=c.useState(null),[b,y]=c.useState(!1),[x,S]=c.useState(null),[N,I]=c.useState(!1),[k,L]=c.useState({room_name:"",room_type:""});c.useEffect(()=>{O(),w()},[]);const w=async()=>{try{const K=await Q_.getAll();d(Array.isArray(K)?K:[])}catch{d([])}},O=async()=>{p(!0),g(null);try{const K=await qs.getAll();l(Array.isArray(K)?K:[])}catch(K){g("Failed to fetch rooms: "+K.message),l([])}finally{p(!1)}},P=K=>{const{name:re,value:F}=K.target;L(T=>({...T,[re]:F}))},z=async K=>{var re,F;K.preventDefault(),I(!0),g(null);try{x?await qs.update(x,k):await qs.create(k),L({room_name:"",room_type:""}),y(!1),S(null),await O()}catch(T){g("Failed to save room: "+(((F=(re=T.response)==null?void 0:re.data)==null?void 0:F.error)||T.message))}finally{I(!1)}},M=K=>{L({room_name:K.room_name,room_type:K.room_type||""}),S(K.room_id),y(!0)},G=async K=>{if(window.confirm("Are you sure you want to delete this room?"))try{await qs.delete(K),await O()}catch(re){g("Failed to delete room: "+re.message)}},ee=()=>{L({room_name:"",room_type:""}),y(!1),S(null)};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",children:[t.jsx("h1",{className:"page-title",children:"Rooms"}),t.jsx("p",{className:"page-subtitle",children:"Manage building rooms"})]}),h&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-6)",border:"1px solid #fcc"},children:h}),t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"var(--space-4)",borderBottom:"1px solid var(--color-border)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",margin:0},children:"All Rooms"}),t.jsx("button",{onClick:()=>{b?ee():y(!0)},style:{backgroundColor:b?"var(--color-text-secondary)":"var(--color-primary)",color:"white",border:"none",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:"pointer",fontSize:"var(--font-size-xs)",fontWeight:"500",whiteSpace:"nowrap"},children:b?"Cancel":"+ New Room"})]}),b&&t.jsx("div",{style:{padding:"var(--space-6)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-secondary)"},children:t.jsxs("form",{onSubmit:z,children:[t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontSize:"var(--font-size-sm)",fontWeight:"500"},children:"Room Name *"}),t.jsx("input",{type:"text",name:"room_name",value:k.room_name,onChange:P,required:!0,placeholder:"e.g., Conference Room A",maxLength:"30",style:{width:"100%",padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",fontSize:"var(--font-size-sm)",boxSizing:"border-box",fontFamily:"inherit"}})]}),t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontSize:"var(--font-size-sm)",fontWeight:"500"},children:"Room Type *"}),t.jsxs("select",{name:"room_type",value:k.room_type,onChange:P,required:!0,style:{width:"100%",padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",fontSize:"var(--font-size-sm)",boxSizing:"border-box",fontFamily:"inherit"},children:[t.jsx("option",{value:"",children:"Select a room type"}),u.map(K=>t.jsx("option",{value:K.room_type_id,children:K.room_type_label},K.room_type_id))]})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:N,style:{flex:1,backgroundColor:N?"var(--color-text-secondary)":"var(--color-primary)",color:"white",border:"none",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:N?"default":"pointer",fontSize:"var(--font-size-sm)",fontWeight:"500",opacity:N?.6:1},children:N?"Saving...":x?"Update":"Create"}),t.jsx("button",{type:"button",onClick:ee,style:{flex:1,backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",border:"1px solid var(--color-border)",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:"pointer",fontSize:"var(--font-size-sm)",fontWeight:"500"},children:"Cancel"})]})]})}),t.jsx("div",{className:"card-body",style:{padding:0},children:m?t.jsx("div",{style:{textAlign:"center",padding:"var(--space-6)",color:"var(--color-text-secondary)"},children:"Loading..."}):r.length===0?t.jsx("div",{style:{textAlign:"center",padding:"var(--space-6)",color:"var(--color-text-secondary)"},children:"No rooms found"}):t.jsxs("div",{children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 200px 100px",gap:"var(--space-3)",padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-secondary)",fontWeight:"600",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",textTransform:"uppercase",letterSpacing:"0.5px"},children:[t.jsx("div",{children:"Room Name"}),t.jsx("div",{children:"Room Type"}),t.jsx("div",{children:"Actions"})]}),r.map((K,re)=>t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 200px 100px",gap:"var(--space-3)",padding:"var(--space-4)",borderBottom:re<r.length-1?"1px solid var(--color-border)":"none",alignItems:"center",transition:"background-color 0.2s"},onMouseEnter:F=>{F.currentTarget.style.backgroundColor="var(--color-bg-secondary)"},onMouseLeave:F=>{F.currentTarget.style.backgroundColor="transparent"},children:[t.jsx("div",{children:t.jsx("div",{style:{fontSize:"var(--font-size-sm)",fontWeight:"500"},children:K.room_name})}),t.jsx("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)"},children:K.room_type_label||K.room_type}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{onClick:()=>M(K),style:{backgroundColor:"transparent",color:"var(--color-primary)",border:"none",padding:"var(--space-1) var(--space-2)",cursor:"pointer",fontSize:"var(--font-size-xs)",opacity:.7,transition:"opacity 0.2s"},onMouseEnter:F=>{F.target.style.opacity=1},onMouseLeave:F=>{F.target.style.opacity=.7},children:"Edit"}),t.jsx("button",{onClick:()=>G(K.room_id),style:{backgroundColor:"transparent",color:"#c33",border:"none",padding:"var(--space-1) var(--space-2)",cursor:"pointer",fontSize:"var(--font-size-xs)",opacity:.7,transition:"opacity 0.2s"},onMouseEnter:F=>{F.target.style.opacity=1},onMouseLeave:F=>{F.target.style.opacity=.7},children:"Delete"})]})]},K.room_id))]})})]})]})},Sj=()=>{const[r,l]=c.useState([]),[u,d]=c.useState(!1),[m,p]=c.useState(null),[h,g]=c.useState(!1),[b,y]=c.useState(null),[x,S]=c.useState(!1),[N,I]=c.useState({position_label:"",position_code:"",description:""});c.useEffect(()=>{k()},[]);const k=async()=>{d(!0),p(null);try{const M=await hi.getAll();l(Array.isArray(M)?M:[])}catch(M){p("Failed to fetch positions: "+M.message),l([])}finally{d(!1)}},L=M=>{const{name:G,value:ee}=M.target;I(K=>({...K,[G]:ee}))},w=async M=>{var G,ee;M.preventDefault(),S(!0),p(null);try{b?await hi.update(b,N):await hi.create(N),I({position_label:"",position_code:"",description:""}),g(!1),y(null),await k()}catch(K){p("Failed to save position: "+(((ee=(G=K.response)==null?void 0:G.data)==null?void 0:ee.error)||K.message))}finally{S(!1)}},O=M=>{I({position_label:M.position_label,position_code:M.position_code,description:M.description||""}),y(M.position_id),g(!0)},P=async M=>{if(window.confirm("Are you sure you want to delete this position?"))try{await hi.delete(M),await k()}catch(G){p("Failed to delete position: "+G.message)}},z=()=>{I({position_label:"",position_code:"",description:""}),g(!1),y(null)};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",children:[t.jsx("h1",{className:"page-title",children:"Positions"}),t.jsx("p",{className:"page-subtitle",children:"Manage job positions in the organization"})]}),m&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-6)",border:"1px solid #fcc"},children:m}),t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"var(--space-4)",borderBottom:"1px solid var(--color-border)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",margin:0},children:"All Positions"}),t.jsx("button",{onClick:()=>{h?z():g(!0)},style:{backgroundColor:h?"var(--color-text-secondary)":"var(--color-primary)",color:"white",border:"none",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:"pointer",fontSize:"var(--font-size-xs)",fontWeight:"500",whiteSpace:"nowrap"},children:h?"Cancel":"+ New Position"})]}),h&&t.jsx("div",{style:{padding:"var(--space-6)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-secondary)"},children:t.jsxs("form",{onSubmit:w,children:[t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontSize:"var(--font-size-sm)",fontWeight:"500"},children:"Position Label *"}),t.jsx("input",{type:"text",name:"position_label",value:N.position_label,onChange:L,required:!0,placeholder:"e.g., Software Engineer",style:{width:"100%",padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",fontSize:"var(--font-size-sm)",boxSizing:"border-box",fontFamily:"inherit"}})]}),t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontSize:"var(--font-size-sm)",fontWeight:"500"},children:"Position Code *"}),t.jsx("input",{type:"text",name:"position_code",value:N.position_code,onChange:L,required:!0,placeholder:"e.g., SE",maxLength:"48",style:{width:"100%",padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",fontSize:"var(--font-size-sm)",boxSizing:"border-box",fontFamily:"inherit"}})]}),t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontSize:"var(--font-size-sm)",fontWeight:"500"},children:"Description"}),t.jsx("textarea",{name:"description",value:N.description,onChange:L,placeholder:"Optional description for this position",rows:"3",maxLength:"256",style:{width:"100%",padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",fontSize:"var(--font-size-sm)",boxSizing:"border-box",fontFamily:"inherit",resize:"vertical"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:x,style:{flex:1,backgroundColor:x?"var(--color-text-secondary)":"var(--color-primary)",color:"white",border:"none",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:x?"default":"pointer",fontSize:"var(--font-size-sm)",fontWeight:"500",opacity:x?.6:1},children:x?"Saving...":b?"Update":"Create"}),t.jsx("button",{type:"button",onClick:z,style:{flex:1,backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",border:"1px solid var(--color-border)",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:"pointer",fontSize:"var(--font-size-sm)",fontWeight:"500"},children:"Cancel"})]})]})}),t.jsx("div",{className:"card-body",style:{padding:0},children:u?t.jsx("div",{style:{textAlign:"center",padding:"var(--space-6)",color:"var(--color-text-secondary)"},children:"Loading..."}):r.length===0?t.jsx("div",{style:{textAlign:"center",padding:"var(--space-6)",color:"var(--color-text-secondary)"},children:"No positions found"}):t.jsxs("div",{children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 150px 150px 100px",gap:"var(--space-3)",padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-secondary)",fontWeight:"600",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",textTransform:"uppercase",letterSpacing:"0.5px"},children:[t.jsx("div",{children:"Position"}),t.jsx("div",{children:"Code"}),t.jsx("div",{children:"Description"}),t.jsx("div",{children:"Actions"})]}),r.map((M,G)=>t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 150px 150px 100px",gap:"var(--space-3)",padding:"var(--space-4)",borderBottom:G<r.length-1?"1px solid var(--color-border)":"none",alignItems:"center",transition:"background-color 0.2s"},onMouseEnter:ee=>{ee.currentTarget.style.backgroundColor="var(--color-bg-secondary)"},onMouseLeave:ee=>{ee.currentTarget.style.backgroundColor="transparent"},children:[t.jsx("div",{children:t.jsx("div",{style:{fontSize:"var(--font-size-sm)",fontWeight:"500"},children:M.position_label})}),t.jsx("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)"},children:M.position_code}),t.jsx("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)",maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:M.description||""}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{onClick:()=>O(M),style:{backgroundColor:"transparent",color:"var(--color-primary)",border:"none",padding:"var(--space-1) var(--space-2)",cursor:"pointer",fontSize:"var(--font-size-xs)",opacity:.7,transition:"opacity 0.2s"},onMouseEnter:ee=>{ee.target.style.opacity=1},onMouseLeave:ee=>{ee.target.style.opacity=.7},children:"Edit"}),t.jsx("button",{onClick:()=>P(M.position_id),style:{backgroundColor:"transparent",color:"#c33",border:"none",padding:"var(--space-1) var(--space-2)",cursor:"pointer",fontSize:"var(--font-size-xs)",opacity:.7,transition:"opacity 0.2s"},onMouseEnter:ee=>{ee.target.style.opacity=1},onMouseLeave:ee=>{ee.target.style.opacity=.7},children:"Delete"})]})]},M.position_id))]})})]})]})},Cj=({editingId:r,formData:l,handleFormChange:u,handleSubmit:d,handleCancel:m})=>t.jsxs("form",{onSubmit:d,style:{padding:"var(--space-4)",maxWidth:"600px"},children:[t.jsx("h3",{style:{marginBottom:"var(--space-3)",color:"var(--color-text-primary)"},children:r?"Edit Structure":"Add Structure"}),t.jsxs("div",{style:{marginBottom:"var(--space-3)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Structure Code*"}),t.jsx("input",{type:"text",name:"structure_code",value:l.structure_code,onChange:u,required:!0,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--color-border)",borderRadius:"3px",fontSize:"0.875rem",boxSizing:"border-box"}})]}),t.jsxs("div",{style:{marginBottom:"var(--space-3)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Structure Name*"}),t.jsx("input",{type:"text",name:"structure_name",value:l.structure_name,onChange:u,required:!0,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--color-border)",borderRadius:"3px",fontSize:"0.875rem",boxSizing:"border-box"}})]}),t.jsxs("div",{style:{marginBottom:"var(--space-3)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Structure Type*"}),t.jsx("input",{type:"text",name:"structure_type",value:l.structure_type,onChange:u,required:!0,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--color-border)",borderRadius:"3px",fontSize:"0.875rem",boxSizing:"border-box"}})]}),t.jsx("div",{style:{marginBottom:"var(--space-4)"},children:t.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",name:"is_active",checked:l.is_active,onChange:u,style:{marginRight:"0.5rem"}}),t.jsx("span",{children:"Active"})]})}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-3)"},children:[t.jsx("button",{type:"submit",style:{flex:1,padding:"var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",fontSize:"var(--font-size-sm)",fontWeight:"600",cursor:"pointer"},children:r?"Update Structure":"Create Structure"}),r&&t.jsx("button",{type:"button",onClick:m,style:{flex:1,padding:"var(--space-3)",backgroundColor:"var(--color-bg-secondary)",color:"var(--color-text-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",fontSize:"var(--font-size-sm)",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]}),wj=({loading:r,structures:l,handleEdit:u,handleSelectStructureForRelations:d,setActiveTab:m,handleDelete:p})=>t.jsxs("div",{style:{padding:"var(--space-4)"},children:[t.jsx("h3",{style:{marginBottom:"var(--space-3)",color:"var(--color-text-primary)"},children:"Organizational Structures List"}),r?t.jsx("p",{children:"Loading..."}):l.length===0?t.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"No organizational structures found. Create one to get started!"}):t.jsx("div",{style:{overflowX:"auto",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"var(--font-size-sm)"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{backgroundColor:"var(--color-bg-secondary)",borderBottom:"2px solid var(--color-border)"},children:[t.jsx("th",{style:{padding:"var(--space-3)",textAlign:"left",fontWeight:"600"},children:"Code"}),t.jsx("th",{style:{padding:"var(--space-3)",textAlign:"left",fontWeight:"600"},children:"Name"}),t.jsx("th",{style:{padding:"var(--space-3)",textAlign:"left",fontWeight:"600"},children:"Type"}),t.jsx("th",{style:{padding:"var(--space-3)",textAlign:"center",fontWeight:"600"},children:"Active"}),t.jsx("th",{style:{padding:"var(--space-3)",textAlign:"center",fontWeight:"600"},children:"Actions"})]})}),t.jsx("tbody",{children:l.map(h=>t.jsxs("tr",{style:{borderBottom:"1px solid var(--color-border)"},children:[t.jsx("td",{style:{padding:"var(--space-3)"},children:h.structure_code}),t.jsx("td",{style:{padding:"var(--space-3)"},children:h.structure_name}),t.jsx("td",{style:{padding:"var(--space-3)"},children:h.structure_type}),t.jsx("td",{style:{padding:"var(--space-3)",textAlign:"center"},children:h.is_active?"":""}),t.jsxs("td",{style:{padding:"var(--space-3)",textAlign:"center"},children:[t.jsx("button",{onClick:()=>u(h),style:{padding:"0.4rem 0.8rem",marginRight:"0.5rem",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"0.75rem"},children:"Edit"}),t.jsx("button",{onClick:()=>{d(h),m("relations_list")},style:{padding:"0.4rem 0.8rem",marginRight:"0.5rem",backgroundColor:"#1e7e34",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"0.75rem"},children:"Relations"}),t.jsx("button",{onClick:()=>p(h.organizational_structure_id),style:{padding:"0.4rem 0.8rem",backgroundColor:"#d9534f",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"0.75rem"},children:"Delete"})]})]},h.organizational_structure_id))})]})})]}),kj=({selectedStructure:r,loading:l,relations:u,handleEditRelation:d,handleDeleteRelation:m,setActiveTab:p})=>t.jsx("div",{style:{padding:"var(--space-4)"},children:r?t.jsxs(t.Fragment,{children:[t.jsxs("h3",{style:{marginBottom:"var(--space-3)",color:"var(--color-text-primary)"},children:["Relations for: ",t.jsx("strong",{children:r.structure_name})]}),t.jsx("div",{style:{marginBottom:"var(--space-4)"},children:l?t.jsx("p",{children:"Loading..."}):u.length===0?t.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"No relations found."}):t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"var(--space-3)"},children:u.map(h=>t.jsxs("div",{style:{padding:"var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{style:{fontSize:"0.85rem",color:"var(--color-primary)"},children:h.organizational_structure_name}),t.jsx("span",{style:{display:"block",margin:"0.25rem 0",color:"var(--color-text-secondary)"},children:" Parent"}),t.jsx("strong",{style:{fontSize:"0.85rem",color:"#1e7e34"},children:h.parent_organizational_structure_name})]}),h.relation_type&&t.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--color-text-secondary)",marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Type:"})," ",h.relation_type]}),t.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[t.jsx("button",{onClick:()=>{d(h),p("relations_form")},style:{flex:1,padding:"0.3rem 0.6rem",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"2px",cursor:"pointer",fontSize:"0.7rem"},children:"Edit"}),t.jsx("button",{onClick:()=>m(h.organizational_structure,h.parent_organizational_structure),style:{flex:1,padding:"0.3rem 0.6rem",backgroundColor:"#d9534f",color:"white",border:"none",borderRadius:"2px",cursor:"pointer",fontSize:"0.7rem"},children:"Delete"})]})]},`${h.organizational_structure}-${h.parent_organizational_structure}`))})})]}):t.jsxs("p",{style:{color:"var(--color-text-secondary)"},children:["Please select a structure from the ",t.jsx("strong",{children:"Structures"})," tab first."]})}),Aj=({selectedStructure:r,editingRelation:l,handleSubmitRelation:u,relationFormData:d,handleRelationFormChange:m,structures:p,handleCancelRelation:h,setActiveTab:g})=>t.jsx("div",{style:{padding:"var(--space-4)"},children:r?t.jsxs("div",{style:{maxWidth:"400px"},children:[t.jsxs("h3",{style:{marginBottom:"var(--space-3)",color:"var(--color-text-primary)"},children:["Relation for: ",t.jsx("strong",{children:r.structure_name})]}),t.jsx("h4",{style:{marginBottom:"var(--space-3)",color:"var(--color-text-secondary)"},children:l?"Edit Relation":"Add New Relation"}),t.jsxs("form",{onSubmit:u,children:[t.jsxs("div",{style:{marginBottom:"var(--space-3)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Parent Structure*"}),t.jsxs("select",{name:"parent_organizational_structure",value:d.parent_organizational_structure,onChange:m,required:!0,disabled:!!l,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--color-border)",borderRadius:"3px",fontSize:"0.875rem",boxSizing:"border-box",backgroundColor:l?"var(--color-bg-secondary)":"white",color:l?"var(--color-text-secondary)":"inherit"},children:[t.jsx("option",{value:"",children:"Select a parent..."}),p.filter(b=>b.organizational_structure_id!==r.organizational_structure_id).map(b=>t.jsx("option",{value:b.organizational_structure_id,children:b.structure_name},b.organizational_structure_id))]}),l&&t.jsx("p",{style:{fontSize:"0.75rem",color:"var(--color-text-secondary)",marginTop:"0.25rem"},children:"Parent structure cannot be changed once created. Create a new relation instead."})]}),t.jsxs("div",{style:{marginBottom:"var(--space-3)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Relation Type (Optional)"}),t.jsx("input",{type:"text",name:"relation_type",value:d.relation_type,onChange:m,placeholder:"e.g., Department, Division",style:{width:"100%",padding:"0.5rem",border:"1px solid var(--color-border)",borderRadius:"3px",fontSize:"0.875rem",boxSizing:"border-box"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-3)"},children:[t.jsx("button",{type:"submit",style:{flex:1,padding:"0.5rem",backgroundColor:"#1e7e34",color:"white",border:"none",borderRadius:"var(--radius-sm)",fontSize:"var(--font-size-sm)",fontWeight:"600",cursor:"pointer"},children:l?"Update Relation":"Add Relation"}),t.jsx("button",{type:"button",onClick:()=>{h(),g("relations_list")},style:{flex:1,padding:"0.5rem",backgroundColor:"var(--color-bg-secondary)",color:"var(--color-text-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",fontSize:"var(--font-size-sm)",fontWeight:"600",cursor:"pointer"},children:l?"Cancel":"Clear Form"})]})]})]}):t.jsxs("p",{style:{color:"var(--color-text-secondary)"},children:["Please select a structure from the ",t.jsx("strong",{children:"Structures"})," tab first."]})}),Nj=()=>{const[r,l]=c.useState("structures"),[u,d]=c.useState([]),[m,p]=c.useState({structure_code:"",structure_name:"",structure_type:"",is_active:!0}),[h,g]=c.useState(null),[b,y]=c.useState([]),[x,S]=c.useState(null),[N,I]=c.useState({organizational_structure:"",parent_organizational_structure:"",relation_type:""}),[k,L]=c.useState(null),[w,O]=c.useState(!1),[P,z]=c.useState(null),[M,G]=c.useState(null);c.useEffect(()=>{ee()},[]);const ee=c.useCallback(async()=>{O(!0),z(null);try{const X=await yi.getAll();d(Array.isArray(X)?X:[])}catch(X){z("Failed to fetch organizational structures: "+X.message)}finally{O(!1)}},[]),K=c.useCallback(X=>{const{name:V,value:me,type:A,checked:Y}=X.target;p(ne=>({...ne,[V]:A==="checkbox"?Y:me}))},[]),re=c.useCallback(async X=>{X.preventDefault(),z(null),G(null);try{h?(await yi.update(h,m),G("Organizational structure updated successfully!")):(await yi.create(m),G("Organizational structure created successfully!")),p({structure_code:"",structure_name:"",structure_type:"",is_active:!0}),g(null),await ee()}catch(V){z("Failed to save organizational structure: "+V.message)}},[h,m,ee]),F=c.useCallback(X=>{p({structure_code:X.structure_code,structure_name:X.structure_name,structure_type:X.structure_type,is_active:X.is_active}),g(X.organizational_structure_id),l("form")},[]),T=c.useCallback(async X=>{if(window.confirm("Are you sure you want to delete this organizational structure?"))try{await yi.delete(X),G("Organizational structure deleted successfully!"),await ee()}catch(V){z("Failed to delete organizational structure: "+V.message)}},[ee]),te=c.useCallback(()=>{p({structure_code:"",structure_name:"",structure_type:"",is_active:!0}),g(null)},[]);c.useCallback(async X=>{O(!0),z(null);try{const V=await ir.getByStructureId(X);y(Array.isArray(V)?V:[])}catch(V){z("Failed to fetch relations: "+V.message)}finally{O(!1)}},[]);const de=c.useCallback(async X=>{S(X),I({organizational_structure:X.organizational_structure_id,parent_organizational_structure:"",relation_type:""}),L(null);const V=await ir.getByStructureId(X.organizational_structure_id);y(Array.isArray(V)?V:[])},[]),he=c.useCallback(X=>{const{name:V,value:me}=X.target;I(A=>({...A,[V]:me}))},[]),_e=c.useCallback(async X=>{if(X.preventDefault(),z(null),G(null),!N.parent_organizational_structure){z("Please select a parent organizational structure");return}try{k?(await ir.update(k.organizational_structure,k.parent_organizational_structure,N),G("Relation updated successfully!")):(await ir.create(N),G("Relation created successfully!")),I({organizational_structure:x.organizational_structure_id,parent_organizational_structure:"",relation_type:""}),L(null);const V=await ir.getByStructureId(x.organizational_structure_id);y(Array.isArray(V)?V:[]),l("relations_list")}catch(V){z("Failed to save relation: "+V.message)}},[k,N,x]),ye=c.useCallback(X=>{I({organizational_structure:X.organizational_structure,parent_organizational_structure:X.parent_organizational_structure,relation_type:X.relation_type||""}),L(X)},[]),j=c.useCallback(async(X,V)=>{if(window.confirm("Are you sure you want to delete this relation?"))try{await ir.delete(X,V),G("Relation deleted successfully!");const me=await ir.getByStructureId(x.organizational_structure_id);y(Array.isArray(me)?me:[])}catch(me){z("Failed to delete relation: "+me.message)}},[x]),D=c.useCallback(()=>{I({organizational_structure:x.organizational_structure_id,parent_organizational_structure:"",relation_type:""}),L(null)},[x]);return t.jsxs("div",{style:{padding:"var(--space-4)"},children:[P&&t.jsx("div",{style:{padding:"var(--space-3)",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-3)",border:"1px solid #f5c6cb"},children:P}),M&&t.jsx("div",{style:{padding:"var(--space-3)",backgroundColor:"#d4edda",color:"#155724",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-3)",border:"1px solid #c3e6cb"},children:M}),t.jsx("h2",{style:{marginBottom:"var(--space-4)",color:"var(--color-text-primary)"},children:"Organizational Structure Management"}),t.jsxs("div",{style:{display:"flex",borderBottom:"2px solid var(--color-border)",marginBottom:"var(--space-4)"},children:[t.jsx("button",{onClick:()=>l("structures"),style:{padding:"var(--space-3)",backgroundColor:r==="structures"?"var(--color-primary)":"transparent",color:r==="structures"?"white":"var(--color-text-primary)",border:"none",borderBottom:r==="structures"?"3px solid var(--color-primary)":"none",cursor:"pointer",fontWeight:r==="structures"?"600":"400",fontSize:"var(--font-size-sm)"},children:" Structures"}),t.jsx("button",{onClick:()=>l("form"),style:{padding:"var(--space-3)",backgroundColor:r==="form"?"var(--color-primary)":"transparent",color:r==="form"?"white":"var(--color-text-primary)",border:"none",borderBottom:r==="form"?"3px solid var(--color-primary)":"none",cursor:"pointer",fontWeight:r==="form"?"600":"400",fontSize:"var(--font-size-sm)"},children:" Add/Edit Structure"}),t.jsx("button",{onClick:()=>l("relations_list"),style:{padding:"var(--space-3)",backgroundColor:r==="relations_list"?"var(--color-primary)":"transparent",color:r==="relations_list"?"white":"var(--color-text-primary)",border:"none",borderBottom:r==="relations_list"?"3px solid var(--color-primary)":"none",cursor:"pointer",fontWeight:r==="relations_list"?"600":"400",fontSize:"var(--font-size-sm)"},children:" Relations List"}),t.jsx("button",{onClick:()=>l("relations_form"),style:{padding:"var(--space-3)",backgroundColor:r==="relations_form"?"var(--color-primary)":"transparent",color:r==="relations_form"?"white":"var(--color-text-primary)",border:"none",borderBottom:r==="relations_form"?"3px solid var(--color-primary)":"none",cursor:"pointer",fontWeight:r==="relations_form"?"600":"400",fontSize:"var(--font-size-sm)"},children:" Add/Edit Relation"})]}),r==="structures"&&t.jsx(wj,{loading:w,structures:u,handleEdit:F,handleSelectStructureForRelations:de,setActiveTab:l,handleDelete:T}),r==="form"&&t.jsx(Cj,{editingId:h,formData:m,handleFormChange:K,handleSubmit:re,handleCancel:te}),r==="relations_list"&&t.jsx(kj,{selectedStructure:x,loading:w,relations:b,handleEditRelation:ye,handleDeleteRelation:j,setActiveTab:l}),r==="relations_form"&&t.jsx(Aj,{selectedStructure:x,editingRelation:k,handleSubmitRelation:_e,relationFormData:N,handleRelationFormChange:he,structures:u,handleCancelRelation:D,setActiveTab:l})]})},Rj=()=>{var X,V,me,A,Y,ne;const{user:r,isSuperuser:l}=fs(),u=Dt(),[d,m]=c.useState("assets"),[p,h]=c.useState(!1),[g,b]=c.useState(""),[y,x]=c.useState(null),[S,N]=c.useState(!1),[I,k]=c.useState(null),[L,w]=c.useState(""),[O,P]=c.useState(!1),[z,M]=c.useState(""),G=c.useMemo(()=>{var U;return l?!0:((U=r==null?void 0:r.roles)==null?void 0:U.some(ge=>ge.role_code==="maintenance_chief"||ge.role_code==="exploitation_chief"))||!1},[l,r]);c.useEffect(()=>{(async()=>{try{h(!0),b("");const ge=await V_.get();x(ge)}catch{b("Failed to load your items")}finally{h(!1)}})()},[]);const ee=(U,ge)=>!U||U.length===0?t.jsxs("div",{className:"empty-state",children:[t.jsx("h3",{className:"empty-state-title",children:"No items"}),t.jsx("p",{className:"empty-state-text",children:"You don't currently own any items in this category."})]}):t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsx("tr",{children:ge.map(be=>t.jsx("th",{children:be.label},be.key))})}),t.jsx("tbody",{children:U.map(be=>t.jsx("tr",{children:ge.map(B=>t.jsx("td",{children:B.render(be)},B.key))},be.id))})]}),K=U=>{M(""),b(""),k(U),w(""),N(!0)},re=async()=>{var U,ge;if(I){if(!L.trim()){b("Please enter an observation");return}try{if(P(!0),b(""),M(""),await wi.create({item_type:I.item_type,item_id:I.item_id,owner_observation:L.trim()}),N(!1),k(null),w(""),M("Report submitted successfully"),G&&d==="reports"){const be=await wi.getAll()}}catch(be){const B=((ge=(U=be==null?void 0:be.response)==null?void 0:U.data)==null?void 0:ge.error)||(be==null?void 0:be.message)||"Failed to submit report";b(typeof B=="string"?B:"Failed to submit report")}finally{P(!1)}}},F=(U,ge)=>!U||U.length===0?t.jsxs("div",{className:"empty-state",children:[t.jsx("h3",{className:"empty-state-title",children:"No history"}),t.jsx("p",{className:"empty-state-text",children:"No previous ownership records found."})]}):t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsx("tr",{children:ge.map(be=>t.jsx("th",{children:be.label},be.key))})}),t.jsx("tbody",{children:U.map(be=>t.jsx("tr",{children:ge.map(B=>t.jsx("td",{children:B.render(be)},B.key))},be.assignment_id))})]}),T=(((X=y==null?void 0:y.assets)==null?void 0:X.current)||[]).map(U=>({id:U.asset_id,name:U.asset_name||`Asset ${U.asset_id}`,status:U.asset_status,inventory:U.asset_inventory_number,serial:U.asset_serial_number})),te=((V=y==null?void 0:y.assets)==null?void 0:V.history)||[],de=(((me=y==null?void 0:y.stock_items)==null?void 0:me.current)||[]).map(U=>({id:U.stock_item_id,name:U.stock_item_name||`Stock Item ${U.stock_item_id}`,status:U.stock_item_status,inventory:U.stock_item_inventory_number})),he=((A=y==null?void 0:y.stock_items)==null?void 0:A.history)||[],_e=(((Y=y==null?void 0:y.consumables)==null?void 0:Y.current)||[]).map(U=>({id:U.consumable_id,name:U.consumable_name||`Consumable ${U.consumable_id}`,status:U.consumable_status,inventory:U.consumable_inventory_number,serial:U.consumable_serial_number})),ye=((ne=y==null?void 0:y.consumables)==null?void 0:ne.history)||[],j={assets:[{key:"id",label:"ID",render:U=>U.id},{key:"name",label:"Name",render:U=>U.name},{key:"inventory",label:"Inventory #",render:U=>U.inventory||"-"},{key:"serial",label:"Serial #",render:U=>U.serial||"-"},{key:"status",label:"Status",render:U=>U.status||"-"},{key:"actions",label:"Actions",render:U=>t.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[t.jsx("button",{className:"btn btn-primary",onClick:()=>u(`/dashboard/my-items/assets/${U.id}/maintenance-timeline`),style:{padding:"0.25rem 0.5rem"},children:"View Maintenance"}),t.jsx("button",{className:"btn btn-secondary",onClick:()=>K({item_type:"asset",item_id:U.id,item_label:U.name}),style:{padding:"0.25rem 0.5rem"},children:"Report problem"})]})}],stock_items:[{key:"id",label:"ID",render:U=>U.id},{key:"name",label:"Name",render:U=>U.name},{key:"inventory",label:"Inventory #",render:U=>U.inventory||"-"},{key:"status",label:"Status",render:U=>U.status||"-"},{key:"actions",label:"Actions",render:U=>t.jsx("button",{className:"btn btn-secondary",onClick:()=>K({item_type:"stock_item",item_id:U.id,item_label:U.name}),style:{padding:"0.25rem 0.5rem"},children:"Report problem"})}],consumables:[{key:"id",label:"ID",render:U=>U.id},{key:"name",label:"Name",render:U=>U.name},{key:"inventory",label:"Inventory #",render:U=>U.inventory||"-"},{key:"serial",label:"Serial #",render:U=>U.serial||"-"},{key:"status",label:"Status",render:U=>U.status||"-"},{key:"actions",label:"Actions",render:U=>t.jsx("button",{className:"btn btn-secondary",onClick:()=>K({item_type:"consumable",item_id:U.id,item_label:U.name}),style:{padding:"0.25rem 0.5rem"},children:"Report problem"})}]},D={assets:[{key:"assignment_id",label:"Assignment ID",render:U=>U.assignment_id},{key:"asset_id",label:"Asset ID",render:U=>{var ge;return(ge=U.asset)==null?void 0:ge.asset_id}},{key:"name",label:"Name",render:U=>{var ge,be;return((ge=U.asset)==null?void 0:ge.asset_name)||`Asset ${(be=U.asset)==null?void 0:be.asset_id}`}},{key:"start",label:"Start",render:U=>U.start_datetime?new Date(U.start_datetime).toLocaleString():"-"},{key:"end",label:"End",render:U=>U.end_datetime?new Date(U.end_datetime).toLocaleString():"-"},{key:"condition",label:"Condition",render:U=>U.condition_on_assignment||"-"}],stock_items:[{key:"assignment_id",label:"Assignment ID",render:U=>U.assignment_id},{key:"stock_item_id",label:"Stock Item ID",render:U=>{var ge;return(ge=U.stock_item)==null?void 0:ge.stock_item_id}},{key:"name",label:"Name",render:U=>{var ge,be;return((ge=U.stock_item)==null?void 0:ge.stock_item_name)||`Stock Item ${(be=U.stock_item)==null?void 0:be.stock_item_id}`}},{key:"start",label:"Start",render:U=>U.start_datetime?new Date(U.start_datetime).toLocaleString():"-"},{key:"end",label:"End",render:U=>U.end_datetime?new Date(U.end_datetime).toLocaleString():"-"},{key:"condition",label:"Condition",render:U=>U.condition_on_assignment||"-"}],consumables:[{key:"assignment_id",label:"Assignment ID",render:U=>U.assignment_id},{key:"consumable_id",label:"Consumable ID",render:U=>{var ge;return(ge=U.consumable)==null?void 0:ge.consumable_id}},{key:"name",label:"Name",render:U=>{var ge,be;return((ge=U.consumable)==null?void 0:ge.consumable_name)||`Consumable ${(be=U.consumable)==null?void 0:be.consumable_id}`}},{key:"start",label:"Start",render:U=>U.start_datetime?new Date(U.start_datetime).toLocaleString():"-"},{key:"end",label:"End",render:U=>U.end_datetime?new Date(U.end_datetime).toLocaleString():"-"},{key:"condition",label:"Condition",render:U=>U.condition_on_assignment||"-"}]};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",children:[t.jsx("h1",{className:"page-title",children:"My Items"}),t.jsx("p",{className:"page-subtitle",children:"View what you currently own and your ownership history"})]}),z&&t.jsx("div",{className:"card",style:{marginBottom:"var(--space-6)",borderColor:"var(--color-success)"},children:t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-success)"},children:z})}),g&&t.jsx("div",{className:"card",style:{marginBottom:"var(--space-6)",borderColor:"var(--color-error)"},children:t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-error)"},children:g})}),t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"card-header",style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("button",{className:`btn ${d==="assets"?"btn-primary":"btn-secondary"}`,onClick:()=>m("assets"),style:{flex:1,whiteSpace:"nowrap"},children:"Assets"}),t.jsx("button",{className:`btn ${d==="stock_items"?"btn-primary":"btn-secondary"}`,onClick:()=>m("stock_items"),style:{flex:1,whiteSpace:"nowrap"},children:"Stock Items"}),t.jsx("button",{className:`btn ${d==="consumables"?"btn-primary":"btn-secondary"}`,onClick:()=>m("consumables"),style:{flex:1,whiteSpace:"nowrap"},children:"Consumables"})]}),t.jsx("div",{className:"table-container",children:p?t.jsxs("div",{className:"empty-state",children:[t.jsx("div",{className:"loading-spinner",style:{margin:"0 auto"}}),t.jsx("p",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)"},children:t.jsx("h2",{style:{margin:0,fontSize:"var(--font-size-md)"},children:"Currently Owned"})}),d==="assets"&&ee(T,j.assets),d==="stock_items"&&ee(de,j.stock_items),d==="consumables"&&ee(_e,j.consumables),t.jsx("div",{style:{padding:"var(--space-4)",borderTop:"1px solid var(--color-border)",borderBottom:"1px solid var(--color-border)"},children:t.jsx("h2",{style:{margin:0,fontSize:"var(--font-size-md)"},children:"Ownership History"})}),d==="assets"&&F(te,D.assets),d==="stock_items"&&F(he,D.stock_items),d==="consumables"&&F(ye,D.consumables)]})})]}),S&&t.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"var(--space-6)",zIndex:50},onClick:()=>{O||(N(!1),k(null))},children:t.jsxs("div",{className:"card",style:{width:"100%",maxWidth:600},onClick:U=>U.stopPropagation(),children:[t.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:"Report a problem"}),t.jsx("button",{className:"btn btn-secondary",onClick:()=>{O||(N(!1),k(null))},children:"Close"})]}),t.jsxs("div",{style:{padding:"var(--space-4)"},children:[t.jsx("div",{style:{marginBottom:"var(--space-3)",color:"var(--color-text-secondary)"},children:I?`${I.item_label} (${I.item_type} #${I.item_id})`:""}),t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:500},children:"Observation"}),t.jsx("textarea",{value:L,onChange:U=>w(U.target.value),rows:4,style:{width:"100%",padding:"var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",resize:"vertical",fontFamily:"inherit",fontSize:"var(--font-size-sm)",boxSizing:"border-box"}}),t.jsxs("div",{style:{marginTop:"var(--space-4)",display:"flex",justifyContent:"flex-end",gap:"var(--space-2)"},children:[t.jsx("button",{className:"btn btn-secondary",onClick:()=>{O||(N(!1),k(null))},disabled:O,children:"Cancel"}),t.jsx("button",{className:"btn btn-primary",onClick:re,disabled:O,children:O?"Submitting...":"Submit report"})]})]})]})})]})},Mj=()=>{const{user:r,isSuperuser:l}=fs(),[u,d]=c.useState(!1),[m,p]=c.useState(""),[h,g]=c.useState([]),[b,y]=c.useState([]),[x,S]=c.useState(!1),[N,I]=c.useState(null),[k,L]=c.useState(""),[w,O]=c.useState(""),[P,z]=c.useState(!1),[M,G]=c.useState(!1),[ee,K]=c.useState(null),[re,F]=c.useState(!1),T=c.useMemo(()=>{var j;return l?!0:((j=r==null?void 0:r.roles)==null?void 0:j.some(D=>D.role_code==="maintenance_chief"||D.role_code==="exploitation_chief"))||!1},[l,r]),te=c.useMemo(()=>{var j;return l?!0:((j=r==null?void 0:r.roles)==null?void 0:j.some(D=>D.role_code==="maintenance_chief"))||!1},[l,r]),de=async()=>{try{d(!0),p("");const j=await wi.getAll();g(Array.isArray(j)?j:[])}catch{p("Failed to load reports")}finally{d(!1)}};c.useEffect(()=>{T&&de()},[T]),c.useEffect(()=>{const j=async()=>{try{const D=await _n.getAll({role:"maintenance_technician"});y(Array.isArray(D)?D:[])}catch{y([])}};te&&j()},[te]);const he=j=>{p(""),I(j),L(""),O((j==null?void 0:j.owner_observation)||""),S(!0)},_e=async j=>{if(j.item_type==="asset")try{F(!0),p("");const D=await Ns.getById(j.item_id);K(D),G(!0)}catch{p("Failed to load asset details")}finally{F(!1)}},ye=async j=>{var D,X;if(j.preventDefault(),!!N){if(!k){p("Please select a technician");return}try{z(!0),p(""),await wi.createMaintenance({item_type:N.item_type,report_id:N.report_id,technician_person_id:k,description:w}),S(!1),I(null),L(""),O("")}catch(V){const me=((X=(D=V==null?void 0:V.response)==null?void 0:D.data)==null?void 0:X.error)||(V==null?void 0:V.message)||"Failed to create maintenance";p(typeof me=="string"?me:"Failed to create maintenance")}finally{z(!1)}}};return T?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",children:[t.jsx("h1",{className:"page-title",children:"Reports"}),t.jsx("p",{className:"page-subtitle",children:"View reported problems on owned items"})]}),m&&t.jsx("div",{className:"card",style:{marginBottom:"var(--space-6)",borderColor:"var(--color-error)"},children:t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-error)"},children:m})}),t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:"All Reports"}),t.jsx("button",{className:"btn btn-secondary",onClick:de,disabled:u,children:"Refresh"})]}),t.jsx("div",{className:"table-container",children:u?t.jsxs("div",{className:"empty-state",children:[t.jsx("div",{className:"loading-spinner",style:{margin:"0 auto"}}),t.jsx("p",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading..."})]}):h.length===0?t.jsxs("div",{className:"empty-state",children:[t.jsx("h3",{className:"empty-state-title",children:"No reports"}),t.jsx("p",{className:"empty-state-text",children:"No problem reports have been submitted yet."})]}):t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Report ID"}),t.jsx("th",{children:"Type"}),t.jsx("th",{children:"Item ID"}),t.jsx("th",{children:"Person"}),t.jsx("th",{children:"Date"}),t.jsx("th",{children:"Observation"}),te&&t.jsx("th",{children:"Actions"})]})}),t.jsx("tbody",{children:h.map(j=>t.jsxs("tr",{children:[t.jsx("td",{children:j.report_id}),t.jsx("td",{children:j.item_type}),t.jsx("td",{children:j.item_type==="asset"?t.jsx("button",{className:"btn btn-secondary",style:{padding:"0.25rem 0.5rem",fontSize:"0.875rem"},onClick:()=>_e(j),disabled:re,children:j.item_id}):j.item_id}),t.jsx("td",{children:j.person_name||j.person_id}),t.jsx("td",{children:j.report_datetime?new Date(j.report_datetime).toLocaleString():"-"}),t.jsx("td",{children:j.owner_observation}),te&&t.jsx("td",{children:t.jsx("button",{className:"btn btn-secondary",onClick:()=>he(j),children:"Create maintenance"})})]},`${j.item_type}-${j.report_id}`))})]})})]}),x&&t.jsx("div",{className:"modal-overlay",onClick:()=>!P&&S(!1),children:t.jsxs("div",{className:"modal",onClick:j=>j.stopPropagation(),children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Create Maintenance"}),t.jsx("button",{className:"modal-close",onClick:()=>!P&&S(!1),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsxs("form",{onSubmit:ye,children:[t.jsxs("div",{className:"modal-body",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Report"}),t.jsxs("div",{className:"form-input",style:{backgroundColor:"#f5f5f5"},children:["#",N==null?void 0:N.report_id," (",N==null?void 0:N.item_type," #",N==null?void 0:N.item_id,")"]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"technician",className:"form-label",children:"Technician"}),t.jsxs("select",{id:"technician",className:"form-input",value:k,onChange:j=>L(j.target.value),children:[t.jsx("option",{value:"",children:"-- Select Technician --"}),b.map(j=>t.jsxs("option",{value:j.person_id,children:[j.first_name," ",j.last_name]},j.person_id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),t.jsx("textarea",{id:"description",className:"form-input",rows:4,value:w,onChange:j=>O(j.target.value)})]})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>!P&&S(!1),children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:P,children:P?"Creating...":"Create"})]})]})]})}),M&&ee&&t.jsx("div",{className:"modal-overlay",onClick:()=>G(!1),children:t.jsxs("div",{className:"modal",onClick:j=>j.stopPropagation(),children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Asset Details"}),t.jsx("button",{className:"modal-close",onClick:()=>G(!1),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsx("div",{className:"modal-body",children:t.jsxs("div",{style:{display:"grid",gap:"var(--space-3)"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Asset ID:"})," ",ee.asset_id]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Name:"})," ",ee.asset_name||"-"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Serial Number:"})," ",ee.asset_serial_number||"-"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Inventory Number:"})," ",ee.asset_inventory_number||"-"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Service Tag:"})," ",ee.asset_service_tag||"-"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Status:"})," ",ee.asset_status||"-"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Model:"})," ",ee.asset_model_name||ee.asset_model||"-"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Brand:"})," ",ee.brand_name||"-"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Type:"})," ",ee.asset_type_label||"-"]})]})}),t.jsx("div",{className:"modal-footer",children:t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>G(!1),children:"Close"})})]})})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",children:[t.jsx("h1",{className:"page-title",children:"Reports"}),t.jsx("p",{className:"page-subtitle",children:"Problem reports"})]}),t.jsx("div",{className:"card",children:t.jsx("div",{style:{padding:"var(--space-4)"},children:"Forbidden"})})]})},Bj=()=>{var _;const r=Dt(),[l,u]=c.useState([]),[d,m]=c.useState([]),[p,h]=c.useState({}),[g,b]=c.useState(!0),[y,x]=c.useState(!1),[S,N]=c.useState(null),[I,k]=c.useState(null),[L,w]=c.useState({attribution_order_full_code:"",attribution_order_date:new Date().toISOString().split("T")[0],warehouse:"",attribution_order_barcode:""}),[O,P]=c.useState([]),[z,M]=c.useState({asset_type:"",asset_model:"",quantity:1}),[G,ee]=c.useState("list"),[K,re]=c.useState([]),[F,T]=c.useState(null),[te,de]=c.useState([]),[he,_e]=c.useState(!1),[ye,j]=c.useState({report_full_code:"",digital_copy:null}),[D,X]=c.useState(null),[V,me]=c.useState(!1),[A,Y]=c.useState({stock_items:[],consumables:[]}),[ne,U]=Bs(),ge=R=>R?R.startsWith("JVBERi0")?"application/pdf":R.startsWith("/9j/")?"image/jpeg":R.startsWith("iVBORw0K")?"image/png":"application/octet-stream":"application/octet-stream";c.useEffect(()=>{try{const fe=JSON.parse(sessionStorage.getItem("attribution_order_create_draft_assets")||"[]");Array.isArray(fe)&&fe.length>0&&(P(fe),[...new Set(fe.map(Be=>Be.asset_type).filter(Boolean))].forEach(async Be=>{try{const je=await ft.getByAssetType(Be);h($e=>({...$e,[Be]:je}))}catch{console.error("Failed to fetch models for type",Be)}}))}catch{}try{const fe=JSON.parse(sessionStorage.getItem("attribution_order_create_draft_order_data")||"null");fe&&w(fe)}catch{}const R=ne.get("mode"),le=ne.get("orderId");R==="create"?(ee("create"),ne.delete("mode"),U(ne)):le&&((async()=>{try{const Re=await Jr.getById(le);if(Re){T(Re),ee("detail");const Be=await Ns.getAll({attribution_order:Re.attribution_order_id});de(Be.results||Be||[])}}catch(Re){console.error("Failed to load order:",Re)}})(),ne.delete("orderId"),U(ne))},[]),c.useEffect(()=>{Ie()},[]),c.useEffect(()=>{const R=ne.get("mode"),le=ne.get("orderId");G==="list"&&!R&&!le&&(Ae(),T(null),de([]),X(null),_e(!1),Y({stock_items:[],consumables:[]}))},[G]);const be=R=>{try{sessionStorage.setItem("attribution_order_create_draft_assets",JSON.stringify(R))}catch{}},B=R=>{try{sessionStorage.setItem("attribution_order_create_draft_order_data",JSON.stringify(R))}catch{}},se=async R=>{T(R),ee("detail"),b(!0),X(null);try{const le=await Ns.getAll({attribution_order:R.attribution_order_id});de(le.results||le||[]);const fe=await ki.getAll({attribution_order:R.attribution_order_id}),Re=fe.results||fe||[];if(Re.length>0&&Re[0].receipt_report){const je=Re[0].receipt_report,$e=await iu.getById(je);X($e)}const Be=await Jr.getIncludedItems(R.attribution_order_id);Y(Be)}catch{N("Failed to fetch assets or receipt for this order")}finally{b(!1)}},Ae=async()=>{b(!0);try{const R=await Jr.getAll();re(R)}catch{N("Failed to fetch attribution orders")}finally{b(!1)}},Ie=async()=>{b(!0),N(null);try{const[R,le]=await Promise.all([_y.getAll(),Zs.getAll()]);u(R),m(le),b(!1)}catch{N("Failed to fetch initial data"),b(!1)}},Me=R=>{const le={...L,[R.target.name]:R.target.value};w(le),B(le)},Pe=async(R,le,fe)=>{const Re=[...O];if(Re[R][le]=fe,le==="asset_type"&&(Re[R].asset_model="",fe&&!p[fe]))try{const Be=await ft.getByAssetType(fe);h(je=>({...je,[fe]:Be}))}catch{console.error("Failed to fetch models for type",fe)}P(Re),be(Re)},ze=async R=>{if(M(le=>({...le,asset_type:R,asset_model:""})),R&&!p[R])try{const le=await ft.getByAssetType(R);h(fe=>({...fe,[R]:le}))}catch{console.error("Failed to fetch models for type",R)}},tt=()=>{const R=Number(z.quantity);if(!z.asset_type||!z.asset_model||!Number.isFinite(R)||R<1)return;const le=Date.now(),fe=Array.from({length:R},(Re,Be)=>({id:le+Be,asset_type:z.asset_type,asset_model:z.asset_model,asset_serial_number:"",asset_inventory_number:"",asset_name:""}));P(Re=>{const Be=[...Re,...fe];return be(Be),Be}),M(Re=>({...Re,quantity:1}))},Ne=()=>{const R=[...O,{id:Date.now(),asset_type:"",asset_model:"",asset_serial_number:"",asset_inventory_number:"",asset_name:""}];P(R),be(R)},He=R=>{if(O.length>0){const le=O.filter((fe,Re)=>Re!==R);P(le),be(le)}},Ue=(R,le)=>{be(O);const fe=G==="create"?"create":F==null?void 0:F.attribution_order_id;r(`/dashboard/attribution-orders/assets/${R.id}/included-items/${le}?context=${fe}`)},we=async R=>{var le,fe;R.preventDefault(),x(!0),N(null),k(null);try{let Re={};try{Re=JSON.parse(sessionStorage.getItem("attribution_order_create_draft_included_items")||"{}")}catch{Re={}}const je=(await Jr.create(L)).attribution_order_id;console.log("[handleSubmit] draftIncluded:",Re),console.log("[handleSubmit] assets:",O);for(const $e of O){const{id:pt,...at}=$e,_t=(Re==null?void 0:Re[String(pt)])||(Re==null?void 0:Re[pt])||null;console.log(`[handleSubmit] Asset id: ${pt}, String(id): ${String(pt)}`),console.log(`[handleSubmit] draftForRow for asset ${pt}:`,_t);const jt={...at,attribution_order:je,asset_status:"In Stock",included_stock_items:Array.isArray(_t==null?void 0:_t.stock_items)?_t.stock_items:[],included_consumables:Array.isArray(_t==null?void 0:_t.consumables)?_t.consumables:[]};console.log(`[handleSubmit] Sending payload for asset ${pt}:`,jt),await Ns.create(jt)}k("Attribution Order and Assets created successfully!"),w({attribution_order_full_code:"",attribution_order_date:new Date().toISOString().split("T")[0],warehouse:"",attribution_order_barcode:""}),P([]);try{sessionStorage.removeItem("attribution_order_create_draft_assets"),sessionStorage.removeItem("attribution_order_create_draft_order_data"),sessionStorage.removeItem("attribution_order_create_draft_included_items")}catch{}setTimeout(()=>ee("list"),2e3)}catch(Re){console.error(Re),N(((fe=(le=Re.response)==null?void 0:le.data)==null?void 0:fe.error)||"Failed to create Attribution Order and Assets")}finally{x(!1)}},E=async R=>{var le,fe;R.preventDefault(),x(!0),N(null),k(null);try{const Re=new FormData;Re.append("report_full_code",ye.report_full_code),ye.digital_copy&&Re.append("digital_copy",ye.digital_copy);const Be=await iu.create(Re);await ki.create({warehouse:F.warehouse,attribution_order:F.attribution_order_id,receipt_report:Be.receipt_report_id,operation:"entry"}),k("Receipt Report successfully created and linked to this order."),_e(!1),j({report_full_code:"",digital_copy:null}),X(Be)}catch(Re){console.error(Re),N(((fe=(le=Re.response)==null?void 0:le.data)==null?void 0:fe.error)||"Failed to create Receipt Report")}finally{x(!1)}};return g?t.jsx("div",{className:"loading",children:"Loading..."}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsx("h1",{className:"page-title",children:G==="list"?"Attribution Orders":G==="detail"?`Order Details: ${(F==null?void 0:F.attribution_order_full_code)||""}`:"Create Attribution Order"}),t.jsx("p",{className:"page-subtitle",children:G==="list"?"Consult and manage your attribution orders":G==="detail"?"Consult associated order details and assets":"Register new equipment and link them to an attribution order"}),G==="detail"&&t.jsx("button",{className:"btn btn-secondary",onClick:()=>ee("list"),style:{marginTop:"var(--space-2)"},title:"Back","aria-label":"Back",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})]}),G!=="list"&&G!=="detail"&&t.jsx("button",{className:"btn btn-secondary",onClick:()=>ee("list"),title:"Back to List","aria-label":"Back to List",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})]}),S&&t.jsx("div",{className:"error-message",children:S}),I&&t.jsx("div",{className:"badge badge-success",style:{padding:"var(--space-4)",width:"100%",marginBottom:"var(--space-4)",borderRadius:"var(--radius-md)"},children:I}),G==="list"?t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"card-header",children:[t.jsx("h2",{className:"card-title",children:"All Attribution Orders"}),t.jsx("button",{className:"btn btn-primary",style:{width:"auto"},onClick:()=>ee("create"),children:"+ New Order"})]}),t.jsx("div",{className:"table-container",children:t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Full Code"}),t.jsx("th",{children:"Date"}),t.jsx("th",{children:"Barcode"}),t.jsx("th",{children:"ID"})]})}),t.jsx("tbody",{children:K.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"var(--space-4)"},children:"No attribution orders found."})}):K.map(R=>t.jsxs("tr",{onClick:()=>se(R),style:{cursor:"pointer"},className:"hover-row",children:[t.jsx("td",{style:{fontWeight:"500",color:"var(--color-primary)"},children:R.attribution_order_full_code}),t.jsx("td",{children:new Date(R.attribution_order_date).toLocaleDateString()}),t.jsx("td",{children:R.attribution_order_barcode||"-"}),t.jsxs("td",{children:["#",R.attribution_order_id]})]},R.attribution_order_id))})]})})]}):G==="detail"?t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"var(--space-6)"},children:[t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"Order Information"})}),t.jsx("div",{className:"card-body",children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"var(--space-6)"},children:[t.jsxs("div",{children:[t.jsx("label",{className:"form-label",children:"Full Code"}),t.jsx("div",{style:{fontSize:"var(--font-size-md)",fontWeight:"500"},children:F==null?void 0:F.attribution_order_full_code})]}),t.jsxs("div",{children:[t.jsx("label",{className:"form-label",children:"Date"}),t.jsx("div",{style:{fontSize:"var(--font-size-md)"},children:F?new Date(F.attribution_order_date).toLocaleDateString():""})]}),t.jsxs("div",{children:[t.jsx("label",{className:"form-label",children:"Warehouse"}),t.jsx("div",{style:{fontSize:"var(--font-size-md)"},children:F&&((_=l.find(R=>R.warehouse_id===F.warehouse))==null?void 0:_.warehouse_name)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"form-label",children:"Barcode"}),t.jsx("div",{style:{fontSize:"var(--font-size-md)"},children:(F==null?void 0:F.attribution_order_barcode)||"-"})]})]})})]}),D&&t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"Receipt Report"})}),t.jsx("div",{className:"card-body",children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"var(--space-6)"},children:[t.jsxs("div",{children:[t.jsx("label",{className:"form-label",children:"Report Code"}),t.jsx("div",{style:{fontSize:"var(--font-size-md)",fontWeight:"500"},children:D.report_full_code||"-"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"form-label",children:"Report Date"}),t.jsx("div",{style:{fontSize:"var(--font-size-md)"},children:D.report_datetime?new Date(D.report_datetime).toLocaleString():"-"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"form-label",children:"Digital Copy"}),t.jsx("div",{style:{fontSize:"var(--font-size-md)"},children:D.digital_copy?t.jsx("button",{type:"button",onClick:()=>me(!0),className:"btn btn-primary",style:{padding:"var(--space-2) var(--space-4)",fontSize:"var(--font-size-sm)"},children:"Consult Report"}):t.jsx("span",{style:{color:"var(--color-text-light)"},children:"No file attached"})})]})]})})]}),F&&!D&&t.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:t.jsx("button",{className:`btn btn-${he?"secondary":"primary"}`,onClick:()=>_e(!he),children:he?"Cancel Receipt Report":"Create Receipt Report"})}),he&&t.jsxs("div",{className:"card",style:{border:"2px solid var(--color-primary)"},children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"New Receipt Report"})}),t.jsx("div",{className:"card-body",children:t.jsxs("form",{onSubmit:E,children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"var(--space-6)",marginBottom:"var(--space-6)"},children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Report Full Code"}),t.jsx("input",{type:"text",className:"form-input",value:ye.report_full_code,onChange:R=>j({...ye,report_full_code:R.target.value}),placeholder:"e.g. PV-2024-001",required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Digital Copy (Attachment)"}),t.jsx("input",{type:"file",className:"form-input",onChange:R=>j({...ye,digital_copy:R.target.files[0]}),accept:"image/*,application/pdf"})]})]}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:y,children:y?"Submitting...":"Save Receipt Report"})]})})]}),t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"Associated Assets"})}),t.jsx("div",{className:"table-container",children:t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Asset Name"}),t.jsx("th",{children:"Inventory #"}),t.jsx("th",{children:"Serial #"}),t.jsx("th",{children:"Status"})]})}),t.jsx("tbody",{children:te.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"var(--space-4)"},children:"No assets linked to this order."})}):te.map(R=>{var le;return t.jsxs("tr",{children:[t.jsx("td",{style:{fontWeight:"500"},children:R.asset_name||"-"}),t.jsx("td",{children:R.asset_inventory_number||"-"}),t.jsx("td",{children:R.asset_serial_number||"-"}),t.jsx("td",{children:t.jsx("span",{className:`status-badge status-${(le=R.asset_status)==null?void 0:le.replace(/\s+/g,"-").toLowerCase()}`,children:R.asset_status})})]},R.asset_id)})})]})})]}),A.stock_items.length>0&&t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"Included Stock Items"})}),t.jsx("div",{className:"table-container",children:t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Item Name"}),t.jsx("th",{children:"Model"}),t.jsx("th",{children:"Asset"}),t.jsx("th",{children:"Status"})]})}),t.jsx("tbody",{children:A.stock_items.map(R=>{var le;return t.jsxs("tr",{children:[t.jsx("td",{style:{fontWeight:"500"},children:R.name||"-"}),t.jsx("td",{children:R.model||"-"}),t.jsx("td",{children:R.asset_name||`Asset #${R.asset_id}`}),t.jsx("td",{children:t.jsx("span",{className:`status-badge status-${(le=R.status)==null?void 0:le.replace(/\s+/g,"-").toLowerCase()}`,children:R.status})})]},R.id)})})]})})]}),A.consumables.length>0&&t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"Included Consumables"})}),t.jsx("div",{className:"table-container",children:t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Item Name"}),t.jsx("th",{children:"Model"}),t.jsx("th",{children:"Asset"}),t.jsx("th",{children:"Status"})]})}),t.jsx("tbody",{children:A.consumables.map(R=>{var le;return t.jsxs("tr",{children:[t.jsx("td",{style:{fontWeight:"500"},children:R.name||"-"}),t.jsx("td",{children:R.model||"-"}),t.jsx("td",{children:R.asset_name||`Asset #${R.asset_id}`}),t.jsx("td",{children:t.jsx("span",{className:`status-badge status-${(le=R.status)==null?void 0:le.replace(/\s+/g,"-").toLowerCase()}`,children:R.status})})]},R.id)})})]})})]})]}):t.jsxs("form",{onSubmit:we,children:[t.jsxs("div",{className:"card",style:{marginBottom:"var(--space-8)"},children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"Order Information"})}),t.jsx("div",{className:"card-body",children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"var(--space-6)"},children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Full Code"}),t.jsx("input",{type:"text",name:"attribution_order_full_code",className:"form-input",value:L.attribution_order_full_code,onChange:Me,placeholder:"e.g. ORD-2024-001",required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Date"}),t.jsx("input",{type:"date",name:"attribution_order_date",className:"form-input",value:L.attribution_order_date,onChange:Me,required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Warehouse"}),t.jsxs("select",{name:"warehouse",className:"form-input",value:L.warehouse,onChange:Me,required:!0,children:[t.jsx("option",{value:"",children:"Select Warehouse"}),l.map(R=>t.jsx("option",{value:R.warehouse_id,children:R.warehouse_name},R.warehouse_id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Barcode"}),t.jsx("input",{type:"text",name:"attribution_order_barcode",className:"form-input",value:L.attribution_order_barcode,onChange:Me,placeholder:"Scan barcode..."})]})]})})]}),t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h2",{className:"card-title",children:"Assets"}),t.jsxs("button",{type:"button",onClick:Ne,className:"btn btn-secondary",style:{padding:"var(--space-2) var(--space-4)",fontSize:"var(--font-size-sm)"},children:[t.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginRight:"var(--space-2)"},children:[t.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Asset"]})]}),t.jsx("div",{className:"card-body",style:{paddingTop:0},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(180px, 1fr) minmax(180px, 1fr) minmax(120px, 180px) auto",gap:"var(--space-4)",alignItems:"end",marginBottom:"var(--space-6)"},children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Bulk Type"}),t.jsxs("select",{className:"form-input",value:z.asset_type,onChange:R=>ze(R.target.value),children:[t.jsx("option",{value:"",children:"Select Type"}),d.map(R=>t.jsx("option",{value:R.asset_type_id,children:R.asset_type_label},R.asset_type_id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Bulk Model"}),t.jsxs("select",{className:"form-input",value:z.asset_model,onChange:R=>M(le=>({...le,asset_model:R.target.value})),disabled:!z.asset_type,children:[t.jsx("option",{value:"",children:"Select Model"}),(p[z.asset_type]||[]).map(R=>t.jsx("option",{value:R.asset_model_id,children:R.model_name},R.asset_model_id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Quantity"}),t.jsx("input",{type:"number",className:"form-input",min:"1",value:z.quantity,onChange:R=>M(le=>({...le,quantity:R.target.value}))})]}),t.jsx("button",{type:"button",className:"btn btn-primary",onClick:tt,disabled:!z.asset_type||!z.asset_model||Number(z.quantity)<1,style:{padding:"var(--space-2) var(--space-4)",height:"40px"},children:"Add Quantity"})]})}),t.jsx("div",{className:"table-container",children:t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Type"}),t.jsx("th",{children:"Model"}),t.jsx("th",{children:"Serial Number"}),t.jsx("th",{children:"Inventory ID"}),t.jsx("th",{children:"Name"}),t.jsx("th",{style:{textAlign:"center"},children:"Actions"})]})}),t.jsx("tbody",{children:O.map((R,le)=>t.jsxs("tr",{children:[t.jsx("td",{children:t.jsxs("select",{className:"form-input",style:{padding:"var(--space-2)",minWidth:"140px"},value:R.asset_type,onChange:fe=>Pe(le,"asset_type",fe.target.value),required:!0,children:[t.jsx("option",{value:"",children:"Select Type"}),d.map(fe=>t.jsx("option",{value:fe.asset_type_id,children:fe.asset_type_label},fe.asset_type_id))]})}),t.jsx("td",{children:t.jsxs("select",{className:"form-input",style:{padding:"var(--space-2)",minWidth:"140px"},value:R.asset_model,onChange:fe=>Pe(le,"asset_model",fe.target.value),required:!0,disabled:!R.asset_type,children:[t.jsx("option",{value:"",children:"Select Model"}),(p[R.asset_type]||[]).map(fe=>t.jsx("option",{value:fe.asset_model_id,children:fe.model_name},fe.asset_model_id))]})}),t.jsx("td",{children:t.jsx("input",{type:"text",className:"form-input",style:{padding:"var(--space-2)"},value:R.asset_serial_number,onChange:fe=>Pe(le,"asset_serial_number",fe.target.value),placeholder:"S/N"})}),t.jsx("td",{children:t.jsx("input",{type:"text",className:"form-input",style:{padding:"var(--space-2)"},value:R.asset_inventory_number,onChange:fe=>Pe(le,"asset_inventory_number",fe.target.value),placeholder:"Inv #",maxLength:"6"})}),t.jsx("td",{children:t.jsx("input",{type:"text",className:"form-input",style:{padding:"var(--space-2)"},value:R.asset_name,onChange:fe=>Pe(le,"asset_name",fe.target.value),placeholder:"Asset Name"})}),t.jsxs("td",{style:{textAlign:"center",whiteSpace:"nowrap"},children:[t.jsx("button",{type:"button",onClick:()=>Ue(R,"stock"),className:"btn btn-secondary",style:{padding:"6px",marginRight:"8px"},disabled:!R.asset_model,title:R.asset_model?"Configure included stock items":"Select a model first",children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),t.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),t.jsx("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]})}),t.jsx("button",{type:"button",onClick:()=>Ue(R,"consumables"),className:"btn btn-secondary",style:{padding:"6px",marginRight:"8px"},disabled:!R.asset_model,title:R.asset_model?"Configure included consumables":"Select a model first",children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M12 2v6m0 0v14m0-14c-2 0-6 1-6 5s4 5 6 5 6-1 6-5-4-5-6-5z"}),t.jsx("path",{d:"M6 12c0 4 2.5 8 6 10 3.5-2 6-6 6-10",fill:"none"})]})}),t.jsx("button",{type:"button",onClick:()=>He(le),className:"logout-btn",title:"Remove row",disabled:O.length===0,children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("polyline",{points:"3 6 5 6 21 6"}),t.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]},R.id))})]})})]}),t.jsx("div",{style:{marginTop:"var(--space-8)",display:"flex",justifyContent:"flex-end"},children:t.jsx("button",{type:"submit",className:"btn btn-primary",style:{width:"auto",minWidth:"200px"},disabled:y,children:y?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"loading-spinner",style:{marginRight:"var(--space-2)"}}),"Creating..."]}):"Create Attribution Order & Assets"})})]}),V&&(D==null?void 0:D.digital_copy)&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"var(--space-6)"},onClick:()=>me(!1),children:t.jsxs("div",{className:"card",style:{width:"100%",maxWidth:"900px",height:"90vh",display:"flex",flexDirection:"column",padding:"var(--space-4)"},onClick:R=>R.stopPropagation(),children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-4)"},children:[t.jsxs("h2",{style:{margin:0},children:["Consult Receipt Report: ",D.report_full_code||"Attachment"]}),t.jsx("button",{className:"btn btn-secondary",onClick:()=>me(!1),children:"Close"})]}),ge(D.digital_copy)==="application/pdf"?t.jsx("iframe",{title:"Receipt Report Preview",src:`data:application/pdf;base64,${D.digital_copy}`,style:{flexGrow:1,border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",width:"100%",height:"100%"}}):t.jsx("div",{style:{flexGrow:1,overflow:"auto",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"var(--color-bg-alt)",borderRadius:"var(--radius-md)"},children:t.jsx("img",{src:`data:${ge(D.digital_copy)};base64,${D.digital_copy}`,alt:"Receipt Report Preview",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}})})]})})]})},Tj="attribution_order_create_draft_assets",Jd="attribution_order_create_draft_included_items",Th=()=>{const r=Dt(),{rowId:l,itemKind:u}=yr(),[d]=Bs(),m=d.get("context"),p=u==="stock"||u==="consumables"?u:"all",[h,g]=c.useState([]),[b,y]=c.useState([]),[x,S]=c.useState([]),[N,I]=c.useState([]),[k,L]=c.useState({}),[w,O]=c.useState({}),[P,z]=c.useState(!1),[M,G]=c.useState(null),ee=c.useMemo(()=>{try{return JSON.parse(sessionStorage.getItem(Tj)||"[]").find(X=>String(X.id)===String(l))||null}catch{return null}},[l]);c.useEffect(()=>{const D=async()=>{z(!0),G(null);try{const[A,Y]=await Promise.all([es.getAll(),ts.getAll()]);g(Array.isArray(A)?A:(A==null?void 0:A.results)||[]),y(Array.isArray(Y)?Y:(Y==null?void 0:Y.results)||[])}catch{G("Failed to fetch models")}finally{z(!1)}},X=()=>{try{const A=JSON.parse(sessionStorage.getItem(Jd)||"{}"),Y=(A==null?void 0:A[l])||{};return Y.stock_item_instances&&L(Y.stock_item_instances),Y.consumable_instances&&O(Y.consumable_instances),{hasDraft:!!Y.stock_item_instances||!!Y.consumable_instances}}catch{return{hasDraft:!1}}},V=async()=>{if(ee!=null&&ee.asset_model){z(!0),G(null);try{const[A,Y]=await Promise.all([ft.getDefaultStockItems(ee.asset_model),ft.getDefaultConsumables(ee.asset_model)]),ne=Array.isArray(A)?A:(A==null?void 0:A.results)||[],U=Array.isArray(Y)?Y:(Y==null?void 0:Y.results)||[];S(ne),I(U);const ge={};ne.forEach(B=>{const se=Math.max(1,Number(B.quantity)||1);ge[B.stock_item_model]=Array.from({length:se},()=>({stock_item_name:"",stock_item_inventory_number:""}))}),L(ge);const be={};U.forEach(B=>{const se=Math.max(1,Number(B.quantity)||1);be[B.consumable_model]=Array.from({length:se},()=>({consumable_name:"",consumable_serial_number:"",consumable_inventory_number:""}))}),O(be),F(ge,be)}catch{G("Failed to load default composition")}finally{z(!1)}}};D();const{hasDraft:me}=X();me?ee!=null&&ee.asset_model&&(async()=>{try{const[A,Y]=await Promise.all([ft.getDefaultStockItems(ee.asset_model),ft.getDefaultConsumables(ee.asset_model)]);S(Array.isArray(A)?A:(A==null?void 0:A.results)||[]),I(Array.isArray(Y)?Y:(Y==null?void 0:Y.results)||[])}catch{}})():V()},[l,ee==null?void 0:ee.asset_model]);const K=c.useMemo(()=>{const D=new Map;return(Array.isArray(h)?h:[]).forEach(X=>{D.set(X.stock_item_model_id,X)}),D},[h]),re=c.useMemo(()=>{const D=new Map;return(Array.isArray(b)?b:[]).forEach(X=>{D.set(X.consumable_model_id,X)}),D},[b]),F=(D,X)=>{let V={};try{V=JSON.parse(sessionStorage.getItem(Jd)||"{}")}catch{V={}}V[l]={stock_item_instances:D,consumable_instances:X,stock_items:Object.entries(D).map(([me,A])=>({stock_item_model:Number(me),quantity:A.length,instances:A})),consumables:Object.entries(X).map(([me,A])=>({consumable_model:Number(me),quantity:A.length,instances:A}))},sessionStorage.setItem(Jd,JSON.stringify(V))},T=(D,X,V,me)=>{const A={...k,[D]:k[D].map((Y,ne)=>ne===X?{...Y,[V]:me}:Y)};L(A),F(A,w)},te=(D,X,V,me)=>{const A={...w,[D]:w[D].map((Y,ne)=>ne===X?{...Y,[V]:me}:Y)};O(A),F(k,A)},de=()=>{r(m==="create"?"/dashboard/attribution-orders?mode=create":m?`/dashboard/attribution-orders?orderId=${m}`:"/dashboard/attribution-orders")},he=c.useMemo(()=>{const D=[];return x.forEach(X=>{const V=X.stock_item_model,me=k[V]||[],A=Math.max(1,Number(X.quantity)||1);for(let Y=0;Y<A;Y++)D.push({modelId:V,instanceIdx:Y,instance:me[Y]||{stock_item_name:"",stock_item_inventory_number:""}})}),D},[x,k]),_e=c.useMemo(()=>{const D=[];return N.forEach(X=>{const V=X.consumable_model,me=w[V]||[],A=Math.max(1,Number(X.quantity)||1);for(let Y=0;Y<A;Y++)D.push({modelId:V,instanceIdx:Y,instance:me[Y]||{consumable_name:"",consumable_serial_number:"",consumable_inventory_number:""}})}),D},[N,w]),ye=he.length,j=_e.length;return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Attribution Orders"}),t.jsxs("p",{className:"page-subtitle",children:["Configure included items ",ee!=null&&ee.asset_name?` ${ee.asset_name}`:""]})]}),M&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:M}),t.jsx("div",{className:"card",style:{padding:"var(--space-4)",marginBottom:"var(--space-4)"},children:t.jsxs("div",{style:{display:"flex",gap:"var(--space-3)",alignItems:"center",flexWrap:"wrap"},children:[t.jsx("button",{onClick:de,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})}),t.jsxs("div",{style:{color:"var(--color-text-secondary)"},children:["Stock items: ",ye,"  Consumables: ",j]})]})}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:p==="all"?"1fr 1fr":"1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[(p==="all"||p==="stock")&&t.jsxs("div",{className:"card",style:{padding:"var(--space-4)",overflow:"auto",display:"flex",flexDirection:"column"},children:[t.jsx("div",{className:"card-header",style:{marginBottom:"var(--space-3)"},children:t.jsx("h2",{className:"card-title",children:"Default Stock Items"})}),he.length===0?t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)"},children:"No default stock items for this asset model."}):t.jsx("div",{className:"table-container",children:t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:{width:"50px"},children:"#"}),t.jsx("th",{children:"Type"}),t.jsx("th",{children:"Model"}),t.jsx("th",{children:"Name"}),t.jsx("th",{children:"Inventory #"})]})}),t.jsx("tbody",{children:he.map((D,X)=>{const V=K.get(Number(D.modelId)),me=(V==null?void 0:V.model_name)||`Model #${D.modelId}`,A=(V==null?void 0:V.model_code)||"",Y=(V==null?void 0:V.stock_item_type_label)||"-";return t.jsxs("tr",{children:[t.jsx("td",{style:{color:"var(--color-text-secondary)"},children:X+1}),t.jsx("td",{children:Y}),t.jsxs("td",{children:[t.jsx("div",{style:{fontWeight:"500"},children:me}),A&&t.jsx("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:A})]}),t.jsx("td",{children:t.jsx("input",{type:"text",value:D.instance.stock_item_name||"",onChange:ne=>T(D.modelId,D.instanceIdx,"stock_item_name",ne.target.value),style:{width:"100%",padding:"6px"},placeholder:"Enter name..."})}),t.jsx("td",{children:t.jsx("input",{type:"text",value:D.instance.stock_item_inventory_number||"",onChange:ne=>T(D.modelId,D.instanceIdx,"stock_item_inventory_number",ne.target.value),style:{width:"100%",padding:"6px"},placeholder:"Enter inventory #..."})})]},`stock-${D.modelId}-${D.instanceIdx}`)})})]})})]}),(p==="all"||p==="consumables")&&t.jsxs("div",{className:"card",style:{padding:"var(--space-4)",overflow:"auto",display:"flex",flexDirection:"column"},children:[t.jsx("div",{className:"card-header",style:{marginBottom:"var(--space-3)"},children:t.jsx("h2",{className:"card-title",children:"Default Consumables"})}),_e.length===0?t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)"},children:"No default consumables for this asset model."}):t.jsx("div",{className:"table-container",children:t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:{width:"50px"},children:"#"}),t.jsx("th",{children:"Type"}),t.jsx("th",{children:"Model"}),t.jsx("th",{children:"Name"}),t.jsx("th",{children:"Serial #"}),t.jsx("th",{children:"Inventory #"})]})}),t.jsx("tbody",{children:_e.map((D,X)=>{const V=re.get(Number(D.modelId)),me=(V==null?void 0:V.model_name)||`Model #${D.modelId}`,A=(V==null?void 0:V.model_code)||"",Y=(V==null?void 0:V.consumable_type_label)||"-";return t.jsxs("tr",{children:[t.jsx("td",{style:{color:"var(--color-text-secondary)"},children:X+1}),t.jsx("td",{children:Y}),t.jsxs("td",{children:[t.jsx("div",{style:{fontWeight:"500"},children:me}),A&&t.jsx("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:A})]}),t.jsx("td",{children:t.jsx("input",{type:"text",value:D.instance.consumable_name||"",onChange:ne=>te(D.modelId,D.instanceIdx,"consumable_name",ne.target.value),style:{width:"100%",padding:"6px"},placeholder:"Enter name..."})}),t.jsx("td",{children:t.jsx("input",{type:"text",value:D.instance.consumable_serial_number||"",onChange:ne=>te(D.modelId,D.instanceIdx,"consumable_serial_number",ne.target.value),style:{width:"100%",padding:"6px"},placeholder:"Enter serial #..."})}),t.jsx("td",{children:t.jsx("input",{type:"text",value:D.instance.consumable_inventory_number||"",onChange:ne=>te(D.modelId,D.instanceIdx,"consumable_inventory_number",ne.target.value),style:{width:"100%",padding:"6px"},placeholder:"Enter inventory #..."})})]},`cons-${D.modelId}-${D.instanceIdx}`)})})]})})]})]})]})},zj=()=>{var z;const{user:r}=fs(),l=(z=r==null?void 0:r.roles)==null?void 0:z.some(M=>M.role_code==="asset_responsible"),[u,d]=c.useState(!0),[m,p]=c.useState(null),[h,g]=c.useState(null),[b,y]=c.useState(!1),[x,S]=c.useState([]),[N,I]=c.useState({}),[k,L]=c.useState(!1),[w,O]=c.useState({attribution_order:"",administrative_serial_number:"",title_of_demand:"",organization_body_designation:"",register_number_or_book_journal_of_corpse:"",register_number_or_book_journal_of_establishment:"",is_signed_by_company:!1,is_signed_by_company_leader:!1,is_signed_by_regional_provider:!1,is_signed_by_company_representative:!1,digital_copy:null});c.useEffect(()=>{if(!l)return;(async()=>{d(!0),p(null),g(null);try{const[G,ee]=await Promise.all([Yd.getAll(),Jr.getAll()]),K=(G==null?void 0:G.results)||G||[];S(K);const re=(ee==null?void 0:ee.results)||ee||[],F={};re.forEach(T=>{F[T.attribution_order_id]=T}),I(F)}catch{p("Failed to fetch company asset requests")}finally{d(!1)}})()},[l]);const P=async M=>{var G,ee;M.preventDefault(),y(!0),p(null),g(null);try{const K=new FormData;K.append("attribution_order",w.attribution_order),w.administrative_serial_number&&K.append("administrative_serial_number",w.administrative_serial_number),w.title_of_demand&&K.append("title_of_demand",w.title_of_demand),w.organization_body_designation&&K.append("organization_body_designation",w.organization_body_designation),w.register_number_or_book_journal_of_corpse&&K.append("register_number_or_book_journal_of_corpse",w.register_number_or_book_journal_of_corpse),w.register_number_or_book_journal_of_establishment&&K.append("register_number_or_book_journal_of_establishment",w.register_number_or_book_journal_of_establishment),K.append("is_signed_by_company",!!w.is_signed_by_company),K.append("is_signed_by_company_leader",!!w.is_signed_by_company_leader),K.append("is_signed_by_regional_provider",!!w.is_signed_by_regional_provider),K.append("is_signed_by_company_representative",!!w.is_signed_by_company_representative),w.digital_copy&&K.append("digital_copy",w.digital_copy),await Yd.create(K);const re=await Yd.getAll(),F=(re==null?void 0:re.results)||re||[];S(F),g("Company asset request created successfully"),L(!1),O({attribution_order:"",administrative_serial_number:"",title_of_demand:"",organization_body_designation:"",register_number_or_book_journal_of_corpse:"",register_number_or_book_journal_of_establishment:"",is_signed_by_company:!1,is_signed_by_company_leader:!1,is_signed_by_regional_provider:!1,is_signed_by_company_representative:!1,digital_copy:null})}catch(K){p(((ee=(G=K.response)==null?void 0:G.data)==null?void 0:ee.error)||"Failed to create company asset request")}finally{y(!1)}};return l?u?t.jsx("div",{className:"loading",children:"Loading..."}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"page-title",children:"Company Asset Requests"}),t.jsx("p",{className:"page-subtitle",children:"Consult company asset requests"})]}),t.jsx("div",{children:t.jsx("button",{className:`btn btn-${k?"secondary":"primary"}`,onClick:()=>L(!k),children:k?"Cancel":"+ New Request"})})]}),m&&t.jsx("div",{className:"error-message",children:m}),h&&t.jsx("div",{className:"badge badge-success",style:{padding:"var(--space-4)",width:"100%",marginBottom:"var(--space-4)",borderRadius:"var(--radius-md)"},children:h}),k&&t.jsxs("div",{className:"card",style:{marginBottom:"var(--space-6)",border:"2px solid var(--color-primary)"},children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"New Company Asset Request"})}),t.jsx("div",{className:"card-body",children:t.jsxs("form",{onSubmit:P,children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"var(--space-6)",marginBottom:"var(--space-6)"},children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Attribution Order"}),t.jsxs("select",{className:"form-input",value:w.attribution_order,onChange:M=>O({...w,attribution_order:M.target.value}),required:!0,children:[t.jsx("option",{value:"",children:"Select Attribution Order"}),Object.values(N).map(M=>t.jsx("option",{value:M.attribution_order_id,children:M.attribution_order_full_code||`#${M.attribution_order_id}`},M.attribution_order_id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Administrative Serial Number"}),t.jsx("input",{type:"text",className:"form-input",value:w.administrative_serial_number,onChange:M=>O({...w,administrative_serial_number:M.target.value}),placeholder:"e.g. ADM-2026-001"})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Title of Demand"}),t.jsx("input",{type:"text",className:"form-input",value:w.title_of_demand,onChange:M=>O({...w,title_of_demand:M.target.value}),placeholder:"Title"})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Organization Body Designation"}),t.jsx("input",{type:"text",className:"form-input",value:w.organization_body_designation,onChange:M=>O({...w,organization_body_designation:M.target.value}),placeholder:"Designation"})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Register Number / Book Journal of Corpse"}),t.jsx("input",{type:"text",className:"form-input",value:w.register_number_or_book_journal_of_corpse,onChange:M=>O({...w,register_number_or_book_journal_of_corpse:M.target.value}),placeholder:"Register #"})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Register Number / Book Journal of Establishment"}),t.jsx("input",{type:"text",className:"form-input",value:w.register_number_or_book_journal_of_establishment,onChange:M=>O({...w,register_number_or_book_journal_of_establishment:M.target.value}),placeholder:"Register #"})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Digital Copy (Attachment)"}),t.jsx("input",{type:"file",className:"form-input",onChange:M=>O({...w,digital_copy:M.target.files[0]}),accept:"image/*,application/pdf"})]}),t.jsxs("div",{className:"form-group",style:{display:"flex",flexDirection:"column",gap:"var(--space-2)"},children:[t.jsx("label",{className:"form-label",children:"Signatures"}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[t.jsx("input",{type:"checkbox",checked:!!w.is_signed_by_company,onChange:M=>O({...w,is_signed_by_company:M.target.checked})}),t.jsx("span",{children:"Signed by company"})]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[t.jsx("input",{type:"checkbox",checked:!!w.is_signed_by_company_leader,onChange:M=>O({...w,is_signed_by_company_leader:M.target.checked})}),t.jsx("span",{children:"Signed by company leader"})]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[t.jsx("input",{type:"checkbox",checked:!!w.is_signed_by_regional_provider,onChange:M=>O({...w,is_signed_by_regional_provider:M.target.checked})}),t.jsx("span",{children:"Signed by regional provider"})]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[t.jsx("input",{type:"checkbox",checked:!!w.is_signed_by_company_representative,onChange:M=>O({...w,is_signed_by_company_representative:M.target.checked})}),t.jsx("span",{children:"Signed by company representative"})]})]})]}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:b,children:b?"Creating...":"Create Request"})]})})]}),t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"All Requests"})}),t.jsx("div",{className:"table-container",children:t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"ID"}),t.jsx("th",{children:"Administrative #"}),t.jsx("th",{children:"Title"}),t.jsx("th",{children:"Attribution Order"}),t.jsx("th",{children:"Body Designation"}),t.jsx("th",{children:"Reg. (Corpse)"}),t.jsx("th",{children:"Reg. (Est.)"}),t.jsx("th",{children:"Signed (Company)"}),t.jsx("th",{children:"Signed (Leader)"}),t.jsx("th",{children:"Signed (Regional)"}),t.jsx("th",{children:"Signed (Representative)"}),t.jsx("th",{children:"Digital Copy"})]})}),t.jsx("tbody",{children:x.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:"12",style:{textAlign:"center",padding:"var(--space-4)"},children:"No company asset requests found."})}):x.map(M=>{const G=M.attribution_order,ee=N[G];return t.jsxs("tr",{className:"hover-row",children:[t.jsxs("td",{children:["#",M.company_asset_request_id]}),t.jsx("td",{children:M.administrative_serial_number||"-"}),t.jsx("td",{children:M.title_of_demand||"-"}),t.jsx("td",{children:(ee==null?void 0:ee.attribution_order_full_code)||`#${G}`}),t.jsx("td",{children:M.organization_body_designation||"-"}),t.jsx("td",{children:M.register_number_or_book_journal_of_corpse||"-"}),t.jsx("td",{children:M.register_number_or_book_journal_of_establishment||"-"}),t.jsx("td",{children:M.is_signed_by_company?"Yes":"No"}),t.jsx("td",{children:M.is_signed_by_company_leader?"Yes":"No"}),t.jsx("td",{children:M.is_signed_by_regional_provider?"Yes":"No"}),t.jsx("td",{children:M.is_signed_by_company_representative?"Yes":"No"}),t.jsx("td",{children:M.digital_copy?"Yes":"No"})]},M.company_asset_request_id)})})]})})]})]}):t.jsx(Xs,{to:"/dashboard",replace:!0})},Ej=()=>{var re;const{user:r}=fs(),l=(re=r==null?void 0:r.roles)==null?void 0:re.some(F=>F.role_code==="asset_responsible"),[u,d]=c.useState(!0),[m,p]=c.useState(null),[h,g]=c.useState(null),[b,y]=c.useState(!1),[x,S]=c.useState([]),[N,I]=c.useState({}),[k,L]=c.useState({}),[w,O]=c.useState({}),[P,z]=c.useState(!1),[M,G]=c.useState({warehouse:"",attribution_order:"",receipt_report:"",interested_organization:"ESAM/2RM",operation:"",format:"21x27",is_signed_by_warehouse_storage_magaziner:!1,is_signed_by_warehouse_storage_accountant:!1,is_signed_by_warehouse_storage_marketer:!1,is_signed_by_warehouse_it_chief:!1,is_signed_by_warehouse_leader:!1,digital_copy:null}),ee=async()=>{d(!0),p(null),g(null);try{const[F,T,te]=await Promise.all([ki.getAll(),Jr.getAll(),_y.getAll()]),de=(F==null?void 0:F.results)||F||[];S(de);const he=(T==null?void 0:T.results)||T||[],_e={};he.forEach(X=>{_e[X.attribution_order_id]=X}),I(_e);const ye=(te==null?void 0:te.results)||te||[],j={};ye.forEach(X=>{j[X.warehouse_id]=X}),L(j);const D=Array.from(new Set(de.map(X=>X.receipt_report).filter(X=>!!X)));if(D.length===0)O({});else{const X=await Promise.all(D.map(async me=>{try{const A=await iu.getById(me);return[me,A]}catch{return[me,null]}})),V={};X.forEach(([me,A])=>{A&&(V[me]=A)}),O(V)}}catch{p("Failed to fetch administrative certificates")}finally{d(!1)}};c.useEffect(()=>{l&&ee()},[l]);const K=async F=>{var T,te;F.preventDefault(),y(!0),p(null),g(null);try{if(M.operation&&!["entry","exit","transfer"].includes(M.operation)){p("Operation must be entry, exit, or transfer");return}const de=new FormData;M.warehouse&&de.append("warehouse",M.warehouse),M.attribution_order&&de.append("attribution_order",M.attribution_order),M.receipt_report&&de.append("receipt_report",M.receipt_report),M.interested_organization&&de.append("interested_organization",M.interested_organization),M.operation&&de.append("operation",M.operation),M.format&&de.append("format",M.format),de.append("is_signed_by_warehouse_storage_magaziner",!!M.is_signed_by_warehouse_storage_magaziner),de.append("is_signed_by_warehouse_storage_accountant",!!M.is_signed_by_warehouse_storage_accountant),de.append("is_signed_by_warehouse_storage_marketer",!!M.is_signed_by_warehouse_storage_marketer),de.append("is_signed_by_warehouse_it_chief",!!M.is_signed_by_warehouse_it_chief),de.append("is_signed_by_warehouse_leader",!!M.is_signed_by_warehouse_leader),M.digital_copy&&de.append("digital_copy",M.digital_copy),await ki.create(de),await ee(),g("Administrative certificate created successfully"),z(!1),G({warehouse:"",attribution_order:"",receipt_report:"",interested_organization:"ESAM/2RM",operation:"",format:"21x27",is_signed_by_warehouse_storage_magaziner:!1,is_signed_by_warehouse_storage_accountant:!1,is_signed_by_warehouse_storage_marketer:!1,is_signed_by_warehouse_it_chief:!1,is_signed_by_warehouse_leader:!1,digital_copy:null})}catch(de){p(((te=(T=de.response)==null?void 0:T.data)==null?void 0:te.error)||"Failed to create administrative certificate")}finally{y(!1)}};return l?u?t.jsx("div",{className:"loading",children:"Loading..."}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"page-title",children:"Administrative Certificates"}),t.jsx("p",{className:"page-subtitle",children:"Consult and create administrative certificates"})]}),t.jsx("div",{children:t.jsx("button",{className:`btn btn-${P?"secondary":"primary"}`,onClick:()=>z(!P),children:P?"Cancel":"+ New Certificate"})})]}),m&&t.jsx("div",{className:"error-message",children:m}),h&&t.jsx("div",{className:"badge badge-success",style:{padding:"var(--space-4)",width:"100%",marginBottom:"var(--space-4)",borderRadius:"var(--radius-md)"},children:h}),P&&t.jsxs("div",{className:"card",style:{marginBottom:"var(--space-6)",border:"2px solid var(--color-primary)"},children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"New Administrative Certificate"})}),t.jsx("div",{className:"card-body",children:t.jsxs("form",{onSubmit:K,children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"var(--space-6)",marginBottom:"var(--space-6)"},children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Warehouse"}),t.jsxs("select",{className:"form-input",value:M.warehouse,onChange:F=>G({...M,warehouse:F.target.value}),children:[t.jsx("option",{value:"",children:"Select Warehouse"}),Object.values(k).map(F=>t.jsx("option",{value:F.warehouse_id,children:F.warehouse_name||`#${F.warehouse_id}`},F.warehouse_id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Attribution Order"}),t.jsxs("select",{className:"form-input",value:M.attribution_order,onChange:F=>G({...M,attribution_order:F.target.value}),children:[t.jsx("option",{value:"",children:"Select Attribution Order"}),Object.values(N).map(F=>t.jsx("option",{value:F.attribution_order_id,children:F.attribution_order_full_code||`#${F.attribution_order_id}`},F.attribution_order_id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Receipt Report ID"}),t.jsx("input",{type:"number",className:"form-input",value:M.receipt_report,onChange:F=>G({...M,receipt_report:F.target.value}),placeholder:"e.g. 1"})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Interested Organization"}),t.jsx("input",{type:"text",className:"form-input",value:M.interested_organization,onChange:F=>G({...M,interested_organization:F.target.value}),placeholder:"Organization"})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Operation"}),t.jsxs("select",{className:"form-input",value:M.operation,onChange:F=>G({...M,operation:F.target.value}),children:[t.jsx("option",{value:"",children:"Select Operation"}),t.jsx("option",{value:"entry",children:"entry"}),t.jsx("option",{value:"exit",children:"exit"}),t.jsx("option",{value:"transfer",children:"transfer"})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Format"}),t.jsx("input",{type:"text",className:"form-input",value:M.format,onChange:F=>G({...M,format:F.target.value}),placeholder:"Format"})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Digital Copy (Attachment)"}),t.jsx("input",{type:"file",className:"form-input",onChange:F=>G({...M,digital_copy:F.target.files[0]}),accept:"image/*,application/pdf"})]}),t.jsxs("div",{className:"form-group",style:{display:"flex",flexDirection:"column",gap:"var(--space-2)"},children:[t.jsx("label",{className:"form-label",children:"Signatures"}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[t.jsx("input",{type:"checkbox",checked:!!M.is_signed_by_warehouse_storage_magaziner,onChange:F=>G({...M,is_signed_by_warehouse_storage_magaziner:F.target.checked})}),t.jsx("span",{children:"Signed by magaziner"})]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[t.jsx("input",{type:"checkbox",checked:!!M.is_signed_by_warehouse_storage_accountant,onChange:F=>G({...M,is_signed_by_warehouse_storage_accountant:F.target.checked})}),t.jsx("span",{children:"Signed by accountant"})]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[t.jsx("input",{type:"checkbox",checked:!!M.is_signed_by_warehouse_storage_marketer,onChange:F=>G({...M,is_signed_by_warehouse_storage_marketer:F.target.checked})}),t.jsx("span",{children:"Signed by marketer"})]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[t.jsx("input",{type:"checkbox",checked:!!M.is_signed_by_warehouse_it_chief,onChange:F=>G({...M,is_signed_by_warehouse_it_chief:F.target.checked})}),t.jsx("span",{children:"Signed by IT chief"})]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[t.jsx("input",{type:"checkbox",checked:!!M.is_signed_by_warehouse_leader,onChange:F=>G({...M,is_signed_by_warehouse_leader:F.target.checked})}),t.jsx("span",{children:"Signed by warehouse leader"})]})]})]}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:b,children:b?"Creating...":"Create Certificate"})]})})]}),t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"All Certificates"})}),t.jsx("div",{className:"table-container",children:t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"ID"}),t.jsx("th",{children:"Warehouse"}),t.jsx("th",{children:"Attribution Order"}),t.jsx("th",{children:"Receipt Report"}),t.jsx("th",{children:"Interested Org"}),t.jsx("th",{children:"Operation"}),t.jsx("th",{children:"Format"}),t.jsx("th",{children:"Signed (Magaziner)"}),t.jsx("th",{children:"Signed (Accountant)"}),t.jsx("th",{children:"Signed (Marketer)"}),t.jsx("th",{children:"Signed (IT)"}),t.jsx("th",{children:"Signed (Leader)"}),t.jsx("th",{children:"Digital Copy"})]})}),t.jsx("tbody",{children:x.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:"13",style:{textAlign:"center",padding:"var(--space-4)"},children:"No administrative certificates found."})}):x.map(F=>{const T=k[F.warehouse],te=N[F.attribution_order],de=w[F.receipt_report];return t.jsxs("tr",{className:"hover-row",children:[t.jsxs("td",{children:["#",F.administrative_certificate_id]}),t.jsx("td",{children:(T==null?void 0:T.warehouse_name)||(F.warehouse?`#${F.warehouse}`:"-")}),t.jsx("td",{children:(te==null?void 0:te.attribution_order_full_code)||(F.attribution_order?`#${F.attribution_order}`:"-")}),t.jsx("td",{children:(de==null?void 0:de.report_full_code)||(F.receipt_report?`#${F.receipt_report}`:"-")}),t.jsx("td",{children:F.interested_organization||"-"}),t.jsx("td",{children:F.operation||"-"}),t.jsx("td",{children:F.format||"-"}),t.jsx("td",{children:F.is_signed_by_warehouse_storage_magaziner?"Yes":"No"}),t.jsx("td",{children:F.is_signed_by_warehouse_storage_accountant?"Yes":"No"}),t.jsx("td",{children:F.is_signed_by_warehouse_storage_marketer?"Yes":"No"}),t.jsx("td",{children:F.is_signed_by_warehouse_it_chief?"Yes":"No"}),t.jsx("td",{children:F.is_signed_by_warehouse_leader?"Yes":"No"}),t.jsx("td",{children:F.digital_copy?"Yes":"No"})]},F.administrative_certificate_id)})})]})})]})]}):t.jsx(Xs,{to:"/dashboard",replace:!0})},Dj=()=>{var _e;const{user:r}=fs(),l=(_e=r==null?void 0:r.roles)==null?void 0:_e.some(ye=>ye.role_code==="stock_consumable_responsible"),[u,d]=c.useState(!0),[m,p]=c.useState(null),[h,g]=c.useState(null),[b,y]=c.useState(null),[x,S]=c.useState([]),[N,I]=c.useState([]),[k,L]=c.useState({}),[w,O]=c.useState({}),[P,z]=c.useState({}),M=c.useMemo(()=>(x||[]).filter(ye=>(ye.status||"").toLowerCase()==="pending"),[x]),G=async()=>{d(!0),g(null),y(null);try{const[ye,j]=await Promise.all([Xr.getAll(),qs.getAll()]),D=(ye==null?void 0:ye.results)||ye||[];S(Array.isArray(D)?D:[]),I(Array.isArray(j)?j:[]);const X={};(Array.isArray(D)?D:[]).forEach(V=>{X[V.maintenance_step_item_request_id]={source_room_id:"",destination_room_id:"",stock_item_id:"",consumable_id:""}}),L(X)}catch{g("Failed to fetch item requests inbox")}finally{d(!1)}},ee=async ye=>{var D,X;const j=ye.maintenance_step_item_request_id;p(j),g(null),y(null);try{const V=window.prompt("Rejection note (optional):","")??"",me={};V!==""&&(me.note=V),await Xr.reject(j,me),y(`Request #${j} rejected successfully`),await G()}catch(V){g(((X=(D=V.response)==null?void 0:D.data)==null?void 0:X.error)||"Failed to reject request")}finally{p(null)}};c.useEffect(()=>{l&&G()},[l]);const K=(ye,j)=>{L(D=>({...D,[ye]:{...D[ye]||{},...j}}))},re=async ye=>{try{const j=await Xr.eligibleItems(ye.maintenance_step_item_request_id);return Array.isArray(j==null?void 0:j.results)?j.results:[]}catch{return[]}return[]},F=async ye=>{const j=ye.maintenance_step_item_request_id;z(D=>({...D,[j]:!0}));try{const D=await Xr.eligibleItems(j),X=Array.isArray(D==null?void 0:D.results)?D.results:[];O(V=>({...V,[j]:X}))}catch{O(D=>({...D,[j]:[]}))}finally{z(D=>({...D,[j]:!1}))}},T=async ye=>{const j=ye.maintenance_step_item_request_id;P[j]||Array.isArray(w[j])||await F(ye)},te=ye=>{const j=Number(ye);if(!j||Number.isNaN(j))return"";const D=N.find(X=>Number(X.room_id)===j);return D?`${D.room_name} (#${D.room_id})`:`#${j}`},de=async ye=>{var X,V;const j=ye.maintenance_step_item_request_id,D=k[j]||{};p(j),g(null),y(null);try{if(!D.source_room_id||!D.destination_room_id){g("Source room and destination room are required");return}const me={source_room_id:Number(D.source_room_id),destination_room_id:Number(D.destination_room_id)};if(ye.request_type==="stock_item"){if(!D.stock_item_id){g("stock_item_id is required");return}me.stock_item_id=Number(D.stock_item_id)}else if(ye.request_type==="consumable"){if(!D.consumable_id){g("consumable_id is required");return}me.consumable_id=Number(D.consumable_id)}else{g("Invalid request type");return}await Xr.fulfill(j,me),y(`Request #${j} fulfilled successfully`),await G()}catch(me){g(((V=(X=me.response)==null?void 0:X.data)==null?void 0:V.error)||"Failed to fulfill request")}finally{p(null)}},he=async ye=>{var D,X;const j=ye.maintenance_step_item_request_id;p(j),g(null),y(null);try{const V=await Xr.selectRandom(j);V.request_type==="stock_item"?K(j,{stock_item_id:V.stock_item_id?String(V.stock_item_id):"",source_room_id:V.source_room_id||""}):V.request_type==="consumable"?K(j,{consumable_id:V.consumable_id?String(V.consumable_id):"",source_room_id:V.source_room_id||""}):g("Invalid selection response")}catch(V){g(((X=(D=V.response)==null?void 0:D.data)==null?void 0:X.error)||"Failed to select randomly")}finally{p(null)}};return l?u?t.jsx("div",{className:"loading",children:"Loading..."}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"page-title",children:"Item Requests Inbox"}),t.jsx("p",{className:"page-subtitle",children:"Fulfill maintenance step requests for stock items and consumables"})]}),t.jsx("div",{children:t.jsx("button",{className:"btn btn-secondary",onClick:G,children:"Refresh"})})]}),h&&t.jsx("div",{className:"error-message",children:h}),b&&t.jsx("div",{className:"badge badge-success",style:{padding:"var(--space-4)",width:"100%",marginBottom:"var(--space-4)",borderRadius:"var(--radius-md)"},children:b}),t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"Pending Requests"})}),t.jsx("div",{className:"card-body",children:M.length===0?t.jsx("div",{style:{opacity:.8},children:"No pending requests"}):t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"var(--space-4)"},children:M.map(ye=>{const j=ye.maintenance_step_item_request_id,D=k[j]||{},X=ye.request_type==="stock_item"?ye.requested_stock_item_model:ye.requested_consumable_model;return t.jsxs("div",{className:"card",style:{border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)"},children:[t.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsxs("div",{className:"card-title",style:{marginBottom:4},children:["Request #",j]}),t.jsxs("div",{style:{fontSize:12,opacity:.85},children:["Type: ",t.jsx("b",{children:ye.request_type})," | Step: ",t.jsx("b",{children:ye.maintenance_step})," | Requested model id:"," ",t.jsx("b",{children:X||"-"})]})]}),t.jsxs("div",{style:{fontSize:12,opacity:.85},children:["Status: ",t.jsx("b",{children:ye.status})]})]}),t.jsxs("div",{className:"card-body",children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:[ye.request_type==="stock_item"?t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Stock Item"}),t.jsxs("select",{className:"form-input",value:D.stock_item_id,onChange:V=>{const me=V.target.value,Y=(w[j]||[]).find(ne=>String(ne.stock_item_id)===String(me));K(j,{stock_item_id:me,source_room_id:(Y==null?void 0:Y.current_room_id)||""})},onFocus:()=>T(ye),children:[t.jsx("option",{value:"",children:"Select stock item"}),(w[j]||[]).map(V=>t.jsxs("option",{value:V.stock_item_id,children:[V.stock_item_id,V.stock_item_inventory_number?` (${V.stock_item_inventory_number})`:""," - ",te(V.current_room_id)]},V.stock_item_id))]}),t.jsx("div",{style:{fontSize:12,opacity:.75,marginTop:6},children:P[j]?"Loading available items...":"Choose an available item that matches the requested model."})]}):t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Consumable"}),t.jsxs("select",{className:"form-input",value:D.consumable_id,onChange:V=>{const me=V.target.value,Y=(w[j]||[]).find(ne=>String(ne.consumable_id)===String(me));K(j,{consumable_id:me,source_room_id:(Y==null?void 0:Y.current_room_id)||""})},onFocus:()=>T(ye),children:[t.jsx("option",{value:"",children:"Select consumable"}),(w[j]||[]).map(V=>t.jsxs("option",{value:V.consumable_id,children:[V.consumable_id,V.consumable_inventory_number?` (${V.consumable_inventory_number})`:""," - ",te(V.current_room_id)]},V.consumable_id))]}),t.jsx("div",{style:{fontSize:12,opacity:.75,marginTop:6},children:P[j]?"Loading available items...":"Choose an available item that matches the requested model."})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Source Room"}),t.jsxs("select",{className:"form-input",value:D.source_room_id,onChange:()=>{},disabled:!0,children:[t.jsx("option",{value:"",children:"Source room (auto)"}),N.map(V=>t.jsxs("option",{value:V.room_id,children:[V.room_name," (#",V.room_id,")"]},V.room_id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Destination Room"}),t.jsxs("select",{className:"form-input",value:D.destination_room_id,onChange:V=>K(j,{destination_room_id:V.target.value}),children:[t.jsx("option",{value:"",children:"Select destination room"}),N.map(V=>t.jsxs("option",{value:V.room_id,children:[V.room_name," (#",V.room_id,")"]},V.room_id))]})]})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-3)",alignItems:"center"},children:[t.jsx("button",{className:"btn btn-primary",disabled:m===j,onClick:()=>de(ye),children:m===j?"Fulfilling...":"Fulfill"}),t.jsx("button",{className:"btn btn-secondary",disabled:m===j,onClick:()=>ee(ye),children:m===j?"Rejecting...":"Reject"}),t.jsx("button",{className:"btn btn-secondary",disabled:m===j,onClick:()=>he(ye),children:"Select randomly"}),t.jsx("button",{className:"btn btn-secondary",disabled:m===j,onClick:async()=>{const me=(await re(ye)).slice(0,20).map(A=>ye.request_type==="stock_item"?`${A.stock_item_id} - ${A.stock_item_name||""} (model ${A.stock_item_model_id})`:`${A.consumable_id} - ${A.consumable_name||""} (model ${A.consumable_model_id})`).join(`
`);window.alert(me||"No candidates found (or backend filtering not available).")},children:"Show candidates (top 20)"})]})]})]},j)})})})]})]}):t.jsx(Xs,{to:"/dashboard",replace:!0})},Oj=({value:r,onChange:l,options:u=[],placeholder:d="Select...",disabled:m=!1,required:p=!1,className:h=""})=>{const[g,b]=c.useState(!1),[y,x]=c.useState(""),S=c.useRef(null),N=c.useRef(null),I=u.find(O=>String(O.value)===String(r)),k=u.filter(O=>{var P;return(P=O.label)==null?void 0:P.toLowerCase().includes(y.toLowerCase())});c.useEffect(()=>{const O=P=>{S.current&&!S.current.contains(P.target)&&(b(!1),x(""))};return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[]);const L=O=>{l({target:{value:O.value}}),b(!1),x("")},w=O=>{O.key==="Escape"?(b(!1),x("")):O.key==="Enter"&&k.length>0?L(k[0]):O.key==="ArrowDown"&&g&&O.preventDefault()};return t.jsxs("div",{ref:S,className:`searchable-select ${h}`,style:{position:"relative"},children:[t.jsxs("div",{className:"form-input",onClick:()=>!m&&b(!g),onKeyDown:w,style:{cursor:m?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:"38px",opacity:m?.7:1,backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",padding:"0.5rem 0.75rem"},children:[t.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:I?"var(--color-text-primary)":"var(--color-text-secondary)"},children:I?I.label:d}),t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginLeft:8,flexShrink:0,transform:g?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:t.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),g&&!m&&t.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:1e3,marginTop:4,backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",boxShadow:"var(--shadow-lg)",maxHeight:250,display:"flex",flexDirection:"column"},children:[t.jsx("div",{style:{padding:"0.5rem",borderBottom:"1px solid var(--color-border)"},children:t.jsx("input",{ref:N,type:"text",className:"form-input",value:y,onChange:O=>x(O.target.value),placeholder:"Search...",autoFocus:!0,style:{width:"100%",padding:"0.4rem 0.6rem",fontSize:14}})}),t.jsx("div",{style:{overflowY:"auto",flex:1},children:k.length===0?t.jsx("div",{style:{padding:"0.75rem",color:"var(--color-text-secondary)",textAlign:"center"},children:"No options found"}):k.map(O=>t.jsx("div",{onClick:()=>L(O),style:{padding:"0.5rem 0.75rem",cursor:"pointer",backgroundColor:String(O.value)===String(r)?"var(--color-bg-secondary)":"transparent",color:"var(--color-text-primary)"},onMouseEnter:P=>{String(O.value)!==String(r)&&(P.currentTarget.style.backgroundColor="var(--color-bg-secondary)")},onMouseLeave:P=>{String(O.value)!==String(r)&&(P.currentTarget.style.backgroundColor="transparent")},children:O.label},O.value))})]}),p&&t.jsx("input",{type:"hidden",value:r,required:!0,tabIndex:-1})]})},Lj=({maintenanceId:r,maintenancePerformedBy:l,maintenanceEnded:u,isChief:d,onStepsChange:m,canShowEndMaintenanceButton:p,endMaintenanceDisabled:h,onEndMaintenance:g})=>{var ve,Oe,kt;const{user:b}=fs(),[y,x]=c.useState([]),[S,N]=c.useState([]),[I,k]=c.useState([]),[L,w]=c.useState([]),[O,P]=c.useState([]),[z,M]=c.useState([]),[G,ee]=c.useState(!0),[K,re]=c.useState(""),[F,T]=c.useState(!1),[te,de]=c.useState(!1),[he,_e]=c.useState(!1),[ye,j]=c.useState(null),[D,X]=c.useState(!1),[V,me]=c.useState([]),[A,Y]=c.useState(!1),[ne,U]=c.useState(!1),[ge,be]=c.useState(null),[B,se]=c.useState(""),[Ae,Ie]=c.useState([]),[Me,Pe]=c.useState(null),[ze,tt]=c.useState(""),[Ne,He]=c.useState(!1),[Ue,we]=c.useState(!1),[E,_]=c.useState(null),[R,le]=c.useState(null),[fe,Re]=c.useState(""),[Be,je]=c.useState(""),[$e,pt]=c.useState([]),[at,_t]=c.useState(!1),[jt,Ot]=c.useState(null),[Qe,Tt]=c.useState(!1),[Ge,St]=c.useState(null),[Ye,vt]=c.useState({stock_items:[],consumables:[]}),[De,fa]=c.useState(""),[dt,Jt]=c.useState(""),[ra,ha]=c.useState([]),[nt,It]=c.useState(""),[_a,va]=c.useState(!1),[Ut,ja]=c.useState(!1),[Lt,Ct]=c.useState(!1),[Fa,la]=c.useState(null),[La,ns]=c.useState([]),[Sa,Ht]=c.useState(""),[ut,gt]=c.useState(""),[Gt,oa]=c.useState(""),[Ts,Ba]=c.useState(""),[Ha,ia]=c.useState(""),[Vt,ea]=c.useState(!1),[Qt,Xt]=c.useState(""),[ya,ht]=c.useState(""),Ta=c.useMemo(()=>["pending","started","pending (waiting for stock item)","pending (waiting for consumable)","In Progress","done","failed (to be sent to a higher level)","cancelled"],[]),ga=c.useMemo(()=>({pending:10,started:20,"pending (waiting for stock item)":30,"pending (waiting for consumable)":30,"In Progress":40,done:50,"failed (to be sent to a higher level)":50,cancelled:50}),[]),Ia=Q=>{const Ee=Q==="in progress"?"In Progress":Q,Fe=ga[Ee]??ga.pending,Xe=Ta.filter($t=>{const Ds=ga[$t];return Ds==null?!1:Ds>=Fe});if(Ee==="started")return Xe.filter($t=>$t!=="started");if(Ee==="In Progress")for(const $t of["pending (waiting for stock item)","pending (waiting for consumable)"])Xe.includes($t)||Xe.unshift($t);return Ee&&!Xe.includes(Ee)&&ga[Ee]!=null?[Ee,...Xe]:Xe},Zt=c.useMemo(()=>{var Q;return((Q=b==null?void 0:b.person)==null?void 0:Q.person_id)===l},[b,l]),$a=d||Zt,Ya=c.useMemo(()=>!Array.isArray(V)||V.length===0?!1:V.some(Q=>{const Ee=Q==null?void 0:Q.external_maintenance_status;if(Ee)return Ee!=="DRAFT"&&Ee!=="RECEIVED_BY_COMPANY";const Fe=Q==null?void 0:Q.item_sent_to_external_maintenance_datetime,Xe=Q==null?void 0:Q.item_received_by_company_datetime;return!!Fe&&!Xe}),[V]),zs=c.useMemo(()=>!Array.isArray(V)||V.length===0?!1:V.some(Q=>{const Ee=Q==null?void 0:Q.external_maintenance_status;return Ee?Ee!=="RECEIVED_BY_COMPANY":!(Q==null?void 0:Q.item_received_by_company_datetime)}),[V]),Ps=()=>{j(null),X(!1),_e(!1),de(!0)},hs=()=>{be(null),se(""),U(!1),Y(!0)},za=()=>{de(!1),_e(!1),j(null),X(!1)},Ca=async Q=>{var Fe,Xe;Q.preventDefault();const Ee=Array.isArray(V)?V[0]:null;if(!(Ee!=null&&Ee.external_maintenance_id)){be({type:"error",text:"No external maintenance found for this maintenance."});return}if(!B){be({type:"error",text:"Please select typical step."});return}try{U(!0),be(null),await Wn.createStep(Number(Ee.external_maintenance_id),Number(B)),be({type:"success",text:"External maintenance step created successfully."}),await J()}catch($t){console.error($t),be({type:"error",text:((Xe=(Fe=$t.response)==null?void 0:Fe.data)==null?void 0:Xe.error)||"Failed to create external maintenance step."})}finally{U(!1)}},zt=()=>{T(!1),Xt(""),ht("")},Wa=()=>{Y(!1),U(!1),be(null),se("")};c.useEffect(()=>{za(),Wa(),zt(),J()},[r]),c.useEffect(()=>{u&&(wt(),zt(),wa(),ka(),Va())},[u]);const ys=async Q=>{var Ee,Fe;if(Q.preventDefault(),!D)try{_e(!0),j(null),await Wn.createForMaintenance(Number(r)),j({type:"success",text:"External maintenance created successfully."}),X(!0)}catch(Xe){console.error(Xe),j({type:"error",text:((Fe=(Ee=Xe.response)==null?void 0:Ee.data)==null?void 0:Fe.error)||"Failed to create external maintenance."})}finally{_e(!1)}},Ga=c.useMemo(()=>{const Q=(Array.isArray(y)?y:[]).map(Fe=>({...Fe,__step_type:"internal",__key:`internal-${Fe.maintenance_step_id}`})),Ee=(Array.isArray(S)?S:[]).map(Fe=>({...Fe,__step_type:"external",__key:`external-${Fe.external_maintenance_step_id}`}));return[...Q,...Ee]},[y,S]),bs=Q=>Q?Q.end_datetime?Q.is_successful===!0?"done":Q.is_successful===!1?"failed":"done":"In Progress":"-",J=async()=>{try{ee(!0);const[Q,Ee,Fe,Xe,$t,Ds,Os]=await Promise.all([yn.getAll({maintenance:r}),W_.getAll({maintenance:r}),J_.getAll(),_n.getAll({role:"maintenance_technician"}),d?_n.getAll({role:"maintenance_chief"}):Promise.resolve([]),Wn.getAll({maintenance:r}),Y_.getAll()]);x(Q),typeof m=="function"&&m(Array.isArray(Q)?Q:[]),N(Array.isArray(Ee)?Ee:[]),k(Fe);const rs=[...Array.isArray(Xe)?Xe:[]];Array.isArray($t)&&$t.forEach(Ea=>{rs.some(rl=>rl.person_id===Ea.person_id)||rs.push(Ea)}),w(rs),me(Array.isArray(Ds)?Ds:[]),Ie(Array.isArray(Os)?Os:[]);try{const Ea=await X_.getAll();ns(Array.isArray(Ea)?Ea:[])}catch(Ea){console.error(Ea),ns([])}const[br,jn]=await Promise.all([Js.getAll(),Ks.getAll()]);P(Array.isArray(br)?br:[]),M(Array.isArray(jn)?jn:[])}catch(Q){console.error(Q),re("Failed to load steps data")}finally{ee(!1)}},Se=async Q=>{var Ee,Fe;if(Q.preventDefault(),Ya){re("Cannot create maintenance steps while the asset has an ongoing external maintenance.");return}if(Qt)try{await yn.create({maintenance:r,maintenance_typical_step_id:Qt,person_id:ya||(Zt?b.person.person_id:null)}),zt(),J()}catch(Xe){console.error(Xe);const $t=(Fe=(Ee=Xe==null?void 0:Xe.response)==null?void 0:Ee.data)==null?void 0:Fe.error;re($t||"Failed to add step")}},Te=async(Q,Ee)=>{try{if(u){re("Maintenance is ended");return}await yn.patch(Q.maintenance_step_id,{maintenance_step_status:Ee}),J()}catch(Fe){console.error(Fe),re("Failed to update step status")}},Je=Q=>{if(u){re("Maintenance is ended");return}Pe(Q.maintenance_step_id),Q.maintenance_step_status==="started"?tt(""):tt(Q.maintenance_step_status||"")},wt=()=>{Pe(null),tt(""),He(!1)},wa=()=>{we(!1),_(null),le(null),Re(""),je(""),pt([]),_t(!1),Ot(null)},ka=()=>{Tt(!1),St(null),vt({stock_items:[],consumables:[]}),fa(""),Jt(""),ha([]),It(""),va(!1),ja(!1)},Va=()=>{Ct(!1),la(null),Ht(""),gt(""),oa(""),Ba(""),ia(""),ea(!1)},Hs=Q=>{if(u){re("Maintenance is ended");return}Ct(!0),la(Q),Ht(""),gt(""),oa(""),Ba(""),ia(""),ea(!1)},vs=async()=>{var Q,Ee;if(Fa){if(!Sa){re("Please select a condition");return}try{ea(!0),await yn.updateAssetCondition(Fa.maintenance_step_id,{condition_id:Number(Sa),notes:ut||null,cosmetic_issues:Gt||null,functional_issues:Ts||null,recommendation:Ha||null}),await J(),Va()}catch(Fe){console.error(Fe),re(((Ee=(Q=Fe.response)==null?void 0:Q.data)==null?void 0:Ee.error)||"Failed to update asset condition")}finally{ea(!1)}}},$s=async Q=>{var Ee,Fe;if(u){re("Maintenance is ended");return}Tt(!0),St(Q),vt({stock_items:[],consumables:[]}),fa(""),Jt(""),ha([]),It("");try{va(!0),await Te(Q,"In Progress");const[Xe,$t]=await Promise.all([yn.getComponents(Q.maintenance_step_id),qs.getAll()]);vt({stock_items:Array.isArray(Xe==null?void 0:Xe.stock_items)?Xe.stock_items:[],consumables:Array.isArray(Xe==null?void 0:Xe.consumables)?Xe.consumables:[]}),ha(Array.isArray($t)?$t:[])}catch(Xe){console.error(Xe),re(((Fe=(Ee=Xe.response)==null?void 0:Ee.data)==null?void 0:Fe.error)||"Failed to load components"),ka()}finally{va(!1)}},Ys=async()=>{var Q,Ee;if(Ge){if(!De||!dt){re("Please select a component to remove");return}try{ja(!0);const Fe={component_type:De,component_id:Number(dt)};nt&&(Fe.destination_room_id=Number(nt)),await yn.removeComponent(Ge.maintenance_step_id,Fe),await J(),ka()}catch(Fe){console.error(Fe),re(((Ee=(Q=Fe.response)==null?void 0:Q.data)==null?void 0:Ee.error)||"Failed to remove component")}finally{ja(!1)}}},Es=(Q,Ee)=>{we(!0),_(Ee),le(Q),Re(""),je(""),pt([]),_t(!1),Ot(null)},q=async Q=>{try{if(He(!0),ze==="pending (waiting for stock item)"){wt(),Es(Q,"stock_item");return}if(ze==="pending (waiting for consumable)"){wt(),Es(Q,"consumable");return}await Te(Q,ze),wt()}finally{He(!1)}},v=async(Q,Ee)=>{try{const Fe=Number(Ee);if(!Fe||Number.isNaN(Fe)){pt([]);return}if(Q==="stock_item"){const Xe=await es.getByStockItemType(Fe);pt(Array.isArray(Xe)?Xe:[]);return}if(Q==="consumable"){const Xe=await ts.getByConsumableType(Fe);pt(Array.isArray(Xe)?Xe:[])}}catch(Fe){console.error(Fe),pt([])}},H=async()=>{var Q,Ee;if(!(!R||!E)){if(!Be){Ot({type:"error",text:"Please select a model."});return}try{if(_t(!0),Ot(null),E==="stock_item")await yn.requestStockItem(R.maintenance_step_id,{requested_stock_item_model_id:Number(Be)});else if(E==="consumable")await yn.requestConsumable(R.maintenance_step_id,{requested_consumable_model_id:Number(Be)});else{Ot({type:"error",text:"Invalid request type."});return}Ot({type:"success",text:"Request created successfully."}),await J()}catch(Fe){console.error(Fe),Ot({type:"error",text:((Ee=(Q=Fe.response)==null?void 0:Q.data)==null?void 0:Ee.error)||"Failed to create request."})}finally{_t(!1)}}};return t.jsxs("div",{className:"maintenance-steps-container p-4 border-t",style:{backgroundColor:"var(--color-bg-secondary)",borderColor:"var(--color-border)"},children:[t.jsx("div",{className:"card",style:{backgroundColor:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)"},children:t.jsxs("div",{className:"card-body p-3",children:[t.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",style:{display:"flex",alignItems:"center",width:"100%"},children:[t.jsx("h3",{className:"text-lg font-bold mb-0",children:"Maintenance Steps"}),t.jsxs("div",{style:{display:"flex",gap:8,marginLeft:"auto",flexWrap:"wrap",justifyContent:"flex-end"},children:[!!p&&t.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{typeof g=="function"&&g()},disabled:!!h,style:{width:"auto",whiteSpace:"nowrap",padding:"0.35rem 0.55rem"},title:"End maintenance","aria-label":"End maintenance",children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M12 2v10"}),t.jsx("path",{d:"M18.4 6.6a9 9 0 1 1-12.8 0"})]})}),$a&&t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{if(zs){re("Cannot create a new external maintenance while there is an open one.");return}Ps()},disabled:G||zs,style:{width:"auto",whiteSpace:"nowrap",padding:"0.35rem 0.55rem"},title:"Create external maintenance","aria-label":"Create external maintenance",children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),t.jsx("path",{d:"M12 8v8"}),t.jsx("path",{d:"M8 12h8"})]})}),t.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>hs(),disabled:G,style:{width:"auto",whiteSpace:"nowrap",padding:"0.35rem 0.55rem"},title:"Create new external maintenance step","aria-label":"Create new external maintenance step",children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),t.jsx("path",{d:"M12 8v8"}),t.jsx("path",{d:"M8 12h8"})]})}),t.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>{if(u){re("Maintenance is ended");return}if(Ya){re("Cannot create maintenance steps while the asset has an ongoing external maintenance.");return}T(!0)},disabled:G||Ya||u,style:{width:"auto",whiteSpace:"nowrap",padding:"0.35rem 0.55rem"},title:"Create new maintenance step","aria-label":"Create new maintenance step",children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),t.jsx("path",{d:"M14 2v6h6"}),t.jsx("path",{d:"M12 11v6"}),t.jsx("path",{d:"M9 14h6"})]})})]})]})]}),te&&$a&&Ql.createPortal(t.jsx("div",{className:"modal-overlay",onClick:()=>za(),children:t.jsxs("div",{className:"modal",onClick:Q=>Q.stopPropagation(),style:{maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Create external maintenance"}),t.jsx("button",{className:"modal-close",onClick:()=>za(),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsxs("form",{onSubmit:ys,style:{display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"modal-body",style:{overflowY:"auto",flex:1,minHeight:0},children:[ye&&t.jsx("div",{className:`alert ${ye.type==="error"?"alert-error":"alert-success"} mb-4`,children:ye.text}),t.jsx("div",{className:"alert alert-info mb-0",children:"This will create the external maintenance record. The asset responsible will later select the external maintenance provider and send the asset."})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>za(),children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:he||D,children:"Create"})]})]})]})}),document.body),A&&$a&&Ql.createPortal(t.jsx("div",{className:"modal-overlay",onClick:()=>Wa(),children:t.jsxs("div",{className:"modal",onClick:Q=>Q.stopPropagation(),style:{maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Create new external maintenance step"}),t.jsx("button",{className:"modal-close",onClick:()=>Wa(),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsxs("form",{onSubmit:Ca,style:{display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"modal-body",style:{overflowY:"auto",flex:1,minHeight:0},children:[ge&&t.jsx("div",{className:`alert ${ge.type==="error"?"alert-error":"alert-success"} mb-4`,children:ge.text}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Typical step"}),t.jsxs("select",{className:"form-input",value:B,onChange:Q=>se(Q.target.value),disabled:ne,required:!0,children:[t.jsx("option",{value:"",children:"Select typical step..."}),Ae.map(Q=>t.jsx("option",{value:Q.external_maintenance_typical_step_id,children:Q.description},Q.external_maintenance_typical_step_id))]})]})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>Wa(),children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:ne,children:ne?"Creating...":"Create"})]})]})]})}),document.body),K&&t.jsx("div",{className:"alert alert-error mb-4",children:K}),F&&$a&&Ql.createPortal(t.jsx("div",{className:"modal-overlay",onClick:()=>zt(),children:t.jsxs("div",{className:"modal",onClick:Q=>Q.stopPropagation(),style:{maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Create new maintenance step"}),t.jsx("button",{className:"modal-close",onClick:()=>zt(),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsxs("form",{onSubmit:Se,style:{display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"modal-body",style:{overflowY:"auto",flex:1,minHeight:0},children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Typical Step"}),t.jsx(Oj,{value:Qt,onChange:Q=>Xt(Q.target.value),options:I.map(Q=>({value:Q.maintenance_typical_step_id,label:Q.description})),placeholder:"Select Task...",required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Assign To"}),t.jsxs("select",{className:"form-input",value:ya,onChange:Q=>ht(Q.target.value),required:!0,children:[t.jsx("option",{value:"",children:"Select Person..."}),L.map(Q=>t.jsxs("option",{value:Q.person_id,children:[Q.first_name," ",Q.last_name,Q.role_code==="maintenance_chief"?" (Chief)":""]},Q.person_id))]})]})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>zt(),children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:G,children:"Create"})]})]})]})}),document.body),G&&Ga.length===0?t.jsx("div",{className:"text-center py-4",style:{color:"var(--color-text-secondary)",marginTop:12},children:"Loading steps..."}):Ga.length===0?t.jsx("div",{className:"empty-state p-4 text-center rounded border",style:{color:"var(--color-text-secondary)",backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)",marginTop:12},children:t.jsx("p",{children:"No steps added yet."})}):t.jsx("div",{className:"table-container rounded border overflow-hidden",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)",marginTop:12},children:t.jsxs("table",{className:"data-table mb-0",children:[t.jsx("thead",{style:{backgroundColor:"var(--color-bg-secondary)"},children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2",children:"Step"}),t.jsx("th",{className:"px-4 py-2",children:"Level"}),t.jsx("th",{className:"px-4 py-2",children:"Assigned To"}),t.jsx("th",{className:"px-4 py-2",children:"Status"}),t.jsx("th",{className:"px-4 py-2 text-right",children:"Actions"})]})}),t.jsx("tbody",{children:Ga.map(Q=>{var Ee,Fe,Xe,$t,Ds,Os;return t.jsxs("tr",{className:"border-t",style:{borderColor:"var(--color-border)"},children:[t.jsx("td",{className:"px-4 py-2",children:Q.__step_type==="internal"?((Ee=Q.maintenance_typical_step)==null?void 0:Ee.description)||`Step ${Q.maintenance_step_id}`:Q.external_maintenance_typical_step_description||`External step ${Q.external_maintenance_step_id}`}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("span",{className:"badge badge-info",children:Q.__step_type==="internal"?"Internal":"External"})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("span",{className:"badge badge-info status-badge",children:Q.__step_type==="internal"?`${((Fe=Q.person)==null?void 0:Fe.first_name)||""} ${((Xe=Q.person)==null?void 0:Xe.last_name)||""}`.trim():Q.external_maintenance_provider_name||"External provider"})}),t.jsx("td",{className:"px-4 py-2",children:Q.__step_type==="internal"?Q.maintenance_step_status?t.jsx("span",{className:"badge badge-info",children:Q.maintenance_step_status}):t.jsx("span",{className:"badge badge-warning",children:"-"}):t.jsx("span",{className:"badge badge-info",children:bs(Q)})}),t.jsx("td",{className:"px-4 py-2 text-right",children:Q.__step_type==="internal"&&!u&&((($t=b==null?void 0:b.person)==null?void 0:$t.person_id)===((Ds=Q.person)==null?void 0:Ds.person_id)||d)&&t.jsxs("div",{className:"d-flex gap-2 justify-content-end",style:{flexWrap:"wrap",position:"relative"},children:[Q.maintenance_step_status!=="done"&&t.jsx("button",{className:"btn btn-xs btn-secondary",style:{padding:"0.2rem 0.45rem",fontSize:12},onClick:()=>Je(Q),title:"Update status","aria-label":"Update status",children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M12 20h9"}),t.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})}),Q.maintenance_step_status!=="done"&&t.jsx("button",{className:"btn btn-xs btn-secondary",style:{padding:"0.2rem 0.45rem",fontSize:12},onClick:()=>Hs(Q),title:"Update asset condition","aria-label":"Update asset condition",children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M9 18h6"}),t.jsx("path",{d:"M10 22h4"}),t.jsx("path",{d:"M12 2a7 7 0 0 0-4 12.74V17a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-2.26A7 7 0 0 0 12 2z"})]})}),Q.maintenance_step_status!=="done"&&((Os=Q.maintenance_typical_step)==null?void 0:Os.operation_type)==="remove"&&t.jsx("button",{className:"btn btn-xs btn-danger",style:{padding:"0.2rem 0.45rem",fontSize:12},onClick:()=>$s(Q),disabled:_a||Ut,title:"Remove component","aria-label":"Remove component",children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("polyline",{points:"3 6 5 6 21 6"}),t.jsx("path",{d:"M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"}),t.jsx("path",{d:"M10 11v6"}),t.jsx("path",{d:"M14 11v6"}),t.jsx("path",{d:"M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"})]})})]})})]},Q.__key)})})]})})]})}),Ue&&R&&t.jsxs("div",{className:"card",style:{position:"fixed",right:20,bottom:20,zIndex:50,width:420,padding:"var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12,alignItems:"center",marginBottom:10},children:[t.jsx("div",{style:{fontWeight:700},children:E==="stock_item"?"Request stock item":"Request consumable"}),t.jsx("button",{className:"btn btn-xs btn-secondary",style:{padding:"0.2rem 0.45rem",fontSize:12},onClick:wa,disabled:at,children:"Close"})]}),t.jsxs("div",{style:{fontSize:12,opacity:.85,marginBottom:12},children:["Step: ",t.jsx("b",{children:R.maintenance_step_id})]}),t.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[t.jsx("label",{className:"form-label",children:"Type"}),t.jsxs("select",{className:"form-input",value:fe,onChange:async Q=>{const Ee=Q.target.value;Re(Ee),je(""),Ot(null),await v(E,Ee)},disabled:at,children:[t.jsx("option",{value:"",children:"Select type..."}),(E==="stock_item"?O:z).map(Q=>t.jsx("option",{value:E==="stock_item"?Q.stock_item_type_id:Q.consumable_type_id,children:E==="stock_item"?Q.stock_item_type_label:Q.consumable_type_label},E==="stock_item"?Q.stock_item_type_id:Q.consumable_type_id))]})]}),t.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[t.jsx("label",{className:"form-label",children:"Model"}),t.jsxs("select",{className:"form-input",value:Be,onChange:Q=>{je(Q.target.value),Ot(null)},disabled:at||!fe,children:[t.jsx("option",{value:"",children:"Select model..."}),$e.map(Q=>t.jsxs("option",{value:E==="stock_item"?Q.stock_item_model_id:Q.consumable_model_id,children:[Q.model_name,Q.model_code?` (${Q.model_code})`:""]},E==="stock_item"?Q.stock_item_model_id:Q.consumable_model_id))]})]}),jt&&t.jsx("div",{className:jt.type==="success"?"badge badge-success":"badge badge-danger",style:{padding:"var(--space-3)",width:"100%",marginBottom:10,borderRadius:"var(--radius-md)",display:"block"},children:jt.text}),t.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"var(--space-2)",marginTop:10},children:t.jsx("button",{className:"btn btn-primary btn-sm",onClick:H,disabled:at||!Be,children:at?"Requesting...":"Submit request"})})]}),Me&&Ql.createPortal(t.jsx("div",{className:"modal-overlay",onClick:()=>wt(),children:t.jsxs("div",{className:"modal",onClick:Q=>Q.stopPropagation(),style:{maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Update status"}),t.jsx("button",{className:"modal-close",onClick:()=>wt(),disabled:Ne,children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsx("div",{className:"modal-body",style:{overflowY:"auto",flex:1,minHeight:0},children:t.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[t.jsx("label",{className:"form-label",children:"Status"}),t.jsxs("select",{className:"form-input",value:ze,onChange:Q=>tt(Q.target.value),disabled:Ne,children:[t.jsx("option",{value:"",children:"Select status..."}),Ia((ve=y.find(Q=>Q.maintenance_step_id===Me))==null?void 0:ve.maintenance_step_status).map(Q=>t.jsx("option",{value:Q,children:Q},Q))]})]})}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>wt(),disabled:Ne,children:"Cancel"}),t.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{const Q=y.find(Ee=>Ee.maintenance_step_id===Me);Q&&q(Q)},disabled:Ne||!ze,children:Ne?"Saving...":"Save"})]})]})}),document.body),Qe&&Ge&&t.jsxs("div",{className:"card",style:{position:"fixed",right:20,bottom:20,zIndex:50,width:520,padding:"var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12,alignItems:"center",marginBottom:10},children:[t.jsx("div",{style:{fontWeight:700},children:"Remove component"}),t.jsx("button",{className:"btn btn-xs btn-secondary",style:{padding:"0.2rem 0.45rem",fontSize:12},onClick:ka,disabled:Ut,children:"Close"})]}),t.jsxs("div",{style:{fontSize:12,opacity:.85,marginBottom:12},children:["Step: ",t.jsx("b",{children:Ge.maintenance_step_id})]}),_a?t.jsx("div",{style:{fontSize:13,opacity:.85},children:"Loading components..."}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[t.jsx("label",{className:"form-label",children:"Component"}),t.jsxs("select",{className:"form-input",value:De&&dt?`${De}:${dt}`:"",onChange:Q=>{const Ee=Q.target.value;if(!Ee){fa(""),Jt("");return}const[Fe,Xe]=Ee.split(":");fa(Fe),Jt(Xe)},children:[t.jsx("option",{value:"",children:"Select component..."}),((Oe=Ye.stock_items)==null?void 0:Oe.length)>0&&t.jsx("optgroup",{label:"Stock items",children:Ye.stock_items.map(Q=>t.jsxs("option",{value:`stock_item:${Q.stock_item_id}`,children:[Q.stock_item_inventory_number?`${Q.stock_item_inventory_number} - `:"",Q.stock_item_name||`Stock item ${Q.stock_item_id}`]},`stock_item:${Q.stock_item_id}`))}),((kt=Ye.consumables)==null?void 0:kt.length)>0&&t.jsx("optgroup",{label:"Consumables",children:Ye.consumables.map(Q=>t.jsxs("option",{value:`consumable:${Q.consumable_id}`,children:[Q.consumable_inventory_number?`${Q.consumable_inventory_number} - `:"",Q.consumable_name||`Consumable ${Q.consumable_id}`]},`consumable:${Q.consumable_id}`))})]})]}),t.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[t.jsx("label",{className:"form-label",children:"Move removed component to (maintenance room)"}),t.jsxs("select",{className:"form-input",value:nt,onChange:Q=>It(Q.target.value),children:[t.jsx("option",{value:"",children:"Select room..."}),ra.map(Q=>t.jsxs("option",{value:Q.room_id,children:[Q.room_name,Q.room_type_label?` (${Q.room_type_label})`:""]},Q.room_id))]})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end",marginTop:"var(--space-3)"},children:[t.jsx("button",{className:"btn btn-xs btn-secondary",style:{padding:"0.2rem 0.45rem",fontSize:12},onClick:ka,disabled:Ut,children:"Cancel"}),t.jsx("button",{className:"btn btn-xs btn-danger",style:{padding:"0.2rem 0.45rem",fontSize:12},onClick:Ys,disabled:Ut||!De||!dt,children:Ut?"Removing...":"Remove"})]})]})]}),Lt&&Fa&&Ql.createPortal(t.jsx("div",{className:"modal-overlay",onClick:()=>Va(),children:t.jsxs("div",{className:"modal",onClick:Q=>Q.stopPropagation(),style:{maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Update asset condition"}),t.jsx("button",{className:"modal-close",onClick:()=>Va(),disabled:Vt,children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsxs("div",{className:"modal-body",style:{overflowY:"auto",flex:1,minHeight:0},children:[t.jsxs("div",{style:{fontSize:12,opacity:.85,marginBottom:12},children:["Step: ",t.jsx("b",{children:Fa.maintenance_step_id})]}),t.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[t.jsx("label",{className:"form-label",children:"Condition"}),t.jsxs("select",{className:"form-input",value:Sa,onChange:Q=>Ht(Q.target.value),disabled:Vt,children:[t.jsx("option",{value:"",children:"Select condition..."}),La.map(Q=>t.jsx("option",{value:Q.condition_id,children:Q.condition_label||Q.condition_code||Q.condition_id},Q.condition_id))]})]}),t.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[t.jsx("label",{className:"form-label",children:"Notes"}),t.jsx("textarea",{className:"form-input",rows:3,value:ut,onChange:Q=>gt(Q.target.value),disabled:Vt})]}),t.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[t.jsx("label",{className:"form-label",children:"Cosmetic issues"}),t.jsx("input",{className:"form-input",value:Gt,onChange:Q=>oa(Q.target.value),disabled:Vt})]}),t.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[t.jsx("label",{className:"form-label",children:"Functional issues"}),t.jsx("input",{className:"form-input",value:Ts,onChange:Q=>Ba(Q.target.value),disabled:Vt})]}),t.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[t.jsx("label",{className:"form-label",children:"Recommendation"}),t.jsx("input",{className:"form-input",value:Ha,onChange:Q=>ia(Q.target.value),disabled:Vt})]})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:Va,disabled:Vt,children:"Cancel"}),t.jsx("button",{type:"button",className:"btn btn-primary",onClick:vs,disabled:Vt||!Sa,children:Vt?"Saving...":"Save"})]})]})}),document.body)]})},Ij=()=>{const r=Dt(),{maintenanceId:l}=yr(),{user:u,isSuperuser:d}=fs(),[m,p]=c.useState(null),[h,g]=c.useState([]),[b,y]=c.useState(!0),[x,S]=c.useState(""),[N,I]=c.useState(!1),[k,L]=c.useState(!1),w=c.useMemo(()=>{var M;return d?!0:((M=u==null?void 0:u.roles)==null?void 0:M.some(G=>G.role_code==="maintenance_chief"||G.role_code==="exploitation_chief"))||!1},[d,u]),O=c.useMemo(()=>{var ee;if(w)return!0;const M=(ee=u==null?void 0:u.person)==null?void 0:ee.person_id,G=m==null?void 0:m.performed_by_person;return!M||!G?!1:Number(M)===Number(G)},[w,u,m]);c.useEffect(()=>{(async()=>{try{y(!0),S("");const G=Number(l);if(!G||Number.isNaN(G)){S("Invalid maintenance id");return}const[ee,K]=await Promise.all([Zr.getById(G),yn.getAll({maintenance:G})]);p(ee),g(Array.isArray(K)?K:[])}catch(G){console.error(G),S("Failed to load maintenance")}finally{y(!1)}})()},[l]);const P=c.useMemo(()=>{const M=Array.isArray(h)?h:[];if(M.length===0)return!0;const G=new Set(["done","failed (to be sent to a higher level)","cancelled"]);return M.every(ee=>G.has(ee==null?void 0:ee.maintenance_step_status))},[h]),z=async M=>{var G,ee;try{if(!l)return;I(!0),S("");const K=Number(l),re=await Zr.end(K,{is_successful:M});p(re),L(!1)}catch(K){console.error(K),S(((ee=(G=K.response)==null?void 0:G.data)==null?void 0:ee.error)||"Failed to end maintenance")}finally{I(!1)}};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"page-header",children:t.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"page-title",children:"Maintenance Steps"}),t.jsxs("p",{className:"page-subtitle",children:["Maintenance #",l,m!=null&&m.asset_name?` - ${m.asset_name}`:""]})]}),t.jsx("div",{className:"d-flex",style:{gap:"0.5rem"},children:t.jsx("button",{className:"btn btn-secondary",onClick:()=>r("/dashboard/maintenances"),title:"Back","aria-label":"Back",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})})]})}),x&&t.jsx("div",{className:"alert alert-error mb-4",children:x}),b?t.jsxs("div",{className:"empty-state",children:[t.jsx("div",{className:"loading-spinner",style:{margin:"0 auto"}}),t.jsx("p",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading steps..."})]}):t.jsx(Lj,{maintenanceId:Number(l),maintenancePerformedBy:m==null?void 0:m.performed_by_person,maintenanceEnded:!!(m!=null&&m.end_datetime),isChief:w,onStepsChange:M=>g(Array.isArray(M)?M:[]),canShowEndMaintenanceButton:P,canEndMaintenance:O,endMaintenanceDisabled:b||N||!!(m!=null&&m.end_datetime)||!O,onEndMaintenance:()=>L(!0)}),k&&t.jsx("div",{className:"modal-overlay",onClick:()=>N?null:L(!1),children:t.jsxs("div",{className:"modal",onClick:M=>M.stopPropagation(),style:{maxWidth:520},children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"End maintenance"}),t.jsx("button",{className:"modal-close",onClick:()=>N?null:L(!1),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsx("div",{className:"modal-body",style:{display:"flex",flexDirection:"column",gap:10},children:t.jsx("div",{children:"Was the maintenance successful?"})}),t.jsxs("div",{className:"modal-footer",style:{display:"flex",flexDirection:"column",gap:12},children:[t.jsx("button",{className:"btn btn-primary",onClick:()=>z(!0),disabled:N,style:{width:"100%",padding:"12px"},children:"Yes"}),t.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"center"},children:[t.jsx("button",{className:"btn btn-secondary",onClick:()=>z(null),disabled:N,style:{flex:1},children:"I'll decide later"}),t.jsx("button",{className:"btn btn-danger",onClick:()=>z(!1),disabled:N,style:{flex:1},children:"No"})]})]})]})})]})},Uj=()=>{const{user:r,isSuperuser:l}=fs(),u=({label:Ne,date:He})=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[t.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:He?"var(--color-success)":"var(--color-border)",flexShrink:0}}),t.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("span",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)"},children:Ne}),t.jsx("span",{style:{fontSize:"var(--font-size-sm)",fontWeight:500,color:He?"var(--color-text-primary)":"var(--color-text-muted)"},children:He||"Pending"})]})]}),[d,m]=c.useState([]),[p,h]=c.useState(!0),[g,b]=c.useState(""),[y,x]=c.useState(!1),[S,N]=c.useState(null),[I,k]=c.useState(!1),[L,w]=c.useState(null),[O,P]=c.useState([]),[z,M]=c.useState([]),[G,ee]=c.useState([]),[K,re]=c.useState(""),[F,T]=c.useState(""),[te,de]=c.useState(!1),[he,_e]=c.useState(null),[ye,j]=c.useState(!1),[D,X]=c.useState(null),[V,me]=c.useState(!1),[A,Y]=c.useState(!1),[ne,U]=c.useState(null),[ge,be]=c.useState(""),B=c.useMemo(()=>{var Ne;return l?!0:((Ne=r==null?void 0:r.roles)==null?void 0:Ne.some(He=>He.role_code==="asset_responsible"))||!1},[l,r]),se=async()=>{var Ne,He;try{h(!0),b("");const Ue=await Wn.getAll();m(Array.isArray(Ue)?Ue:[])}catch(Ue){console.error(Ue),b(((He=(Ne=Ue.response)==null?void 0:Ne.data)==null?void 0:He.error)||"Failed to load external maintenances")}finally{h(!1)}},Ae=async()=>{var Ne,He;if(S){if(!ge){U({type:"error",text:"Please select a destination room."});return}try{Y(!0),U(null);const Ue=await Wn.confirmReceivedByCompany(S.external_maintenance_id,Number(ge));U({type:"success",text:"Confirmed as received by company."}),N(Ue),me(!1),await se()}catch(Ue){console.error(Ue),U({type:"error",text:((He=(Ne=Ue.response)==null?void 0:Ne.data)==null?void 0:He.error)||"Failed to confirm received by company."})}finally{Y(!1)}}},Ie=async()=>{var Ne,He;if(S)try{j(!0),X(null);const Ue=await Wn.confirmSentToCompany(S.external_maintenance_id);X({type:"success",text:"Confirmed as sent to company."}),N(Ue),await se()}catch(Ue){console.error(Ue),X({type:"error",text:((He=(Ne=Ue.response)==null?void 0:Ne.data)==null?void 0:He.error)||"Failed to confirm sent to company."})}finally{j(!1)}},Me=async()=>{var Ne,He;if(S)try{de(!0),_e(null);const Ue=await Wn.confirmReceivedByProvider(S.external_maintenance_id);_e({type:"success",text:"Confirmed as received by maintenance provider."}),N(Ue),await se()}catch(Ue){console.error(Ue),_e({type:"error",text:((He=(Ne=Ue.response)==null?void 0:Ne.data)==null?void 0:He.error)||"Failed to confirm receipt."})}finally{de(!1)}};c.useEffect(()=>{se()},[]);const Pe=Ne=>{N(Ne),w(null),_e(null),X(null),re(""),T(""),me(!1),Y(!1),U(null),be(""),x(!0)},ze=()=>{N(null),x(!1),k(!1),w(null),de(!1),_e(null),j(!1),X(null),re(""),T(""),me(!1),Y(!1),U(null),be("")};c.useEffect(()=>{(async()=>{try{if(!y)return;const[He,Ue]=await Promise.all([$_.getAll(),qs.getAll()]);P(Array.isArray(He)?He:[]);const we=Array.isArray(Ue)?Ue:[];ee(we);const E=we.filter(_=>(_==null?void 0:_.room_type_label)==="External Maintenance Center");M(E)}catch(He){console.error(He),P([]),M([]),ee([])}})()},[y]);const tt=async()=>{var Ne,He;if(S){if(!K){w({type:"error",text:"Please select provider."});return}if(!F){w({type:"error",text:"Please select destination room."});return}try{k(!0),w(null);const Ue=await Wn.sendToProvider(S.external_maintenance_id,Number(K),Number(F));w({type:"success",text:"Asset sent to external maintenance provider."}),N(Ue),await se()}catch(Ue){console.error(Ue),w({type:"error",text:((He=(Ne=Ue.response)==null?void 0:Ne.data)==null?void 0:He.error)||"Failed to send to provider."})}finally{k(!1)}}};return B?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"page-header",children:t.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"page-title",children:"External Maintenances"}),t.jsx("p",{className:"page-subtitle",children:"Consult external maintenance records"})]}),t.jsx("button",{className:"btn btn-secondary",onClick:()=>se(),disabled:p,children:"Refresh"})]})}),g&&t.jsx("div",{className:"alert alert-error mb-4",children:g}),p?t.jsxs("div",{className:"empty-state",children:[t.jsx("div",{className:"loading-spinner",style:{margin:"0 auto"}}),t.jsx("p",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading external maintenances..."})]}):d.length===0?t.jsx("div",{className:"empty-state",children:t.jsx("p",{children:"No external maintenances found."})}):t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-body",children:t.jsx("div",{className:"table-container",children:t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"External Maintenance"}),t.jsx("th",{children:"Maintenance"}),t.jsx("th",{children:"Asset"}),t.jsx("th",{className:"text-right",children:"Actions"})]})}),t.jsx("tbody",{children:d.map(Ne=>t.jsxs("tr",{children:[t.jsxs("td",{children:["#",Ne.external_maintenance_id]}),t.jsxs("td",{children:["#",Ne.maintenance]}),t.jsx("td",{children:Ne.maintenance_asset_name||Ne.maintenance_asset_id||"-"}),t.jsx("td",{className:"text-right",children:t.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>Pe(Ne),children:"View"})})]},Ne.external_maintenance_id))})]})})})}),y&&S&&t.jsx("div",{className:"modal-overlay",onClick:()=>ze(),children:t.jsxs("div",{className:"modal",onClick:Ne=>Ne.stopPropagation(),style:{maxWidth:680},children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"External Maintenance Details"}),t.jsx("button",{className:"modal-close",onClick:()=>ze(),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsx("div",{className:"modal-body",style:{padding:"var(--space-5)"},children:t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"var(--space-4)"},children:[t.jsxs("div",{className:"card",style:{background:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-lg)",padding:"var(--space-4)"},children:[t.jsx("div",{style:{fontSize:"var(--font-size-xs)",fontWeight:600,color:"var(--color-text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"var(--space-3)"},children:"Asset Information"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-3)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-muted)",marginBottom:2},children:"External Maintenance ID"}),t.jsxs("div",{style:{fontWeight:500},children:["#",S.external_maintenance_id]})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-muted)",marginBottom:2},children:"Maintenance ID"}),t.jsxs("div",{style:{fontWeight:500},children:["#",S.maintenance]})]}),t.jsxs("div",{style:{gridColumn:"1 / -1"},children:[t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-muted)",marginBottom:2},children:"Asset"}),t.jsx("div",{style:{fontWeight:500},children:S.maintenance_asset_name||S.maintenance_asset_id||"-"})]})]})]}),t.jsxs("div",{className:"card",style:{background:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-lg)",padding:"var(--space-4)"},children:[t.jsx("div",{style:{fontSize:"var(--font-size-xs)",fontWeight:600,color:"var(--color-text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"var(--space-3)"},children:"Timeline"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"var(--space-3)"},children:[t.jsx(u,{label:"Sent to external maintenance",date:S.item_sent_to_external_maintenance_datetime}),t.jsx(u,{label:"Received by maintenance provider",date:S.item_received_by_maintenance_provider_datetime}),t.jsx(u,{label:"Sent to company",date:S.item_sent_to_company_datetime}),t.jsx(u,{label:"Received by company",date:S.item_received_by_company_datetime})]})]})]})}),t.jsxs("div",{style:{padding:"0 var(--space-5) var(--space-5)",display:"flex",flexDirection:"column",gap:"var(--space-4)"},children:[B&&!S.item_sent_to_external_maintenance_datetime&&t.jsxs("div",{className:"card",style:{background:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-lg)",padding:"var(--space-4)"},children:[t.jsx("div",{style:{fontWeight:600,marginBottom:"var(--space-3)"},children:"Send to External Maintenance Provider"}),L&&t.jsx("div",{className:`alert ${L.type==="error"?"alert-error":"alert-success"} mb-3`,children:L.text}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-3)"},children:[t.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[t.jsx("label",{className:"form-label",children:"Provider"}),t.jsxs("select",{className:"form-input",value:K,onChange:Ne=>re(Ne.target.value),disabled:I||!!S.item_sent_to_external_maintenance_datetime,children:[t.jsx("option",{value:"",children:"Select provider..."}),O.map(Ne=>t.jsx("option",{value:Ne.external_maintenance_provider_id,children:Ne.external_maintenance_provider_name||`Provider ${Ne.external_maintenance_provider_id}`},Ne.external_maintenance_provider_id))]})]}),t.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[t.jsx("label",{className:"form-label",children:"Destination Room"}),t.jsxs("select",{className:"form-input",value:F,onChange:Ne=>T(Ne.target.value),disabled:I||!!S.item_sent_to_external_maintenance_datetime,children:[t.jsx("option",{value:"",children:"Select room..."}),z.map(Ne=>t.jsx("option",{value:Ne.room_id,children:Ne.room_name},Ne.room_id))]})]})]}),t.jsx("button",{className:"btn btn-primary",onClick:()=>tt(),disabled:I||!K||!F,style:{marginTop:"var(--space-3)"},children:I?"Sending...":"Send"})]}),B&&S.item_sent_to_external_maintenance_datetime&&!S.item_received_by_maintenance_provider_datetime&&t.jsxs("div",{className:"card",style:{background:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-lg)",padding:"var(--space-4)"},children:[t.jsx("div",{style:{fontWeight:600,marginBottom:"var(--space-3)"},children:"Confirm Received by Maintenance Provider"}),he&&t.jsx("div",{className:`alert ${he.type==="error"?"alert-error":"alert-success"} mb-3`,children:he.text}),t.jsx("button",{className:"btn btn-primary",onClick:()=>Me(),disabled:te,children:te?"Confirming...":"Confirm Received"})]}),B&&S.item_received_by_maintenance_provider_datetime&&!S.item_sent_to_company_datetime&&t.jsxs("div",{className:"card",style:{background:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-lg)",padding:"var(--space-4)"},children:[t.jsx("div",{style:{fontWeight:600,marginBottom:"var(--space-3)"},children:"Confirm Asset Sent by External Maintenance Provider"}),D&&t.jsx("div",{className:`alert ${D.type==="error"?"alert-error":"alert-success"} mb-3`,children:D.text}),t.jsx("button",{className:"btn btn-primary",onClick:()=>Ie(),disabled:ye,children:ye?"Confirming...":"Confirm Asset Sent"})]}),B&&S.item_sent_to_company_datetime&&!S.item_received_by_company_datetime&&t.jsxs("div",{className:"card",style:{background:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-lg)",padding:"var(--space-4)"},children:[t.jsx("div",{style:{fontWeight:600,marginBottom:"var(--space-3)"},children:"Confirm Asset Received by Company"}),ne&&t.jsx("div",{className:`alert ${ne.type==="error"?"alert-error":"alert-success"} mb-3`,children:ne.text}),t.jsx("button",{className:"btn btn-primary",onClick:()=>{U(null),be(""),me(!0)},disabled:A,children:"Confirm Asset Received"})]})]}),V&&t.jsx("div",{className:"modal-overlay",onClick:()=>me(!1),children:t.jsxs("div",{className:"modal",onClick:Ne=>Ne.stopPropagation(),style:{maxWidth:480},children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Move Asset to Room"}),t.jsx("button",{className:"modal-close",onClick:()=>me(!1),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsxs("div",{className:"modal-body",children:[ne&&t.jsx("div",{className:`alert ${ne.type==="error"?"alert-error":"alert-success"} mb-3`,children:ne.text}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Destination Room"}),t.jsxs("select",{className:"form-input",value:ge,onChange:Ne=>be(Ne.target.value),disabled:A,children:[t.jsx("option",{value:"",children:"Select room..."}),G.map(Ne=>t.jsxs("option",{value:Ne.room_id,children:[Ne.room_name,Ne.room_type_label?` - ${Ne.room_type_label}`:""]},Ne.room_id))]})]})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{className:"btn btn-secondary",onClick:()=>me(!1),disabled:A,children:"Cancel"}),t.jsx("button",{className:"btn btn-primary",onClick:()=>Ae(),disabled:A||!ge,children:A?"Confirming...":"Confirm & Move"})]})]})}),t.jsx("div",{className:"modal-footer",children:t.jsx("button",{className:"btn btn-secondary",onClick:()=>ze(),children:"Close"})})]})})]}):t.jsx("div",{className:"empty-state",children:t.jsx("p",{children:"You are not allowed to view external maintenances."})})},qj=({maintenances:r,steps:l})=>{const[u,d]=c.useState({}),m=y=>{d(x=>({...x,[y]:!x[y]}))},p=c.useMemo(()=>{if(!Array.isArray(r)||!Array.isArray(l))return{maintenances:[],stepsByMaintenance:{}};const y={};for(const S of l){const N=S.maintenance;y[N]||(y[N]=[]),y[N].push(S)}return{maintenances:[...r].sort((S,N)=>{const I=S.start_datetime?new Date(S.start_datetime).getTime():0;return(N.start_datetime?new Date(N.start_datetime).getTime():0)-I}),stepsByMaintenance:y}},[r,l]),h=y=>y?new Date(y).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",g=y=>{if(!y)return"var(--color-text-secondary)";const x=y.toLowerCase();return x.includes("done")||x==="completed"?"var(--color-success)":x.includes("fail")||x.includes("cancel")?"var(--color-error)":x.includes("progress")||x.includes("start")?"var(--color-info)":x.includes("pending")||x.includes("wait")?"var(--color-warning)":"var(--color-text-secondary)"},b=y=>{if(!y)return"";const x=y.toLowerCase();return x.includes("done")?"":x.includes("fail")?"":x.includes("cancel")?"":x.includes("progress")||x.includes("start")?"":(x.includes("pending")||x.includes("wait"),"")};return p.maintenances.length===0?t.jsxs("div",{className:"empty-state",children:[t.jsx("h3",{className:"empty-state-title",children:"No Maintenance History"}),t.jsx("p",{className:"empty-state-text",children:"No maintenance records found for assets you reported problems on."})]}):t.jsxs("div",{className:"maintenance-timeline",children:[t.jsx("style",{children:`
                .maintenance-timeline {
                    position: relative;
                    padding-left: 2rem;
                }
                .maintenance-timeline::before {
                    content: '';
                    position: absolute;
                    left: 0.75rem;
                    top: 0;
                    bottom: 0;
                    width: 2px;
                    background: var(--color-border);
                }
                .timeline-entry {
                    position: relative;
                    padding-bottom: 1.5rem;
                }
                .timeline-entry:last-child {
                    padding-bottom: 0;
                }
                .timeline-marker {
                    position: absolute;
                    left: -1.5rem;
                    top: 0.25rem;
                    width: 1.5rem;
                    height: 1.5rem;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 0.75rem;
                    font-weight: 600;
                    background: var(--color-bg-primary);
                    border: 2px solid var(--color-border);
                    z-index: 1;
                }
                .timeline-marker.maintenance-marker {
                    background: var(--color-primary);
                    border-color: var(--color-primary);
                    color: white;
                }
                .timeline-marker.step-marker {
                    background: var(--color-bg-primary);
                    border-color: var(--color-border);
                    color: var(--color-text-secondary);
                }
                .timeline-content {
                    background: var(--color-bg-secondary);
                    border: 1px solid var(--color-border);
                    border-radius: var(--radius-md);
                    padding: 1rem;
                    margin-left: 0.5rem;
                }
                .timeline-content.maintenance-content {
                    background: var(--color-bg-tertiary);
                    border-left: 3px solid var(--color-primary);
                }
                .timeline-content.step-content {
                    background: var(--color-bg-secondary);
                    margin-left: 1rem;
                }
                .timeline-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: flex-start;
                    margin-bottom: 0.5rem;
                    flex-wrap: wrap;
                    gap: 0.5rem;
                }
                .timeline-title {
                    font-weight: 600;
                    font-size: var(--font-size-md);
                    color: var(--color-text-primary);
                    margin: 0;
                }
                .timeline-badge {
                    display: inline-flex;
                    align-items: center;
                    padding: 0.25rem 0.5rem;
                    border-radius: var(--radius-sm);
                    font-size: var(--font-size-xs);
                    font-weight: 500;
                    background: var(--color-bg-secondary);
                    color: var(--color-text-secondary);
                }
                .timeline-times {
                    display: flex;
                    flex-wrap: wrap;
                    gap: 1rem;
                    font-size: var(--font-size-sm);
                    color: var(--color-text-secondary);
                    margin-top: 0.5rem;
                }
                .timeline-time-item {
                    display: flex;
                    flex-direction: column;
                    gap: 0.125rem;
                }
                .timeline-time-label {
                    font-size: var(--font-size-xs);
                    text-transform: uppercase;
                    letter-spacing: 0.05em;
                    opacity: 0.7;
                }
                .timeline-time-value {
                    font-weight: 500;
                }
                .timeline-performer {
                    margin-top: 0.5rem;
                    font-size: var(--font-size-sm);
                    color: var(--color-text-secondary);
                }
                .timeline-performer strong {
                    color: var(--color-text-primary);
                }
                .timeline-step-description {
                    margin-top: 0.25rem;
                    font-size: var(--font-size-sm);
                    color: var(--color-text-primary);
                }
            `}),p.maintenances.map(y=>{const x=u[y.maintenance_id],S=p.stepsByMaintenance[y.maintenance_id]||[],N=[...S].sort((I,k)=>I.maintenance_step_id-k.maintenance_step_id);return t.jsxs("div",{className:"timeline-entry",children:[t.jsx("div",{className:"timeline-marker maintenance-marker",children:"M"}),t.jsxs("div",{className:"timeline-content maintenance-content",style:{cursor:"pointer"},onClick:()=>m(y.maintenance_id),children:[t.jsxs("div",{className:"timeline-header",children:[t.jsxs("h4",{className:"timeline-title",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{style:{display:"inline-block",transition:"transform 0.2s",transform:x?"rotate(90deg)":"rotate(0deg)"},children:""}),"Maintenance #",y.maintenance_id,y.description&&` - ${y.description}`]}),y.maintenance_status&&t.jsx("span",{className:"timeline-badge",style:{backgroundColor:g(y.maintenance_status),color:"white"},children:y.maintenance_status})]}),t.jsxs("div",{className:"timeline-times",children:[t.jsxs("div",{className:"timeline-time-item",children:[t.jsx("span",{className:"timeline-time-label",children:"Started"}),t.jsx("span",{className:"timeline-time-value",children:h(y.start_datetime)})]}),t.jsxs("div",{className:"timeline-time-item",children:[t.jsx("span",{className:"timeline-time-label",children:"Ended"}),t.jsx("span",{className:"timeline-time-value",children:h(y.end_datetime)})]})]}),y.performed_by_person_name&&t.jsxs("div",{className:"timeline-performer",children:[t.jsx("strong",{children:"Technician:"})," ",y.performed_by_person_name]}),t.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:[S.length," step",S.length!==1?"s":"","  Click to ",x?"collapse":"expand"]})]}),x&&N.length>0&&t.jsx("div",{style:{marginTop:"0.5rem",paddingLeft:"1rem"},children:N.map(I=>{var P,z;const k=g(I.maintenance_step_status),L=b(I.maintenance_step_status),w=((P=I.maintenance_typical_step)==null?void 0:P.description)||I.maintenance_step_status||"Step",O=(z=I.person)!=null&&z.first_name?`${I.person.first_name} ${I.person.last_name||""}`.trim():null;return t.jsxs("div",{className:"timeline-entry",children:[t.jsx("div",{className:"timeline-marker step-marker",style:{borderColor:k,color:k},children:L}),t.jsxs("div",{className:"timeline-content step-content",children:[t.jsxs("div",{className:"timeline-header",children:[t.jsxs("h4",{className:"timeline-title",children:["Step #",I.maintenance_step_id,": ",w]}),I.maintenance_step_status&&t.jsx("span",{className:"timeline-badge",style:{backgroundColor:k,color:"white"},children:I.maintenance_step_status})]}),t.jsxs("div",{className:"timeline-times",children:[t.jsxs("div",{className:"timeline-time-item",children:[t.jsx("span",{className:"timeline-time-label",children:"Started"}),t.jsx("span",{className:"timeline-time-value",children:h(I.start_datetime)})]}),t.jsxs("div",{className:"timeline-time-item",children:[t.jsx("span",{className:"timeline-time-label",children:"Ended"}),t.jsx("span",{className:"timeline-time-value",children:h(I.end_datetime)})]})]}),O&&t.jsxs("div",{className:"timeline-performer",children:[t.jsx("strong",{children:"Performer:"})," ",O]})]})]},`step-${I.maintenance_step_id}`)})})]},`maintenance-${y.maintenance_id}`)})]})},Fj=()=>{const{assetId:r}=yr(),l=Dt(),[u,d]=c.useState(!0),[m,p]=c.useState(""),[h,g]=c.useState(null),[b,y]=c.useState([]),[x,S]=c.useState([]);return c.useEffect(()=>{r&&(async()=>{var I,k;try{d(!0),p("");const L=await Z_.getByAssetId(r);if(y(L.maintenances||[]),S(L.steps||[]),L.maintenances&&L.maintenances.length>0){const w=L.maintenances[0];g({asset_id:r,asset_name:w.asset_name})}else g({asset_id:r,asset_name:null})}catch(L){console.error(L);const w=((k=(I=L==null?void 0:L.response)==null?void 0:I.data)==null?void 0:k.error)||(L==null?void 0:L.message)||"Failed to load maintenance timeline";p(typeof w=="string"?w:"Failed to load maintenance timeline")}finally{d(!1)}})()},[r]),t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"page-header",children:t.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"page-title",children:"Maintenance Timeline"}),t.jsxs("p",{className:"page-subtitle",children:["Asset #",r,h!=null&&h.asset_name?` - ${h.asset_name}`:""]})]}),t.jsx("div",{className:"d-flex",style:{gap:"0.5rem"},children:t.jsx("button",{className:"btn btn-secondary",onClick:()=>l("/dashboard/my-items"),title:"Back to My Items","aria-label":"Back to My Items",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})})]})}),m&&t.jsx("div",{className:"alert alert-error mb-4",children:m}),t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"card-header",children:[t.jsx("h2",{className:"card-title",children:"Maintenance History"}),t.jsx("p",{className:"card-subtitle",children:"View all maintenance operations and their steps for this asset"})]}),t.jsx("div",{className:"card-body",style:{padding:"var(--space-6)"},children:u?t.jsxs("div",{className:"empty-state",children:[t.jsx("div",{className:"loading-spinner",style:{margin:"0 auto"}}),t.jsx("p",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading maintenance timeline..."})]}):t.jsx(qj,{maintenances:b,steps:x})})]})]})},Hj=({children:r})=>{const{isAuthenticated:l}=fs();return l?r:t.jsx(Xs,{to:"/login",replace:!0})},$j=({children:r})=>{const{isAuthenticated:l}=fs();return l?t.jsx(Xs,{to:"/dashboard",replace:!0}):r};function Yj(){return t.jsx(K_,{children:t.jsx(nx,{children:t.jsxs(zg,{children:[t.jsx(Ke,{path:"/login",element:t.jsx($j,{children:t.jsx(P_,{})})}),t.jsxs(Ke,{path:"/dashboard",element:t.jsx(Hj,{children:t.jsx(ej,{})}),children:[t.jsx(Ke,{index:!0,element:t.jsx(tj,{})}),t.jsx(Ke,{path:"persons",element:t.jsx(aj,{})}),t.jsx(Ke,{path:"assets",element:t.jsx(Xs,{to:"/dashboard/assets/types",replace:!0})}),t.jsx(Ke,{path:"assets/types",element:t.jsx(nj,{})}),t.jsx(Ke,{path:"assets/types/attributes",element:t.jsx(rj,{})}),t.jsx(Ke,{path:"assets/models",element:t.jsx(lj,{})}),t.jsx(Ke,{path:"assets/models/default-composition",element:t.jsx(Bh,{})}),t.jsx(Ke,{path:"assets/models/:modelId/default-composition",element:t.jsx(Bh,{})}),t.jsx(Ke,{path:"assets/models/:modelId/compatibility",element:t.jsx(ij,{})}),t.jsx(Ke,{path:"assets/instances",element:t.jsx(sj,{})}),t.jsx(Ke,{path:"assets/attribute-definitions",element:t.jsx(oj,{})}),t.jsx(Ke,{path:"maintenances",element:t.jsx(cj,{})}),t.jsx(Ke,{path:"maintenances/:maintenanceId/steps",element:t.jsx(Ij,{})}),t.jsx(Ke,{path:"stock-items",element:t.jsx(Xs,{to:"/dashboard/stock-items/types",replace:!0})}),t.jsx(Ke,{path:"stock-items/types",element:t.jsx(uj,{})}),t.jsx(Ke,{path:"stock-items/types/attributes",element:t.jsx(mj,{})}),t.jsx(Ke,{path:"stock-items/models",element:t.jsx(pj,{})}),t.jsx(Ke,{path:"stock-items/models/:modelId/compatibility",element:t.jsx(fj,{})}),t.jsx(Ke,{path:"stock-items/instances",element:t.jsx(dj,{})}),t.jsx(Ke,{path:"stock-items/attribute-definitions",element:t.jsx(hj,{})}),t.jsx(Ke,{path:"consumables",element:t.jsx(Xs,{to:"/dashboard/consumables/types",replace:!0})}),t.jsx(Ke,{path:"consumables/types",element:t.jsx(bj,{})}),t.jsx(Ke,{path:"consumables/types/attributes",element:t.jsx(vj,{})}),t.jsx(Ke,{path:"consumables/models",element:t.jsx(gj,{})}),t.jsx(Ke,{path:"consumables/models/:modelId/compatibility",element:t.jsx(xj,{})}),t.jsx(Ke,{path:"consumables/instances",element:t.jsx(yj,{})}),t.jsx(Ke,{path:"consumables/attribute-definitions",element:t.jsx(_j,{})}),t.jsx(Ke,{path:"my-items",element:t.jsx(Rj,{})}),t.jsx(Ke,{path:"my-items/assets/:assetId/maintenance-timeline",element:t.jsx(Fj,{})}),t.jsx(Ke,{path:"reports",element:t.jsx(Mj,{})}),t.jsx(Ke,{path:"rooms",element:t.jsx(jj,{})}),t.jsx(Ke,{path:"positions",element:t.jsx(Sj,{})}),t.jsx(Ke,{path:"organizational-structure",element:t.jsx(Nj,{})}),t.jsx(Ke,{path:"attribution-orders",element:t.jsx(Bj,{})}),t.jsx(Ke,{path:"attribution-orders/assets/:rowId/included-items",element:t.jsx(Th,{})}),t.jsx(Ke,{path:"attribution-orders/assets/:rowId/included-items/:itemKind",element:t.jsx(Th,{})}),t.jsx(Ke,{path:"company-asset-requests",element:t.jsx(zj,{})}),t.jsx(Ke,{path:"administrative-certificates",element:t.jsx(Ej,{})}),t.jsx(Ke,{path:"item-requests-inbox",element:t.jsx(Dj,{})}),t.jsx(Ke,{path:"external-maintenances",element:t.jsx(Uj,{})})]}),t.jsx(Ke,{path:"/",element:t.jsx(Xs,{to:"/login",replace:!0})}),t.jsx(Ke,{path:"*",element:t.jsx(Xs,{to:"/login",replace:!0})})]})})})}zv.createRoot(document.getElementById("root")).render(t.jsx(c.StrictMode,{children:t.jsx(Yj,{})}));

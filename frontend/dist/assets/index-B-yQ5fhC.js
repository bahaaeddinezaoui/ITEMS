(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))u(m);new MutationObserver(m=>{for(const p of m)if(p.type==="childList")for(const h of p.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&u(h)}).observe(document,{childList:!0,subtree:!0});function d(m){const p={};return m.integrity&&(p.integrity=m.integrity),m.referrerPolicy&&(p.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?p.credentials="include":m.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function u(m){if(m.ep)return;m.ep=!0;const p=d(m);fetch(m.href,p)}})();var pu={exports:{}},xo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kh;function kv(){if(kh)return xo;kh=1;var n=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function d(u,m,p){var h=null;if(p!==void 0&&(h=""+p),m.key!==void 0&&(h=""+m.key),"key"in m){p={};for(var g in m)g!=="key"&&(p[g]=m[g])}else p=m;return m=p.ref,{$$typeof:n,type:u,key:h,ref:m!==void 0?m:null,props:p}}return xo.Fragment=l,xo.jsx=d,xo.jsxs=d,xo}var Ah;function Av(){return Ah||(Ah=1,pu.exports=kv()),pu.exports}var e=Av(),fu={exports:{}},lt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nh;function Nv(){if(Nh)return lt;Nh=1;var n=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),p=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),N=Symbol.iterator;function I(k){return k===null||typeof k!="object"?null:(k=N&&k[N]||k["@@iterator"],typeof k=="function"?k:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,C={};function D(k,$,re){this.props=k,this.context=$,this.refs=C,this.updater=re||w}D.prototype.isReactComponent={},D.prototype.setState=function(k,$){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,$,"setState")},D.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function te(){}te.prototype=D.prototype;function E(k,$,re){this.props=k,this.context=$,this.refs=C,this.updater=re||w}var B=E.prototype=new te;B.constructor=E,O(B,D.prototype),B.isPureReactComponent=!0;var W=Array.isArray;function Q(){}var P={H:null,A:null,T:null,S:null},ge=Object.prototype.hasOwnProperty;function F(k,$,re){var U=re.ref;return{$$typeof:n,type:k,key:$,ref:U!==void 0?U:null,props:re}}function R(k,$){return F(k.type,$,k.props)}function ae(k){return typeof k=="object"&&k!==null&&k.$$typeof===n}function ue(k){var $={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(re){return $[re]})}var Re=/\/+/g;function xe(k,$){return typeof k=="object"&&k!==null&&k.key!=null?ue(""+k.key):$.toString(36)}function ne(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(Q,Q):(k.status="pending",k.then(function($){k.status==="pending"&&(k.status="fulfilled",k.value=$)},function($){k.status==="pending"&&(k.status="rejected",k.reason=$)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function S(k,$,re,U,ye){var be=typeof k;(be==="undefined"||be==="boolean")&&(k=null);var T=!1;if(k===null)T=!0;else switch(be){case"bigint":case"string":case"number":T=!0;break;case"object":switch(k.$$typeof){case n:case l:T=!0;break;case x:return T=k._init,S(T(k._payload),$,re,U,ye)}}if(T)return ye=ye(k),T=U===""?"."+xe(k,0):U,W(ye)?(re="",T!=null&&(re=T.replace(Re,"$&/")+"/"),S(ye,$,re,"",function(Ge){return Ge})):ye!=null&&(ae(ye)&&(ye=R(ye,re+(ye.key==null||k&&k.key===ye.key?"":(""+ye.key).replace(Re,"$&/")+"/")+T)),$.push(ye)),1;T=0;var le=U===""?".":U+":";if(W(k))for(var Me=0;Me<k.length;Me++)U=k[Me],be=le+xe(U,Me),T+=S(U,$,re,be,ye);else if(Me=I(k),typeof Me=="function")for(k=Me.call(k),Me=0;!(U=k.next()).done;)U=U.value,be=le+xe(U,Me++),T+=S(U,$,re,be,ye);else if(be==="object"){if(typeof k.then=="function")return S(ne(k),$,re,U,ye);throw $=String(k),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return T}function L(k,$,re){if(k==null)return k;var U=[],ye=0;return S(k,U,"","",function(be){return $.call(re,be,ye++)}),U}function Z(k){if(k._status===-1){var $=k._result;$=$(),$.then(function(re){(k._status===0||k._status===-1)&&(k._status=1,k._result=re)},function(re){(k._status===0||k._status===-1)&&(k._status=2,k._result=re)}),k._status===-1&&(k._status=0,k._result=$)}if(k._status===1)return k._result.default;throw k._result}var G=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},fe={map:L,forEach:function(k,$,re){L(k,function(){$.apply(this,arguments)},re)},count:function(k){var $=0;return L(k,function(){$++}),$},toArray:function(k){return L(k,function($){return $})||[]},only:function(k){if(!ae(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return lt.Activity=_,lt.Children=fe,lt.Component=D,lt.Fragment=d,lt.Profiler=m,lt.PureComponent=E,lt.StrictMode=u,lt.Suspense=b,lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,lt.__COMPILER_RUNTIME={__proto__:null,c:function(k){return P.H.useMemoCache(k)}},lt.cache=function(k){return function(){return k.apply(null,arguments)}},lt.cacheSignal=function(){return null},lt.cloneElement=function(k,$,re){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var U=O({},k.props),ye=k.key;if($!=null)for(be in $.key!==void 0&&(ye=""+$.key),$)!ge.call($,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&$.ref===void 0||(U[be]=$[be]);var be=arguments.length-2;if(be===1)U.children=re;else if(1<be){for(var T=Array(be),le=0;le<be;le++)T[le]=arguments[le+2];U.children=T}return F(k.type,ye,U)},lt.createContext=function(k){return k={$$typeof:h,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:p,_context:k},k},lt.createElement=function(k,$,re){var U,ye={},be=null;if($!=null)for(U in $.key!==void 0&&(be=""+$.key),$)ge.call($,U)&&U!=="key"&&U!=="__self"&&U!=="__source"&&(ye[U]=$[U]);var T=arguments.length-2;if(T===1)ye.children=re;else if(1<T){for(var le=Array(T),Me=0;Me<T;Me++)le[Me]=arguments[Me+2];ye.children=le}if(k&&k.defaultProps)for(U in T=k.defaultProps,T)ye[U]===void 0&&(ye[U]=T[U]);return F(k,be,ye)},lt.createRef=function(){return{current:null}},lt.forwardRef=function(k){return{$$typeof:g,render:k}},lt.isValidElement=ae,lt.lazy=function(k){return{$$typeof:x,_payload:{_status:-1,_result:k},_init:Z}},lt.memo=function(k,$){return{$$typeof:y,type:k,compare:$===void 0?null:$}},lt.startTransition=function(k){var $=P.T,re={};P.T=re;try{var U=k(),ye=P.S;ye!==null&&ye(re,U),typeof U=="object"&&U!==null&&typeof U.then=="function"&&U.then(Q,G)}catch(be){G(be)}finally{$!==null&&re.types!==null&&($.types=re.types),P.T=$}},lt.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},lt.use=function(k){return P.H.use(k)},lt.useActionState=function(k,$,re){return P.H.useActionState(k,$,re)},lt.useCallback=function(k,$){return P.H.useCallback(k,$)},lt.useContext=function(k){return P.H.useContext(k)},lt.useDebugValue=function(){},lt.useDeferredValue=function(k,$){return P.H.useDeferredValue(k,$)},lt.useEffect=function(k,$){return P.H.useEffect(k,$)},lt.useEffectEvent=function(k){return P.H.useEffectEvent(k)},lt.useId=function(){return P.H.useId()},lt.useImperativeHandle=function(k,$,re){return P.H.useImperativeHandle(k,$,re)},lt.useInsertionEffect=function(k,$){return P.H.useInsertionEffect(k,$)},lt.useLayoutEffect=function(k,$){return P.H.useLayoutEffect(k,$)},lt.useMemo=function(k,$){return P.H.useMemo(k,$)},lt.useOptimistic=function(k,$){return P.H.useOptimistic(k,$)},lt.useReducer=function(k,$,re){return P.H.useReducer(k,$,re)},lt.useRef=function(k){return P.H.useRef(k)},lt.useState=function(k){return P.H.useState(k)},lt.useSyncExternalStore=function(k,$,re){return P.H.useSyncExternalStore(k,$,re)},lt.useTransition=function(){return P.H.useTransition()},lt.version="19.2.4",lt}var Rh;function Fu(){return Rh||(Rh=1,fu.exports=Nv()),fu.exports}var c=Fu(),hu={exports:{}},_o={},yu={exports:{}},bu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mh;function Rv(){return Mh||(Mh=1,(function(n){function l(S,L){var Z=S.length;S.push(L);e:for(;0<Z;){var G=Z-1>>>1,fe=S[G];if(0<m(fe,L))S[G]=L,S[Z]=fe,Z=G;else break e}}function d(S){return S.length===0?null:S[0]}function u(S){if(S.length===0)return null;var L=S[0],Z=S.pop();if(Z!==L){S[0]=Z;e:for(var G=0,fe=S.length,k=fe>>>1;G<k;){var $=2*(G+1)-1,re=S[$],U=$+1,ye=S[U];if(0>m(re,Z))U<fe&&0>m(ye,re)?(S[G]=ye,S[U]=Z,G=U):(S[G]=re,S[$]=Z,G=$);else if(U<fe&&0>m(ye,Z))S[G]=ye,S[U]=Z,G=U;else break e}}return L}function m(S,L){var Z=S.sortIndex-L.sortIndex;return Z!==0?Z:S.id-L.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var p=performance;n.unstable_now=function(){return p.now()}}else{var h=Date,g=h.now();n.unstable_now=function(){return h.now()-g}}var b=[],y=[],x=1,_=null,N=3,I=!1,w=!1,O=!1,C=!1,D=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function B(S){for(var L=d(y);L!==null;){if(L.callback===null)u(y);else if(L.startTime<=S)u(y),L.sortIndex=L.expirationTime,l(b,L);else break;L=d(y)}}function W(S){if(O=!1,B(S),!w)if(d(b)!==null)w=!0,Q||(Q=!0,ue());else{var L=d(y);L!==null&&ne(W,L.startTime-S)}}var Q=!1,P=-1,ge=5,F=-1;function R(){return C?!0:!(n.unstable_now()-F<ge)}function ae(){if(C=!1,Q){var S=n.unstable_now();F=S;var L=!0;try{e:{w=!1,O&&(O=!1,te(P),P=-1),I=!0;var Z=N;try{t:{for(B(S),_=d(b);_!==null&&!(_.expirationTime>S&&R());){var G=_.callback;if(typeof G=="function"){_.callback=null,N=_.priorityLevel;var fe=G(_.expirationTime<=S);if(S=n.unstable_now(),typeof fe=="function"){_.callback=fe,B(S),L=!0;break t}_===d(b)&&u(b),B(S)}else u(b);_=d(b)}if(_!==null)L=!0;else{var k=d(y);k!==null&&ne(W,k.startTime-S),L=!1}}break e}finally{_=null,N=Z,I=!1}L=void 0}}finally{L?ue():Q=!1}}}var ue;if(typeof E=="function")ue=function(){E(ae)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,xe=Re.port2;Re.port1.onmessage=ae,ue=function(){xe.postMessage(null)}}else ue=function(){D(ae,0)};function ne(S,L){P=D(function(){S(n.unstable_now())},L)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(S){S.callback=null},n.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ge=0<S?Math.floor(1e3/S):5},n.unstable_getCurrentPriorityLevel=function(){return N},n.unstable_next=function(S){switch(N){case 1:case 2:case 3:var L=3;break;default:L=N}var Z=N;N=L;try{return S()}finally{N=Z}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(S,L){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var Z=N;N=S;try{return L()}finally{N=Z}},n.unstable_scheduleCallback=function(S,L,Z){var G=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?G+Z:G):Z=G,S){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=Z+fe,S={id:x++,callback:L,priorityLevel:S,startTime:Z,expirationTime:fe,sortIndex:-1},Z>G?(S.sortIndex=Z,l(y,S),d(b)===null&&S===d(y)&&(O?(te(P),P=-1):O=!0,ne(W,Z-G))):(S.sortIndex=fe,l(b,S),w||I||(w=!0,Q||(Q=!0,ue()))),S},n.unstable_shouldYield=R,n.unstable_wrapCallback=function(S){var L=N;return function(){var Z=N;N=L;try{return S.apply(this,arguments)}finally{N=Z}}}})(bu)),bu}var Bh;function Mv(){return Bh||(Bh=1,yu.exports=Rv()),yu.exports}var vu={exports:{}},Fa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Th;function Bv(){if(Th)return Fa;Th=1;var n=Fu();function l(b){var y="https://react.dev/errors/"+b;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+b+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(){}var u={d:{f:d,r:function(){throw Error(l(522))},D:d,C:d,L:d,m:d,X:d,S:d,M:d},p:0,findDOMNode:null},m=Symbol.for("react.portal");function p(b,y,x){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:_==null?null:""+_,children:b,containerInfo:y,implementation:x}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(b,y){if(b==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Fa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=u,Fa.createPortal=function(b,y){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(l(299));return p(b,y,null,x)},Fa.flushSync=function(b){var y=h.T,x=u.p;try{if(h.T=null,u.p=2,b)return b()}finally{h.T=y,u.p=x,u.d.f()}},Fa.preconnect=function(b,y){typeof b=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,u.d.C(b,y))},Fa.prefetchDNS=function(b){typeof b=="string"&&u.d.D(b)},Fa.preinit=function(b,y){if(typeof b=="string"&&y&&typeof y.as=="string"){var x=y.as,_=g(x,y.crossOrigin),N=typeof y.integrity=="string"?y.integrity:void 0,I=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;x==="style"?u.d.S(b,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:_,integrity:N,fetchPriority:I}):x==="script"&&u.d.X(b,{crossOrigin:_,integrity:N,fetchPriority:I,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Fa.preinitModule=function(b,y){if(typeof b=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var x=g(y.as,y.crossOrigin);u.d.M(b,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&u.d.M(b)},Fa.preload=function(b,y){if(typeof b=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var x=y.as,_=g(x,y.crossOrigin);u.d.L(b,x,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Fa.preloadModule=function(b,y){if(typeof b=="string")if(y){var x=g(y.as,y.crossOrigin);u.d.m(b,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else u.d.m(b)},Fa.requestFormReset=function(b){u.d.r(b)},Fa.unstable_batchedUpdates=function(b,y){return b(y)},Fa.useFormState=function(b,y,x){return h.H.useFormState(b,y,x)},Fa.useFormStatus=function(){return h.H.useHostTransitionStatus()},Fa.version="19.2.4",Fa}var Eh;function ly(){if(Eh)return vu.exports;Eh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(l){console.error(l)}}return n(),vu.exports=Bv(),vu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zh;function Tv(){if(zh)return _o;zh=1;var n=Mv(),l=Fu(),d=ly();function u(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function p(t){var a=t,s=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(s=a.return),t=a.return;while(t)}return a.tag===3?s:null}function h(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function g(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function b(t){if(p(t)!==t)throw Error(u(188))}function y(t){var a=t.alternate;if(!a){if(a=p(t),a===null)throw Error(u(188));return a!==t?null:t}for(var s=t,r=a;;){var o=s.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){s=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===s)return b(o),t;if(i===r)return b(o),a;i=i.sibling}throw Error(u(188))}if(s.return!==r.return)s=o,r=i;else{for(var f=!1,j=o.child;j;){if(j===s){f=!0,s=o,r=i;break}if(j===r){f=!0,r=o,s=i;break}j=j.sibling}if(!f){for(j=i.child;j;){if(j===s){f=!0,s=i,r=o;break}if(j===r){f=!0,r=i,s=o;break}j=j.sibling}if(!f)throw Error(u(189))}}if(s.alternate!==r)throw Error(u(190))}if(s.tag!==3)throw Error(u(188));return s.stateNode.current===s?t:a}function x(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=x(t),a!==null)return a;t=t.sibling}return null}var _=Object.assign,N=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),E=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),ae=Symbol.iterator;function ue(t){return t===null||typeof t!="object"?null:(t=ae&&t[ae]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Symbol.for("react.client.reference");function xe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Re?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case O:return"Fragment";case D:return"Profiler";case C:return"StrictMode";case W:return"Suspense";case Q:return"SuspenseList";case F:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case w:return"Portal";case E:return t.displayName||"Context";case te:return(t._context.displayName||"Context")+".Consumer";case B:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case P:return a=t.displayName||null,a!==null?a:xe(t.type)||"Memo";case ge:a=t._payload,t=t._init;try{return xe(t(a))}catch{}}return null}var ne=Array.isArray,S=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=d.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},G=[],fe=-1;function k(t){return{current:t}}function $(t){0>fe||(t.current=G[fe],G[fe]=null,fe--)}function re(t,a){fe++,G[fe]=t.current,t.current=a}var U=k(null),ye=k(null),be=k(null),T=k(null);function le(t,a){switch(re(be,a),re(ye,t),re(U,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?Xf(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=Xf(a),t=Zf(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}$(U),re(U,t)}function Me(){$(U),$(ye),$(be)}function Ge(t){t.memoizedState!==null&&re(T,t);var a=U.current,s=Zf(a,t.type);a!==s&&(re(ye,t),re(U,s))}function De(t){ye.current===t&&($(U),$(ye)),T.current===t&&($(T),yo._currentValue=Z)}var Ke,ze;function st(t){if(Ke===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);Ke=a&&a[1]||"",ze=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ke+t+ze}var Ne=!1;function Qe(t,a){if(!t||Ne)return"";Ne=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(a){var Ae=function(){throw Error()};if(Object.defineProperty(Ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ae,[])}catch(pe){var ce=pe}Reflect.construct(t,[],Ae)}else{try{Ae.call()}catch(pe){ce=pe}t.call(Ae.prototype)}}else{try{throw Error()}catch(pe){ce=pe}(Ae=t())&&typeof Ae.catch=="function"&&Ae.catch(function(){})}}catch(pe){if(pe&&ce&&typeof pe.stack=="string")return[pe.stack,ce.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),f=i[0],j=i[1];if(f&&j){var V=f.split(`
`),ie=j.split(`
`);for(o=r=0;r<V.length&&!V[r].includes("DetermineComponentFrameRoot");)r++;for(;o<ie.length&&!ie[o].includes("DetermineComponentFrameRoot");)o++;if(r===V.length||o===ie.length)for(r=V.length-1,o=ie.length-1;1<=r&&0<=o&&V[r]!==ie[o];)o--;for(;1<=r&&0<=o;r--,o--)if(V[r]!==ie[o]){if(r!==1||o!==1)do if(r--,o--,0>o||V[r]!==ie[o]){var _e=`
`+V[r].replace(" at new "," at ");return t.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",t.displayName)),_e}while(1<=r&&0<=o);break}}}finally{Ne=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?st(s):""}function $e(t,a){switch(t.tag){case 26:case 27:case 5:return st(t.type);case 16:return st("Lazy");case 13:return t.child!==a&&a!==null?st("Suspense Fallback"):st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return Qe(t.type,!1);case 11:return Qe(t.type.render,!1);case 1:return Qe(t.type,!0);case 31:return st("Activity");default:return""}}function Ce(t){try{var a="",s=null;do a+=$e(t,s),s=t,t=t.return;while(t);return a}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var Be=Object.prototype.hasOwnProperty,X=n.unstable_scheduleCallback,J=n.unstable_cancelCallback,we=n.unstable_shouldYield,ke=n.unstable_requestPaint,Te=n.unstable_now,z=n.unstable_getCurrentPriorityLevel,A=n.unstable_ImmediatePriority,de=n.unstable_UserBlockingPriority,Ee=n.unstable_NormalPriority,Oe=n.unstable_LowPriority,Ie=n.unstable_IdlePriority,Pe=n.log,Bt=n.unstable_setDisableYieldValue,tt=null,Ot=null;function Ze(t){if(typeof Pe=="function"&&Bt(t),Ot&&typeof Ot.setStrictMode=="function")try{Ot.setStrictMode(tt,t)}catch{}}var kt=Math.clz32?Math.clz32:qe,We=Math.log,St=Math.LN2;function qe(t){return t>>>=0,t===0?32:31-(We(t)/St|0)|0}var ja=256,ht=262144,aa=4194304;function pa(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Sa(t,a,s){var r=t.pendingLanes;if(r===0)return 0;var o=0,i=t.suspendedLanes,f=t.pingedLanes;t=t.warmLanes;var j=r&134217727;return j!==0?(r=j&~i,r!==0?o=pa(r):(f&=j,f!==0?o=pa(f):s||(s=j&~t,s!==0&&(o=pa(s))))):(j=r&~i,j!==0?o=pa(j):f!==0?o=pa(f):s||(s=r&~t,s!==0&&(o=pa(s)))),o===0?0:a!==0&&a!==o&&(a&i)===0&&(i=o&-o,s=a&-a,i>=s||i===32&&(s&4194048)!==0)?a:o}function it(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function Ht(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ra(){var t=aa;return aa<<=1,(aa&62914560)===0&&(aa=4194304),t}function wa(t){for(var a=[],s=0;31>s;s++)a.push(t);return a}function $t(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ma(t,a,s,r,o,i){var f=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var j=t.entanglements,V=t.expirationTimes,ie=t.hiddenUpdates;for(s=f&~s;0<s;){var _e=31-kt(s),Ae=1<<_e;j[_e]=0,V[_e]=-1;var ce=ie[_e];if(ce!==null)for(ie[_e]=null,_e=0;_e<ce.length;_e++){var pe=ce[_e];pe!==null&&(pe.lane&=-536870913)}s&=~Ae}r!==0&&Ut(t,r,0),i!==0&&o===0&&t.tag!==0&&(t.suspendedLanes|=i&~(f&~a))}function Ut(t,a,s){t.pendingLanes|=a,t.suspendedLanes&=~a;var r=31-kt(a);t.entangledLanes|=a,t.entanglements[r]=t.entanglements[r]|1073741824|s&261930}function At(t,a){var s=t.entangledLanes|=a;for(t=t.entanglements;s;){var r=31-kt(s),o=1<<r;o&a|t[r]&a&&(t[r]|=a),s&=~o}}function Ka(t,a){var s=a&-a;return s=(s&42)!==0?1:fa(s),(s&(t.suspendedLanes|a))!==0?0:s}function fa(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function $a(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ms(){var t=L.p;return t!==0?t:(t=window.event,t===void 0?32:gh(t.type))}function Ba(t,a){var s=L.p;try{return L.p=t,a()}finally{L.p=s}}var Xt=Math.random().toString(36).slice(2),yt="__reactFiber$"+Xt,Ct="__reactProps$"+Xt,Kt="__reactContainer$"+Xt,ha="__reactEvents$"+Xt,$s="__reactListeners$"+Xt,Ia="__reactHandles$"+Xt,Pa="__reactResources$"+Xt,ya="__reactMarker$"+Xt;function Pt(t){delete t[yt],delete t[Ct],delete t[ha],delete t[$s],delete t[Ia]}function ia(t){var a=t[yt];if(a)return a;for(var s=t.parentNode;s;){if(a=s[Kt]||s[yt]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(t=sh(t);t!==null;){if(s=t[yt])return s;t=sh(t)}return a}t=s,s=t.parentNode}return null}function sa(t){if(t=t[yt]||t[Kt]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function ea(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(u(33))}function Yt(t){var a=t[Pa];return a||(a=t[Pa]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function xt(t){t[ya]=!0}var Ta=new Set,Ea={};function Ua(t,a){ta(t,a),ta(t+"Capture",a)}function ta(t,a){for(Ea[t]=a,t=0;t<a.length;t++)Ta.add(a[t])}var ws=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ps={},Ys={};function en(t){return Be.call(Ys,t)?!0:Be.call(ps,t)?!1:ws.test(t)?Ys[t]=!0:(ps[t]=!0,!1)}function gt(t,a,s){if(en(a))if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var r=a.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+s)}}function Ya(t,a,s){if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+s)}}function na(t,a,s,r){if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(a,s,""+r)}}function Wt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wa(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Va(t,a,s){var r=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,i=r.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return o.call(this)},set:function(f){s=""+f,i.call(this,f)}}),Object.defineProperty(t,a,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(f){s=""+f},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function es(t){if(!t._valueTracker){var a=Wa(t)?"checked":"value";t._valueTracker=Va(t,a,""+t[a])}}function ts(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var s=a.getValue(),r="";return t&&(r=Wa(t)?t.checked?"true":"false":t.value),t=r,t!==s?(a.setValue(t),!0):!1}function ee(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var je=/[\n"\\]/g;function Le(t){return t.replace(je,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function et(t,a,s,r,o,i,f,j){t.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?t.type=f:t.removeAttribute("type"),a!=null?f==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+Wt(a)):t.value!==""+Wt(a)&&(t.value=""+Wt(a)):f!=="submit"&&f!=="reset"||t.removeAttribute("value"),a!=null?ka(t,f,Wt(a)):s!=null?ka(t,f,Wt(s)):r!=null&&t.removeAttribute("value"),o==null&&i!=null&&(t.defaultChecked=!!i),o!=null&&(t.checked=o&&typeof o!="function"&&typeof o!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?t.name=""+Wt(j):t.removeAttribute("name")}function qt(t,a,s,r,o,i,f,j){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(t.type=i),a!=null||s!=null){if(!(i!=="submit"&&i!=="reset"||a!=null)){es(t);return}s=s!=null?""+Wt(s):"",a=a!=null?""+Wt(a):s,j||a===t.value||(t.value=a),t.defaultValue=a}r=r??o,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=j?t.checked:!!r,t.defaultChecked=!!r,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.name=f),es(t)}function ka(t,a,s){a==="number"&&ee(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function Aa(t,a,s,r){if(t=t.options,a){a={};for(var o=0;o<s.length;o++)a["$"+s[o]]=!0;for(s=0;s<t.length;s++)o=a.hasOwnProperty("$"+t[s].value),t[s].selected!==o&&(t[s].selected=o),o&&r&&(t[s].defaultSelected=!0)}else{for(s=""+Wt(s),a=null,o=0;o<t.length;o++){if(t[o].value===s){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}a!==null||t[o].disabled||(a=t[o])}a!==null&&(a.selected=!0)}}function as(t,a,s){if(a!=null&&(a=""+Wt(a),a!==t.value&&(t.value=a),s==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=s!=null?""+Wt(s):""}function ra(t,a,s,r){if(a==null){if(r!=null){if(s!=null)throw Error(u(92));if(ne(r)){if(1<r.length)throw Error(u(93));r=r[0]}s=r}s==null&&(s=""),a=s}s=Wt(a),t.defaultValue=s,r=t.textContent,r===s&&r!==""&&r!==null&&(t.value=r),es(t)}function ss(t,a){if(a){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=a;return}}t.textContent=a}var ks=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ft(t,a,s){var r=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?r?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":r?t.setProperty(a,s):typeof s!="number"||s===0||ks.has(a)?a==="float"?t.cssFloat=s:t[a]=(""+s).trim():t[a]=s+"px"}function Ws(t,a,s){if(a!=null&&typeof a!="object")throw Error(u(62));if(t=t.style,s!=null){for(var r in s)!s.hasOwnProperty(r)||a!=null&&a.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var o in a)r=a[o],a.hasOwnProperty(o)&&s[o]!==r&&Ft(t,o,r)}else for(var i in a)a.hasOwnProperty(i)&&Ft(t,i,a[i])}function q(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var v=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),H=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ve(t){return H.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Fe(){}var Nt=null;function ca(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var As=null,fs=null;function Eo(t){var a=sa(t);if(a&&(t=a.stateNode)){var s=t[Ct]||null;e:switch(t=a.stateNode,a.type){case"input":if(et(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Le(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var r=s[a];if(r!==t&&r.form===t.form){var o=r[Ct]||null;if(!o)throw Error(u(90));et(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(a=0;a<s.length;a++)r=s[a],r.form===t.form&&ts(r)}break e;case"textarea":as(t,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&Aa(t,!!s.multiple,a,!1)}}}var Lr=!1;function or(t,a,s){if(Lr)return t(a,s);Lr=!0;try{var r=t(a);return r}finally{if(Lr=!1,(As!==null||fs!==null)&&(ji(),As&&(a=As,t=fs,fs=As=null,Eo(a),t)))for(a=0;a<t.length;a++)Eo(t[a])}}function dn(t,a){var s=t.stateNode;if(s===null)return null;var r=s[Ct]||null;if(r===null)return null;s=r[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(u(231,a,typeof s));return s}var Ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tl=!1;if(Ns)try{var ir={};Object.defineProperty(ir,"passive",{get:function(){Tl=!0}}),window.addEventListener("test",ir,ir),window.removeEventListener("test",ir,ir)}catch{Tl=!1}var hs=null,El=null,Vs=null;function cr(){if(Vs)return Vs;var t,a=El,s=a.length,r,o="value"in hs?hs.value:hs.textContent,i=o.length;for(t=0;t<s&&a[t]===o[t];t++);var f=s-t;for(r=1;r<=f&&a[s-r]===o[i-r];r++);return Vs=o.slice(t,1<r?1-r:void 0)}function Ir(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function dr(){return!0}function zl(){return!1}function qa(t){function a(s,r,o,i,f){this._reactName=s,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=f,this.currentTarget=null;for(var j in t)t.hasOwnProperty(j)&&(s=t[j],this[j]=s?s(i):i[j]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?dr:zl,this.isPropagationStopped=zl,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=dr)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=dr)},persist:function(){},isPersistent:dr}),a}var un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ur=qa(un),ur=_({},un,{view:0,detail:0}),Dl=qa(ur),qr,Fr,En,Rs=_({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ol,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==En&&(En&&t.type==="mousemove"?(qr=t.screenX-En.screenX,Fr=t.screenY-En.screenY):Fr=qr=0,En=t),qr)},movementY:function(t){return"movementY"in t?t.movementY:Fr}}),zo=qa(Rs),Do=_({},Rs,{dataTransfer:0}),fc=qa(Do),mn=_({},ur,{relatedTarget:0}),Hr=qa(mn),mr=_({},un,{animationName:0,elapsedTime:0,pseudoElement:0}),pr=qa(mr),$r=_({},un,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hc=qa($r),yc=_({},un,{data:0}),Oo=qa(yc),bc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gc(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=vc[t])?!!a[t]:!1}function Ol(){return gc}var Io=_({},ur,{key:function(t){if(t.key){var a=bc[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=Ir(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Lo[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ol,charCode:function(t){return t.type==="keypress"?Ir(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ir(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Uo=qa(Io),qo=_({},Rs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),M=qa(qo),he=_({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ol}),Ue=qa(he),Ve=_({},un,{propertyName:0,elapsedTime:0,pseudoElement:0}),rt=qa(Ve),Vt=_({},Rs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ys=qa(Vt),zn=_({},un,{newState:0,oldState:0}),fr=qa(zn),hr=[9,13,27,32],ns=Ns&&"CompositionEvent"in window,tn=null;Ns&&"documentMode"in document&&(tn=document.documentMode);var Xy=Ns&&"TextEvent"in window&&!tn,em=Ns&&(!ns||tn&&8<tn&&11>=tn),tm=" ",am=!1;function sm(t,a){switch(t){case"keyup":return hr.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yr=!1;function Zy(t,a){switch(t){case"compositionend":return nm(a);case"keypress":return a.which!==32?null:(am=!0,tm);case"textInput":return t=a.data,t===tm&&am?null:t;default:return null}}function Jy(t,a){if(Yr)return t==="compositionend"||!ns&&sm(t,a)?(t=cr(),Vs=El=hs=null,Yr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return em&&a.locale!=="ko"?null:a.data;default:return null}}var Ky={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rm(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!Ky[t.type]:a==="textarea"}function lm(t,a,s,r){As?fs?fs.push(r):fs=[r]:As=r,a=Ri(a,"onChange"),0<a.length&&(s=new Ur("onChange","change",null,s,r),t.push({event:s,listeners:a}))}var Ll=null,Il=null;function Py(t){$f(t,0)}function Fo(t){var a=ea(t);if(ts(a))return t}function om(t,a){if(t==="change")return a}var im=!1;if(Ns){var xc;if(Ns){var _c="oninput"in document;if(!_c){var cm=document.createElement("div");cm.setAttribute("oninput","return;"),_c=typeof cm.oninput=="function"}xc=_c}else xc=!1;im=xc&&(!document.documentMode||9<document.documentMode)}function dm(){Ll&&(Ll.detachEvent("onpropertychange",um),Il=Ll=null)}function um(t){if(t.propertyName==="value"&&Fo(Il)){var a=[];lm(a,Il,t,ca(t)),or(Py,a)}}function eb(t,a,s){t==="focusin"?(dm(),Ll=a,Il=s,Ll.attachEvent("onpropertychange",um)):t==="focusout"&&dm()}function tb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fo(Il)}function ab(t,a){if(t==="click")return Fo(a)}function sb(t,a){if(t==="input"||t==="change")return Fo(a)}function nb(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var bs=typeof Object.is=="function"?Object.is:nb;function Ul(t,a){if(bs(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var s=Object.keys(t),r=Object.keys(a);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var o=s[r];if(!Be.call(a,o)||!bs(t[o],a[o]))return!1}return!0}function mm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pm(t,a){var s=mm(t);t=0;for(var r;s;){if(s.nodeType===3){if(r=t+s.textContent.length,t<=a&&r>=a)return{node:s,offset:a-t};t=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=mm(s)}}function fm(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?fm(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function hm(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=ee(t.document);a instanceof t.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)t=a.contentWindow;else break;a=ee(t.document)}return a}function jc(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var rb=Ns&&"documentMode"in document&&11>=document.documentMode,Wr=null,Sc=null,ql=null,Cc=!1;function ym(t,a,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Cc||Wr==null||Wr!==ee(r)||(r=Wr,"selectionStart"in r&&jc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ql&&Ul(ql,r)||(ql=r,r=Ri(Sc,"onSelect"),0<r.length&&(a=new Ur("onSelect","select",null,a,s),t.push({event:a,listeners:r}),a.target=Wr)))}function yr(t,a){var s={};return s[t.toLowerCase()]=a.toLowerCase(),s["Webkit"+t]="webkit"+a,s["Moz"+t]="moz"+a,s}var Vr={animationend:yr("Animation","AnimationEnd"),animationiteration:yr("Animation","AnimationIteration"),animationstart:yr("Animation","AnimationStart"),transitionrun:yr("Transition","TransitionRun"),transitionstart:yr("Transition","TransitionStart"),transitioncancel:yr("Transition","TransitionCancel"),transitionend:yr("Transition","TransitionEnd")},wc={},bm={};Ns&&(bm=document.createElement("div").style,"AnimationEvent"in window||(delete Vr.animationend.animation,delete Vr.animationiteration.animation,delete Vr.animationstart.animation),"TransitionEvent"in window||delete Vr.transitionend.transition);function br(t){if(wc[t])return wc[t];if(!Vr[t])return t;var a=Vr[t],s;for(s in a)if(a.hasOwnProperty(s)&&s in bm)return wc[t]=a[s];return t}var vm=br("animationend"),gm=br("animationiteration"),xm=br("animationstart"),lb=br("transitionrun"),ob=br("transitionstart"),ib=br("transitioncancel"),_m=br("transitionend"),jm=new Map,kc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kc.push("scrollEnd");function Gs(t,a){jm.set(t,a),Ua(a,[t])}var Ho=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ms=[],Gr=0,Ac=0;function $o(){for(var t=Gr,a=Ac=Gr=0;a<t;){var s=Ms[a];Ms[a++]=null;var r=Ms[a];Ms[a++]=null;var o=Ms[a];Ms[a++]=null;var i=Ms[a];if(Ms[a++]=null,r!==null&&o!==null){var f=r.pending;f===null?o.next=o:(o.next=f.next,f.next=o),r.pending=o}i!==0&&Sm(s,o,i)}}function Yo(t,a,s,r){Ms[Gr++]=t,Ms[Gr++]=a,Ms[Gr++]=s,Ms[Gr++]=r,Ac|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function Nc(t,a,s,r){return Yo(t,a,s,r),Wo(t)}function vr(t,a){return Yo(t,null,null,a),Wo(t)}function Sm(t,a,s){t.lanes|=s;var r=t.alternate;r!==null&&(r.lanes|=s);for(var o=!1,i=t.return;i!==null;)i.childLanes|=s,r=i.alternate,r!==null&&(r.childLanes|=s),i.tag===22&&(t=i.stateNode,t===null||t._visibility&1||(o=!0)),t=i,i=i.return;return t.tag===3?(i=t.stateNode,o&&a!==null&&(o=31-kt(s),t=i.hiddenUpdates,r=t[o],r===null?t[o]=[a]:r.push(a),a.lane=s|536870912),i):null}function Wo(t){if(50<io)throw io=0,Ld=null,Error(u(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var Qr={};function cb(t,a,s,r){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vs(t,a,s,r){return new cb(t,a,s,r)}function Rc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pn(t,a){var s=t.alternate;return s===null?(s=vs(t.tag,a,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=a,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,a=t.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Cm(t,a){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,a=s.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function Vo(t,a,s,r,o,i){var f=0;if(r=t,typeof t=="function")Rc(t)&&(f=1);else if(typeof t=="string")f=fv(t,s,U.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case F:return t=vs(31,s,a,o),t.elementType=F,t.lanes=i,t;case O:return gr(s.children,o,i,a);case C:f=8,o|=24;break;case D:return t=vs(12,s,a,o|2),t.elementType=D,t.lanes=i,t;case W:return t=vs(13,s,a,o),t.elementType=W,t.lanes=i,t;case Q:return t=vs(19,s,a,o),t.elementType=Q,t.lanes=i,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case E:f=10;break e;case te:f=9;break e;case B:f=11;break e;case P:f=14;break e;case ge:f=16,r=null;break e}f=29,s=Error(u(130,t===null?"null":typeof t,"")),r=null}return a=vs(f,s,a,o),a.elementType=t,a.type=r,a.lanes=i,a}function gr(t,a,s,r){return t=vs(7,t,r,a),t.lanes=s,t}function Mc(t,a,s){return t=vs(6,t,null,a),t.lanes=s,t}function wm(t){var a=vs(18,null,null,0);return a.stateNode=t,a}function Bc(t,a,s){return a=vs(4,t.children!==null?t.children:[],t.key,a),a.lanes=s,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var km=new WeakMap;function Bs(t,a){if(typeof t=="object"&&t!==null){var s=km.get(t);return s!==void 0?s:(a={value:t,source:a,stack:Ce(a)},km.set(t,a),a)}return{value:t,source:a,stack:Ce(a)}}var Xr=[],Zr=0,Go=null,Fl=0,Ts=[],Es=0,Dn=null,an=1,sn="";function fn(t,a){Xr[Zr++]=Fl,Xr[Zr++]=Go,Go=t,Fl=a}function Am(t,a,s){Ts[Es++]=an,Ts[Es++]=sn,Ts[Es++]=Dn,Dn=t;var r=an;t=sn;var o=32-kt(r)-1;r&=~(1<<o),s+=1;var i=32-kt(a)+o;if(30<i){var f=o-o%5;i=(r&(1<<f)-1).toString(32),r>>=f,o-=f,an=1<<32-kt(a)+o|s<<o|r,sn=i+t}else an=1<<i|s<<o|r,sn=t}function Tc(t){t.return!==null&&(fn(t,1),Am(t,1,0))}function Ec(t){for(;t===Go;)Go=Xr[--Zr],Xr[Zr]=null,Fl=Xr[--Zr],Xr[Zr]=null;for(;t===Dn;)Dn=Ts[--Es],Ts[Es]=null,sn=Ts[--Es],Ts[Es]=null,an=Ts[--Es],Ts[Es]=null}function Nm(t,a){Ts[Es++]=an,Ts[Es++]=sn,Ts[Es++]=Dn,an=a.id,sn=a.overflow,Dn=t}var za=null,Gt=null,bt=!1,On=null,zs=!1,zc=Error(u(519));function Ln(t){var a=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Hl(Bs(a,t)),zc}function Rm(t){var a=t.stateNode,s=t.type,r=t.memoizedProps;switch(a[yt]=t,a[Ct]=r,s){case"dialog":ut("cancel",a),ut("close",a);break;case"iframe":case"object":case"embed":ut("load",a);break;case"video":case"audio":for(s=0;s<uo.length;s++)ut(uo[s],a);break;case"source":ut("error",a);break;case"img":case"image":case"link":ut("error",a),ut("load",a);break;case"details":ut("toggle",a);break;case"input":ut("invalid",a),qt(a,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":ut("invalid",a);break;case"textarea":ut("invalid",a),ra(a,r.value,r.defaultValue,r.children)}s=r.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||r.suppressHydrationWarning===!0||Gf(a.textContent,s)?(r.popover!=null&&(ut("beforetoggle",a),ut("toggle",a)),r.onScroll!=null&&ut("scroll",a),r.onScrollEnd!=null&&ut("scrollend",a),r.onClick!=null&&(a.onclick=Fe),a=!0):a=!1,a||Ln(t,!0)}function Mm(t){for(za=t.return;za;)switch(za.tag){case 5:case 31:case 13:zs=!1;return;case 27:case 3:zs=!0;return;default:za=za.return}}function Jr(t){if(t!==za)return!1;if(!bt)return Mm(t),bt=!0,!1;var a=t.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||Kd(t.type,t.memoizedProps)),s=!s),s&&Gt&&Ln(t),Mm(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(u(317));Gt=ah(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(u(317));Gt=ah(t)}else a===27?(a=Gt,Jn(t.type)?(t=su,su=null,Gt=t):Gt=a):Gt=za?Os(t.stateNode.nextSibling):null;return!0}function xr(){Gt=za=null,bt=!1}function Dc(){var t=On;return t!==null&&(is===null?is=t:is.push.apply(is,t),On=null),t}function Hl(t){On===null?On=[t]:On.push(t)}var Oc=k(null),_r=null,hn=null;function In(t,a,s){re(Oc,a._currentValue),a._currentValue=s}function yn(t){t._currentValue=Oc.current,$(Oc)}function Lc(t,a,s){for(;t!==null;){var r=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,r!==null&&(r.childLanes|=a)):r!==null&&(r.childLanes&a)!==a&&(r.childLanes|=a),t===s)break;t=t.return}}function Ic(t,a,s,r){var o=t.child;for(o!==null&&(o.return=t);o!==null;){var i=o.dependencies;if(i!==null){var f=o.child;i=i.firstContext;e:for(;i!==null;){var j=i;i=o;for(var V=0;V<a.length;V++)if(j.context===a[V]){i.lanes|=s,j=i.alternate,j!==null&&(j.lanes|=s),Lc(i.return,s,t),r||(f=null);break e}i=j.next}}else if(o.tag===18){if(f=o.return,f===null)throw Error(u(341));f.lanes|=s,i=f.alternate,i!==null&&(i.lanes|=s),Lc(f,s,t),f=null}else f=o.child;if(f!==null)f.return=o;else for(f=o;f!==null;){if(f===t){f=null;break}if(o=f.sibling,o!==null){o.return=f.return,f=o;break}f=f.return}o=f}}function Kr(t,a,s,r){t=null;for(var o=a,i=!1;o!==null;){if(!i){if((o.flags&524288)!==0)i=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var f=o.alternate;if(f===null)throw Error(u(387));if(f=f.memoizedProps,f!==null){var j=o.type;bs(o.pendingProps.value,f.value)||(t!==null?t.push(j):t=[j])}}else if(o===T.current){if(f=o.alternate,f===null)throw Error(u(387));f.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(t!==null?t.push(yo):t=[yo])}o=o.return}t!==null&&Ic(a,t,s,r),a.flags|=262144}function Qo(t){for(t=t.firstContext;t!==null;){if(!bs(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function jr(t){_r=t,hn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Da(t){return Bm(_r,t)}function Xo(t,a){return _r===null&&jr(t),Bm(t,a)}function Bm(t,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},hn===null){if(t===null)throw Error(u(308));hn=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else hn=hn.next=a;return s}var db=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(s,r){t.push(r)}};this.abort=function(){a.aborted=!0,t.forEach(function(s){return s()})}},ub=n.unstable_scheduleCallback,mb=n.unstable_NormalPriority,ba={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Uc(){return{controller:new db,data:new Map,refCount:0}}function $l(t){t.refCount--,t.refCount===0&&ub(mb,function(){t.controller.abort()})}var Yl=null,qc=0,Pr=0,el=null;function pb(t,a){if(Yl===null){var s=Yl=[];qc=0,Pr=$d(),el={status:"pending",value:void 0,then:function(r){s.push(r)}}}return qc++,a.then(Tm,Tm),a}function Tm(){if(--qc===0&&Yl!==null){el!==null&&(el.status="fulfilled");var t=Yl;Yl=null,Pr=0,el=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function fb(t,a){var s=[],r={status:"pending",value:null,reason:null,then:function(o){s.push(o)}};return t.then(function(){r.status="fulfilled",r.value=a;for(var o=0;o<s.length;o++)(0,s[o])(a)},function(o){for(r.status="rejected",r.reason=o,o=0;o<s.length;o++)(0,s[o])(void 0)}),r}var Em=S.S;S.S=function(t,a){bf=Te(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&pb(t,a),Em!==null&&Em(t,a)};var Sr=k(null);function Fc(){var t=Sr.current;return t!==null?t:Lt.pooledCache}function Zo(t,a){a===null?re(Sr,Sr.current):re(Sr,a.pool)}function zm(){var t=Fc();return t===null?null:{parent:ba._currentValue,pool:t}}var tl=Error(u(460)),Hc=Error(u(474)),Jo=Error(u(542)),Ko={then:function(){}};function Dm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Om(t,a,s){switch(s=t[s],s===void 0?t.push(a):s!==a&&(a.then(Fe,Fe),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Im(t),t;default:if(typeof a.status=="string")a.then(Fe,Fe);else{if(t=Lt,t!==null&&100<t.shellSuspendCounter)throw Error(u(482));t=a,t.status="pending",t.then(function(r){if(a.status==="pending"){var o=a;o.status="fulfilled",o.value=r}},function(r){if(a.status==="pending"){var o=a;o.status="rejected",o.reason=r}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Im(t),t}throw wr=a,tl}}function Cr(t){try{var a=t._init;return a(t._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(wr=s,tl):s}}var wr=null;function Lm(){if(wr===null)throw Error(u(459));var t=wr;return wr=null,t}function Im(t){if(t===tl||t===Jo)throw Error(u(483))}var al=null,Wl=0;function Po(t){var a=Wl;return Wl+=1,al===null&&(al=[]),Om(al,t,a)}function Vl(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function ei(t,a){throw a.$$typeof===N?Error(u(525)):(t=Object.prototype.toString.call(a),Error(u(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function Um(t){function a(se,K){if(t){var oe=se.deletions;oe===null?(se.deletions=[K],se.flags|=16):oe.push(K)}}function s(se,K){if(!t)return null;for(;K!==null;)a(se,K),K=K.sibling;return null}function r(se){for(var K=new Map;se!==null;)se.key!==null?K.set(se.key,se):K.set(se.index,se),se=se.sibling;return K}function o(se,K){return se=pn(se,K),se.index=0,se.sibling=null,se}function i(se,K,oe){return se.index=oe,t?(oe=se.alternate,oe!==null?(oe=oe.index,oe<K?(se.flags|=67108866,K):oe):(se.flags|=67108866,K)):(se.flags|=1048576,K)}function f(se){return t&&se.alternate===null&&(se.flags|=67108866),se}function j(se,K,oe,Se){return K===null||K.tag!==6?(K=Mc(oe,se.mode,Se),K.return=se,K):(K=o(K,oe),K.return=se,K)}function V(se,K,oe,Se){var Xe=oe.type;return Xe===O?_e(se,K,oe.props.children,Se,oe.key):K!==null&&(K.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===ge&&Cr(Xe)===K.type)?(K=o(K,oe.props),Vl(K,oe),K.return=se,K):(K=Vo(oe.type,oe.key,oe.props,null,se.mode,Se),Vl(K,oe),K.return=se,K)}function ie(se,K,oe,Se){return K===null||K.tag!==4||K.stateNode.containerInfo!==oe.containerInfo||K.stateNode.implementation!==oe.implementation?(K=Bc(oe,se.mode,Se),K.return=se,K):(K=o(K,oe.children||[]),K.return=se,K)}function _e(se,K,oe,Se,Xe){return K===null||K.tag!==7?(K=gr(oe,se.mode,Se,Xe),K.return=se,K):(K=o(K,oe),K.return=se,K)}function Ae(se,K,oe){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Mc(""+K,se.mode,oe),K.return=se,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case I:return oe=Vo(K.type,K.key,K.props,null,se.mode,oe),Vl(oe,K),oe.return=se,oe;case w:return K=Bc(K,se.mode,oe),K.return=se,K;case ge:return K=Cr(K),Ae(se,K,oe)}if(ne(K)||ue(K))return K=gr(K,se.mode,oe,null),K.return=se,K;if(typeof K.then=="function")return Ae(se,Po(K),oe);if(K.$$typeof===E)return Ae(se,Xo(se,K),oe);ei(se,K)}return null}function ce(se,K,oe,Se){var Xe=K!==null?K.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Xe!==null?null:j(se,K,""+oe,Se);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case I:return oe.key===Xe?V(se,K,oe,Se):null;case w:return oe.key===Xe?ie(se,K,oe,Se):null;case ge:return oe=Cr(oe),ce(se,K,oe,Se)}if(ne(oe)||ue(oe))return Xe!==null?null:_e(se,K,oe,Se,null);if(typeof oe.then=="function")return ce(se,K,Po(oe),Se);if(oe.$$typeof===E)return ce(se,K,Xo(se,oe),Se);ei(se,oe)}return null}function pe(se,K,oe,Se,Xe){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return se=se.get(oe)||null,j(K,se,""+Se,Xe);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case I:return se=se.get(Se.key===null?oe:Se.key)||null,V(K,se,Se,Xe);case w:return se=se.get(Se.key===null?oe:Se.key)||null,ie(K,se,Se,Xe);case ge:return Se=Cr(Se),pe(se,K,oe,Se,Xe)}if(ne(Se)||ue(Se))return se=se.get(oe)||null,_e(K,se,Se,Xe,null);if(typeof Se.then=="function")return pe(se,K,oe,Po(Se),Xe);if(Se.$$typeof===E)return pe(se,K,oe,Xo(K,Se),Xe);ei(K,Se)}return null}function He(se,K,oe,Se){for(var Xe=null,_t=null,Ye=K,ct=K=0,ft=null;Ye!==null&&ct<oe.length;ct++){Ye.index>ct?(ft=Ye,Ye=null):ft=Ye.sibling;var jt=ce(se,Ye,oe[ct],Se);if(jt===null){Ye===null&&(Ye=ft);break}t&&Ye&&jt.alternate===null&&a(se,Ye),K=i(jt,K,ct),_t===null?Xe=jt:_t.sibling=jt,_t=jt,Ye=ft}if(ct===oe.length)return s(se,Ye),bt&&fn(se,ct),Xe;if(Ye===null){for(;ct<oe.length;ct++)Ye=Ae(se,oe[ct],Se),Ye!==null&&(K=i(Ye,K,ct),_t===null?Xe=Ye:_t.sibling=Ye,_t=Ye);return bt&&fn(se,ct),Xe}for(Ye=r(Ye);ct<oe.length;ct++)ft=pe(Ye,se,ct,oe[ct],Se),ft!==null&&(t&&ft.alternate!==null&&Ye.delete(ft.key===null?ct:ft.key),K=i(ft,K,ct),_t===null?Xe=ft:_t.sibling=ft,_t=ft);return t&&Ye.forEach(function(ar){return a(se,ar)}),bt&&fn(se,ct),Xe}function Je(se,K,oe,Se){if(oe==null)throw Error(u(151));for(var Xe=null,_t=null,Ye=K,ct=K=0,ft=null,jt=oe.next();Ye!==null&&!jt.done;ct++,jt=oe.next()){Ye.index>ct?(ft=Ye,Ye=null):ft=Ye.sibling;var ar=ce(se,Ye,jt.value,Se);if(ar===null){Ye===null&&(Ye=ft);break}t&&Ye&&ar.alternate===null&&a(se,Ye),K=i(ar,K,ct),_t===null?Xe=ar:_t.sibling=ar,_t=ar,Ye=ft}if(jt.done)return s(se,Ye),bt&&fn(se,ct),Xe;if(Ye===null){for(;!jt.done;ct++,jt=oe.next())jt=Ae(se,jt.value,Se),jt!==null&&(K=i(jt,K,ct),_t===null?Xe=jt:_t.sibling=jt,_t=jt);return bt&&fn(se,ct),Xe}for(Ye=r(Ye);!jt.done;ct++,jt=oe.next())jt=pe(Ye,se,ct,jt.value,Se),jt!==null&&(t&&jt.alternate!==null&&Ye.delete(jt.key===null?ct:jt.key),K=i(jt,K,ct),_t===null?Xe=jt:_t.sibling=jt,_t=jt);return t&&Ye.forEach(function(wv){return a(se,wv)}),bt&&fn(se,ct),Xe}function zt(se,K,oe,Se){if(typeof oe=="object"&&oe!==null&&oe.type===O&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case I:e:{for(var Xe=oe.key;K!==null;){if(K.key===Xe){if(Xe=oe.type,Xe===O){if(K.tag===7){s(se,K.sibling),Se=o(K,oe.props.children),Se.return=se,se=Se;break e}}else if(K.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===ge&&Cr(Xe)===K.type){s(se,K.sibling),Se=o(K,oe.props),Vl(Se,oe),Se.return=se,se=Se;break e}s(se,K);break}else a(se,K);K=K.sibling}oe.type===O?(Se=gr(oe.props.children,se.mode,Se,oe.key),Se.return=se,se=Se):(Se=Vo(oe.type,oe.key,oe.props,null,se.mode,Se),Vl(Se,oe),Se.return=se,se=Se)}return f(se);case w:e:{for(Xe=oe.key;K!==null;){if(K.key===Xe)if(K.tag===4&&K.stateNode.containerInfo===oe.containerInfo&&K.stateNode.implementation===oe.implementation){s(se,K.sibling),Se=o(K,oe.children||[]),Se.return=se,se=Se;break e}else{s(se,K);break}else a(se,K);K=K.sibling}Se=Bc(oe,se.mode,Se),Se.return=se,se=Se}return f(se);case ge:return oe=Cr(oe),zt(se,K,oe,Se)}if(ne(oe))return He(se,K,oe,Se);if(ue(oe)){if(Xe=ue(oe),typeof Xe!="function")throw Error(u(150));return oe=Xe.call(oe),Je(se,K,oe,Se)}if(typeof oe.then=="function")return zt(se,K,Po(oe),Se);if(oe.$$typeof===E)return zt(se,K,Xo(se,oe),Se);ei(se,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,K!==null&&K.tag===6?(s(se,K.sibling),Se=o(K,oe),Se.return=se,se=Se):(s(se,K),Se=Mc(oe,se.mode,Se),Se.return=se,se=Se),f(se)):s(se,K)}return function(se,K,oe,Se){try{Wl=0;var Xe=zt(se,K,oe,Se);return al=null,Xe}catch(Ye){if(Ye===tl||Ye===Jo)throw Ye;var _t=vs(29,Ye,null,se.mode);return _t.lanes=Se,_t.return=se,_t}finally{}}}var kr=Um(!0),qm=Um(!1),Un=!1;function $c(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yc(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function qn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Fn(t,a,s){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(wt&2)!==0){var o=r.pending;return o===null?a.next=a:(a.next=o.next,o.next=a),r.pending=a,a=Wo(t),Sm(t,null,s),a}return Yo(t,r,a,s),Wo(t)}function Gl(t,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var r=a.lanes;r&=t.pendingLanes,s|=r,a.lanes=s,At(t,s)}}function Wc(t,a){var s=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var o=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var f={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};i===null?o=i=f:i=i.next=f,s=s.next}while(s!==null);i===null?o=i=a:i=i.next=a}else o=i=a;s={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=a:t.next=a,s.lastBaseUpdate=a}var Vc=!1;function Ql(){if(Vc){var t=el;if(t!==null)throw t}}function Xl(t,a,s,r){Vc=!1;var o=t.updateQueue;Un=!1;var i=o.firstBaseUpdate,f=o.lastBaseUpdate,j=o.shared.pending;if(j!==null){o.shared.pending=null;var V=j,ie=V.next;V.next=null,f===null?i=ie:f.next=ie,f=V;var _e=t.alternate;_e!==null&&(_e=_e.updateQueue,j=_e.lastBaseUpdate,j!==f&&(j===null?_e.firstBaseUpdate=ie:j.next=ie,_e.lastBaseUpdate=V))}if(i!==null){var Ae=o.baseState;f=0,_e=ie=V=null,j=i;do{var ce=j.lane&-536870913,pe=ce!==j.lane;if(pe?(pt&ce)===ce:(r&ce)===ce){ce!==0&&ce===Pr&&(Vc=!0),_e!==null&&(_e=_e.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var He=t,Je=j;ce=a;var zt=s;switch(Je.tag){case 1:if(He=Je.payload,typeof He=="function"){Ae=He.call(zt,Ae,ce);break e}Ae=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Je.payload,ce=typeof He=="function"?He.call(zt,Ae,ce):He,ce==null)break e;Ae=_({},Ae,ce);break e;case 2:Un=!0}}ce=j.callback,ce!==null&&(t.flags|=64,pe&&(t.flags|=8192),pe=o.callbacks,pe===null?o.callbacks=[ce]:pe.push(ce))}else pe={lane:ce,tag:j.tag,payload:j.payload,callback:j.callback,next:null},_e===null?(ie=_e=pe,V=Ae):_e=_e.next=pe,f|=ce;if(j=j.next,j===null){if(j=o.shared.pending,j===null)break;pe=j,j=pe.next,pe.next=null,o.lastBaseUpdate=pe,o.shared.pending=null}}while(!0);_e===null&&(V=Ae),o.baseState=V,o.firstBaseUpdate=ie,o.lastBaseUpdate=_e,i===null&&(o.shared.lanes=0),Vn|=f,t.lanes=f,t.memoizedState=Ae}}function Fm(t,a){if(typeof t!="function")throw Error(u(191,t));t.call(a)}function Hm(t,a){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)Fm(s[t],a)}var sl=k(null),ti=k(0);function $m(t,a){t=wn,re(ti,t),re(sl,a),wn=t|a.baseLanes}function Gc(){re(ti,wn),re(sl,sl.current)}function Qc(){wn=ti.current,$(sl),$(ti)}var gs=k(null),Ds=null;function Hn(t){var a=t.alternate;re(da,da.current&1),re(gs,t),Ds===null&&(a===null||sl.current!==null||a.memoizedState!==null)&&(Ds=t)}function Xc(t){re(da,da.current),re(gs,t),Ds===null&&(Ds=t)}function Ym(t){t.tag===22?(re(da,da.current),re(gs,t),Ds===null&&(Ds=t)):$n()}function $n(){re(da,da.current),re(gs,gs.current)}function xs(t){$(gs),Ds===t&&(Ds=null),$(da)}var da=k(0);function ai(t){for(var a=t;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||tu(s)||au(s)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var bn=0,ot=null,Tt=null,va=null,si=!1,nl=!1,Ar=!1,ni=0,Zl=0,rl=null,hb=0;function la(){throw Error(u(321))}function Zc(t,a){if(a===null)return!1;for(var s=0;s<a.length&&s<t.length;s++)if(!bs(t[s],a[s]))return!1;return!0}function Jc(t,a,s,r,o,i){return bn=i,ot=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,S.H=t===null||t.memoizedState===null?Ap:md,Ar=!1,i=s(r,o),Ar=!1,nl&&(i=Vm(a,s,r,o)),Wm(t),i}function Wm(t){S.H=Pl;var a=Tt!==null&&Tt.next!==null;if(bn=0,va=Tt=ot=null,si=!1,Zl=0,rl=null,a)throw Error(u(300));t===null||ga||(t=t.dependencies,t!==null&&Qo(t)&&(ga=!0))}function Vm(t,a,s,r){ot=t;var o=0;do{if(nl&&(rl=null),Zl=0,nl=!1,25<=o)throw Error(u(301));if(o+=1,va=Tt=null,t.updateQueue!=null){var i=t.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}S.H=Np,i=a(s,r)}while(nl);return i}function yb(){var t=S.H,a=t.useState()[0];return a=typeof a.then=="function"?Jl(a):a,t=t.useState()[0],(Tt!==null?Tt.memoizedState:null)!==t&&(ot.flags|=1024),a}function Kc(){var t=ni!==0;return ni=0,t}function Pc(t,a,s){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~s}function ed(t){if(si){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}si=!1}bn=0,va=Tt=ot=null,nl=!1,Zl=ni=0,rl=null}function Ga(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return va===null?ot.memoizedState=va=t:va=va.next=t,va}function ua(){if(Tt===null){var t=ot.alternate;t=t!==null?t.memoizedState:null}else t=Tt.next;var a=va===null?ot.memoizedState:va.next;if(a!==null)va=a,Tt=t;else{if(t===null)throw ot.alternate===null?Error(u(467)):Error(u(310));Tt=t,t={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},va===null?ot.memoizedState=va=t:va=va.next=t}return va}function ri(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jl(t){var a=Zl;return Zl+=1,rl===null&&(rl=[]),t=Om(rl,t,a),a=ot,(va===null?a.memoizedState:va.next)===null&&(a=a.alternate,S.H=a===null||a.memoizedState===null?Ap:md),t}function li(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Jl(t);if(t.$$typeof===E)return Da(t)}throw Error(u(438,String(t)))}function td(t){var a=null,s=ot.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var r=ot.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(a={data:r.data.map(function(o){return o.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=ri(),ot.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(t),r=0;r<t;r++)s[r]=R;return a.index++,s}function vn(t,a){return typeof a=="function"?a(t):a}function oi(t){var a=ua();return ad(a,Tt,t)}function ad(t,a,s){var r=t.queue;if(r===null)throw Error(u(311));r.lastRenderedReducer=s;var o=t.baseQueue,i=r.pending;if(i!==null){if(o!==null){var f=o.next;o.next=i.next,i.next=f}a.baseQueue=o=i,r.pending=null}if(i=t.baseState,o===null)t.memoizedState=i;else{a=o.next;var j=f=null,V=null,ie=a,_e=!1;do{var Ae=ie.lane&-536870913;if(Ae!==ie.lane?(pt&Ae)===Ae:(bn&Ae)===Ae){var ce=ie.revertLane;if(ce===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),Ae===Pr&&(_e=!0);else if((bn&ce)===ce){ie=ie.next,ce===Pr&&(_e=!0);continue}else Ae={lane:0,revertLane:ie.revertLane,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},V===null?(j=V=Ae,f=i):V=V.next=Ae,ot.lanes|=ce,Vn|=ce;Ae=ie.action,Ar&&s(i,Ae),i=ie.hasEagerState?ie.eagerState:s(i,Ae)}else ce={lane:Ae,revertLane:ie.revertLane,gesture:ie.gesture,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},V===null?(j=V=ce,f=i):V=V.next=ce,ot.lanes|=Ae,Vn|=Ae;ie=ie.next}while(ie!==null&&ie!==a);if(V===null?f=i:V.next=j,!bs(i,t.memoizedState)&&(ga=!0,_e&&(s=el,s!==null)))throw s;t.memoizedState=i,t.baseState=f,t.baseQueue=V,r.lastRenderedState=i}return o===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function sd(t){var a=ua(),s=a.queue;if(s===null)throw Error(u(311));s.lastRenderedReducer=t;var r=s.dispatch,o=s.pending,i=a.memoizedState;if(o!==null){s.pending=null;var f=o=o.next;do i=t(i,f.action),f=f.next;while(f!==o);bs(i,a.memoizedState)||(ga=!0),a.memoizedState=i,a.baseQueue===null&&(a.baseState=i),s.lastRenderedState=i}return[i,r]}function Gm(t,a,s){var r=ot,o=ua(),i=bt;if(i){if(s===void 0)throw Error(u(407));s=s()}else s=a();var f=!bs((Tt||o).memoizedState,s);if(f&&(o.memoizedState=s,ga=!0),o=o.queue,ld(Zm.bind(null,r,o,t),[t]),o.getSnapshot!==a||f||va!==null&&va.memoizedState.tag&1){if(r.flags|=2048,ll(9,{destroy:void 0},Xm.bind(null,r,o,s,a),null),Lt===null)throw Error(u(349));i||(bn&127)!==0||Qm(r,a,s)}return s}function Qm(t,a,s){t.flags|=16384,t={getSnapshot:a,value:s},a=ot.updateQueue,a===null?(a=ri(),ot.updateQueue=a,a.stores=[t]):(s=a.stores,s===null?a.stores=[t]:s.push(t))}function Xm(t,a,s,r){a.value=s,a.getSnapshot=r,Jm(a)&&Km(t)}function Zm(t,a,s){return s(function(){Jm(a)&&Km(t)})}function Jm(t){var a=t.getSnapshot;t=t.value;try{var s=a();return!bs(t,s)}catch{return!0}}function Km(t){var a=vr(t,2);a!==null&&cs(a,t,2)}function nd(t){var a=Ga();if(typeof t=="function"){var s=t;if(t=s(),Ar){Ze(!0);try{s()}finally{Ze(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vn,lastRenderedState:t},a}function Pm(t,a,s,r){return t.baseState=s,ad(t,Tt,typeof r=="function"?r:vn)}function bb(t,a,s,r,o){if(di(t))throw Error(u(485));if(t=a.action,t!==null){var i={payload:o,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){i.listeners.push(f)}};S.T!==null?s(!0):i.isTransition=!1,r(i),s=a.pending,s===null?(i.next=a.pending=i,ep(a,i)):(i.next=s.next,a.pending=s.next=i)}}function ep(t,a){var s=a.action,r=a.payload,o=t.state;if(a.isTransition){var i=S.T,f={};S.T=f;try{var j=s(o,r),V=S.S;V!==null&&V(f,j),tp(t,a,j)}catch(ie){rd(t,a,ie)}finally{i!==null&&f.types!==null&&(i.types=f.types),S.T=i}}else try{i=s(o,r),tp(t,a,i)}catch(ie){rd(t,a,ie)}}function tp(t,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(r){ap(t,a,r)},function(r){return rd(t,a,r)}):ap(t,a,s)}function ap(t,a,s){a.status="fulfilled",a.value=s,sp(a),t.state=s,a=t.pending,a!==null&&(s=a.next,s===a?t.pending=null:(s=s.next,a.next=s,ep(t,s)))}function rd(t,a,s){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do a.status="rejected",a.reason=s,sp(a),a=a.next;while(a!==r)}t.action=null}function sp(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function np(t,a){return a}function rp(t,a){if(bt){var s=Lt.formState;if(s!==null){e:{var r=ot;if(bt){if(Gt){t:{for(var o=Gt,i=zs;o.nodeType!==8;){if(!i){o=null;break t}if(o=Os(o.nextSibling),o===null){o=null;break t}}i=o.data,o=i==="F!"||i==="F"?o:null}if(o){Gt=Os(o.nextSibling),r=o.data==="F!";break e}}Ln(r)}r=!1}r&&(a=s[0])}}return s=Ga(),s.memoizedState=s.baseState=a,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:np,lastRenderedState:a},s.queue=r,s=Cp.bind(null,ot,r),r.dispatch=s,r=nd(!1),i=ud.bind(null,ot,!1,r.queue),r=Ga(),o={state:a,dispatch:null,action:t,pending:null},r.queue=o,s=bb.bind(null,ot,o,i,s),o.dispatch=s,r.memoizedState=t,[a,s,!1]}function lp(t){var a=ua();return op(a,Tt,t)}function op(t,a,s){if(a=ad(t,a,np)[0],t=oi(vn)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var r=Jl(a)}catch(f){throw f===tl?Jo:f}else r=a;a=ua();var o=a.queue,i=o.dispatch;return s!==a.memoizedState&&(ot.flags|=2048,ll(9,{destroy:void 0},vb.bind(null,o,s),null)),[r,i,t]}function vb(t,a){t.action=a}function ip(t){var a=ua(),s=Tt;if(s!==null)return op(a,s,t);ua(),a=a.memoizedState,s=ua();var r=s.queue.dispatch;return s.memoizedState=t,[a,r,!1]}function ll(t,a,s,r){return t={tag:t,create:s,deps:r,inst:a,next:null},a=ot.updateQueue,a===null&&(a=ri(),ot.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=t.next=t:(r=s.next,s.next=t,t.next=r,a.lastEffect=t),t}function cp(){return ua().memoizedState}function ii(t,a,s,r){var o=Ga();ot.flags|=t,o.memoizedState=ll(1|a,{destroy:void 0},s,r===void 0?null:r)}function ci(t,a,s,r){var o=ua();r=r===void 0?null:r;var i=o.memoizedState.inst;Tt!==null&&r!==null&&Zc(r,Tt.memoizedState.deps)?o.memoizedState=ll(a,i,s,r):(ot.flags|=t,o.memoizedState=ll(1|a,i,s,r))}function dp(t,a){ii(8390656,8,t,a)}function ld(t,a){ci(2048,8,t,a)}function gb(t){ot.flags|=4;var a=ot.updateQueue;if(a===null)a=ri(),ot.updateQueue=a,a.events=[t];else{var s=a.events;s===null?a.events=[t]:s.push(t)}}function up(t){var a=ua().memoizedState;return gb({ref:a,nextImpl:t}),function(){if((wt&2)!==0)throw Error(u(440));return a.impl.apply(void 0,arguments)}}function mp(t,a){return ci(4,2,t,a)}function pp(t,a){return ci(4,4,t,a)}function fp(t,a){if(typeof a=="function"){t=t();var s=a(t);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function hp(t,a,s){s=s!=null?s.concat([t]):null,ci(4,4,fp.bind(null,a,t),s)}function od(){}function yp(t,a){var s=ua();a=a===void 0?null:a;var r=s.memoizedState;return a!==null&&Zc(a,r[1])?r[0]:(s.memoizedState=[t,a],t)}function bp(t,a){var s=ua();a=a===void 0?null:a;var r=s.memoizedState;if(a!==null&&Zc(a,r[1]))return r[0];if(r=t(),Ar){Ze(!0);try{t()}finally{Ze(!1)}}return s.memoizedState=[r,a],r}function id(t,a,s){return s===void 0||(bn&1073741824)!==0&&(pt&261930)===0?t.memoizedState=a:(t.memoizedState=s,t=gf(),ot.lanes|=t,Vn|=t,s)}function vp(t,a,s,r){return bs(s,a)?s:sl.current!==null?(t=id(t,s,r),bs(t,a)||(ga=!0),t):(bn&42)===0||(bn&1073741824)!==0&&(pt&261930)===0?(ga=!0,t.memoizedState=s):(t=gf(),ot.lanes|=t,Vn|=t,a)}function gp(t,a,s,r,o){var i=L.p;L.p=i!==0&&8>i?i:8;var f=S.T,j={};S.T=j,ud(t,!1,a,s);try{var V=o(),ie=S.S;if(ie!==null&&ie(j,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var _e=fb(V,r);Kl(t,a,_e,Ss(t))}else Kl(t,a,r,Ss(t))}catch(Ae){Kl(t,a,{then:function(){},status:"rejected",reason:Ae},Ss())}finally{L.p=i,f!==null&&j.types!==null&&(f.types=j.types),S.T=f}}function xb(){}function cd(t,a,s,r){if(t.tag!==5)throw Error(u(476));var o=xp(t).queue;gp(t,o,a,Z,s===null?xb:function(){return _p(t),s(r)})}function xp(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vn,lastRenderedState:Z},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vn,lastRenderedState:s},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function _p(t){var a=xp(t);a.next===null&&(a=t.alternate.memoizedState),Kl(t,a.next.queue,{},Ss())}function dd(){return Da(yo)}function jp(){return ua().memoizedState}function Sp(){return ua().memoizedState}function _b(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var s=Ss();t=qn(s);var r=Fn(a,t,s);r!==null&&(cs(r,a,s),Gl(r,a,s)),a={cache:Uc()},t.payload=a;return}a=a.return}}function jb(t,a,s){var r=Ss();s={lane:r,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},di(t)?wp(a,s):(s=Nc(t,a,s,r),s!==null&&(cs(s,t,r),kp(s,a,r)))}function Cp(t,a,s){var r=Ss();Kl(t,a,s,r)}function Kl(t,a,s,r){var o={lane:r,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(di(t))wp(a,o);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=a.lastRenderedReducer,i!==null))try{var f=a.lastRenderedState,j=i(f,s);if(o.hasEagerState=!0,o.eagerState=j,bs(j,f))return Yo(t,a,o,0),Lt===null&&$o(),!1}catch{}finally{}if(s=Nc(t,a,o,r),s!==null)return cs(s,t,r),kp(s,a,r),!0}return!1}function ud(t,a,s,r){if(r={lane:2,revertLane:$d(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},di(t)){if(a)throw Error(u(479))}else a=Nc(t,s,r,2),a!==null&&cs(a,t,2)}function di(t){var a=t.alternate;return t===ot||a!==null&&a===ot}function wp(t,a){nl=si=!0;var s=t.pending;s===null?a.next=a:(a.next=s.next,s.next=a),t.pending=a}function kp(t,a,s){if((s&4194048)!==0){var r=a.lanes;r&=t.pendingLanes,s|=r,a.lanes=s,At(t,s)}}var Pl={readContext:Da,use:li,useCallback:la,useContext:la,useEffect:la,useImperativeHandle:la,useLayoutEffect:la,useInsertionEffect:la,useMemo:la,useReducer:la,useRef:la,useState:la,useDebugValue:la,useDeferredValue:la,useTransition:la,useSyncExternalStore:la,useId:la,useHostTransitionStatus:la,useFormState:la,useActionState:la,useOptimistic:la,useMemoCache:la,useCacheRefresh:la};Pl.useEffectEvent=la;var Ap={readContext:Da,use:li,useCallback:function(t,a){return Ga().memoizedState=[t,a===void 0?null:a],t},useContext:Da,useEffect:dp,useImperativeHandle:function(t,a,s){s=s!=null?s.concat([t]):null,ii(4194308,4,fp.bind(null,a,t),s)},useLayoutEffect:function(t,a){return ii(4194308,4,t,a)},useInsertionEffect:function(t,a){ii(4,2,t,a)},useMemo:function(t,a){var s=Ga();a=a===void 0?null:a;var r=t();if(Ar){Ze(!0);try{t()}finally{Ze(!1)}}return s.memoizedState=[r,a],r},useReducer:function(t,a,s){var r=Ga();if(s!==void 0){var o=s(a);if(Ar){Ze(!0);try{s(a)}finally{Ze(!1)}}}else o=a;return r.memoizedState=r.baseState=o,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:o},r.queue=t,t=t.dispatch=jb.bind(null,ot,t),[r.memoizedState,t]},useRef:function(t){var a=Ga();return t={current:t},a.memoizedState=t},useState:function(t){t=nd(t);var a=t.queue,s=Cp.bind(null,ot,a);return a.dispatch=s,[t.memoizedState,s]},useDebugValue:od,useDeferredValue:function(t,a){var s=Ga();return id(s,t,a)},useTransition:function(){var t=nd(!1);return t=gp.bind(null,ot,t.queue,!0,!1),Ga().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,s){var r=ot,o=Ga();if(bt){if(s===void 0)throw Error(u(407));s=s()}else{if(s=a(),Lt===null)throw Error(u(349));(pt&127)!==0||Qm(r,a,s)}o.memoizedState=s;var i={value:s,getSnapshot:a};return o.queue=i,dp(Zm.bind(null,r,i,t),[t]),r.flags|=2048,ll(9,{destroy:void 0},Xm.bind(null,r,i,s,a),null),s},useId:function(){var t=Ga(),a=Lt.identifierPrefix;if(bt){var s=sn,r=an;s=(r&~(1<<32-kt(r)-1)).toString(32)+s,a="_"+a+"R_"+s,s=ni++,0<s&&(a+="H"+s.toString(32)),a+="_"}else s=hb++,a="_"+a+"r_"+s.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:dd,useFormState:rp,useActionState:rp,useOptimistic:function(t){var a=Ga();a.memoizedState=a.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=ud.bind(null,ot,!0,s),s.dispatch=a,[t,a]},useMemoCache:td,useCacheRefresh:function(){return Ga().memoizedState=_b.bind(null,ot)},useEffectEvent:function(t){var a=Ga(),s={impl:t};return a.memoizedState=s,function(){if((wt&2)!==0)throw Error(u(440));return s.impl.apply(void 0,arguments)}}},md={readContext:Da,use:li,useCallback:yp,useContext:Da,useEffect:ld,useImperativeHandle:hp,useInsertionEffect:mp,useLayoutEffect:pp,useMemo:bp,useReducer:oi,useRef:cp,useState:function(){return oi(vn)},useDebugValue:od,useDeferredValue:function(t,a){var s=ua();return vp(s,Tt.memoizedState,t,a)},useTransition:function(){var t=oi(vn)[0],a=ua().memoizedState;return[typeof t=="boolean"?t:Jl(t),a]},useSyncExternalStore:Gm,useId:jp,useHostTransitionStatus:dd,useFormState:lp,useActionState:lp,useOptimistic:function(t,a){var s=ua();return Pm(s,Tt,t,a)},useMemoCache:td,useCacheRefresh:Sp};md.useEffectEvent=up;var Np={readContext:Da,use:li,useCallback:yp,useContext:Da,useEffect:ld,useImperativeHandle:hp,useInsertionEffect:mp,useLayoutEffect:pp,useMemo:bp,useReducer:sd,useRef:cp,useState:function(){return sd(vn)},useDebugValue:od,useDeferredValue:function(t,a){var s=ua();return Tt===null?id(s,t,a):vp(s,Tt.memoizedState,t,a)},useTransition:function(){var t=sd(vn)[0],a=ua().memoizedState;return[typeof t=="boolean"?t:Jl(t),a]},useSyncExternalStore:Gm,useId:jp,useHostTransitionStatus:dd,useFormState:ip,useActionState:ip,useOptimistic:function(t,a){var s=ua();return Tt!==null?Pm(s,Tt,t,a):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:td,useCacheRefresh:Sp};Np.useEffectEvent=up;function pd(t,a,s,r){a=t.memoizedState,s=s(r,a),s=s==null?a:_({},a,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var fd={enqueueSetState:function(t,a,s){t=t._reactInternals;var r=Ss(),o=qn(r);o.payload=a,s!=null&&(o.callback=s),a=Fn(t,o,r),a!==null&&(cs(a,t,r),Gl(a,t,r))},enqueueReplaceState:function(t,a,s){t=t._reactInternals;var r=Ss(),o=qn(r);o.tag=1,o.payload=a,s!=null&&(o.callback=s),a=Fn(t,o,r),a!==null&&(cs(a,t,r),Gl(a,t,r))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var s=Ss(),r=qn(s);r.tag=2,a!=null&&(r.callback=a),a=Fn(t,r,s),a!==null&&(cs(a,t,s),Gl(a,t,s))}};function Rp(t,a,s,r,o,i,f){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,f):a.prototype&&a.prototype.isPureReactComponent?!Ul(s,r)||!Ul(o,i):!0}function Mp(t,a,s,r){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,r),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,r),a.state!==t&&fd.enqueueReplaceState(a,a.state,null)}function Nr(t,a){var s=a;if("ref"in a){s={};for(var r in a)r!=="ref"&&(s[r]=a[r])}if(t=t.defaultProps){s===a&&(s=_({},s));for(var o in t)s[o]===void 0&&(s[o]=t[o])}return s}function Bp(t){Ho(t)}function Tp(t){console.error(t)}function Ep(t){Ho(t)}function ui(t,a){try{var s=t.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(r){setTimeout(function(){throw r})}}function zp(t,a,s){try{var r=t.onCaughtError;r(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function hd(t,a,s){return s=qn(s),s.tag=3,s.payload={element:null},s.callback=function(){ui(t,a)},s}function Dp(t){return t=qn(t),t.tag=3,t}function Op(t,a,s,r){var o=s.type.getDerivedStateFromError;if(typeof o=="function"){var i=r.value;t.payload=function(){return o(i)},t.callback=function(){zp(a,s,r)}}var f=s.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(t.callback=function(){zp(a,s,r),typeof o!="function"&&(Gn===null?Gn=new Set([this]):Gn.add(this));var j=r.stack;this.componentDidCatch(r.value,{componentStack:j!==null?j:""})})}function Sb(t,a,s,r,o){if(s.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(a=s.alternate,a!==null&&Kr(a,s,o,!0),s=gs.current,s!==null){switch(s.tag){case 31:case 13:return Ds===null?Si():s.alternate===null&&oa===0&&(oa=3),s.flags&=-257,s.flags|=65536,s.lanes=o,r===Ko?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([r]):a.add(r),qd(t,r,o)),!1;case 22:return s.flags|=65536,r===Ko?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([r])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([r]):s.add(r)),qd(t,r,o)),!1}throw Error(u(435,s.tag))}return qd(t,r,o),Si(),!1}if(bt)return a=gs.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=o,r!==zc&&(t=Error(u(422),{cause:r}),Hl(Bs(t,s)))):(r!==zc&&(a=Error(u(423),{cause:r}),Hl(Bs(a,s))),t=t.current.alternate,t.flags|=65536,o&=-o,t.lanes|=o,r=Bs(r,s),o=hd(t.stateNode,r,o),Wc(t,o),oa!==4&&(oa=2)),!1;var i=Error(u(520),{cause:r});if(i=Bs(i,s),oo===null?oo=[i]:oo.push(i),oa!==4&&(oa=2),a===null)return!0;r=Bs(r,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,t=o&-o,s.lanes|=t,t=hd(s.stateNode,r,t),Wc(s,t),!1;case 1:if(a=s.type,i=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(Gn===null||!Gn.has(i))))return s.flags|=65536,o&=-o,s.lanes|=o,o=Dp(o),Op(o,t,s,r),Wc(s,o),!1}s=s.return}while(s!==null);return!1}var yd=Error(u(461)),ga=!1;function Oa(t,a,s,r){a.child=t===null?qm(a,null,s,r):kr(a,t.child,s,r)}function Lp(t,a,s,r,o){s=s.render;var i=a.ref;if("ref"in r){var f={};for(var j in r)j!=="ref"&&(f[j]=r[j])}else f=r;return jr(a),r=Jc(t,a,s,f,i,o),j=Kc(),t!==null&&!ga?(Pc(t,a,o),gn(t,a,o)):(bt&&j&&Tc(a),a.flags|=1,Oa(t,a,r,o),a.child)}function Ip(t,a,s,r,o){if(t===null){var i=s.type;return typeof i=="function"&&!Rc(i)&&i.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=i,Up(t,a,i,r,o)):(t=Vo(s.type,null,r,a,a.mode,o),t.ref=a.ref,t.return=a,a.child=t)}if(i=t.child,!Cd(t,o)){var f=i.memoizedProps;if(s=s.compare,s=s!==null?s:Ul,s(f,r)&&t.ref===a.ref)return gn(t,a,o)}return a.flags|=1,t=pn(i,r),t.ref=a.ref,t.return=a,a.child=t}function Up(t,a,s,r,o){if(t!==null){var i=t.memoizedProps;if(Ul(i,r)&&t.ref===a.ref)if(ga=!1,a.pendingProps=r=i,Cd(t,o))(t.flags&131072)!==0&&(ga=!0);else return a.lanes=t.lanes,gn(t,a,o)}return bd(t,a,s,r,o)}function qp(t,a,s,r){var o=r.children,i=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((a.flags&128)!==0){if(i=i!==null?i.baseLanes|s:s,t!==null){for(r=a.child=t.child,o=0;r!==null;)o=o|r.lanes|r.childLanes,r=r.sibling;r=o&~i}else r=0,a.child=null;return Fp(t,a,i,s,r)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&Zo(a,i!==null?i.cachePool:null),i!==null?$m(a,i):Gc(),Ym(a);else return r=a.lanes=536870912,Fp(t,a,i!==null?i.baseLanes|s:s,s,r)}else i!==null?(Zo(a,i.cachePool),$m(a,i),$n(),a.memoizedState=null):(t!==null&&Zo(a,null),Gc(),$n());return Oa(t,a,o,s),a.child}function eo(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Fp(t,a,s,r,o){var i=Fc();return i=i===null?null:{parent:ba._currentValue,pool:i},a.memoizedState={baseLanes:s,cachePool:i},t!==null&&Zo(a,null),Gc(),Ym(a),t!==null&&Kr(t,a,r,!0),a.childLanes=o,null}function mi(t,a){return a=fi({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function Hp(t,a,s){return kr(a,t.child,null,s),t=mi(a,a.pendingProps),t.flags|=2,xs(a),a.memoizedState=null,t}function Cb(t,a,s){var r=a.pendingProps,o=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(bt){if(r.mode==="hidden")return t=mi(a,r),a.lanes=536870912,eo(null,t);if(Xc(a),(t=Gt)?(t=th(t,zs),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Dn!==null?{id:an,overflow:sn}:null,retryLane:536870912,hydrationErrors:null},s=wm(t),s.return=a,a.child=s,za=a,Gt=null)):t=null,t===null)throw Ln(a);return a.lanes=536870912,null}return mi(a,r)}var i=t.memoizedState;if(i!==null){var f=i.dehydrated;if(Xc(a),o)if(a.flags&256)a.flags&=-257,a=Hp(t,a,s);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(u(558));else if(ga||Kr(t,a,s,!1),o=(s&t.childLanes)!==0,ga||o){if(r=Lt,r!==null&&(f=Ka(r,s),f!==0&&f!==i.retryLane))throw i.retryLane=f,vr(t,f),cs(r,t,f),yd;Si(),a=Hp(t,a,s)}else t=i.treeContext,Gt=Os(f.nextSibling),za=a,bt=!0,On=null,zs=!1,t!==null&&Nm(a,t),a=mi(a,r),a.flags|=4096;return a}return t=pn(t.child,{mode:r.mode,children:r.children}),t.ref=a.ref,a.child=t,t.return=a,t}function pi(t,a){var s=a.ref;if(s===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(u(284));(t===null||t.ref!==s)&&(a.flags|=4194816)}}function bd(t,a,s,r,o){return jr(a),s=Jc(t,a,s,r,void 0,o),r=Kc(),t!==null&&!ga?(Pc(t,a,o),gn(t,a,o)):(bt&&r&&Tc(a),a.flags|=1,Oa(t,a,s,o),a.child)}function $p(t,a,s,r,o,i){return jr(a),a.updateQueue=null,s=Vm(a,r,s,o),Wm(t),r=Kc(),t!==null&&!ga?(Pc(t,a,i),gn(t,a,i)):(bt&&r&&Tc(a),a.flags|=1,Oa(t,a,s,i),a.child)}function Yp(t,a,s,r,o){if(jr(a),a.stateNode===null){var i=Qr,f=s.contextType;typeof f=="object"&&f!==null&&(i=Da(f)),i=new s(r,i),a.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=fd,a.stateNode=i,i._reactInternals=a,i=a.stateNode,i.props=r,i.state=a.memoizedState,i.refs={},$c(a),f=s.contextType,i.context=typeof f=="object"&&f!==null?Da(f):Qr,i.state=a.memoizedState,f=s.getDerivedStateFromProps,typeof f=="function"&&(pd(a,s,f,r),i.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(f=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),f!==i.state&&fd.enqueueReplaceState(i,i.state,null),Xl(a,r,i,o),Ql(),i.state=a.memoizedState),typeof i.componentDidMount=="function"&&(a.flags|=4194308),r=!0}else if(t===null){i=a.stateNode;var j=a.memoizedProps,V=Nr(s,j);i.props=V;var ie=i.context,_e=s.contextType;f=Qr,typeof _e=="object"&&_e!==null&&(f=Da(_e));var Ae=s.getDerivedStateFromProps;_e=typeof Ae=="function"||typeof i.getSnapshotBeforeUpdate=="function",j=a.pendingProps!==j,_e||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(j||ie!==f)&&Mp(a,i,r,f),Un=!1;var ce=a.memoizedState;i.state=ce,Xl(a,r,i,o),Ql(),ie=a.memoizedState,j||ce!==ie||Un?(typeof Ae=="function"&&(pd(a,s,Ae,r),ie=a.memoizedState),(V=Un||Rp(a,s,V,r,ce,ie,f))?(_e||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(a.flags|=4194308)):(typeof i.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=r,a.memoizedState=ie),i.props=r,i.state=ie,i.context=f,r=V):(typeof i.componentDidMount=="function"&&(a.flags|=4194308),r=!1)}else{i=a.stateNode,Yc(t,a),f=a.memoizedProps,_e=Nr(s,f),i.props=_e,Ae=a.pendingProps,ce=i.context,ie=s.contextType,V=Qr,typeof ie=="object"&&ie!==null&&(V=Da(ie)),j=s.getDerivedStateFromProps,(ie=typeof j=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(f!==Ae||ce!==V)&&Mp(a,i,r,V),Un=!1,ce=a.memoizedState,i.state=ce,Xl(a,r,i,o),Ql();var pe=a.memoizedState;f!==Ae||ce!==pe||Un||t!==null&&t.dependencies!==null&&Qo(t.dependencies)?(typeof j=="function"&&(pd(a,s,j,r),pe=a.memoizedState),(_e=Un||Rp(a,s,_e,r,ce,pe,V)||t!==null&&t.dependencies!==null&&Qo(t.dependencies))?(ie||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,pe,V),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,pe,V)),typeof i.componentDidUpdate=="function"&&(a.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof i.componentDidUpdate!="function"||f===t.memoizedProps&&ce===t.memoizedState||(a.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&ce===t.memoizedState||(a.flags|=1024),a.memoizedProps=r,a.memoizedState=pe),i.props=r,i.state=pe,i.context=V,r=_e):(typeof i.componentDidUpdate!="function"||f===t.memoizedProps&&ce===t.memoizedState||(a.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&ce===t.memoizedState||(a.flags|=1024),r=!1)}return i=r,pi(t,a),r=(a.flags&128)!==0,i||r?(i=a.stateNode,s=r&&typeof s.getDerivedStateFromError!="function"?null:i.render(),a.flags|=1,t!==null&&r?(a.child=kr(a,t.child,null,o),a.child=kr(a,null,s,o)):Oa(t,a,s,o),a.memoizedState=i.state,t=a.child):t=gn(t,a,o),t}function Wp(t,a,s,r){return xr(),a.flags|=256,Oa(t,a,s,r),a.child}var vd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gd(t){return{baseLanes:t,cachePool:zm()}}function xd(t,a,s){return t=t!==null?t.childLanes&~s:0,a&&(t|=js),t}function Vp(t,a,s){var r=a.pendingProps,o=!1,i=(a.flags&128)!==0,f;if((f=i)||(f=t!==null&&t.memoizedState===null?!1:(da.current&2)!==0),f&&(o=!0,a.flags&=-129),f=(a.flags&32)!==0,a.flags&=-33,t===null){if(bt){if(o?Hn(a):$n(),(t=Gt)?(t=th(t,zs),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Dn!==null?{id:an,overflow:sn}:null,retryLane:536870912,hydrationErrors:null},s=wm(t),s.return=a,a.child=s,za=a,Gt=null)):t=null,t===null)throw Ln(a);return au(t)?a.lanes=32:a.lanes=536870912,null}var j=r.children;return r=r.fallback,o?($n(),o=a.mode,j=fi({mode:"hidden",children:j},o),r=gr(r,o,s,null),j.return=a,r.return=a,j.sibling=r,a.child=j,r=a.child,r.memoizedState=gd(s),r.childLanes=xd(t,f,s),a.memoizedState=vd,eo(null,r)):(Hn(a),_d(a,j))}var V=t.memoizedState;if(V!==null&&(j=V.dehydrated,j!==null)){if(i)a.flags&256?(Hn(a),a.flags&=-257,a=jd(t,a,s)):a.memoizedState!==null?($n(),a.child=t.child,a.flags|=128,a=null):($n(),j=r.fallback,o=a.mode,r=fi({mode:"visible",children:r.children},o),j=gr(j,o,s,null),j.flags|=2,r.return=a,j.return=a,r.sibling=j,a.child=r,kr(a,t.child,null,s),r=a.child,r.memoizedState=gd(s),r.childLanes=xd(t,f,s),a.memoizedState=vd,a=eo(null,r));else if(Hn(a),au(j)){if(f=j.nextSibling&&j.nextSibling.dataset,f)var ie=f.dgst;f=ie,r=Error(u(419)),r.stack="",r.digest=f,Hl({value:r,source:null,stack:null}),a=jd(t,a,s)}else if(ga||Kr(t,a,s,!1),f=(s&t.childLanes)!==0,ga||f){if(f=Lt,f!==null&&(r=Ka(f,s),r!==0&&r!==V.retryLane))throw V.retryLane=r,vr(t,r),cs(f,t,r),yd;tu(j)||Si(),a=jd(t,a,s)}else tu(j)?(a.flags|=192,a.child=t.child,a=null):(t=V.treeContext,Gt=Os(j.nextSibling),za=a,bt=!0,On=null,zs=!1,t!==null&&Nm(a,t),a=_d(a,r.children),a.flags|=4096);return a}return o?($n(),j=r.fallback,o=a.mode,V=t.child,ie=V.sibling,r=pn(V,{mode:"hidden",children:r.children}),r.subtreeFlags=V.subtreeFlags&65011712,ie!==null?j=pn(ie,j):(j=gr(j,o,s,null),j.flags|=2),j.return=a,r.return=a,r.sibling=j,a.child=r,eo(null,r),r=a.child,j=t.child.memoizedState,j===null?j=gd(s):(o=j.cachePool,o!==null?(V=ba._currentValue,o=o.parent!==V?{parent:V,pool:V}:o):o=zm(),j={baseLanes:j.baseLanes|s,cachePool:o}),r.memoizedState=j,r.childLanes=xd(t,f,s),a.memoizedState=vd,eo(t.child,r)):(Hn(a),s=t.child,t=s.sibling,s=pn(s,{mode:"visible",children:r.children}),s.return=a,s.sibling=null,t!==null&&(f=a.deletions,f===null?(a.deletions=[t],a.flags|=16):f.push(t)),a.child=s,a.memoizedState=null,s)}function _d(t,a){return a=fi({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function fi(t,a){return t=vs(22,t,null,a),t.lanes=0,t}function jd(t,a,s){return kr(a,t.child,null,s),t=_d(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function Gp(t,a,s){t.lanes|=a;var r=t.alternate;r!==null&&(r.lanes|=a),Lc(t.return,a,s)}function Sd(t,a,s,r,o,i){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:o,treeForkCount:i}:(f.isBackwards=a,f.rendering=null,f.renderingStartTime=0,f.last=r,f.tail=s,f.tailMode=o,f.treeForkCount=i)}function Qp(t,a,s){var r=a.pendingProps,o=r.revealOrder,i=r.tail;r=r.children;var f=da.current,j=(f&2)!==0;if(j?(f=f&1|2,a.flags|=128):f&=1,re(da,f),Oa(t,a,r,s),r=bt?Fl:0,!j&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gp(t,s,a);else if(t.tag===19)Gp(t,s,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(o){case"forwards":for(s=a.child,o=null;s!==null;)t=s.alternate,t!==null&&ai(t)===null&&(o=s),s=s.sibling;s=o,s===null?(o=a.child,a.child=null):(o=s.sibling,s.sibling=null),Sd(a,!1,o,s,i,r);break;case"backwards":case"unstable_legacy-backwards":for(s=null,o=a.child,a.child=null;o!==null;){if(t=o.alternate,t!==null&&ai(t)===null){a.child=o;break}t=o.sibling,o.sibling=s,s=o,o=t}Sd(a,!0,s,null,i,r);break;case"together":Sd(a,!1,null,null,void 0,r);break;default:a.memoizedState=null}return a.child}function gn(t,a,s){if(t!==null&&(a.dependencies=t.dependencies),Vn|=a.lanes,(s&a.childLanes)===0)if(t!==null){if(Kr(t,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(u(153));if(a.child!==null){for(t=a.child,s=pn(t,t.pendingProps),a.child=s,s.return=a;t.sibling!==null;)t=t.sibling,s=s.sibling=pn(t,t.pendingProps),s.return=a;s.sibling=null}return a.child}function Cd(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Qo(t)))}function wb(t,a,s){switch(a.tag){case 3:le(a,a.stateNode.containerInfo),In(a,ba,t.memoizedState.cache),xr();break;case 27:case 5:Ge(a);break;case 4:le(a,a.stateNode.containerInfo);break;case 10:In(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Xc(a),null;break;case 13:var r=a.memoizedState;if(r!==null)return r.dehydrated!==null?(Hn(a),a.flags|=128,null):(s&a.child.childLanes)!==0?Vp(t,a,s):(Hn(a),t=gn(t,a,s),t!==null?t.sibling:null);Hn(a);break;case 19:var o=(t.flags&128)!==0;if(r=(s&a.childLanes)!==0,r||(Kr(t,a,s,!1),r=(s&a.childLanes)!==0),o){if(r)return Qp(t,a,s);a.flags|=128}if(o=a.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),re(da,da.current),r)break;return null;case 22:return a.lanes=0,qp(t,a,s,a.pendingProps);case 24:In(a,ba,t.memoizedState.cache)}return gn(t,a,s)}function Xp(t,a,s){if(t!==null)if(t.memoizedProps!==a.pendingProps)ga=!0;else{if(!Cd(t,s)&&(a.flags&128)===0)return ga=!1,wb(t,a,s);ga=(t.flags&131072)!==0}else ga=!1,bt&&(a.flags&1048576)!==0&&Am(a,Fl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var r=a.pendingProps;if(t=Cr(a.elementType),a.type=t,typeof t=="function")Rc(t)?(r=Nr(t,r),a.tag=1,a=Yp(null,a,t,r,s)):(a.tag=0,a=bd(null,a,t,r,s));else{if(t!=null){var o=t.$$typeof;if(o===B){a.tag=11,a=Lp(null,a,t,r,s);break e}else if(o===P){a.tag=14,a=Ip(null,a,t,r,s);break e}}throw a=xe(t)||t,Error(u(306,a,""))}}return a;case 0:return bd(t,a,a.type,a.pendingProps,s);case 1:return r=a.type,o=Nr(r,a.pendingProps),Yp(t,a,r,o,s);case 3:e:{if(le(a,a.stateNode.containerInfo),t===null)throw Error(u(387));r=a.pendingProps;var i=a.memoizedState;o=i.element,Yc(t,a),Xl(a,r,null,s);var f=a.memoizedState;if(r=f.cache,In(a,ba,r),r!==i.cache&&Ic(a,[ba],s,!0),Ql(),r=f.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:f.cache},a.updateQueue.baseState=i,a.memoizedState=i,a.flags&256){a=Wp(t,a,r,s);break e}else if(r!==o){o=Bs(Error(u(424)),a),Hl(o),a=Wp(t,a,r,s);break e}else{switch(t=a.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Gt=Os(t.firstChild),za=a,bt=!0,On=null,zs=!0,s=qm(a,null,r,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(xr(),r===o){a=gn(t,a,s);break e}Oa(t,a,r,s)}a=a.child}return a;case 26:return pi(t,a),t===null?(s=oh(a.type,null,a.pendingProps,null))?a.memoizedState=s:bt||(s=a.type,t=a.pendingProps,r=Mi(be.current).createElement(s),r[yt]=a,r[Ct]=t,La(r,s,t),xt(r),a.stateNode=r):a.memoizedState=oh(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return Ge(a),t===null&&bt&&(r=a.stateNode=nh(a.type,a.pendingProps,be.current),za=a,zs=!0,o=Gt,Jn(a.type)?(su=o,Gt=Os(r.firstChild)):Gt=o),Oa(t,a,a.pendingProps.children,s),pi(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&bt&&((o=r=Gt)&&(r=tv(r,a.type,a.pendingProps,zs),r!==null?(a.stateNode=r,za=a,Gt=Os(r.firstChild),zs=!1,o=!0):o=!1),o||Ln(a)),Ge(a),o=a.type,i=a.pendingProps,f=t!==null?t.memoizedProps:null,r=i.children,Kd(o,i)?r=null:f!==null&&Kd(o,f)&&(a.flags|=32),a.memoizedState!==null&&(o=Jc(t,a,yb,null,null,s),yo._currentValue=o),pi(t,a),Oa(t,a,r,s),a.child;case 6:return t===null&&bt&&((t=s=Gt)&&(s=av(s,a.pendingProps,zs),s!==null?(a.stateNode=s,za=a,Gt=null,t=!0):t=!1),t||Ln(a)),null;case 13:return Vp(t,a,s);case 4:return le(a,a.stateNode.containerInfo),r=a.pendingProps,t===null?a.child=kr(a,null,r,s):Oa(t,a,r,s),a.child;case 11:return Lp(t,a,a.type,a.pendingProps,s);case 7:return Oa(t,a,a.pendingProps,s),a.child;case 8:return Oa(t,a,a.pendingProps.children,s),a.child;case 12:return Oa(t,a,a.pendingProps.children,s),a.child;case 10:return r=a.pendingProps,In(a,a.type,r.value),Oa(t,a,r.children,s),a.child;case 9:return o=a.type._context,r=a.pendingProps.children,jr(a),o=Da(o),r=r(o),a.flags|=1,Oa(t,a,r,s),a.child;case 14:return Ip(t,a,a.type,a.pendingProps,s);case 15:return Up(t,a,a.type,a.pendingProps,s);case 19:return Qp(t,a,s);case 31:return Cb(t,a,s);case 22:return qp(t,a,s,a.pendingProps);case 24:return jr(a),r=Da(ba),t===null?(o=Fc(),o===null&&(o=Lt,i=Uc(),o.pooledCache=i,i.refCount++,i!==null&&(o.pooledCacheLanes|=s),o=i),a.memoizedState={parent:r,cache:o},$c(a),In(a,ba,o)):((t.lanes&s)!==0&&(Yc(t,a),Xl(a,null,null,s),Ql()),o=t.memoizedState,i=a.memoizedState,o.parent!==r?(o={parent:r,cache:r},a.memoizedState=o,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=o),In(a,ba,r)):(r=i.cache,In(a,ba,r),r!==o.cache&&Ic(a,[ba],s,!0))),Oa(t,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(u(156,a.tag))}function xn(t){t.flags|=4}function wd(t,a,s,r,o){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(o&335544128)===o)if(t.stateNode.complete)t.flags|=8192;else if(Sf())t.flags|=8192;else throw wr=Ko,Hc}else t.flags&=-16777217}function Zp(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!mh(a))if(Sf())t.flags|=8192;else throw wr=Ko,Hc}function hi(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Ra():536870912,t.lanes|=a,dl|=a)}function to(t,a){if(!bt)switch(t.tailMode){case"hidden":a=t.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Qt(t){var a=t.alternate!==null&&t.alternate.child===t.child,s=0,r=0;if(a)for(var o=t.child;o!==null;)s|=o.lanes|o.childLanes,r|=o.subtreeFlags&65011712,r|=o.flags&65011712,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)s|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=s,a}function kb(t,a,s){var r=a.pendingProps;switch(Ec(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(a),null;case 1:return Qt(a),null;case 3:return s=a.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),yn(ba),Me(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Jr(a)?xn(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Dc())),Qt(a),null;case 26:var o=a.type,i=a.memoizedState;return t===null?(xn(a),i!==null?(Qt(a),Zp(a,i)):(Qt(a),wd(a,o,null,r,s))):i?i!==t.memoizedState?(xn(a),Qt(a),Zp(a,i)):(Qt(a),a.flags&=-16777217):(t=t.memoizedProps,t!==r&&xn(a),Qt(a),wd(a,o,t,r,s)),null;case 27:if(De(a),s=be.current,o=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==r&&xn(a);else{if(!r){if(a.stateNode===null)throw Error(u(166));return Qt(a),null}t=U.current,Jr(a)?Rm(a):(t=nh(o,r,s),a.stateNode=t,xn(a))}return Qt(a),null;case 5:if(De(a),o=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==r&&xn(a);else{if(!r){if(a.stateNode===null)throw Error(u(166));return Qt(a),null}if(i=U.current,Jr(a))Rm(a);else{var f=Mi(be.current);switch(i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof r.is=="string"?f.createElement("select",{is:r.is}):f.createElement("select"),r.multiple?i.multiple=!0:r.size&&(i.size=r.size);break;default:i=typeof r.is=="string"?f.createElement(o,{is:r.is}):f.createElement(o)}}i[yt]=a,i[Ct]=r;e:for(f=a.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===a)break e;for(;f.sibling===null;){if(f.return===null||f.return===a)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}a.stateNode=i;e:switch(La(i,o,r),o){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&xn(a)}}return Qt(a),wd(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,s),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==r&&xn(a);else{if(typeof r!="string"&&a.stateNode===null)throw Error(u(166));if(t=be.current,Jr(a)){if(t=a.stateNode,s=a.memoizedProps,r=null,o=za,o!==null)switch(o.tag){case 27:case 5:r=o.memoizedProps}t[yt]=a,t=!!(t.nodeValue===s||r!==null&&r.suppressHydrationWarning===!0||Gf(t.nodeValue,s)),t||Ln(a,!0)}else t=Mi(t).createTextNode(r),t[yt]=a,a.stateNode=t}return Qt(a),null;case 31:if(s=a.memoizedState,t===null||t.memoizedState!==null){if(r=Jr(a),s!==null){if(t===null){if(!r)throw Error(u(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(u(557));t[yt]=a}else xr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Qt(a),t=!1}else s=Dc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),t=!0;if(!t)return a.flags&256?(xs(a),a):(xs(a),null);if((a.flags&128)!==0)throw Error(u(558))}return Qt(a),null;case 13:if(r=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(o=Jr(a),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(u(318));if(o=a.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(u(317));o[yt]=a}else xr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Qt(a),o=!1}else o=Dc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),o=!0;if(!o)return a.flags&256?(xs(a),a):(xs(a),null)}return xs(a),(a.flags&128)!==0?(a.lanes=s,a):(s=r!==null,t=t!==null&&t.memoizedState!==null,s&&(r=a.child,o=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(o=r.alternate.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==o&&(r.flags|=2048)),s!==t&&s&&(a.child.flags|=8192),hi(a,a.updateQueue),Qt(a),null);case 4:return Me(),t===null&&Gd(a.stateNode.containerInfo),Qt(a),null;case 10:return yn(a.type),Qt(a),null;case 19:if($(da),r=a.memoizedState,r===null)return Qt(a),null;if(o=(a.flags&128)!==0,i=r.rendering,i===null)if(o)to(r,!1);else{if(oa!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(i=ai(t),i!==null){for(a.flags|=128,to(r,!1),t=i.updateQueue,a.updateQueue=t,hi(a,t),a.subtreeFlags=0,t=s,s=a.child;s!==null;)Cm(s,t),s=s.sibling;return re(da,da.current&1|2),bt&&fn(a,r.treeForkCount),a.child}t=t.sibling}r.tail!==null&&Te()>xi&&(a.flags|=128,o=!0,to(r,!1),a.lanes=4194304)}else{if(!o)if(t=ai(i),t!==null){if(a.flags|=128,o=!0,t=t.updateQueue,a.updateQueue=t,hi(a,t),to(r,!0),r.tail===null&&r.tailMode==="hidden"&&!i.alternate&&!bt)return Qt(a),null}else 2*Te()-r.renderingStartTime>xi&&s!==536870912&&(a.flags|=128,o=!0,to(r,!1),a.lanes=4194304);r.isBackwards?(i.sibling=a.child,a.child=i):(t=r.last,t!==null?t.sibling=i:a.child=i,r.last=i)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Te(),t.sibling=null,s=da.current,re(da,o?s&1|2:s&1),bt&&fn(a,r.treeForkCount),t):(Qt(a),null);case 22:case 23:return xs(a),Qc(),r=a.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(a.flags|=8192):r&&(a.flags|=8192),r?(s&536870912)!==0&&(a.flags&128)===0&&(Qt(a),a.subtreeFlags&6&&(a.flags|=8192)):Qt(a),s=a.updateQueue,s!==null&&hi(a,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==s&&(a.flags|=2048),t!==null&&$(Sr),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),yn(ba),Qt(a),null;case 25:return null;case 30:return null}throw Error(u(156,a.tag))}function Ab(t,a){switch(Ec(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return yn(ba),Me(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return De(a),null;case 31:if(a.memoizedState!==null){if(xs(a),a.alternate===null)throw Error(u(340));xr()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(xs(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(u(340));xr()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return $(da),null;case 4:return Me(),null;case 10:return yn(a.type),null;case 22:case 23:return xs(a),Qc(),t!==null&&$(Sr),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return yn(ba),null;case 25:return null;default:return null}}function Jp(t,a){switch(Ec(a),a.tag){case 3:yn(ba),Me();break;case 26:case 27:case 5:De(a);break;case 4:Me();break;case 31:a.memoizedState!==null&&xs(a);break;case 13:xs(a);break;case 19:$(da);break;case 10:yn(a.type);break;case 22:case 23:xs(a),Qc(),t!==null&&$(Sr);break;case 24:yn(ba)}}function ao(t,a){try{var s=a.updateQueue,r=s!==null?s.lastEffect:null;if(r!==null){var o=r.next;s=o;do{if((s.tag&t)===t){r=void 0;var i=s.create,f=s.inst;r=i(),f.destroy=r}s=s.next}while(s!==o)}}catch(j){Mt(a,a.return,j)}}function Yn(t,a,s){try{var r=a.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var i=o.next;r=i;do{if((r.tag&t)===t){var f=r.inst,j=f.destroy;if(j!==void 0){f.destroy=void 0,o=a;var V=s,ie=j;try{ie()}catch(_e){Mt(o,V,_e)}}}r=r.next}while(r!==i)}}catch(_e){Mt(a,a.return,_e)}}function Kp(t){var a=t.updateQueue;if(a!==null){var s=t.stateNode;try{Hm(a,s)}catch(r){Mt(t,t.return,r)}}}function Pp(t,a,s){s.props=Nr(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(r){Mt(t,a,r)}}function so(t,a){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof s=="function"?t.refCleanup=s(r):s.current=r}}catch(o){Mt(t,a,o)}}function nn(t,a){var s=t.ref,r=t.refCleanup;if(s!==null)if(typeof r=="function")try{r()}catch(o){Mt(t,a,o)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(o){Mt(t,a,o)}else s.current=null}function ef(t){var a=t.type,s=t.memoizedProps,r=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&r.focus();break e;case"img":s.src?r.src=s.src:s.srcSet&&(r.srcset=s.srcSet)}}catch(o){Mt(t,t.return,o)}}function kd(t,a,s){try{var r=t.stateNode;Xb(r,t.type,s,a),r[Ct]=a}catch(o){Mt(t,t.return,o)}}function tf(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Jn(t.type)||t.tag===4}function Ad(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tf(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Jn(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nd(t,a,s){var r=t.tag;if(r===5||r===6)t=t.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(t),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=Fe));else if(r!==4&&(r===27&&Jn(t.type)&&(s=t.stateNode,a=null),t=t.child,t!==null))for(Nd(t,a,s),t=t.sibling;t!==null;)Nd(t,a,s),t=t.sibling}function yi(t,a,s){var r=t.tag;if(r===5||r===6)t=t.stateNode,a?s.insertBefore(t,a):s.appendChild(t);else if(r!==4&&(r===27&&Jn(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(yi(t,a,s),t=t.sibling;t!==null;)yi(t,a,s),t=t.sibling}function af(t){var a=t.stateNode,s=t.memoizedProps;try{for(var r=t.type,o=a.attributes;o.length;)a.removeAttributeNode(o[0]);La(a,r,s),a[yt]=t,a[Ct]=s}catch(i){Mt(t,t.return,i)}}var _n=!1,xa=!1,Rd=!1,sf=typeof WeakSet=="function"?WeakSet:Set,Na=null;function Nb(t,a){if(t=t.containerInfo,Zd=Li,t=hm(t),jc(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var f=0,j=-1,V=-1,ie=0,_e=0,Ae=t,ce=null;t:for(;;){for(var pe;Ae!==s||o!==0&&Ae.nodeType!==3||(j=f+o),Ae!==i||r!==0&&Ae.nodeType!==3||(V=f+r),Ae.nodeType===3&&(f+=Ae.nodeValue.length),(pe=Ae.firstChild)!==null;)ce=Ae,Ae=pe;for(;;){if(Ae===t)break t;if(ce===s&&++ie===o&&(j=f),ce===i&&++_e===r&&(V=f),(pe=Ae.nextSibling)!==null)break;Ae=ce,ce=Ae.parentNode}Ae=pe}s=j===-1||V===-1?null:{start:j,end:V}}else s=null}s=s||{start:0,end:0}}else s=null;for(Jd={focusedElem:t,selectionRange:s},Li=!1,Na=a;Na!==null;)if(a=Na,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,Na=t;else for(;Na!==null;){switch(a=Na,i=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(s=0;s<t.length;s++)o=t[s],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&i!==null){t=void 0,s=a,o=i.memoizedProps,i=i.memoizedState,r=s.stateNode;try{var He=Nr(s.type,o);t=r.getSnapshotBeforeUpdate(He,i),r.__reactInternalSnapshotBeforeUpdate=t}catch(Je){Mt(s,s.return,Je)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,s=t.nodeType,s===9)eu(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":eu(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(u(163))}if(t=a.sibling,t!==null){t.return=a.return,Na=t;break}Na=a.return}}function nf(t,a,s){var r=s.flags;switch(s.tag){case 0:case 11:case 15:Sn(t,s),r&4&&ao(5,s);break;case 1:if(Sn(t,s),r&4)if(t=s.stateNode,a===null)try{t.componentDidMount()}catch(f){Mt(s,s.return,f)}else{var o=Nr(s.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(o,a,t.__reactInternalSnapshotBeforeUpdate)}catch(f){Mt(s,s.return,f)}}r&64&&Kp(s),r&512&&so(s,s.return);break;case 3:if(Sn(t,s),r&64&&(t=s.updateQueue,t!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{Hm(t,a)}catch(f){Mt(s,s.return,f)}}break;case 27:a===null&&r&4&&af(s);case 26:case 5:Sn(t,s),a===null&&r&4&&ef(s),r&512&&so(s,s.return);break;case 12:Sn(t,s);break;case 31:Sn(t,s),r&4&&of(t,s);break;case 13:Sn(t,s),r&4&&cf(t,s),r&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=Lb.bind(null,s),sv(t,s))));break;case 22:if(r=s.memoizedState!==null||_n,!r){a=a!==null&&a.memoizedState!==null||xa,o=_n;var i=xa;_n=r,(xa=a)&&!i?Cn(t,s,(s.subtreeFlags&8772)!==0):Sn(t,s),_n=o,xa=i}break;case 30:break;default:Sn(t,s)}}function rf(t){var a=t.alternate;a!==null&&(t.alternate=null,rf(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Pt(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Zt=null,rs=!1;function jn(t,a,s){for(s=s.child;s!==null;)lf(t,a,s),s=s.sibling}function lf(t,a,s){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(tt,s)}catch{}switch(s.tag){case 26:xa||nn(s,a),jn(t,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:xa||nn(s,a);var r=Zt,o=rs;Jn(s.type)&&(Zt=s.stateNode,rs=!1),jn(t,a,s),po(s.stateNode),Zt=r,rs=o;break;case 5:xa||nn(s,a);case 6:if(r=Zt,o=rs,Zt=null,jn(t,a,s),Zt=r,rs=o,Zt!==null)if(rs)try{(Zt.nodeType===9?Zt.body:Zt.nodeName==="HTML"?Zt.ownerDocument.body:Zt).removeChild(s.stateNode)}catch(i){Mt(s,a,i)}else try{Zt.removeChild(s.stateNode)}catch(i){Mt(s,a,i)}break;case 18:Zt!==null&&(rs?(t=Zt,Pf(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),vl(t)):Pf(Zt,s.stateNode));break;case 4:r=Zt,o=rs,Zt=s.stateNode.containerInfo,rs=!0,jn(t,a,s),Zt=r,rs=o;break;case 0:case 11:case 14:case 15:Yn(2,s,a),xa||Yn(4,s,a),jn(t,a,s);break;case 1:xa||(nn(s,a),r=s.stateNode,typeof r.componentWillUnmount=="function"&&Pp(s,a,r)),jn(t,a,s);break;case 21:jn(t,a,s);break;case 22:xa=(r=xa)||s.memoizedState!==null,jn(t,a,s),xa=r;break;default:jn(t,a,s)}}function of(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{vl(t)}catch(s){Mt(a,a.return,s)}}}function cf(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{vl(t)}catch(s){Mt(a,a.return,s)}}function Rb(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new sf),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new sf),a;default:throw Error(u(435,t.tag))}}function bi(t,a){var s=Rb(t);a.forEach(function(r){if(!s.has(r)){s.add(r);var o=Ib.bind(null,t,r);r.then(o,o)}})}function ls(t,a){var s=a.deletions;if(s!==null)for(var r=0;r<s.length;r++){var o=s[r],i=t,f=a,j=f;e:for(;j!==null;){switch(j.tag){case 27:if(Jn(j.type)){Zt=j.stateNode,rs=!1;break e}break;case 5:Zt=j.stateNode,rs=!1;break e;case 3:case 4:Zt=j.stateNode.containerInfo,rs=!0;break e}j=j.return}if(Zt===null)throw Error(u(160));lf(i,f,o),Zt=null,rs=!1,i=o.alternate,i!==null&&(i.return=null),o.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)df(a,t),a=a.sibling}var Qs=null;function df(t,a){var s=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ls(a,t),os(t),r&4&&(Yn(3,t,t.return),ao(3,t),Yn(5,t,t.return));break;case 1:ls(a,t),os(t),r&512&&(xa||s===null||nn(s,s.return)),r&64&&_n&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?r:s.concat(r))));break;case 26:var o=Qs;if(ls(a,t),os(t),r&512&&(xa||s===null||nn(s,s.return)),r&4){var i=s!==null?s.memoizedState:null;if(r=t.memoizedState,s===null)if(r===null)if(t.stateNode===null){e:{r=t.type,s=t.memoizedProps,o=o.ownerDocument||o;t:switch(r){case"title":i=o.getElementsByTagName("title")[0],(!i||i[ya]||i[yt]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=o.createElement(r),o.head.insertBefore(i,o.querySelector("head > title"))),La(i,r,s),i[yt]=t,xt(i),r=i;break e;case"link":var f=dh("link","href",o).get(r+(s.href||""));if(f){for(var j=0;j<f.length;j++)if(i=f[j],i.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&i.getAttribute("rel")===(s.rel==null?null:s.rel)&&i.getAttribute("title")===(s.title==null?null:s.title)&&i.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){f.splice(j,1);break t}}i=o.createElement(r),La(i,r,s),o.head.appendChild(i);break;case"meta":if(f=dh("meta","content",o).get(r+(s.content||""))){for(j=0;j<f.length;j++)if(i=f[j],i.getAttribute("content")===(s.content==null?null:""+s.content)&&i.getAttribute("name")===(s.name==null?null:s.name)&&i.getAttribute("property")===(s.property==null?null:s.property)&&i.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&i.getAttribute("charset")===(s.charSet==null?null:s.charSet)){f.splice(j,1);break t}}i=o.createElement(r),La(i,r,s),o.head.appendChild(i);break;default:throw Error(u(468,r))}i[yt]=t,xt(i),r=i}t.stateNode=r}else uh(o,t.type,t.stateNode);else t.stateNode=ch(o,r,t.memoizedProps);else i!==r?(i===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):i.count--,r===null?uh(o,t.type,t.stateNode):ch(o,r,t.memoizedProps)):r===null&&t.stateNode!==null&&kd(t,t.memoizedProps,s.memoizedProps)}break;case 27:ls(a,t),os(t),r&512&&(xa||s===null||nn(s,s.return)),s!==null&&r&4&&kd(t,t.memoizedProps,s.memoizedProps);break;case 5:if(ls(a,t),os(t),r&512&&(xa||s===null||nn(s,s.return)),t.flags&32){o=t.stateNode;try{ss(o,"")}catch(He){Mt(t,t.return,He)}}r&4&&t.stateNode!=null&&(o=t.memoizedProps,kd(t,o,s!==null?s.memoizedProps:o)),r&1024&&(Rd=!0);break;case 6:if(ls(a,t),os(t),r&4){if(t.stateNode===null)throw Error(u(162));r=t.memoizedProps,s=t.stateNode;try{s.nodeValue=r}catch(He){Mt(t,t.return,He)}}break;case 3:if(Ei=null,o=Qs,Qs=Bi(a.containerInfo),ls(a,t),Qs=o,os(t),r&4&&s!==null&&s.memoizedState.isDehydrated)try{vl(a.containerInfo)}catch(He){Mt(t,t.return,He)}Rd&&(Rd=!1,uf(t));break;case 4:r=Qs,Qs=Bi(t.stateNode.containerInfo),ls(a,t),os(t),Qs=r;break;case 12:ls(a,t),os(t);break;case 31:ls(a,t),os(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,bi(t,r)));break;case 13:ls(a,t),os(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(gi=Te()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,bi(t,r)));break;case 22:o=t.memoizedState!==null;var V=s!==null&&s.memoizedState!==null,ie=_n,_e=xa;if(_n=ie||o,xa=_e||V,ls(a,t),xa=_e,_n=ie,os(t),r&8192)e:for(a=t.stateNode,a._visibility=o?a._visibility&-2:a._visibility|1,o&&(s===null||V||_n||xa||Rr(t)),s=null,a=t;;){if(a.tag===5||a.tag===26){if(s===null){V=s=a;try{if(i=V.stateNode,o)f=i.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{j=V.stateNode;var Ae=V.memoizedProps.style,ce=Ae!=null&&Ae.hasOwnProperty("display")?Ae.display:null;j.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(He){Mt(V,V.return,He)}}}else if(a.tag===6){if(s===null){V=a;try{V.stateNode.nodeValue=o?"":V.memoizedProps}catch(He){Mt(V,V.return,He)}}}else if(a.tag===18){if(s===null){V=a;try{var pe=V.stateNode;o?eh(pe,!0):eh(V.stateNode,!1)}catch(He){Mt(V,V.return,He)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}r&4&&(r=t.updateQueue,r!==null&&(s=r.retryQueue,s!==null&&(r.retryQueue=null,bi(t,s))));break;case 19:ls(a,t),os(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,bi(t,r)));break;case 30:break;case 21:break;default:ls(a,t),os(t)}}function os(t){var a=t.flags;if(a&2){try{for(var s,r=t.return;r!==null;){if(tf(r)){s=r;break}r=r.return}if(s==null)throw Error(u(160));switch(s.tag){case 27:var o=s.stateNode,i=Ad(t);yi(t,i,o);break;case 5:var f=s.stateNode;s.flags&32&&(ss(f,""),s.flags&=-33);var j=Ad(t);yi(t,j,f);break;case 3:case 4:var V=s.stateNode.containerInfo,ie=Ad(t);Nd(t,ie,V);break;default:throw Error(u(161))}}catch(_e){Mt(t,t.return,_e)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function uf(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;uf(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function Sn(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)nf(t,a.alternate,a),a=a.sibling}function Rr(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:Yn(4,a,a.return),Rr(a);break;case 1:nn(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&Pp(a,a.return,s),Rr(a);break;case 27:po(a.stateNode);case 26:case 5:nn(a,a.return),Rr(a);break;case 22:a.memoizedState===null&&Rr(a);break;case 30:Rr(a);break;default:Rr(a)}t=t.sibling}}function Cn(t,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var r=a.alternate,o=t,i=a,f=i.flags;switch(i.tag){case 0:case 11:case 15:Cn(o,i,s),ao(4,i);break;case 1:if(Cn(o,i,s),r=i,o=r.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(ie){Mt(r,r.return,ie)}if(r=i,o=r.updateQueue,o!==null){var j=r.stateNode;try{var V=o.shared.hiddenCallbacks;if(V!==null)for(o.shared.hiddenCallbacks=null,o=0;o<V.length;o++)Fm(V[o],j)}catch(ie){Mt(r,r.return,ie)}}s&&f&64&&Kp(i),so(i,i.return);break;case 27:af(i);case 26:case 5:Cn(o,i,s),s&&r===null&&f&4&&ef(i),so(i,i.return);break;case 12:Cn(o,i,s);break;case 31:Cn(o,i,s),s&&f&4&&of(o,i);break;case 13:Cn(o,i,s),s&&f&4&&cf(o,i);break;case 22:i.memoizedState===null&&Cn(o,i,s),so(i,i.return);break;case 30:break;default:Cn(o,i,s)}a=a.sibling}}function Md(t,a){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&$l(s))}function Bd(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&$l(t))}function Xs(t,a,s,r){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)mf(t,a,s,r),a=a.sibling}function mf(t,a,s,r){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Xs(t,a,s,r),o&2048&&ao(9,a);break;case 1:Xs(t,a,s,r);break;case 3:Xs(t,a,s,r),o&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&$l(t)));break;case 12:if(o&2048){Xs(t,a,s,r),t=a.stateNode;try{var i=a.memoizedProps,f=i.id,j=i.onPostCommit;typeof j=="function"&&j(f,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(V){Mt(a,a.return,V)}}else Xs(t,a,s,r);break;case 31:Xs(t,a,s,r);break;case 13:Xs(t,a,s,r);break;case 23:break;case 22:i=a.stateNode,f=a.alternate,a.memoizedState!==null?i._visibility&2?Xs(t,a,s,r):no(t,a):i._visibility&2?Xs(t,a,s,r):(i._visibility|=2,ol(t,a,s,r,(a.subtreeFlags&10256)!==0||!1)),o&2048&&Md(f,a);break;case 24:Xs(t,a,s,r),o&2048&&Bd(a.alternate,a);break;default:Xs(t,a,s,r)}}function ol(t,a,s,r,o){for(o=o&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var i=t,f=a,j=s,V=r,ie=f.flags;switch(f.tag){case 0:case 11:case 15:ol(i,f,j,V,o),ao(8,f);break;case 23:break;case 22:var _e=f.stateNode;f.memoizedState!==null?_e._visibility&2?ol(i,f,j,V,o):no(i,f):(_e._visibility|=2,ol(i,f,j,V,o)),o&&ie&2048&&Md(f.alternate,f);break;case 24:ol(i,f,j,V,o),o&&ie&2048&&Bd(f.alternate,f);break;default:ol(i,f,j,V,o)}a=a.sibling}}function no(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=t,r=a,o=r.flags;switch(r.tag){case 22:no(s,r),o&2048&&Md(r.alternate,r);break;case 24:no(s,r),o&2048&&Bd(r.alternate,r);break;default:no(s,r)}a=a.sibling}}var ro=8192;function il(t,a,s){if(t.subtreeFlags&ro)for(t=t.child;t!==null;)pf(t,a,s),t=t.sibling}function pf(t,a,s){switch(t.tag){case 26:il(t,a,s),t.flags&ro&&t.memoizedState!==null&&hv(s,Qs,t.memoizedState,t.memoizedProps);break;case 5:il(t,a,s);break;case 3:case 4:var r=Qs;Qs=Bi(t.stateNode.containerInfo),il(t,a,s),Qs=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=ro,ro=16777216,il(t,a,s),ro=r):il(t,a,s));break;default:il(t,a,s)}}function ff(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function lo(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var r=a[s];Na=r,yf(r,t)}ff(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)hf(t),t=t.sibling}function hf(t){switch(t.tag){case 0:case 11:case 15:lo(t),t.flags&2048&&Yn(9,t,t.return);break;case 3:lo(t);break;case 12:lo(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,vi(t)):lo(t);break;default:lo(t)}}function vi(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var r=a[s];Na=r,yf(r,t)}ff(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:Yn(8,a,a.return),vi(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,vi(a));break;default:vi(a)}t=t.sibling}}function yf(t,a){for(;Na!==null;){var s=Na;switch(s.tag){case 0:case 11:case 15:Yn(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var r=s.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:$l(s.memoizedState.cache)}if(r=s.child,r!==null)r.return=s,Na=r;else e:for(s=t;Na!==null;){r=Na;var o=r.sibling,i=r.return;if(rf(r),r===s){Na=null;break e}if(o!==null){o.return=i,Na=o;break e}Na=i}}}var Mb={getCacheForType:function(t){var a=Da(ba),s=a.data.get(t);return s===void 0&&(s=t(),a.data.set(t,s)),s},cacheSignal:function(){return Da(ba).controller.signal}},Bb=typeof WeakMap=="function"?WeakMap:Map,wt=0,Lt=null,dt=null,pt=0,Rt=0,_s=null,Wn=!1,cl=!1,Td=!1,wn=0,oa=0,Vn=0,Mr=0,Ed=0,js=0,dl=0,oo=null,is=null,zd=!1,gi=0,bf=0,xi=1/0,_i=null,Gn=null,Ca=0,Qn=null,ul=null,kn=0,Dd=0,Od=null,vf=null,io=0,Ld=null;function Ss(){return(wt&2)!==0&&pt!==0?pt&-pt:S.T!==null?$d():ms()}function gf(){if(js===0)if((pt&536870912)===0||bt){var t=ht;ht<<=1,(ht&3932160)===0&&(ht=262144),js=t}else js=536870912;return t=gs.current,t!==null&&(t.flags|=32),js}function cs(t,a,s){(t===Lt&&(Rt===2||Rt===9)||t.cancelPendingCommit!==null)&&(ml(t,0),Xn(t,pt,js,!1)),$t(t,s),((wt&2)===0||t!==Lt)&&(t===Lt&&((wt&2)===0&&(Mr|=s),oa===4&&Xn(t,pt,js,!1)),rn(t))}function xf(t,a,s){if((wt&6)!==0)throw Error(u(327));var r=!s&&(a&127)===0&&(a&t.expiredLanes)===0||it(t,a),o=r?zb(t,a):Ud(t,a,!0),i=r;do{if(o===0){cl&&!r&&Xn(t,a,0,!1);break}else{if(s=t.current.alternate,i&&!Tb(s)){o=Ud(t,a,!1),i=!1;continue}if(o===2){if(i=a,t.errorRecoveryDisabledLanes&i)var f=0;else f=t.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){a=f;e:{var j=t;o=oo;var V=j.current.memoizedState.isDehydrated;if(V&&(ml(j,f).flags|=256),f=Ud(j,f,!1),f!==2){if(Td&&!V){j.errorRecoveryDisabledLanes|=i,Mr|=i,o=4;break e}i=is,is=o,i!==null&&(is===null?is=i:is.push.apply(is,i))}o=f}if(i=!1,o!==2)continue}}if(o===1){ml(t,0),Xn(t,a,0,!0);break}e:{switch(r=t,i=o,i){case 0:case 1:throw Error(u(345));case 4:if((a&4194048)!==a)break;case 6:Xn(r,a,js,!Wn);break e;case 2:is=null;break;case 3:case 5:break;default:throw Error(u(329))}if((a&62914560)===a&&(o=gi+300-Te(),10<o)){if(Xn(r,a,js,!Wn),Sa(r,0,!0)!==0)break e;kn=a,r.timeoutHandle=Jf(_f.bind(null,r,s,is,_i,zd,a,js,Mr,dl,Wn,i,"Throttled",-0,0),o);break e}_f(r,s,is,_i,zd,a,js,Mr,dl,Wn,i,null,-0,0)}}break}while(!0);rn(t)}function _f(t,a,s,r,o,i,f,j,V,ie,_e,Ae,ce,pe){if(t.timeoutHandle=-1,Ae=a.subtreeFlags,Ae&8192||(Ae&16785408)===16785408){Ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fe},pf(a,i,Ae);var He=(i&62914560)===i?gi-Te():(i&4194048)===i?bf-Te():0;if(He=yv(Ae,He),He!==null){kn=i,t.cancelPendingCommit=He(Rf.bind(null,t,a,i,s,r,o,f,j,V,_e,Ae,null,ce,pe)),Xn(t,i,f,!ie);return}}Rf(t,a,i,s,r,o,f,j,V)}function Tb(t){for(var a=t;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var r=0;r<s.length;r++){var o=s[r],i=o.getSnapshot;o=o.value;try{if(!bs(i(),o))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Xn(t,a,s,r){a&=~Ed,a&=~Mr,t.suspendedLanes|=a,t.pingedLanes&=~a,r&&(t.warmLanes|=a),r=t.expirationTimes;for(var o=a;0<o;){var i=31-kt(o),f=1<<i;r[i]=-1,o&=~f}s!==0&&Ut(t,s,a)}function ji(){return(wt&6)===0?(co(0),!1):!0}function Id(){if(dt!==null){if(Rt===0)var t=dt.return;else t=dt,hn=_r=null,ed(t),al=null,Wl=0,t=dt;for(;t!==null;)Jp(t.alternate,t),t=t.return;dt=null}}function ml(t,a){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,Kb(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),kn=0,Id(),Lt=t,dt=s=pn(t.current,null),pt=a,Rt=0,_s=null,Wn=!1,cl=it(t,a),Td=!1,dl=js=Ed=Mr=Vn=oa=0,is=oo=null,zd=!1,(a&8)!==0&&(a|=a&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=a;0<r;){var o=31-kt(r),i=1<<o;a|=t[o],r&=~i}return wn=a,$o(),s}function jf(t,a){ot=null,S.H=Pl,a===tl||a===Jo?(a=Lm(),Rt=3):a===Hc?(a=Lm(),Rt=4):Rt=a===yd?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,_s=a,dt===null&&(oa=1,ui(t,Bs(a,t.current)))}function Sf(){var t=gs.current;return t===null?!0:(pt&4194048)===pt?Ds===null:(pt&62914560)===pt||(pt&536870912)!==0?t===Ds:!1}function Cf(){var t=S.H;return S.H=Pl,t===null?Pl:t}function wf(){var t=S.A;return S.A=Mb,t}function Si(){oa=4,Wn||(pt&4194048)!==pt&&gs.current!==null||(cl=!0),(Vn&134217727)===0&&(Mr&134217727)===0||Lt===null||Xn(Lt,pt,js,!1)}function Ud(t,a,s){var r=wt;wt|=2;var o=Cf(),i=wf();(Lt!==t||pt!==a)&&(_i=null,ml(t,a)),a=!1;var f=oa;e:do try{if(Rt!==0&&dt!==null){var j=dt,V=_s;switch(Rt){case 8:Id(),f=6;break e;case 3:case 2:case 9:case 6:gs.current===null&&(a=!0);var ie=Rt;if(Rt=0,_s=null,pl(t,j,V,ie),s&&cl){f=0;break e}break;default:ie=Rt,Rt=0,_s=null,pl(t,j,V,ie)}}Eb(),f=oa;break}catch(_e){jf(t,_e)}while(!0);return a&&t.shellSuspendCounter++,hn=_r=null,wt=r,S.H=o,S.A=i,dt===null&&(Lt=null,pt=0,$o()),f}function Eb(){for(;dt!==null;)kf(dt)}function zb(t,a){var s=wt;wt|=2;var r=Cf(),o=wf();Lt!==t||pt!==a?(_i=null,xi=Te()+500,ml(t,a)):cl=it(t,a);e:do try{if(Rt!==0&&dt!==null){a=dt;var i=_s;t:switch(Rt){case 1:Rt=0,_s=null,pl(t,a,i,1);break;case 2:case 9:if(Dm(i)){Rt=0,_s=null,Af(a);break}a=function(){Rt!==2&&Rt!==9||Lt!==t||(Rt=7),rn(t)},i.then(a,a);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:Dm(i)?(Rt=0,_s=null,Af(a)):(Rt=0,_s=null,pl(t,a,i,7));break;case 5:var f=null;switch(dt.tag){case 26:f=dt.memoizedState;case 5:case 27:var j=dt;if(f?mh(f):j.stateNode.complete){Rt=0,_s=null;var V=j.sibling;if(V!==null)dt=V;else{var ie=j.return;ie!==null?(dt=ie,Ci(ie)):dt=null}break t}}Rt=0,_s=null,pl(t,a,i,5);break;case 6:Rt=0,_s=null,pl(t,a,i,6);break;case 8:Id(),oa=6;break e;default:throw Error(u(462))}}Db();break}catch(_e){jf(t,_e)}while(!0);return hn=_r=null,S.H=r,S.A=o,wt=s,dt!==null?0:(Lt=null,pt=0,$o(),oa)}function Db(){for(;dt!==null&&!we();)kf(dt)}function kf(t){var a=Xp(t.alternate,t,wn);t.memoizedProps=t.pendingProps,a===null?Ci(t):dt=a}function Af(t){var a=t,s=a.alternate;switch(a.tag){case 15:case 0:a=$p(s,a,a.pendingProps,a.type,void 0,pt);break;case 11:a=$p(s,a,a.pendingProps,a.type.render,a.ref,pt);break;case 5:ed(a);default:Jp(s,a),a=dt=Cm(a,wn),a=Xp(s,a,wn)}t.memoizedProps=t.pendingProps,a===null?Ci(t):dt=a}function pl(t,a,s,r){hn=_r=null,ed(a),al=null,Wl=0;var o=a.return;try{if(Sb(t,o,a,s,pt)){oa=1,ui(t,Bs(s,t.current)),dt=null;return}}catch(i){if(o!==null)throw dt=o,i;oa=1,ui(t,Bs(s,t.current)),dt=null;return}a.flags&32768?(bt||r===1?t=!0:cl||(pt&536870912)!==0?t=!1:(Wn=t=!0,(r===2||r===9||r===3||r===6)&&(r=gs.current,r!==null&&r.tag===13&&(r.flags|=16384))),Nf(a,t)):Ci(a)}function Ci(t){var a=t;do{if((a.flags&32768)!==0){Nf(a,Wn);return}t=a.return;var s=kb(a.alternate,a,wn);if(s!==null){dt=s;return}if(a=a.sibling,a!==null){dt=a;return}dt=a=t}while(a!==null);oa===0&&(oa=5)}function Nf(t,a){do{var s=Ab(t.alternate,t);if(s!==null){s.flags&=32767,dt=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(t=t.sibling,t!==null)){dt=t;return}dt=t=s}while(t!==null);oa=6,dt=null}function Rf(t,a,s,r,o,i,f,j,V){t.cancelPendingCommit=null;do wi();while(Ca!==0);if((wt&6)!==0)throw Error(u(327));if(a!==null){if(a===t.current)throw Error(u(177));if(i=a.lanes|a.childLanes,i|=Ac,Ma(t,s,i,f,j,V),t===Lt&&(dt=Lt=null,pt=0),ul=a,Qn=t,kn=s,Dd=i,Od=o,vf=r,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Ub(Ee,function(){return zf(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||r){r=S.T,S.T=null,o=L.p,L.p=2,f=wt,wt|=4;try{Nb(t,a,s)}finally{wt=f,L.p=o,S.T=r}}Ca=1,Mf(),Bf(),Tf()}}function Mf(){if(Ca===1){Ca=0;var t=Qn,a=ul,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=S.T,S.T=null;var r=L.p;L.p=2;var o=wt;wt|=4;try{df(a,t);var i=Jd,f=hm(t.containerInfo),j=i.focusedElem,V=i.selectionRange;if(f!==j&&j&&j.ownerDocument&&fm(j.ownerDocument.documentElement,j)){if(V!==null&&jc(j)){var ie=V.start,_e=V.end;if(_e===void 0&&(_e=ie),"selectionStart"in j)j.selectionStart=ie,j.selectionEnd=Math.min(_e,j.value.length);else{var Ae=j.ownerDocument||document,ce=Ae&&Ae.defaultView||window;if(ce.getSelection){var pe=ce.getSelection(),He=j.textContent.length,Je=Math.min(V.start,He),zt=V.end===void 0?Je:Math.min(V.end,He);!pe.extend&&Je>zt&&(f=zt,zt=Je,Je=f);var se=pm(j,Je),K=pm(j,zt);if(se&&K&&(pe.rangeCount!==1||pe.anchorNode!==se.node||pe.anchorOffset!==se.offset||pe.focusNode!==K.node||pe.focusOffset!==K.offset)){var oe=Ae.createRange();oe.setStart(se.node,se.offset),pe.removeAllRanges(),Je>zt?(pe.addRange(oe),pe.extend(K.node,K.offset)):(oe.setEnd(K.node,K.offset),pe.addRange(oe))}}}}for(Ae=[],pe=j;pe=pe.parentNode;)pe.nodeType===1&&Ae.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<Ae.length;j++){var Se=Ae[j];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}Li=!!Zd,Jd=Zd=null}finally{wt=o,L.p=r,S.T=s}}t.current=a,Ca=2}}function Bf(){if(Ca===2){Ca=0;var t=Qn,a=ul,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=S.T,S.T=null;var r=L.p;L.p=2;var o=wt;wt|=4;try{nf(t,a.alternate,a)}finally{wt=o,L.p=r,S.T=s}}Ca=3}}function Tf(){if(Ca===4||Ca===3){Ca=0,ke();var t=Qn,a=ul,s=kn,r=vf;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ca=5:(Ca=0,ul=Qn=null,Ef(t,t.pendingLanes));var o=t.pendingLanes;if(o===0&&(Gn=null),$a(s),a=a.stateNode,Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(tt,a,void 0,(a.current.flags&128)===128)}catch{}if(r!==null){a=S.T,o=L.p,L.p=2,S.T=null;try{for(var i=t.onRecoverableError,f=0;f<r.length;f++){var j=r[f];i(j.value,{componentStack:j.stack})}}finally{S.T=a,L.p=o}}(kn&3)!==0&&wi(),rn(t),o=t.pendingLanes,(s&261930)!==0&&(o&42)!==0?t===Ld?io++:(io=0,Ld=t):io=0,co(0)}}function Ef(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,$l(a)))}function wi(){return Mf(),Bf(),Tf(),zf()}function zf(){if(Ca!==5)return!1;var t=Qn,a=Dd;Dd=0;var s=$a(kn),r=S.T,o=L.p;try{L.p=32>s?32:s,S.T=null,s=Od,Od=null;var i=Qn,f=kn;if(Ca=0,ul=Qn=null,kn=0,(wt&6)!==0)throw Error(u(331));var j=wt;if(wt|=4,hf(i.current),mf(i,i.current,f,s),wt=j,co(0,!1),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(tt,i)}catch{}return!0}finally{L.p=o,S.T=r,Ef(t,a)}}function Df(t,a,s){a=Bs(s,a),a=hd(t.stateNode,a,2),t=Fn(t,a,2),t!==null&&($t(t,2),rn(t))}function Mt(t,a,s){if(t.tag===3)Df(t,t,s);else for(;a!==null;){if(a.tag===3){Df(a,t,s);break}else if(a.tag===1){var r=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gn===null||!Gn.has(r))){t=Bs(s,t),s=Dp(2),r=Fn(a,s,2),r!==null&&(Op(s,r,a,t),$t(r,2),rn(r));break}}a=a.return}}function qd(t,a,s){var r=t.pingCache;if(r===null){r=t.pingCache=new Bb;var o=new Set;r.set(a,o)}else o=r.get(a),o===void 0&&(o=new Set,r.set(a,o));o.has(s)||(Td=!0,o.add(s),t=Ob.bind(null,t,a,s),a.then(t,t))}function Ob(t,a,s){var r=t.pingCache;r!==null&&r.delete(a),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,Lt===t&&(pt&s)===s&&(oa===4||oa===3&&(pt&62914560)===pt&&300>Te()-gi?(wt&2)===0&&ml(t,0):Ed|=s,dl===pt&&(dl=0)),rn(t)}function Of(t,a){a===0&&(a=Ra()),t=vr(t,a),t!==null&&($t(t,a),rn(t))}function Lb(t){var a=t.memoizedState,s=0;a!==null&&(s=a.retryLane),Of(t,s)}function Ib(t,a){var s=0;switch(t.tag){case 31:case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(s=o.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(u(314))}r!==null&&r.delete(a),Of(t,s)}function Ub(t,a){return X(t,a)}var ki=null,fl=null,Fd=!1,Ai=!1,Hd=!1,Zn=0;function rn(t){t!==fl&&t.next===null&&(fl===null?ki=fl=t:fl=fl.next=t),Ai=!0,Fd||(Fd=!0,Fb())}function co(t,a){if(!Hd&&Ai){Hd=!0;do for(var s=!1,r=ki;r!==null;){if(t!==0){var o=r.pendingLanes;if(o===0)var i=0;else{var f=r.suspendedLanes,j=r.pingedLanes;i=(1<<31-kt(42|t)+1)-1,i&=o&~(f&~j),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(s=!0,qf(r,i))}else i=pt,i=Sa(r,r===Lt?i:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(i&3)===0||it(r,i)||(s=!0,qf(r,i));r=r.next}while(s);Hd=!1}}function qb(){Lf()}function Lf(){Ai=Fd=!1;var t=0;Zn!==0&&Jb()&&(t=Zn);for(var a=Te(),s=null,r=ki;r!==null;){var o=r.next,i=If(r,a);i===0?(r.next=null,s===null?ki=o:s.next=o,o===null&&(fl=s)):(s=r,(t!==0||(i&3)!==0)&&(Ai=!0)),r=o}Ca!==0&&Ca!==5||co(t),Zn!==0&&(Zn=0)}function If(t,a){for(var s=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,i=t.pendingLanes&-62914561;0<i;){var f=31-kt(i),j=1<<f,V=o[f];V===-1?((j&s)===0||(j&r)!==0)&&(o[f]=Ht(j,a)):V<=a&&(t.expiredLanes|=j),i&=~j}if(a=Lt,s=pt,s=Sa(t,t===a?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,s===0||t===a&&(Rt===2||Rt===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&J(r),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||it(t,s)){if(a=s&-s,a===t.callbackPriority)return a;switch(r!==null&&J(r),$a(s)){case 2:case 8:s=de;break;case 32:s=Ee;break;case 268435456:s=Ie;break;default:s=Ee}return r=Uf.bind(null,t),s=X(s,r),t.callbackPriority=a,t.callbackNode=s,a}return r!==null&&r!==null&&J(r),t.callbackPriority=2,t.callbackNode=null,2}function Uf(t,a){if(Ca!==0&&Ca!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(wi()&&t.callbackNode!==s)return null;var r=pt;return r=Sa(t,t===Lt?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(xf(t,r,a),If(t,Te()),t.callbackNode!=null&&t.callbackNode===s?Uf.bind(null,t):null)}function qf(t,a){if(wi())return null;xf(t,a,!0)}function Fb(){Pb(function(){(wt&6)!==0?X(A,qb):Lf()})}function $d(){if(Zn===0){var t=Pr;t===0&&(t=ja,ja<<=1,(ja&261888)===0&&(ja=256)),Zn=t}return Zn}function Ff(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ve(""+t)}function Hf(t,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,t.id&&s.setAttribute("form",t.id),a.parentNode.insertBefore(s,a),t=new FormData(t),s.parentNode.removeChild(s),t}function Hb(t,a,s,r,o){if(a==="submit"&&s&&s.stateNode===o){var i=Ff((o[Ct]||null).action),f=r.submitter;f&&(a=(a=f[Ct]||null)?Ff(a.formAction):f.getAttribute("formAction"),a!==null&&(i=a,f=null));var j=new Ur("action","action",null,r,o);t.push({event:j,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Zn!==0){var V=f?Hf(o,f):new FormData(o);cd(s,{pending:!0,data:V,method:o.method,action:i},null,V)}}else typeof i=="function"&&(j.preventDefault(),V=f?Hf(o,f):new FormData(o),cd(s,{pending:!0,data:V,method:o.method,action:i},i,V))},currentTarget:o}]})}}for(var Yd=0;Yd<kc.length;Yd++){var Wd=kc[Yd],$b=Wd.toLowerCase(),Yb=Wd[0].toUpperCase()+Wd.slice(1);Gs($b,"on"+Yb)}Gs(vm,"onAnimationEnd"),Gs(gm,"onAnimationIteration"),Gs(xm,"onAnimationStart"),Gs("dblclick","onDoubleClick"),Gs("focusin","onFocus"),Gs("focusout","onBlur"),Gs(lb,"onTransitionRun"),Gs(ob,"onTransitionStart"),Gs(ib,"onTransitionCancel"),Gs(_m,"onTransitionEnd"),ta("onMouseEnter",["mouseout","mouseover"]),ta("onMouseLeave",["mouseout","mouseover"]),ta("onPointerEnter",["pointerout","pointerover"]),ta("onPointerLeave",["pointerout","pointerover"]),Ua("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ua("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ua("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ua("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ua("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ua("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(uo));function $f(t,a){a=(a&4)!==0;for(var s=0;s<t.length;s++){var r=t[s],o=r.event;r=r.listeners;e:{var i=void 0;if(a)for(var f=r.length-1;0<=f;f--){var j=r[f],V=j.instance,ie=j.currentTarget;if(j=j.listener,V!==i&&o.isPropagationStopped())break e;i=j,o.currentTarget=ie;try{i(o)}catch(_e){Ho(_e)}o.currentTarget=null,i=V}else for(f=0;f<r.length;f++){if(j=r[f],V=j.instance,ie=j.currentTarget,j=j.listener,V!==i&&o.isPropagationStopped())break e;i=j,o.currentTarget=ie;try{i(o)}catch(_e){Ho(_e)}o.currentTarget=null,i=V}}}}function ut(t,a){var s=a[ha];s===void 0&&(s=a[ha]=new Set);var r=t+"__bubble";s.has(r)||(Yf(a,t,2,!1),s.add(r))}function Vd(t,a,s){var r=0;a&&(r|=4),Yf(s,t,r,a)}var Ni="_reactListening"+Math.random().toString(36).slice(2);function Gd(t){if(!t[Ni]){t[Ni]=!0,Ta.forEach(function(s){s!=="selectionchange"&&(Wb.has(s)||Vd(s,!1,t),Vd(s,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[Ni]||(a[Ni]=!0,Vd("selectionchange",!1,a))}}function Yf(t,a,s,r){switch(gh(a)){case 2:var o=gv;break;case 8:o=xv;break;default:o=iu}s=o.bind(null,a,s,t),o=void 0,!Tl||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(a,s,{capture:!0,passive:o}):t.addEventListener(a,s,!0):o!==void 0?t.addEventListener(a,s,{passive:o}):t.addEventListener(a,s,!1)}function Qd(t,a,s,r,o){var i=r;if((a&1)===0&&(a&2)===0&&r!==null)e:for(;;){if(r===null)return;var f=r.tag;if(f===3||f===4){var j=r.stateNode.containerInfo;if(j===o)break;if(f===4)for(f=r.return;f!==null;){var V=f.tag;if((V===3||V===4)&&f.stateNode.containerInfo===o)return;f=f.return}for(;j!==null;){if(f=ia(j),f===null)return;if(V=f.tag,V===5||V===6||V===26||V===27){r=i=f;continue e}j=j.parentNode}}r=r.return}or(function(){var ie=i,_e=ca(s),Ae=[];e:{var ce=jm.get(t);if(ce!==void 0){var pe=Ur,He=t;switch(t){case"keypress":if(Ir(s)===0)break e;case"keydown":case"keyup":pe=Uo;break;case"focusin":He="focus",pe=Hr;break;case"focusout":He="blur",pe=Hr;break;case"beforeblur":case"afterblur":pe=Hr;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=zo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=fc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=Ue;break;case vm:case gm:case xm:pe=pr;break;case _m:pe=rt;break;case"scroll":case"scrollend":pe=Dl;break;case"wheel":pe=ys;break;case"copy":case"cut":case"paste":pe=hc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=M;break;case"toggle":case"beforetoggle":pe=fr}var Je=(a&4)!==0,zt=!Je&&(t==="scroll"||t==="scrollend"),se=Je?ce!==null?ce+"Capture":null:ce;Je=[];for(var K=ie,oe;K!==null;){var Se=K;if(oe=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||oe===null||se===null||(Se=dn(K,se),Se!=null&&Je.push(mo(K,Se,oe))),zt)break;K=K.return}0<Je.length&&(ce=new pe(ce,He,null,s,_e),Ae.push({event:ce,listeners:Je}))}}if((a&7)===0){e:{if(ce=t==="mouseover"||t==="pointerover",pe=t==="mouseout"||t==="pointerout",ce&&s!==Nt&&(He=s.relatedTarget||s.fromElement)&&(ia(He)||He[Kt]))break e;if((pe||ce)&&(ce=_e.window===_e?_e:(ce=_e.ownerDocument)?ce.defaultView||ce.parentWindow:window,pe?(He=s.relatedTarget||s.toElement,pe=ie,He=He?ia(He):null,He!==null&&(zt=p(He),Je=He.tag,He!==zt||Je!==5&&Je!==27&&Je!==6)&&(He=null)):(pe=null,He=ie),pe!==He)){if(Je=zo,Se="onMouseLeave",se="onMouseEnter",K="mouse",(t==="pointerout"||t==="pointerover")&&(Je=M,Se="onPointerLeave",se="onPointerEnter",K="pointer"),zt=pe==null?ce:ea(pe),oe=He==null?ce:ea(He),ce=new Je(Se,K+"leave",pe,s,_e),ce.target=zt,ce.relatedTarget=oe,Se=null,ia(_e)===ie&&(Je=new Je(se,K+"enter",He,s,_e),Je.target=oe,Je.relatedTarget=zt,Se=Je),zt=Se,pe&&He)t:{for(Je=Vb,se=pe,K=He,oe=0,Se=se;Se;Se=Je(Se))oe++;Se=0;for(var Xe=K;Xe;Xe=Je(Xe))Se++;for(;0<oe-Se;)se=Je(se),oe--;for(;0<Se-oe;)K=Je(K),Se--;for(;oe--;){if(se===K||K!==null&&se===K.alternate){Je=se;break t}se=Je(se),K=Je(K)}Je=null}else Je=null;pe!==null&&Wf(Ae,ce,pe,Je,!1),He!==null&&zt!==null&&Wf(Ae,zt,He,Je,!0)}}e:{if(ce=ie?ea(ie):window,pe=ce.nodeName&&ce.nodeName.toLowerCase(),pe==="select"||pe==="input"&&ce.type==="file")var _t=om;else if(rm(ce))if(im)_t=sb;else{_t=tb;var Ye=eb}else pe=ce.nodeName,!pe||pe.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?ie&&q(ie.elementType)&&(_t=om):_t=ab;if(_t&&(_t=_t(t,ie))){lm(Ae,_t,s,_e);break e}Ye&&Ye(t,ce,ie),t==="focusout"&&ie&&ce.type==="number"&&ie.memoizedProps.value!=null&&ka(ce,"number",ce.value)}switch(Ye=ie?ea(ie):window,t){case"focusin":(rm(Ye)||Ye.contentEditable==="true")&&(Wr=Ye,Sc=ie,ql=null);break;case"focusout":ql=Sc=Wr=null;break;case"mousedown":Cc=!0;break;case"contextmenu":case"mouseup":case"dragend":Cc=!1,ym(Ae,s,_e);break;case"selectionchange":if(rb)break;case"keydown":case"keyup":ym(Ae,s,_e)}var ct;if(ns)e:{switch(t){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else Yr?sm(t,s)&&(ft="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(ft="onCompositionStart");ft&&(em&&s.locale!=="ko"&&(Yr||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&Yr&&(ct=cr()):(hs=_e,El="value"in hs?hs.value:hs.textContent,Yr=!0)),Ye=Ri(ie,ft),0<Ye.length&&(ft=new Oo(ft,t,null,s,_e),Ae.push({event:ft,listeners:Ye}),ct?ft.data=ct:(ct=nm(s),ct!==null&&(ft.data=ct)))),(ct=Xy?Zy(t,s):Jy(t,s))&&(ft=Ri(ie,"onBeforeInput"),0<ft.length&&(Ye=new Oo("onBeforeInput","beforeinput",null,s,_e),Ae.push({event:Ye,listeners:ft}),Ye.data=ct)),Hb(Ae,t,ie,s,_e)}$f(Ae,a)})}function mo(t,a,s){return{instance:t,listener:a,currentTarget:s}}function Ri(t,a){for(var s=a+"Capture",r=[];t!==null;){var o=t,i=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||i===null||(o=dn(t,s),o!=null&&r.unshift(mo(t,o,i)),o=dn(t,a),o!=null&&r.push(mo(t,o,i))),t.tag===3)return r;t=t.return}return[]}function Vb(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Wf(t,a,s,r,o){for(var i=a._reactName,f=[];s!==null&&s!==r;){var j=s,V=j.alternate,ie=j.stateNode;if(j=j.tag,V!==null&&V===r)break;j!==5&&j!==26&&j!==27||ie===null||(V=ie,o?(ie=dn(s,i),ie!=null&&f.unshift(mo(s,ie,V))):o||(ie=dn(s,i),ie!=null&&f.push(mo(s,ie,V)))),s=s.return}f.length!==0&&t.push({event:a,listeners:f})}var Gb=/\r\n?/g,Qb=/\u0000|\uFFFD/g;function Vf(t){return(typeof t=="string"?t:""+t).replace(Gb,`
`).replace(Qb,"")}function Gf(t,a){return a=Vf(a),Vf(t)===a}function Et(t,a,s,r,o,i){switch(s){case"children":typeof r=="string"?a==="body"||a==="textarea"&&r===""||ss(t,r):(typeof r=="number"||typeof r=="bigint")&&a!=="body"&&ss(t,""+r);break;case"className":Ya(t,"class",r);break;case"tabIndex":Ya(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Ya(t,s,r);break;case"style":Ws(t,r,i);break;case"data":if(a!=="object"){Ya(t,"data",r);break}case"src":case"href":if(r===""&&(a!=="a"||s!=="href")){t.removeAttribute(s);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(s);break}r=ve(""+r),t.setAttribute(s,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(s==="formAction"?(a!=="input"&&Et(t,a,"name",o.name,o,null),Et(t,a,"formEncType",o.formEncType,o,null),Et(t,a,"formMethod",o.formMethod,o,null),Et(t,a,"formTarget",o.formTarget,o,null)):(Et(t,a,"encType",o.encType,o,null),Et(t,a,"method",o.method,o,null),Et(t,a,"target",o.target,o,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(s);break}r=ve(""+r),t.setAttribute(s,r);break;case"onClick":r!=null&&(t.onclick=Fe);break;case"onScroll":r!=null&&ut("scroll",t);break;case"onScrollEnd":r!=null&&ut("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(u(61));if(s=r.__html,s!=null){if(o.children!=null)throw Error(u(60));t.innerHTML=s}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}s=ve(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(s,""+r):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":r===!0?t.setAttribute(s,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(s,r):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(s,r):t.removeAttribute(s);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(s):t.setAttribute(s,r);break;case"popover":ut("beforetoggle",t),ut("toggle",t),gt(t,"popover",r);break;case"xlinkActuate":na(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":na(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":na(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":na(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":na(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":na(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":na(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":na(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":na(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":gt(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=v.get(s)||s,gt(t,s,r))}}function Xd(t,a,s,r,o,i){switch(s){case"style":Ws(t,r,i);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(u(61));if(s=r.__html,s!=null){if(o.children!=null)throw Error(u(60));t.innerHTML=s}}break;case"children":typeof r=="string"?ss(t,r):(typeof r=="number"||typeof r=="bigint")&&ss(t,""+r);break;case"onScroll":r!=null&&ut("scroll",t);break;case"onScrollEnd":r!=null&&ut("scrollend",t);break;case"onClick":r!=null&&(t.onclick=Fe);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ea.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(o=s.endsWith("Capture"),a=s.slice(2,o?s.length-7:void 0),i=t[Ct]||null,i=i!=null?i[s]:null,typeof i=="function"&&t.removeEventListener(a,i,o),typeof r=="function")){typeof i!="function"&&i!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(a,r,o);break e}s in t?t[s]=r:r===!0?t.setAttribute(s,""):gt(t,s,r)}}}function La(t,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",t),ut("load",t);var r=!1,o=!1,i;for(i in s)if(s.hasOwnProperty(i)){var f=s[i];if(f!=null)switch(i){case"src":r=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,a));default:Et(t,a,i,f,s,null)}}o&&Et(t,a,"srcSet",s.srcSet,s,null),r&&Et(t,a,"src",s.src,s,null);return;case"input":ut("invalid",t);var j=i=f=o=null,V=null,ie=null;for(r in s)if(s.hasOwnProperty(r)){var _e=s[r];if(_e!=null)switch(r){case"name":o=_e;break;case"type":f=_e;break;case"checked":V=_e;break;case"defaultChecked":ie=_e;break;case"value":i=_e;break;case"defaultValue":j=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(u(137,a));break;default:Et(t,a,r,_e,s,null)}}qt(t,i,j,V,ie,f,o,!1);return;case"select":ut("invalid",t),r=f=i=null;for(o in s)if(s.hasOwnProperty(o)&&(j=s[o],j!=null))switch(o){case"value":i=j;break;case"defaultValue":f=j;break;case"multiple":r=j;default:Et(t,a,o,j,s,null)}a=i,s=f,t.multiple=!!r,a!=null?Aa(t,!!r,a,!1):s!=null&&Aa(t,!!r,s,!0);return;case"textarea":ut("invalid",t),i=o=r=null;for(f in s)if(s.hasOwnProperty(f)&&(j=s[f],j!=null))switch(f){case"value":r=j;break;case"defaultValue":o=j;break;case"children":i=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(u(91));break;default:Et(t,a,f,j,s,null)}ra(t,r,o,i);return;case"option":for(V in s)if(s.hasOwnProperty(V)&&(r=s[V],r!=null))switch(V){case"selected":t.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:Et(t,a,V,r,s,null)}return;case"dialog":ut("beforetoggle",t),ut("toggle",t),ut("cancel",t),ut("close",t);break;case"iframe":case"object":ut("load",t);break;case"video":case"audio":for(r=0;r<uo.length;r++)ut(uo[r],t);break;case"image":ut("error",t),ut("load",t);break;case"details":ut("toggle",t);break;case"embed":case"source":case"link":ut("error",t),ut("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in s)if(s.hasOwnProperty(ie)&&(r=s[ie],r!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,a));default:Et(t,a,ie,r,s,null)}return;default:if(q(a)){for(_e in s)s.hasOwnProperty(_e)&&(r=s[_e],r!==void 0&&Xd(t,a,_e,r,s,void 0));return}}for(j in s)s.hasOwnProperty(j)&&(r=s[j],r!=null&&Et(t,a,j,r,s,null))}function Xb(t,a,s,r){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,i=null,f=null,j=null,V=null,ie=null,_e=null;for(pe in s){var Ae=s[pe];if(s.hasOwnProperty(pe)&&Ae!=null)switch(pe){case"checked":break;case"value":break;case"defaultValue":V=Ae;default:r.hasOwnProperty(pe)||Et(t,a,pe,null,r,Ae)}}for(var ce in r){var pe=r[ce];if(Ae=s[ce],r.hasOwnProperty(ce)&&(pe!=null||Ae!=null))switch(ce){case"type":i=pe;break;case"name":o=pe;break;case"checked":ie=pe;break;case"defaultChecked":_e=pe;break;case"value":f=pe;break;case"defaultValue":j=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(u(137,a));break;default:pe!==Ae&&Et(t,a,ce,pe,r,Ae)}}et(t,f,j,V,ie,_e,i,o);return;case"select":pe=f=j=ce=null;for(i in s)if(V=s[i],s.hasOwnProperty(i)&&V!=null)switch(i){case"value":break;case"multiple":pe=V;default:r.hasOwnProperty(i)||Et(t,a,i,null,r,V)}for(o in r)if(i=r[o],V=s[o],r.hasOwnProperty(o)&&(i!=null||V!=null))switch(o){case"value":ce=i;break;case"defaultValue":j=i;break;case"multiple":f=i;default:i!==V&&Et(t,a,o,i,r,V)}a=j,s=f,r=pe,ce!=null?Aa(t,!!s,ce,!1):!!r!=!!s&&(a!=null?Aa(t,!!s,a,!0):Aa(t,!!s,s?[]:"",!1));return;case"textarea":pe=ce=null;for(j in s)if(o=s[j],s.hasOwnProperty(j)&&o!=null&&!r.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:Et(t,a,j,null,r,o)}for(f in r)if(o=r[f],i=s[f],r.hasOwnProperty(f)&&(o!=null||i!=null))switch(f){case"value":ce=o;break;case"defaultValue":pe=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(u(91));break;default:o!==i&&Et(t,a,f,o,r,i)}as(t,ce,pe);return;case"option":for(var He in s)if(ce=s[He],s.hasOwnProperty(He)&&ce!=null&&!r.hasOwnProperty(He))switch(He){case"selected":t.selected=!1;break;default:Et(t,a,He,null,r,ce)}for(V in r)if(ce=r[V],pe=s[V],r.hasOwnProperty(V)&&ce!==pe&&(ce!=null||pe!=null))switch(V){case"selected":t.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:Et(t,a,V,ce,r,pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Je in s)ce=s[Je],s.hasOwnProperty(Je)&&ce!=null&&!r.hasOwnProperty(Je)&&Et(t,a,Je,null,r,ce);for(ie in r)if(ce=r[ie],pe=s[ie],r.hasOwnProperty(ie)&&ce!==pe&&(ce!=null||pe!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(u(137,a));break;default:Et(t,a,ie,ce,r,pe)}return;default:if(q(a)){for(var zt in s)ce=s[zt],s.hasOwnProperty(zt)&&ce!==void 0&&!r.hasOwnProperty(zt)&&Xd(t,a,zt,void 0,r,ce);for(_e in r)ce=r[_e],pe=s[_e],!r.hasOwnProperty(_e)||ce===pe||ce===void 0&&pe===void 0||Xd(t,a,_e,ce,r,pe);return}}for(var se in s)ce=s[se],s.hasOwnProperty(se)&&ce!=null&&!r.hasOwnProperty(se)&&Et(t,a,se,null,r,ce);for(Ae in r)ce=r[Ae],pe=s[Ae],!r.hasOwnProperty(Ae)||ce===pe||ce==null&&pe==null||Et(t,a,Ae,ce,r,pe)}function Qf(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Zb(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,s=performance.getEntriesByType("resource"),r=0;r<s.length;r++){var o=s[r],i=o.transferSize,f=o.initiatorType,j=o.duration;if(i&&j&&Qf(f)){for(f=0,j=o.responseEnd,r+=1;r<s.length;r++){var V=s[r],ie=V.startTime;if(ie>j)break;var _e=V.transferSize,Ae=V.initiatorType;_e&&Qf(Ae)&&(V=V.responseEnd,f+=_e*(V<j?1:(j-ie)/(V-ie)))}if(--r,a+=8*(i+f)/(o.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Zd=null,Jd=null;function Mi(t){return t.nodeType===9?t:t.ownerDocument}function Xf(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zf(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function Kd(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Pd=null;function Jb(){var t=window.event;return t&&t.type==="popstate"?t===Pd?!1:(Pd=t,!0):(Pd=null,!1)}var Jf=typeof setTimeout=="function"?setTimeout:void 0,Kb=typeof clearTimeout=="function"?clearTimeout:void 0,Kf=typeof Promise=="function"?Promise:void 0,Pb=typeof queueMicrotask=="function"?queueMicrotask:typeof Kf<"u"?function(t){return Kf.resolve(null).then(t).catch(ev)}:Jf;function ev(t){setTimeout(function(){throw t})}function Jn(t){return t==="head"}function Pf(t,a){var s=a,r=0;do{var o=s.nextSibling;if(t.removeChild(s),o&&o.nodeType===8)if(s=o.data,s==="/$"||s==="/&"){if(r===0){t.removeChild(o),vl(a);return}r--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")r++;else if(s==="html")po(t.ownerDocument.documentElement);else if(s==="head"){s=t.ownerDocument.head,po(s);for(var i=s.firstChild;i;){var f=i.nextSibling,j=i.nodeName;i[ya]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&i.rel.toLowerCase()==="stylesheet"||s.removeChild(i),i=f}}else s==="body"&&po(t.ownerDocument.body);s=o}while(s);vl(a)}function eh(t,a){var s=t;t=0;do{var r=s.nextSibling;if(s.nodeType===1?a?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(a?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(t===0)break;t--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||t++;s=r}while(s)}function eu(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":eu(s),Pt(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function tv(t,a,s,r){for(;t.nodeType===1;){var o=s;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[ya])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(i=t.getAttribute("rel"),i==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(i!==o.rel||t.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||t.getAttribute("title")!==(o.title==null?null:o.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(i=t.getAttribute("src"),(i!==(o.src==null?null:o.src)||t.getAttribute("type")!==(o.type==null?null:o.type)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&i&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var i=o.name==null?null:""+o.name;if(o.type==="hidden"&&t.getAttribute("name")===i)return t}else return t;if(t=Os(t.nextSibling),t===null)break}return null}function av(t,a,s){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Os(t.nextSibling),t===null))return null;return t}function th(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Os(t.nextSibling),t===null))return null;return t}function tu(t){return t.data==="$?"||t.data==="$~"}function au(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function sv(t,a){var s=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||s.readyState!=="loading")a();else{var r=function(){a(),s.removeEventListener("DOMContentLoaded",r)};s.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function Os(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var su=null;function ah(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"||s==="/&"){if(a===0)return Os(t.nextSibling);a--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||a++}t=t.nextSibling}return null}function sh(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(a===0)return t;a--}else s!=="/$"&&s!=="/&"||a++}t=t.previousSibling}return null}function nh(t,a,s){switch(a=Mi(s),t){case"html":if(t=a.documentElement,!t)throw Error(u(452));return t;case"head":if(t=a.head,!t)throw Error(u(453));return t;case"body":if(t=a.body,!t)throw Error(u(454));return t;default:throw Error(u(451))}}function po(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Pt(t)}var Ls=new Map,rh=new Set;function Bi(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var An=L.d;L.d={f:nv,r:rv,D:lv,C:ov,L:iv,m:cv,X:uv,S:dv,M:mv};function nv(){var t=An.f(),a=ji();return t||a}function rv(t){var a=sa(t);a!==null&&a.tag===5&&a.type==="form"?_p(a):An.r(t)}var hl=typeof document>"u"?null:document;function lh(t,a,s){var r=hl;if(r&&typeof a=="string"&&a){var o=Le(a);o='link[rel="'+t+'"][href="'+o+'"]',typeof s=="string"&&(o+='[crossorigin="'+s+'"]'),rh.has(o)||(rh.add(o),t={rel:t,crossOrigin:s,href:a},r.querySelector(o)===null&&(a=r.createElement("link"),La(a,"link",t),xt(a),r.head.appendChild(a)))}}function lv(t){An.D(t),lh("dns-prefetch",t,null)}function ov(t,a){An.C(t,a),lh("preconnect",t,a)}function iv(t,a,s){An.L(t,a,s);var r=hl;if(r&&t&&a){var o='link[rel="preload"][as="'+Le(a)+'"]';a==="image"&&s&&s.imageSrcSet?(o+='[imagesrcset="'+Le(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(o+='[imagesizes="'+Le(s.imageSizes)+'"]')):o+='[href="'+Le(t)+'"]';var i=o;switch(a){case"style":i=yl(t);break;case"script":i=bl(t)}Ls.has(i)||(t=_({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:t,as:a},s),Ls.set(i,t),r.querySelector(o)!==null||a==="style"&&r.querySelector(fo(i))||a==="script"&&r.querySelector(ho(i))||(a=r.createElement("link"),La(a,"link",t),xt(a),r.head.appendChild(a)))}}function cv(t,a){An.m(t,a);var s=hl;if(s&&t){var r=a&&typeof a.as=="string"?a.as:"script",o='link[rel="modulepreload"][as="'+Le(r)+'"][href="'+Le(t)+'"]',i=o;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=bl(t)}if(!Ls.has(i)&&(t=_({rel:"modulepreload",href:t},a),Ls.set(i,t),s.querySelector(o)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(ho(i)))return}r=s.createElement("link"),La(r,"link",t),xt(r),s.head.appendChild(r)}}}function dv(t,a,s){An.S(t,a,s);var r=hl;if(r&&t){var o=Yt(r).hoistableStyles,i=yl(t);a=a||"default";var f=o.get(i);if(!f){var j={loading:0,preload:null};if(f=r.querySelector(fo(i)))j.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":a},s),(s=Ls.get(i))&&nu(t,s);var V=f=r.createElement("link");xt(V),La(V,"link",t),V._p=new Promise(function(ie,_e){V.onload=ie,V.onerror=_e}),V.addEventListener("load",function(){j.loading|=1}),V.addEventListener("error",function(){j.loading|=2}),j.loading|=4,Ti(f,a,r)}f={type:"stylesheet",instance:f,count:1,state:j},o.set(i,f)}}}function uv(t,a){An.X(t,a);var s=hl;if(s&&t){var r=Yt(s).hoistableScripts,o=bl(t),i=r.get(o);i||(i=s.querySelector(ho(o)),i||(t=_({src:t,async:!0},a),(a=Ls.get(o))&&ru(t,a),i=s.createElement("script"),xt(i),La(i,"link",t),s.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(o,i))}}function mv(t,a){An.M(t,a);var s=hl;if(s&&t){var r=Yt(s).hoistableScripts,o=bl(t),i=r.get(o);i||(i=s.querySelector(ho(o)),i||(t=_({src:t,async:!0,type:"module"},a),(a=Ls.get(o))&&ru(t,a),i=s.createElement("script"),xt(i),La(i,"link",t),s.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(o,i))}}function oh(t,a,s,r){var o=(o=be.current)?Bi(o):null;if(!o)throw Error(u(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=yl(s.href),s=Yt(o).hoistableStyles,r=s.get(a),r||(r={type:"style",instance:null,count:0,state:null},s.set(a,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=yl(s.href);var i=Yt(o).hoistableStyles,f=i.get(t);if(f||(o=o.ownerDocument||o,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(t,f),(i=o.querySelector(fo(t)))&&!i._p&&(f.instance=i,f.state.loading=5),Ls.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Ls.set(t,s),i||pv(o,t,s,f.state))),a&&r===null)throw Error(u(528,""));return f}if(a&&r!==null)throw Error(u(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=bl(s),s=Yt(o).hoistableScripts,r=s.get(a),r||(r={type:"script",instance:null,count:0,state:null},s.set(a,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,t))}}function yl(t){return'href="'+Le(t)+'"'}function fo(t){return'link[rel="stylesheet"]['+t+"]"}function ih(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function pv(t,a,s,r){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?r.loading=1:(a=t.createElement("link"),r.preload=a,a.addEventListener("load",function(){return r.loading|=1}),a.addEventListener("error",function(){return r.loading|=2}),La(a,"link",s),xt(a),t.head.appendChild(a))}function bl(t){return'[src="'+Le(t)+'"]'}function ho(t){return"script[async]"+t}function ch(t,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var r=t.querySelector('style[data-href~="'+Le(s.href)+'"]');if(r)return a.instance=r,xt(r),r;var o=_({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),xt(r),La(r,"style",o),Ti(r,s.precedence,t),a.instance=r;case"stylesheet":o=yl(s.href);var i=t.querySelector(fo(o));if(i)return a.state.loading|=4,a.instance=i,xt(i),i;r=ih(s),(o=Ls.get(o))&&nu(r,o),i=(t.ownerDocument||t).createElement("link"),xt(i);var f=i;return f._p=new Promise(function(j,V){f.onload=j,f.onerror=V}),La(i,"link",r),a.state.loading|=4,Ti(i,s.precedence,t),a.instance=i;case"script":return i=bl(s.src),(o=t.querySelector(ho(i)))?(a.instance=o,xt(o),o):(r=s,(o=Ls.get(i))&&(r=_({},s),ru(r,o)),t=t.ownerDocument||t,o=t.createElement("script"),xt(o),La(o,"link",r),t.head.appendChild(o),a.instance=o);case"void":return null;default:throw Error(u(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(r=a.instance,a.state.loading|=4,Ti(r,s.precedence,t));return a.instance}function Ti(t,a,s){for(var r=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=r.length?r[r.length-1]:null,i=o,f=0;f<r.length;f++){var j=r[f];if(j.dataset.precedence===a)i=j;else if(i!==o)break}i?i.parentNode.insertBefore(t,i.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(t,a.firstChild))}function nu(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function ru(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var Ei=null;function dh(t,a,s){if(Ei===null){var r=new Map,o=Ei=new Map;o.set(s,r)}else o=Ei,r=o.get(s),r||(r=new Map,o.set(s,r));if(r.has(t))return r;for(r.set(t,null),s=s.getElementsByTagName(t),o=0;o<s.length;o++){var i=s[o];if(!(i[ya]||i[yt]||t==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var f=i.getAttribute(a)||"";f=t+f;var j=r.get(f);j?j.push(i):r.set(f,[i])}}return r}function uh(t,a,s){t=t.ownerDocument||t,t.head.insertBefore(s,a==="title"?t.querySelector("head > title"):null)}function fv(t,a,s){if(s===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return t=a.disabled,typeof a.precedence=="string"&&t==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function mh(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function hv(t,a,s,r){if(s.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var o=yl(r.href),i=a.querySelector(fo(o));if(i){a=i._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=zi.bind(t),a.then(t,t)),s.state.loading|=4,s.instance=i,xt(i);return}i=a.ownerDocument||a,r=ih(r),(o=Ls.get(o))&&nu(r,o),i=i.createElement("link"),xt(i);var f=i;f._p=new Promise(function(j,V){f.onload=j,f.onerror=V}),La(i,"link",r),s.instance=i}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(s,a),(a=s.state.preload)&&(s.state.loading&3)===0&&(t.count++,s=zi.bind(t),a.addEventListener("load",s),a.addEventListener("error",s))}}var lu=0;function yv(t,a){return t.stylesheets&&t.count===0&&Oi(t,t.stylesheets),0<t.count||0<t.imgCount?function(s){var r=setTimeout(function(){if(t.stylesheets&&Oi(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4+a);0<t.imgBytes&&lu===0&&(lu=62500*Zb());var o=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Oi(t,t.stylesheets),t.unsuspend)){var i=t.unsuspend;t.unsuspend=null,i()}},(t.imgBytes>lu?50:800)+a);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(r),clearTimeout(o)}}:null}function zi(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Oi(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Di=null;function Oi(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Di=new Map,a.forEach(bv,t),Di=null,zi.call(t))}function bv(t,a){if(!(a.state.loading&4)){var s=Di.get(t);if(s)var r=s.get(null);else{s=new Map,Di.set(t,s);for(var o=t.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<o.length;i++){var f=o[i];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(s.set(f.dataset.precedence,f),r=f)}r&&s.set(null,r)}o=a.instance,f=o.getAttribute("data-precedence"),i=s.get(f)||r,i===r&&s.set(null,o),s.set(f,o),this.count++,r=zi.bind(this),o.addEventListener("load",r),o.addEventListener("error",r),i?i.parentNode.insertBefore(o,i.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(o,t.firstChild)),a.state.loading|=4}}var yo={$$typeof:E,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function vv(t,a,s,r,o,i,f,j,V){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wa(0),this.hiddenUpdates=wa(null),this.identifierPrefix=r,this.onUncaughtError=o,this.onCaughtError=i,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function ph(t,a,s,r,o,i,f,j,V,ie,_e,Ae){return t=new vv(t,a,s,f,V,ie,_e,Ae,j),a=1,i===!0&&(a|=24),i=vs(3,null,null,a),t.current=i,i.stateNode=t,a=Uc(),a.refCount++,t.pooledCache=a,a.refCount++,i.memoizedState={element:r,isDehydrated:s,cache:a},$c(i),t}function fh(t){return t?(t=Qr,t):Qr}function hh(t,a,s,r,o,i){o=fh(o),r.context===null?r.context=o:r.pendingContext=o,r=qn(a),r.payload={element:s},i=i===void 0?null:i,i!==null&&(r.callback=i),s=Fn(t,r,a),s!==null&&(cs(s,t,a),Gl(s,t,a))}function yh(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<a?s:a}}function ou(t,a){yh(t,a),(t=t.alternate)&&yh(t,a)}function bh(t){if(t.tag===13||t.tag===31){var a=vr(t,67108864);a!==null&&cs(a,t,67108864),ou(t,67108864)}}function vh(t){if(t.tag===13||t.tag===31){var a=Ss();a=fa(a);var s=vr(t,a);s!==null&&cs(s,t,a),ou(t,a)}}var Li=!0;function gv(t,a,s,r){var o=S.T;S.T=null;var i=L.p;try{L.p=2,iu(t,a,s,r)}finally{L.p=i,S.T=o}}function xv(t,a,s,r){var o=S.T;S.T=null;var i=L.p;try{L.p=8,iu(t,a,s,r)}finally{L.p=i,S.T=o}}function iu(t,a,s,r){if(Li){var o=cu(r);if(o===null)Qd(t,a,r,Ii,s),xh(t,r);else if(jv(o,t,a,s,r))r.stopPropagation();else if(xh(t,r),a&4&&-1<_v.indexOf(t)){for(;o!==null;){var i=sa(o);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var f=pa(i.pendingLanes);if(f!==0){var j=i;for(j.pendingLanes|=2,j.entangledLanes|=2;f;){var V=1<<31-kt(f);j.entanglements[1]|=V,f&=~V}rn(i),(wt&6)===0&&(xi=Te()+500,co(0))}}break;case 31:case 13:j=vr(i,2),j!==null&&cs(j,i,2),ji(),ou(i,2)}if(i=cu(r),i===null&&Qd(t,a,r,Ii,s),i===o)break;o=i}o!==null&&r.stopPropagation()}else Qd(t,a,r,null,s)}}function cu(t){return t=ca(t),du(t)}var Ii=null;function du(t){if(Ii=null,t=ia(t),t!==null){var a=p(t);if(a===null)t=null;else{var s=a.tag;if(s===13){if(t=h(a),t!==null)return t;t=null}else if(s===31){if(t=g(a),t!==null)return t;t=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return Ii=t,null}function gh(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(z()){case A:return 2;case de:return 8;case Ee:case Oe:return 32;case Ie:return 268435456;default:return 32}default:return 32}}var uu=!1,Kn=null,Pn=null,er=null,bo=new Map,vo=new Map,tr=[],_v="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xh(t,a){switch(t){case"focusin":case"focusout":Kn=null;break;case"dragenter":case"dragleave":Pn=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":bo.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":vo.delete(a.pointerId)}}function go(t,a,s,r,o,i){return t===null||t.nativeEvent!==i?(t={blockedOn:a,domEventName:s,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},a!==null&&(a=sa(a),a!==null&&bh(a)),t):(t.eventSystemFlags|=r,a=t.targetContainers,o!==null&&a.indexOf(o)===-1&&a.push(o),t)}function jv(t,a,s,r,o){switch(a){case"focusin":return Kn=go(Kn,t,a,s,r,o),!0;case"dragenter":return Pn=go(Pn,t,a,s,r,o),!0;case"mouseover":return er=go(er,t,a,s,r,o),!0;case"pointerover":var i=o.pointerId;return bo.set(i,go(bo.get(i)||null,t,a,s,r,o)),!0;case"gotpointercapture":return i=o.pointerId,vo.set(i,go(vo.get(i)||null,t,a,s,r,o)),!0}return!1}function _h(t){var a=ia(t.target);if(a!==null){var s=p(a);if(s!==null){if(a=s.tag,a===13){if(a=h(s),a!==null){t.blockedOn=a,Ba(t.priority,function(){vh(s)});return}}else if(a===31){if(a=g(s),a!==null){t.blockedOn=a,Ba(t.priority,function(){vh(s)});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ui(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var s=cu(t.nativeEvent);if(s===null){s=t.nativeEvent;var r=new s.constructor(s.type,s);Nt=r,s.target.dispatchEvent(r),Nt=null}else return a=sa(s),a!==null&&bh(a),t.blockedOn=s,!1;a.shift()}return!0}function jh(t,a,s){Ui(t)&&s.delete(a)}function Sv(){uu=!1,Kn!==null&&Ui(Kn)&&(Kn=null),Pn!==null&&Ui(Pn)&&(Pn=null),er!==null&&Ui(er)&&(er=null),bo.forEach(jh),vo.forEach(jh)}function qi(t,a){t.blockedOn===a&&(t.blockedOn=null,uu||(uu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Sv)))}var Fi=null;function Sh(t){Fi!==t&&(Fi=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Fi===t&&(Fi=null);for(var a=0;a<t.length;a+=3){var s=t[a],r=t[a+1],o=t[a+2];if(typeof r!="function"){if(du(r||s)===null)continue;break}var i=sa(s);i!==null&&(t.splice(a,3),a-=3,cd(i,{pending:!0,data:o,method:s.method,action:r},r,o))}}))}function vl(t){function a(V){return qi(V,t)}Kn!==null&&qi(Kn,t),Pn!==null&&qi(Pn,t),er!==null&&qi(er,t),bo.forEach(a),vo.forEach(a);for(var s=0;s<tr.length;s++){var r=tr[s];r.blockedOn===t&&(r.blockedOn=null)}for(;0<tr.length&&(s=tr[0],s.blockedOn===null);)_h(s),s.blockedOn===null&&tr.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(r=0;r<s.length;r+=3){var o=s[r],i=s[r+1],f=o[Ct]||null;if(typeof i=="function")f||Sh(s);else if(f){var j=null;if(i&&i.hasAttribute("formAction")){if(o=i,f=i[Ct]||null)j=f.formAction;else if(du(o)!==null)continue}else j=f.action;typeof j=="function"?s[r+1]=j:(s.splice(r,3),r-=3),Sh(s)}}}function Ch(){function t(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(f){return o=f})},focusReset:"manual",scroll:"manual"})}function a(){o!==null&&(o(),o=null),r||setTimeout(s,20)}function s(){if(!r&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,o=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(s,100),function(){r=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),o!==null&&(o(),o=null)}}}function mu(t){this._internalRoot=t}Hi.prototype.render=mu.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(u(409));var s=a.current,r=Ss();hh(s,r,t,a,null,null)},Hi.prototype.unmount=mu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;hh(t.current,2,null,t,null,null),ji(),a[Kt]=null}};function Hi(t){this._internalRoot=t}Hi.prototype.unstable_scheduleHydration=function(t){if(t){var a=ms();t={blockedOn:null,target:t,priority:a};for(var s=0;s<tr.length&&a!==0&&a<tr[s].priority;s++);tr.splice(s,0,t),s===0&&_h(t)}};var wh=l.version;if(wh!=="19.2.4")throw Error(u(527,wh,"19.2.4"));L.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(u(188)):(t=Object.keys(t).join(","),Error(u(268,t)));return t=y(a),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var Cv={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:S,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $i=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$i.isDisabled&&$i.supportsFiber)try{tt=$i.inject(Cv),Ot=$i}catch{}}return _o.createRoot=function(t,a){if(!m(t))throw Error(u(299));var s=!1,r="",o=Bp,i=Tp,f=Ep;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(r=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(i=a.onCaughtError),a.onRecoverableError!==void 0&&(f=a.onRecoverableError)),a=ph(t,1,!1,null,null,s,r,null,o,i,f,Ch),t[Kt]=a.current,Gd(t),new mu(a)},_o.hydrateRoot=function(t,a,s){if(!m(t))throw Error(u(299));var r=!1,o="",i=Bp,f=Tp,j=Ep,V=null;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onUncaughtError!==void 0&&(i=s.onUncaughtError),s.onCaughtError!==void 0&&(f=s.onCaughtError),s.onRecoverableError!==void 0&&(j=s.onRecoverableError),s.formState!==void 0&&(V=s.formState)),a=ph(t,1,!0,a,s??null,r,o,V,i,f,j,Ch),a.context=fh(null),s=a.current,r=Ss(),r=fa(r),o=qn(r),o.callback=null,Fn(s,o,r),s=r,a.current.lanes=s,$t(a,s),rn(a),t[Kt]=a.current,Gd(t),new Hi(a)},_o.version="19.2.4",_o}var Dh;function Ev(){if(Dh)return hu.exports;Dh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(l){console.error(l)}}return n(),hu.exports=Tv(),hu.exports}var zv=Ev();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Oh="popstate";function Dv(n={}){function l(u,m){let{pathname:p,search:h,hash:g}=u.location;return Mu("",{pathname:p,search:h,hash:g},m.state&&m.state.usr||null,m.state&&m.state.key||"default")}function d(u,m){return typeof m=="string"?m:Co(m)}return Lv(l,d,null,n)}function Jt(n,l){if(n===!1||n===null||typeof n>"u")throw new Error(l)}function qs(n,l){if(!n){typeof console<"u"&&console.warn(l);try{throw new Error(l)}catch{}}}function Ov(){return Math.random().toString(36).substring(2,10)}function Lh(n,l){return{usr:n.state,key:n.key,idx:l}}function Mu(n,l,d=null,u){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof l=="string"?Nl(l):l,state:d,key:l&&l.key||u||Ov()}}function Co({pathname:n="/",search:l="",hash:d=""}){return l&&l!=="?"&&(n+=l.charAt(0)==="?"?l:"?"+l),d&&d!=="#"&&(n+=d.charAt(0)==="#"?d:"#"+d),n}function Nl(n){let l={};if(n){let d=n.indexOf("#");d>=0&&(l.hash=n.substring(d),n=n.substring(0,d));let u=n.indexOf("?");u>=0&&(l.search=n.substring(u),n=n.substring(0,u)),n&&(l.pathname=n)}return l}function Lv(n,l,d,u={}){let{window:m=document.defaultView,v5Compat:p=!1}=u,h=m.history,g="POP",b=null,y=x();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function x(){return(h.state||{idx:null}).idx}function _(){g="POP";let C=x(),D=C==null?null:C-y;y=C,b&&b({action:g,location:O.location,delta:D})}function N(C,D){g="PUSH";let te=Mu(O.location,C,D);y=x()+1;let E=Lh(te,y),B=O.createHref(te);try{h.pushState(E,"",B)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;m.location.assign(B)}p&&b&&b({action:g,location:O.location,delta:1})}function I(C,D){g="REPLACE";let te=Mu(O.location,C,D);y=x();let E=Lh(te,y),B=O.createHref(te);h.replaceState(E,"",B),p&&b&&b({action:g,location:O.location,delta:0})}function w(C){return Iv(C)}let O={get action(){return g},get location(){return n(m,h)},listen(C){if(b)throw new Error("A history only accepts one active listener");return m.addEventListener(Oh,_),b=C,()=>{m.removeEventListener(Oh,_),b=null}},createHref(C){return l(m,C)},createURL:w,encodeLocation(C){let D=w(C);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:N,replace:I,go(C){return h.go(C)}};return O}function Iv(n,l=!1){let d="http://localhost";typeof window<"u"&&(d=window.location.origin!=="null"?window.location.origin:window.location.href),Jt(d,"No window.location.(origin|href) available to create URL");let u=typeof n=="string"?n:Co(n);return u=u.replace(/ $/,"%20"),!l&&u.startsWith("//")&&(u=d+u),new URL(u,d)}function oy(n,l,d="/"){return Uv(n,l,d,!1)}function Uv(n,l,d,u){let m=typeof l=="string"?Nl(l):l,p=Bn(m.pathname||"/",d);if(p==null)return null;let h=iy(n);qv(h);let g=null;for(let b=0;g==null&&b<h.length;++b){let y=Jv(p);g=Xv(h[b],y,u)}return g}function iy(n,l=[],d=[],u="",m=!1){let p=(h,g,b=m,y)=>{let x={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:g,route:h};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(u)&&b)return;Jt(x.relativePath.startsWith(u),`Absolute route path "${x.relativePath}" nested under path "${u}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(u.length)}let _=Nn([u,x.relativePath]),N=d.concat(x);h.children&&h.children.length>0&&(Jt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),iy(h.children,l,N,_,b)),!(h.path==null&&!h.index)&&l.push({path:_,score:Gv(_,h.index),routesMeta:N})};return n.forEach((h,g)=>{var b;if(h.path===""||!((b=h.path)!=null&&b.includes("?")))p(h,g);else for(let y of cy(h.path))p(h,g,!0,y)}),l}function cy(n){let l=n.split("/");if(l.length===0)return[];let[d,...u]=l,m=d.endsWith("?"),p=d.replace(/\?$/,"");if(u.length===0)return m?[p,""]:[p];let h=cy(u.join("/")),g=[];return g.push(...h.map(b=>b===""?p:[p,b].join("/"))),m&&g.push(...h),g.map(b=>n.startsWith("/")&&b===""?"/":b)}function qv(n){n.sort((l,d)=>l.score!==d.score?d.score-l.score:Qv(l.routesMeta.map(u=>u.childrenIndex),d.routesMeta.map(u=>u.childrenIndex)))}var Fv=/^:[\w-]+$/,Hv=3,$v=2,Yv=1,Wv=10,Vv=-2,Ih=n=>n==="*";function Gv(n,l){let d=n.split("/"),u=d.length;return d.some(Ih)&&(u+=Vv),l&&(u+=$v),d.filter(m=>!Ih(m)).reduce((m,p)=>m+(Fv.test(p)?Hv:p===""?Yv:Wv),u)}function Qv(n,l){return n.length===l.length&&n.slice(0,-1).every((u,m)=>u===l[m])?n[n.length-1]-l[l.length-1]:0}function Xv(n,l,d=!1){let{routesMeta:u}=n,m={},p="/",h=[];for(let g=0;g<u.length;++g){let b=u[g],y=g===u.length-1,x=p==="/"?l:l.slice(p.length)||"/",_=sc({path:b.relativePath,caseSensitive:b.caseSensitive,end:y},x),N=b.route;if(!_&&y&&d&&!u[u.length-1].route.index&&(_=sc({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},x)),!_)return null;Object.assign(m,_.params),h.push({params:m,pathname:Nn([p,_.pathname]),pathnameBase:tg(Nn([p,_.pathnameBase])),route:N}),_.pathnameBase!=="/"&&(p=Nn([p,_.pathnameBase]))}return h}function sc(n,l){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[d,u]=Zv(n.path,n.caseSensitive,n.end),m=l.match(d);if(!m)return null;let p=m[0],h=p.replace(/(.)\/+$/,"$1"),g=m.slice(1);return{params:u.reduce((y,{paramName:x,isOptional:_},N)=>{if(x==="*"){let w=g[N]||"";h=p.slice(0,p.length-w.length).replace(/(.)\/+$/,"$1")}const I=g[N];return _&&!I?y[x]=void 0:y[x]=(I||"").replace(/%2F/g,"/"),y},{}),pathname:p,pathnameBase:h,pattern:n}}function Zv(n,l=!1,d=!0){qs(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let u=[],m="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,g,b)=>(u.push({paramName:g,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(u.push({paramName:"*"}),m+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):d?m+="\\/*$":n!==""&&n!=="/"&&(m+="(?:(?=\\/|$))"),[new RegExp(m,l?void 0:"i"),u]}function Jv(n){try{return n.split("/").map(l=>decodeURIComponent(l).replace(/\//g,"%2F")).join("/")}catch(l){return qs(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${l}).`),n}}function Bn(n,l){if(l==="/")return n;if(!n.toLowerCase().startsWith(l.toLowerCase()))return null;let d=l.endsWith("/")?l.length-1:l.length,u=n.charAt(d);return u&&u!=="/"?null:n.slice(d)||"/"}var Kv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Pv(n,l="/"){let{pathname:d,search:u="",hash:m=""}=typeof n=="string"?Nl(n):n,p;return d?(d=d.replace(/\/\/+/g,"/"),d.startsWith("/")?p=Uh(d.substring(1),"/"):p=Uh(d,l)):p=l,{pathname:p,search:ag(u),hash:sg(m)}}function Uh(n,l){let d=l.replace(/\/+$/,"").split("/");return n.split("/").forEach(m=>{m===".."?d.length>1&&d.pop():m!=="."&&d.push(m)}),d.length>1?d.join("/"):"/"}function gu(n,l,d,u){return`Cannot include a '${n}' character in a manually specified \`to.${l}\` field [${JSON.stringify(u)}].  Please separate it out to the \`to.${d}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function eg(n){return n.filter((l,d)=>d===0||l.route.path&&l.route.path.length>0)}function Hu(n){let l=eg(n);return l.map((d,u)=>u===l.length-1?d.pathname:d.pathnameBase)}function $u(n,l,d,u=!1){let m;typeof n=="string"?m=Nl(n):(m={...n},Jt(!m.pathname||!m.pathname.includes("?"),gu("?","pathname","search",m)),Jt(!m.pathname||!m.pathname.includes("#"),gu("#","pathname","hash",m)),Jt(!m.search||!m.search.includes("#"),gu("#","search","hash",m)));let p=n===""||m.pathname==="",h=p?"/":m.pathname,g;if(h==null)g=d;else{let _=l.length-1;if(!u&&h.startsWith("..")){let N=h.split("/");for(;N[0]==="..";)N.shift(),_-=1;m.pathname=N.join("/")}g=_>=0?l[_]:"/"}let b=Pv(m,g),y=h&&h!=="/"&&h.endsWith("/"),x=(p||h===".")&&d.endsWith("/");return!b.pathname.endsWith("/")&&(y||x)&&(b.pathname+="/"),b}var Nn=n=>n.join("/").replace(/\/\/+/g,"/"),tg=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),ag=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,sg=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,ng=class{constructor(n,l,d,u=!1){this.status=n,this.statusText=l||"",this.internal=u,d instanceof Error?(this.data=d.toString(),this.error=d):this.data=d}};function rg(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function lg(n){return n.map(l=>l.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var dy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function uy(n,l){let d=n;if(typeof d!="string"||!Kv.test(d))return{absoluteURL:void 0,isExternal:!1,to:d};let u=d,m=!1;if(dy)try{let p=new URL(window.location.href),h=d.startsWith("//")?new URL(p.protocol+d):new URL(d),g=Bn(h.pathname,l);h.origin===p.origin&&g!=null?d=g+h.search+h.hash:m=!0}catch{qs(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:u,isExternal:m,to:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var my=["POST","PUT","PATCH","DELETE"];new Set(my);var og=["GET",...my];new Set(og);var Rl=c.createContext(null);Rl.displayName="DataRouter";var oc=c.createContext(null);oc.displayName="DataRouterState";var ig=c.createContext(!1),py=c.createContext({isTransitioning:!1});py.displayName="ViewTransition";var cg=c.createContext(new Map);cg.displayName="Fetchers";var dg=c.createContext(null);dg.displayName="Await";var Cs=c.createContext(null);Cs.displayName="Navigation";var wo=c.createContext(null);wo.displayName="Location";var Fs=c.createContext({outlet:null,matches:[],isDataRoute:!1});Fs.displayName="Route";var Yu=c.createContext(null);Yu.displayName="RouteError";var fy="REACT_ROUTER_ERROR",ug="REDIRECT",mg="ROUTE_ERROR_RESPONSE";function pg(n){if(n.startsWith(`${fy}:${ug}:{`))try{let l=JSON.parse(n.slice(28));if(typeof l=="object"&&l&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.location=="string"&&typeof l.reloadDocument=="boolean"&&typeof l.replace=="boolean")return l}catch{}}function fg(n){if(n.startsWith(`${fy}:${mg}:{`))try{let l=JSON.parse(n.slice(40));if(typeof l=="object"&&l&&typeof l.status=="number"&&typeof l.statusText=="string")return new ng(l.status,l.statusText,l.data)}catch{}}function hg(n,{relative:l}={}){Jt(Ml(),"useHref() may be used only in the context of a <Router> component.");let{basename:d,navigator:u}=c.useContext(Cs),{hash:m,pathname:p,search:h}=ko(n,{relative:l}),g=p;return d!=="/"&&(g=p==="/"?d:Nn([d,p])),u.createHref({pathname:g,search:h,hash:m})}function Ml(){return c.useContext(wo)!=null}function Za(){return Jt(Ml(),"useLocation() may be used only in the context of a <Router> component."),c.useContext(wo).location}var hy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function yy(n){c.useContext(Cs).static||c.useLayoutEffect(n)}function Dt(){let{isDataRoute:n}=c.useContext(Fs);return n?Mg():yg()}function yg(){Jt(Ml(),"useNavigate() may be used only in the context of a <Router> component.");let n=c.useContext(Rl),{basename:l,navigator:d}=c.useContext(Cs),{matches:u}=c.useContext(Fs),{pathname:m}=Za(),p=JSON.stringify(Hu(u)),h=c.useRef(!1);return yy(()=>{h.current=!0}),c.useCallback((b,y={})=>{if(qs(h.current,hy),!h.current)return;if(typeof b=="number"){d.go(b);return}let x=$u(b,JSON.parse(p),m,y.relative==="path");n==null&&l!=="/"&&(x.pathname=x.pathname==="/"?l:Nn([l,x.pathname])),(y.replace?d.replace:d.push)(x,y.state,y)},[l,d,p,m,n])}var bg=c.createContext(null);function vg(n){let l=c.useContext(Fs).outlet;return c.useMemo(()=>l&&c.createElement(bg.Provider,{value:n},l),[l,n])}function Or(){let{matches:n}=c.useContext(Fs),l=n[n.length-1];return l?l.params:{}}function ko(n,{relative:l}={}){let{matches:d}=c.useContext(Fs),{pathname:u}=Za(),m=JSON.stringify(Hu(d));return c.useMemo(()=>$u(n,JSON.parse(m),u,l==="path"),[n,m,u,l])}function gg(n,l){return by(n,l)}function by(n,l,d,u,m){var te;Jt(Ml(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:p}=c.useContext(Cs),{matches:h}=c.useContext(Fs),g=h[h.length-1],b=g?g.params:{},y=g?g.pathname:"/",x=g?g.pathnameBase:"/",_=g&&g.route;{let E=_&&_.path||"";gy(y,!_||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let N=Za(),I;if(l){let E=typeof l=="string"?Nl(l):l;Jt(x==="/"||((te=E.pathname)==null?void 0:te.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${E.pathname}" was given in the \`location\` prop.`),I=E}else I=N;let w=I.pathname||"/",O=w;if(x!=="/"){let E=x.replace(/^\//,"").split("/");O="/"+w.replace(/^\//,"").split("/").slice(E.length).join("/")}let C=oy(n,{pathname:O});qs(_||C!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),qs(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=Cg(C&&C.map(E=>Object.assign({},E,{params:Object.assign({},b,E.params),pathname:Nn([x,p.encodeLocation?p.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?x:Nn([x,p.encodeLocation?p.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),h,d,u,m);return l&&D?c.createElement(wo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},D):D}function xg(){let n=Rg(),l=rg(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),d=n instanceof Error?n.stack:null,u="rgba(200,200,200, 0.5)",m={padding:"0.5rem",backgroundColor:u},p={padding:"2px 4px",backgroundColor:u},h=null;return console.error("Error handled by React Router default ErrorBoundary:",n),h=c.createElement(c.Fragment,null,c.createElement("p",null," Hey developer "),c.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",c.createElement("code",{style:p},"ErrorBoundary")," or"," ",c.createElement("code",{style:p},"errorElement")," prop on your route.")),c.createElement(c.Fragment,null,c.createElement("h2",null,"Unexpected Application Error!"),c.createElement("h3",{style:{fontStyle:"italic"}},l),d?c.createElement("pre",{style:m},d):null,h)}var _g=c.createElement(xg,null),vy=class extends c.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,l){return l.location!==n.location||l.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:l.error,location:l.location,revalidation:n.revalidation||l.revalidation}}componentDidCatch(n,l){this.props.onError?this.props.onError(n,l):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const d=fg(n.digest);d&&(n=d)}let l=n!==void 0?c.createElement(Fs.Provider,{value:this.props.routeContext},c.createElement(Yu.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?c.createElement(jg,{error:n},l):l}};vy.contextType=ig;var xu=new WeakMap;function jg({children:n,error:l}){let{basename:d}=c.useContext(Cs);if(typeof l=="object"&&l&&"digest"in l&&typeof l.digest=="string"){let u=pg(l.digest);if(u){let m=xu.get(l);if(m)throw m;let p=uy(u.location,d);if(dy&&!xu.get(l))if(p.isExternal||u.reloadDocument)window.location.href=p.absoluteURL||p.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(p.to,{replace:u.replace}));throw xu.set(l,h),h}return c.createElement("meta",{httpEquiv:"refresh",content:`0;url=${p.absoluteURL||p.to}`})}}return n}function Sg({routeContext:n,match:l,children:d}){let u=c.useContext(Rl);return u&&u.static&&u.staticContext&&(l.route.errorElement||l.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=l.route.id),c.createElement(Fs.Provider,{value:n},d)}function Cg(n,l=[],d=null,u=null,m=null){if(n==null){if(!d)return null;if(d.errors)n=d.matches;else if(l.length===0&&!d.initialized&&d.matches.length>0)n=d.matches;else return null}let p=n,h=d==null?void 0:d.errors;if(h!=null){let x=p.findIndex(_=>_.route.id&&(h==null?void 0:h[_.route.id])!==void 0);Jt(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),p=p.slice(0,Math.min(p.length,x+1))}let g=!1,b=-1;if(d)for(let x=0;x<p.length;x++){let _=p[x];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(b=x),_.route.id){let{loaderData:N,errors:I}=d,w=_.route.loader&&!N.hasOwnProperty(_.route.id)&&(!I||I[_.route.id]===void 0);if(_.route.lazy||w){g=!0,b>=0?p=p.slice(0,b+1):p=[p[0]];break}}}let y=d&&u?(x,_)=>{var N,I;u(x,{location:d.location,params:((I=(N=d.matches)==null?void 0:N[0])==null?void 0:I.params)??{},unstable_pattern:lg(d.matches),errorInfo:_})}:void 0;return p.reduceRight((x,_,N)=>{let I,w=!1,O=null,C=null;d&&(I=h&&_.route.id?h[_.route.id]:void 0,O=_.route.errorElement||_g,g&&(b<0&&N===0?(gy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,C=null):b===N&&(w=!0,C=_.route.hydrateFallbackElement||null)));let D=l.concat(p.slice(0,N+1)),te=()=>{let E;return I?E=O:w?E=C:_.route.Component?E=c.createElement(_.route.Component,null):_.route.element?E=_.route.element:E=x,c.createElement(Sg,{match:_,routeContext:{outlet:x,matches:D,isDataRoute:d!=null},children:E})};return d&&(_.route.ErrorBoundary||_.route.errorElement||N===0)?c.createElement(vy,{location:d.location,revalidation:d.revalidation,component:O,error:I,children:te(),routeContext:{outlet:null,matches:D,isDataRoute:!0},onError:y}):te()},null)}function Wu(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wg(n){let l=c.useContext(Rl);return Jt(l,Wu(n)),l}function kg(n){let l=c.useContext(oc);return Jt(l,Wu(n)),l}function Ag(n){let l=c.useContext(Fs);return Jt(l,Wu(n)),l}function Vu(n){let l=Ag(n),d=l.matches[l.matches.length-1];return Jt(d.route.id,`${n} can only be used on routes that contain a unique "id"`),d.route.id}function Ng(){return Vu("useRouteId")}function Rg(){var u;let n=c.useContext(Yu),l=kg("useRouteError"),d=Vu("useRouteError");return n!==void 0?n:(u=l.errors)==null?void 0:u[d]}function Mg(){let{router:n}=wg("useNavigate"),l=Vu("useNavigate"),d=c.useRef(!1);return yy(()=>{d.current=!0}),c.useCallback(async(m,p={})=>{qs(d.current,hy),d.current&&(typeof m=="number"?await n.navigate(m):await n.navigate(m,{fromRouteId:l,...p}))},[n,l])}var qh={};function gy(n,l,d){!l&&!qh[n]&&(qh[n]=!0,qs(!1,d))}c.memo(Bg);function Bg({routes:n,future:l,state:d,onError:u}){return by(n,void 0,d,u,l)}function Js({to:n,replace:l,state:d,relative:u}){Jt(Ml(),"<Navigate> may be used only in the context of a <Router> component.");let{static:m}=c.useContext(Cs);qs(!m,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:p}=c.useContext(Fs),{pathname:h}=Za(),g=Dt(),b=$u(n,Hu(p),h,u==="path"),y=JSON.stringify(b);return c.useEffect(()=>{g(JSON.parse(y),{replace:l,state:d,relative:u})},[g,y,u,l,d]),null}function Tg(n){return vg(n.context)}function nt(n){Jt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Eg({basename:n="/",children:l=null,location:d,navigationType:u="POP",navigator:m,static:p=!1,unstable_useTransitions:h}){Jt(!Ml(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let g=n.replace(/^\/*/,"/"),b=c.useMemo(()=>({basename:g,navigator:m,static:p,unstable_useTransitions:h,future:{}}),[g,m,p,h]);typeof d=="string"&&(d=Nl(d));let{pathname:y="/",search:x="",hash:_="",state:N=null,key:I="default"}=d,w=c.useMemo(()=>{let O=Bn(y,g);return O==null?null:{location:{pathname:O,search:x,hash:_,state:N,key:I},navigationType:u}},[g,y,x,_,N,I,u]);return qs(w!=null,`<Router basename="${g}"> is not able to match the URL "${y}${x}${_}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:c.createElement(Cs.Provider,{value:b},c.createElement(wo.Provider,{children:l,value:w}))}function zg({children:n,location:l}){return gg(Bu(n),l)}function Bu(n,l=[]){let d=[];return c.Children.forEach(n,(u,m)=>{if(!c.isValidElement(u))return;let p=[...l,m];if(u.type===c.Fragment){d.push.apply(d,Bu(u.props.children,p));return}Jt(u.type===nt,`[${typeof u.type=="string"?u.type:u.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Jt(!u.props.index||!u.props.children,"An index route cannot have child routes.");let h={id:u.props.id||p.join("-"),caseSensitive:u.props.caseSensitive,element:u.props.element,Component:u.props.Component,index:u.props.index,path:u.props.path,middleware:u.props.middleware,loader:u.props.loader,action:u.props.action,hydrateFallbackElement:u.props.hydrateFallbackElement,HydrateFallback:u.props.HydrateFallback,errorElement:u.props.errorElement,ErrorBoundary:u.props.ErrorBoundary,hasErrorBoundary:u.props.hasErrorBoundary===!0||u.props.ErrorBoundary!=null||u.props.errorElement!=null,shouldRevalidate:u.props.shouldRevalidate,handle:u.props.handle,lazy:u.props.lazy};u.props.children&&(h.children=Bu(u.props.children,p)),d.push(h)}),d}var Xi="get",Zi="application/x-www-form-urlencoded";function ic(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function Dg(n){return ic(n)&&n.tagName.toLowerCase()==="button"}function Og(n){return ic(n)&&n.tagName.toLowerCase()==="form"}function Lg(n){return ic(n)&&n.tagName.toLowerCase()==="input"}function Ig(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Ug(n,l){return n.button===0&&(!l||l==="_self")&&!Ig(n)}function Tu(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((l,d)=>{let u=n[d];return l.concat(Array.isArray(u)?u.map(m=>[d,m]):[[d,u]])},[]))}function qg(n,l){let d=Tu(n);return l&&l.forEach((u,m)=>{d.has(m)||l.getAll(m).forEach(p=>{d.append(m,p)})}),d}var Yi=null;function Fg(){if(Yi===null)try{new FormData(document.createElement("form"),0),Yi=!1}catch{Yi=!0}return Yi}var Hg=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _u(n){return n!=null&&!Hg.has(n)?(qs(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Zi}"`),null):n}function $g(n,l){let d,u,m,p,h;if(Og(n)){let g=n.getAttribute("action");u=g?Bn(g,l):null,d=n.getAttribute("method")||Xi,m=_u(n.getAttribute("enctype"))||Zi,p=new FormData(n)}else if(Dg(n)||Lg(n)&&(n.type==="submit"||n.type==="image")){let g=n.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=n.getAttribute("formaction")||g.getAttribute("action");if(u=b?Bn(b,l):null,d=n.getAttribute("formmethod")||g.getAttribute("method")||Xi,m=_u(n.getAttribute("formenctype"))||_u(g.getAttribute("enctype"))||Zi,p=new FormData(g,n),!Fg()){let{name:y,type:x,value:_}=n;if(x==="image"){let N=y?`${y}.`:"";p.append(`${N}x`,"0"),p.append(`${N}y`,"0")}else y&&p.append(y,_)}}else{if(ic(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');d=Xi,u=null,m=Zi,h=n}return p&&m==="text/plain"&&(h=p,p=void 0),{action:u,method:d.toLowerCase(),encType:m,formData:p,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Gu(n,l){if(n===!1||n===null||typeof n>"u")throw new Error(l)}function Yg(n,l,d,u){let m=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return d?m.pathname.endsWith("/")?m.pathname=`${m.pathname}_.${u}`:m.pathname=`${m.pathname}.${u}`:m.pathname==="/"?m.pathname=`_root.${u}`:l&&Bn(m.pathname,l)==="/"?m.pathname=`${l.replace(/\/$/,"")}/_root.${u}`:m.pathname=`${m.pathname.replace(/\/$/,"")}.${u}`,m}async function Wg(n,l){if(n.id in l)return l[n.id];try{let d=await import(n.module);return l[n.id]=d,d}catch(d){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(d),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Vg(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Gg(n,l,d){let u=await Promise.all(n.map(async m=>{let p=l.routes[m.route.id];if(p){let h=await Wg(p,d);return h.links?h.links():[]}return[]}));return Jg(u.flat(1).filter(Vg).filter(m=>m.rel==="stylesheet"||m.rel==="preload").map(m=>m.rel==="stylesheet"?{...m,rel:"prefetch",as:"style"}:{...m,rel:"prefetch"}))}function Fh(n,l,d,u,m,p){let h=(b,y)=>d[y]?b.route.id!==d[y].route.id:!0,g=(b,y)=>{var x;return d[y].pathname!==b.pathname||((x=d[y].route.path)==null?void 0:x.endsWith("*"))&&d[y].params["*"]!==b.params["*"]};return p==="assets"?l.filter((b,y)=>h(b,y)||g(b,y)):p==="data"?l.filter((b,y)=>{var _;let x=u.routes[b.route.id];if(!x||!x.hasLoader)return!1;if(h(b,y)||g(b,y))return!0;if(b.route.shouldRevalidate){let N=b.route.shouldRevalidate({currentUrl:new URL(m.pathname+m.search+m.hash,window.origin),currentParams:((_=d[0])==null?void 0:_.params)||{},nextUrl:new URL(n,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof N=="boolean")return N}return!0}):[]}function Qg(n,l,{includeHydrateFallback:d}={}){return Xg(n.map(u=>{let m=l.routes[u.route.id];if(!m)return[];let p=[m.module];return m.clientActionModule&&(p=p.concat(m.clientActionModule)),m.clientLoaderModule&&(p=p.concat(m.clientLoaderModule)),d&&m.hydrateFallbackModule&&(p=p.concat(m.hydrateFallbackModule)),m.imports&&(p=p.concat(m.imports)),p}).flat(1))}function Xg(n){return[...new Set(n)]}function Zg(n){let l={},d=Object.keys(n).sort();for(let u of d)l[u]=n[u];return l}function Jg(n,l){let d=new Set;return new Set(l),n.reduce((u,m)=>{let p=JSON.stringify(Zg(m));return d.has(p)||(d.add(p),u.push({key:p,link:m})),u},[])}function xy(){let n=c.useContext(Rl);return Gu(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Kg(){let n=c.useContext(oc);return Gu(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Qu=c.createContext(void 0);Qu.displayName="FrameworkContext";function _y(){let n=c.useContext(Qu);return Gu(n,"You must render this element inside a <HydratedRouter> element"),n}function Pg(n,l){let d=c.useContext(Qu),[u,m]=c.useState(!1),[p,h]=c.useState(!1),{onFocus:g,onBlur:b,onMouseEnter:y,onMouseLeave:x,onTouchStart:_}=l,N=c.useRef(null);c.useEffect(()=>{if(n==="render"&&h(!0),n==="viewport"){let O=D=>{D.forEach(te=>{h(te.isIntersecting)})},C=new IntersectionObserver(O,{threshold:.5});return N.current&&C.observe(N.current),()=>{C.disconnect()}}},[n]),c.useEffect(()=>{if(u){let O=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(O)}}},[u]);let I=()=>{m(!0)},w=()=>{m(!1),h(!1)};return d?n!=="intent"?[p,N,{}]:[p,N,{onFocus:jo(g,I),onBlur:jo(b,w),onMouseEnter:jo(y,I),onMouseLeave:jo(x,w),onTouchStart:jo(_,I)}]:[!1,N,{}]}function jo(n,l){return d=>{n&&n(d),d.defaultPrevented||l(d)}}function ex({page:n,...l}){let{router:d}=xy(),u=c.useMemo(()=>oy(d.routes,n,d.basename),[d.routes,n,d.basename]);return u?c.createElement(ax,{page:n,matches:u,...l}):null}function tx(n){let{manifest:l,routeModules:d}=_y(),[u,m]=c.useState([]);return c.useEffect(()=>{let p=!1;return Gg(n,l,d).then(h=>{p||m(h)}),()=>{p=!0}},[n,l,d]),u}function ax({page:n,matches:l,...d}){let u=Za(),{future:m,manifest:p,routeModules:h}=_y(),{basename:g}=xy(),{loaderData:b,matches:y}=Kg(),x=c.useMemo(()=>Fh(n,l,y,p,u,"data"),[n,l,y,p,u]),_=c.useMemo(()=>Fh(n,l,y,p,u,"assets"),[n,l,y,p,u]),N=c.useMemo(()=>{if(n===u.pathname+u.search+u.hash)return[];let O=new Set,C=!1;if(l.forEach(te=>{var B;let E=p.routes[te.route.id];!E||!E.hasLoader||(!x.some(W=>W.route.id===te.route.id)&&te.route.id in b&&((B=h[te.route.id])!=null&&B.shouldRevalidate)||E.hasClientLoader?C=!0:O.add(te.route.id))}),O.size===0)return[];let D=Yg(n,g,m.unstable_trailingSlashAwareDataRequests,"data");return C&&O.size>0&&D.searchParams.set("_routes",l.filter(te=>O.has(te.route.id)).map(te=>te.route.id).join(",")),[D.pathname+D.search]},[g,m.unstable_trailingSlashAwareDataRequests,b,u,p,x,l,n,h]),I=c.useMemo(()=>Qg(_,p),[_,p]),w=tx(_);return c.createElement(c.Fragment,null,N.map(O=>c.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...d})),I.map(O=>c.createElement("link",{key:O,rel:"modulepreload",href:O,...d})),w.map(({key:O,link:C})=>c.createElement("link",{key:O,nonce:d.nonce,...C,crossOrigin:C.crossOrigin??d.crossOrigin})))}function sx(...n){return l=>{n.forEach(d=>{typeof d=="function"?d(l):d!=null&&(d.current=l)})}}var nx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{nx&&(window.__reactRouterVersion="7.13.0")}catch{}function rx({basename:n,children:l,unstable_useTransitions:d,window:u}){let m=c.useRef();m.current==null&&(m.current=Dv({window:u,v5Compat:!0}));let p=m.current,[h,g]=c.useState({action:p.action,location:p.location}),b=c.useCallback(y=>{d===!1?g(y):c.startTransition(()=>g(y))},[d]);return c.useLayoutEffect(()=>p.listen(b),[p,b]),c.createElement(Eg,{basename:n,children:l,location:h.location,navigationType:h.action,navigator:p,unstable_useTransitions:d})}var jy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sy=c.forwardRef(function({onClick:l,discover:d="render",prefetch:u="none",relative:m,reloadDocument:p,replace:h,state:g,target:b,to:y,preventScrollReset:x,viewTransition:_,unstable_defaultShouldRevalidate:N,...I},w){let{basename:O,unstable_useTransitions:C}=c.useContext(Cs),D=typeof y=="string"&&jy.test(y),te=uy(y,O);y=te.to;let E=hg(y,{relative:m}),[B,W,Q]=Pg(u,I),P=ix(y,{replace:h,state:g,target:b,preventScrollReset:x,relative:m,viewTransition:_,unstable_defaultShouldRevalidate:N,unstable_useTransitions:C});function ge(R){l&&l(R),R.defaultPrevented||P(R)}let F=c.createElement("a",{...I,...Q,href:te.absoluteURL||E,onClick:te.isExternal||p?l:ge,ref:sx(w,W),target:b,"data-discover":!D&&d==="render"?"true":void 0});return B&&!D?c.createElement(c.Fragment,null,F,c.createElement(ex,{page:E})):F});Sy.displayName="Link";var _a=c.forwardRef(function({"aria-current":l="page",caseSensitive:d=!1,className:u="",end:m=!1,style:p,to:h,viewTransition:g,children:b,...y},x){let _=ko(h,{relative:y.relative}),N=Za(),I=c.useContext(oc),{navigator:w,basename:O}=c.useContext(Cs),C=I!=null&&px(_)&&g===!0,D=w.encodeLocation?w.encodeLocation(_).pathname:_.pathname,te=N.pathname,E=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;d||(te=te.toLowerCase(),E=E?E.toLowerCase():null,D=D.toLowerCase()),E&&O&&(E=Bn(E,O)||E);const B=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let W=te===D||!m&&te.startsWith(D)&&te.charAt(B)==="/",Q=E!=null&&(E===D||!m&&E.startsWith(D)&&E.charAt(D.length)==="/"),P={isActive:W,isPending:Q,isTransitioning:C},ge=W?l:void 0,F;typeof u=="function"?F=u(P):F=[u,W?"active":null,Q?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let R=typeof p=="function"?p(P):p;return c.createElement(Sy,{...y,"aria-current":ge,className:F,ref:x,style:R,to:h,viewTransition:g},typeof b=="function"?b(P):b)});_a.displayName="NavLink";var lx=c.forwardRef(({discover:n="render",fetcherKey:l,navigate:d,reloadDocument:u,replace:m,state:p,method:h=Xi,action:g,onSubmit:b,relative:y,preventScrollReset:x,viewTransition:_,unstable_defaultShouldRevalidate:N,...I},w)=>{let{unstable_useTransitions:O}=c.useContext(Cs),C=ux(),D=mx(g,{relative:y}),te=h.toLowerCase()==="get"?"get":"post",E=typeof g=="string"&&jy.test(g),B=W=>{if(b&&b(W),W.defaultPrevented)return;W.preventDefault();let Q=W.nativeEvent.submitter,P=(Q==null?void 0:Q.getAttribute("formmethod"))||h,ge=()=>C(Q||W.currentTarget,{fetcherKey:l,method:P,navigate:d,replace:m,state:p,relative:y,preventScrollReset:x,viewTransition:_,unstable_defaultShouldRevalidate:N});O&&d!==!1?c.startTransition(()=>ge()):ge()};return c.createElement("form",{ref:w,method:te,action:D,onSubmit:u?b:B,...I,"data-discover":!E&&n==="render"?"true":void 0})});lx.displayName="Form";function ox(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Cy(n){let l=c.useContext(Rl);return Jt(l,ox(n)),l}function ix(n,{target:l,replace:d,state:u,preventScrollReset:m,relative:p,viewTransition:h,unstable_defaultShouldRevalidate:g,unstable_useTransitions:b}={}){let y=Dt(),x=Za(),_=ko(n,{relative:p});return c.useCallback(N=>{if(Ug(N,l)){N.preventDefault();let I=d!==void 0?d:Co(x)===Co(_),w=()=>y(n,{replace:I,state:u,preventScrollReset:m,relative:p,viewTransition:h,unstable_defaultShouldRevalidate:g});b?c.startTransition(()=>w()):w()}},[x,y,_,d,u,l,n,m,p,h,g,b])}function Hs(n){qs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let l=c.useRef(Tu(n)),d=c.useRef(!1),u=Za(),m=c.useMemo(()=>qg(u.search,d.current?null:l.current),[u.search]),p=Dt(),h=c.useCallback((g,b)=>{const y=Tu(typeof g=="function"?g(new URLSearchParams(m)):g);d.current=!0,p("?"+y,b)},[p,m]);return[m,h]}var cx=0,dx=()=>`__${String(++cx)}__`;function ux(){let{router:n}=Cy("useSubmit"),{basename:l}=c.useContext(Cs),d=Ng(),u=n.fetch,m=n.navigate;return c.useCallback(async(p,h={})=>{let{action:g,method:b,encType:y,formData:x,body:_}=$g(p,l);if(h.navigate===!1){let N=h.fetcherKey||dx();await u(N,d,h.action||g,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:x,body:_,formMethod:h.method||b,formEncType:h.encType||y,flushSync:h.flushSync})}else await m(h.action||g,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:x,body:_,formMethod:h.method||b,formEncType:h.encType||y,replace:h.replace,state:h.state,fromRouteId:d,flushSync:h.flushSync,viewTransition:h.viewTransition})},[u,m,l,d])}function mx(n,{relative:l}={}){let{basename:d}=c.useContext(Cs),u=c.useContext(Fs);Jt(u,"useFormAction must be used inside a RouteContext");let[m]=u.matches.slice(-1),p={...ko(n||".",{relative:l})},h=Za();if(n==null){p.search=h.search;let g=new URLSearchParams(p.search),b=g.getAll("index");if(b.some(x=>x==="")){g.delete("index"),b.filter(_=>_).forEach(_=>g.append("index",_));let x=g.toString();p.search=x?`?${x}`:""}}return(!n||n===".")&&m.route.index&&(p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index"),d!=="/"&&(p.pathname=p.pathname==="/"?d:Nn([d,p.pathname])),Co(p)}function px(n,{relative:l}={}){let d=c.useContext(py);Jt(d!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:u}=Cy("useViewTransitionState"),m=ko(n,{relative:l});if(!d.isTransitioning)return!1;let p=Bn(d.currentLocation.pathname,u)||d.currentLocation.pathname,h=Bn(d.nextLocation.pathname,u)||d.nextLocation.pathname;return sc(m.pathname,h)!=null||sc(m.pathname,p)!=null}var gl=ly();function wy(n,l){return function(){return n.apply(l,arguments)}}const{toString:fx}=Object.prototype,{getPrototypeOf:Xu}=Object,{iterator:cc,toStringTag:ky}=Symbol,dc=(n=>l=>{const d=fx.call(l);return n[d]||(n[d]=d.slice(8,-1).toLowerCase())})(Object.create(null)),Ps=n=>(n=n.toLowerCase(),l=>dc(l)===n),uc=n=>l=>typeof l===n,{isArray:Bl}=Array,Al=uc("undefined");function Ao(n){return n!==null&&!Al(n)&&n.constructor!==null&&!Al(n.constructor)&&ds(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Ay=Ps("ArrayBuffer");function hx(n){let l;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?l=ArrayBuffer.isView(n):l=n&&n.buffer&&Ay(n.buffer),l}const yx=uc("string"),ds=uc("function"),Ny=uc("number"),No=n=>n!==null&&typeof n=="object",bx=n=>n===!0||n===!1,Ji=n=>{if(dc(n)!=="object")return!1;const l=Xu(n);return(l===null||l===Object.prototype||Object.getPrototypeOf(l)===null)&&!(ky in n)&&!(cc in n)},vx=n=>{if(!No(n)||Ao(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},gx=Ps("Date"),xx=Ps("File"),_x=Ps("Blob"),jx=Ps("FileList"),Sx=n=>No(n)&&ds(n.pipe),Cx=n=>{let l;return n&&(typeof FormData=="function"&&n instanceof FormData||ds(n.append)&&((l=dc(n))==="formdata"||l==="object"&&ds(n.toString)&&n.toString()==="[object FormData]"))},wx=Ps("URLSearchParams"),[kx,Ax,Nx,Rx]=["ReadableStream","Request","Response","Headers"].map(Ps),Mx=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ro(n,l,{allOwnKeys:d=!1}={}){if(n===null||typeof n>"u")return;let u,m;if(typeof n!="object"&&(n=[n]),Bl(n))for(u=0,m=n.length;u<m;u++)l.call(null,n[u],u,n);else{if(Ao(n))return;const p=d?Object.getOwnPropertyNames(n):Object.keys(n),h=p.length;let g;for(u=0;u<h;u++)g=p[u],l.call(null,n[g],g,n)}}function Ry(n,l){if(Ao(n))return null;l=l.toLowerCase();const d=Object.keys(n);let u=d.length,m;for(;u-- >0;)if(m=d[u],l===m.toLowerCase())return m;return null}const Tr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,My=n=>!Al(n)&&n!==Tr;function Eu(){const{caseless:n,skipUndefined:l}=My(this)&&this||{},d={},u=(m,p)=>{if(p==="__proto__"||p==="constructor"||p==="prototype")return;const h=n&&Ry(d,p)||p;Ji(d[h])&&Ji(m)?d[h]=Eu(d[h],m):Ji(m)?d[h]=Eu({},m):Bl(m)?d[h]=m.slice():(!l||!Al(m))&&(d[h]=m)};for(let m=0,p=arguments.length;m<p;m++)arguments[m]&&Ro(arguments[m],u);return d}const Bx=(n,l,d,{allOwnKeys:u}={})=>(Ro(l,(m,p)=>{d&&ds(m)?Object.defineProperty(n,p,{value:wy(m,d),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(n,p,{value:m,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:u}),n),Tx=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),Ex=(n,l,d,u)=>{n.prototype=Object.create(l.prototype,u),Object.defineProperty(n.prototype,"constructor",{value:n,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(n,"super",{value:l.prototype}),d&&Object.assign(n.prototype,d)},zx=(n,l,d,u)=>{let m,p,h;const g={};if(l=l||{},n==null)return l;do{for(m=Object.getOwnPropertyNames(n),p=m.length;p-- >0;)h=m[p],(!u||u(h,n,l))&&!g[h]&&(l[h]=n[h],g[h]=!0);n=d!==!1&&Xu(n)}while(n&&(!d||d(n,l))&&n!==Object.prototype);return l},Dx=(n,l,d)=>{n=String(n),(d===void 0||d>n.length)&&(d=n.length),d-=l.length;const u=n.indexOf(l,d);return u!==-1&&u===d},Ox=n=>{if(!n)return null;if(Bl(n))return n;let l=n.length;if(!Ny(l))return null;const d=new Array(l);for(;l-- >0;)d[l]=n[l];return d},Lx=(n=>l=>n&&l instanceof n)(typeof Uint8Array<"u"&&Xu(Uint8Array)),Ix=(n,l)=>{const u=(n&&n[cc]).call(n);let m;for(;(m=u.next())&&!m.done;){const p=m.value;l.call(n,p[0],p[1])}},Ux=(n,l)=>{let d;const u=[];for(;(d=n.exec(l))!==null;)u.push(d);return u},qx=Ps("HTMLFormElement"),Fx=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(d,u,m){return u.toUpperCase()+m}),Hh=(({hasOwnProperty:n})=>(l,d)=>n.call(l,d))(Object.prototype),Hx=Ps("RegExp"),By=(n,l)=>{const d=Object.getOwnPropertyDescriptors(n),u={};Ro(d,(m,p)=>{let h;(h=l(m,p,n))!==!1&&(u[p]=h||m)}),Object.defineProperties(n,u)},$x=n=>{By(n,(l,d)=>{if(ds(n)&&["arguments","caller","callee"].indexOf(d)!==-1)return!1;const u=n[d];if(ds(u)){if(l.enumerable=!1,"writable"in l){l.writable=!1;return}l.set||(l.set=()=>{throw Error("Can not rewrite read-only method '"+d+"'")})}})},Yx=(n,l)=>{const d={},u=m=>{m.forEach(p=>{d[p]=!0})};return Bl(n)?u(n):u(String(n).split(l)),d},Wx=()=>{},Vx=(n,l)=>n!=null&&Number.isFinite(n=+n)?n:l;function Gx(n){return!!(n&&ds(n.append)&&n[ky]==="FormData"&&n[cc])}const Qx=n=>{const l=new Array(10),d=(u,m)=>{if(No(u)){if(l.indexOf(u)>=0)return;if(Ao(u))return u;if(!("toJSON"in u)){l[m]=u;const p=Bl(u)?[]:{};return Ro(u,(h,g)=>{const b=d(h,m+1);!Al(b)&&(p[g]=b)}),l[m]=void 0,p}}return u};return d(n,0)},Xx=Ps("AsyncFunction"),Zx=n=>n&&(No(n)||ds(n))&&ds(n.then)&&ds(n.catch),Ty=((n,l)=>n?setImmediate:l?((d,u)=>(Tr.addEventListener("message",({source:m,data:p})=>{m===Tr&&p===d&&u.length&&u.shift()()},!1),m=>{u.push(m),Tr.postMessage(d,"*")}))(`axios@${Math.random()}`,[]):d=>setTimeout(d))(typeof setImmediate=="function",ds(Tr.postMessage)),Jx=typeof queueMicrotask<"u"?queueMicrotask.bind(Tr):typeof process<"u"&&process.nextTick||Ty,Kx=n=>n!=null&&ds(n[cc]),me={isArray:Bl,isArrayBuffer:Ay,isBuffer:Ao,isFormData:Cx,isArrayBufferView:hx,isString:yx,isNumber:Ny,isBoolean:bx,isObject:No,isPlainObject:Ji,isEmptyObject:vx,isReadableStream:kx,isRequest:Ax,isResponse:Nx,isHeaders:Rx,isUndefined:Al,isDate:gx,isFile:xx,isBlob:_x,isRegExp:Hx,isFunction:ds,isStream:Sx,isURLSearchParams:wx,isTypedArray:Lx,isFileList:jx,forEach:Ro,merge:Eu,extend:Bx,trim:Mx,stripBOM:Tx,inherits:Ex,toFlatObject:zx,kindOf:dc,kindOfTest:Ps,endsWith:Dx,toArray:Ox,forEachEntry:Ix,matchAll:Ux,isHTMLForm:qx,hasOwnProperty:Hh,hasOwnProp:Hh,reduceDescriptors:By,freezeMethods:$x,toObjectSet:Yx,toCamelCase:Fx,noop:Wx,toFiniteNumber:Vx,findKey:Ry,global:Tr,isContextDefined:My,isSpecCompliantForm:Gx,toJSONObject:Qx,isAsyncFn:Xx,isThenable:Zx,setImmediate:Ty,asap:Jx,isIterable:Kx};let at=class Ey extends Error{static from(l,d,u,m,p,h){const g=new Ey(l.message,d||l.code,u,m,p);return g.cause=l,g.name=l.name,h&&Object.assign(g,h),g}constructor(l,d,u,m,p){super(l),this.name="AxiosError",this.isAxiosError=!0,d&&(this.code=d),u&&(this.config=u),m&&(this.request=m),p&&(this.response=p,this.status=p.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:me.toJSONObject(this.config),code:this.code,status:this.status}}};at.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";at.ERR_BAD_OPTION="ERR_BAD_OPTION";at.ECONNABORTED="ECONNABORTED";at.ETIMEDOUT="ETIMEDOUT";at.ERR_NETWORK="ERR_NETWORK";at.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";at.ERR_DEPRECATED="ERR_DEPRECATED";at.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";at.ERR_BAD_REQUEST="ERR_BAD_REQUEST";at.ERR_CANCELED="ERR_CANCELED";at.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";at.ERR_INVALID_URL="ERR_INVALID_URL";const Px=null;function zu(n){return me.isPlainObject(n)||me.isArray(n)}function zy(n){return me.endsWith(n,"[]")?n.slice(0,-2):n}function $h(n,l,d){return n?n.concat(l).map(function(m,p){return m=zy(m),!d&&p?"["+m+"]":m}).join(d?".":""):l}function e_(n){return me.isArray(n)&&!n.some(zu)}const t_=me.toFlatObject(me,{},null,function(l){return/^is[A-Z]/.test(l)});function mc(n,l,d){if(!me.isObject(n))throw new TypeError("target must be an object");l=l||new FormData,d=me.toFlatObject(d,{metaTokens:!0,dots:!1,indexes:!1},!1,function(O,C){return!me.isUndefined(C[O])});const u=d.metaTokens,m=d.visitor||x,p=d.dots,h=d.indexes,b=(d.Blob||typeof Blob<"u"&&Blob)&&me.isSpecCompliantForm(l);if(!me.isFunction(m))throw new TypeError("visitor must be a function");function y(w){if(w===null)return"";if(me.isDate(w))return w.toISOString();if(me.isBoolean(w))return w.toString();if(!b&&me.isBlob(w))throw new at("Blob is not supported. Use a Buffer instead.");return me.isArrayBuffer(w)||me.isTypedArray(w)?b&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function x(w,O,C){let D=w;if(w&&!C&&typeof w=="object"){if(me.endsWith(O,"{}"))O=u?O:O.slice(0,-2),w=JSON.stringify(w);else if(me.isArray(w)&&e_(w)||(me.isFileList(w)||me.endsWith(O,"[]"))&&(D=me.toArray(w)))return O=zy(O),D.forEach(function(E,B){!(me.isUndefined(E)||E===null)&&l.append(h===!0?$h([O],B,p):h===null?O:O+"[]",y(E))}),!1}return zu(w)?!0:(l.append($h(C,O,p),y(w)),!1)}const _=[],N=Object.assign(t_,{defaultVisitor:x,convertValue:y,isVisitable:zu});function I(w,O){if(!me.isUndefined(w)){if(_.indexOf(w)!==-1)throw Error("Circular reference detected in "+O.join("."));_.push(w),me.forEach(w,function(D,te){(!(me.isUndefined(D)||D===null)&&m.call(l,D,me.isString(te)?te.trim():te,O,N))===!0&&I(D,O?O.concat(te):[te])}),_.pop()}}if(!me.isObject(n))throw new TypeError("data must be an object");return I(n),l}function Yh(n){const l={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(u){return l[u]})}function Zu(n,l){this._pairs=[],n&&mc(n,this,l)}const Dy=Zu.prototype;Dy.append=function(l,d){this._pairs.push([l,d])};Dy.toString=function(l){const d=l?function(u){return l.call(this,u,Yh)}:Yh;return this._pairs.map(function(m){return d(m[0])+"="+d(m[1])},"").join("&")};function a_(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Oy(n,l,d){if(!l)return n;const u=d&&d.encode||a_,m=me.isFunction(d)?{serialize:d}:d,p=m&&m.serialize;let h;if(p?h=p(l,m):h=me.isURLSearchParams(l)?l.toString():new Zu(l,m).toString(u),h){const g=n.indexOf("#");g!==-1&&(n=n.slice(0,g)),n+=(n.indexOf("?")===-1?"?":"&")+h}return n}class Wh{constructor(){this.handlers=[]}use(l,d,u){return this.handlers.push({fulfilled:l,rejected:d,synchronous:u?u.synchronous:!1,runWhen:u?u.runWhen:null}),this.handlers.length-1}eject(l){this.handlers[l]&&(this.handlers[l]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(l){me.forEach(this.handlers,function(u){u!==null&&l(u)})}}const Ju={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},s_=typeof URLSearchParams<"u"?URLSearchParams:Zu,n_=typeof FormData<"u"?FormData:null,r_=typeof Blob<"u"?Blob:null,l_={isBrowser:!0,classes:{URLSearchParams:s_,FormData:n_,Blob:r_},protocols:["http","https","file","blob","url","data"]},Ku=typeof window<"u"&&typeof document<"u",Du=typeof navigator=="object"&&navigator||void 0,o_=Ku&&(!Du||["ReactNative","NativeScript","NS"].indexOf(Du.product)<0),i_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",c_=Ku&&window.location.href||"http://localhost",d_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ku,hasStandardBrowserEnv:o_,hasStandardBrowserWebWorkerEnv:i_,navigator:Du,origin:c_},Symbol.toStringTag,{value:"Module"})),Ha={...d_,...l_};function u_(n,l){return mc(n,new Ha.classes.URLSearchParams,{visitor:function(d,u,m,p){return Ha.isNode&&me.isBuffer(d)?(this.append(u,d.toString("base64")),!1):p.defaultVisitor.apply(this,arguments)},...l})}function m_(n){return me.matchAll(/\w+|\[(\w*)]/g,n).map(l=>l[0]==="[]"?"":l[1]||l[0])}function p_(n){const l={},d=Object.keys(n);let u;const m=d.length;let p;for(u=0;u<m;u++)p=d[u],l[p]=n[p];return l}function Ly(n){function l(d,u,m,p){let h=d[p++];if(h==="__proto__")return!0;const g=Number.isFinite(+h),b=p>=d.length;return h=!h&&me.isArray(m)?m.length:h,b?(me.hasOwnProp(m,h)?m[h]=[m[h],u]:m[h]=u,!g):((!m[h]||!me.isObject(m[h]))&&(m[h]=[]),l(d,u,m[h],p)&&me.isArray(m[h])&&(m[h]=p_(m[h])),!g)}if(me.isFormData(n)&&me.isFunction(n.entries)){const d={};return me.forEachEntry(n,(u,m)=>{l(m_(u),m,d,0)}),d}return null}function f_(n,l,d){if(me.isString(n))try{return(l||JSON.parse)(n),me.trim(n)}catch(u){if(u.name!=="SyntaxError")throw u}return(d||JSON.stringify)(n)}const Mo={transitional:Ju,adapter:["xhr","http","fetch"],transformRequest:[function(l,d){const u=d.getContentType()||"",m=u.indexOf("application/json")>-1,p=me.isObject(l);if(p&&me.isHTMLForm(l)&&(l=new FormData(l)),me.isFormData(l))return m?JSON.stringify(Ly(l)):l;if(me.isArrayBuffer(l)||me.isBuffer(l)||me.isStream(l)||me.isFile(l)||me.isBlob(l)||me.isReadableStream(l))return l;if(me.isArrayBufferView(l))return l.buffer;if(me.isURLSearchParams(l))return d.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),l.toString();let g;if(p){if(u.indexOf("application/x-www-form-urlencoded")>-1)return u_(l,this.formSerializer).toString();if((g=me.isFileList(l))||u.indexOf("multipart/form-data")>-1){const b=this.env&&this.env.FormData;return mc(g?{"files[]":l}:l,b&&new b,this.formSerializer)}}return p||m?(d.setContentType("application/json",!1),f_(l)):l}],transformResponse:[function(l){const d=this.transitional||Mo.transitional,u=d&&d.forcedJSONParsing,m=this.responseType==="json";if(me.isResponse(l)||me.isReadableStream(l))return l;if(l&&me.isString(l)&&(u&&!this.responseType||m)){const h=!(d&&d.silentJSONParsing)&&m;try{return JSON.parse(l,this.parseReviver)}catch(g){if(h)throw g.name==="SyntaxError"?at.from(g,at.ERR_BAD_RESPONSE,this,null,this.response):g}}return l}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ha.classes.FormData,Blob:Ha.classes.Blob},validateStatus:function(l){return l>=200&&l<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};me.forEach(["delete","get","head","post","put","patch"],n=>{Mo.headers[n]={}});const h_=me.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),y_=n=>{const l={};let d,u,m;return n&&n.split(`
`).forEach(function(h){m=h.indexOf(":"),d=h.substring(0,m).trim().toLowerCase(),u=h.substring(m+1).trim(),!(!d||l[d]&&h_[d])&&(d==="set-cookie"?l[d]?l[d].push(u):l[d]=[u]:l[d]=l[d]?l[d]+", "+u:u)}),l},Vh=Symbol("internals");function So(n){return n&&String(n).trim().toLowerCase()}function Ki(n){return n===!1||n==null?n:me.isArray(n)?n.map(Ki):String(n)}function b_(n){const l=Object.create(null),d=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let u;for(;u=d.exec(n);)l[u[1]]=u[2];return l}const v_=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function ju(n,l,d,u,m){if(me.isFunction(u))return u.call(this,l,d);if(m&&(l=d),!!me.isString(l)){if(me.isString(u))return l.indexOf(u)!==-1;if(me.isRegExp(u))return u.test(l)}}function g_(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(l,d,u)=>d.toUpperCase()+u)}function x_(n,l){const d=me.toCamelCase(" "+l);["get","set","has"].forEach(u=>{Object.defineProperty(n,u+d,{value:function(m,p,h){return this[u].call(this,l,m,p,h)},configurable:!0})})}let us=class{constructor(l){l&&this.set(l)}set(l,d,u){const m=this;function p(g,b,y){const x=So(b);if(!x)throw new Error("header name must be a non-empty string");const _=me.findKey(m,x);(!_||m[_]===void 0||y===!0||y===void 0&&m[_]!==!1)&&(m[_||b]=Ki(g))}const h=(g,b)=>me.forEach(g,(y,x)=>p(y,x,b));if(me.isPlainObject(l)||l instanceof this.constructor)h(l,d);else if(me.isString(l)&&(l=l.trim())&&!v_(l))h(y_(l),d);else if(me.isObject(l)&&me.isIterable(l)){let g={},b,y;for(const x of l){if(!me.isArray(x))throw TypeError("Object iterator must return a key-value pair");g[y=x[0]]=(b=g[y])?me.isArray(b)?[...b,x[1]]:[b,x[1]]:x[1]}h(g,d)}else l!=null&&p(d,l,u);return this}get(l,d){if(l=So(l),l){const u=me.findKey(this,l);if(u){const m=this[u];if(!d)return m;if(d===!0)return b_(m);if(me.isFunction(d))return d.call(this,m,u);if(me.isRegExp(d))return d.exec(m);throw new TypeError("parser must be boolean|regexp|function")}}}has(l,d){if(l=So(l),l){const u=me.findKey(this,l);return!!(u&&this[u]!==void 0&&(!d||ju(this,this[u],u,d)))}return!1}delete(l,d){const u=this;let m=!1;function p(h){if(h=So(h),h){const g=me.findKey(u,h);g&&(!d||ju(u,u[g],g,d))&&(delete u[g],m=!0)}}return me.isArray(l)?l.forEach(p):p(l),m}clear(l){const d=Object.keys(this);let u=d.length,m=!1;for(;u--;){const p=d[u];(!l||ju(this,this[p],p,l,!0))&&(delete this[p],m=!0)}return m}normalize(l){const d=this,u={};return me.forEach(this,(m,p)=>{const h=me.findKey(u,p);if(h){d[h]=Ki(m),delete d[p];return}const g=l?g_(p):String(p).trim();g!==p&&delete d[p],d[g]=Ki(m),u[g]=!0}),this}concat(...l){return this.constructor.concat(this,...l)}toJSON(l){const d=Object.create(null);return me.forEach(this,(u,m)=>{u!=null&&u!==!1&&(d[m]=l&&me.isArray(u)?u.join(", "):u)}),d}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([l,d])=>l+": "+d).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(l){return l instanceof this?l:new this(l)}static concat(l,...d){const u=new this(l);return d.forEach(m=>u.set(m)),u}static accessor(l){const u=(this[Vh]=this[Vh]={accessors:{}}).accessors,m=this.prototype;function p(h){const g=So(h);u[g]||(x_(m,h),u[g]=!0)}return me.isArray(l)?l.forEach(p):p(l),this}};us.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);me.reduceDescriptors(us.prototype,({value:n},l)=>{let d=l[0].toUpperCase()+l.slice(1);return{get:()=>n,set(u){this[d]=u}}});me.freezeMethods(us);function Su(n,l){const d=this||Mo,u=l||d,m=us.from(u.headers);let p=u.data;return me.forEach(n,function(g){p=g.call(d,p,m.normalize(),l?l.status:void 0)}),m.normalize(),p}function Iy(n){return!!(n&&n.__CANCEL__)}let Bo=class extends at{constructor(l,d,u){super(l??"canceled",at.ERR_CANCELED,d,u),this.name="CanceledError",this.__CANCEL__=!0}};function Uy(n,l,d){const u=d.config.validateStatus;!d.status||!u||u(d.status)?n(d):l(new at("Request failed with status code "+d.status,[at.ERR_BAD_REQUEST,at.ERR_BAD_RESPONSE][Math.floor(d.status/100)-4],d.config,d.request,d))}function __(n){const l=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return l&&l[1]||""}function j_(n,l){n=n||10;const d=new Array(n),u=new Array(n);let m=0,p=0,h;return l=l!==void 0?l:1e3,function(b){const y=Date.now(),x=u[p];h||(h=y),d[m]=b,u[m]=y;let _=p,N=0;for(;_!==m;)N+=d[_++],_=_%n;if(m=(m+1)%n,m===p&&(p=(p+1)%n),y-h<l)return;const I=x&&y-x;return I?Math.round(N*1e3/I):void 0}}function S_(n,l){let d=0,u=1e3/l,m,p;const h=(y,x=Date.now())=>{d=x,m=null,p&&(clearTimeout(p),p=null),n(...y)};return[(...y)=>{const x=Date.now(),_=x-d;_>=u?h(y,x):(m=y,p||(p=setTimeout(()=>{p=null,h(m)},u-_)))},()=>m&&h(m)]}const nc=(n,l,d=3)=>{let u=0;const m=j_(50,250);return S_(p=>{const h=p.loaded,g=p.lengthComputable?p.total:void 0,b=h-u,y=m(b),x=h<=g;u=h;const _={loaded:h,total:g,progress:g?h/g:void 0,bytes:b,rate:y||void 0,estimated:y&&g&&x?(g-h)/y:void 0,event:p,lengthComputable:g!=null,[l?"download":"upload"]:!0};n(_)},d)},Gh=(n,l)=>{const d=n!=null;return[u=>l[0]({lengthComputable:d,total:n,loaded:u}),l[1]]},Qh=n=>(...l)=>me.asap(()=>n(...l)),C_=Ha.hasStandardBrowserEnv?((n,l)=>d=>(d=new URL(d,Ha.origin),n.protocol===d.protocol&&n.host===d.host&&(l||n.port===d.port)))(new URL(Ha.origin),Ha.navigator&&/(msie|trident)/i.test(Ha.navigator.userAgent)):()=>!0,w_=Ha.hasStandardBrowserEnv?{write(n,l,d,u,m,p,h){if(typeof document>"u")return;const g=[`${n}=${encodeURIComponent(l)}`];me.isNumber(d)&&g.push(`expires=${new Date(d).toUTCString()}`),me.isString(u)&&g.push(`path=${u}`),me.isString(m)&&g.push(`domain=${m}`),p===!0&&g.push("secure"),me.isString(h)&&g.push(`SameSite=${h}`),document.cookie=g.join("; ")},read(n){if(typeof document>"u")return null;const l=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return l?decodeURIComponent(l[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function k_(n){return typeof n!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function A_(n,l){return l?n.replace(/\/?\/$/,"")+"/"+l.replace(/^\/+/,""):n}function qy(n,l,d){let u=!k_(l);return n&&(u||d==!1)?A_(n,l):l}const Xh=n=>n instanceof us?{...n}:n;function Dr(n,l){l=l||{};const d={};function u(y,x,_,N){return me.isPlainObject(y)&&me.isPlainObject(x)?me.merge.call({caseless:N},y,x):me.isPlainObject(x)?me.merge({},x):me.isArray(x)?x.slice():x}function m(y,x,_,N){if(me.isUndefined(x)){if(!me.isUndefined(y))return u(void 0,y,_,N)}else return u(y,x,_,N)}function p(y,x){if(!me.isUndefined(x))return u(void 0,x)}function h(y,x){if(me.isUndefined(x)){if(!me.isUndefined(y))return u(void 0,y)}else return u(void 0,x)}function g(y,x,_){if(_ in l)return u(y,x);if(_ in n)return u(void 0,y)}const b={url:p,method:p,data:p,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:g,headers:(y,x,_)=>m(Xh(y),Xh(x),_,!0)};return me.forEach(Object.keys({...n,...l}),function(x){if(x==="__proto__"||x==="constructor"||x==="prototype")return;const _=me.hasOwnProp(b,x)?b[x]:m,N=_(n[x],l[x],x);me.isUndefined(N)&&_!==g||(d[x]=N)}),d}const Fy=n=>{const l=Dr({},n);let{data:d,withXSRFToken:u,xsrfHeaderName:m,xsrfCookieName:p,headers:h,auth:g}=l;if(l.headers=h=us.from(h),l.url=Oy(qy(l.baseURL,l.url,l.allowAbsoluteUrls),n.params,n.paramsSerializer),g&&h.set("Authorization","Basic "+btoa((g.username||"")+":"+(g.password?unescape(encodeURIComponent(g.password)):""))),me.isFormData(d)){if(Ha.hasStandardBrowserEnv||Ha.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if(me.isFunction(d.getHeaders)){const b=d.getHeaders(),y=["content-type","content-length"];Object.entries(b).forEach(([x,_])=>{y.includes(x.toLowerCase())&&h.set(x,_)})}}if(Ha.hasStandardBrowserEnv&&(u&&me.isFunction(u)&&(u=u(l)),u||u!==!1&&C_(l.url))){const b=m&&p&&w_.read(p);b&&h.set(m,b)}return l},N_=typeof XMLHttpRequest<"u",R_=N_&&function(n){return new Promise(function(d,u){const m=Fy(n);let p=m.data;const h=us.from(m.headers).normalize();let{responseType:g,onUploadProgress:b,onDownloadProgress:y}=m,x,_,N,I,w;function O(){I&&I(),w&&w(),m.cancelToken&&m.cancelToken.unsubscribe(x),m.signal&&m.signal.removeEventListener("abort",x)}let C=new XMLHttpRequest;C.open(m.method.toUpperCase(),m.url,!0),C.timeout=m.timeout;function D(){if(!C)return;const E=us.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),W={data:!g||g==="text"||g==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:E,config:n,request:C};Uy(function(P){d(P),O()},function(P){u(P),O()},W),C=null}"onloadend"in C?C.onloadend=D:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(D)},C.onabort=function(){C&&(u(new at("Request aborted",at.ECONNABORTED,n,C)),C=null)},C.onerror=function(B){const W=B&&B.message?B.message:"Network Error",Q=new at(W,at.ERR_NETWORK,n,C);Q.event=B||null,u(Q),C=null},C.ontimeout=function(){let B=m.timeout?"timeout of "+m.timeout+"ms exceeded":"timeout exceeded";const W=m.transitional||Ju;m.timeoutErrorMessage&&(B=m.timeoutErrorMessage),u(new at(B,W.clarifyTimeoutError?at.ETIMEDOUT:at.ECONNABORTED,n,C)),C=null},p===void 0&&h.setContentType(null),"setRequestHeader"in C&&me.forEach(h.toJSON(),function(B,W){C.setRequestHeader(W,B)}),me.isUndefined(m.withCredentials)||(C.withCredentials=!!m.withCredentials),g&&g!=="json"&&(C.responseType=m.responseType),y&&([N,w]=nc(y,!0),C.addEventListener("progress",N)),b&&C.upload&&([_,I]=nc(b),C.upload.addEventListener("progress",_),C.upload.addEventListener("loadend",I)),(m.cancelToken||m.signal)&&(x=E=>{C&&(u(!E||E.type?new Bo(null,n,C):E),C.abort(),C=null)},m.cancelToken&&m.cancelToken.subscribe(x),m.signal&&(m.signal.aborted?x():m.signal.addEventListener("abort",x)));const te=__(m.url);if(te&&Ha.protocols.indexOf(te)===-1){u(new at("Unsupported protocol "+te+":",at.ERR_BAD_REQUEST,n));return}C.send(p||null)})},M_=(n,l)=>{const{length:d}=n=n?n.filter(Boolean):[];if(l||d){let u=new AbortController,m;const p=function(y){if(!m){m=!0,g();const x=y instanceof Error?y:this.reason;u.abort(x instanceof at?x:new Bo(x instanceof Error?x.message:x))}};let h=l&&setTimeout(()=>{h=null,p(new at(`timeout of ${l}ms exceeded`,at.ETIMEDOUT))},l);const g=()=>{n&&(h&&clearTimeout(h),h=null,n.forEach(y=>{y.unsubscribe?y.unsubscribe(p):y.removeEventListener("abort",p)}),n=null)};n.forEach(y=>y.addEventListener("abort",p));const{signal:b}=u;return b.unsubscribe=()=>me.asap(g),b}},B_=function*(n,l){let d=n.byteLength;if(d<l){yield n;return}let u=0,m;for(;u<d;)m=u+l,yield n.slice(u,m),u=m},T_=async function*(n,l){for await(const d of E_(n))yield*B_(d,l)},E_=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const l=n.getReader();try{for(;;){const{done:d,value:u}=await l.read();if(d)break;yield u}}finally{await l.cancel()}},Zh=(n,l,d,u)=>{const m=T_(n,l);let p=0,h,g=b=>{h||(h=!0,u&&u(b))};return new ReadableStream({async pull(b){try{const{done:y,value:x}=await m.next();if(y){g(),b.close();return}let _=x.byteLength;if(d){let N=p+=_;d(N)}b.enqueue(new Uint8Array(x))}catch(y){throw g(y),y}},cancel(b){return g(b),m.return()}},{highWaterMark:2})},Jh=64*1024,{isFunction:Wi}=me,z_=(({Request:n,Response:l})=>({Request:n,Response:l}))(me.global),{ReadableStream:Kh,TextEncoder:Ph}=me.global,ey=(n,...l)=>{try{return!!n(...l)}catch{return!1}},D_=n=>{n=me.merge.call({skipUndefined:!0},z_,n);const{fetch:l,Request:d,Response:u}=n,m=l?Wi(l):typeof fetch=="function",p=Wi(d),h=Wi(u);if(!m)return!1;const g=m&&Wi(Kh),b=m&&(typeof Ph=="function"?(w=>O=>w.encode(O))(new Ph):async w=>new Uint8Array(await new d(w).arrayBuffer())),y=p&&g&&ey(()=>{let w=!1;const O=new d(Ha.origin,{body:new Kh,method:"POST",get duplex(){return w=!0,"half"}}).headers.has("Content-Type");return w&&!O}),x=h&&g&&ey(()=>me.isReadableStream(new u("").body)),_={stream:x&&(w=>w.body)};m&&["text","arrayBuffer","blob","formData","stream"].forEach(w=>{!_[w]&&(_[w]=(O,C)=>{let D=O&&O[w];if(D)return D.call(O);throw new at(`Response type '${w}' is not supported`,at.ERR_NOT_SUPPORT,C)})});const N=async w=>{if(w==null)return 0;if(me.isBlob(w))return w.size;if(me.isSpecCompliantForm(w))return(await new d(Ha.origin,{method:"POST",body:w}).arrayBuffer()).byteLength;if(me.isArrayBufferView(w)||me.isArrayBuffer(w))return w.byteLength;if(me.isURLSearchParams(w)&&(w=w+""),me.isString(w))return(await b(w)).byteLength},I=async(w,O)=>{const C=me.toFiniteNumber(w.getContentLength());return C??N(O)};return async w=>{let{url:O,method:C,data:D,signal:te,cancelToken:E,timeout:B,onDownloadProgress:W,onUploadProgress:Q,responseType:P,headers:ge,withCredentials:F="same-origin",fetchOptions:R}=Fy(w),ae=l||fetch;P=P?(P+"").toLowerCase():"text";let ue=M_([te,E&&E.toAbortSignal()],B),Re=null;const xe=ue&&ue.unsubscribe&&(()=>{ue.unsubscribe()});let ne;try{if(Q&&y&&C!=="get"&&C!=="head"&&(ne=await I(ge,D))!==0){let k=new d(O,{method:"POST",body:D,duplex:"half"}),$;if(me.isFormData(D)&&($=k.headers.get("content-type"))&&ge.setContentType($),k.body){const[re,U]=Gh(ne,nc(Qh(Q)));D=Zh(k.body,Jh,re,U)}}me.isString(F)||(F=F?"include":"omit");const S=p&&"credentials"in d.prototype,L={...R,signal:ue,method:C.toUpperCase(),headers:ge.normalize().toJSON(),body:D,duplex:"half",credentials:S?F:void 0};Re=p&&new d(O,L);let Z=await(p?ae(Re,R):ae(O,L));const G=x&&(P==="stream"||P==="response");if(x&&(W||G&&xe)){const k={};["status","statusText","headers"].forEach(ye=>{k[ye]=Z[ye]});const $=me.toFiniteNumber(Z.headers.get("content-length")),[re,U]=W&&Gh($,nc(Qh(W),!0))||[];Z=new u(Zh(Z.body,Jh,re,()=>{U&&U(),xe&&xe()}),k)}P=P||"text";let fe=await _[me.findKey(_,P)||"text"](Z,w);return!G&&xe&&xe(),await new Promise((k,$)=>{Uy(k,$,{data:fe,headers:us.from(Z.headers),status:Z.status,statusText:Z.statusText,config:w,request:Re})})}catch(S){throw xe&&xe(),S&&S.name==="TypeError"&&/Load failed|fetch/i.test(S.message)?Object.assign(new at("Network Error",at.ERR_NETWORK,w,Re,S&&S.response),{cause:S.cause||S}):at.from(S,S&&S.code,w,Re,S&&S.response)}}},O_=new Map,Hy=n=>{let l=n&&n.env||{};const{fetch:d,Request:u,Response:m}=l,p=[u,m,d];let h=p.length,g=h,b,y,x=O_;for(;g--;)b=p[g],y=x.get(b),y===void 0&&x.set(b,y=g?new Map:D_(l)),x=y;return y};Hy();const Pu={http:Px,xhr:R_,fetch:{get:Hy}};me.forEach(Pu,(n,l)=>{if(n){try{Object.defineProperty(n,"name",{value:l})}catch{}Object.defineProperty(n,"adapterName",{value:l})}});const ty=n=>`- ${n}`,L_=n=>me.isFunction(n)||n===null||n===!1;function I_(n,l){n=me.isArray(n)?n:[n];const{length:d}=n;let u,m;const p={};for(let h=0;h<d;h++){u=n[h];let g;if(m=u,!L_(u)&&(m=Pu[(g=String(u)).toLowerCase()],m===void 0))throw new at(`Unknown adapter '${g}'`);if(m&&(me.isFunction(m)||(m=m.get(l))))break;p[g||"#"+h]=m}if(!m){const h=Object.entries(p).map(([b,y])=>`adapter ${b} `+(y===!1?"is not supported by the environment":"is not available in the build"));let g=d?h.length>1?`since :
`+h.map(ty).join(`
`):" "+ty(h[0]):"as no adapter specified";throw new at("There is no suitable adapter to dispatch the request "+g,"ERR_NOT_SUPPORT")}return m}const $y={getAdapter:I_,adapters:Pu};function Cu(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Bo(null,n)}function ay(n){return Cu(n),n.headers=us.from(n.headers),n.data=Su.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),$y.getAdapter(n.adapter||Mo.adapter,n)(n).then(function(u){return Cu(n),u.data=Su.call(n,n.transformResponse,u),u.headers=us.from(u.headers),u},function(u){return Iy(u)||(Cu(n),u&&u.response&&(u.response.data=Su.call(n,n.transformResponse,u.response),u.response.headers=us.from(u.response.headers))),Promise.reject(u)})}const Yy="1.13.5",pc={};["object","boolean","number","function","string","symbol"].forEach((n,l)=>{pc[n]=function(u){return typeof u===n||"a"+(l<1?"n ":" ")+n}});const sy={};pc.transitional=function(l,d,u){function m(p,h){return"[Axios v"+Yy+"] Transitional option '"+p+"'"+h+(u?". "+u:"")}return(p,h,g)=>{if(l===!1)throw new at(m(h," has been removed"+(d?" in "+d:"")),at.ERR_DEPRECATED);return d&&!sy[h]&&(sy[h]=!0,console.warn(m(h," has been deprecated since v"+d+" and will be removed in the near future"))),l?l(p,h,g):!0}};pc.spelling=function(l){return(d,u)=>(console.warn(`${u} is likely a misspelling of ${l}`),!0)};function U_(n,l,d){if(typeof n!="object")throw new at("options must be an object",at.ERR_BAD_OPTION_VALUE);const u=Object.keys(n);let m=u.length;for(;m-- >0;){const p=u[m],h=l[p];if(h){const g=n[p],b=g===void 0||h(g,p,n);if(b!==!0)throw new at("option "+p+" must be "+b,at.ERR_BAD_OPTION_VALUE);continue}if(d!==!0)throw new at("Unknown option "+p,at.ERR_BAD_OPTION)}}const Pi={assertOptions:U_,validators:pc},Is=Pi.validators;let Er=class{constructor(l){this.defaults=l||{},this.interceptors={request:new Wh,response:new Wh}}async request(l,d){try{return await this._request(l,d)}catch(u){if(u instanceof Error){let m={};Error.captureStackTrace?Error.captureStackTrace(m):m=new Error;const p=m.stack?m.stack.replace(/^.+\n/,""):"";try{u.stack?p&&!String(u.stack).endsWith(p.replace(/^.+\n.+\n/,""))&&(u.stack+=`
`+p):u.stack=p}catch{}}throw u}}_request(l,d){typeof l=="string"?(d=d||{},d.url=l):d=l||{},d=Dr(this.defaults,d);const{transitional:u,paramsSerializer:m,headers:p}=d;u!==void 0&&Pi.assertOptions(u,{silentJSONParsing:Is.transitional(Is.boolean),forcedJSONParsing:Is.transitional(Is.boolean),clarifyTimeoutError:Is.transitional(Is.boolean),legacyInterceptorReqResOrdering:Is.transitional(Is.boolean)},!1),m!=null&&(me.isFunction(m)?d.paramsSerializer={serialize:m}:Pi.assertOptions(m,{encode:Is.function,serialize:Is.function},!0)),d.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?d.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:d.allowAbsoluteUrls=!0),Pi.assertOptions(d,{baseUrl:Is.spelling("baseURL"),withXsrfToken:Is.spelling("withXSRFToken")},!0),d.method=(d.method||this.defaults.method||"get").toLowerCase();let h=p&&me.merge(p.common,p[d.method]);p&&me.forEach(["delete","get","head","post","put","patch","common"],w=>{delete p[w]}),d.headers=us.concat(h,p);const g=[];let b=!0;this.interceptors.request.forEach(function(O){if(typeof O.runWhen=="function"&&O.runWhen(d)===!1)return;b=b&&O.synchronous;const C=d.transitional||Ju;C&&C.legacyInterceptorReqResOrdering?g.unshift(O.fulfilled,O.rejected):g.push(O.fulfilled,O.rejected)});const y=[];this.interceptors.response.forEach(function(O){y.push(O.fulfilled,O.rejected)});let x,_=0,N;if(!b){const w=[ay.bind(this),void 0];for(w.unshift(...g),w.push(...y),N=w.length,x=Promise.resolve(d);_<N;)x=x.then(w[_++],w[_++]);return x}N=g.length;let I=d;for(;_<N;){const w=g[_++],O=g[_++];try{I=w(I)}catch(C){O.call(this,C);break}}try{x=ay.call(this,I)}catch(w){return Promise.reject(w)}for(_=0,N=y.length;_<N;)x=x.then(y[_++],y[_++]);return x}getUri(l){l=Dr(this.defaults,l);const d=qy(l.baseURL,l.url,l.allowAbsoluteUrls);return Oy(d,l.params,l.paramsSerializer)}};me.forEach(["delete","get","head","options"],function(l){Er.prototype[l]=function(d,u){return this.request(Dr(u||{},{method:l,url:d,data:(u||{}).data}))}});me.forEach(["post","put","patch"],function(l){function d(u){return function(p,h,g){return this.request(Dr(g||{},{method:l,headers:u?{"Content-Type":"multipart/form-data"}:{},url:p,data:h}))}}Er.prototype[l]=d(),Er.prototype[l+"Form"]=d(!0)});let q_=class Wy{constructor(l){if(typeof l!="function")throw new TypeError("executor must be a function.");let d;this.promise=new Promise(function(p){d=p});const u=this;this.promise.then(m=>{if(!u._listeners)return;let p=u._listeners.length;for(;p-- >0;)u._listeners[p](m);u._listeners=null}),this.promise.then=m=>{let p;const h=new Promise(g=>{u.subscribe(g),p=g}).then(m);return h.cancel=function(){u.unsubscribe(p)},h},l(function(p,h,g){u.reason||(u.reason=new Bo(p,h,g),d(u.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(l){if(this.reason){l(this.reason);return}this._listeners?this._listeners.push(l):this._listeners=[l]}unsubscribe(l){if(!this._listeners)return;const d=this._listeners.indexOf(l);d!==-1&&this._listeners.splice(d,1)}toAbortSignal(){const l=new AbortController,d=u=>{l.abort(u)};return this.subscribe(d),l.signal.unsubscribe=()=>this.unsubscribe(d),l.signal}static source(){let l;return{token:new Wy(function(m){l=m}),cancel:l}}};function F_(n){return function(d){return n.apply(null,d)}}function H_(n){return me.isObject(n)&&n.isAxiosError===!0}const Ou={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ou).forEach(([n,l])=>{Ou[l]=n});function Vy(n){const l=new Er(n),d=wy(Er.prototype.request,l);return me.extend(d,Er.prototype,l,{allOwnKeys:!0}),me.extend(d,l,null,{allOwnKeys:!0}),d.create=function(m){return Vy(Dr(n,m))},d}const ma=Vy(Mo);ma.Axios=Er;ma.CanceledError=Bo;ma.CancelToken=q_;ma.isCancel=Iy;ma.VERSION=Yy;ma.toFormData=mc;ma.AxiosError=at;ma.Cancel=ma.CanceledError;ma.all=function(l){return Promise.all(l)};ma.spread=F_;ma.isAxiosError=H_;ma.mergeConfig=Dr;ma.AxiosHeaders=us;ma.formToJSON=n=>Ly(me.isHTMLForm(n)?new FormData(n):n);ma.getAdapter=$y.getAdapter;ma.HttpStatusCode=Ou;ma.default=ma;const{Axios:Xj,AxiosError:Zj,CanceledError:Jj,isCancel:Kj,CancelToken:Pj,VERSION:e0,all:t0,Cancel:a0,isAxiosError:s0,spread:n0,toFormData:r0,AxiosHeaders:l0,HttpStatusCode:o0,formToJSON:i0,getAdapter:c0,mergeConfig:d0}=ma,$_="/api/",Y=ma.create({baseURL:$_,headers:{"Content-Type":"application/json"}}),To=async(n,l)=>await Y.post(n,l,{headers:{"Content-Type":"multipart/form-data"}});Y.interceptors.request.use(n=>{const l=localStorage.getItem("access_token");return l&&(n.headers.Authorization=`Bearer ${l}`),n},n=>Promise.reject(n));Y.interceptors.response.use(n=>n,async n=>{var l,d;if(((l=n.response)==null?void 0:l.status)===401){if((((d=n==null?void 0:n.config)==null?void 0:d.url)||"").includes("auth/login/"))return Promise.reject(n);localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),window.location.href="/login"}return Promise.reject(n)});const It={login:async(n,l)=>{const d=await Y.post("auth/login/",{username:n,password:l}),{access:u,refresh:m,user:p}=d.data;return localStorage.setItem("access_token",u),localStorage.setItem("refresh_token",m),localStorage.setItem("user",JSON.stringify(p)),p},logout:()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user")},getUser:()=>{const n=localStorage.getItem("user");return n?JSON.parse(n):null},isAuthenticated:()=>!!localStorage.getItem("access_token"),isSuperuser:()=>{const n=It.getUser();return(n==null?void 0:n.is_superuser)||!1}},wu={getAll:async()=>(await Y.get("company-asset-requests/")).data,create:async n=>(typeof FormData<"u"&&n instanceof FormData?await To("company-asset-requests/",n):await Y.post("company-asset-requests/",n)).data,getById:async n=>(await Y.get(`company-asset-requests/${n}/`)).data},Y_={getAll:async()=>(await Y.get("external-maintenance-providers/")).data},W_={getAll:async()=>(await Y.get("external-maintenance-typical-steps/")).data},sr={getAll:async n=>(await Y.get("external-maintenances/",{params:n})).data,getById:async n=>(await Y.get(`external-maintenances/${n}/`)).data,createForMaintenance:async n=>(await Y.post("external-maintenances/create-for-maintenance/",{maintenance_id:n})).data,sendToProvider:async(n,l,d)=>(await Y.post(`external-maintenances/${n}/send-to-provider/`,{external_maintenance_provider_id:l,destination_room_id:d})).data,createStep:async(n,l)=>(await Y.post(`external-maintenances/${n}/create-step/`,{external_maintenance_typical_step_id:l})).data,confirmReceivedByProvider:async n=>(await Y.post(`external-maintenances/${n}/confirm-received-by-provider/`)).data,confirmSentToCompany:async n=>(await Y.post(`external-maintenances/${n}/confirm-sent-to-company/`)).data,confirmReceivedByCompany:async(n,l)=>(await Y.post(`external-maintenances/${n}/confirm-received-by-company/`,{destination_room_id:l})).data},V_={getAll:async n=>(await Y.get("external-maintenance-steps/",{params:n})).data,getById:async n=>(await Y.get(`external-maintenance-steps/${n}/`)).data},Tn={getAll:async n=>(await Y.get("persons/",{params:n})).data,getById:async n=>(await Y.get(`persons/${n}/`)).data,create:async n=>(await Y.post("persons/",n)).data,update:async(n,l)=>(await Y.put(`persons/${n}/`,l)).data,delete:async n=>{await Y.delete(`persons/${n}/`)}},G_={create:async n=>(await Y.post("user-accounts/",n)).data},Q_={get:async()=>(await Y.get("my-items/")).data},rc={getAll:async()=>(await Y.get("problem-reports/")).data,create:async n=>(await Y.post("problem-reports/",n)).data,createMaintenance:async n=>(await Y.post("problem-reports/create-maintenance/",n)).data},ln={getAll:async()=>(await Y.get("asset-types/")).data,getById:async n=>(await Y.get(`asset-types/${n}/`)).data,create:async n=>(await Y.post("asset-types/",n)).data,update:async(n,l)=>(await Y.put(`asset-types/${n}/`,l)).data,delete:async n=>{await Y.delete(`asset-types/${n}/`)}},Lu={getAll:async()=>(await Y.get("asset-brands/")).data,getById:async n=>(await Y.get(`asset-brands/${n}/`)).data,create:async n=>(typeof FormData<"u"&&n instanceof FormData?await To("asset-brands/",n):await Y.post("asset-brands/",n)).data,update:async(n,l)=>(await Y.put(`asset-brands/${n}/`,l)).data,delete:async n=>{await Y.delete(`asset-brands/${n}/`)}},vt={getAll:async()=>(await Y.get("asset-models/")).data,getByAssetType:async n=>(await Y.get(`asset-models/?asset_type=${n}`)).data,getById:async n=>(await Y.get(`asset-models/${n}/`)).data,create:async n=>(await Y.post("asset-models/",n)).data,update:async(n,l)=>(await Y.put(`asset-models/${n}/`,l)).data,delete:async n=>{await Y.delete(`asset-models/${n}/`)},getCompatibleStockItemModels:async n=>(await Y.get(`asset-models/${n}/compatible-stock-item-models/`)).data,addCompatibleStockItemModel:async(n,l)=>(await Y.post(`asset-models/${n}/compatible-stock-item-models/`,{stock_item_model_id:l})).data,removeCompatibleStockItemModel:async(n,l)=>(await Y.delete(`asset-models/${n}/compatible-stock-item-models/${l}/`)).data,getCompatibleConsumableModels:async n=>(await Y.get(`asset-models/${n}/compatible-consumable-models/`)).data,addCompatibleConsumableModel:async(n,l)=>(await Y.post(`asset-models/${n}/compatible-consumable-models/`,{consumable_model_id:l})).data,removeCompatibleConsumableModel:async(n,l)=>(await Y.delete(`asset-models/${n}/compatible-consumable-models/${l}/`)).data,getDefaultStockItems:async n=>(await Y.get(`asset-model-default-stock-items/?asset_model=${n}`)).data,addDefaultStockItem:async(n,l,d=1,u="")=>(await Y.post("asset-model-default-stock-items/",{asset_model:n,stock_item_model:l,quantity:d,notes:u})).data,removeDefaultStockItem:async n=>{await Y.delete(`asset-model-default-stock-items/${n}/`)},getDefaultConsumables:async n=>(await Y.get(`asset-model-default-consumables/?asset_model=${n}`)).data,addDefaultConsumable:async(n,l,d=1,u="")=>(await Y.post("asset-model-default-consumables/",{asset_model:n,consumable_model:l,quantity:d,notes:u})).data,removeDefaultConsumable:async n=>{await Y.delete(`asset-model-default-consumables/${n}/`)}},nr={getAll:async()=>(await Y.get("asset-attribute-definitions/")).data,create:async n=>(await Y.post("asset-attribute-definitions/",n)).data,update:async(n,l)=>(await Y.put(`asset-attribute-definitions/${n}/`,l)).data,delete:async n=>{await Y.delete(`asset-attribute-definitions/${n}/`)}},Rn={getByAssetType:async n=>(await Y.get(`asset-type-attributes/?asset_type=${n}`)).data,create:async n=>(await Y.post("asset-type-attributes/",n)).data,update:async(n,l,d)=>(await Y.put(`asset-type-attributes/${n}/`,{asset_type:n,asset_attribute_definition:l,...d})).data,delete:async(n,l)=>{await Y.delete(`asset-type-attributes/${l}/`,{params:{asset_type:n,asset_attribute_definition:l}})}},wl={getByAssetModel:async n=>(await Y.get(`asset-model-attributes/?asset_model=${n}`)).data,create:async n=>(await Y.post("asset-model-attributes/",n)).data,update:async(n,l,d)=>(await Y.put(`asset-model-attributes/${n}/`,{asset_model:n,asset_attribute_definition:l,...d})).data,delete:async(n,l)=>{await Y.delete(`asset-model-attributes/${l}/`,{params:{asset_model:n,asset_attribute_definition:l}})}},ec={getByAsset:async n=>(await Y.get(`asset-attributes/?asset=${n}`)).data,create:async n=>(await Y.post("asset-attributes/",n)).data,update:async(n,l,d)=>(await Y.put(`asset-attributes/${l}/`,{asset:n,asset_attribute_definition:l,...d})).data,delete:async(n,l)=>{await Y.delete(`asset-attributes/${l}/`,{params:{asset:n,asset_attribute_definition:l}})}},rr={getAll:async()=>(await Y.get("stock-item-attribute-definitions/")).data,create:async n=>(await Y.post("stock-item-attribute-definitions/",n)).data,update:async(n,l)=>(await Y.put(`stock-item-attribute-definitions/${n}/`,l)).data,delete:async n=>{await Y.delete(`stock-item-attribute-definitions/${n}/`)}},zr={getByStockItemType:async n=>(await Y.get(`stock-item-type-attributes/?stock_item_type=${n}`)).data,create:async n=>(await Y.post("stock-item-type-attributes/",n)).data,delete:async(n,l)=>{await Y.delete(`stock-item-type-attributes/${l}/`,{params:{stock_item_type:n,stock_item_attribute_definition:l}})}},ku={getByStockItemModel:async n=>(await Y.get(`stock-item-model-attributes/?stock_item_model=${n}`)).data,create:async n=>(await Y.post("stock-item-model-attributes/",n)).data,delete:async(n,l)=>{await Y.delete(`stock-item-model-attributes/${l}/`,{params:{stock_item_model:n,stock_item_attribute_definition:l}})}},tc={getByStockItem:async n=>(await Y.get(`stock-item-attributes/?stock_item=${n}`)).data,create:async n=>(await Y.post("stock-item-attributes/",n)).data,delete:async(n,l)=>{await Y.delete(`stock-item-attributes/${l}/`,{params:{stock_item:n,stock_item_attribute_definition:l}})}},lr={getAll:async()=>(await Y.get("consumable-attribute-definitions/")).data,create:async n=>(await Y.post("consumable-attribute-definitions/",n)).data,update:async(n,l)=>(await Y.put(`consumable-attribute-definitions/${n}/`,l)).data,delete:async n=>{await Y.delete(`consumable-attribute-definitions/${n}/`)}},Mn={getByConsumableType:async n=>(await Y.get(`consumable-type-attributes/?consumable_type=${n}`)).data,create:async n=>(await Y.post("consumable-type-attributes/",n)).data,delete:async(n,l)=>{await Y.delete(`consumable-type-attributes/${l}/`,{params:{consumable_type:n,consumable_attribute_definition:l}})}},kl={getByConsumableModel:async n=>(await Y.get(`consumable-model-attributes/?consumable_model=${n}`)).data,create:async n=>(await Y.post("consumable-model-attributes/",n)).data,delete:async(n,l)=>{await Y.delete(`consumable-model-attributes/${l}/`,{params:{consumable_model:n,consumable_attribute_definition:l}})}},ac={getByConsumable:async n=>(await Y.get(`consumable-attributes/?consumable=${n}`)).data,create:async n=>(await Y.post("consumable-attributes/",n)).data,delete:async(n,l)=>{await Y.delete(`consumable-attributes/${l}/`,{params:{consumable:n,consumable_attribute_definition:l}})}},on={getAll:async()=>(await Y.get("stock-item-types/")).data,getById:async n=>(await Y.get(`stock-item-types/${n}/`)).data,create:async n=>(await Y.post("stock-item-types/",n)).data,update:async(n,l)=>(await Y.put(`stock-item-types/${n}/`,l)).data,delete:async n=>{await Y.delete(`stock-item-types/${n}/`)}},Iu={getAll:async()=>(await Y.get("stock-item-brands/")).data,getById:async n=>(await Y.get(`stock-item-brands/${n}/`)).data,create:async n=>(typeof FormData<"u"&&n instanceof FormData?await To("stock-item-brands/",n):await Y.post("stock-item-brands/",n)).data,update:async(n,l)=>(await Y.put(`stock-item-brands/${n}/`,l)).data,delete:async n=>{await Y.delete(`stock-item-brands/${n}/`)}},Qa={getAll:async()=>(await Y.get("stock-item-models/")).data,getByStockItemType:async n=>(await Y.get(`stock-item-models/?stock_item_type=${n}`)).data,getById:async n=>(await Y.get(`stock-item-models/${n}/`)).data,create:async n=>(await Y.post("stock-item-models/",n)).data,update:async(n,l)=>(await Y.put(`stock-item-models/${n}/`,l)).data,delete:async n=>{await Y.delete(`stock-item-models/${n}/`)},getCompatibleAssetModels:async n=>(await Y.get(`stock-item-models/${n}/compatible-asset-models/`)).data,addCompatibleAssetModel:async(n,l)=>(await Y.post(`stock-item-models/${n}/compatible-asset-models/`,{asset_model_id:l})).data,removeCompatibleAssetModel:async(n,l)=>(await Y.delete(`stock-item-models/${n}/compatible-asset-models/${l}/`)).data},cn={getAll:async()=>(await Y.get("consumable-types/")).data,getById:async n=>(await Y.get(`consumable-types/${n}/`)).data,create:async n=>(await Y.post("consumable-types/",n)).data,update:async(n,l)=>(await Y.put(`consumable-types/${n}/`,l)).data,delete:async n=>{await Y.delete(`consumable-types/${n}/`)}},Uu={getAll:async()=>(await Y.get("consumable-brands/")).data,getById:async n=>(await Y.get(`consumable-brands/${n}/`)).data,create:async n=>(typeof FormData<"u"&&n instanceof FormData?await To("consumable-brands/",n):await Y.post("consumable-brands/",n)).data,update:async(n,l)=>(await Y.put(`consumable-brands/${n}/`,l)).data,delete:async n=>{await Y.delete(`consumable-brands/${n}/`)}},Xa={getAll:async()=>(await Y.get("consumable-models/")).data,getByConsumableType:async n=>(await Y.get(`consumable-models/?consumable_type=${n}`)).data,getById:async n=>(await Y.get(`consumable-models/${n}/`)).data,create:async n=>(await Y.post("consumable-models/",n)).data,update:async(n,l)=>(await Y.put(`consumable-models/${n}/`,l)).data,delete:async n=>{await Y.delete(`consumable-models/${n}/`)},getCompatibleAssetModels:async n=>(await Y.get(`consumable-models/${n}/compatible-asset-models/`)).data,addCompatibleAssetModel:async(n,l)=>(await Y.post(`consumable-models/${n}/compatible-asset-models/`,{asset_model_id:l})).data,removeCompatibleAssetModel:async(n,l)=>(await Y.delete(`consumable-models/${n}/compatible-asset-models/${l}/`)).data},X_={getAll:async()=>(await Y.get("room-types/")).data,getById:async n=>(await Y.get(`room-types/${n}/`)).data,create:async n=>(await Y.post("room-types/",n)).data,update:async(n,l)=>(await Y.put(`room-types/${n}/`,l)).data,delete:async n=>{await Y.delete(`room-types/${n}/`)}},Ks={getAll:async()=>(await Y.get("rooms/")).data,getByRoomType:async n=>(await Y.get(`rooms/?room_type=${n}`)).data,getById:async n=>(await Y.get(`rooms/${n}/`)).data,create:async n=>(await Y.post("rooms/",n)).data,update:async(n,l)=>(await Y.put(`rooms/${n}/`,l)).data,delete:async n=>{await Y.delete(`rooms/${n}/`)}},Vi={getAll:async()=>(await Y.get("positions/")).data,getById:async n=>(await Y.get(`positions/${n}/`)).data,create:async n=>(await Y.post("positions/",n)).data,update:async(n,l)=>(await Y.put(`positions/${n}/`,l)).data,delete:async n=>{await Y.delete(`positions/${n}/`)}},Gi={getAll:async()=>(await Y.get("organizational-structures/")).data,getById:async n=>(await Y.get(`organizational-structures/${n}/`)).data,create:async n=>(await Y.post("organizational-structures/",n)).data,update:async(n,l)=>(await Y.put(`organizational-structures/${n}/`,l)).data,delete:async n=>{await Y.delete(`organizational-structures/${n}/`)}},Br={getAll:async()=>(await Y.get("organizational-structure-relations/")).data,getByStructureId:async n=>(await Y.get(`organizational-structure-relations/?org_structure_id=${n}`)).data,create:async n=>(await Y.post("organizational-structure-relations/",n)).data,update:async(n,l,d)=>(await Y.put(`organizational-structure-relations/${n}/${l}/`,d)).data,delete:async(n,l)=>{await Y.delete(`organizational-structure-relations/${n}/${l}/`)}},Us={getAll:async n=>(await Y.get("assets/",{params:n})).data,getById:async n=>(await Y.get(`assets/${n}/`)).data,create:async n=>(await Y.post("assets/",n)).data,update:async(n,l)=>(await Y.put(`assets/${n}/`,l)).data,delete:async n=>{await Y.delete(`assets/${n}/`)},getCurrentRoom:async n=>(await Y.get(`assets/${n}/current-room/`)).data,move:async(n,l)=>(await Y.post(`assets/${n}/move/`,l)).data},xl={getAll:async n=>(await Y.get("stock-items/",{params:n})).data,getById:async n=>(await Y.get(`stock-items/${n}/`)).data,create:async n=>(await Y.post("stock-items/",n)).data,update:async(n,l)=>(await Y.put(`stock-items/${n}/`,l)).data,delete:async n=>{await Y.delete(`stock-items/${n}/`)},getCurrentRoom:async n=>(await Y.get(`stock-items/${n}/current-room/`)).data,move:async(n,l)=>(await Y.post(`stock-items/${n}/move/`,l)).data},_l={getAll:async n=>(await Y.get("consumables/",{params:n})).data,getById:async n=>(await Y.get(`consumables/${n}/`)).data,create:async n=>(await Y.post("consumables/",n)).data,update:async(n,l)=>(await Y.put(`consumables/${n}/`,l)).data,delete:async n=>{await Y.delete(`consumables/${n}/`)},getCurrentRoom:async n=>(await Y.get(`consumables/${n}/current-room/`)).data,move:async(n,l)=>(await Y.post(`consumables/${n}/move/`,l)).data},Sl={getAll:async()=>(await Y.get("maintenances/")).data,getById:async n=>(await Y.get(`maintenances/${n}/`)).data,create:async n=>(await Y.post("maintenances/",n)).data,createDirect:async n=>(await Y.post("maintenances/create-direct/",n)).data,end:async(n,l)=>(await Y.post(`maintenances/${n}/end/`,l||{})).data,update:async(n,l)=>(await Y.put(`maintenances/${n}/`,l)).data,delete:async n=>{await Y.delete(`maintenances/${n}/`)}},Zs={getAll:async n=>(await Y.get("maintenance-steps/",{params:n})).data,getById:async n=>(await Y.get(`maintenance-steps/${n}/`)).data,create:async n=>(await Y.post("maintenance-steps/",n)).data,update:async(n,l)=>(await Y.put(`maintenance-steps/${n}/`,l)).data,patch:async(n,l)=>(await Y.patch(`maintenance-steps/${n}/`,l)).data,requestStockItem:async(n,l)=>(await Y.post(`maintenance-steps/${n}/request-stock-item/`,l)).data,requestConsumable:async(n,l)=>(await Y.post(`maintenance-steps/${n}/request-consumable/`,l)).data,getComponents:async n=>(await Y.get(`maintenance-steps/${n}/components/`)).data,removeComponent:async(n,l)=>(await Y.post(`maintenance-steps/${n}/remove-component/`,l)).data,updateAssetCondition:async(n,l)=>(await Y.post(`maintenance-steps/${n}/update-asset-condition/`,l)).data,addAttributeChanges:async(n,l)=>{const d=Array.isArray(l)?l:{changes:l};return(await Y.post(`maintenance-steps/${n}/attribute-changes/`,d)).data},delete:async n=>{await Y.delete(`maintenance-steps/${n}/`)}},Z_={getAll:async()=>(await Y.get("physical-conditions/")).data},J_={getAll:async()=>(await Y.get("asset-maintenance-timeline/")).data,getByAssetId:async n=>(await Y.get(`asset-maintenance-timeline/${n}/`)).data},jl={getAll:async n=>(await Y.get("maintenance-step-item-requests/",{params:n})).data,fulfill:async(n,l)=>(await Y.post(`maintenance-step-item-requests/${n}/fulfill/`,l)).data,reject:async(n,l)=>(await Y.post(`maintenance-step-item-requests/${n}/reject/`,l)).data,selectRandom:async n=>(await Y.get(`maintenance-step-item-requests/${n}/select-random/`)).data,eligibleItems:async n=>(await Y.get(`maintenance-step-item-requests/${n}/eligible-items/`)).data},K_={getAll:async()=>(await Y.get("maintenance-typical-steps/")).data},Qi={getAll:async n=>(await Y.get("asset-assignments/",{params:n})).data,create:async n=>(await Y.post("asset-assignments/",n)).data,confirm:async n=>(await Y.post(`asset-assignments/${n}/confirm/`)).data,discharge:async n=>(await Y.post(`asset-assignments/${n}/discharge/`)).data},Au={getAll:async n=>(await Y.get("stock-item-assignments/",{params:n})).data,create:async n=>(await Y.post("stock-item-assignments/",n)).data,discharge:async n=>(await Y.post(`stock-item-assignments/${n}/discharge/`)).data},Nu={getAll:async n=>(await Y.get("consumable-assignments/",{params:n})).data,create:async n=>(await Y.post("consumable-assignments/",n)).data,discharge:async n=>(await Y.post(`consumable-assignments/${n}/discharge/`)).data},Gy={getAll:async()=>(await Y.get("warehouses/")).data,create:async n=>(await Y.post("warehouses/",n)).data},Cl={getAll:async()=>(await Y.get("attribution-orders/")).data,getById:async n=>(await Y.get(`attribution-orders/${n}/`)).data,create:async n=>(await Y.post("attribution-orders/",n)).data,getIncludedItems:async n=>(await Y.get(`attribution-orders/${n}/included-items/`)).data},qu={getById:async n=>(await Y.get(`receipt-reports/${n}/`)).data,create:async n=>(await Y.post("receipt-reports/",n,{headers:{"Content-Type":"multipart/form-data"}})).data},lc={getAll:async n=>(await Y.get("administrative-certificates/",{params:n})).data,create:async n=>(typeof FormData<"u"&&n instanceof FormData?await To("administrative-certificates/",n):await Y.post("administrative-certificates/",n)).data},Qy=c.createContext(null),P_=({children:n})=>{const[l,d]=c.useState(null),[u,m]=c.useState(!0);c.useEffect(()=>{const b=It.getUser();b&&It.isAuthenticated()&&d(b),m(!1)},[]);const g={user:l,login:async(b,y)=>{const x=await It.login(b,y);return d(x),x},logout:()=>{It.logout(),d(null)},loading:u,isAuthenticated:!!l,isSuperuser:(l==null?void 0:l.is_superuser)||!1};return e.jsx(Qy.Provider,{value:g,children:!u&&n})},Ja=()=>{const n=c.useContext(Qy);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},ej=()=>{const[n,l]=c.useState(""),[d,u]=c.useState(""),[m,p]=c.useState(""),[h,g]=c.useState(!1),{login:b}=Ja(),y=Dt(),x=N=>{var O,C,D;const I=(O=N==null?void 0:N.response)==null?void 0:O.status;if(I===401||I===400)return"Invalid username or password.";const w=(D=(C=N==null?void 0:N.response)==null?void 0:C.data)==null?void 0:D.error;return typeof w=="string"&&w.trim()?w:"Login failed. Please try again."},_=async N=>{N.preventDefault(),p(""),g(!0);try{await b(n,d),y("/dashboard")}catch(I){p(x(I))}finally{g(!1)}};return e.jsx("div",{className:"login-page",children:e.jsx("div",{className:"login-container",children:e.jsxs("div",{className:"login-card",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("div",{className:"login-logo",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})}),e.jsx("h1",{className:"login-title",children:"Equipment Management"}),e.jsx("p",{className:"login-subtitle",children:"Sign in to your account"})]}),e.jsxs("form",{onSubmit:_,children:[m&&e.jsx("div",{className:"error-message",children:m}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"username",className:"form-label",children:"Username"}),e.jsx("input",{type:"text",id:"username",className:"form-input",placeholder:"Enter your username",value:n,onChange:N=>l(N.target.value),required:!0,autoFocus:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),e.jsx("input",{type:"password",id:"password",className:"form-input",placeholder:"Enter your password",value:d,onChange:N=>u(N.target.value),required:!0})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading-spinner"}),"Signing in..."]}):"Sign In"})]})]})})})},tj=()=>{var w,O,C,D,te;const{user:n,logout:l,isSuperuser:d}=Ja(),u=Dt(),m=()=>{l(),u("/login")},p=()=>{var E,B;return n!=null&&n.person?`${n.person.first_name[0]}${n.person.last_name[0]}`.toUpperCase():((B=(E=n==null?void 0:n.username)==null?void 0:E[0])==null?void 0:B.toUpperCase())||"U"},h=()=>n!=null&&n.person?`${n.person.first_name} ${n.person.last_name}`:(n==null?void 0:n.username)||"User",g=()=>d?"Superuser":n!=null&&n.roles&&n.roles.length>0?n.roles[0].role_label:"User",b=(w=n==null?void 0:n.roles)==null?void 0:w.some(E=>E.role_code==="maintenance_chief"),y=(O=n==null?void 0:n.roles)==null?void 0:O.some(E=>E.role_code==="maintenance_technician"),x=(C=n==null?void 0:n.roles)==null?void 0:C.some(E=>E.role_code==="exploitation_chief"),_=(D=n==null?void 0:n.roles)==null?void 0:D.some(E=>E.role_code==="stock_consumable_responsible"),N=(te=n==null?void 0:n.roles)==null?void 0:te.some(E=>E.role_code==="asset_responsible"),I=d||b||x;return e.jsxs("div",{className:"dashboard-layout",children:[e.jsxs("aside",{className:"sidebar",children:[e.jsx("div",{className:"sidebar-header",children:e.jsxs("div",{className:"sidebar-logo",children:[e.jsx("div",{className:"sidebar-logo-icon",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})}),e.jsx("span",{className:"sidebar-logo-text",children:"EMS"})]})}),e.jsxs("nav",{className:"sidebar-nav",children:[e.jsxs("div",{className:"nav-section",children:[e.jsx("span",{className:"nav-section-title",children:"Dashboard"}),e.jsxs(_a,{to:"/dashboard",end:!0,className:({isActive:E})=>`nav-link ${E?"active":""}`,children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),e.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),"Dashboard"]})]}),d&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"nav-section",children:[e.jsx("span",{className:"nav-section-title",children:"Management"}),e.jsxs(_a,{to:"/dashboard/organizational-structure",className:({isActive:E})=>`nav-link ${E?"active":""}`,children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"}),e.jsx("path",{d:"M3.27 6.96a3 3 0 0 1 5.46 0"}),e.jsx("path",{d:"M15.27 6.96a3 3 0 0 1 5.46 0"})]}),"Organizational Structure"]}),e.jsxs(_a,{to:"/dashboard/persons",className:({isActive:E})=>`nav-link ${E?"active":""}`,children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),"Persons"]}),e.jsxs(_a,{to:"/dashboard/assets",className:({isActive:E})=>`nav-link ${E?"active":""}`,children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),e.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),"Assets"]}),e.jsxs(_a,{to:"/dashboard/stock-items",className:({isActive:E})=>`nav-link ${E?"active":""}`,children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"9",cy:"21",r:"1"}),e.jsx("circle",{cx:"20",cy:"21",r:"1"}),e.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),"Stock Items"]}),e.jsxs(_a,{to:"/dashboard/consumables",className:({isActive:E})=>`nav-link ${E?"active":""}`,children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})}),"Consumables"]}),e.jsxs(_a,{to:"/dashboard/rooms",className:({isActive:E})=>`nav-link ${E?"active":""}`,children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),e.jsx("path",{d:"M9 3v18M9 9h12M9 15h12"})]}),"Rooms"]}),e.jsxs(_a,{to:"/dashboard/positions",className:({isActive:E})=>`nav-link ${E?"active":""}`,children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),"Positions"]})]})}),e.jsxs("div",{className:"nav-section",children:[e.jsx("span",{className:"nav-section-title",children:"My"}),e.jsxs(_a,{to:"/dashboard/my-items",className:({isActive:E})=>`nav-link ${E?"active":""}`,children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"My Items"]})]}),I&&e.jsxs("div",{className:"nav-section",children:[e.jsx("span",{className:"nav-section-title",children:"Reports"}),e.jsxs(_a,{to:"/dashboard/reports",className:({isActive:E})=>`nav-link ${E?"active":""}`,children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M3 3h18v18H3z"}),e.jsx("path",{d:"M7 7h10"}),e.jsx("path",{d:"M7 12h10"}),e.jsx("path",{d:"M7 17h6"})]}),"Reports"]})]}),(x||_||N)&&e.jsxs("div",{className:"nav-section",children:[e.jsx("span",{className:"nav-section-title",children:"Inventory"}),(x||N)&&e.jsxs(_a,{to:"/dashboard/assets",className:({isActive:E})=>`nav-link ${E?"active":""}`,children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),e.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),"Assets"]}),N&&e.jsxs(_a,{to:"/dashboard/attribution-orders",className:({isActive:E})=>`nav-link ${E?"active":""}`,children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),e.jsx("polyline",{points:"10 9 9 9 8 9"})]}),"Attribution Orders"]}),N&&e.jsxs(_a,{to:"/dashboard/company-asset-requests",className:({isActive:E})=>`nav-link ${E?"active":""}`,children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M9 12h6"}),e.jsx("path",{d:"M9 16h6"}),e.jsx("path",{d:"M9 8h6"}),e.jsx("path",{d:"M7 22h10a2 2 0 0 0 2-2V6l-4-4H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2z"}),e.jsx("path",{d:"M15 2v4h4"})]}),"Company Asset Requests"]}),N&&e.jsxs(_a,{to:"/dashboard/administrative-certificates",className:({isActive:E})=>`nav-link ${E?"active":""}`,children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M8 13h8"}),e.jsx("path",{d:"M8 17h8"})]}),"Administrative Certificates"]}),N&&e.jsxs(_a,{to:"/dashboard/external-maintenances",className:({isActive:E})=>`nav-link ${E?"active":""}`,children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),"External Maintenances"]}),(x||_)&&e.jsxs(e.Fragment,{children:[_&&e.jsxs(_a,{to:"/dashboard/item-requests-inbox",className:({isActive:E})=>`nav-link ${E?"active":""}`,children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M9 12h6"}),e.jsx("path",{d:"M9 16h6"}),e.jsx("path",{d:"M9 8h6"}),e.jsx("path",{d:"M7 22h10a2 2 0 0 0 2-2V6l-4-4H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2z"}),e.jsx("path",{d:"M15 2v4h4"})]}),"Item Requests Inbox"]}),e.jsxs(_a,{to:"/dashboard/stock-items",className:({isActive:E})=>`nav-link ${E?"active":""}`,children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"9",cy:"21",r:"1"}),e.jsx("circle",{cx:"20",cy:"21",r:"1"}),e.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),"Stock Items"]}),e.jsxs(_a,{to:"/dashboard/consumables",className:({isActive:E})=>`nav-link ${E?"active":""}`,children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})}),"Consumables"]})]})]}),(d||b||y)&&e.jsxs("div",{className:"nav-section",children:[e.jsx("span",{className:"nav-section-title",children:"Maintenance"}),e.jsxs(_a,{to:"/dashboard/maintenances",className:({isActive:E})=>`nav-link ${E?"active":""}`,children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),"Maintenance"]})]})]}),e.jsx("div",{className:"sidebar-footer",children:e.jsxs("div",{className:"user-info",children:[e.jsx("div",{className:"user-avatar",children:p()}),e.jsxs("div",{className:"user-details",children:[e.jsx("div",{className:"user-name",children:h()}),e.jsx("div",{className:"user-role",children:g()})]}),e.jsx("button",{className:"logout-btn",onClick:m,title:"Logout",children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16,17 21,12 16,7"}),e.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})})]}),e.jsx("main",{className:"main-content",children:e.jsx(Tg,{})})]})},aj=()=>{const{user:n,isSuperuser:l}=Ja(),d=Dt(),u=c.useMemo(()=>Array.isArray(n==null?void 0:n.roles)?n.roles.map(x=>x.role_code).filter(Boolean):[],[n]),m=l||u.includes("maintenance_chief"),p=u.includes("maintenance_technician"),h=l||u.includes("exploitation_chief"),g=l||u.includes("stock_consumable_responsible"),b=l||u.includes("asset_responsible"),y=c.useMemo(()=>[{key:"persons",title:"Persons",subtitle:"Manage registered personnel",to:"/dashboard/persons",visible:l,icon:e.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"white",strokeWidth:"2",children:[e.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"})]}),iconBg:"var(--gradient-primary)"},{key:"assets",title:"Assets",subtitle:"Track equipment & assets",to:"/dashboard/assets",visible:b||h,icon:e.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"white",strokeWidth:"2",children:[e.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),e.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),iconBg:"linear-gradient(135deg, #10b981 0%, #059669 100%)"},{key:"stock_items",title:"Stock Items",subtitle:"Manage stock items inventory",to:"/dashboard/stock-items",visible:g||h,icon:e.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"white",strokeWidth:"2",children:[e.jsx("circle",{cx:"9",cy:"21",r:"1"}),e.jsx("circle",{cx:"20",cy:"21",r:"1"}),e.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),iconBg:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)"},{key:"consumables",title:"Consumables",subtitle:"Manage consumables inventory",to:"/dashboard/consumables",visible:g||h,icon:e.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"white",strokeWidth:"2",children:e.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})}),iconBg:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)"},{key:"attribution_orders",title:"Attribution Orders",subtitle:"Create and consult attribution orders",to:"/dashboard/attribution-orders",visible:b,icon:e.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"white",strokeWidth:"2",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),e.jsx("polyline",{points:"10 9 9 9 8 9"})]}),iconBg:"linear-gradient(135deg, #f97316 0%, #ea580c 100%)"},{key:"reports",title:"Reports",subtitle:"Consult and manage problem reports",to:"/dashboard/reports",visible:m||h,icon:e.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"white",strokeWidth:"2",children:[e.jsx("path",{d:"M3 3h18v18H3z"}),e.jsx("path",{d:"M7 7h10"}),e.jsx("path",{d:"M7 12h10"}),e.jsx("path",{d:"M7 17h6"})]}),iconBg:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)"},{key:"maintenance",title:"Maintenance",subtitle:"Schedule & track repairs",to:"/dashboard/maintenances",visible:m||p,icon:e.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"white",strokeWidth:"2",children:e.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),iconBg:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)"},{key:"my_items",title:"My Items",subtitle:"View what you own and report problems",to:"/dashboard/my-items",visible:!0,icon:e.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"white",strokeWidth:"2",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),iconBg:"linear-gradient(135deg, #64748b 0%, #475569 100%)"}].filter(_=>_.visible),[b,h,m,p,g,l]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{className:"page-title",children:"Dashboard"}),e.jsx("p",{className:"page-subtitle",children:"Welcome to the Equipment Management System"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"var(--space-6)"},children:y.map(x=>e.jsx("div",{className:"card",onClick:()=>d(x.to),style:{cursor:"pointer"},role:"button",tabIndex:0,onKeyDown:_=>{(_.key==="Enter"||_.key===" ")&&(_.preventDefault(),d(x.to))},children:e.jsxs("div",{className:"card-body",style:{textAlign:"center"},children:[e.jsx("div",{style:{width:"48px",height:"48px",background:x.iconBg,borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto var(--space-4)"},children:x.icon}),e.jsx("h3",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",marginBottom:"var(--space-1)"},children:x.title}),e.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-sm)"},children:x.subtitle})]})},x.key))})]})},sj=()=>{const[n,l]=c.useState([]),[d,u]=c.useState(!0),[m,p]=c.useState(""),[h,g]=c.useState(!1),[b,y]=c.useState(!1),[x,_]=c.useState(null),[N,I]=c.useState({first_name:"",last_name:"",sex:"Male",birth_date:"",is_approved:!1}),[w,O]=c.useState({username:"",password:"",account_status:"active",role_code:""}),[C,D]=c.useState(!1),[te,E]=c.useState(!1);c.useEffect(()=>{B()},[]);const B=async()=>{try{u(!0);const ae=await Tn.getAll();l(ae)}catch{p("Failed to load persons")}finally{u(!1)}},W=ae=>{const{name:ue,value:Re,type:xe,checked:ne}=ae.target;I(S=>({...S,[ue]:xe==="checkbox"?ne:Re}))},Q=ae=>{const{name:ue,value:Re}=ae.target;O(xe=>({...xe,[ue]:Re}))},P=async ae=>{ae.preventDefault(),D(!0),p("");try{await Tn.create(N),g(!1),I({first_name:"",last_name:"",sex:"Male",birth_date:"",is_approved:!1}),B()}catch{p("Failed to create person")}finally{D(!1)}},ge=ae=>{_(ae),O({username:"",password:"",account_status:"active",role_code:""}),y(!0),p("")},F=async ae=>{if(ae.preventDefault(),!!x){E(!0),p("");try{await G_.create({person_id:x.person_id,username:w.username,password:w.password,account_status:w.account_status,role_code:w.role_code||void 0}),y(!1),_(null)}catch{p("Failed to create account")}finally{E(!1)}}},R=ae=>new Date(ae).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{className:"page-title",children:"Persons"}),e.jsx("p",{className:"page-subtitle",children:"Manage all registered persons in the system"})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h2",{className:"card-title",children:"All Persons"}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>g(!0),children:[e.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Person"]})]}),e.jsx("div",{className:"table-container",children:d?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"loading-spinner",style:{margin:"0 auto"}}),e.jsx("p",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading persons..."})]}):m?e.jsx("div",{className:"empty-state",children:e.jsx("p",{className:"empty-state-title",style:{color:"var(--color-error)"},children:m})}):n.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsxs("svg",{className:"empty-state-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),e.jsx("h3",{className:"empty-state-title",children:"No persons yet"}),e.jsx("p",{className:"empty-state-text",children:"Get started by adding your first person"})]}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Sex"}),e.jsx("th",{children:"Birth Date"}),e.jsx("th",{children:"Status"}),It.isSuperuser()&&e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:n.map(ae=>e.jsxs("tr",{children:[e.jsx("td",{children:ae.person_id}),e.jsx("td",{children:e.jsxs("strong",{children:[ae.first_name," ",ae.last_name]})}),e.jsx("td",{children:ae.sex}),e.jsx("td",{children:R(ae.birth_date)}),e.jsx("td",{children:e.jsx("span",{className:`badge ${ae.is_approved?"badge-success":"badge-warning"}`,children:ae.is_approved?"Approved":"Pending"})}),It.isSuperuser()&&e.jsx("td",{children:e.jsx("button",{className:"btn btn-secondary",onClick:()=>ge(ae),children:"Create Account"})})]},ae.person_id))})]})})]}),h&&e.jsx("div",{className:"modal-overlay",onClick:()=>g(!1),children:e.jsxs("div",{className:"modal",onClick:ae=>ae.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Add New Person"}),e.jsx("button",{className:"modal-close",onClick:()=>g(!1),children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("form",{onSubmit:P,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"first_name",className:"form-label",children:"First Name"}),e.jsx("input",{type:"text",id:"first_name",name:"first_name",className:"form-input",value:N.first_name,onChange:W,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"last_name",className:"form-label",children:"Last Name"}),e.jsx("input",{type:"text",id:"last_name",name:"last_name",className:"form-input",value:N.last_name,onChange:W,required:!0})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"sex",className:"form-label",children:"Sex"}),e.jsxs("select",{id:"sex",name:"sex",className:"form-input",value:N.sex,onChange:W,required:!0,children:[e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"birth_date",className:"form-label",children:"Birth Date"}),e.jsx("input",{type:"date",id:"birth_date",name:"birth_date",className:"form-input",value:N.birth_date,onChange:W,required:!0})]})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",name:"is_approved",checked:N.is_approved,onChange:W}),"Approved"]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>g(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:C,children:C?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading-spinner"}),"Creating..."]}):"Create Person"})]})]})]})}),b&&e.jsx("div",{className:"modal-overlay",onClick:()=>y(!1),children:e.jsxs("div",{className:"modal",onClick:ae=>ae.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Create Account"}),e.jsx("button",{className:"modal-close",onClick:()=>y(!1),children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("form",{onSubmit:F,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{style:{color:"var(--color-text-secondary)",marginBottom:"1rem"},children:["Creating an account for ",e.jsxs("strong",{children:[x==null?void 0:x.first_name," ",x==null?void 0:x.last_name]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"username",className:"form-label",children:"Username"}),e.jsx("input",{type:"text",id:"username",name:"username",className:"form-input",value:w.username,onChange:Q,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"account_status",className:"form-label",children:"Account Status"}),e.jsxs("select",{id:"account_status",name:"account_status",className:"form-input",value:w.account_status,onChange:Q,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"disabled",children:"Disabled"})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",className:"form-input",value:w.password,onChange:Q,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"role_code",className:"form-label",children:"Role Code (optional)"}),e.jsx("input",{type:"text",id:"role_code",name:"role_code",className:"form-input",value:w.role_code,onChange:Q,placeholder:"e.g. maintenance_chief"})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>y(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:te,children:te?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading-spinner"}),"Creating..."]}):"Create Account"})]})]})]})})]})},nj=()=>{var Ft,Ws,q;const n=Dt(),l=Za(),[d]=Hs(),u=d.get("typeId"),m=d.get("modelId"),p=l.pathname.endsWith("/instances"),h=v=>[v==null?void 0:v.brand_name,v==null?void 0:v.model_name].filter(Boolean).join(" "),[g,b]=c.useState([]),[y,x]=c.useState([]),[_,N]=c.useState([]),[I,w]=c.useState([]),[O,C]=c.useState([]),[D,te]=c.useState([]),[E,B]=c.useState([]),[W,Q]=c.useState([]),[P,ge]=c.useState(!1),[F,R]=c.useState(null),[ae,ue]=c.useState([]),[Re,xe]=c.useState([]),[ne,S]=c.useState(!1),[L,Z]=c.useState(!1),[G,fe]=c.useState(!1),[k,$]=c.useState(!1),[re,U]=c.useState(!1),[ye,be]=c.useState(!1),[T,le]=c.useState(!1),[Me,Ge]=c.useState(!1),[De,Ke]=c.useState(null),[ze,st]=c.useState(null),[Ne,Qe]=c.useState(null),[$e,Ce]=c.useState(null),[Be,X]=c.useState(null),[J,we]=c.useState({asset_type_label:"",asset_type_code:""}),[ke,Te]=c.useState({model_name:"",model_code:"",asset_brand:"",asset_type:"",release_year:"",discontinued_year:"",is_active:!0,notes:"",warranty_expiry_in_months:""}),[z,A]=c.useState({asset_serial_number:"",asset_inventory_number:"",asset_service_tag:"",asset_name:"",asset_status:"active",attribution_order_id:"",destruction_certificate_id:""}),[de,Ee]=c.useState({asset_attribute_definition:"",is_mandatory:!1,default_value:""}),[Oe,Ie]=c.useState({asset_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[Pe,Bt]=c.useState({asset_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[tt,Ot]=c.useState({person:"",start_datetime:"",end_datetime:"",condition_on_assignment:"New"}),[Ze,kt]=c.useState(null),[We,St]=c.useState(!1),[qe,ja]=c.useState(null),[ht,aa]=c.useState(!1),[pa,Sa]=c.useState([]),[it,Ht]=c.useState(null),[Ra,wa]=c.useState(""),[$t,Ma]=c.useState(""),[Ut,At]=c.useState(!1);c.useEffect(()=>{$a(),ms(),yt(),$s(),Ia()},[]),c.useEffect(()=>{p&&(!u||!m)&&n("/dashboard/assets/types",{replace:!0})},[p,u,m,n]),c.useEffect(()=>{De?(Ba(De.asset_type_id),Ct(De.asset_type_id),st(null),w([]),B([])):(N([]),te([]))},[De]),c.useEffect(()=>{if(!p||!u||!Array.isArray(g)||g.length===0)return;const v=g.find(H=>String(H.asset_type_id)===String(u))||null;v&&(De==null?void 0:De.asset_type_id)!==v.asset_type_id&&Ke(v)},[p,u,g,De]),c.useEffect(()=>{ze?(Xt(ze.asset_model_id),Kt(ze.asset_model_id)):(w([]),B([]),Qe(null),Q([]))},[ze]),c.useEffect(()=>{if(!p||!m||!Array.isArray(_)||_.length===0)return;const v=_.find(H=>String(H.asset_model_id)===String(m))||null;v&&(ze==null?void 0:ze.asset_model_id)!==v.asset_model_id&&st(v)},[p,m,_,ze]),c.useEffect(()=>{Ne?ha(Ne.asset_id):Q([])},[Ne]);const Ka=c.useMemo(()=>{const v=new Map;return Re.forEach(H=>{var ve;H.is_active&&v.set((ve=H.asset)==null?void 0:ve.asset_id,H)}),v},[Re]),fa=c.useMemo(()=>{const v=new Map;return O.forEach(H=>{v.set(H.asset_attribute_definition_id,H)}),v},[O]),$a=async()=>{ge(!0),R(null);try{const v=await ln.getAll();b(Array.isArray(v)?v:[])}catch(v){R("Failed to fetch asset types: "+v.message),b([])}finally{ge(!1)}},ms=async()=>{try{const v=await Lu.getAll();x(Array.isArray(v)?v:[])}catch(v){console.error("Failed to fetch asset brands:",v),x([])}},Ba=async v=>{try{const H=await vt.getByAssetType(v);N(Array.isArray(H)?H:[])}catch(H){R("Failed to fetch asset models: "+H.message),N([])}},Xt=async v=>{try{const H=await Us.getAll({asset_model:v});w(Array.isArray(H)?H:[])}catch(H){R("Failed to fetch assets: "+H.message),w([])}},yt=async()=>{try{const v=await nr.getAll();C(Array.isArray(v)?v:[])}catch(v){R("Failed to fetch attribute definitions: "+v.message),C([])}},Ct=async v=>{try{const H=await Rn.getByAssetType(v);te(Array.isArray(H)?H:[])}catch(H){R("Failed to fetch asset type attributes: "+H.message),te([])}},Kt=async v=>{try{const H=await wl.getByAssetModel(v);B(Array.isArray(H)?H:[])}catch(H){R("Failed to fetch asset model attributes: "+H.message),B([])}},ha=async v=>{try{const H=await ec.getByAsset(v);Q(Array.isArray(H)?H:[])}catch(H){R("Failed to fetch asset attributes: "+H.message),Q([])}},$s=async()=>{try{const v=await Tn.getAll();ue(Array.isArray(v)?v:[])}catch(v){console.error("Failed to fetch persons:",v)}},Ia=async()=>{try{const v=await Qi.getAll();xe(Array.isArray(v)?v:[])}catch(v){console.error("Failed to fetch assignments:",v)}},Pa=v=>{const{name:H,value:ve}=v.target;Ot(Fe=>({...Fe,[H]:ve}))},ya=async v=>{var H,ve;if(v.preventDefault(),!!$e){St(!0),R(null);try{await Qi.create({...tt,asset:$e.asset_id,start_datetime:new Date(tt.start_datetime).toISOString(),end_datetime:tt.end_datetime?new Date(tt.end_datetime).toISOString():null}),le(!1),Ce(null),Ia(),alert("Asset assigned successfully!")}catch(Fe){R("Failed to assign asset: "+(((ve=(H=Fe.response)==null?void 0:H.data)==null?void 0:ve.error)||Fe.message))}finally{St(!1)}}},Pt=async v=>{var H,ve;St(!0),R(null);try{await Qi.discharge(v),X(null),Ia(),alert("Asset discharged successfully!")}catch(Fe){R("Failed to discharge asset: "+(((ve=(H=Fe.response)==null?void 0:H.data)==null?void 0:ve.error)||Fe.message))}finally{St(!1)}},ia=async v=>{var H,ve;St(!0),R(null);try{await Qi.confirm(v),Ia(),alert("Assignment confirmed successfully!")}catch(Fe){R("Failed to confirm assignment: "+(((ve=(H=Fe.response)==null?void 0:H.data)==null?void 0:ve.error)||Fe.message))}finally{St(!1)}},sa=v=>{const{name:H,value:ve}=v.target;we(Fe=>({...Fe,[H]:ve}))},ea=v=>{const{name:H,value:ve,type:Fe,checked:Nt}=v.target;Te(ca=>({...ca,[H]:Fe==="checkbox"?Nt:Fe==="number"?ve?parseInt(ve):"":ve}))},Yt=v=>{const{name:H,value:ve}=v.target;A(Fe=>({...Fe,[H]:ve}))},xt=v=>{const{name:H,value:ve,type:Fe,checked:Nt}=v.target;Ee(ca=>({...ca,[H]:Fe==="checkbox"?Nt:ve}))},Ta=v=>{const{name:H,value:ve,type:Fe,checked:Nt}=v.target;Ie(ca=>({...ca,[H]:Fe==="checkbox"?Nt:ve}))},Ea=v=>{const{name:H,value:ve,type:Fe,checked:Nt}=v.target;Bt(ca=>({...ca,[H]:Fe==="checkbox"?Nt:ve}))},Ua=async v=>{var H,ve;v.preventDefault(),St(!0),R(null);try{await ln.create(J),we({asset_type_label:"",asset_type_code:""}),S(!1),await $a()}catch(Fe){R("Failed to create asset type: "+(((ve=(H=Fe.response)==null?void 0:H.data)==null?void 0:ve.error)||Fe.message))}finally{St(!1)}},ta=async v=>{var H;if(v.preventDefault(),!De){R("Please select an asset type first");return}if(!ke.asset_brand){R("Please select a brand");return}St(!0),R(null);try{const ve={model_name:ke.model_name,model_code:ke.model_code,asset_brand:parseInt(ke.asset_brand),asset_type:De.asset_type_id,is_active:ke.is_active,notes:ke.notes||"",release_year:ke.release_year?parseInt(ke.release_year):null,discontinued_year:ke.discontinued_year?parseInt(ke.discontinued_year):null,warranty_expiry_in_months:ke.warranty_expiry_in_months?parseInt(ke.warranty_expiry_in_months):null};await vt.create(ve),Te({model_name:"",model_code:"",asset_brand:"",asset_type:"",release_year:"",discontinued_year:"",is_active:!0,notes:"",warranty_expiry_in_months:""}),Z(!1),await Ba(De.asset_type_id)}catch(ve){const Fe=(H=ve.response)!=null&&H.data?typeof ve.response.data=="object"?JSON.stringify(ve.response.data):ve.response.data:ve.message;R("Failed to create asset model: "+Fe)}finally{St(!1)}},ws=async v=>{var H;if(v.preventDefault(),!ze){R("Please select an asset model first");return}St(!0),R(null);try{const ve={...z,asset_model:ze.asset_model_id,attribution_order_id:z.attribution_order_id?Number(z.attribution_order_id):null,destruction_certificate_id:z.destruction_certificate_id?Number(z.destruction_certificate_id):null};Ze?await Us.update(Ze,ve):await Us.create(ve),A({asset_serial_number:"",asset_inventory_number:"",asset_service_tag:"",asset_name:"",asset_status:"active",attribution_order_id:"",destruction_certificate_id:""}),kt(null),fe(!1),await Xt(ze.asset_model_id)}catch(ve){const Fe=(H=ve.response)!=null&&H.data?typeof ve.response.data=="object"?JSON.stringify(ve.response.data):ve.response.data:ve.message;R(`Failed to ${Ze?"update":"create"} asset: `+Fe)}finally{St(!1)}},ps=async v=>{if(v.preventDefault(),!De){R("Please select an asset type first");return}if(!de.asset_attribute_definition){R("Please select an attribute definition");return}St(!0),R(null);try{const H={asset_type:De.asset_type_id,asset_attribute_definition:Number(de.asset_attribute_definition),is_mandatory:de.is_mandatory,default_value:de.default_value||null};await Rn.create(H),Ee({asset_attribute_definition:"",is_mandatory:!1,default_value:""}),$(!1),await Ct(De.asset_type_id)}catch(H){R("Failed to assign attribute to asset type: "+H.message)}finally{St(!1)}},Ys=async v=>{if(v.preventDefault(),!ze){R("Please select an asset model first");return}if(!Oe.asset_attribute_definition){R("Please select an attribute definition");return}St(!0),R(null);try{const H={asset_model:ze.asset_model_id,asset_attribute_definition:Number(Oe.asset_attribute_definition),value_string:Oe.value_string||null,value_number:Oe.value_number?Number(Oe.value_number):null,value_bool:Oe.value_bool,value_date:Oe.value_date||null};await wl.create(H),Ie({asset_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),U(!1),await Kt(ze.asset_model_id)}catch(H){R("Failed to add model attribute value: "+H.message)}finally{St(!1)}},en=async v=>{if(v.preventDefault(),!Ne){R("Please select an asset first");return}if(!Pe.asset_attribute_definition){R("Please select an attribute definition");return}St(!0),R(null);try{const H={asset:Ne.asset_id,asset_attribute_definition:Number(Pe.asset_attribute_definition),value_string:Pe.value_string||null,value_number:Pe.value_number?Number(Pe.value_number):null,value_bool:Pe.value_bool,value_date:Pe.value_date||null};await ec.create(H),Bt({asset_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),be(!1),await ha(Ne.asset_id)}catch(H){R("Failed to add asset attribute value: "+H.message)}finally{St(!1)}},gt=v=>{kt(v.asset_id),A({asset_serial_number:v.asset_serial_number||"",asset_inventory_number:v.asset_inventory_number||"",asset_service_tag:v.asset_service_tag||"",asset_name:v.asset_name||"",asset_status:v.asset_status||"active",attribution_order_id:v.attribution_order_id??"",destruction_certificate_id:v.destruction_certificate_id??""}),fe(!0)},Ya=async v=>{if(window.confirm("Are you sure you want to delete this asset type?"))try{await ln.delete(v),(De==null?void 0:De.asset_type_id)===v&&Ke(null),await $a()}catch(H){R("Failed to delete asset type: "+H.message)}},na=async v=>{if(window.confirm("Are you sure you want to delete this asset model?"))try{await vt.delete(v),De&&await Ba(De.asset_type_id)}catch(H){R("Failed to delete asset model: "+H.message)}},Wt=async v=>{if(window.confirm("Are you sure you want to delete this asset?"))try{await Us.delete(v),ze&&await Xt(ze.asset_model_id)}catch(H){R("Failed to delete asset: "+H.message)}},Wa=async(v,H)=>{if(window.confirm("Remove this attribute from the asset type?"))try{await Rn.delete(v,H),De&&await Ct(De.asset_type_id)}catch(ve){R("Failed to remove asset type attribute: "+ve.message)}},Va=async(v,H)=>{if(window.confirm("Remove this attribute value from the asset model?"))try{await wl.delete(v,H),ze&&await Kt(ze.asset_model_id)}catch(ve){R("Failed to remove asset model attribute: "+ve.message)}},es=async(v,H)=>{if(window.confirm("Remove this attribute value from the asset?"))try{await ec.delete(v,H),Ne&&await ha(Ne.asset_id)}catch(ve){R("Failed to remove asset attribute: "+ve.message)}},ts=v=>{Qe(v),Ge(!0)},ee=()=>{Ge(!1),be(!1)},je=()=>{aa(!1),ja(null),Sa([]),Ht(null),wa(""),Ma(""),At(!1)},Le=async v=>{var H;R(null),ja(v),Ht(null),wa(""),Ma(""),aa(!0);try{const[ve,Fe]=await Promise.all([Ks.getAll(),Us.getCurrentRoom(v.asset_id)]),Nt=Array.isArray(ve)?ve:[];Sa(Nt);const ca=((H=Fe==null?void 0:Fe.room)==null?void 0:H.room_id)??null;Ht(ca);const As=Nt.find(fs=>fs.room_id===ca);wa((As==null?void 0:As.room_name)||(ca?`Room ${ca}`:"Unknown"))}catch(ve){console.error(ve),Sa([]),R("Failed to load rooms")}},et=async v=>{var H,ve;if(v.preventDefault(),!!qe){if(!$t){R("Please select a destination room");return}try{At(!0),await Us.move(qe.asset_id,{destination_room_id:Number($t)}),ze&&await Xt(ze.asset_model_id),je()}catch(Fe){console.error(Fe),R(((ve=(H=Fe.response)==null?void 0:H.data)==null?void 0:ve.error)||"Failed to move asset")}finally{At(!1)}}},qt=It.getUser(),ka=qt==null?void 0:qt.is_superuser,Aa=((Ft=qt==null?void 0:qt.roles)==null?void 0:Ft.some(v=>v.role_code==="asset_responsible"))||ka,as=((Ws=qt==null?void 0:qt.roles)==null?void 0:Ws.some(v=>v.role_code==="exploitation_chief"))||ka,ra=Aa||as,ss=Aa||as,ks=Re.filter(v=>!v.is_confirmed_by_exploitation_chief&&v.is_active);return e.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[e.jsx("h1",{className:"page-title",children:"Assets Explorer"}),e.jsx("p",{className:"page-subtitle",children:"Manage asset types, models, and inventory"})]}),as&&ks.length>0&&e.jsxs("div",{style:{backgroundColor:"rgba(59, 130, 246, 0.1)",border:"1px solid var(--color-primary)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)",marginBottom:"var(--space-4)"},children:[e.jsxs("h3",{style:{fontSize:"var(--font-size-sm)",fontWeight:"600",color:"var(--color-primary)",marginBottom:"var(--space-2)"},children:["Pending Confirmations (",ks.length,")"]}),e.jsx("div",{style:{display:"flex",gap:"var(--space-4)",overflowX:"auto",paddingBottom:"var(--space-2)"},children:ks.map(v=>{var H,ve;return e.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-3)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",minWidth:"250px",fontSize:"var(--font-size-xs)"},children:[e.jsxs("div",{style:{fontWeight:"600"},children:[((H=v.asset)==null?void 0:H.asset_name)||"Asset"," (ID: ",(ve=v.asset)==null?void 0:ve.asset_id,")"]}),e.jsxs("div",{style:{color:"var(--color-text-secondary)"},children:["Assignee ID: ",v.person]}),e.jsx("div",{style:{marginTop:"var(--space-2)",display:"flex",justifyContent:"flex-end"},children:e.jsx("button",{onClick:()=>ia(v.assignment_id),style:{backgroundColor:"var(--color-primary)",color:"white",border:"none",padding:"4px 8px",borderRadius:"4px",cursor:"pointer"},children:"Confirm"})})]},v.assignment_id)})})]}),F&&e.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:F}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:p?"1fr":"300px 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[!p&&e.jsxs("div",{className:"card",style:{display:"flex",flexDirection:"column",overflow:"hidden",height:"100%"},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Library"}),e.jsx("button",{onClick:()=>S(!ne),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Asset Type",children:"+"})]}),ne&&e.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:e.jsxs("form",{onSubmit:Ua,children:[e.jsx("input",{type:"text",name:"asset_type_label",value:J.asset_type_label,onChange:sa,placeholder:"Type Name",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsx("input",{type:"text",name:"asset_type_code",value:J.asset_type_code,onChange:sa,placeholder:"Code (e.g. LAP)",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{type:"submit",disabled:We,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>S(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),e.jsxs("div",{style:{overflowY:"auto",flex:1},children:[g.map(v=>e.jsxs("div",{children:[e.jsxs("div",{onClick:()=>Ke((De==null?void 0:De.asset_type_id)===v.asset_type_id?null:v),style:{padding:"var(--space-3) var(--space-4)",cursor:"pointer",backgroundColor:(De==null?void 0:De.asset_type_id)===v.asset_type_id?"var(--color-bg-secondary)":"transparent",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[e.jsx("span",{style:{fontWeight:"500"},children:v.asset_type_label}),e.jsx("button",{onClick:H=>{H.stopPropagation(),Ya(v.asset_type_id)},style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]}),(De==null?void 0:De.asset_type_id)===v.asset_type_id&&e.jsxs("div",{style:{backgroundColor:"var(--color-bg-secondary)",borderBottom:"1px solid var(--color-border)"},children:[e.jsx("div",{onClick:()=>Z(!0),style:{padding:"var(--space-2) var(--space-4)",fontSize:"var(--font-size-xs)",color:"var(--color-primary)",cursor:"pointer",borderBottom:"1px dashed var(--color-border)",textAlign:"center"},children:"+ Add Model"}),_.map(H=>e.jsxs("div",{onClick:()=>st(H),style:{padding:"var(--space-2) var(--space-4)",paddingLeft:"var(--space-8)",cursor:"pointer",backgroundColor:(ze==null?void 0:ze.asset_model_id)===H.asset_model_id?"var(--color-primary)":"transparent",color:(ze==null?void 0:ze.asset_model_id)===H.asset_model_id?"white":"var(--color-text)",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"var(--font-size-sm)"},children:[e.jsx("span",{children:h(H)||`Model ${H.asset_model_id}`}),(ze==null?void 0:ze.asset_model_id)===H.asset_model_id&&e.jsx("button",{onClick:ve=>{ve.stopPropagation(),na(H.asset_model_id)},style:{border:"none",background:"none",color:"white",cursor:"pointer",opacity:.8},children:""})]},H.asset_model_id))]})]},v.asset_type_id)),g.length===0&&!P&&e.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No asset types."})]})]}),e.jsx("div",{className:"card",style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:L?e.jsxs("div",{style:{padding:"var(--space-6)",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-6)"},children:[e.jsxs("h2",{children:["Add New Model for ",De==null?void 0:De.asset_type_label]}),e.jsx("button",{onClick:()=>Z(!1),style:{padding:"var(--space-2) var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]}),y.length===0?e.jsx("div",{style:{color:"#c33",backgroundColor:"#fee",padding:"var(--space-4)",borderRadius:"var(--radius-sm)"},children:"No asset brands found. Please create a brand first."}):e.jsxs("form",{onSubmit:ta,style:{maxWidth:"600px"},children:[e.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Brand *"}),e.jsxs("select",{name:"asset_brand",value:ke.asset_brand,onChange:ea,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"},children:[e.jsx("option",{value:"",children:"Select a brand..."}),y.map(v=>e.jsx("option",{value:v.asset_brand_id,children:v.brand_name},v.asset_brand_id))]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Model Name *"}),e.jsx("input",{type:"text",name:"model_name",value:ke.model_name,onChange:ea,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Model Code *"}),e.jsx("input",{type:"text",name:"model_code",value:ke.model_code,onChange:ea,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Release Year"}),e.jsx("input",{type:"number",name:"release_year",value:ke.release_year,onChange:ea,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Warranty (Months)"}),e.jsx("input",{type:"number",name:"warranty_expiry_in_months",value:ke.warranty_expiry_in_months,onChange:ea,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]})]}),e.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Notes"}),e.jsx("textarea",{name:"notes",value:ke.notes,onChange:ea,rows:"3",style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),e.jsx("div",{style:{marginBottom:"var(--space-6)"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",name:"is_active",checked:ke.is_active,onChange:ea}),"Active Model"]})}),e.jsx("button",{type:"submit",disabled:We,style:{padding:"var(--space-2) var(--space-6)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:We?"Creating...":"Create Model"})]})]}):ze?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("h2",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",margin:0},children:[h(ze)||ze.model_name||""," ",e.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-md)",fontWeight:"normal"},children:["(",ze.model_code,")"]})]}),e.jsxs("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)",marginTop:"var(--space-1)"},children:[ze.brand_name,"  ",I.length," Assets"]})]}),e.jsx("button",{onClick:()=>{kt(null),A({asset_serial_number:"",asset_inventory_number:"",asset_service_tag:"",asset_name:"",asset_status:"active",attribution_order_id:0,destruction_certificate_id:0}),fe(!0)},style:{backgroundColor:"var(--color-primary)",color:"white",border:"none",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:"pointer",fontWeight:"500"},children:"+ Add Asset"})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"var(--space-4)"},children:[!p&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"var(--space-4)",marginBottom:"var(--space-6)"},children:e.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[e.jsx("div",{style:{fontWeight:"600"},children:"Asset Type Attributes"}),e.jsx("button",{onClick:()=>$(!k),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Assign"})]}),k&&e.jsxs("form",{onSubmit:ps,style:{marginBottom:"var(--space-4)"},children:[e.jsxs("select",{name:"asset_attribute_definition",value:de.asset_attribute_definition,onChange:xt,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select attribute definition..."}),O.map(v=>e.jsx("option",{value:v.asset_attribute_definition_id,children:v.description||`Attribute ${v.asset_attribute_definition_id}`},v.asset_attribute_definition_id))]}),e.jsx("input",{type:"text",name:"default_value",placeholder:"Default value",value:de.default_value,onChange:xt,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[e.jsx("input",{type:"checkbox",name:"is_mandatory",checked:de.is_mandatory,onChange:xt}),"Mandatory"]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[e.jsx("button",{type:"submit",disabled:We,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>$(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),e.jsx("div",{style:{maxHeight:"240px",overflowY:"auto"},children:D.length===0?e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned."}):D.map(v=>{const H=v.definition||fa.get(v.asset_attribute_definition);return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:(H==null?void 0:H.description)||`Attribute ${v.asset_attribute_definition}`}),e.jsxs("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:[(H==null?void 0:H.data_type)||"type",H!=null&&H.unit?`  ${H.unit}`:"",v.is_mandatory?"  mandatory":"",v.default_value?`  default: ${v.default_value}`:""]})]}),e.jsx("button",{onClick:()=>Wa(v.asset_type,v.asset_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${v.asset_type}-${v.asset_attribute_definition}`)})})]})}),e.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)",marginBottom:"var(--space-6)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[e.jsx("div",{style:{fontWeight:"600"},children:"Asset Model Attributes"}),e.jsx("button",{onClick:()=>U(!re),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add Value"})]}),re&&e.jsxs("form",{onSubmit:Ys,style:{marginBottom:"var(--space-4)"},children:[e.jsxs("select",{name:"asset_attribute_definition",value:Oe.asset_attribute_definition,onChange:Ta,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select attribute definition..."}),O.map(v=>e.jsx("option",{value:v.asset_attribute_definition_id,children:v.description||`Attribute ${v.asset_attribute_definition_id}`},v.asset_attribute_definition_id))]}),(()=>{var ve;const v=fa.get(Number(Oe.asset_attribute_definition)),H=(ve=v==null?void 0:v.data_type)==null?void 0:ve.toLowerCase();return H==="number"?e.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:Oe.value_number,onChange:Ta,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):H==="bool"||H==="boolean"?e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[e.jsx("input",{type:"checkbox",name:"value_bool",checked:Oe.value_bool,onChange:Ta}),"True"]}):H==="date"?e.jsx("input",{type:"date",name:"value_date",value:Oe.value_date,onChange:Ta,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):e.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:Oe.value_string,onChange:Ta,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[e.jsx("button",{type:"submit",disabled:We,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>U(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),e.jsx("div",{style:{maxHeight:"240px",overflowY:"auto"},children:E.length===0?e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No model attribute values."}):E.map(v=>{const H=v.definition||fa.get(v.asset_attribute_definition),ve=v.value_string??v.value_number??v.value_bool??v.value_date??"";return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:(H==null?void 0:H.description)||`Attribute ${v.asset_attribute_definition}`}),e.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:ve===""?"No value":String(ve)})]}),e.jsx("button",{onClick:()=>Va(v.asset_model,v.asset_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${v.asset_model}-${v.asset_attribute_definition}`)})})]})]}),G&&e.jsxs("div",{style:{marginBottom:"var(--space-6)",padding:"var(--space-4)",backgroundColor:"var(--color-bg-secondary)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"var(--space-4)"},children:Ze?"Edit Asset":"New Asset"}),e.jsxs("form",{onSubmit:ws,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Name"}),e.jsx("input",{type:"text",name:"asset_name",value:z.asset_name,onChange:Yt,placeholder:"Asset Name",style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Status"}),e.jsxs("select",{name:"asset_status",value:z.asset_status,onChange:Yt,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"},children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"retired",children:"Retired"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Serial Number"}),e.jsx("input",{type:"text",name:"asset_serial_number",value:z.asset_serial_number,onChange:Yt,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Inventory Number"}),e.jsx("input",{type:"text",name:"asset_inventory_number",value:z.asset_inventory_number,onChange:Yt,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]})]}),e.jsxs("div",{style:{marginTop:"var(--space-4)",display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{type:"submit",style:{padding:"var(--space-2) var(--space-4)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Save Asset"}),e.jsx("button",{type:"button",onClick:()=>fe(!1),style:{padding:"var(--space-2) var(--space-4)",backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})]})]}),I.length===0?e.jsx("div",{style:{textAlign:"center",color:"var(--color-text-secondary)",padding:"var(--space-8)"},children:"No assets found for this model."}):e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"var(--font-size-sm)"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid var(--color-border)",textAlign:"left"},children:[e.jsx("th",{style:{padding:"var(--space-2)"},children:"Name"}),e.jsx("th",{style:{padding:"var(--space-2)"},children:"Serial / Tag"}),e.jsx("th",{style:{padding:"var(--space-2)"},children:"Status"}),e.jsx("th",{style:{padding:"var(--space-2)",textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:I.map(v=>e.jsxs("tr",{onClick:()=>ts(v),style:{borderBottom:"1px solid var(--color-border)",cursor:"pointer"},children:[e.jsxs("td",{style:{padding:"var(--space-3) var(--space-2)"},children:[e.jsx("div",{style:{fontWeight:"500"},children:v.asset_name||"Unnamed Asset"}),e.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:v.asset_inventory_number})]}),e.jsxs("td",{style:{padding:"var(--space-3) var(--space-2)"},children:[e.jsx("div",{children:v.asset_serial_number}),e.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:v.asset_service_tag})]}),e.jsx("td",{style:{padding:"var(--space-3) var(--space-2)"},children:e.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"var(--font-size-xs)",backgroundColor:v.asset_status==="active"?"rgba(16, 185, 129, 0.15)":"var(--color-bg-secondary)",color:v.asset_status==="active"?"var(--color-success)":"var(--color-text-secondary)"},children:v.asset_status})}),e.jsxs("td",{style:{padding:"var(--space-3) var(--space-2)",textAlign:"right"},children:[e.jsx("button",{onClick:H=>{H.stopPropagation(),ts(v)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-text-secondary)",cursor:"pointer",fontWeight:"500"},children:"Attributes"}),e.jsx("button",{onClick:H=>{H.stopPropagation(),gt(v)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-primary)",cursor:"pointer",fontWeight:"500"},children:"Edit"}),ra&&e.jsx("button",{onClick:H=>{H.stopPropagation(),Le(v)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-primary)",cursor:"pointer",fontWeight:"500"},children:"Move"}),ss&&(()=>{const H=Ka.get(v.asset_id);return H?e.jsx("button",{onClick:ve=>{ve.stopPropagation(),X(H)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontWeight:"500"},children:"Discharge"}):e.jsx("button",{onClick:ve=>{ve.stopPropagation(),Ce(v);const Fe=new Date,Nt=Fe.getTimezoneOffset()*6e4,ca=new Date(Fe-Nt).toISOString().slice(0,16);Ot({person:"",start_datetime:ca,end_datetime:"",condition_on_assignment:v.asset_status==="active"?"Good":"Needs Repair"}),le(!0)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"#10b981",cursor:"pointer",fontWeight:"500"},children:"Assign"})})(),e.jsx("button",{onClick:H=>{H.stopPropagation(),Wt(v.asset_id)},style:{background:"none",border:"none",color:"#c33",cursor:"pointer",fontWeight:"500"},children:"Delete"})]})]},v.asset_id))})]})]})]}):De?e.jsxs("div",{style:{padding:"var(--space-6)",overflowY:"auto"},children:[e.jsxs("h2",{style:{marginBottom:"var(--space-4)"},children:[De.asset_type_label," Attributes"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"var(--space-4)"},children:!p&&e.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[e.jsx("div",{style:{fontWeight:"600"},children:"Asset Type Attributes"}),e.jsx("button",{onClick:()=>$(!k),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Assign"})]}),k&&e.jsxs("form",{onSubmit:ps,style:{marginBottom:"var(--space-4)"},children:[e.jsxs("select",{name:"asset_attribute_definition",value:de.asset_attribute_definition,onChange:xt,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select attribute definition..."}),O.map(v=>e.jsx("option",{value:v.asset_attribute_definition_id,children:v.description||`Attribute ${v.asset_attribute_definition_id}`},v.asset_attribute_definition_id))]}),e.jsx("input",{type:"text",name:"default_value",placeholder:"Default value",value:de.default_value,onChange:xt,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[e.jsx("input",{type:"checkbox",name:"is_mandatory",checked:de.is_mandatory,onChange:xt}),"Mandatory"]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[e.jsx("button",{type:"submit",disabled:We,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>$(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),e.jsx("div",{style:{maxHeight:"320px",overflowY:"auto"},children:D.length===0?e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned."}):D.map(v=>{const H=v.definition||fa.get(v.asset_attribute_definition);return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:(H==null?void 0:H.description)||`Attribute ${v.asset_attribute_definition}`}),e.jsxs("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:[(H==null?void 0:H.data_type)||"type",H!=null&&H.unit?`  ${H.unit}`:"",v.is_mandatory?"  mandatory":"",v.default_value?`  default: ${v.default_value}`:""]})]}),e.jsx("button",{onClick:()=>Wa(v.asset_type,v.asset_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${v.asset_type}-${v.asset_attribute_definition}`)})})]})})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--color-text-secondary)"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"var(--space-4)",opacity:.2},children:""}),e.jsx("p",{children:"Select a model from the sidebar to view assets."})]})})]}),T&&$e&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{backgroundColor:"white",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"500px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},children:[e.jsxs("h2",{style:{marginBottom:"var(--space-4)"},children:["Assign Asset: ",$e.asset_name]}),e.jsxs("form",{onSubmit:ya,children:[e.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Assign to Person"}),e.jsxs("select",{name:"person",value:tt.person,onChange:Pa,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"},children:[e.jsx("option",{value:"",children:"Select a person..."}),ae.map(v=>e.jsxs("option",{value:v.person_id,children:[v.first_name," ",v.last_name," (",v.person_id,")"]},v.person_id))]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Start Date (Automatic)"}),e.jsx("input",{type:"datetime-local",name:"start_datetime",value:tt.start_datetime,onChange:Pa,required:!0,readOnly:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-secondary)",cursor:"not-allowed"}})]})}),e.jsxs("div",{style:{marginBottom:"var(--space-6)"},children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Condition"}),e.jsx("input",{type:"text",name:"condition_on_assignment",value:tt.condition_on_assignment,onChange:Pa,placeholder:"e.g. Good, New",required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:()=>{le(!1),Ce(null)},style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"}),e.jsx("button",{type:"submit",disabled:We,style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:We?"Assigning...":"Assign Asset"})]})]})]})}),Me&&Ne&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"var(--space-4)"},children:e.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"900px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12,marginBottom:"var(--space-4)"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:Ne.asset_name||`Asset ${Ne.asset_id}`}),e.jsxs("div",{style:{marginTop:6,color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:["ID: ",Ne.asset_id,Ne.asset_inventory_number?`  Inv: ${Ne.asset_inventory_number}`:"",Ne.asset_serial_number?`  SN: ${Ne.asset_serial_number}`:"",Ne.asset_service_tag?`  Tag: ${Ne.asset_service_tag}`:""]})]}),e.jsx("button",{type:"button",onClick:ee,style:{border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",cursor:"pointer"},children:"Close"})]}),e.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[e.jsx("div",{style:{fontWeight:"600"},children:"Asset Attributes"}),e.jsx("button",{onClick:()=>be(!ye),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add Value"})]}),ye&&e.jsxs("form",{onSubmit:en,style:{marginBottom:"var(--space-4)"},children:[e.jsxs("select",{name:"asset_attribute_definition",value:Pe.asset_attribute_definition,onChange:Ea,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select attribute definition..."}),O.map(v=>e.jsx("option",{value:v.asset_attribute_definition_id,children:v.description||`Attribute ${v.asset_attribute_definition_id}`},v.asset_attribute_definition_id))]}),(()=>{var ve;const v=fa.get(Number(Pe.asset_attribute_definition)),H=(ve=v==null?void 0:v.data_type)==null?void 0:ve.toLowerCase();return H==="number"?e.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:Pe.value_number,onChange:Ea,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):H==="bool"||H==="boolean"?e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[e.jsx("input",{type:"checkbox",name:"value_bool",checked:Pe.value_bool,onChange:Ea}),"True"]}):H==="date"?e.jsx("input",{type:"date",name:"value_date",value:Pe.value_date,onChange:Ea,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):e.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:Pe.value_string,onChange:Ea,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[e.jsx("button",{type:"submit",disabled:We,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>be(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),W.length===0?e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attribute values set for this asset."}):W.map(v=>{const H=v.definition||fa.get(v.asset_attribute_definition),ve=v.value_string??v.value_number??v.value_bool??v.value_date??"";return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:(H==null?void 0:H.description)||`Attribute ${v.asset_attribute_definition}`}),e.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:ve===""?"No value":String(ve)})]}),e.jsx("button",{onClick:()=>es(v.asset,v.asset_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${v.asset}-${v.asset_attribute_definition}`)})]})]})}),Be&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"400px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[e.jsx("h2",{style:{marginBottom:"var(--space-4)"},children:"Confirm Discharge"}),e.jsxs("p",{style:{marginBottom:"var(--space-6)"},children:["Are you sure you want to end the assignment of ",e.jsx("strong",{children:(q=Be.asset)==null?void 0:q.asset_name})," to person ",e.jsx("strong",{children:Be.person}),"?",e.jsx("br",{}),e.jsx("br",{}),"The end date will be set to right now."]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:()=>X(null),style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>Pt(Be.assignment_id),disabled:We,style:{padding:"var(--space-2) var(--space-4)",background:"#ef4444",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:We?"Discharging...":"Confirm Discharge"})]})]})}),ht&&qe&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"520px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,marginBottom:"var(--space-4)"},children:[e.jsxs("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:["Move Asset: ",qe.asset_name||`Asset ${qe.asset_id}`]}),e.jsx("button",{type:"button",onClick:()=>!Ut&&je(),style:{border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",cursor:"pointer"},children:"Close"})]}),e.jsxs("form",{onSubmit:et,children:[e.jsxs("div",{style:{marginBottom:"var(--space-6)"},children:[e.jsxs("div",{style:{marginBottom:"var(--space-3)",padding:"var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[e.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"2px"},children:"Current room"}),e.jsx("div",{style:{fontWeight:600},children:Ra||"Unknown"})]}),e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Destination room"}),e.jsxs("select",{value:$t,onChange:v=>Ma(v.target.value),required:!0,disabled:Ut,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[e.jsx("option",{value:"",children:"Select a room..."}),pa.map(v=>e.jsxs("option",{value:v.room_id,children:[v.room_name||`Room ${v.room_id}`,v.room_type_label?` (${v.room_type_label})`:""]},v.room_id))]})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:()=>!Ut&&je(),style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"}),e.jsx("button",{type:"submit",disabled:Ut||!$t,style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:Ut?"Moving...":"Move"})]})]})]})})]})},rj=()=>{const n=Dt(),[l,d]=c.useState([]),[u,m]=c.useState([]),[p,h]=c.useState(null),[g,b]=c.useState([]),[y,x]=c.useState(!1),[_,N]=c.useState(!1),[I,w]=c.useState(null),[O,C]=c.useState(!1),[D,te]=c.useState(!1),[E,B]=c.useState(!1),[W,Q]=c.useState({asset_type_label:"",asset_type_code:""}),[P,ge]=c.useState({description:"",data_type:"",unit:""}),[F,R]=c.useState(!1),[ae,ue]=c.useState({asset_attribute_definition:"",is_mandatory:!1,default_value:""});c.useEffect(()=>{Re(),Z()},[]);const Re=async()=>{N(!0),w(null);try{const T=await ln.getAll();d(Array.isArray(T)?T:[])}catch(T){w("Failed to fetch asset types: "+T.message),d([])}finally{N(!1)}},xe=async T=>{x(!0),w(null);try{const le=await Rn.getByAssetType(T);b(Array.isArray(le)?le:[])}catch(le){w("Failed to fetch type attributes: "+le.message),b([])}finally{x(!1)}},ne=T=>{const{name:le,value:Me,type:Ge,checked:De}=T.target;ue(Ke=>({...Ke,[le]:Ge==="checkbox"?De:Me}))},S=async T=>{if(T.preventDefault(),!p){w("Please select an asset type first");return}if(!ae.asset_attribute_definition){w("Please select an attribute definition");return}B(!0),w(null);try{const le={asset_type:p.asset_type_id,asset_attribute_definition:Number(ae.asset_attribute_definition),is_mandatory:!!ae.is_mandatory,default_value:ae.default_value||null};await Rn.create(le),ue({asset_attribute_definition:"",is_mandatory:!1,default_value:""}),R(!1),await xe(p.asset_type_id)}catch(le){w("Failed to add type attribute: "+le.message)}finally{B(!1)}},L=async T=>{if(p&&window.confirm("Remove this attribute from the asset type?"))try{await Rn.delete(p.asset_type_id,T),await xe(p.asset_type_id)}catch(le){w("Failed to remove type attribute: "+le.message)}},Z=async()=>{try{const T=await nr.getAll();m(Array.isArray(T)?T:[])}catch(T){w("Failed to fetch attribute definitions: "+T.message),m([])}},G=T=>{const{name:le,value:Me}=T.target;Q(Ge=>({...Ge,[le]:Me}))},fe=async T=>{var le,Me;T.preventDefault(),B(!0),w(null);try{await ln.create(W),Q({asset_type_label:"",asset_type_code:""}),C(!1),await Re()}catch(Ge){w("Failed to create asset type: "+(((Me=(le=Ge.response)==null?void 0:le.data)==null?void 0:Me.error)||Ge.message))}finally{B(!1)}},k=async T=>{if(window.confirm("Are you sure you want to delete this asset type?"))try{await ln.delete(T),await Re()}catch(le){w("Failed to delete asset type: "+le.message)}},$=T=>{n(`/dashboard/assets/models?typeId=${T.asset_type_id}`)},re=async T=>{h(T),R(!1),ue({asset_attribute_definition:"",is_mandatory:!1,default_value:""}),await xe(T.asset_type_id)},U=new Set((Array.isArray(g)?g:[]).map(T=>T.asset_attribute_definition)),ye=(Array.isArray(u)?u:[]).filter(T=>!U.has(T.asset_attribute_definition_id)),be=()=>{n("/dashboard/assets/attribute-definitions")};return e.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[e.jsx("h1",{className:"page-title",children:"Assets"}),e.jsx("p",{className:"page-subtitle",children:"Select an asset type"})]}),I&&e.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:I}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Types"}),e.jsx("button",{onClick:()=>C(!O),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Asset Type",children:"+"})]}),O&&e.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:e.jsxs("form",{onSubmit:fe,children:[e.jsx("input",{type:"text",name:"asset_type_label",value:W.asset_type_label,onChange:G,placeholder:"Type Name",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsx("input",{type:"text",name:"asset_type_code",value:W.asset_type_code,onChange:G,placeholder:"Code (e.g. LAP)",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{type:"submit",disabled:E,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>C(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),e.jsxs("div",{style:{overflowY:"auto",flex:1},children:[l.map(T=>e.jsxs("div",{onClick:()=>$(T),style:{padding:"var(--space-3) var(--space-4)",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[e.jsx("span",{style:{fontWeight:"500"},children:T.asset_type_label}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[e.jsx("button",{onClick:le=>{le.stopPropagation(),re(T)},style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Attributes"}),e.jsx("button",{onClick:le=>{le.stopPropagation(),k(T.asset_type_id)},style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]})]},T.asset_type_id)),l.length===0&&!_&&e.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No asset types."})]})]}),e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsxs("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:["Type Attributes ",p?` ${p.asset_type_label}`:""]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{onClick:()=>R(T=>!T),disabled:!p,style:{border:"none",background:"none",color:"var(--color-primary)",cursor:p?"pointer":"not-allowed",opacity:p?1:.6},children:"+ Add"}),e.jsx("button",{onClick:be,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Manage"})]})]}),e.jsx("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:p?e.jsxs(e.Fragment,{children:[F&&e.jsxs("form",{onSubmit:S,style:{marginBottom:"var(--space-4)"},children:[e.jsxs("select",{name:"asset_attribute_definition",value:ae.asset_attribute_definition,onChange:ne,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select attribute definition..."}),ye.map(T=>e.jsx("option",{value:T.asset_attribute_definition_id,children:T.description||`Attribute ${T.asset_attribute_definition_id}`},T.asset_attribute_definition_id))]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[e.jsx("input",{type:"checkbox",name:"is_mandatory",checked:ae.is_mandatory,onChange:ne}),"Mandatory"]}),e.jsx("input",{type:"text",name:"default_value",placeholder:"Default value (optional)",value:ae.default_value,onChange:ne,style:{padding:"var(--space-2)"}})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{type:"submit",disabled:E,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>R(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),y&&e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!y&&g.length===0&&e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned to this type."}),!y&&g.map(T=>{const le=T.definition||u.find(Me=>Me.asset_attribute_definition_id===T.asset_attribute_definition);return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:(le==null?void 0:le.description)||`Attribute ${T.asset_attribute_definition}`}),e.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[(le==null?void 0:le.data_type)||"n/a",le!=null&&le.unit?`  ${le.unit}`:"",T.is_mandatory?"  mandatory":"",T.default_value?`  default: ${T.default_value}`:""]})]}),e.jsx("button",{onClick:()=>L(T.asset_attribute_definition),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},`${T.asset_type}-${T.asset_attribute_definition}`)})]}):e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:'Click "Attributes" on a type to view its attributes.'})})]})]})]})},lj=()=>{const n=Dt(),l=Za(),u=c.useMemo(()=>new URLSearchParams(l.search),[l.search]).get("typeId"),[m,p]=c.useState(null),[h,g]=c.useState([]),[b,y]=c.useState([]),[x,_]=c.useState(!1),[N,I]=c.useState(null),[w,O]=c.useState(!1),[C,D]=c.useState(!1),[te,E]=c.useState({asset_attribute_definition:"",is_mandatory:!1,default_value:""});c.useEffect(()=>{if(!u){I("typeId is required");return}B()},[u]);const B=async()=>{_(!0),I(null);try{const[R,ae,ue]=await Promise.all([ln.getById(u),nr.getAll(),Rn.getByAssetType(u)]);p(R),y(Array.isArray(ae)?ae:[]),g(Array.isArray(ue)?ue:[])}catch(R){I("Failed to load type attributes: "+R.message)}finally{_(!1)}},W=R=>{const{name:ae,value:ue,type:Re,checked:xe}=R.target;E(ne=>({...ne,[ae]:Re==="checkbox"?xe:ue}))},Q=async R=>{if(R.preventDefault(),!te.asset_attribute_definition){I("Please select an attribute definition");return}D(!0),I(null);try{const ae={asset_type:Number(u),asset_attribute_definition:Number(te.asset_attribute_definition),is_mandatory:te.is_mandatory,default_value:te.default_value||null};await Rn.create(ae),E({asset_attribute_definition:"",is_mandatory:!1,default_value:""}),O(!1),await B()}catch(ae){I("Failed to add attribute to type: "+ae.message)}finally{D(!1)}},P=async R=>{if(window.confirm("Remove this attribute from the asset type?"))try{await Rn.delete(Number(u),Number(R)),await B()}catch(ae){I("Failed to remove type attribute: "+ae.message)}},ge=c.useMemo(()=>new Set(h.map(R=>R.asset_attribute_definition)),[h]),F=c.useMemo(()=>b.filter(R=>!ge.has(R.asset_attribute_definition_id)),[b,ge]);return e.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"flex-end",gap:"var(--space-4)"},children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Asset Type Attributes"}),e.jsxs("p",{className:"page-subtitle",children:[m?m.asset_type_label:"Type","  Manage attributes"]})]}),e.jsx("button",{onClick:()=>n("/dashboard/assets/types"),style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back to Types","aria-label":"Back to Types",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})})]}),N&&e.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:N}),e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Attributes"}),e.jsx("button",{onClick:()=>O(!w),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add"})]}),w&&e.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:e.jsxs("form",{onSubmit:Q,children:[e.jsxs("select",{name:"asset_attribute_definition",value:te.asset_attribute_definition,onChange:W,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select attribute definition"}),F.map(R=>e.jsxs("option",{value:R.asset_attribute_definition_id,children:[R.description," (",R.data_type||"n/a",R.unit?`  ${R.unit}`:"",")"]},R.asset_attribute_definition_id))]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[e.jsx("input",{type:"checkbox",name:"is_mandatory",checked:te.is_mandatory,onChange:W}),"Mandatory"]}),e.jsx("input",{type:"text",name:"default_value",placeholder:"Default value (optional)",value:te.default_value,onChange:W,style:{padding:"var(--space-2)"}})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{type:"submit",disabled:C,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>O(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),e.jsxs("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:[x&&e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!x&&h.length===0&&e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned to this type."}),h.map(R=>{var ae,ue,Re;return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:((ae=R.definition)==null?void 0:ae.description)||`Definition ${R.asset_attribute_definition}`}),e.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[((ue=R.definition)==null?void 0:ue.data_type)||"n/a",(Re=R.definition)!=null&&Re.unit?`  ${R.definition.unit}`:"",R.is_mandatory?"  mandatory":"",R.default_value?`  default: ${R.default_value}`:""]})]}),e.jsx("button",{onClick:()=>P(R.asset_attribute_definition),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},R.asset_attribute_definition)})]})]})]})},oj=()=>{const n=Dt(),[l]=Hs(),d=l.get("typeId"),u=A=>[A==null?void 0:A.brand_name,A==null?void 0:A.model_name].filter(Boolean).join(" "),[m,p]=c.useState(null),[h,g]=c.useState([]),[b,y]=c.useState(null),[x,_]=c.useState([]),[N,I]=c.useState([]),[w,O]=c.useState([]),[C,D]=c.useState(!1),[te,E]=c.useState(!1),[B,W]=c.useState(null),[Q,P]=c.useState({asset_brand:"",model_name:"",model_code:""}),[ge,F]=c.useState(!1),[R,ae]=c.useState({asset_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[ue,Re]=c.useState(!1),[xe,ne]=c.useState(null),[S,L]=c.useState(!1),[Z,G]=c.useState(!1),[fe,k]=c.useState(!1),[$,re]=c.useState({brand_name:"",brand_photo:null}),[U,ye]=c.useState(null),be=A=>String(A||"").trim().toUpperCase().replace(/\s+/g,"_").replace(/[^A-Z0-9_\-]/g,"").slice(0,16);c.useEffect(()=>{d&&T(d)},[d]),c.useEffect(()=>{Ge(),De()},[]),c.useEffect(()=>{if(!b){O([]),F(!1),ae({asset_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""});return}Ke(b.asset_model_id)},[b]);const T=async A=>{Re(!0),ne(null);try{const[de,Ee]=await Promise.all([ln.getById(A),vt.getByAssetType(A)]);p(de||null),g(Array.isArray(Ee)?Ee:[]),y(null)}catch(de){ne("Failed to fetch asset models: "+de.message),p(null),g([]),y(null)}finally{Re(!1)}},le=A=>{const{name:de,value:Ee,type:Oe,files:Ie}=A.target;if(Oe==="file"&&Ie&&Ie[0]){const Pe=Ie[0];re(Bt=>({...Bt,[de]:Pe})),ye(URL.createObjectURL(Pe))}else re(Pe=>({...Pe,[de]:Ee}))},Me=async A=>{var Ee,Oe,Ie;if(A.preventDefault(),!It.isSuperuser())return;const de=(Ee=$.brand_name)==null?void 0:Ee.trim();if(!de){ne("Please enter a brand name");return}k(!0),ne(null);try{const Pe=new FormData;Pe.append("brand_name",de),Pe.append("brand_code",be(de)),Pe.append("is_active","true"),$.brand_photo&&Pe.append("brand_photo",$.brand_photo),await Lu.create(Pe),re({brand_name:"",brand_photo:null}),ye(null),G(!1),await De()}catch(Pe){ne("Failed to create asset brand: "+(((Ie=(Oe=Pe.response)==null?void 0:Oe.data)==null?void 0:Ie.error)||Pe.message))}finally{k(!1)}},Ge=async()=>{try{const A=await nr.getAll();I(Array.isArray(A)?A:[])}catch{I([])}},De=async()=>{try{const A=await Lu.getAll();_(Array.isArray(A)?A:[])}catch{_([])}},Ke=async A=>{try{const de=await wl.getByAssetModel(A);O(Array.isArray(de)?de:[])}catch(de){ne("Failed to fetch asset model attributes: "+de.message),O([])}},ze=A=>{const{name:de,value:Ee,type:Oe,checked:Ie}=A.target;ae(Pe=>({...Pe,[de]:Oe==="checkbox"?Ie:Ee}))},st=A=>{const{name:de,value:Ee}=A.target;P(Oe=>({...Oe,[de]:Ee}))},Ne=async A=>{var de,Ee;if(A.preventDefault(),!!d){if(!Q.asset_brand){ne("Please select a brand");return}E(!0),ne(null);try{const Oe={asset_type:Number(d),asset_brand:Number(Q.asset_brand),model_name:Q.model_name||null,model_code:Q.model_code||null};B?await vt.update(B.asset_model_id,Oe):await vt.create(Oe),P({asset_brand:"",model_name:"",model_code:""}),D(!1),W(null),await T(d)}catch(Oe){ne(`Failed to ${B?"update":"create"} asset model: `+(((Ee=(de=Oe.response)==null?void 0:de.data)==null?void 0:Ee.error)||Oe.message))}finally{E(!1)}}},Qe=A=>{W(A),P({asset_brand:A.asset_brand,model_name:A.model_name||"",model_code:A.model_code||""}),D(!0)},$e=()=>{D(!1),W(null),P({asset_brand:"",model_name:"",model_code:""})},Ce=async A=>{if(A.preventDefault(),!b){ne("Please select an asset model first");return}if(!R.asset_attribute_definition){ne("Please select an attribute definition");return}L(!0),ne(null);try{const de={asset_model:b.asset_model_id,asset_attribute_definition:Number(R.asset_attribute_definition),value_string:R.value_string||null,value_number:R.value_number?Number(R.value_number):null,value_bool:R.value_bool,value_date:R.value_date||null};await wl.create(de),ae({asset_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),F(!1),await Ke(b.asset_model_id)}catch(de){ne("Failed to add model attribute value: "+de.message)}finally{L(!1)}},Be=async(A,de)=>{if(window.confirm("Remove this attribute value from the asset model?"))try{await wl.delete(A,de),b&&await Ke(b.asset_model_id)}catch(Ee){ne("Failed to remove asset model attribute: "+Ee.message)}},X=c.useMemo(()=>{const A=new Map;return(Array.isArray(N)?N:[]).forEach(de=>{A.set(de.asset_attribute_definition_id,de)}),A},[N]),J=c.useMemo(()=>{if(!b)return N;const A=new Set((Array.isArray(w)?w:[]).map(de=>de.asset_attribute_definition));return(Array.isArray(N)?N:[]).filter(de=>!A.has(de.asset_attribute_definition_id))},[N,w,b]),we=()=>{n("/dashboard/assets/types")},ke=A=>{n(`/dashboard/assets/instances?typeId=${d}&modelId=${A.asset_model_id}`)},Te=A=>{n(`/dashboard/assets/models/${A.asset_model_id}/compatibility?typeId=${d}`)},z=A=>{n(`/dashboard/assets/models/${A.asset_model_id}/default-composition?typeId=${d}`)};return d?e.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[e.jsx("h1",{className:"page-title",children:"Assets"}),e.jsxs("p",{className:"page-subtitle",children:["Select a model",m!=null&&m.asset_type_label?` for ${m.asset_type_label}`:""]})]}),xe&&e.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:xe}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsxs("div",{style:{display:"flex",gap:"var(--space-3)",alignItems:"center"},children:[e.jsx("button",{onClick:we,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})}),e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Models"})]}),It.isSuperuser()&&e.jsx("button",{onClick:()=>{W(null),P({asset_brand:"",model_name:"",model_code:""}),D(A=>!A)},style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Model",children:"+"})]}),C&&e.jsxs("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:[e.jsx("h3",{style:{fontSize:"var(--font-size-sm)",marginBottom:"var(--space-3)"},children:B?"Edit Model":"Add New Model"}),e.jsxs("form",{onSubmit:Ne,children:[e.jsxs("select",{name:"asset_brand",value:Q.asset_brand,onChange:st,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select brand..."}),x.map(A=>e.jsx("option",{value:A.asset_brand_id,children:A.brand_name},A.asset_brand_id))]}),e.jsx("input",{type:"text",name:"model_name",value:Q.model_name,onChange:st,placeholder:"Model Name",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsx("input",{type:"text",name:"model_code",value:Q.model_code,onChange:st,placeholder:"Model Code",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{type:"submit",disabled:te,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:B?"Update":"Save"}),e.jsx("button",{type:"button",onClick:$e,style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})]}),e.jsxs("div",{style:{overflowY:"auto",flex:1},children:[h.map(A=>e.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[e.jsx("span",{style:{fontWeight:"500"},children:u(A)||`Model ${A.asset_model_id}`}),e.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:A.model_code})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[It.isSuperuser()&&e.jsx("button",{onClick:()=>Qe(A),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-primary)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Edit model",children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),e.jsx("button",{onClick:()=>y(A),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:(b==null?void 0:b.asset_model_id)===A.asset_model_id?"var(--color-bg-secondary)":"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Attributes"}),e.jsx("button",{onClick:()=>Te(A),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Compatibility"}),e.jsx("button",{onClick:()=>z(A),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Default configuration"}),e.jsx("button",{onClick:()=>ke(A),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Instances"})]})]},A.asset_model_id)),h.length===0&&!ue&&e.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No models."})]})]}),e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsxs("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:["Model Attributes ",b?` ${u(b)||b.model_name||""}`:""]}),e.jsx("button",{onClick:()=>F(A=>!A),disabled:!b,style:{border:"none",background:"none",color:"var(--color-primary)",cursor:b?"pointer":"not-allowed",opacity:b?1:.6},children:"+ Add Value"})]}),e.jsx("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:b?e.jsxs(e.Fragment,{children:[ge&&e.jsxs("form",{onSubmit:Ce,style:{marginBottom:"var(--space-4)"},children:[e.jsxs("select",{name:"asset_attribute_definition",value:R.asset_attribute_definition,onChange:ze,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select attribute definition..."}),J.map(A=>e.jsx("option",{value:A.asset_attribute_definition_id,children:A.description||`Attribute ${A.asset_attribute_definition_id}`},A.asset_attribute_definition_id))]}),(()=>{var Ee;const A=X.get(Number(R.asset_attribute_definition)),de=(Ee=A==null?void 0:A.data_type)==null?void 0:Ee.toLowerCase();return de==="number"?e.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:R.value_number,onChange:ze,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):de==="bool"||de==="boolean"?e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[e.jsx("input",{type:"checkbox",name:"value_bool",checked:R.value_bool,onChange:ze}),"True"]}):de==="date"?e.jsx("input",{type:"date",name:"value_date",value:R.value_date,onChange:ze,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):e.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:R.value_string,onChange:ze,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[e.jsx("button",{type:"submit",disabled:S,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>F(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),w.length===0?e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No model attribute values."}):w.map(A=>{const de=A.definition||X.get(A.asset_attribute_definition),Ee=A.value_string??A.value_number??A.value_bool??A.value_date??"";return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:(de==null?void 0:de.description)||`Attribute ${A.asset_attribute_definition}`}),e.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:Ee===""?"No value":String(Ee)})]}),e.jsx("button",{onClick:()=>Be(A.asset_model,A.asset_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${A.asset_model}-${A.asset_attribute_definition}`)})]}):e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Select a model to view or add values."})})]}),It.isSuperuser()&&e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",gridColumn:"1 / -1"},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Brands"}),e.jsx("button",{onClick:()=>G(A=>!A),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},title:"Add Brand",children:"+ Add Brand"})]}),e.jsxs("div",{style:{padding:"var(--space-4)"},children:[Z&&e.jsxs("form",{onSubmit:Me,children:[e.jsx("input",{type:"text",name:"brand_name",value:$.brand_name,onChange:le,placeholder:"Brand Name",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsx("input",{type:"file",name:"brand_photo",accept:"image/*",onChange:le,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),U&&e.jsx("div",{style:{marginBottom:"var(--space-2)"},children:e.jsx("img",{src:U,alt:"Preview",style:{maxWidth:"100px",maxHeight:"100px",borderRadius:"var(--radius-sm)"}})}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{type:"submit",disabled:fe,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>G(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),!Z&&e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Add brands to populate the brand selector when creating models."})]})]})]})]}):e.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[e.jsx("h1",{className:"page-title",children:"Assets"}),e.jsx("p",{className:"page-subtitle",children:"Select a type first"})]}),e.jsx("div",{className:"card",style:{padding:"var(--space-6)"},children:e.jsx("button",{className:"btn",onClick:we,style:{padding:"var(--space-2) var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer",width:"fit-content"},title:"Back to types","aria-label":"Back to types",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})})})]})},ij=()=>{const[n,l]=c.useState([]),[d,u]=c.useState(!1),[m,p]=c.useState(null),[h,g]=c.useState(!1),[b,y]=c.useState(!1),[x,_]=c.useState({description:"",data_type:"",unit:""});c.useEffect(()=>{N()},[]);const N=async()=>{u(!0),p(null);try{const C=await nr.getAll();l(Array.isArray(C)?C:[])}catch(C){p("Failed to fetch attribute definitions: "+C.message),l([])}finally{u(!1)}},I=C=>{const{name:D,value:te}=C.target;_(E=>({...E,[D]:te}))},w=async C=>{C.preventDefault(),y(!0),p(null);try{const D={description:x.description||null,data_type:x.data_type||null,unit:x.unit||null};await nr.create(D),_({description:"",data_type:"",unit:""}),g(!1),await N()}catch(D){p("Failed to create attribute definition: "+D.message)}finally{y(!1)}},O=async C=>{if(window.confirm("Delete this attribute definition?"))try{await nr.delete(C),await N()}catch(D){p("Failed to delete attribute definition: "+D.message)}};return e.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[e.jsx("h1",{className:"page-title",children:"Asset Attribute Definitions"}),e.jsx("p",{className:"page-subtitle",children:"Manage asset attribute definitions"})]}),m&&e.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:m}),e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Definitions"}),e.jsx("button",{onClick:()=>g(!h),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add"})]}),h&&e.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:e.jsxs("form",{onSubmit:w,children:[e.jsx("input",{type:"text",name:"description",placeholder:"Description",value:x.description,onChange:I,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)"},children:[e.jsxs("select",{name:"data_type",value:x.data_type,onChange:I,style:{padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Data Type"}),e.jsx("option",{value:"string",children:"String"}),e.jsx("option",{value:"number",children:"Number"}),e.jsx("option",{value:"bool",children:"Boolean"}),e.jsx("option",{value:"date",children:"Date"})]}),e.jsx("input",{type:"text",name:"unit",placeholder:"Unit",value:x.unit,onChange:I,style:{padding:"var(--space-2)"}})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[e.jsx("button",{type:"submit",disabled:b,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>g(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),e.jsxs("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:[d&&e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!d&&n.length===0&&e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attribute definitions."}),n.map(C=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:C.description}),e.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[C.data_type,C.unit?`  ${C.unit}`:""]})]}),e.jsx("button",{onClick:()=>O(C.asset_attribute_definition_id),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},C.asset_attribute_definition_id))]})]})]})},cj=()=>{const n=Dt(),{modelId:l}=Or(),[d]=Hs(),u=d.get("typeId"),[m,p]=c.useState(null),[h,g]=c.useState([]),[b,y]=c.useState([]),[x,_]=c.useState([]),[N,I]=c.useState([]),[w,O]=c.useState([]),[C,D]=c.useState([]),[te,E]=c.useState(!1),[B,W]=c.useState(null),[Q,P]=c.useState(""),[ge,F]=c.useState(""),[R,ae]=c.useState(!1),[ue,Re]=c.useState(!1),[xe,ne]=c.useState(!1),[S,L]=c.useState(!1),[Z,G]=c.useState(""),[fe,k]=c.useState(""),[$,re]=c.useState(1),[U,ye]=c.useState(1),be=c.useRef(null),T=It.isSuperuser(),le=()=>{if(u){n(`/dashboard/assets/models?typeId=${u}`);return}n(-1)},Me=c.useCallback(async()=>{if(l){E(!0),W(null);try{const[A,de,Ee,Oe,Ie,Pe,Bt]=await Promise.all([vt.getById(l),vt.getCompatibleStockItemModels(l),vt.getCompatibleConsumableModels(l),Qa.getAll(),Xa.getAll(),vt.getDefaultStockItems(l),vt.getDefaultConsumables(l)]);p(A||null),g(Array.isArray(de)?de:[]),y(Array.isArray(Ee)?Ee:[]),O(Array.isArray(Oe)?Oe:[]),D(Array.isArray(Ie)?Ie:[]),_(Array.isArray(Pe)?Pe:[]),I(Array.isArray(Bt)?Bt:[])}catch(A){W("Failed to fetch compatibility: "+A.message)}finally{E(!1)}}},[l]);c.useEffect(()=>{Me()},[Me]);const Ge=c.useMemo(()=>new Set((Array.isArray(h)?h:[]).map(A=>A.stock_item_model_id)),[h]),De=c.useMemo(()=>new Set((Array.isArray(b)?b:[]).map(A=>A.consumable_model_id)),[b]),Ke=c.useMemo(()=>(Array.isArray(w)?w:[]).filter(A=>!Ge.has(A.stock_item_model_id)),[w,Ge]),ze=c.useMemo(()=>(Array.isArray(C)?C:[]).filter(A=>!De.has(A.consumable_model_id)),[C,De]),st=async()=>{if(Q){W(null);try{await vt.addCompatibleStockItemModel(l,Number(Q)),P(""),ae(!1),await Me()}catch(A){W("Failed to add compatible stock item model: "+A.message)}}},Ne=async A=>{W(null);try{await vt.removeCompatibleStockItemModel(l,A),await Me()}catch(de){W("Failed to remove compatible stock item model: "+de.message)}},Qe=async()=>{if(ge){W(null);try{await vt.addCompatibleConsumableModel(l,Number(ge)),F(""),Re(!1),await Me()}catch(A){W("Failed to add compatible consumable model: "+A.message)}}},$e=async A=>{W(null);try{await vt.removeCompatibleConsumableModel(l,A),await Me()}catch(de){W("Failed to remove compatible consumable model: "+de.message)}},Ce=c.useMemo(()=>new Set(x.map(A=>A.stock_item_model)),[x]),Be=c.useMemo(()=>new Set(N.map(A=>A.consumable_model)),[N]),X=c.useMemo(()=>(Array.isArray(w)?w:[]).filter(A=>!Ce.has(A.stock_item_model_id)),[w,Ce]),J=c.useMemo(()=>(Array.isArray(C)?C:[]).filter(A=>!Be.has(A.consumable_model_id)),[C,Be]),we=async()=>{if(Z){W(null);try{await vt.addDefaultStockItem(l,Number(Z),$),G(""),re(1),ne(!1),await Me()}catch(A){W("Failed to add default stock item: "+A.message)}}},ke=async A=>{W(null);try{await vt.removeDefaultStockItem(A),await Me()}catch(de){W("Failed to remove default stock item: "+de.message)}},Te=async()=>{if(fe){W(null);try{await vt.addDefaultConsumable(l,Number(fe),U),k(""),ye(1),L(!1),await Me()}catch(A){W("Failed to add default consumable: "+A.message)}}},z=async A=>{W(null);try{await vt.removeDefaultConsumable(A),await Me()}catch(de){W("Failed to remove default consumable: "+de.message)}};return e.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[e.jsx("h1",{className:"page-title",children:"Assets"}),e.jsxs("p",{className:"page-subtitle",children:["Compatibility ",m!=null&&m.model_name?` ${m.model_name}`:""]})]}),B&&e.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:B}),e.jsx("div",{className:"card",style:{padding:"var(--space-4)",marginBottom:"var(--space-4)",display:"flex",justifyContent:"space-between",gap:"var(--space-3)"},children:e.jsx("button",{onClick:le,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Compatible Stock Item Models"}),T&&!R&&e.jsx("button",{onClick:()=>ae(!0),style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add compatible model"})]}),T&&R&&e.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsxs("select",{value:Q,onChange:A=>P(A.target.value),style:{flex:1,padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select stock item model..."}),Ke.map(A=>e.jsx("option",{value:A.stock_item_model_id,children:A.model_name||`Model ${A.stock_item_model_id}`},A.stock_item_model_id))]}),e.jsx("button",{onClick:st,disabled:!Q||te,style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add"}),e.jsx("button",{onClick:()=>{ae(!1),P("")},style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})}),e.jsxs("div",{style:{overflowY:"auto",flex:1},children:[(Array.isArray(h)?h:[]).map(A=>e.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[e.jsx("span",{style:{fontWeight:"500"},children:A.model_name}),e.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:A.model_code})]}),T&&e.jsx("button",{onClick:()=>Ne(A.stock_item_model_id),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},A.stock_item_model_id)),h.length===0&&!te&&e.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No compatible stock item models."})]})]}),e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Compatible Consumable Models"}),T&&!ue&&e.jsx("button",{onClick:()=>Re(!0),style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add compatible model"})]}),T&&ue&&e.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsxs("select",{value:ge,onChange:A=>F(A.target.value),style:{flex:1,padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select consumable model..."}),ze.map(A=>e.jsx("option",{value:A.consumable_model_id,children:A.model_name||`Model ${A.consumable_model_id}`},A.consumable_model_id))]}),e.jsx("button",{onClick:Qe,disabled:!ge||te,style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add"}),e.jsx("button",{onClick:()=>{Re(!1),F("")},style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})}),e.jsxs("div",{style:{overflowY:"auto",flex:1},children:[(Array.isArray(b)?b:[]).map(A=>e.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[e.jsx("span",{style:{fontWeight:"500"},children:A.model_name}),e.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:A.model_code})]}),T&&e.jsx("button",{onClick:()=>$e(A.consumable_model_id),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},A.consumable_model_id)),b.length===0&&!te&&e.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No compatible consumable models."})]})]})]}),e.jsx("div",{ref:be}),e.jsx("h2",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",marginTop:"var(--space-6)",marginBottom:"var(--space-4)"},children:"Default Composition (Included with new assets)"}),e.jsx("p",{style:{color:"var(--color-text-secondary)",marginBottom:"var(--space-4)",fontSize:"var(--font-size-sm)"},children:"These items will be automatically created and linked to new assets of this model when added via an attribution order."}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Default Stock Items"}),T&&!xe&&e.jsx("button",{onClick:()=>ne(!0),style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add default item"})]}),T&&xe&&e.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",alignItems:"center"},children:[e.jsxs("select",{value:Z,onChange:A=>G(A.target.value),style:{flex:1,padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select stock item model..."}),X.map(A=>e.jsx("option",{value:A.stock_item_model_id,children:A.model_name||`Model ${A.stock_item_model_id}`},A.stock_item_model_id))]}),e.jsx("input",{type:"number",min:"1",value:$,onChange:A=>re(Number(A.target.value)),style:{width:"60px",padding:"var(--space-2)"},placeholder:"Qty"}),e.jsx("button",{onClick:we,disabled:!Z||te,style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add"}),e.jsx("button",{onClick:()=>{ne(!1),G(""),re(1)},style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})}),e.jsxs("div",{style:{overflowY:"auto",flex:1},children:[x.map(A=>e.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[e.jsx("span",{style:{fontWeight:"500"},children:A.stock_item_model_name}),e.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:["Qty: ",A.quantity]})]}),T&&e.jsx("button",{onClick:()=>ke(A.id),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},A.id)),x.length===0&&!te&&e.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No default stock items defined."})]})]}),e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Default Consumables"}),T&&!S&&e.jsx("button",{onClick:()=>L(!0),style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add default item"})]}),T&&S&&e.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",alignItems:"center"},children:[e.jsxs("select",{value:fe,onChange:A=>k(A.target.value),style:{flex:1,padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select consumable model..."}),J.map(A=>e.jsx("option",{value:A.consumable_model_id,children:A.model_name||`Model ${A.consumable_model_id}`},A.consumable_model_id))]}),e.jsx("input",{type:"number",min:"1",value:U,onChange:A=>ye(Number(A.target.value)),style:{width:"60px",padding:"var(--space-2)"},placeholder:"Qty"}),e.jsx("button",{onClick:Te,disabled:!fe||te,style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add"}),e.jsx("button",{onClick:()=>{L(!1),k(""),ye(1)},style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})}),e.jsxs("div",{style:{overflowY:"auto",flex:1},children:[N.map(A=>e.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[e.jsx("span",{style:{fontWeight:"500"},children:A.consumable_model_name}),e.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:["Qty: ",A.quantity]})]}),T&&e.jsx("button",{onClick:()=>z(A.id),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},A.id)),N.length===0&&!te&&e.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No default consumables defined."})]})]})]})]})},ny=()=>{const n=Dt(),{modelId:l}=Or(),[d]=Hs(),u=d.get("typeId")||"",[m,p]=c.useState(null),[h,g]=c.useState([]),[b,y]=c.useState([]),[x,_]=c.useState([]),[N,I]=c.useState([]),[w,O]=c.useState([]),[C,D]=c.useState([]),[te,E]=c.useState([]),[B,W]=c.useState([]),[Q,P]=c.useState(new Set),[ge,F]=c.useState(new Set),[R,ae]=c.useState(u),[ue,Re]=c.useState(l?[Number(l)]:[]);c.useEffect(()=>{if(l){const Ce=Number(l);Re([Ce]),console.log("Auto-selecting modelId:",Ce)}},[l]);const[xe,ne]=c.useState(""),[S,L]=c.useState(""),[Z,G]=c.useState(1),[fe,k]=c.useState(""),[$,re]=c.useState(""),[U,ye]=c.useState(1),[be,T]=c.useState(!1),[le,Me]=c.useState(null),[Ge,De]=c.useState(It.isSuperuser());c.useEffect(()=>{De(It.isSuperuser())},[]),c.useEffect(()=>{(async()=>{T(!0),Me(null);try{const[Be,X,J,we,ke]=await Promise.all([ln.getAll(),on.getAll(),cn.getAll(),Qa.getAll(),Xa.getAll()]);if(g((Be==null?void 0:Be.results)||Be||[]),_((X==null?void 0:X.results)||X||[]),D((J==null?void 0:J.results)||J||[]),O((we==null?void 0:we.results)||we||[]),W((ke==null?void 0:ke.results)||ke||[]),l){const[Te,z,A]=await Promise.all([vt.getById(l),vt.getDefaultStockItems(l),vt.getDefaultConsumables(l)]);p(Te),P(new Set((z||[]).map(de=>de.stock_item_model))),F(new Set((A||[]).map(de=>de.consumable_model)))}}catch{Me("Failed to fetch initial data")}finally{T(!1)}})()},[l]),c.useEffect(()=>{(async()=>{if(!xe){I([]),L("");return}T(!0),Me(null);try{const Be=await Qa.getByStockItemType(xe),X=(Be==null?void 0:Be.results)||Be||[];I(Array.isArray(X)?X:[]),L("")}catch{Me("Failed to fetch stock item models")}finally{T(!1)}})()},[xe]),c.useEffect(()=>{(async()=>{if(!fe){E([]),re("");return}T(!0),Me(null);try{const Be=await Xa.getByConsumableType(fe),X=(Be==null?void 0:Be.results)||Be||[];E(Array.isArray(X)?X:[]),re("")}catch{Me("Failed to fetch consumable models")}finally{T(!1)}})()},[fe]),c.useEffect(()=>{(async()=>{if(!R){y([]),Re([]);return}T(!0),Me(null);try{const Be=await vt.getByAssetType(R),X=(Be==null?void 0:Be.results)||Be||[];y(Array.isArray(X)?X:[]),Re([])}catch{Me("Failed to fetch asset models")}finally{T(!1)}})()},[R]);const Ke=Ce=>{Re(Be=>Be.includes(Ce)?Be.filter(X=>X!==Ce):[...Be,Ce])};c.useMemo(()=>{const Ce=new Set(ue);return b.filter(Be=>Ce.has(Be.asset_model_id))},[b,ue]);const ze=async()=>{const Ce=l?[Number(l)]:ue;if(!(!S||Ce.length===0)){T(!0),Me(null);try{for(const Be of Ce)await vt.addDefaultStockItem(Be,Number(S),Z);l&&P(Be=>new Set([...Be,Number(S)])),L(""),G(1)}catch{Me("Failed to insert default stock items")}finally{T(!1)}}},st=async()=>{const Ce=l?[Number(l)]:ue;if(!(!$||Ce.length===0)){T(!0),Me(null);try{for(const Be of Ce)await vt.addDefaultConsumable(Be,Number($),U);l&&F(Be=>new Set([...Be,Number($)])),re(""),ye(1)}catch{Me("Failed to insert default consumables")}finally{T(!1)}}},Ne=c.useMemo(()=>l?x.filter(Ce=>{const Be=w.filter(X=>X.stock_item_type===Ce.stock_item_type_id);return Be.length===0?!1:Be.some(X=>!Q.has(X.stock_item_model_id))}):x,[x,w,Q,l]),Qe=c.useMemo(()=>l?C.filter(Ce=>{const Be=B.filter(X=>X.consumable_type===Ce.consumable_type_id);return Be.length===0?!1:Be.some(X=>!ge.has(X.consumable_model_id))}):C,[C,B,ge,l]),$e=()=>{if(l){n(`/dashboard/assets/models/${l}/compatibility?typeId=${u}`);return}if(R){n(`/dashboard/assets/models?typeId=${R}`);return}n("/dashboard/assets/models")};return e.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[e.jsx("h1",{className:"page-title",children:"Assets"}),e.jsxs("p",{className:"page-subtitle",children:["Default composition ",m?` ${m.model_name}`:" Select asset type + asset model(s), then choose stock/consumable models"]})]}),le&&e.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:le}),!l&&e.jsx("div",{className:"card",style:{padding:"var(--space-4)",marginBottom:"var(--space-4)"},children:e.jsxs("div",{style:{display:"flex",gap:"var(--space-3)",alignItems:"center",flexWrap:"wrap"},children:[e.jsx("button",{onClick:$e,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})}),e.jsxs("div",{style:{minWidth:"260px"},children:[e.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"4px"},children:"Asset Type"}),e.jsxs("select",{value:R,onChange:Ce=>ae(Ce.target.value),style:{width:"100%",padding:"var(--space-2)"},disabled:be,children:[e.jsx("option",{value:"",children:"Select type..."}),h.map(Ce=>e.jsx("option",{value:Ce.asset_type_id,children:Ce.asset_type_label||`Type ${Ce.asset_type_id}`},Ce.asset_type_id))]})]})]})}),l&&e.jsx("div",{className:"card",style:{padding:"var(--space-4)",marginBottom:"var(--space-4)"},children:e.jsxs("div",{style:{display:"flex",gap:"var(--space-3)",alignItems:"center"},children:[e.jsx("button",{onClick:$e,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back to Compatibility","aria-label":"Back to Compatibility",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})}),e.jsxs("div",{style:{fontWeight:"500"},children:["Adding to: ",e.jsx("span",{style:{color:"var(--color-primary)"},children:m==null?void 0:m.model_name})]})]})}),(R||l)&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:l?"1fr":"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[!l&&e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",minHeight:0},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Target Asset Model(s)"}),e.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[ue.length," selected"]})]}),e.jsxs("div",{style:{overflowY:"auto",flex:1},children:[b.map(Ce=>e.jsxs("label",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",gap:"var(--space-3)",alignItems:"center",borderBottom:"1px solid var(--color-border)",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:ue.includes(Ce.asset_model_id),onChange:()=>Ke(Ce.asset_model_id)}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:{fontWeight:"500"},children:Ce.model_name||`Model ${Ce.asset_model_id}`}),e.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:Ce.model_code||""})]})]},Ce.asset_model_id)),b.length===0&&!be&&e.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No models for this type."})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",minHeight:0},children:[e.jsxs("div",{className:"card",style:{padding:"var(--space-4)"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"var(--space-3)"},children:"Add default stock item models"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"var(--space-3)"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"4px"},children:"Stock Item Type"}),e.jsxs("select",{value:xe,onChange:Ce=>ne(Ce.target.value),style:{width:"100%",padding:"var(--space-2)"},disabled:be,children:[e.jsx("option",{value:"",children:"Select type..."}),Ne.map(Ce=>e.jsx("option",{value:Ce.stock_item_type_id,children:Ce.stock_item_type_label||`Type ${Ce.stock_item_type_id}`},Ce.stock_item_type_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"4px"},children:"Stock Item Model"}),e.jsxs("select",{value:S,onChange:Ce=>L(Ce.target.value),style:{width:"100%",padding:"var(--space-2)"},disabled:be||!xe,children:[e.jsx("option",{value:"",children:"Select model..."}),N.filter(Ce=>!Q.has(Ce.stock_item_model_id)).map(Ce=>e.jsx("option",{value:Ce.stock_item_model_id,children:Ce.model_name||`Model ${Ce.stock_item_model_id}`},Ce.stock_item_model_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"4px"},children:"Qty"}),e.jsx("input",{type:"number",min:"1",value:Z,onChange:Ce=>G(Number(Ce.target.value)),style:{width:"100%",padding:"var(--space-2)"}})]}),e.jsx("button",{onClick:ze,disabled:!S||(l?!1:ue.length===0)||be,style:{padding:"var(--space-2) var(--space-3)",border:"none",background:"var(--color-primary)",color:"white",borderRadius:"var(--radius-sm)",cursor:!S||!l&&ue.length===0||be?"not-allowed":"pointer",opacity:!S||!l&&ue.length===0||be?.7:1,width:"100%"},title:!S||!l&&ue.length===0?"Select a stock model":void 0,children:"Add to selected"})]})]}),e.jsxs("div",{className:"card",style:{padding:"var(--space-4)"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"var(--space-3)"},children:"Add default consumable models"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"var(--space-3)"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"4px"},children:"Consumable Type"}),e.jsxs("select",{value:fe,onChange:Ce=>k(Ce.target.value),style:{width:"100%",padding:"var(--space-2)"},disabled:be,children:[e.jsx("option",{value:"",children:"Select type..."}),Qe.map(Ce=>e.jsx("option",{value:Ce.consumable_type_id,children:Ce.consumable_type_label||`Type ${Ce.consumable_type_id}`},Ce.consumable_type_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"4px"},children:"Consumable Model"}),e.jsxs("select",{value:$,onChange:Ce=>re(Ce.target.value),style:{width:"100%",padding:"var(--space-2)"},disabled:be||!fe,children:[e.jsx("option",{value:"",children:"Select model..."}),te.filter(Ce=>!ge.has(Ce.consumable_model_id)).map(Ce=>e.jsx("option",{value:Ce.consumable_model_id,children:Ce.model_name||`Model ${Ce.consumable_model_id}`},Ce.consumable_model_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"4px"},children:"Qty"}),e.jsx("input",{type:"number",min:"1",value:U,onChange:Ce=>ye(Number(Ce.target.value)),style:{width:"100%",padding:"var(--space-2)"}})]}),e.jsx("button",{onClick:st,disabled:!$||(l?!1:ue.length===0)||be,style:{padding:"var(--space-2) var(--space-3)",border:"none",background:"var(--color-primary)",color:"white",borderRadius:"var(--radius-sm)",cursor:!$||!l&&ue.length===0||be?"not-allowed":"pointer",opacity:!$||!l&&ue.length===0||be?.7:1,width:"100%"},title:!$||!l&&ue.length===0?"Select a consumable model":void 0,children:"Add to selected"})]})]})]})]})]})},dj=()=>{const{user:n,isSuperuser:l}=Ja(),d=Dt(),[u,m]=c.useState([]),[p,h]=c.useState([]),[g,b]=c.useState(!0),[y,x]=c.useState(""),[_,N]=c.useState(!1),[I,w]=c.useState(null),[O,C]=c.useState(""),[D,te]=c.useState(!1),[E,B]=c.useState([]),[W,Q]=c.useState(!1),[P,ge]=c.useState(""),[F,R]=c.useState(""),[ae,ue]=c.useState(null),[Re,xe]=c.useState([]),[ne,S]=c.useState(""),[L,Z]=c.useState(!1),[G,fe]=c.useState("start_datetime"),[k,$]=c.useState("desc"),re=c.useMemo(()=>{var X;return l?!0:((X=n==null?void 0:n.roles)==null?void 0:X.some(J=>J.role_code==="maintenance_chief"||J.role_code==="exploitation_chief"))||!1},[l,n]);c.useMemo(()=>{var X;return((X=n==null?void 0:n.roles)==null?void 0:X.some(J=>J.role_code==="maintenance_technician"))||!1},[n]),c.useEffect(()=>{U(),re&&(ye(),be())},[re]);const U=async()=>{try{b(!0);const X=await Sl.getAll();m(X)}catch(X){x("Failed to load maintenances"),console.error(X)}finally{b(!1)}},ye=async()=>{try{const X=await Tn.getAll({role:"maintenance_technician"});h(X)}catch(X){console.error("Failed to load technicians",X)}},be=async()=>{try{const X=await Us.getAll();B(Array.isArray(X)?X:[])}catch(X){console.error("Failed to load assets",X),B([])}},T=()=>{x(""),ge(""),C(""),R(""),ue(null),xe([]),S(""),Q(!0)},le=X=>{const J=((X==null?void 0:X.room_type_code)||"").toUpperCase(),we=((X==null?void 0:X.room_type_label)||"").toLowerCase();return J&&["MR","MAINTENANCE","MAINT"].includes(J)?!0:we.includes("maintenance")},Me=async()=>{try{const X=await Ks.getAll(),J=(Array.isArray(X)?X:[]).filter(le);xe(J)}catch(X){console.error(X),xe([])}},Ge=async X=>{var J,we;if(X.preventDefault(),!P){x("Please select an asset");return}if(!O){x("Please select a technician");return}te(!0);try{const ke={asset_id:P,technician_person_id:O,description:F};if(ae&&!le(ae)){if(!ne){x("Please select the maintenance room to move the asset to"),te(!1);return}ke.destination_room_id=Number(ne)}await Sl.createDirect(ke),Q(!1),U()}catch(ke){const Te=((we=(J=ke==null?void 0:ke.response)==null?void 0:J.data)==null?void 0:we.error)||(ke==null?void 0:ke.message)||"Failed to create maintenance";x(typeof Te=="string"?Te:"Failed to create maintenance")}finally{te(!1)}},De=X=>{w(X),C(X.performed_by_person||""),N(!0)},Ke=async X=>{if(X.preventDefault(),!!I){te(!0);try{await Sl.update(I.maintenance_id,{...I,performed_by_person:O||null}),N(!1),U()}catch(J){x("Failed to assign technician"),console.error(J)}finally{te(!1)}}},ze=async X=>{var J,we;if(window.confirm("Are you sure you want to cancel this maintenance? This will delete it from the database."))try{b(!0),await Sl.delete(X),U()}catch(ke){const Te=((we=(J=ke==null?void 0:ke.response)==null?void 0:J.data)==null?void 0:we.error)||(ke==null?void 0:ke.message)||"Failed to cancel maintenance";x(typeof Te=="string"?Te:"Failed to cancel maintenance")}finally{b(!1)}},st=X=>X?new Date(X).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",Ne=X=>(X==null?void 0:X.asset_name)||(X==null?void 0:X.stock_item_name)||(X==null?void 0:X.consumable_name)||(X!=null&&X.asset?`Asset ${X.asset}`:X!=null&&X.stock_item?`Stock Item ${X.stock_item}`:X!=null&&X.consumable?`Consumable ${X.consumable}`:"Unknown"),Qe=(X,J)=>{switch(J){case"maintenance_id":return Number((X==null?void 0:X.maintenance_id)??0);case"asset":return(Ne(X)||"").toString().toLowerCase();case"description":return((X==null?void 0:X.description)||"").toString().toLowerCase();case"maintenance_status":return((X==null?void 0:X.maintenance_status)||"").toString().toLowerCase();case"start_datetime":{const we=X!=null&&X.start_datetime?new Date(X.start_datetime).getTime():null;return Number.isFinite(we)?we:null}case"end_datetime":{const we=X!=null&&X.end_datetime?new Date(X.end_datetime).getTime():null;return Number.isFinite(we)?we:null}case"performed_by_person_name":return((X==null?void 0:X.performed_by_person_name)||"").toString().toLowerCase();default:return""}},$e=c.useMemo(()=>{const X=Array.isArray(u)?u:[],J=k==="asc"?1:-1;return[...X].sort((we,ke)=>{const Te=Qe(we,G),z=Qe(ke,G);if(Te==null&&z==null)return 0;if(Te==null)return 1;if(z==null)return-1;if(typeof Te=="number"&&typeof z=="number")return Te===z?0:Te>z?J:-J;const A=String(Te),de=String(z),Ee=A.localeCompare(de);return Ee===0?0:Ee*J})},[u,k,G]),Ce=X=>{if(G===X){$(J=>J==="asc"?"desc":"asc");return}fe(X),$("asc")},Be=X=>G!==X?"":k==="asc"?" ":" ";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{className:"page-title",children:"Maintenance"}),e.jsx("p",{className:"page-subtitle",children:"Manage maintenance tasks and assignments"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"nowrap",gap:"0.75rem"},children:[e.jsx("h2",{className:"card-title",style:{margin:0,flex:"1 1 auto",minWidth:0},children:re?"All Maintenances":"My Maintenances"}),re&&e.jsx("button",{className:"btn btn-sm btn-primary",onClick:T,style:{width:"auto",whiteSpace:"nowrap",flex:"0 0 auto"},children:"Create Maintenance"})]})}),e.jsx("div",{className:"table-container",children:g?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"loading-spinner",style:{margin:"0 auto"}}),e.jsx("p",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading maintenances..."})]}):y?e.jsx("div",{className:"empty-state",children:e.jsx("p",{className:"empty-state-title",style:{color:"var(--color-error)"},children:y})}):u.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("h3",{className:"empty-state-title",children:"No maintenances found"})}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{style:{cursor:"pointer"},onClick:()=>Ce("maintenance_id"),children:["ID",Be("maintenance_id")]}),e.jsxs("th",{style:{cursor:"pointer"},onClick:()=>Ce("asset"),children:["Asset",Be("asset")]}),e.jsxs("th",{style:{cursor:"pointer"},onClick:()=>Ce("description"),children:["Description",Be("description")]}),re&&e.jsxs("th",{style:{cursor:"pointer"},onClick:()=>Ce("maintenance_status"),children:["Status",Be("maintenance_status")]}),e.jsxs("th",{style:{cursor:"pointer"},onClick:()=>Ce("start_datetime"),children:["Start Date",Be("start_datetime")]}),e.jsxs("th",{style:{cursor:"pointer"},onClick:()=>Ce("end_datetime"),children:["End Date",Be("end_datetime")]}),e.jsxs("th",{style:{cursor:"pointer"},onClick:()=>Ce("performed_by_person_name"),children:["Technician",Be("performed_by_person_name")]}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:$e.map(X=>{var J;return e.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>d(`/dashboard/maintenances/${X.maintenance_id}/steps`),children:[e.jsx("td",{children:X.maintenance_id}),e.jsx("td",{children:Ne(X)}),e.jsx("td",{children:X.description}),re&&e.jsx("td",{children:X.maintenance_status?e.jsx("span",{className:"badge badge-info",children:X.maintenance_status}):e.jsx("span",{className:"badge badge-warning",children:"-"})}),e.jsx("td",{children:st(X.start_datetime)}),e.jsx("td",{children:st(X.end_datetime)}),e.jsx("td",{children:X.performed_by_person_name?e.jsx("span",{className:"badge badge-info",children:X.performed_by_person_name}):e.jsx("span",{className:"badge badge-warning",children:"Unassigned"})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[!X.performed_by_person&&re&&e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:we=>{we.stopPropagation(),De(X)},children:"Assign"}),!X.has_steps&&!X.has_external_maintenances&&(l||re||X.performed_by_person===((J=n==null?void 0:n.person)==null?void 0:J.person_id))&&e.jsx("button",{className:"btn btn-sm btn-danger ml-2",onClick:we=>{we.stopPropagation(),ze(X.maintenance_id)},style:{marginLeft:"0.5rem"},children:"Cancel maintenance"})]})})]},X.maintenance_id)})})]})})]}),_&&e.jsx("div",{className:"modal-overlay",onClick:()=>N(!1),children:e.jsxs("div",{className:"modal",onClick:X=>X.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Assign Technician"}),e.jsx("button",{className:"modal-close",onClick:()=>N(!1),children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("form",{onSubmit:Ke,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Maintenance Task"}),e.jsxs("div",{className:"form-input",style:{backgroundColor:"#f5f5f5"},children:[(I==null?void 0:I.description)||"No description","(",I==null?void 0:I.asset_name,")"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"technician",className:"form-label",children:"Technician"}),e.jsxs("select",{id:"technician",className:"form-input",value:O,onChange:X=>C(X.target.value),children:[e.jsx("option",{value:"",children:"-- Select Technician --"}),p.map(X=>e.jsxs("option",{value:X.person_id,children:[X.first_name," ",X.last_name]},X.person_id))]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>N(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:D,children:D?"Saving...":"Save Assignment"})]})]})]})}),W&&e.jsx("div",{className:"modal-overlay",onClick:()=>!D&&Q(!1),children:e.jsxs("div",{className:"modal",onClick:X=>X.stopPropagation(),style:{maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Create Maintenance"}),e.jsx("button",{className:"modal-close",onClick:()=>!D&&Q(!1),children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("form",{onSubmit:Ge,style:{display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[e.jsxs("div",{className:"modal-body",style:{overflowY:"auto",flex:1,minHeight:0},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"asset",className:"form-label",children:"Asset"}),e.jsxs("select",{id:"asset",className:"form-input",value:P,onChange:async X=>{const J=X.target.value;if(ge(J),ue(null),S(""),!!J)try{Z(!0);const we=await Us.getCurrentRoom(J),ke=(we==null?void 0:we.room)||null;ue(ke),ke&&!le(ke)&&await Me()}catch(we){console.error(we),ue(null)}finally{Z(!1)}},children:[e.jsx("option",{value:"",children:"-- Select Asset --"}),E.map(X=>e.jsx("option",{value:X.asset_id,children:X.asset_name?`${X.asset_name} (#${X.asset_id})`:`Asset #${X.asset_id}`},X.asset_id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Asset Current Room"}),e.jsx("div",{className:"form-input",style:{backgroundColor:"var(--color-bg-secondary)",color:"var(--color-text-primary)"},children:L?"Loading...":ae?`${ae.room_name}${ae.room_type_label?` (${ae.room_type_label})`:""}`:"-"})]}),ae&&!le(ae)&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Move asset to maintenance room"}),e.jsxs("select",{className:"form-input",value:ne,onChange:X=>S(X.target.value),children:[e.jsx("option",{value:"",children:"-- Select Maintenance Room --"}),Re.map(X=>e.jsxs("option",{value:X.room_id,children:[X.room_name,X.room_type_label?` (${X.room_type_label})`:""]},X.room_id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"technician_create",className:"form-label",children:"Technician"}),e.jsxs("select",{id:"technician_create",className:"form-input",value:O,onChange:X=>C(X.target.value),children:[e.jsx("option",{value:"",children:"-- Select Technician --"}),p.map(X=>e.jsxs("option",{value:X.person_id,children:[X.first_name," ",X.last_name]},X.person_id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"description_create",className:"form-label",children:"Description"}),e.jsx("textarea",{id:"description_create",className:"form-input",rows:4,value:F,onChange:X=>R(X.target.value)})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>!D&&Q(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:D,children:D?"Creating...":"Create"})]})]})]})})]})},uj=()=>{var Va,es,ts;const n=Dt(),l=Za(),[d]=Hs(),u=d.get("typeId"),m=d.get("modelId"),p=l.pathname.endsWith("/instances"),h=ee=>[ee==null?void 0:ee.brand_name,ee==null?void 0:ee.model_name].filter(Boolean).join(" "),[g,b]=c.useState([]),[y,x]=c.useState([]),[_,N]=c.useState([]),[I,w]=c.useState([]),[O,C]=c.useState([]),[D,te]=c.useState([]),[E,B]=c.useState([]),[W,Q]=c.useState([]),[P,ge]=c.useState([]),[F,R]=c.useState([]),[ae,ue]=c.useState(!1),[Re,xe]=c.useState(null),[ne,S]=c.useState(!1),[L,Z]=c.useState(null),[G,fe]=c.useState(null),[k,$]=c.useState(""),[re,U]=c.useState(""),[ye,be]=c.useState(!1),[T,le]=c.useState(!1),[Me,Ge]=c.useState(null),[De,Ke]=c.useState(null),[ze,st]=c.useState({person:"",start_datetime:"",condition_on_assignment:"Good"}),[Ne,Qe]=c.useState(!1),[$e,Ce]=c.useState(!1),[Be,X]=c.useState(!1),[J,we]=c.useState(null),[ke,Te]=c.useState({stock_item_attribute_definition:"",is_mandatory:!1,default_value:""}),[z,A]=c.useState({stock_item_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[de,Ee]=c.useState(!1),[Oe,Ie]=c.useState(!1),[Pe,Bt]=c.useState(!1),[tt,Ot]=c.useState(null),[Ze,kt]=c.useState(null),[We,St]=c.useState({stock_item_type_label:"",stock_item_type_code:""}),[qe,ja]=c.useState({model_name:"",model_code:"",stock_item_brand:"",stock_item_type:"",release_year:"",discontinued_year:"",is_active:!0,notes:"",warranty_expiry_in_months:""}),[ht,aa]=c.useState({stock_item_name:"",stock_item_inventory_number:"",stock_item_status:"active",stock_item_warranty_expiry_in_months:"",stock_item_name_in_administrative_certificate:"",destruction_certificate_id:"",maintenance_step_id:null}),[pa,Sa]=c.useState(null),[it,Ht]=c.useState(!1);c.useEffect(()=>{Ma(),Ut(),$a(),Ra(),wa(),$t()},[]),c.useEffect(()=>{p&&(!u||!m)&&n("/dashboard/stock-items/types",{replace:!0})},[p,u,m,n]);const Ra=async()=>{try{const ee=await Ks.getAll();B(Array.isArray(ee)?ee:[])}catch(ee){console.error("Failed to fetch rooms:",ee),B([])}},wa=async()=>{try{const ee=await Tn.getAll();C(Array.isArray(ee)?ee:[])}catch(ee){console.error("Failed to fetch persons:",ee),C([])}},$t=async()=>{try{const ee=await Au.getAll();te(Array.isArray(ee)?ee:[])}catch(ee){console.error("Failed to fetch stock item assignments:",ee),te([])}};c.useEffect(()=>{(async()=>{if(!(!ne||!L))try{const je=await xl.getCurrentRoom(L.stock_item_id),Le=(je==null?void 0:je.room_id)??null;fe(Le);const et=E.find(qt=>qt.room_id===Le);$((et==null?void 0:et.room_name)||(Le?`Room ${Le}`:"Unknown"))}catch(je){console.error(je),fe(null),$("Unknown")}})()},[ne,L,E]),c.useEffect(()=>{tt?(At(tt.stock_item_type_id),ms(tt.stock_item_type_id),kt(null),we(null),w([]),R([])):(N([]),ge([]))},[tt]),c.useEffect(()=>{if(!p||!u||!Array.isArray(g)||g.length===0)return;const ee=g.find(je=>String(je.stock_item_type_id)===String(u))||null;ee&&(tt==null?void 0:tt.stock_item_type_id)!==ee.stock_item_type_id&&Ot(ee)},[p,u,g,tt]),c.useEffect(()=>{Ze?fa(Ze.stock_item_model_id):(w([]),we(null),R([]))},[Ze]),c.useEffect(()=>{if(!p||!m||!Array.isArray(_)||_.length===0)return;const ee=_.find(je=>String(je.stock_item_model_id)===String(m))||null;ee&&(Ze==null?void 0:Ze.stock_item_model_id)!==ee.stock_item_model_id&&kt(ee)},[p,m,_,Ze]);const Ma=async()=>{ue(!0),xe(null);try{const ee=await on.getAll();b(Array.isArray(ee)?ee:[])}catch(ee){xe("Failed to fetch stock item types: "+ee.message),b([])}finally{ue(!1)}},Ut=async()=>{try{const ee=await Iu.getAll();x(Array.isArray(ee)?ee:[])}catch(ee){console.error("Failed to fetch stock item brands:",ee),x([])}},At=async ee=>{try{const je=await Qa.getByStockItemType(ee);N(Array.isArray(je)?je:[])}catch(je){xe("Failed to fetch stock item models: "+je.message),N([])}};c.useEffect(()=>{J?Ba(J.stock_item_id):R([])},[J]);const Ka=c.useMemo(()=>{const ee=new Map;return W.forEach(je=>{ee.set(je.stock_item_attribute_definition_id,je)}),ee},[W]),fa=async ee=>{try{const je=await xl.getAll({stock_item_model:ee});w(Array.isArray(je)?je:[])}catch(je){xe("Failed to fetch stock items: "+je.message),w([])}},$a=async()=>{try{const ee=await rr.getAll();Q(Array.isArray(ee)?ee:[])}catch(ee){xe("Failed to fetch stock item attribute definitions: "+ee.message),Q([])}},ms=async ee=>{try{const je=await zr.getByStockItemType(ee);ge(Array.isArray(je)?je:[])}catch(je){xe("Failed to fetch stock item type attributes: "+je.message),ge([])}},Ba=async ee=>{try{const je=await tc.getByStockItem(ee);R(Array.isArray(je)?je:[])}catch(je){xe("Failed to fetch stock item attributes: "+je.message),R([])}},Xt=ee=>{const{name:je,value:Le}=ee.target;St(et=>({...et,[je]:Le}))},yt=ee=>{const{name:je,value:Le,type:et,checked:qt}=ee.target;ja(ka=>({...ka,[je]:et==="checkbox"?qt:Le}))},Ct=ee=>{const{name:je,value:Le}=ee.target;aa(et=>({...et,[je]:Le}))},Kt=ee=>{const{name:je,value:Le,type:et,checked:qt}=ee.target;A(ka=>({...ka,[je]:et==="checkbox"?qt:Le}))},ha=async ee=>{var je,Le;ee.preventDefault(),Ht(!0),xe(null);try{await on.create(We),St({stock_item_type_label:"",stock_item_type_code:""}),Ee(!1),await Ma()}catch(et){xe("Failed to create stock item type: "+(((Le=(je=et.response)==null?void 0:je.data)==null?void 0:Le.error)||et.message))}finally{Ht(!1)}},$s=ee=>{we(ee),X(!0)},Ia=()=>{X(!1),Ce(!1)},Pa=async ee=>{var je,Le;if(ee.preventDefault(),!tt){xe("Please select a stock item type first");return}Ht(!0),xe(null);try{const et={...qe,stock_item_brand:qe.stock_item_brand?Number(qe.stock_item_brand):null,stock_item_type:tt.stock_item_type_id,release_year:qe.release_year?Number(qe.release_year):null,discontinued_year:qe.discontinued_year?Number(qe.discontinued_year):null,warranty_expiry_in_months:qe.warranty_expiry_in_months?Number(qe.warranty_expiry_in_months):null};await Qa.create(et),ja({model_name:"",model_code:"",stock_item_brand:"",stock_item_type:"",release_year:"",discontinued_year:"",is_active:!0,notes:"",warranty_expiry_in_months:""}),Ie(!1),await At(tt.stock_item_type_id)}catch(et){xe("Failed to create stock item model: "+(((Le=(je=et.response)==null?void 0:je.data)==null?void 0:Le.error)||et.message))}finally{Ht(!1)}},ya=async ee=>{if(window.confirm("Are you sure you want to delete this stock item model?"))try{await Qa.delete(ee),(Ze==null?void 0:Ze.stock_item_model_id)===ee&&kt(null),tt&&await At(tt.stock_item_type_id)}catch(je){xe("Failed to delete stock item model: "+je.message)}},Pt=async ee=>{var je;ee.preventDefault(),Ht(!0),xe(null);try{const Le={...ht,stock_item_model:Ze.stock_item_model_id,destruction_certificate_id:ht.destruction_certificate_id?Number(ht.destruction_certificate_id):null};pa?await xl.update(pa,Le):await xl.create(Le),aa({stock_item_name:"",stock_item_inventory_number:"",stock_item_status:"active",stock_item_warranty_expiry_in_months:"",stock_item_name_in_administrative_certificate:"",destruction_certificate_id:"",maintenance_step_id:null}),Sa(null),Bt(!1),await fa(Ze.stock_item_model_id)}catch(Le){const et=(je=Le.response)!=null&&je.data?typeof Le.response.data=="object"?JSON.stringify(Le.response.data):Le.response.data:Le.message;xe(`Failed to ${pa?"update":"create"} stock item: `+et)}finally{Ht(!1)}},ia=ee=>{Sa(ee.stock_item_id),aa({stock_item_name:ee.stock_item_name||"",stock_item_inventory_number:ee.stock_item_inventory_number||"",stock_item_status:ee.stock_item_status||"active",stock_item_warranty_expiry_in_months:ee.stock_item_warranty_expiry_in_months||"",stock_item_name_in_administrative_certificate:ee.stock_item_name_in_administrative_certificate||"",destruction_certificate_id:ee.destruction_certificate_id??"",maintenance_step_id:ee.maintenance_step_id||null}),Bt(!0)},sa=async ee=>{if(ee.preventDefault(),!J){xe("Please select a stock item first");return}if(!z.stock_item_attribute_definition){xe("Please select an attribute definition");return}Ht(!0),xe(null);try{const je={stock_item:J.stock_item_id,stock_item_attribute_definition:Number(z.stock_item_attribute_definition),value_string:z.value_string||null,value_number:z.value_number?Number(z.value_number):null,value_bool:z.value_bool,value_date:z.value_date||null};await tc.create(je),A({stock_item_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),Ce(!1),await Ba(J.stock_item_id)}catch(je){xe("Failed to add stock item attribute value: "+je.message)}finally{Ht(!1)}},ea=async(ee,je)=>{if(window.confirm("Remove this attribute value from the stock item?"))try{await tc.delete(ee,je),J&&await Ba(J.stock_item_id)}catch(Le){xe("Failed to remove stock item attribute: "+Le.message)}},Yt=async ee=>{if(window.confirm("Are you sure you want to delete this stock item type?"))try{await on.delete(ee),(tt==null?void 0:tt.stock_item_type_id)===ee&&Ot(null),await Ma()}catch(je){xe("Failed to delete stock item type: "+je.message)}},xt=async ee=>{if(window.confirm("Are you sure you want to delete this stock item?"))try{await xl.delete(ee),Ze&&await fa(Ze.stock_item_model_id)}catch(je){xe("Failed to delete stock item: "+je.message)}},Ta=ee=>{const{name:je,value:Le}=ee.target;st(et=>({...et,[je]:Le}))},Ea=async ee=>{var je,Le;if(ee.preventDefault(),!!Me){Ht(!0),xe(null);try{await Au.create({person:ze.person,stock_item:Me.stock_item_id,start_datetime:new Date(ze.start_datetime).toISOString(),condition_on_assignment:ze.condition_on_assignment}),le(!1),Ge(null),await $t(),alert("Stock item assigned successfully!")}catch(et){xe("Failed to assign stock item: "+(((Le=(je=et.response)==null?void 0:je.data)==null?void 0:Le.error)||et.message))}finally{Ht(!1)}}},Ua=async ee=>{var je,Le;Ht(!0),xe(null);try{await Au.discharge(ee),Ke(null),await $t(),alert("Stock item discharged successfully!")}catch(et){xe("Failed to discharge stock item: "+(((Le=(je=et.response)==null?void 0:je.data)==null?void 0:Le.error)||et.message))}finally{Ht(!1)}},ta=It.getUser(),ws=ta==null?void 0:ta.is_superuser,ps=((Va=ta==null?void 0:ta.roles)==null?void 0:Va.some(ee=>ee.role_code==="stock_consumable_responsible"))||ws,Ys=((es=ta==null?void 0:ta.roles)==null?void 0:es.some(ee=>ee.role_code==="exploitation_chief"))||ws,en=ps,gt=ps||Ys,Ya=c.useMemo(()=>{const ee=new Map;return D.forEach(je=>{var Le;je.is_active&&ee.set(((Le=je.stock_item)==null?void 0:Le.stock_item_id)??je.stock_item,je)}),ee},[D]),na=ee=>{Z(ee),fe(null),$(""),U(""),S(!0)},Wt=()=>{S(!1),Z(null),fe(null),$(""),U("")},Wa=async ee=>{var je,Le;if(ee.preventDefault(),!(!L||!re)){be(!0),xe(null);try{await xl.move(L.stock_item_id,{destination_room_id:re}),Ze&&await fa(Ze.stock_item_model_id),Wt()}catch(et){xe("Failed to move stock item: "+(((Le=(je=et==null?void 0:et.response)==null?void 0:je.data)==null?void 0:Le.error)||et.message))}finally{be(!1)}}};return e.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[e.jsx("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"var(--space-4)"},children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Stock Items Explorer"}),e.jsx("p",{className:"page-subtitle",children:"Manage stock item types, models, and inventory"})]}),p&&e.jsx("button",{type:"button",onClick:()=>{n(u?`/dashboard/stock-items/models?typeId=${u}`:"/dashboard/stock-items/types")},style:{padding:"var(--space-2) var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer",height:"fit-content"},title:"Back","aria-label":"Back",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})})]})}),Re&&e.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:Re}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:p?"1fr":"300px 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[!p&&e.jsxs("div",{className:"card",style:{display:"flex",flexDirection:"column",overflow:"hidden",height:"100%"},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Library"}),e.jsx("button",{onClick:()=>Ee(!de),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Stock Item Type",children:"+"})]}),de&&e.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:e.jsxs("form",{onSubmit:ha,children:[e.jsx("input",{type:"text",name:"stock_item_type_label",value:We.stock_item_type_label,onChange:Xt,placeholder:"Type Name",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsx("input",{type:"text",name:"stock_item_type_code",value:We.stock_item_type_code,onChange:Xt,placeholder:"Code (e.g. CBL)",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{type:"submit",disabled:it,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>Ee(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),e.jsxs("div",{style:{overflowY:"auto",flex:1},children:[g.map(ee=>e.jsxs("div",{children:[e.jsxs("div",{onClick:()=>Ot((tt==null?void 0:tt.stock_item_type_id)===ee.stock_item_type_id?null:ee),style:{padding:"var(--space-3) var(--space-4)",cursor:"pointer",backgroundColor:(tt==null?void 0:tt.stock_item_type_id)===ee.stock_item_type_id?"var(--color-bg-secondary)":"transparent",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[e.jsx("span",{style:{fontWeight:"500"},children:ee.stock_item_type_label}),e.jsx("button",{onClick:je=>{je.stopPropagation(),Yt(ee.stock_item_type_id)},style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]}),(tt==null?void 0:tt.stock_item_type_id)===ee.stock_item_type_id&&e.jsxs("div",{style:{backgroundColor:"var(--color-bg-secondary)",borderBottom:"1px solid var(--color-border)"},children:[e.jsx("div",{onClick:()=>Ie(!0),style:{padding:"var(--space-2) var(--space-4)",fontSize:"var(--font-size-xs)",color:"var(--color-primary)",cursor:"pointer",borderBottom:"1px dashed var(--color-border)",textAlign:"center"},children:"+ Add Model"}),_.map(je=>e.jsxs("div",{onClick:()=>kt(je),style:{padding:"var(--space-2) var(--space-4)",paddingLeft:"var(--space-8)",cursor:"pointer",backgroundColor:(Ze==null?void 0:Ze.stock_item_model_id)===je.stock_item_model_id?"var(--color-primary)":"transparent",color:(Ze==null?void 0:Ze.stock_item_model_id)===je.stock_item_model_id?"white":"var(--color-text)",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"var(--font-size-sm)"},children:[e.jsx("span",{children:h(je)||`Model ${je.stock_item_model_id}`}),(Ze==null?void 0:Ze.stock_item_model_id)===je.stock_item_model_id&&e.jsx("button",{onClick:Le=>{Le.stopPropagation(),ya(je.stock_item_model_id)},style:{border:"none",background:"none",color:"white",cursor:"pointer",opacity:.8},children:""})]},je.stock_item_model_id))]})]},ee.stock_item_type_id)),g.length===0&&!ae&&e.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No stock item types."})]})]}),e.jsx("div",{className:"card",style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:Oe?e.jsxs("div",{style:{padding:"var(--space-6)",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-6)"},children:[e.jsxs("h2",{children:["Add New Model for ",tt==null?void 0:tt.stock_item_type_label]}),e.jsx("button",{onClick:()=>Ie(!1),style:{padding:"var(--space-2) var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]}),y.length===0?e.jsx("div",{style:{color:"#c33",backgroundColor:"#fee",padding:"var(--space-4)",borderRadius:"var(--radius-sm)"},children:"No stock item brands found. Please create a brand first."}):e.jsxs("form",{onSubmit:Pa,style:{maxWidth:"600px"},children:[e.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Brand *"}),e.jsxs("select",{name:"stock_item_brand",value:qe.stock_item_brand,onChange:yt,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"},children:[e.jsx("option",{value:"",children:"Select a brand..."}),y.map(ee=>e.jsx("option",{value:ee.stock_item_brand_id,children:ee.brand_name},ee.stock_item_brand_id))]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Model Name *"}),e.jsx("input",{type:"text",name:"model_name",value:qe.model_name,onChange:yt,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Model Code *"}),e.jsx("input",{type:"text",name:"model_code",value:qe.model_code,onChange:yt,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Release Year"}),e.jsx("input",{type:"number",name:"release_year",value:qe.release_year,onChange:yt,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Warranty (Months)"}),e.jsx("input",{type:"number",name:"warranty_expiry_in_months",value:qe.warranty_expiry_in_months,onChange:yt,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]})]}),e.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Notes"}),e.jsx("textarea",{name:"notes",value:qe.notes,onChange:yt,rows:"3",style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),e.jsx("div",{style:{marginBottom:"var(--space-6)"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",name:"is_active",checked:qe.is_active,onChange:yt}),"Active Model"]})}),e.jsx("button",{type:"submit",disabled:it,style:{padding:"var(--space-2) var(--space-6)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:it?"Creating...":"Create Model"})]})]}):Ze?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("h2",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",margin:0},children:[h(Ze)||Ze.model_name||""," ",e.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-md)",fontWeight:"normal"},children:["(",Ze.model_code,")"]})]}),e.jsxs("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)",marginTop:"var(--space-1)"},children:[Ze.brand_name,"  ",I.length," Items"]})]}),e.jsx("button",{onClick:()=>{Sa(null),aa({stock_item_name:"",stock_item_inventory_number:"",stock_item_status:"active",stock_item_warranty_expiry_in_months:"",stock_item_name_in_administrative_certificate:"",destruction_certificate_id:0,maintenance_step_id:null}),Bt(!0)},style:{backgroundColor:"var(--color-primary)",color:"white",border:"none",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:"pointer",fontWeight:"500"},children:"+ Add Item"})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"var(--space-4)"},children:[Pe&&e.jsxs("div",{style:{marginBottom:"var(--space-6)",padding:"var(--space-4)",backgroundColor:"var(--color-bg-secondary)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"var(--space-4)"},children:pa?"Edit Stock Item":"New Stock Item"}),e.jsxs("form",{onSubmit:Pt,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Name"}),e.jsx("input",{type:"text",name:"stock_item_name",value:ht.stock_item_name,onChange:Ct,placeholder:"Stock Item Name",style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Status"}),e.jsxs("select",{name:"stock_item_status",value:ht.stock_item_status,onChange:Ct,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"},children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"retired",children:"Retired"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Inventory Number"}),e.jsx("input",{type:"text",name:"stock_item_inventory_number",value:ht.stock_item_inventory_number,onChange:Ct,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Warranty (Months)"}),e.jsx("input",{type:"number",name:"stock_item_warranty_expiry_in_months",value:ht.stock_item_warranty_expiry_in_months,onChange:Ct,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]})]}),e.jsxs("div",{style:{marginTop:"var(--space-4)",display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{type:"submit",style:{padding:"var(--space-2) var(--space-4)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Save Item"}),e.jsx("button",{type:"button",onClick:()=>Bt(!1),style:{padding:"var(--space-2) var(--space-4)",backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})]})]}),I.length===0?e.jsx("div",{style:{textAlign:"center",color:"var(--color-text-secondary)",padding:"var(--space-8)"},children:"No stock items found for this model."}):e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"var(--font-size-sm)"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid var(--color-border)",textAlign:"left"},children:[e.jsx("th",{style:{padding:"var(--space-2)"},children:"Name"}),e.jsx("th",{style:{padding:"var(--space-2)"},children:"Inventory No."}),e.jsx("th",{style:{padding:"var(--space-2)"},children:"Status"}),e.jsx("th",{style:{padding:"var(--space-2)",textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:I.map(ee=>e.jsxs("tr",{onClick:()=>$s(ee),style:{borderBottom:"1px solid var(--color-border)",cursor:"pointer",backgroundColor:(J==null?void 0:J.stock_item_id)===ee.stock_item_id?"var(--color-bg-secondary)":"transparent"},children:[e.jsx("td",{style:{padding:"var(--space-3) var(--space-2)"},children:e.jsx("div",{style:{fontWeight:"500"},children:ee.stock_item_name||"Unnamed Item"})}),e.jsx("td",{style:{padding:"var(--space-3) var(--space-2)"},children:e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:ee.stock_item_inventory_number})}),e.jsx("td",{style:{padding:"var(--space-3) var(--space-2)"},children:e.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"var(--font-size-xs)",backgroundColor:ee.stock_item_status==="active"?"rgba(16, 185, 129, 0.15)":"var(--color-bg-secondary)",color:ee.stock_item_status==="active"?"var(--color-success)":"var(--color-text-secondary)"},children:ee.stock_item_status})}),e.jsxs("td",{style:{padding:"var(--space-3) var(--space-2)",textAlign:"right"},children:[e.jsx("button",{onClick:je=>{je.stopPropagation(),$s(ee)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-text-secondary)",cursor:"pointer",fontWeight:"500"},children:"Attributes"}),en&&e.jsx("button",{onClick:je=>{je.stopPropagation(),na(ee)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-primary)",cursor:"pointer",fontWeight:"500"},children:"Move"}),gt&&(()=>{const je=Ya.get(ee.stock_item_id);return je?e.jsx("button",{onClick:Le=>{Le.stopPropagation(),Ke(je)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontWeight:"500"},children:"Discharge"}):e.jsx("button",{onClick:Le=>{Le.stopPropagation(),Ge(ee);const et=new Date,qt=et.getTimezoneOffset()*6e4,ka=new Date(et-qt).toISOString().slice(0,16);st({person:"",start_datetime:ka,condition_on_assignment:ee.stock_item_status==="active"?"Good":"Needs Repair"}),le(!0)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"#10b981",cursor:"pointer",fontWeight:"500"},children:"Assign"})})(),e.jsx("button",{onClick:je=>{je.stopPropagation(),ia(ee)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-primary)",cursor:"pointer",fontWeight:"500"},children:"Edit"}),e.jsx("button",{onClick:je=>{je.stopPropagation(),xt(ee.stock_item_id)},style:{background:"none",border:"none",color:"#c33",cursor:"pointer",fontWeight:"500"},children:"Delete"})]})]},ee.stock_item_id))})]})]})]}):tt?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsx("div",{children:e.jsx("h2",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",margin:0},children:tt.stock_item_type_label})})}),e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"var(--space-4)"},children:e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"var(--space-4)"}})})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--color-text-secondary)"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"var(--space-4)",opacity:.2},children:""}),e.jsx("p",{children:"Select a stock item model from the sidebar to view inventory."})]})})]}),Be&&J&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"var(--space-4)"},children:e.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"720px",maxHeight:"85vh",overflowY:"auto",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,marginBottom:"var(--space-4)"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:J.stock_item_name||`Item ${J.stock_item_id}`}),e.jsxs("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)",marginTop:"var(--space-1)"},children:["Inventory: ",J.stock_item_inventory_number||"","  Status: ",J.stock_item_status||""]})]}),e.jsx("button",{type:"button",onClick:Ia,style:{border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",cursor:"pointer"},children:"Close"})]}),e.jsx("div",{style:{marginBottom:"var(--space-6)",padding:"var(--space-4)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",background:"var(--color-bg-secondary)"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:2},children:"Warranty (months)"}),e.jsx("div",{style:{fontWeight:600},children:J.stock_item_warranty_expiry_in_months??""})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:2},children:"Assigned to"}),(()=>{const ee=Ya.get(J.stock_item_id);return e.jsx("div",{style:{fontWeight:600},children:(ee==null?void 0:ee.person_name)||""})})()]})]})}),e.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[e.jsx("div",{style:{fontWeight:"600"},children:"Stock Item Attributes"}),e.jsx("button",{onClick:()=>Ce(!$e),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add Value"})]}),$e&&e.jsxs("form",{onSubmit:sa,style:{marginBottom:"var(--space-4)"},children:[e.jsxs("select",{name:"stock_item_attribute_definition",value:z.stock_item_attribute_definition,onChange:Kt,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select attribute definition..."}),W.map(ee=>e.jsx("option",{value:ee.stock_item_attribute_definition_id,children:ee.description||`Attribute ${ee.stock_item_attribute_definition_id}`},ee.stock_item_attribute_definition_id))]}),(()=>{var Le;const ee=Ka.get(Number(z.stock_item_attribute_definition)),je=(Le=ee==null?void 0:ee.data_type)==null?void 0:Le.toLowerCase();return je==="number"?e.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:z.value_number,onChange:Kt,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):je==="bool"||je==="boolean"?e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[e.jsx("input",{type:"checkbox",name:"value_bool",checked:z.value_bool,onChange:Kt}),"True"]}):je==="date"?e.jsx("input",{type:"date",name:"value_date",value:z.value_date,onChange:Kt,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):e.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:z.value_string,onChange:Kt,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[e.jsx("button",{type:"submit",disabled:it,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>Ce(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),F.length===0?e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attribute values set for this stock item."}):F.map(ee=>{const je=ee.definition||Ka.get(ee.stock_item_attribute_definition),Le=ee.value_string??ee.value_number??ee.value_bool??ee.value_date??"";return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:(je==null?void 0:je.description)||`Attribute ${ee.stock_item_attribute_definition}`}),e.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:Le===""?"No value":String(Le)})]}),e.jsx("button",{onClick:()=>ea(ee.stock_item,ee.stock_item_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${ee.stock_item}-${ee.stock_item_attribute_definition}`)})]})]})}),ne&&L&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"520px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,marginBottom:"var(--space-4)"},children:[e.jsxs("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:["Move Stock Item: ",L.stock_item_name||`Item ${L.stock_item_id}`]}),e.jsx("button",{type:"button",onClick:()=>!ye&&Wt(),style:{border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",cursor:"pointer"},children:"Close"})]}),e.jsxs("form",{onSubmit:Wa,children:[e.jsxs("div",{style:{marginBottom:"var(--space-6)"},children:[e.jsxs("div",{style:{marginBottom:"var(--space-3)",padding:"var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[e.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"2px"},children:"Current room"}),e.jsx("div",{style:{fontWeight:600},children:k||"Unknown"})]}),e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Destination room"}),e.jsxs("select",{value:re,onChange:ee=>U(ee.target.value),required:!0,disabled:ye,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[e.jsx("option",{value:"",children:"Select a room..."}),E.map(ee=>e.jsx("option",{value:ee.room_id,children:ee.room_name||`Room ${ee.room_id}`},ee.room_id))]})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:()=>!ye&&Wt(),style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"}),e.jsx("button",{type:"submit",disabled:ye||!re,style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:ye?"Moving...":"Move"})]})]})]})}),T&&Me&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"520px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[e.jsxs("h2",{style:{marginBottom:"var(--space-4)"},children:["Assign Stock Item: ",Me.stock_item_name||`Item ${Me.stock_item_id}`]}),e.jsxs("form",{onSubmit:Ea,children:[e.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Assign to Person"}),e.jsxs("select",{name:"person",value:ze.person,onChange:Ta,required:!0,disabled:it,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[e.jsx("option",{value:"",children:"Select a person..."}),O.map(ee=>e.jsxs("option",{value:ee.person_id,children:[ee.first_name," ",ee.last_name," (",ee.person_id,")"]},ee.person_id))]})]}),e.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Start Date (Automatic)"}),e.jsx("input",{type:"datetime-local",name:"start_datetime",value:ze.start_datetime,onChange:Ta,required:!0,readOnly:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-secondary)",cursor:"not-allowed",color:"var(--color-text)"}})]}),e.jsxs("div",{style:{marginBottom:"var(--space-6)"},children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Condition"}),e.jsx("input",{type:"text",name:"condition_on_assignment",value:ze.condition_on_assignment,onChange:Ta,placeholder:"e.g. Good, New",required:!0,disabled:it,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)"}})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:()=>{le(!1),Ge(null)},style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer",color:"var(--color-text)"},children:"Cancel"}),e.jsx("button",{type:"submit",disabled:it,style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:it?"Assigning...":"Assign Stock Item"})]})]})]})}),De&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"420px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[e.jsx("h2",{style:{marginBottom:"var(--space-4)"},children:"Confirm Discharge"}),e.jsxs("p",{style:{marginBottom:"var(--space-6)"},children:["Are you sure you want to end the assignment of ",e.jsx("strong",{children:((ts=De.stock_item)==null?void 0:ts.stock_item_name)||"Stock Item"})," to person ",e.jsx("strong",{children:De.person}),"?",e.jsx("br",{}),e.jsx("br",{}),"The end date will be set to right now."]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:()=>Ke(null),style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer",color:"var(--color-text)"},children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>Ua(De.assignment_id),disabled:it,style:{padding:"var(--space-2) var(--space-4)",background:"#ef4444",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:it?"Discharging...":"Confirm Discharge"})]})]})})]})},mj=()=>{const n=Dt(),[l,d]=c.useState([]),[u,m]=c.useState([]),[p,h]=c.useState(null),[g,b]=c.useState([]),[y,x]=c.useState(!1),[_,N]=c.useState(!1),[I,w]=c.useState(null),[O,C]=c.useState(!1),[D,te]=c.useState(!1),[E,B]=c.useState(!1),[W,Q]=c.useState({stock_item_type_label:"",stock_item_type_code:""}),[P,ge]=c.useState({description:"",data_type:"",unit:""}),[F,R]=c.useState(!1),[ae,ue]=c.useState({stock_item_attribute_definition:"",is_mandatory:!1,default_value:""});c.useEffect(()=>{Re(),Z()},[]);const Re=async()=>{N(!0),w(null);try{const T=await on.getAll();d(Array.isArray(T)?T:[])}catch(T){w("Failed to fetch stock item types: "+T.message),d([])}finally{N(!1)}},xe=async T=>{x(!0),w(null);try{const le=await zr.getByStockItemType(T);b(Array.isArray(le)?le:[])}catch(le){w("Failed to fetch type attributes: "+le.message),b([])}finally{x(!1)}},ne=T=>{const{name:le,value:Me,type:Ge,checked:De}=T.target;ue(Ke=>({...Ke,[le]:Ge==="checkbox"?De:Me}))},S=async T=>{if(T.preventDefault(),!p){w("Please select a stock item type first");return}if(!ae.stock_item_attribute_definition){w("Please select an attribute definition");return}B(!0),w(null);try{const le={stock_item_type:p.stock_item_type_id,stock_item_attribute_definition:Number(ae.stock_item_attribute_definition),is_mandatory:!!ae.is_mandatory,default_value:ae.default_value||null};await zr.create(le),ue({stock_item_attribute_definition:"",is_mandatory:!1,default_value:""}),R(!1),await xe(p.stock_item_type_id)}catch(le){w("Failed to add type attribute: "+le.message)}finally{B(!1)}},L=async T=>{if(p&&window.confirm("Remove this attribute from the stock item type?"))try{await zr.delete(p.stock_item_type_id,T),await xe(p.stock_item_type_id)}catch(le){w("Failed to remove type attribute: "+le.message)}},Z=async()=>{try{const T=await rr.getAll();m(Array.isArray(T)?T:[])}catch(T){w("Failed to fetch stock item attribute definitions: "+T.message),m([])}},G=T=>{const{name:le,value:Me}=T.target;Q(Ge=>({...Ge,[le]:Me}))},fe=async T=>{var le,Me;T.preventDefault(),B(!0),w(null);try{await on.create(W),Q({stock_item_type_label:"",stock_item_type_code:""}),C(!1),await Re()}catch(Ge){w("Failed to create stock item type: "+(((Me=(le=Ge.response)==null?void 0:le.data)==null?void 0:Me.error)||Ge.message))}finally{B(!1)}},k=async T=>{if(window.confirm("Are you sure you want to delete this stock item type?"))try{await on.delete(T),await Re()}catch(le){w("Failed to delete stock item type: "+le.message)}},$=T=>{n(`/dashboard/stock-items/models?typeId=${T.stock_item_type_id}`)},re=async T=>{h(T),R(!1),ue({stock_item_attribute_definition:"",is_mandatory:!1,default_value:""}),await xe(T.stock_item_type_id)},U=new Set((Array.isArray(g)?g:[]).map(T=>T.stock_item_attribute_definition)),ye=(Array.isArray(u)?u:[]).filter(T=>!U.has(T.stock_item_attribute_definition_id)),be=()=>{n("/dashboard/stock-items/attribute-definitions")};return e.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[e.jsx("h1",{className:"page-title",children:"Stock Items"}),e.jsx("p",{className:"page-subtitle",children:"Select a stock item type"})]}),I&&e.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:I}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Types"}),e.jsx("button",{onClick:()=>C(!O),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Stock Item Type",children:"+"})]}),O&&e.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:e.jsxs("form",{onSubmit:fe,children:[e.jsx("input",{type:"text",name:"stock_item_type_label",value:W.stock_item_type_label,onChange:G,placeholder:"Type Name",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsx("input",{type:"text",name:"stock_item_type_code",value:W.stock_item_type_code,onChange:G,placeholder:"Code (e.g. CBL)",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{type:"submit",disabled:E,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>C(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),e.jsxs("div",{style:{overflowY:"auto",flex:1},children:[l.map(T=>e.jsxs("div",{onClick:()=>$(T),style:{padding:"var(--space-3) var(--space-4)",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[e.jsx("span",{style:{fontWeight:"500"},children:T.stock_item_type_label}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[e.jsx("button",{onClick:le=>{le.stopPropagation(),re(T)},style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Attributes"}),e.jsx("button",{onClick:le=>{le.stopPropagation(),k(T.stock_item_type_id)},style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]})]},T.stock_item_type_id)),l.length===0&&!_&&e.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No stock item types."})]})]}),e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsxs("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:["Type Attributes ",p?` ${p.stock_item_type_label}`:""]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{onClick:()=>R(T=>!T),disabled:!p,style:{border:"none",background:"none",color:"var(--color-primary)",cursor:p?"pointer":"not-allowed",opacity:p?1:.6},children:"+ Add"}),e.jsx("button",{onClick:be,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Manage"})]})]}),e.jsx("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:p?e.jsxs(e.Fragment,{children:[F&&e.jsxs("form",{onSubmit:S,style:{marginBottom:"var(--space-4)"},children:[e.jsxs("select",{name:"stock_item_attribute_definition",value:ae.stock_item_attribute_definition,onChange:ne,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select attribute definition..."}),ye.map(T=>e.jsx("option",{value:T.stock_item_attribute_definition_id,children:T.description||`Attribute ${T.stock_item_attribute_definition_id}`},T.stock_item_attribute_definition_id))]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[e.jsx("input",{type:"checkbox",name:"is_mandatory",checked:ae.is_mandatory,onChange:ne}),"Mandatory"]}),e.jsx("input",{type:"text",name:"default_value",placeholder:"Default value (optional)",value:ae.default_value,onChange:ne,style:{padding:"var(--space-2)"}})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{type:"submit",disabled:E,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>R(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),y&&e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!y&&g.length===0&&e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned to this type."}),!y&&g.map(T=>{const le=T.definition||u.find(Me=>Me.stock_item_attribute_definition_id===T.stock_item_attribute_definition);return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:(le==null?void 0:le.description)||`Attribute ${T.stock_item_attribute_definition}`}),e.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[(le==null?void 0:le.data_type)||"n/a",le!=null&&le.unit?`  ${le.unit}`:"",T.is_mandatory?"  mandatory":"",T.default_value?`  default: ${T.default_value}`:""]})]}),e.jsx("button",{onClick:()=>L(T.stock_item_attribute_definition),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},`${T.stock_item_type}-${T.stock_item_attribute_definition}`)})]}):e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:'Click "Attributes" on a type to view its attributes.'})})]})]})]})},pj=()=>{const n=Dt(),l=Za(),u=c.useMemo(()=>new URLSearchParams(l.search),[l.search]).get("typeId"),[m,p]=c.useState(null),[h,g]=c.useState([]),[b,y]=c.useState([]),[x,_]=c.useState(!1),[N,I]=c.useState(null),[w,O]=c.useState(!1),[C,D]=c.useState(!1),[te,E]=c.useState({stock_item_attribute_definition:"",is_mandatory:!1,default_value:""});c.useEffect(()=>{if(!u){I("typeId is required");return}B()},[u]);const B=async()=>{_(!0),I(null);try{const[R,ae,ue]=await Promise.all([on.getById(u),rr.getAll(),zr.getByStockItemType(u)]);p(R),y(Array.isArray(ae)?ae:[]),g(Array.isArray(ue)?ue:[])}catch(R){I("Failed to load type attributes: "+R.message)}finally{_(!1)}},W=R=>{const{name:ae,value:ue,type:Re,checked:xe}=R.target;E(ne=>({...ne,[ae]:Re==="checkbox"?xe:ue}))},Q=async R=>{if(R.preventDefault(),!te.stock_item_attribute_definition){I("Please select an attribute definition");return}D(!0),I(null);try{const ae={stock_item_type:Number(u),stock_item_attribute_definition:Number(te.stock_item_attribute_definition),is_mandatory:te.is_mandatory,default_value:te.default_value||null};await zr.create(ae),E({stock_item_attribute_definition:"",is_mandatory:!1,default_value:""}),O(!1),await B()}catch(ae){I("Failed to add attribute to type: "+ae.message)}finally{D(!1)}},P=async R=>{if(window.confirm("Remove this attribute from the stock item type?"))try{await zr.delete(Number(u),Number(R)),await B()}catch(ae){I("Failed to remove type attribute: "+ae.message)}},ge=c.useMemo(()=>new Set(h.map(R=>R.stock_item_attribute_definition)),[h]),F=c.useMemo(()=>b.filter(R=>!ge.has(R.stock_item_attribute_definition_id)),[b,ge]);return e.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"flex-end",gap:"var(--space-4)"},children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Stock Item Type Attributes"}),e.jsxs("p",{className:"page-subtitle",children:[m?m.stock_item_type_label:"Type","  Manage attributes"]})]}),e.jsx("button",{onClick:()=>n("/dashboard/stock-items/types"),style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back to Types","aria-label":"Back to Types",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})})]}),N&&e.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:N}),e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Attributes"}),e.jsx("button",{onClick:()=>O(!w),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add"})]}),w&&e.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:e.jsxs("form",{onSubmit:Q,children:[e.jsxs("select",{name:"stock_item_attribute_definition",value:te.stock_item_attribute_definition,onChange:W,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select attribute definition"}),F.map(R=>e.jsxs("option",{value:R.stock_item_attribute_definition_id,children:[R.description," (",R.data_type||"n/a",R.unit?`  ${R.unit}`:"",")"]},R.stock_item_attribute_definition_id))]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[e.jsx("input",{type:"checkbox",name:"is_mandatory",checked:te.is_mandatory,onChange:W}),"Mandatory"]}),e.jsx("input",{type:"text",name:"default_value",placeholder:"Default value (optional)",value:te.default_value,onChange:W,style:{padding:"var(--space-2)"}})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{type:"submit",disabled:C,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>O(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),e.jsxs("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:[x&&e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!x&&h.length===0&&e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned to this type."}),h.map(R=>{var ae,ue,Re;return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:((ae=R.definition)==null?void 0:ae.description)||`Definition ${R.stock_item_attribute_definition}`}),e.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[((ue=R.definition)==null?void 0:ue.data_type)||"n/a",(Re=R.definition)!=null&&Re.unit?`  ${R.definition.unit}`:"",R.is_mandatory?"  mandatory":"",R.default_value?`  default: ${R.default_value}`:""]})]}),e.jsx("button",{onClick:()=>P(R.stock_item_attribute_definition),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},R.stock_item_attribute_definition)})]})]})]})},fj=()=>{const n=Dt(),[l]=Hs(),d=l.get("typeId"),u=z=>[z==null?void 0:z.brand_name,z==null?void 0:z.model_name].filter(Boolean).join(" "),[m,p]=c.useState(null),[h,g]=c.useState([]),[b,y]=c.useState(null),[x,_]=c.useState([]),[N,I]=c.useState([]),[w,O]=c.useState([]),[C,D]=c.useState(!1),[te,E]=c.useState(!1),[B,W]=c.useState(null),[Q,P]=c.useState({stock_item_brand:"",model_name:"",model_code:""}),[ge,F]=c.useState(!1),[R,ae]=c.useState({stock_item_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[ue,Re]=c.useState(!1),[xe,ne]=c.useState(null),[S,L]=c.useState(!1),[Z,G]=c.useState(!1),[fe,k]=c.useState(!1),[$,re]=c.useState({brand_name:"",brand_photo:null}),[U,ye]=c.useState(null),be=z=>String(z||"").trim().toUpperCase().replace(/\s+/g,"_").replace(/[^A-Z0-9_\-]/g,"").slice(0,16);c.useEffect(()=>{d&&T(d)},[d]),c.useEffect(()=>{Ge(),De()},[]),c.useEffect(()=>{if(!b){O([]),F(!1),ae({stock_item_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""});return}Ke(b.stock_item_model_id)},[b]);const T=async z=>{Re(!0),ne(null);try{const[A,de]=await Promise.all([on.getAll(),Qa.getByStockItemType(z)]),Oe=(Array.isArray(A)?A:[]).find(Ie=>String(Ie.stock_item_type_id)===String(z))||null;p(Oe),g(Array.isArray(de)?de:[]),y(null)}catch(A){ne("Failed to fetch stock item models: "+A.message),p(null),g([]),y(null)}finally{Re(!1)}},le=z=>{const{name:A,value:de,type:Ee,files:Oe}=z.target;if(Ee==="file"&&Oe&&Oe[0]){const Ie=Oe[0];re(Pe=>({...Pe,[A]:Ie})),ye(URL.createObjectURL(Ie))}else re(Ie=>({...Ie,[A]:de}))},Me=async z=>{var de,Ee,Oe;if(z.preventDefault(),!It.isSuperuser())return;const A=(de=$.brand_name)==null?void 0:de.trim();if(!A){ne("Please enter a brand name");return}k(!0),ne(null);try{const Ie=new FormData;Ie.append("brand_name",A),Ie.append("brand_code",be(A)),Ie.append("is_active","true"),$.brand_photo&&Ie.append("brand_photo",$.brand_photo),await Iu.create(Ie),re({brand_name:"",brand_photo:null}),ye(null),G(!1),await De()}catch(Ie){ne("Failed to create stock item brand: "+(((Oe=(Ee=Ie.response)==null?void 0:Ee.data)==null?void 0:Oe.error)||Ie.message))}finally{k(!1)}},Ge=async()=>{try{const z=await rr.getAll();I(Array.isArray(z)?z:[])}catch{I([])}},De=async()=>{try{const z=await Iu.getAll();_(Array.isArray(z)?z:[])}catch{_([])}},Ke=async z=>{try{const A=await ku.getByStockItemModel(z);O(Array.isArray(A)?A:[])}catch(A){ne("Failed to fetch stock item model attributes: "+A.message),O([])}},ze=z=>{const{name:A,value:de,type:Ee,checked:Oe}=z.target;ae(Ie=>({...Ie,[A]:Ee==="checkbox"?Oe:de}))},st=z=>{const{name:A,value:de}=z.target;P(Ee=>({...Ee,[A]:de}))},Ne=async z=>{var A,de;if(z.preventDefault(),!!d){if(!Q.stock_item_brand){ne("Please select a brand");return}E(!0),ne(null);try{const Ee={stock_item_type:Number(d),stock_item_brand:Number(Q.stock_item_brand),model_name:Q.model_name||null,model_code:Q.model_code||null};B?await Qa.update(B.stock_item_model_id,Ee):await Qa.create(Ee),P({stock_item_brand:"",model_name:"",model_code:""}),D(!1),W(null),await T(d)}catch(Ee){ne(`Failed to ${B?"update":"create"} stock item model: `+(((de=(A=Ee.response)==null?void 0:A.data)==null?void 0:de.error)||Ee.message))}finally{E(!1)}}},Qe=z=>{W(z),P({stock_item_brand:z.stock_item_brand,model_name:z.model_name||"",model_code:z.model_code||""}),D(!0)},$e=()=>{D(!1),W(null),P({stock_item_brand:"",model_name:"",model_code:""})},Ce=async z=>{if(z.preventDefault(),!b){ne("Please select a stock item model first");return}if(!R.stock_item_attribute_definition){ne("Please select an attribute definition");return}L(!0),ne(null);try{const A={stock_item_model:b.stock_item_model_id,stock_item_attribute_definition:Number(R.stock_item_attribute_definition),value_string:R.value_string||null,value_number:R.value_number?Number(R.value_number):null,value_bool:R.value_bool,value_date:R.value_date||null};await ku.create(A),ae({stock_item_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),F(!1),await Ke(b.stock_item_model_id)}catch(A){ne("Failed to add model attribute value: "+A.message)}finally{L(!1)}},Be=async(z,A)=>{if(window.confirm("Remove this attribute value from the stock item model?"))try{await ku.delete(z,A),b&&await Ke(b.stock_item_model_id)}catch(de){ne("Failed to remove stock item model attribute: "+de.message)}},X=c.useMemo(()=>{const z=new Map;return(Array.isArray(N)?N:[]).forEach(A=>{z.set(A.stock_item_attribute_definition_id,A)}),z},[N]),J=c.useMemo(()=>{if(!b)return N;const z=new Set((Array.isArray(w)?w:[]).map(A=>A.stock_item_attribute_definition));return(Array.isArray(N)?N:[]).filter(A=>!z.has(A.stock_item_attribute_definition_id))},[b,N,w]),we=()=>{n("/dashboard/stock-items/types")},ke=z=>{n(`/dashboard/stock-items/instances?typeId=${d}&modelId=${z.stock_item_model_id}`)},Te=z=>{n(`/dashboard/stock-items/models/${z.stock_item_model_id}/compatibility?typeId=${d}`)};return d?e.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[e.jsx("h1",{className:"page-title",children:"Stock Items"}),e.jsxs("p",{className:"page-subtitle",children:["Select a model",m!=null&&m.stock_item_type_label?` for ${m.stock_item_type_label}`:""]})]}),xe&&e.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:xe}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsxs("div",{style:{display:"flex",gap:"var(--space-3)",alignItems:"center"},children:[e.jsx("button",{onClick:we,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})}),e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Models"})]}),It.isSuperuser()&&e.jsx("button",{onClick:()=>{W(null),P({stock_item_brand:"",model_name:"",model_code:""}),D(z=>!z)},style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Model",children:"+"})]}),C&&e.jsxs("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:[e.jsx("h3",{style:{fontSize:"var(--font-size-sm)",marginBottom:"var(--space-3)"},children:B?"Edit Model":"Add New Model"}),e.jsxs("form",{onSubmit:Ne,children:[e.jsxs("select",{name:"stock_item_brand",value:Q.stock_item_brand,onChange:st,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select brand..."}),x.map(z=>e.jsx("option",{value:z.stock_item_brand_id,children:z.brand_name},z.stock_item_brand_id))]}),e.jsx("input",{type:"text",name:"model_name",value:Q.model_name,onChange:st,placeholder:"Model Name",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsx("input",{type:"text",name:"model_code",value:Q.model_code,onChange:st,placeholder:"Model Code",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{type:"submit",disabled:te,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:B?"Update":"Save"}),e.jsx("button",{type:"button",onClick:$e,style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})]}),e.jsxs("div",{style:{overflowY:"auto",flex:1},children:[h.map(z=>e.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[e.jsx("span",{style:{fontWeight:"500"},children:u(z)||`Model ${z.stock_item_model_id}`}),e.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:z.model_code})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[It.isSuperuser()&&e.jsx("button",{onClick:()=>Qe(z),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-primary)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Edit model",children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),e.jsx("button",{onClick:()=>y(z),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:(b==null?void 0:b.stock_item_model_id)===z.stock_item_model_id?"var(--color-bg-secondary)":"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Attributes"}),e.jsx("button",{onClick:()=>Te(z),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Compatibility"}),e.jsx("button",{onClick:()=>ke(z),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Instances"})]})]},z.stock_item_model_id)),h.length===0&&!ue&&e.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No models."})]})]}),e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsxs("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:["Model Attributes ",b?` ${u(b)||b.model_name||""}`:""]}),e.jsx("button",{onClick:()=>F(z=>!z),disabled:!b,style:{border:"none",background:"none",color:"var(--color-primary)",cursor:b?"pointer":"not-allowed",opacity:b?1:.6},children:"+ Add Value"})]}),e.jsx("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:b?e.jsxs(e.Fragment,{children:[ge&&e.jsxs("form",{onSubmit:Ce,style:{marginBottom:"var(--space-4)"},children:[e.jsxs("select",{name:"stock_item_attribute_definition",value:R.stock_item_attribute_definition,onChange:ze,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select attribute definition..."}),J.map(z=>e.jsx("option",{value:z.stock_item_attribute_definition_id,children:z.description||`Attribute ${z.stock_item_attribute_definition_id}`},z.stock_item_attribute_definition_id))]}),(()=>{var de;const z=X.get(Number(R.stock_item_attribute_definition)),A=(de=z==null?void 0:z.data_type)==null?void 0:de.toLowerCase();return A==="number"?e.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:R.value_number,onChange:ze,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):A==="bool"||A==="boolean"?e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[e.jsx("input",{type:"checkbox",name:"value_bool",checked:R.value_bool,onChange:ze}),"True"]}):A==="date"?e.jsx("input",{type:"date",name:"value_date",value:R.value_date,onChange:ze,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):e.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:R.value_string,onChange:ze,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[e.jsx("button",{type:"submit",disabled:S,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>F(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),w.length===0?e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No model attribute values."}):w.map(z=>{const A=z.definition||X.get(z.stock_item_attribute_definition),de=z.value_string??z.value_number??z.value_bool??z.value_date??"";return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:(A==null?void 0:A.description)||`Attribute ${z.stock_item_attribute_definition}`}),e.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:de===""?"No value":String(de)})]}),e.jsx("button",{onClick:()=>Be(z.stock_item_model,z.stock_item_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${z.stock_item_model}-${z.stock_item_attribute_definition}`)})]}):e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Select a model to view or add values."})})]}),It.isSuperuser()&&e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",gridColumn:"1 / -1"},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Brands"}),e.jsx("button",{onClick:()=>G(z=>!z),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},title:"Add Brand",children:"+ Add Brand"})]}),e.jsxs("div",{style:{padding:"var(--space-4)"},children:[Z&&e.jsxs("form",{onSubmit:Me,children:[e.jsx("input",{type:"text",name:"brand_name",value:$.brand_name,onChange:le,placeholder:"Brand Name",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsx("input",{type:"file",name:"brand_photo",accept:"image/*",onChange:le,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),U&&e.jsx("div",{style:{marginBottom:"var(--space-2)"},children:e.jsx("img",{src:U,alt:"Preview",style:{maxWidth:"100px",maxHeight:"100px",borderRadius:"var(--radius-sm)"}})}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{type:"submit",disabled:fe,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>G(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),!Z&&e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Add brands to populate the brand selector when creating models."})]})]})]})]}):e.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[e.jsx("h1",{className:"page-title",children:"Stock Items"}),e.jsx("p",{className:"page-subtitle",children:"Select a type first"})]}),e.jsx("div",{className:"card",style:{padding:"var(--space-6)"},children:e.jsx("button",{onClick:we,style:{padding:"var(--space-2) var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer",width:"fit-content"},title:"Back to types","aria-label":"Back to types",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})})})]})},hj=()=>{const n=Dt(),{modelId:l}=Or(),[d]=Hs(),u=d.get("typeId"),[m,p]=c.useState(null),[h,g]=c.useState([]),[b,y]=c.useState([]),[x,_]=c.useState(""),[N,I]=c.useState(!1),[w,O]=c.useState(!1),[C,D]=c.useState(null),te=It.isSuperuser(),E=()=>{if(u){n(`/dashboard/stock-items/models?typeId=${u}`);return}n(-1)},B=c.useCallback(async()=>{if(l){O(!0),D(null);try{const[F,R,ae]=await Promise.all([Qa.getById(l),Qa.getCompatibleAssetModels(l),vt.getAll()]);p(F||null),g(Array.isArray(R)?R:[]),y(Array.isArray(ae)?ae:[])}catch(F){D("Failed to fetch compatibility: "+F.message)}finally{O(!1)}}},[l]);c.useEffect(()=>{B()},[B]);const W=c.useMemo(()=>new Set((Array.isArray(h)?h:[]).map(F=>F.asset_model_id)),[h]),Q=c.useMemo(()=>(Array.isArray(b)?b:[]).filter(F=>!W.has(F.asset_model_id)),[b,W]),P=async()=>{if(x){D(null);try{await Qa.addCompatibleAssetModel(l,Number(x)),_(""),I(!1),await B()}catch(F){D("Failed to add compatible asset model: "+F.message)}}},ge=async F=>{D(null);try{await Qa.removeCompatibleAssetModel(l,F),await B()}catch(R){D("Failed to remove compatible asset model: "+R.message)}};return e.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[e.jsx("h1",{className:"page-title",children:"Stock Items"}),e.jsxs("p",{className:"page-subtitle",children:["Compatibility ",m!=null&&m.model_name?` ${m.model_name}`:""]})]}),C&&e.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:C}),e.jsx("div",{className:"card",style:{padding:"var(--space-4)",marginBottom:"var(--space-4)"},children:e.jsx("button",{onClick:E,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})})}),e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Compatible Asset Models"}),te&&!N&&e.jsx("button",{onClick:()=>I(!0),style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add compatible model"})]}),te&&N&&e.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsxs("select",{value:x,onChange:F=>_(F.target.value),style:{flex:1,padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select asset model..."}),Q.map(F=>e.jsx("option",{value:F.asset_model_id,children:F.model_name||`Model ${F.asset_model_id}`},F.asset_model_id))]}),e.jsx("button",{onClick:P,disabled:!x||w,style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add"}),e.jsx("button",{onClick:()=>{I(!1),_("")},style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})}),e.jsxs("div",{style:{overflowY:"auto",flex:1},children:[(Array.isArray(h)?h:[]).map(F=>e.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[e.jsx("span",{style:{fontWeight:"500"},children:F.model_name}),e.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:F.model_code})]}),te&&e.jsx("button",{onClick:()=>ge(F.asset_model_id),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},F.asset_model_id)),h.length===0&&!w&&e.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No compatible asset models."})]})]})]})},yj=()=>{const[n,l]=c.useState([]),[d,u]=c.useState(!1),[m,p]=c.useState(null),[h,g]=c.useState(!1),[b,y]=c.useState(!1),[x,_]=c.useState({description:"",data_type:"",unit:""});c.useEffect(()=>{N()},[]);const N=async()=>{u(!0),p(null);try{const C=await rr.getAll();l(Array.isArray(C)?C:[])}catch(C){p("Failed to fetch stock item attribute definitions: "+C.message),l([])}finally{u(!1)}},I=C=>{const{name:D,value:te}=C.target;_(E=>({...E,[D]:te}))},w=async C=>{C.preventDefault(),y(!0),p(null);try{const D={description:x.description||null,data_type:x.data_type||null,unit:x.unit||null};await rr.create(D),_({description:"",data_type:"",unit:""}),g(!1),await N()}catch(D){p("Failed to create stock item attribute definition: "+D.message)}finally{y(!1)}},O=async C=>{if(window.confirm("Delete this attribute definition?"))try{await rr.delete(C),await N()}catch(D){p("Failed to delete stock item attribute definition: "+D.message)}};return e.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[e.jsx("h1",{className:"page-title",children:"Stock Item Attribute Definitions"}),e.jsx("p",{className:"page-subtitle",children:"Manage stock item attribute definitions"})]}),m&&e.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:m}),e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Definitions"}),e.jsx("button",{onClick:()=>g(!h),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add"})]}),h&&e.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:e.jsxs("form",{onSubmit:w,children:[e.jsx("input",{type:"text",name:"description",placeholder:"Description",value:x.description,onChange:I,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)"},children:[e.jsxs("select",{name:"data_type",value:x.data_type,onChange:I,style:{padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Data Type"}),e.jsx("option",{value:"string",children:"String"}),e.jsx("option",{value:"number",children:"Number"}),e.jsx("option",{value:"bool",children:"Boolean"}),e.jsx("option",{value:"date",children:"Date"})]}),e.jsx("input",{type:"text",name:"unit",placeholder:"Unit",value:x.unit,onChange:I,style:{padding:"var(--space-2)"}})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[e.jsx("button",{type:"submit",disabled:b,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>g(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),e.jsxs("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:[d&&e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!d&&n.length===0&&e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attribute definitions."}),n.map(C=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:C.description}),e.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[C.data_type,C.unit?`  ${C.unit}`:""]})]}),e.jsx("button",{onClick:()=>O(C.stock_item_attribute_definition_id),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},C.stock_item_attribute_definition_id))]})]})]})},bj=()=>{var ks,Ft,Ws;const n=Dt(),l=Za(),[d]=Hs(),u=d.get("typeId"),m=d.get("modelId"),p=l.pathname.endsWith("/instances"),h=q=>[q==null?void 0:q.brand_name,q==null?void 0:q.model_name].filter(Boolean).join(" "),[g,b]=c.useState([]),[y,x]=c.useState([]),[_,N]=c.useState([]),[I,w]=c.useState([]),[O,C]=c.useState([]),[D,te]=c.useState([]),[E,B]=c.useState([]),[W,Q]=c.useState([]),[P,ge]=c.useState([]),[F,R]=c.useState([]),[ae,ue]=c.useState([]),[Re,xe]=c.useState(!1),[ne,S]=c.useState(null),[L,Z]=c.useState(!1),[G,fe]=c.useState(null),[k,$]=c.useState(null),[re,U]=c.useState(""),[ye,be]=c.useState(""),[T,le]=c.useState(!1),[Me,Ge]=c.useState(!1),[De,Ke]=c.useState(null),[ze,st]=c.useState(null),[Ne,Qe]=c.useState({person:"",start_datetime:"",condition_on_assignment:"Good"}),[$e,Ce]=c.useState(!1),[Be,X]=c.useState(!1),[J,we]=c.useState(!1),[ke,Te]=c.useState(!1),[z,A]=c.useState({consumable_attribute_definition:"",is_mandatory:!1,default_value:""}),[de,Ee]=c.useState({consumable_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[Oe,Ie]=c.useState({consumable_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[Pe,Bt]=c.useState(!1),[tt,Ot]=c.useState(!1),[Ze,kt]=c.useState(!1),[We,St]=c.useState(null),[qe,ja]=c.useState(null),[ht,aa]=c.useState(null),[pa,Sa]=c.useState({consumable_type_label:"",consumable_type_code:""}),[it,Ht]=c.useState({model_name:"",model_code:"",consumable_brand:"",consumable_type:"",release_year:"",discontinued_year:"",is_active:!0,notes:"",warranty_expiry_in_months:""}),[Ra,wa]=c.useState({consumable_name:"",consumable_inventory_number:"",consumable_status:"active",consumable_warranty_expiry_in_months:"",consumable_name_in_administrative_certificate:"",destruction_certificate_id:"",maintenance_step_id:null}),[$t,Ma]=c.useState(null),[Ut,At]=c.useState(!1);c.useEffect(()=>{ms(),Ba(),$s(),Ka(),fa(),$a()},[]),c.useEffect(()=>{p&&(!u||!m)&&n("/dashboard/consumables/types",{replace:!0})},[p,u,m,n]);const Ka=async()=>{try{const q=await Ks.getAll();B(Array.isArray(q)?q:[])}catch(q){console.error("Failed to fetch rooms:",q),B([])}},fa=async()=>{try{const q=await Tn.getAll();C(Array.isArray(q)?q:[])}catch(q){console.error("Failed to fetch persons:",q),C([])}},$a=async()=>{try{const q=await Nu.getAll();te(Array.isArray(q)?q:[])}catch(q){console.error("Failed to fetch consumable assignments:",q),te([])}};c.useEffect(()=>{(async()=>{if(!(!L||!G))try{const v=await _l.getCurrentRoom(G.consumable_id),H=(v==null?void 0:v.room_id)??null;$(H);const ve=E.find(Fe=>Fe.room_id===H);U((ve==null?void 0:ve.room_name)||(H?`Room ${H}`:"Unknown"))}catch(v){console.error(v),$(null),U("Unknown")}})()},[L,G,E]),c.useEffect(()=>{We?(Xt(We.consumable_type_id),Ia(We.consumable_type_id),ja(null),w([]),R([]),aa(null),ue([])):(N([]),ge([]),R([]),aa(null),ue([]))},[We]),c.useEffect(()=>{if(!p||!u||!Array.isArray(g)||g.length===0)return;const q=g.find(v=>String(v.consumable_type_id)===String(u))||null;q&&(We==null?void 0:We.consumable_type_id)!==q.consumable_type_id&&St(q)},[p,u,g,We]),c.useEffect(()=>{qe?(yt(qe.consumable_model_id),Ct(qe.consumable_model_id)):(w([]),R([]),aa(null),ue([]))},[qe]),c.useEffect(()=>{if(!p||!m||!Array.isArray(_)||_.length===0)return;const q=_.find(v=>String(v.consumable_model_id)===String(m))||null;q&&(qe==null?void 0:qe.consumable_model_id)!==q.consumable_model_id&&ja(q)},[p,m,_,qe]),c.useEffect(()=>{ht?Kt(ht.consumable_id):ue([])},[ht]);const ms=async()=>{xe(!0),S(null);try{const q=await cn.getAll();b(Array.isArray(q)?q:[])}catch(q){S("Failed to fetch consumable types: "+q.message),b([])}finally{xe(!1)}},Ba=async()=>{try{const q=await Uu.getAll();x(Array.isArray(q)?q:[])}catch(q){console.error("Failed to fetch consumable brands:",q),x([])}},Xt=async q=>{try{const v=await Xa.getByConsumableType(q);N(Array.isArray(v)?v:[])}catch(v){S("Failed to fetch consumable models: "+v.message),N([])}},yt=async q=>{try{const v=await _l.getAll({consumable_model:q});w(Array.isArray(v)?v:[])}catch(v){S("Failed to fetch consumables: "+v.message),w([])}},Ct=async q=>{try{const v=await kl.getByConsumableModel(q);R(Array.isArray(v)?v:[])}catch(v){S("Failed to fetch model attributes: "+v.message),R([])}},Kt=async q=>{try{const v=await ac.getByConsumable(q);ue(Array.isArray(v)?v:[])}catch(v){S("Failed to fetch consumable attributes: "+v.message),ue([])}},ha=c.useMemo(()=>{const q=new Map;return W.forEach(v=>{q.set(v.consumable_attribute_definition_id,v)}),q},[W]),$s=async()=>{try{const q=await lr.getAll();Q(Array.isArray(q)?q:[])}catch(q){S("Failed to fetch attribute definitions: "+q.message),Q([])}},Ia=async q=>{try{const v=await Mn.getByConsumableType(q);ge(Array.isArray(v)?v:[])}catch(v){S("Failed to fetch type attributes: "+v.message),ge([])}},Pa=q=>{const{name:v,value:H}=q.target;Sa(ve=>({...ve,[v]:H}))},ya=q=>{const{name:v,value:H,type:ve,checked:Fe}=q.target;A(Nt=>({...Nt,[v]:ve==="checkbox"?Fe:H}))},Pt=q=>{const{name:v,value:H,type:ve,checked:Fe}=q.target;Ee(Nt=>({...Nt,[v]:ve==="checkbox"?Fe:H}))},ia=q=>{const{name:v,value:H,type:ve,checked:Fe}=q.target;Ie(Nt=>({...Nt,[v]:ve==="checkbox"?Fe:H}))},sa=q=>{const{name:v,value:H,type:ve,checked:Fe}=q.target;Ht(Nt=>({...Nt,[v]:ve==="checkbox"?Fe:ve==="number"?H?parseInt(H):"":H}))},ea=q=>{const{name:v,value:H}=q.target;wa(ve=>({...ve,[v]:H}))},Yt=async q=>{if(q.preventDefault(),!We){S("Please select a consumable type first");return}if(!z.consumable_attribute_definition){S("Please select an attribute definition");return}At(!0),S(null);try{const v={consumable_type:We.consumable_type_id,consumable_attribute_definition:Number(z.consumable_attribute_definition),is_mandatory:z.is_mandatory,default_value:z.default_value||null};await Mn.create(v),A({consumable_attribute_definition:"",is_mandatory:!1,default_value:""}),Ce(!1),await Ia(We.consumable_type_id)}catch(v){S("Failed to assign attribute to type: "+v.message)}finally{At(!1)}},xt=async q=>{if(q.preventDefault(),!qe){S("Please select a consumable model first");return}if(!de.consumable_attribute_definition){S("Please select an attribute definition");return}At(!0),S(null);try{const v={consumable_model:qe.consumable_model_id,consumable_attribute_definition:Number(de.consumable_attribute_definition),value_string:de.value_string||null,value_number:de.value_number?Number(de.value_number):null,value_bool:de.value_bool,value_date:de.value_date||null};await kl.create(v),Ee({consumable_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),X(!1),await Ct(qe.consumable_model_id)}catch(v){S("Failed to add model attribute value: "+v.message)}finally{At(!1)}},Ta=async q=>{if(q.preventDefault(),!ht){S("Please select a consumable first");return}if(!Oe.consumable_attribute_definition){S("Please select an attribute definition");return}At(!0),S(null);try{const v={consumable:ht.consumable_id,consumable_attribute_definition:Number(Oe.consumable_attribute_definition),value_string:Oe.value_string||null,value_number:Oe.value_number?Number(Oe.value_number):null,value_bool:Oe.value_bool,value_date:Oe.value_date||null};await ac.create(v),Ie({consumable_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),we(!1),await Kt(ht.consumable_id)}catch(v){S("Failed to add consumable attribute value: "+v.message)}finally{At(!1)}},Ea=async(q,v)=>{if(window.confirm("Remove this attribute from the consumable type?"))try{await Mn.delete(q,v),We&&await Ia(We.consumable_type_id)}catch(H){S("Failed to remove type attribute: "+H.message)}},Ua=async(q,v)=>{if(window.confirm("Remove this attribute value from the consumable model?"))try{await kl.delete(q,v),qe&&await Ct(qe.consumable_model_id)}catch(H){S("Failed to remove model attribute: "+H.message)}},ta=async(q,v)=>{if(window.confirm("Remove this attribute value from the consumable?"))try{await ac.delete(q,v),ht&&await Kt(ht.consumable_id)}catch(H){S("Failed to remove consumable attribute: "+H.message)}},ws=q=>{aa(q),Te(!0)},ps=()=>{Te(!1),we(!1)},Ys=async q=>{var v,H;q.preventDefault(),At(!0),S(null);try{await cn.create(pa),Sa({consumable_type_label:"",consumable_type_code:""}),Bt(!1),await ms()}catch(ve){S("Failed to create consumable type: "+(((H=(v=ve.response)==null?void 0:v.data)==null?void 0:H.error)||ve.message))}finally{At(!1)}},en=async q=>{var v;if(q.preventDefault(),!We){S("Please select a consumable type first");return}if(!it.consumable_brand){S("Please select a brand");return}At(!0),S(null);try{const H={model_name:it.model_name,model_code:it.model_code,consumable_brand:parseInt(it.consumable_brand),consumable_type:We.consumable_type_id,is_active:it.is_active,notes:it.notes||"",release_year:it.release_year?parseInt(it.release_year):null,discontinued_year:it.discontinued_year?parseInt(it.discontinued_year):null,warranty_expiry_in_months:it.warranty_expiry_in_months?parseInt(it.warranty_expiry_in_months):null};await Xa.create(H),Ht({model_name:"",model_code:"",consumable_brand:"",consumable_type:"",release_year:"",discontinued_year:"",is_active:!0,notes:"",warranty_expiry_in_months:""}),Ot(!1),await Xt(We.consumable_type_id)}catch(H){const ve=(v=H.response)!=null&&v.data?typeof H.response.data=="object"?JSON.stringify(H.response.data):H.response.data:H.message;S("Failed to create consumable model: "+ve)}finally{At(!1)}},gt=async q=>{var v;if(q.preventDefault(),!qe){S("Please select a consumable model first");return}At(!0),S(null);try{const H={...Ra,consumable_model:qe.consumable_model_id,destruction_certificate_id:Ra.destruction_certificate_id?Number(Ra.destruction_certificate_id):null};$t?await _l.update($t,H):await _l.create(H),wa({consumable_name:"",consumable_inventory_number:"",consumable_status:"active",consumable_warranty_expiry_in_months:"",consumable_name_in_administrative_certificate:"",destruction_certificate_id:"",maintenance_step_id:null}),Ma(null),kt(!1),await yt(qe.consumable_model_id)}catch(H){const ve=(v=H.response)!=null&&v.data?typeof H.response.data=="object"?JSON.stringify(H.response.data):H.response.data:H.message;S(`Failed to ${$t?"update":"create"} consumable: `+ve)}finally{At(!1)}},Ya=q=>{Ma(q.consumable_id),wa({consumable_name:q.consumable_name||"",consumable_inventory_number:q.consumable_inventory_number||"",consumable_status:q.consumable_status||"active",consumable_warranty_expiry_in_months:q.consumable_warranty_expiry_in_months||"",consumable_name_in_administrative_certificate:q.consumable_name_in_administrative_certificate||"",destruction_certificate_id:q.destruction_certificate_id??"",maintenance_step_id:q.maintenance_step_id||null}),kt(!0)},na=async q=>{if(window.confirm("Are you sure you want to delete this consumable type?"))try{await cn.delete(q),(We==null?void 0:We.consumable_type_id)===q&&St(null),await ms()}catch(v){S("Failed to delete consumable type: "+v.message)}},Wt=async q=>{if(window.confirm("Are you sure you want to delete this consumable model?"))try{await Xa.delete(q),We&&await Xt(We.consumable_type_id)}catch(v){S("Failed to delete consumable model: "+v.message)}},Wa=async q=>{if(window.confirm("Are you sure you want to delete this consumable?"))try{await _l.delete(q),qe&&await yt(qe.consumable_model_id)}catch(v){S("Failed to delete consumable: "+v.message)}},Va=q=>{const{name:v,value:H}=q.target;Qe(ve=>({...ve,[v]:H}))},es=async q=>{var v,H;if(q.preventDefault(),!!De){At(!0),S(null);try{await Nu.create({person:Ne.person,consumable:De.consumable_id,start_datetime:new Date(Ne.start_datetime).toISOString(),condition_on_assignment:Ne.condition_on_assignment}),Ge(!1),Ke(null),await $a(),alert("Consumable assigned successfully!")}catch(ve){S("Failed to assign consumable: "+(((H=(v=ve.response)==null?void 0:v.data)==null?void 0:H.error)||ve.message))}finally{At(!1)}}},ts=async q=>{var v,H;At(!0),S(null);try{await Nu.discharge(q),st(null),await $a(),alert("Consumable discharged successfully!")}catch(ve){S("Failed to discharge consumable: "+(((H=(v=ve.response)==null?void 0:v.data)==null?void 0:H.error)||ve.message))}finally{At(!1)}},ee=It.getUser(),je=ee==null?void 0:ee.is_superuser,Le=((ks=ee==null?void 0:ee.roles)==null?void 0:ks.some(q=>q.role_code==="stock_consumable_responsible"))||je,et=((Ft=ee==null?void 0:ee.roles)==null?void 0:Ft.some(q=>q.role_code==="exploitation_chief"))||je,qt=Le,ka=Le||et,Aa=c.useMemo(()=>{const q=new Map;return D.forEach(v=>{var H;v.is_active&&q.set(((H=v.consumable)==null?void 0:H.consumable_id)??v.consumable,v)}),q},[D]),as=q=>{fe(q),$(null),U(""),be(""),Z(!0)},ra=()=>{Z(!1),fe(null),$(null),U(""),be("")},ss=async q=>{var v,H;if(q.preventDefault(),!(!G||!ye)){le(!0),S(null);try{await _l.move(G.consumable_id,{destination_room_id:ye}),qe&&await yt(qe.consumable_model_id),ra()}catch(ve){S("Failed to move consumable: "+(((H=(v=ve==null?void 0:ve.response)==null?void 0:v.data)==null?void 0:H.error)||ve.message))}finally{le(!1)}}};return e.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[e.jsx("h1",{className:"page-title",children:"Consumables Explorer"}),e.jsx("p",{className:"page-subtitle",children:"Manage consumable types, models, and inventory"})]}),ne&&e.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:ne}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:p?"1fr":"300px 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[!p&&e.jsxs("div",{className:"card",style:{display:"flex",flexDirection:"column",overflow:"hidden",height:"100%"},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Library"}),e.jsx("button",{onClick:()=>Bt(!Pe),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Consumable Type",children:"+"})]}),Pe&&e.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:e.jsxs("form",{onSubmit:Ys,children:[e.jsx("input",{type:"text",name:"consumable_type_label",value:pa.consumable_type_label,onChange:Pa,placeholder:"Type Name",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsx("input",{type:"text",name:"consumable_type_code",value:pa.consumable_type_code,onChange:Pa,placeholder:"Code (e.g. INK)",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{type:"submit",disabled:Ut,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>Bt(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),e.jsxs("div",{style:{overflowY:"auto",flex:1},children:[g.map(q=>e.jsxs("div",{children:[e.jsxs("div",{onClick:()=>St((We==null?void 0:We.consumable_type_id)===q.consumable_type_id?null:q),style:{padding:"var(--space-3) var(--space-4)",cursor:"pointer",backgroundColor:(We==null?void 0:We.consumable_type_id)===q.consumable_type_id?"var(--color-bg-secondary)":"transparent",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[e.jsx("span",{style:{fontWeight:"500"},children:q.consumable_type_label}),e.jsx("button",{onClick:v=>{v.stopPropagation(),na(q.consumable_type_id)},style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]}),(We==null?void 0:We.consumable_type_id)===q.consumable_type_id&&e.jsxs("div",{style:{backgroundColor:"var(--color-bg-secondary)",borderBottom:"1px solid var(--color-border)"},children:[e.jsx("div",{onClick:()=>Ot(!0),style:{padding:"var(--space-2) var(--space-4)",fontSize:"var(--font-size-xs)",color:"var(--color-primary)",cursor:"pointer",borderBottom:"1px dashed var(--color-border)",textAlign:"center"},children:"+ Add Model"}),_.map(v=>e.jsxs("div",{onClick:()=>ja(v),style:{padding:"var(--space-2) var(--space-4)",paddingLeft:"var(--space-8)",cursor:"pointer",backgroundColor:(qe==null?void 0:qe.consumable_model_id)===v.consumable_model_id?"var(--color-primary)":"transparent",color:(qe==null?void 0:qe.consumable_model_id)===v.consumable_model_id?"white":"var(--color-text)",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"var(--font-size-sm)"},children:[e.jsx("span",{children:h(v)||`Model ${v.consumable_model_id}`}),(qe==null?void 0:qe.consumable_model_id)===v.consumable_model_id&&e.jsx("button",{onClick:H=>{H.stopPropagation(),Wt(v.consumable_model_id)},style:{border:"none",background:"none",color:"white",cursor:"pointer",opacity:.8},children:""})]},v.consumable_model_id))]})]},q.consumable_type_id)),g.length===0&&!Re&&e.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No consumable types."})]})]}),e.jsx("div",{className:"card",style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:tt?e.jsxs("div",{style:{padding:"var(--space-6)",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-6)"},children:[e.jsxs("h2",{children:["Add New Model for ",We==null?void 0:We.consumable_type_label]}),e.jsx("button",{onClick:()=>Ot(!1),style:{padding:"var(--space-2) var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]}),y.length===0?e.jsx("div",{style:{color:"#c33",backgroundColor:"#fee",padding:"var(--space-4)",borderRadius:"var(--radius-sm)"},children:"No consumable brands found. Please create a brand first."}):e.jsxs("form",{onSubmit:en,style:{maxWidth:"600px"},children:[e.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Brand *"}),e.jsxs("select",{name:"consumable_brand",value:it.consumable_brand,onChange:sa,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"},children:[e.jsx("option",{value:"",children:"Select a brand..."}),y.map(q=>e.jsx("option",{value:q.consumable_brand_id,children:q.brand_name},q.consumable_brand_id))]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Model Name *"}),e.jsx("input",{type:"text",name:"model_name",value:it.model_name,onChange:sa,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Model Code *"}),e.jsx("input",{type:"text",name:"model_code",value:it.model_code,onChange:sa,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Release Year"}),e.jsx("input",{type:"number",name:"release_year",value:it.release_year,onChange:sa,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Warranty (Months)"}),e.jsx("input",{type:"number",name:"warranty_expiry_in_months",value:it.warranty_expiry_in_months,onChange:sa,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]})]}),e.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Notes"}),e.jsx("textarea",{name:"notes",value:it.notes,onChange:sa,rows:"3",style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),e.jsx("div",{style:{marginBottom:"var(--space-6)"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",name:"is_active",checked:it.is_active,onChange:sa}),"Active Model"]})}),e.jsx("button",{type:"submit",disabled:Ut,style:{padding:"var(--space-2) var(--space-6)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:Ut?"Creating...":"Create Model"})]})]}):qe?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("h2",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",margin:0},children:[h(qe)||qe.model_name||""," ",e.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-md)",fontWeight:"normal"},children:["(",qe.model_code,")"]})]}),e.jsxs("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)",marginTop:"var(--space-1)"},children:[qe.brand_name,"  ",I.length," Items"]})]}),e.jsx("button",{onClick:()=>{Ma(null),wa({consumable_name:"",consumable_inventory_number:"",consumable_status:"active",consumable_warranty_expiry_in_months:"",consumable_name_in_administrative_certificate:"",destruction_certificate_id:0,maintenance_step_id:null}),kt(!0)},style:{backgroundColor:"var(--color-primary)",color:"white",border:"none",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:"pointer",fontWeight:"500"},children:"+ Add Item"})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"var(--space-4)"},children:[!p&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"var(--space-4)",marginBottom:"var(--space-6)"},children:e.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[e.jsx("div",{style:{fontWeight:"600"},children:"Consumable Type Attributes"}),e.jsx("button",{onClick:()=>Ce(!$e),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Assign"})]}),$e&&e.jsxs("form",{onSubmit:Yt,style:{marginBottom:"var(--space-4)"},children:[e.jsxs("select",{name:"consumable_attribute_definition",value:z.consumable_attribute_definition,onChange:ya,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select attribute definition..."}),W.map(q=>e.jsx("option",{value:q.consumable_attribute_definition_id,children:q.description||`Attribute ${q.consumable_attribute_definition_id}`},q.consumable_attribute_definition_id))]}),e.jsx("input",{type:"text",name:"default_value",placeholder:"Default value",value:z.default_value,onChange:ya,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[e.jsx("input",{type:"checkbox",name:"is_mandatory",checked:z.is_mandatory,onChange:ya}),"Mandatory"]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[e.jsx("button",{type:"submit",disabled:Ut,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>Ce(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),e.jsx("div",{style:{maxHeight:"240px",overflowY:"auto"},children:P.length===0?e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned."}):P.map(q=>{const v=q.definition||ha.get(q.consumable_attribute_definition);return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:(v==null?void 0:v.description)||`Attribute ${q.consumable_attribute_definition}`}),e.jsxs("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:[(v==null?void 0:v.data_type)||"type",v!=null&&v.unit?`  ${v.unit}`:"",q.is_mandatory?"  mandatory":"",q.default_value?`  default: ${q.default_value}`:""]})]}),e.jsx("button",{onClick:()=>Ea(q.consumable_type,q.consumable_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${q.consumable_type}-${q.consumable_attribute_definition}`)})})]})}),e.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)",marginBottom:"var(--space-6)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[e.jsx("div",{style:{fontWeight:"600"},children:"Consumable Model Attributes"}),e.jsx("button",{onClick:()=>X(!Be),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add Value"})]}),Be&&e.jsxs("form",{onSubmit:xt,style:{marginBottom:"var(--space-4)"},children:[e.jsxs("select",{name:"consumable_attribute_definition",value:de.consumable_attribute_definition,onChange:Pt,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select attribute definition..."}),W.map(q=>e.jsx("option",{value:q.consumable_attribute_definition_id,children:q.description||`Attribute ${q.consumable_attribute_definition_id}`},q.consumable_attribute_definition_id))]}),(()=>{var H;const q=ha.get(Number(de.consumable_attribute_definition)),v=(H=q==null?void 0:q.data_type)==null?void 0:H.toLowerCase();return v==="number"?e.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:de.value_number,onChange:Pt,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):v==="bool"||v==="boolean"?e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[e.jsx("input",{type:"checkbox",name:"value_bool",checked:de.value_bool,onChange:Pt}),"True"]}):v==="date"?e.jsx("input",{type:"date",name:"value_date",value:de.value_date,onChange:Pt,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):e.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:de.value_string,onChange:Pt,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[e.jsx("button",{type:"submit",disabled:Ut,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>X(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),F.length===0?e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No model attribute values."}):F.map(q=>{const v=q.definition||ha.get(q.consumable_attribute_definition),H=q.value_string??q.value_number??q.value_bool??q.value_date??"";return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:(v==null?void 0:v.description)||`Attribute ${q.consumable_attribute_definition}`}),e.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:H===""?"No value":String(H)})]}),e.jsx("button",{onClick:()=>Ua(q.consumable_model,q.consumable_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${q.consumable_model}-${q.consumable_attribute_definition}`)})]})]}),Ze&&e.jsxs("div",{style:{marginBottom:"var(--space-6)",padding:"var(--space-4)",backgroundColor:"var(--color-bg-secondary)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"var(--space-4)"},children:$t?"Edit Consumable":"New Consumable"}),e.jsxs("form",{onSubmit:gt,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Name"}),e.jsx("input",{type:"text",name:"consumable_name",value:Ra.consumable_name,onChange:ea,placeholder:"Consumable Name",style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Status"}),e.jsxs("select",{name:"consumable_status",value:Ra.consumable_status,onChange:ea,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"},children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"retired",children:"Retired"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Inventory Number"}),e.jsx("input",{type:"text",name:"consumable_inventory_number",value:Ra.consumable_inventory_number,onChange:ea,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Warranty (Months)"}),e.jsx("input",{type:"number",name:"consumable_warranty_expiry_in_months",value:Ra.consumable_warranty_expiry_in_months,onChange:ea,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]})]}),e.jsxs("div",{style:{marginTop:"var(--space-4)",display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{type:"submit",style:{padding:"var(--space-2) var(--space-4)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Save Item"}),e.jsx("button",{type:"button",onClick:()=>kt(!1),style:{padding:"var(--space-2) var(--space-4)",backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})]})]}),I.length===0?e.jsx("div",{style:{textAlign:"center",color:"var(--color-text-secondary)",padding:"var(--space-8)"},children:"No consumables found for this model."}):e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"var(--font-size-sm)"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid var(--color-border)",textAlign:"left"},children:[e.jsx("th",{style:{padding:"var(--space-2)"},children:"Name"}),e.jsx("th",{style:{padding:"var(--space-2)"},children:"Inventory No."}),e.jsx("th",{style:{padding:"var(--space-2)"},children:"Status"}),e.jsx("th",{style:{padding:"var(--space-2)",textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:I.map(q=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--color-border)",cursor:"pointer"},onClick:()=>ws(q),children:[e.jsx("td",{style:{padding:"var(--space-3) var(--space-2)"},children:e.jsx("div",{style:{fontWeight:"500"},children:q.consumable_name||"Unnamed Item"})}),e.jsx("td",{style:{padding:"var(--space-3) var(--space-2)"},children:e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:q.consumable_inventory_number})}),e.jsx("td",{style:{padding:"var(--space-3) var(--space-2)"},children:e.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"var(--font-size-xs)",backgroundColor:q.consumable_status==="active"?"rgba(16, 185, 129, 0.15)":"var(--color-bg-secondary)",color:q.consumable_status==="active"?"var(--color-success)":"var(--color-text-secondary)"},children:q.consumable_status})}),e.jsxs("td",{style:{padding:"var(--space-3) var(--space-2)",textAlign:"right"},children:[e.jsx("button",{onClick:v=>{v.stopPropagation(),ws(q)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-text-secondary)",cursor:"pointer",fontWeight:"500"},children:"Attributes"}),e.jsx("button",{onClick:v=>{v.stopPropagation(),Ya(q)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-primary)",cursor:"pointer",fontWeight:"500"},children:"Edit"}),qt&&e.jsx("button",{onClick:v=>{v.stopPropagation(),as(q)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-primary)",cursor:"pointer",fontWeight:"500"},children:"Move"}),ka&&(()=>{const v=Aa.get(q.consumable_id);return v?e.jsx("button",{onClick:H=>{H.stopPropagation(),st(v)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontWeight:"500"},children:"Discharge"}):e.jsx("button",{onClick:H=>{H.stopPropagation(),Ke(q);const ve=new Date,Fe=ve.getTimezoneOffset()*6e4,Nt=new Date(ve-Fe).toISOString().slice(0,16);Qe({person:"",start_datetime:Nt,condition_on_assignment:q.consumable_status==="active"?"Good":"Needs Repair"}),Ge(!0)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"#10b981",cursor:"pointer",fontWeight:"500"},children:"Assign"})})(),e.jsx("button",{onClick:v=>{v.stopPropagation(),Wa(q.consumable_id)},style:{background:"none",border:"none",color:"#c33",cursor:"pointer",fontWeight:"500"},children:"Delete"})]})]},q.consumable_id))})]})]})]}):We?e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"var(--space-4)"},children:e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"var(--space-4)"},children:!p&&e.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[e.jsx("div",{style:{fontWeight:"600"},children:"Consumable Type Attributes"}),e.jsx("button",{onClick:()=>Ce(!$e),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Assign"})]}),$e&&e.jsxs("form",{onSubmit:Yt,style:{marginBottom:"var(--space-4)"},children:[e.jsxs("select",{name:"consumable_attribute_definition",value:z.consumable_attribute_definition,onChange:ya,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select attribute definition..."}),W.map(q=>e.jsx("option",{value:q.consumable_attribute_definition_id,children:q.description||`Attribute ${q.consumable_attribute_definition_id}`},q.consumable_attribute_definition_id))]}),e.jsx("input",{type:"text",name:"default_value",placeholder:"Default value",value:z.default_value,onChange:ya,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[e.jsx("input",{type:"checkbox",name:"is_mandatory",checked:z.is_mandatory,onChange:ya}),"Mandatory"]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[e.jsx("button",{type:"submit",disabled:Ut,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>Ce(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),e.jsx("div",{style:{maxHeight:"240px",overflowY:"auto"},children:P.length===0?e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned."}):P.map(q=>{const v=q.definition||ha.get(q.consumable_attribute_definition);return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:(v==null?void 0:v.description)||`Attribute ${q.consumable_attribute_definition}`}),e.jsxs("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:[(v==null?void 0:v.data_type)||"type",v!=null&&v.unit?`  ${v.unit}`:"",q.is_mandatory?"  mandatory":"",q.default_value?`  default: ${q.default_value}`:""]})]}),e.jsx("button",{onClick:()=>Ea(q.consumable_type,q.consumable_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${q.consumable_type}-${q.consumable_attribute_definition}`)})})]})})}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--color-text-secondary)"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"var(--space-4)",opacity:.2},children:""}),e.jsx("p",{children:"Select a consumable model from the sidebar to view inventory."})]})})]}),L&&G&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"520px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,marginBottom:"var(--space-4)"},children:[e.jsxs("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:["Move Consumable: ",G.consumable_name||`Consumable ${G.consumable_id}`]}),e.jsx("button",{type:"button",onClick:()=>!T&&ra(),style:{border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",cursor:"pointer"},children:"Close"})]}),e.jsxs("form",{onSubmit:ss,children:[e.jsxs("div",{style:{marginBottom:"var(--space-6)"},children:[e.jsxs("div",{style:{marginBottom:"var(--space-3)",padding:"var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[e.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"2px"},children:"Current room"}),e.jsx("div",{style:{fontWeight:600},children:re||"Unknown"})]}),e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Destination room"}),e.jsxs("select",{value:ye,onChange:q=>be(q.target.value),required:!0,disabled:T,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[e.jsx("option",{value:"",children:"Select a room..."}),E.map(q=>e.jsx("option",{value:q.room_id,children:q.room_name||`Room ${q.room_id}`},q.room_id))]})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:()=>!T&&ra(),style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"}),e.jsx("button",{type:"submit",disabled:T||!ye,style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:T?"Moving...":"Move"})]})]})]})}),ke&&ht&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"var(--space-4)"},children:e.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"900px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12,marginBottom:"var(--space-4)"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:ht.consumable_name||`Consumable ${ht.consumable_id}`}),e.jsxs("div",{style:{marginTop:6,color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:["ID: ",ht.consumable_id,ht.consumable_inventory_number?`  Inv: ${ht.consumable_inventory_number}`:""]})]}),e.jsx("button",{type:"button",onClick:ps,style:{border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",cursor:"pointer"},children:"Close"})]}),e.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[e.jsx("div",{style:{fontWeight:"600"},children:"Consumable Attributes"}),e.jsx("button",{onClick:()=>we(!J),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add Value"})]}),J&&e.jsxs("form",{onSubmit:Ta,style:{marginBottom:"var(--space-4)"},children:[e.jsxs("select",{name:"consumable_attribute_definition",value:Oe.consumable_attribute_definition,onChange:ia,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select attribute definition..."}),W.map(q=>e.jsx("option",{value:q.consumable_attribute_definition_id,children:q.description||`Attribute ${q.consumable_attribute_definition_id}`},q.consumable_attribute_definition_id))]}),(()=>{var H;const q=ha.get(Number(Oe.consumable_attribute_definition)),v=(H=q==null?void 0:q.data_type)==null?void 0:H.toLowerCase();return v==="number"?e.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:Oe.value_number,onChange:ia,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):v==="bool"||v==="boolean"?e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[e.jsx("input",{type:"checkbox",name:"value_bool",checked:Oe.value_bool,onChange:ia}),"True"]}):v==="date"?e.jsx("input",{type:"date",name:"value_date",value:Oe.value_date,onChange:ia,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):e.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:Oe.value_string,onChange:ia,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[e.jsx("button",{type:"submit",disabled:Ut,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>we(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),ae.length===0?e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No consumable attribute values."}):ae.map(q=>{const v=q.definition||ha.get(q.consumable_attribute_definition),H=q.value_string??q.value_number??q.value_bool??q.value_date??"";return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:(v==null?void 0:v.description)||`Attribute ${q.consumable_attribute_definition}`}),e.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:H===""?"No value":String(H)})]}),e.jsx("button",{onClick:()=>ta(q.consumable,q.consumable_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${q.consumable}-${q.consumable_attribute_definition}`)})]})]})}),Me&&De&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"520px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[e.jsxs("h2",{style:{marginBottom:"var(--space-4)"},children:["Assign Consumable: ",De.consumable_name||`Consumable ${De.consumable_id}`]}),e.jsxs("form",{onSubmit:es,children:[e.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Assign to Person"}),e.jsxs("select",{name:"person",value:Ne.person,onChange:Va,required:!0,disabled:Ut,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[e.jsx("option",{value:"",children:"Select a person..."}),O.map(q=>e.jsxs("option",{value:q.person_id,children:[q.first_name," ",q.last_name," (",q.person_id,")"]},q.person_id))]})]}),e.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Start Date (Automatic)"}),e.jsx("input",{type:"datetime-local",name:"start_datetime",value:Ne.start_datetime,onChange:Va,required:!0,readOnly:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-secondary)",cursor:"not-allowed",color:"var(--color-text)"}})]}),e.jsxs("div",{style:{marginBottom:"var(--space-6)"},children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Condition"}),e.jsx("input",{type:"text",name:"condition_on_assignment",value:Ne.condition_on_assignment,onChange:Va,placeholder:"e.g. Good, New",required:!0,disabled:Ut,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)"}})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:()=>{Ge(!1),Ke(null)},style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer",color:"var(--color-text)"},children:"Cancel"}),e.jsx("button",{type:"submit",disabled:Ut,style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:Ut?"Assigning...":"Assign Consumable"})]})]})]})}),ze&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"420px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[e.jsx("h2",{style:{marginBottom:"var(--space-4)"},children:"Confirm Discharge"}),e.jsxs("p",{style:{marginBottom:"var(--space-6)"},children:["Are you sure you want to end the assignment of ",e.jsx("strong",{children:((Ws=ze.consumable)==null?void 0:Ws.consumable_name)||"Consumable"})," to person ",e.jsx("strong",{children:ze.person}),"?",e.jsx("br",{}),e.jsx("br",{}),"The end date will be set to right now."]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:()=>st(null),style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer",color:"var(--color-text)"},children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>ts(ze.assignment_id),disabled:Ut,style:{padding:"var(--space-2) var(--space-4)",background:"#ef4444",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:Ut?"Discharging...":"Confirm Discharge"})]})]})})]})},vj=()=>{const n=Dt(),[l,d]=c.useState([]),[u,m]=c.useState([]),[p,h]=c.useState(null),[g,b]=c.useState([]),[y,x]=c.useState(!1),[_,N]=c.useState(!1),[I,w]=c.useState(null),[O,C]=c.useState(!1),[D,te]=c.useState(!1),[E,B]=c.useState(!1),[W,Q]=c.useState({consumable_type_label:"",consumable_type_code:""}),[P,ge]=c.useState({description:"",data_type:"",unit:""}),[F,R]=c.useState(!1),[ae,ue]=c.useState({consumable_attribute_definition:"",is_mandatory:!1,default_value:""});c.useEffect(()=>{Re(),Z()},[]);const Re=async()=>{N(!0),w(null);try{const T=await cn.getAll();d(Array.isArray(T)?T:[])}catch(T){w("Failed to fetch consumable types: "+T.message),d([])}finally{N(!1)}},xe=async T=>{x(!0),w(null);try{const le=await Mn.getByConsumableType(T);b(Array.isArray(le)?le:[])}catch(le){w("Failed to fetch type attributes: "+le.message),b([])}finally{x(!1)}},ne=T=>{const{name:le,value:Me,type:Ge,checked:De}=T.target;ue(Ke=>({...Ke,[le]:Ge==="checkbox"?De:Me}))},S=async T=>{if(T.preventDefault(),!p){w("Please select a consumable type first");return}if(!ae.consumable_attribute_definition){w("Please select an attribute definition");return}B(!0),w(null);try{const le={consumable_type:p.consumable_type_id,consumable_attribute_definition:Number(ae.consumable_attribute_definition),is_mandatory:!!ae.is_mandatory,default_value:ae.default_value||null};await Mn.create(le),ue({consumable_attribute_definition:"",is_mandatory:!1,default_value:""}),R(!1),await xe(p.consumable_type_id)}catch(le){w("Failed to add type attribute: "+le.message)}finally{B(!1)}},L=async T=>{if(p&&window.confirm("Remove this attribute from the consumable type?"))try{await Mn.delete(p.consumable_type_id,T),await xe(p.consumable_type_id)}catch(le){w("Failed to remove type attribute: "+le.message)}},Z=async()=>{try{const T=await lr.getAll();m(Array.isArray(T)?T:[])}catch(T){w("Failed to fetch attribute definitions: "+T.message),m([])}},G=T=>{const{name:le,value:Me}=T.target;Q(Ge=>({...Ge,[le]:Me}))},fe=async T=>{var le,Me;T.preventDefault(),B(!0),w(null);try{await cn.create(W),Q({consumable_type_label:"",consumable_type_code:""}),C(!1),await Re()}catch(Ge){w("Failed to create consumable type: "+(((Me=(le=Ge.response)==null?void 0:le.data)==null?void 0:Me.error)||Ge.message))}finally{B(!1)}},k=async T=>{if(window.confirm("Are you sure you want to delete this consumable type?"))try{await cn.delete(T),await Re()}catch(le){w("Failed to delete consumable type: "+le.message)}},$=T=>{n(`/dashboard/consumables/models?typeId=${T.consumable_type_id}`)},re=async T=>{h(T),R(!1),ue({consumable_attribute_definition:"",is_mandatory:!1,default_value:""}),await xe(T.consumable_type_id)},U=new Set((Array.isArray(g)?g:[]).map(T=>T.consumable_attribute_definition)),ye=(Array.isArray(u)?u:[]).filter(T=>!U.has(T.consumable_attribute_definition_id)),be=()=>{n("/dashboard/consumables/attribute-definitions")};return e.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[e.jsx("h1",{className:"page-title",children:"Consumables"}),e.jsx("p",{className:"page-subtitle",children:"Select a consumable type"})]}),I&&e.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:I}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Types"}),e.jsx("button",{onClick:()=>C(!O),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Consumable Type",children:"+"})]}),O&&e.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:e.jsxs("form",{onSubmit:fe,children:[e.jsx("input",{type:"text",name:"consumable_type_label",value:W.consumable_type_label,onChange:G,placeholder:"Type Name",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsx("input",{type:"text",name:"consumable_type_code",value:W.consumable_type_code,onChange:G,placeholder:"Code (e.g. PPR)",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{type:"submit",disabled:E,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>C(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),e.jsxs("div",{style:{overflowY:"auto",flex:1},children:[l.map(T=>e.jsxs("div",{onClick:()=>$(T),style:{padding:"var(--space-3) var(--space-4)",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[e.jsx("span",{style:{fontWeight:"500"},children:T.consumable_type_label}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[e.jsx("button",{onClick:le=>{le.stopPropagation(),re(T)},style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Attributes"}),e.jsx("button",{onClick:le=>{le.stopPropagation(),k(T.consumable_type_id)},style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]})]},T.consumable_type_id)),l.length===0&&!_&&e.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No consumable types."})]})]}),e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsxs("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:["Type Attributes ",p?` ${p.consumable_type_label}`:""]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{onClick:()=>R(T=>!T),disabled:!p,style:{border:"none",background:"none",color:"var(--color-primary)",cursor:p?"pointer":"not-allowed",opacity:p?1:.6},children:"+ Add"}),e.jsx("button",{onClick:be,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Manage"})]})]}),e.jsx("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:p?e.jsxs(e.Fragment,{children:[F&&e.jsxs("form",{onSubmit:S,style:{marginBottom:"var(--space-4)"},children:[e.jsxs("select",{name:"consumable_attribute_definition",value:ae.consumable_attribute_definition,onChange:ne,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select attribute definition..."}),ye.map(T=>e.jsx("option",{value:T.consumable_attribute_definition_id,children:T.description||`Attribute ${T.consumable_attribute_definition_id}`},T.consumable_attribute_definition_id))]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[e.jsx("input",{type:"checkbox",name:"is_mandatory",checked:ae.is_mandatory,onChange:ne}),"Mandatory"]}),e.jsx("input",{type:"text",name:"default_value",placeholder:"Default value (optional)",value:ae.default_value,onChange:ne,style:{padding:"var(--space-2)"}})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{type:"submit",disabled:E,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>R(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),y&&e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!y&&g.length===0&&e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned to this type."}),!y&&g.map(T=>{const le=T.definition||u.find(Me=>Me.consumable_attribute_definition_id===T.consumable_attribute_definition);return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:(le==null?void 0:le.description)||`Attribute ${T.consumable_attribute_definition}`}),e.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[(le==null?void 0:le.data_type)||"n/a",le!=null&&le.unit?`  ${le.unit}`:"",T.is_mandatory?"  mandatory":"",T.default_value?`  default: ${T.default_value}`:""]})]}),e.jsx("button",{onClick:()=>L(T.consumable_attribute_definition),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},`${T.consumable_type}-${T.consumable_attribute_definition}`)})]}):e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:'Click "Attributes" on a type to view its attributes.'})})]})]})]})},gj=()=>{const n=Dt(),l=Za(),u=c.useMemo(()=>new URLSearchParams(l.search),[l.search]).get("typeId"),[m,p]=c.useState(null),[h,g]=c.useState([]),[b,y]=c.useState([]),[x,_]=c.useState(!1),[N,I]=c.useState(null),[w,O]=c.useState(!1),[C,D]=c.useState(!1),[te,E]=c.useState({consumable_attribute_definition:"",is_mandatory:!1,default_value:""});c.useEffect(()=>{if(!u){I("typeId is required");return}B()},[u]);const B=async()=>{_(!0),I(null);try{const[R,ae,ue]=await Promise.all([cn.getById(u),lr.getAll(),Mn.getByConsumableType(u)]);p(R),y(Array.isArray(ae)?ae:[]),g(Array.isArray(ue)?ue:[])}catch(R){I("Failed to load type attributes: "+R.message)}finally{_(!1)}},W=R=>{const{name:ae,value:ue,type:Re,checked:xe}=R.target;E(ne=>({...ne,[ae]:Re==="checkbox"?xe:ue}))},Q=async R=>{if(R.preventDefault(),!te.consumable_attribute_definition){I("Please select an attribute definition");return}D(!0),I(null);try{const ae={consumable_type:Number(u),consumable_attribute_definition:Number(te.consumable_attribute_definition),is_mandatory:te.is_mandatory,default_value:te.default_value||null};await Mn.create(ae),E({consumable_attribute_definition:"",is_mandatory:!1,default_value:""}),O(!1),await B()}catch(ae){I("Failed to add attribute to type: "+ae.message)}finally{D(!1)}},P=async R=>{if(window.confirm("Remove this attribute from the consumable type?"))try{await Mn.delete(Number(u),Number(R)),await B()}catch(ae){I("Failed to remove type attribute: "+ae.message)}},ge=c.useMemo(()=>new Set(h.map(R=>R.consumable_attribute_definition)),[h]),F=c.useMemo(()=>b.filter(R=>!ge.has(R.consumable_attribute_definition_id)),[b,ge]);return e.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"flex-end",gap:"var(--space-4)"},children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Consumable Type Attributes"}),e.jsxs("p",{className:"page-subtitle",children:[m?m.consumable_type_label:"Type","  Manage attributes"]})]}),e.jsx("button",{onClick:()=>n("/dashboard/consumables/types"),style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back to Types","aria-label":"Back to Types",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})})]}),N&&e.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:N}),e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Attributes"}),e.jsx("button",{onClick:()=>O(!w),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add"})]}),w&&e.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:e.jsxs("form",{onSubmit:Q,children:[e.jsxs("select",{name:"consumable_attribute_definition",value:te.consumable_attribute_definition,onChange:W,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select attribute definition"}),F.map(R=>e.jsxs("option",{value:R.consumable_attribute_definition_id,children:[R.description," (",R.data_type||"n/a",R.unit?`  ${R.unit}`:"",")"]},R.consumable_attribute_definition_id))]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[e.jsx("input",{type:"checkbox",name:"is_mandatory",checked:te.is_mandatory,onChange:W}),"Mandatory"]}),e.jsx("input",{type:"text",name:"default_value",placeholder:"Default value (optional)",value:te.default_value,onChange:W,style:{padding:"var(--space-2)"}})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{type:"submit",disabled:C,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>O(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),e.jsxs("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:[x&&e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!x&&h.length===0&&e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned to this type."}),h.map(R=>{var ae,ue,Re;return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:((ae=R.definition)==null?void 0:ae.description)||`Definition ${R.consumable_attribute_definition}`}),e.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[((ue=R.definition)==null?void 0:ue.data_type)||"n/a",(Re=R.definition)!=null&&Re.unit?`  ${R.definition.unit}`:"",R.is_mandatory?"  mandatory":"",R.default_value?`  default: ${R.default_value}`:""]})]}),e.jsx("button",{onClick:()=>P(R.consumable_attribute_definition),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},R.consumable_attribute_definition)})]})]})]})},xj=()=>{const n=Dt(),[l]=Hs(),d=l.get("typeId"),u=z=>[z==null?void 0:z.brand_name,z==null?void 0:z.model_name].filter(Boolean).join(" "),[m,p]=c.useState(null),[h,g]=c.useState([]),[b,y]=c.useState(null),[x,_]=c.useState([]),[N,I]=c.useState([]),[w,O]=c.useState([]),[C,D]=c.useState(!1),[te,E]=c.useState(!1),[B,W]=c.useState(null),[Q,P]=c.useState({consumable_brand:"",model_name:"",model_code:""}),[ge,F]=c.useState(!1),[R,ae]=c.useState({consumable_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[ue,Re]=c.useState(!1),[xe,ne]=c.useState(null),[S,L]=c.useState(!1),[Z,G]=c.useState(!1),[fe,k]=c.useState(!1),[$,re]=c.useState({brand_name:"",brand_photo:null}),[U,ye]=c.useState(null),be=z=>String(z||"").trim().toUpperCase().replace(/\s+/g,"_").replace(/[^A-Z0-9_\-]/g,"").slice(0,16);c.useEffect(()=>{d&&T(d)},[d]),c.useEffect(()=>{Ge(),De()},[]),c.useEffect(()=>{if(!b){O([]),F(!1),ae({consumable_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""});return}Ke(b.consumable_model_id)},[b]);const T=async z=>{Re(!0),ne(null);try{const[A,de]=await Promise.all([cn.getAll(),Xa.getByConsumableType(z)]),Oe=(Array.isArray(A)?A:[]).find(Ie=>String(Ie.consumable_type_id)===String(z))||null;p(Oe),g(Array.isArray(de)?de:[]),y(null)}catch(A){ne("Failed to fetch consumable models: "+A.message),p(null),g([]),y(null)}finally{Re(!1)}},le=z=>{const{name:A,value:de,type:Ee,files:Oe}=z.target;if(Ee==="file"&&Oe&&Oe[0]){const Ie=Oe[0];re(Pe=>({...Pe,[A]:Ie})),ye(URL.createObjectURL(Ie))}else re(Ie=>({...Ie,[A]:de}))},Me=async z=>{var de,Ee,Oe;if(z.preventDefault(),!It.isSuperuser())return;const A=(de=$.brand_name)==null?void 0:de.trim();if(!A){ne("Please enter a brand name");return}k(!0),ne(null);try{const Ie=new FormData;Ie.append("brand_name",A),Ie.append("brand_code",be(A)),Ie.append("is_active","true"),$.brand_photo&&Ie.append("brand_photo",$.brand_photo),await Uu.create(Ie),re({brand_name:"",brand_photo:null}),ye(null),G(!1),await De()}catch(Ie){ne("Failed to create consumable brand: "+(((Oe=(Ee=Ie.response)==null?void 0:Ee.data)==null?void 0:Oe.error)||Ie.message))}finally{k(!1)}},Ge=async()=>{try{const z=await lr.getAll();I(Array.isArray(z)?z:[])}catch{I([])}},De=async()=>{try{const z=await Uu.getAll();_(Array.isArray(z)?z:[])}catch{_([])}},Ke=async z=>{try{const A=await kl.getByConsumableModel(z);O(Array.isArray(A)?A:[])}catch(A){ne("Failed to fetch consumable model attributes: "+A.message),O([])}},ze=z=>{const{name:A,value:de,type:Ee,checked:Oe}=z.target;ae(Ie=>({...Ie,[A]:Ee==="checkbox"?Oe:de}))},st=z=>{const{name:A,value:de}=z.target;P(Ee=>({...Ee,[A]:de}))},Ne=async z=>{var A,de;if(z.preventDefault(),!!d){if(!Q.consumable_brand){ne("Please select a brand");return}E(!0),ne(null);try{const Ee={consumable_type:Number(d),consumable_brand:Number(Q.consumable_brand),model_name:Q.model_name||null,model_code:Q.model_code||null};B?await Xa.update(B.consumable_model_id,Ee):await Xa.create(Ee),P({consumable_brand:"",model_name:"",model_code:""}),D(!1),W(null),await T(d)}catch(Ee){ne(`Failed to ${B?"update":"create"} consumable model: `+(((de=(A=Ee.response)==null?void 0:A.data)==null?void 0:de.error)||Ee.message))}finally{E(!1)}}},Qe=z=>{W(z),P({consumable_brand:z.consumable_brand,model_name:z.model_name||"",model_code:z.model_code||""}),D(!0)},$e=()=>{D(!1),W(null),P({consumable_brand:"",model_name:"",model_code:""})},Ce=async z=>{if(z.preventDefault(),!b){ne("Please select a consumable model first");return}if(!R.consumable_attribute_definition){ne("Please select an attribute definition");return}L(!0),ne(null);try{const A={consumable_model:b.consumable_model_id,consumable_attribute_definition:Number(R.consumable_attribute_definition),value_string:R.value_string||null,value_number:R.value_number?Number(R.value_number):null,value_bool:R.value_bool,value_date:R.value_date||null};await kl.create(A),ae({consumable_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),F(!1),await Ke(b.consumable_model_id)}catch(A){ne("Failed to add model attribute value: "+A.message)}finally{L(!1)}},Be=async(z,A)=>{if(window.confirm("Remove this attribute value from the consumable model?"))try{await kl.delete(z,A),b&&await Ke(b.consumable_model_id)}catch(de){ne("Failed to remove consumable model attribute: "+de.message)}},X=c.useMemo(()=>{const z=new Map;return(Array.isArray(N)?N:[]).forEach(A=>{z.set(A.consumable_attribute_definition_id,A)}),z},[N]),J=c.useMemo(()=>{if(!b)return N;const z=new Set((Array.isArray(w)?w:[]).map(A=>A.consumable_attribute_definition));return(Array.isArray(N)?N:[]).filter(A=>!z.has(A.consumable_attribute_definition_id))},[N,w,b]),we=()=>{n("/dashboard/consumables/types")},ke=z=>{n(`/dashboard/consumables/instances?typeId=${d}&modelId=${z.consumable_model_id}`)},Te=z=>{n(`/dashboard/consumables/models/${z.consumable_model_id}/compatibility?typeId=${d}`)};return d?e.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[e.jsx("h1",{className:"page-title",children:"Consumables"}),e.jsxs("p",{className:"page-subtitle",children:["Select a model",m!=null&&m.consumable_type_label?` for ${m.consumable_type_label}`:""]})]}),xe&&e.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:xe}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsxs("div",{style:{display:"flex",gap:"var(--space-3)",alignItems:"center"},children:[e.jsx("button",{onClick:we,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})}),e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Models"})]}),It.isSuperuser()&&e.jsx("button",{onClick:()=>{W(null),P({consumable_brand:"",model_name:"",model_code:""}),D(z=>!z)},style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Model",children:"+"})]}),C&&e.jsxs("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:[e.jsx("h3",{style:{fontSize:"var(--font-size-sm)",marginBottom:"var(--space-3)"},children:B?"Edit Model":"Add New Model"}),e.jsxs("form",{onSubmit:Ne,children:[e.jsxs("select",{name:"consumable_brand",value:Q.consumable_brand,onChange:st,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select brand..."}),x.map(z=>e.jsx("option",{value:z.consumable_brand_id,children:z.brand_name},z.consumable_brand_id))]}),e.jsx("input",{type:"text",name:"model_name",value:Q.model_name,onChange:st,placeholder:"Model Name",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsx("input",{type:"text",name:"model_code",value:Q.model_code,onChange:st,placeholder:"Model Code",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{type:"submit",disabled:te,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:B?"Update":"Save"}),e.jsx("button",{type:"button",onClick:$e,style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})]}),e.jsxs("div",{style:{overflowY:"auto",flex:1},children:[h.map(z=>e.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[e.jsx("span",{style:{fontWeight:"500"},children:u(z)||`Model ${z.consumable_model_id}`}),e.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:z.model_code})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[It.isSuperuser()&&e.jsx("button",{onClick:()=>Qe(z),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-primary)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Edit model",children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),e.jsx("button",{onClick:()=>y(z),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:(b==null?void 0:b.consumable_model_id)===z.consumable_model_id?"var(--color-bg-secondary)":"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Attributes"}),e.jsx("button",{onClick:()=>Te(z),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Compatibility"}),e.jsx("button",{onClick:()=>ke(z),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Instances"})]})]},z.consumable_model_id)),h.length===0&&!ue&&e.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No models."})]})]}),e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsxs("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:["Model Attributes ",b?` ${u(b)||b.model_name||""}`:""]}),e.jsx("button",{onClick:()=>F(z=>!z),disabled:!b,style:{border:"none",background:"none",color:"var(--color-primary)",cursor:b?"pointer":"not-allowed",opacity:b?1:.6},children:"+ Add Value"})]}),e.jsx("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:b?e.jsxs(e.Fragment,{children:[ge&&e.jsxs("form",{onSubmit:Ce,style:{marginBottom:"var(--space-4)"},children:[e.jsxs("select",{name:"consumable_attribute_definition",value:R.consumable_attribute_definition,onChange:ze,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select attribute definition..."}),J.map(z=>e.jsx("option",{value:z.consumable_attribute_definition_id,children:z.description||`Attribute ${z.consumable_attribute_definition_id}`},z.consumable_attribute_definition_id))]}),(()=>{var de;const z=X.get(Number(R.consumable_attribute_definition)),A=(de=z==null?void 0:z.data_type)==null?void 0:de.toLowerCase();return A==="number"?e.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:R.value_number,onChange:ze,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):A==="bool"||A==="boolean"?e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[e.jsx("input",{type:"checkbox",name:"value_bool",checked:R.value_bool,onChange:ze}),"True"]}):A==="date"?e.jsx("input",{type:"date",name:"value_date",value:R.value_date,onChange:ze,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):e.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:R.value_string,onChange:ze,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[e.jsx("button",{type:"submit",disabled:S,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>F(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),w.length===0?e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No model attribute values."}):w.map(z=>{const A=z.definition||X.get(z.consumable_attribute_definition),de=z.value_string??z.value_number??z.value_bool??z.value_date??"";return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:(A==null?void 0:A.description)||`Attribute ${z.consumable_attribute_definition}`}),e.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:de===""?"No value":String(de)})]}),e.jsx("button",{onClick:()=>Be(z.consumable_model,z.consumable_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${z.consumable_model}-${z.consumable_attribute_definition}`)})]}):e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Select a model to view or add values."})})]}),It.isSuperuser()&&e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",gridColumn:"1 / -1"},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Brands"}),e.jsx("button",{onClick:()=>G(z=>!z),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},title:"Add Brand",children:"+ Add Brand"})]}),e.jsxs("div",{style:{padding:"var(--space-4)"},children:[Z&&e.jsxs("form",{onSubmit:Me,children:[e.jsx("input",{type:"text",name:"brand_name",value:$.brand_name,onChange:le,placeholder:"Brand Name",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsx("input",{type:"file",name:"brand_photo",accept:"image/*",onChange:le,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),U&&e.jsx("div",{style:{marginBottom:"var(--space-2)"},children:e.jsx("img",{src:U,alt:"Preview",style:{maxWidth:"100px",maxHeight:"100px",borderRadius:"var(--radius-sm)"}})}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{type:"submit",disabled:fe,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>G(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),!Z&&e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Add brands to populate the brand selector when creating models."})]})]})]})]}):e.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[e.jsx("h1",{className:"page-title",children:"Consumables"}),e.jsx("p",{className:"page-subtitle",children:"Select a type first"})]}),e.jsx("div",{className:"card",style:{padding:"var(--space-6)"},children:e.jsx("button",{onClick:we,style:{padding:"var(--space-2) var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer",width:"fit-content"},title:"Back to types","aria-label":"Back to types",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})})})]})},_j=()=>{const n=Dt(),{modelId:l}=Or(),[d]=Hs(),u=d.get("typeId"),[m,p]=c.useState(null),[h,g]=c.useState([]),[b,y]=c.useState([]),[x,_]=c.useState(""),[N,I]=c.useState(!1),[w,O]=c.useState(!1),[C,D]=c.useState(null),te=It.isSuperuser(),E=()=>{if(u){n(`/dashboard/consumables/models?typeId=${u}`);return}n(-1)},B=c.useCallback(async()=>{if(l){O(!0),D(null);try{const[F,R,ae]=await Promise.all([Xa.getById(l),Xa.getCompatibleAssetModels(l),vt.getAll()]);p(F||null),g(Array.isArray(R)?R:[]),y(Array.isArray(ae)?ae:[])}catch(F){D("Failed to fetch compatibility: "+F.message)}finally{O(!1)}}},[l]);c.useEffect(()=>{B()},[B]);const W=c.useMemo(()=>new Set((Array.isArray(h)?h:[]).map(F=>F.asset_model_id)),[h]),Q=c.useMemo(()=>(Array.isArray(b)?b:[]).filter(F=>!W.has(F.asset_model_id)),[b,W]),P=async()=>{if(x){D(null);try{await Xa.addCompatibleAssetModel(l,Number(x)),_(""),I(!1),await B()}catch(F){D("Failed to add compatible asset model: "+F.message)}}},ge=async F=>{D(null);try{await Xa.removeCompatibleAssetModel(l,F),await B()}catch(R){D("Failed to remove compatible asset model: "+R.message)}};return e.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[e.jsx("h1",{className:"page-title",children:"Consumables"}),e.jsxs("p",{className:"page-subtitle",children:["Compatibility ",m!=null&&m.model_name?` ${m.model_name}`:""]})]}),C&&e.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:C}),e.jsx("div",{className:"card",style:{padding:"var(--space-4)",marginBottom:"var(--space-4)"},children:e.jsx("button",{onClick:E,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})})}),e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Compatible Asset Models"}),te&&!N&&e.jsx("button",{onClick:()=>I(!0),style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add compatible model"})]}),te&&N&&e.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsxs("select",{value:x,onChange:F=>_(F.target.value),style:{flex:1,padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Select asset model..."}),Q.map(F=>e.jsx("option",{value:F.asset_model_id,children:F.model_name||`Model ${F.asset_model_id}`},F.asset_model_id))]}),e.jsx("button",{onClick:P,disabled:!x||w,style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add"}),e.jsx("button",{onClick:()=>{I(!1),_("")},style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})}),e.jsxs("div",{style:{overflowY:"auto",flex:1},children:[(Array.isArray(h)?h:[]).map(F=>e.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[e.jsx("span",{style:{fontWeight:"500"},children:F.model_name}),e.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:F.model_code})]}),te&&e.jsx("button",{onClick:()=>ge(F.asset_model_id),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},F.asset_model_id)),h.length===0&&!w&&e.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No compatible asset models."})]})]})]})},jj=()=>{const[n,l]=c.useState([]),[d,u]=c.useState(!1),[m,p]=c.useState(null),[h,g]=c.useState(!1),[b,y]=c.useState(!1),[x,_]=c.useState({description:"",data_type:"",unit:""});c.useEffect(()=>{N()},[]);const N=async()=>{u(!0),p(null);try{const C=await lr.getAll();l(Array.isArray(C)?C:[])}catch(C){p("Failed to fetch attribute definitions: "+C.message),l([])}finally{u(!1)}},I=C=>{const{name:D,value:te}=C.target;_(E=>({...E,[D]:te}))},w=async C=>{C.preventDefault(),y(!0),p(null);try{const D={description:x.description||null,data_type:x.data_type||null,unit:x.unit||null};await lr.create(D),_({description:"",data_type:"",unit:""}),g(!1),await N()}catch(D){p("Failed to create attribute definition: "+D.message)}finally{y(!1)}},O=async C=>{if(window.confirm("Delete this attribute definition?"))try{await lr.delete(C),await N()}catch(D){p("Failed to delete attribute definition: "+D.message)}};return e.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[e.jsx("h1",{className:"page-title",children:"Consumable Attribute Definitions"}),e.jsx("p",{className:"page-subtitle",children:"Manage consumable attribute definitions"})]}),m&&e.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:m}),e.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[e.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Definitions"}),e.jsx("button",{onClick:()=>g(!h),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add"})]}),h&&e.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:e.jsxs("form",{onSubmit:w,children:[e.jsx("input",{type:"text",name:"description",placeholder:"Description",value:x.description,onChange:I,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)"},children:[e.jsxs("select",{name:"data_type",value:x.data_type,onChange:I,style:{padding:"var(--space-2)"},children:[e.jsx("option",{value:"",children:"Data Type"}),e.jsx("option",{value:"string",children:"String"}),e.jsx("option",{value:"number",children:"Number"}),e.jsx("option",{value:"bool",children:"Boolean"}),e.jsx("option",{value:"date",children:"Date"})]}),e.jsx("input",{type:"text",name:"unit",placeholder:"Unit",value:x.unit,onChange:I,style:{padding:"var(--space-2)"}})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[e.jsx("button",{type:"submit",disabled:b,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),e.jsx("button",{type:"button",onClick:()=>g(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),e.jsxs("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:[d&&e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!d&&n.length===0&&e.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attribute definitions."}),n.map(C=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:C.description}),e.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[C.data_type,C.unit?`  ${C.unit}`:""]})]}),e.jsx("button",{onClick:()=>O(C.consumable_attribute_definition_id),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},C.consumable_attribute_definition_id))]})]})]})},Sj=()=>{const[n,l]=c.useState([]),[d,u]=c.useState([]),[m,p]=c.useState(!1),[h,g]=c.useState(null),[b,y]=c.useState(!1),[x,_]=c.useState(null),[N,I]=c.useState(!1),[w,O]=c.useState({room_name:"",room_type:""});c.useEffect(()=>{D(),C()},[]);const C=async()=>{try{const P=await X_.getAll();u(Array.isArray(P)?P:[])}catch{u([])}},D=async()=>{p(!0),g(null);try{const P=await Ks.getAll();l(Array.isArray(P)?P:[])}catch(P){g("Failed to fetch rooms: "+P.message),l([])}finally{p(!1)}},te=P=>{const{name:ge,value:F}=P.target;O(R=>({...R,[ge]:F}))},E=async P=>{var ge,F;P.preventDefault(),I(!0),g(null);try{x?await Ks.update(x,w):await Ks.create(w),O({room_name:"",room_type:""}),y(!1),_(null),await D()}catch(R){g("Failed to save room: "+(((F=(ge=R.response)==null?void 0:ge.data)==null?void 0:F.error)||R.message))}finally{I(!1)}},B=P=>{O({room_name:P.room_name,room_type:P.room_type||""}),_(P.room_id),y(!0)},W=async P=>{if(window.confirm("Are you sure you want to delete this room?"))try{await Ks.delete(P),await D()}catch(ge){g("Failed to delete room: "+ge.message)}},Q=()=>{O({room_name:"",room_type:""}),y(!1),_(null)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{className:"page-title",children:"Rooms"}),e.jsx("p",{className:"page-subtitle",children:"Manage building rooms"})]}),h&&e.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-6)",border:"1px solid #fcc"},children:h}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"var(--space-4)",borderBottom:"1px solid var(--color-border)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",margin:0},children:"All Rooms"}),e.jsx("button",{onClick:()=>{b?Q():y(!0)},style:{backgroundColor:b?"var(--color-text-secondary)":"var(--color-primary)",color:"white",border:"none",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:"pointer",fontSize:"var(--font-size-xs)",fontWeight:"500",whiteSpace:"nowrap"},children:b?"Cancel":"+ New Room"})]}),b&&e.jsx("div",{style:{padding:"var(--space-6)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-secondary)"},children:e.jsxs("form",{onSubmit:E,children:[e.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontSize:"var(--font-size-sm)",fontWeight:"500"},children:"Room Name *"}),e.jsx("input",{type:"text",name:"room_name",value:w.room_name,onChange:te,required:!0,placeholder:"e.g., Conference Room A",maxLength:"30",style:{width:"100%",padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",fontSize:"var(--font-size-sm)",boxSizing:"border-box",fontFamily:"inherit"}})]}),e.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontSize:"var(--font-size-sm)",fontWeight:"500"},children:"Room Type *"}),e.jsxs("select",{name:"room_type",value:w.room_type,onChange:te,required:!0,style:{width:"100%",padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",fontSize:"var(--font-size-sm)",boxSizing:"border-box",fontFamily:"inherit"},children:[e.jsx("option",{value:"",children:"Select a room type"}),d.map(P=>e.jsx("option",{value:P.room_type_id,children:P.room_type_label},P.room_type_id))]})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{type:"submit",disabled:N,style:{flex:1,backgroundColor:N?"var(--color-text-secondary)":"var(--color-primary)",color:"white",border:"none",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:N?"default":"pointer",fontSize:"var(--font-size-sm)",fontWeight:"500",opacity:N?.6:1},children:N?"Saving...":x?"Update":"Create"}),e.jsx("button",{type:"button",onClick:Q,style:{flex:1,backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",border:"1px solid var(--color-border)",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:"pointer",fontSize:"var(--font-size-sm)",fontWeight:"500"},children:"Cancel"})]})]})}),e.jsx("div",{className:"card-body",style:{padding:0},children:m?e.jsx("div",{style:{textAlign:"center",padding:"var(--space-6)",color:"var(--color-text-secondary)"},children:"Loading..."}):n.length===0?e.jsx("div",{style:{textAlign:"center",padding:"var(--space-6)",color:"var(--color-text-secondary)"},children:"No rooms found"}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 200px 100px",gap:"var(--space-3)",padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-secondary)",fontWeight:"600",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",textTransform:"uppercase",letterSpacing:"0.5px"},children:[e.jsx("div",{children:"Room Name"}),e.jsx("div",{children:"Room Type"}),e.jsx("div",{children:"Actions"})]}),n.map((P,ge)=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 200px 100px",gap:"var(--space-3)",padding:"var(--space-4)",borderBottom:ge<n.length-1?"1px solid var(--color-border)":"none",alignItems:"center",transition:"background-color 0.2s"},onMouseEnter:F=>{F.currentTarget.style.backgroundColor="var(--color-bg-secondary)"},onMouseLeave:F=>{F.currentTarget.style.backgroundColor="transparent"},children:[e.jsx("div",{children:e.jsx("div",{style:{fontSize:"var(--font-size-sm)",fontWeight:"500"},children:P.room_name})}),e.jsx("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)"},children:P.room_type_label||P.room_type}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{onClick:()=>B(P),style:{backgroundColor:"transparent",color:"var(--color-primary)",border:"none",padding:"var(--space-1) var(--space-2)",cursor:"pointer",fontSize:"var(--font-size-xs)",opacity:.7,transition:"opacity 0.2s"},onMouseEnter:F=>{F.target.style.opacity=1},onMouseLeave:F=>{F.target.style.opacity=.7},children:"Edit"}),e.jsx("button",{onClick:()=>W(P.room_id),style:{backgroundColor:"transparent",color:"#c33",border:"none",padding:"var(--space-1) var(--space-2)",cursor:"pointer",fontSize:"var(--font-size-xs)",opacity:.7,transition:"opacity 0.2s"},onMouseEnter:F=>{F.target.style.opacity=1},onMouseLeave:F=>{F.target.style.opacity=.7},children:"Delete"})]})]},P.room_id))]})})]})]})},Cj=()=>{const[n,l]=c.useState([]),[d,u]=c.useState(!1),[m,p]=c.useState(null),[h,g]=c.useState(!1),[b,y]=c.useState(null),[x,_]=c.useState(!1),[N,I]=c.useState({position_label:"",position_code:"",description:""});c.useEffect(()=>{w()},[]);const w=async()=>{u(!0),p(null);try{const B=await Vi.getAll();l(Array.isArray(B)?B:[])}catch(B){p("Failed to fetch positions: "+B.message),l([])}finally{u(!1)}},O=B=>{const{name:W,value:Q}=B.target;I(P=>({...P,[W]:Q}))},C=async B=>{var W,Q;B.preventDefault(),_(!0),p(null);try{b?await Vi.update(b,N):await Vi.create(N),I({position_label:"",position_code:"",description:""}),g(!1),y(null),await w()}catch(P){p("Failed to save position: "+(((Q=(W=P.response)==null?void 0:W.data)==null?void 0:Q.error)||P.message))}finally{_(!1)}},D=B=>{I({position_label:B.position_label,position_code:B.position_code,description:B.description||""}),y(B.position_id),g(!0)},te=async B=>{if(window.confirm("Are you sure you want to delete this position?"))try{await Vi.delete(B),await w()}catch(W){p("Failed to delete position: "+W.message)}},E=()=>{I({position_label:"",position_code:"",description:""}),g(!1),y(null)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{className:"page-title",children:"Positions"}),e.jsx("p",{className:"page-subtitle",children:"Manage job positions in the organization"})]}),m&&e.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-6)",border:"1px solid #fcc"},children:m}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"var(--space-4)",borderBottom:"1px solid var(--color-border)"},children:[e.jsx("h2",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",margin:0},children:"All Positions"}),e.jsx("button",{onClick:()=>{h?E():g(!0)},style:{backgroundColor:h?"var(--color-text-secondary)":"var(--color-primary)",color:"white",border:"none",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:"pointer",fontSize:"var(--font-size-xs)",fontWeight:"500",whiteSpace:"nowrap"},children:h?"Cancel":"+ New Position"})]}),h&&e.jsx("div",{style:{padding:"var(--space-6)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-secondary)"},children:e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontSize:"var(--font-size-sm)",fontWeight:"500"},children:"Position Label *"}),e.jsx("input",{type:"text",name:"position_label",value:N.position_label,onChange:O,required:!0,placeholder:"e.g., Software Engineer",style:{width:"100%",padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",fontSize:"var(--font-size-sm)",boxSizing:"border-box",fontFamily:"inherit"}})]}),e.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontSize:"var(--font-size-sm)",fontWeight:"500"},children:"Position Code *"}),e.jsx("input",{type:"text",name:"position_code",value:N.position_code,onChange:O,required:!0,placeholder:"e.g., SE",maxLength:"48",style:{width:"100%",padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",fontSize:"var(--font-size-sm)",boxSizing:"border-box",fontFamily:"inherit"}})]}),e.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontSize:"var(--font-size-sm)",fontWeight:"500"},children:"Description"}),e.jsx("textarea",{name:"description",value:N.description,onChange:O,placeholder:"Optional description for this position",rows:"3",maxLength:"256",style:{width:"100%",padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",fontSize:"var(--font-size-sm)",boxSizing:"border-box",fontFamily:"inherit",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{type:"submit",disabled:x,style:{flex:1,backgroundColor:x?"var(--color-text-secondary)":"var(--color-primary)",color:"white",border:"none",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:x?"default":"pointer",fontSize:"var(--font-size-sm)",fontWeight:"500",opacity:x?.6:1},children:x?"Saving...":b?"Update":"Create"}),e.jsx("button",{type:"button",onClick:E,style:{flex:1,backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",border:"1px solid var(--color-border)",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:"pointer",fontSize:"var(--font-size-sm)",fontWeight:"500"},children:"Cancel"})]})]})}),e.jsx("div",{className:"card-body",style:{padding:0},children:d?e.jsx("div",{style:{textAlign:"center",padding:"var(--space-6)",color:"var(--color-text-secondary)"},children:"Loading..."}):n.length===0?e.jsx("div",{style:{textAlign:"center",padding:"var(--space-6)",color:"var(--color-text-secondary)"},children:"No positions found"}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 150px 150px 100px",gap:"var(--space-3)",padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-secondary)",fontWeight:"600",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",textTransform:"uppercase",letterSpacing:"0.5px"},children:[e.jsx("div",{children:"Position"}),e.jsx("div",{children:"Code"}),e.jsx("div",{children:"Description"}),e.jsx("div",{children:"Actions"})]}),n.map((B,W)=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 150px 150px 100px",gap:"var(--space-3)",padding:"var(--space-4)",borderBottom:W<n.length-1?"1px solid var(--color-border)":"none",alignItems:"center",transition:"background-color 0.2s"},onMouseEnter:Q=>{Q.currentTarget.style.backgroundColor="var(--color-bg-secondary)"},onMouseLeave:Q=>{Q.currentTarget.style.backgroundColor="transparent"},children:[e.jsx("div",{children:e.jsx("div",{style:{fontSize:"var(--font-size-sm)",fontWeight:"500"},children:B.position_label})}),e.jsx("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)"},children:B.position_code}),e.jsx("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)",maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:B.description||""}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[e.jsx("button",{onClick:()=>D(B),style:{backgroundColor:"transparent",color:"var(--color-primary)",border:"none",padding:"var(--space-1) var(--space-2)",cursor:"pointer",fontSize:"var(--font-size-xs)",opacity:.7,transition:"opacity 0.2s"},onMouseEnter:Q=>{Q.target.style.opacity=1},onMouseLeave:Q=>{Q.target.style.opacity=.7},children:"Edit"}),e.jsx("button",{onClick:()=>te(B.position_id),style:{backgroundColor:"transparent",color:"#c33",border:"none",padding:"var(--space-1) var(--space-2)",cursor:"pointer",fontSize:"var(--font-size-xs)",opacity:.7,transition:"opacity 0.2s"},onMouseEnter:Q=>{Q.target.style.opacity=1},onMouseLeave:Q=>{Q.target.style.opacity=.7},children:"Delete"})]})]},B.position_id))]})})]})]})},wj=({editingId:n,formData:l,handleFormChange:d,handleSubmit:u,handleCancel:m})=>e.jsxs("form",{onSubmit:u,className:"form",children:[e.jsx("h3",{className:"form-title",children:n?"Edit Structure":"Add Structure"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Structure Code*"}),e.jsx("input",{type:"text",name:"structure_code",value:l.structure_code,onChange:d,required:!0,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Structure Name*"}),e.jsx("input",{type:"text",name:"structure_name",value:l.structure_name,onChange:d,required:!0,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Structure Type*"}),e.jsx("input",{type:"text",name:"structure_type",value:l.structure_type,onChange:d,required:!0,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Active"}),e.jsx("input",{type:"checkbox",name:"is_active",checked:l.is_active,onChange:d,className:"form-checkbox"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"btn btn-primary",children:n?"Update Structure":"Create Structure"}),n&&e.jsx("button",{type:"button",onClick:m,className:"btn btn-secondary",children:"Cancel"})]})]}),kj=({loading:n,structures:l,handleEdit:d,handleSelectStructureForRelations:u,setActiveTab:m,handleDelete:p})=>e.jsxs("div",{children:[e.jsx("h3",{className:"card-title",children:"Organizational Structures List"}),n?e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading structures..."})]}):l.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{className:"empty-state-title",children:"No organizational structures found"}),e.jsx("p",{className:"empty-state-text",children:"Create one to get started"})]}):e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Active"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:l.map(h=>e.jsxs("tr",{children:[e.jsx("td",{children:h.structure_code}),e.jsx("td",{children:h.structure_name}),e.jsx("td",{children:h.structure_type}),e.jsx("td",{children:e.jsx("span",{className:`badge ${h.is_active?"badge-success":"badge-warning"}`,children:h.is_active?"Active":"Inactive"})}),e.jsx("td",{children:e.jsxs("div",{className:"org-actions",children:[e.jsx("button",{className:"btn btn-primary",type:"button",onClick:()=>d(h),children:"Edit"}),e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>{u(h),m("relations_list")},children:"Relations"}),e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>p(h.organizational_structure_id),children:"Delete"})]})})]},h.organizational_structure_id))})]})})]}),Aj=({selectedStructure:n,loading:l,relations:d,handleEditRelation:u,handleDeleteRelation:m,setActiveTab:p})=>e.jsx("div",{children:n?e.jsxs(e.Fragment,{children:[e.jsxs("h3",{children:["Relations for: ",e.jsx("strong",{children:n.structure_name})]}),e.jsx("div",{children:l?e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading relations..."})]}):d.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{className:"empty-state-title",children:"No relations found"}),e.jsx("p",{className:"empty-state-text",children:"Create one to connect structures"})]}):e.jsx("div",{className:"org-relations-grid",children:d.map(h=>e.jsxs("div",{className:"org-relation-card",children:[e.jsxs("div",{children:[e.jsx("strong",{children:h.organizational_structure_name}),e.jsx("span",{children:" Parent"}),e.jsx("strong",{children:h.parent_organizational_structure_name})]}),h.relation_type&&e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"})," ",h.relation_type]}),e.jsxs("div",{className:"org-actions",children:[e.jsx("button",{className:"btn btn-primary",type:"button",onClick:()=>{u(h),p("relations_form")},children:"Edit"}),e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:()=>m(h.organizational_structure,h.parent_organizational_structure),children:"Delete"})]})]},`${h.organizational_structure}-${h.parent_organizational_structure}`))})})]}):e.jsxs("p",{children:["Please select a structure from the ",e.jsx("strong",{children:"Structures"})," tab first."]})}),Nj=({selectedStructure:n,editingRelation:l,handleSubmitRelation:d,relationFormData:u,handleRelationFormChange:m,structures:p,handleCancelRelation:h,setActiveTab:g})=>e.jsx("div",{children:n?e.jsxs("div",{children:[e.jsxs("h3",{children:["Relation for: ",e.jsx("strong",{children:n.structure_name})]}),e.jsx("h4",{children:l?"Edit Relation":"Add New Relation"}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Parent Structure*"}),e.jsxs("select",{name:"parent_organizational_structure",value:u.parent_organizational_structure,onChange:m,required:!0,disabled:!!l,className:"form-control",children:[e.jsx("option",{value:"",children:"Select a parent..."}),p.filter(b=>b.organizational_structure_id!==n.organizational_structure_id).map(b=>e.jsx("option",{value:b.organizational_structure_id,children:b.structure_name},b.organizational_structure_id))]}),l&&e.jsx("p",{children:"Parent structure cannot be changed once created. Create a new relation instead."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Relation Type (Optional)"}),e.jsx("input",{type:"text",name:"relation_type",value:u.relation_type,onChange:m,placeholder:"e.g., Department, Division",className:"form-control"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"btn btn-primary",children:l?"Update Relation":"Add Relation"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{h(),g("relations_list")},children:l?"Cancel":"Clear Form"})]})]})]}):e.jsxs("p",{children:["Please select a structure from the ",e.jsx("strong",{children:"Structures"})," tab first."]})}),Rj=()=>{const[n,l]=c.useState("structures"),[d,u]=c.useState([]),[m,p]=c.useState({structure_code:"",structure_name:"",structure_type:"",is_active:!0}),[h,g]=c.useState(null),[b,y]=c.useState([]),[x,_]=c.useState(null),[N,I]=c.useState({organizational_structure:"",parent_organizational_structure:"",relation_type:""}),[w,O]=c.useState(null),[C,D]=c.useState(!1),[te,E]=c.useState(null),[B,W]=c.useState(null);c.useEffect(()=>{Q()},[]);const Q=c.useCallback(async()=>{D(!0),E(null);try{const Z=await Gi.getAll();u(Array.isArray(Z)?Z:[])}catch(Z){E("Failed to fetch organizational structures: "+Z.message)}finally{D(!1)}},[]),P=c.useCallback(Z=>{const{name:G,value:fe,type:k,checked:$}=Z.target;p(re=>({...re,[G]:k==="checkbox"?$:fe}))},[]),ge=c.useCallback(async Z=>{Z.preventDefault(),E(null),W(null);try{h?(await Gi.update(h,m),W("Organizational structure updated successfully!")):(await Gi.create(m),W("Organizational structure created successfully!")),p({structure_code:"",structure_name:"",structure_type:"",is_active:!0}),g(null),await Q()}catch(G){E("Failed to save organizational structure: "+G.message)}},[h,m,Q]),F=c.useCallback(Z=>{p({structure_code:Z.structure_code,structure_name:Z.structure_name,structure_type:Z.structure_type,is_active:Z.is_active}),g(Z.organizational_structure_id),l("form")},[]),R=c.useCallback(async Z=>{if(window.confirm("Are you sure you want to delete this organizational structure?"))try{await Gi.delete(Z),W("Organizational structure deleted successfully!"),await Q()}catch(G){E("Failed to delete organizational structure: "+G.message)}},[Q]),ae=c.useCallback(()=>{p({structure_code:"",structure_name:"",structure_type:"",is_active:!0}),g(null)},[]);c.useCallback(async Z=>{D(!0),E(null);try{const G=await Br.getByStructureId(Z);y(Array.isArray(G)?G:[])}catch(G){E("Failed to fetch relations: "+G.message)}finally{D(!1)}},[]);const ue=c.useCallback(async Z=>{_(Z),I({organizational_structure:Z.organizational_structure_id,parent_organizational_structure:"",relation_type:""}),O(null);const G=await Br.getByStructureId(Z.organizational_structure_id);y(Array.isArray(G)?G:[])},[]),Re=c.useCallback(Z=>{const{name:G,value:fe}=Z.target;I(k=>({...k,[G]:fe}))},[]),xe=c.useCallback(async Z=>{if(Z.preventDefault(),E(null),W(null),!N.parent_organizational_structure){E("Please select a parent organizational structure");return}try{w?(await Br.update(w.organizational_structure,w.parent_organizational_structure,N),W("Relation updated successfully!")):(await Br.create(N),W("Relation created successfully!")),I({organizational_structure:x.organizational_structure_id,parent_organizational_structure:"",relation_type:""}),O(null);const G=await Br.getByStructureId(x.organizational_structure_id);y(Array.isArray(G)?G:[]),l("relations_list")}catch(G){E("Failed to save relation: "+G.message)}},[w,N,x]),ne=c.useCallback(Z=>{I({organizational_structure:Z.organizational_structure,parent_organizational_structure:Z.parent_organizational_structure,relation_type:Z.relation_type||""}),O(Z)},[]),S=c.useCallback(async(Z,G)=>{if(window.confirm("Are you sure you want to delete this relation?"))try{await Br.delete(Z,G),W("Relation deleted successfully!");const fe=await Br.getByStructureId(x.organizational_structure_id);y(Array.isArray(fe)?fe:[])}catch(fe){E("Failed to delete relation: "+fe.message)}},[x]),L=c.useCallback(()=>{I({organizational_structure:x.organizational_structure_id,parent_organizational_structure:"",relation_type:""}),O(null)},[x]);return e.jsxs("div",{className:"page-container",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{className:"page-title",children:"Organizational Structure"}),e.jsx("p",{className:"page-subtitle",children:"Manage structures and their parent-child relations"})]}),te&&e.jsx("div",{className:"error-message",children:te}),B&&e.jsx("div",{className:"success-message",children:B}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h2",{className:"card-title",children:"Management"}),e.jsxs("div",{className:"org-tabs",children:[e.jsx("button",{type:"button",className:`org-tab ${n==="structures"?"active":""}`,onClick:()=>l("structures"),children:"Structures"}),e.jsx("button",{type:"button",className:`org-tab ${n==="form"?"active":""}`,onClick:()=>l("form"),children:"Add/Edit Structure"}),e.jsx("button",{type:"button",className:`org-tab ${n==="relations_list"?"active":""}`,onClick:()=>l("relations_list"),children:"Relations List"}),e.jsx("button",{type:"button",className:`org-tab ${n==="relations_form"?"active":""}`,onClick:()=>l("relations_form"),children:"Add/Edit Relation"})]})]}),e.jsxs("div",{className:"card-body",children:[n==="structures"&&e.jsx(kj,{loading:C,structures:d,handleEdit:F,handleSelectStructureForRelations:ue,setActiveTab:l,handleDelete:R}),n==="form"&&e.jsx(wj,{editingId:h,formData:m,handleFormChange:P,handleSubmit:ge,handleCancel:ae}),n==="relations_list"&&e.jsx(Aj,{selectedStructure:x,loading:C,relations:b,handleEditRelation:ne,handleDeleteRelation:S,setActiveTab:l}),n==="relations_form"&&e.jsx(Nj,{selectedStructure:x,editingRelation:w,handleSubmitRelation:xe,relationFormData:N,handleRelationFormChange:Re,structures:d,handleCancelRelation:L,setActiveTab:l})]})]})]})},Mj=()=>{var Z,G,fe,k,$,re;const{user:n,isSuperuser:l}=Ja(),d=Dt(),[u,m]=c.useState("assets"),[p,h]=c.useState(!1),[g,b]=c.useState(""),[y,x]=c.useState(null),[_,N]=c.useState(!1),[I,w]=c.useState(null),[O,C]=c.useState(""),[D,te]=c.useState(!1),[E,B]=c.useState(""),W=c.useMemo(()=>{var U;return l?!0:((U=n==null?void 0:n.roles)==null?void 0:U.some(ye=>ye.role_code==="maintenance_chief"||ye.role_code==="exploitation_chief"))||!1},[l,n]);c.useEffect(()=>{(async()=>{try{h(!0),b("");const ye=await Q_.get();x(ye)}catch{b("Failed to load your items")}finally{h(!1)}})()},[]);const Q=(U,ye)=>!U||U.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{className:"empty-state-title",children:"No items"}),e.jsx("p",{className:"empty-state-text",children:"You don't currently own any items in this category."})]}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsx("tr",{children:ye.map(be=>e.jsx("th",{children:be.label},be.key))})}),e.jsx("tbody",{children:U.map(be=>e.jsx("tr",{children:ye.map(T=>e.jsx("td",{children:T.render(be)},T.key))},be.id))})]}),P=U=>{B(""),b(""),w(U),C(""),N(!0)},ge=async()=>{var U,ye;if(I){if(!O.trim()){b("Please enter an observation");return}try{if(te(!0),b(""),B(""),await rc.create({item_type:I.item_type,item_id:I.item_id,owner_observation:O.trim()}),N(!1),w(null),C(""),B("Report submitted successfully"),W&&u==="reports"){const be=await rc.getAll()}}catch(be){const T=((ye=(U=be==null?void 0:be.response)==null?void 0:U.data)==null?void 0:ye.error)||(be==null?void 0:be.message)||"Failed to submit report";b(typeof T=="string"?T:"Failed to submit report")}finally{te(!1)}}},F=(U,ye)=>!U||U.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{className:"empty-state-title",children:"No history"}),e.jsx("p",{className:"empty-state-text",children:"No previous ownership records found."})]}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsx("tr",{children:ye.map(be=>e.jsx("th",{children:be.label},be.key))})}),e.jsx("tbody",{children:U.map(be=>e.jsx("tr",{children:ye.map(T=>e.jsx("td",{children:T.render(be)},T.key))},be.assignment_id))})]}),R=(((Z=y==null?void 0:y.assets)==null?void 0:Z.current)||[]).map(U=>({id:U.asset_id,name:U.asset_name||`Asset ${U.asset_id}`,status:U.asset_status,inventory:U.asset_inventory_number,serial:U.asset_serial_number})),ae=((G=y==null?void 0:y.assets)==null?void 0:G.history)||[],ue=(((fe=y==null?void 0:y.stock_items)==null?void 0:fe.current)||[]).map(U=>({id:U.stock_item_id,name:U.stock_item_name||`Stock Item ${U.stock_item_id}`,status:U.stock_item_status,inventory:U.stock_item_inventory_number})),Re=((k=y==null?void 0:y.stock_items)==null?void 0:k.history)||[],xe=((($=y==null?void 0:y.consumables)==null?void 0:$.current)||[]).map(U=>({id:U.consumable_id,name:U.consumable_name||`Consumable ${U.consumable_id}`,status:U.consumable_status,inventory:U.consumable_inventory_number,serial:U.consumable_serial_number})),ne=((re=y==null?void 0:y.consumables)==null?void 0:re.history)||[],S={assets:[{key:"id",label:"ID",render:U=>U.id},{key:"name",label:"Name",render:U=>U.name},{key:"inventory",label:"Inventory #",render:U=>U.inventory||"-"},{key:"serial",label:"Serial #",render:U=>U.serial||"-"},{key:"status",label:"Status",render:U=>U.status||"-"},{key:"actions",label:"Actions",render:U=>e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>d(`/dashboard/my-items/assets/${U.id}/maintenance-timeline`),style:{padding:"0.25rem 0.5rem"},children:"View Maintenance"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>P({item_type:"asset",item_id:U.id,item_label:U.name}),style:{padding:"0.25rem 0.5rem"},children:"Report problem"})]})}],stock_items:[{key:"id",label:"ID",render:U=>U.id},{key:"name",label:"Name",render:U=>U.name},{key:"inventory",label:"Inventory #",render:U=>U.inventory||"-"},{key:"status",label:"Status",render:U=>U.status||"-"},{key:"actions",label:"Actions",render:U=>e.jsx("button",{className:"btn btn-secondary",onClick:()=>P({item_type:"stock_item",item_id:U.id,item_label:U.name}),style:{padding:"0.25rem 0.5rem"},children:"Report problem"})}],consumables:[{key:"id",label:"ID",render:U=>U.id},{key:"name",label:"Name",render:U=>U.name},{key:"inventory",label:"Inventory #",render:U=>U.inventory||"-"},{key:"serial",label:"Serial #",render:U=>U.serial||"-"},{key:"status",label:"Status",render:U=>U.status||"-"},{key:"actions",label:"Actions",render:U=>e.jsx("button",{className:"btn btn-secondary",onClick:()=>P({item_type:"consumable",item_id:U.id,item_label:U.name}),style:{padding:"0.25rem 0.5rem"},children:"Report problem"})}]},L={assets:[{key:"assignment_id",label:"Assignment ID",render:U=>U.assignment_id},{key:"asset_id",label:"Asset ID",render:U=>{var ye;return(ye=U.asset)==null?void 0:ye.asset_id}},{key:"name",label:"Name",render:U=>{var ye,be;return((ye=U.asset)==null?void 0:ye.asset_name)||`Asset ${(be=U.asset)==null?void 0:be.asset_id}`}},{key:"start",label:"Start",render:U=>U.start_datetime?new Date(U.start_datetime).toLocaleString():"-"},{key:"end",label:"End",render:U=>U.end_datetime?new Date(U.end_datetime).toLocaleString():"-"},{key:"condition",label:"Condition",render:U=>U.condition_on_assignment||"-"}],stock_items:[{key:"assignment_id",label:"Assignment ID",render:U=>U.assignment_id},{key:"stock_item_id",label:"Stock Item ID",render:U=>{var ye;return(ye=U.stock_item)==null?void 0:ye.stock_item_id}},{key:"name",label:"Name",render:U=>{var ye,be;return((ye=U.stock_item)==null?void 0:ye.stock_item_name)||`Stock Item ${(be=U.stock_item)==null?void 0:be.stock_item_id}`}},{key:"start",label:"Start",render:U=>U.start_datetime?new Date(U.start_datetime).toLocaleString():"-"},{key:"end",label:"End",render:U=>U.end_datetime?new Date(U.end_datetime).toLocaleString():"-"},{key:"condition",label:"Condition",render:U=>U.condition_on_assignment||"-"}],consumables:[{key:"assignment_id",label:"Assignment ID",render:U=>U.assignment_id},{key:"consumable_id",label:"Consumable ID",render:U=>{var ye;return(ye=U.consumable)==null?void 0:ye.consumable_id}},{key:"name",label:"Name",render:U=>{var ye,be;return((ye=U.consumable)==null?void 0:ye.consumable_name)||`Consumable ${(be=U.consumable)==null?void 0:be.consumable_id}`}},{key:"start",label:"Start",render:U=>U.start_datetime?new Date(U.start_datetime).toLocaleString():"-"},{key:"end",label:"End",render:U=>U.end_datetime?new Date(U.end_datetime).toLocaleString():"-"},{key:"condition",label:"Condition",render:U=>U.condition_on_assignment||"-"}]};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{className:"page-title",children:"My Items"}),e.jsx("p",{className:"page-subtitle",children:"View what you currently own and your ownership history"})]}),E&&e.jsx("div",{className:"card",style:{marginBottom:"var(--space-6)",borderColor:"var(--color-success)"},children:e.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-success)"},children:E})}),g&&e.jsx("div",{className:"card",style:{marginBottom:"var(--space-6)",borderColor:"var(--color-error)"},children:e.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-error)"},children:g})}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[e.jsx("button",{className:`btn ${u==="assets"?"btn-primary":"btn-secondary"}`,onClick:()=>m("assets"),style:{flex:1,whiteSpace:"nowrap"},children:"Assets"}),e.jsx("button",{className:`btn ${u==="stock_items"?"btn-primary":"btn-secondary"}`,onClick:()=>m("stock_items"),style:{flex:1,whiteSpace:"nowrap"},children:"Stock Items"}),e.jsx("button",{className:`btn ${u==="consumables"?"btn-primary":"btn-secondary"}`,onClick:()=>m("consumables"),style:{flex:1,whiteSpace:"nowrap"},children:"Consumables"})]}),e.jsx("div",{className:"table-container",children:p?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"loading-spinner",style:{margin:"0 auto"}}),e.jsx("p",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)"},children:e.jsx("h2",{style:{margin:0,fontSize:"var(--font-size-md)"},children:"Currently Owned"})}),u==="assets"&&Q(R,S.assets),u==="stock_items"&&Q(ue,S.stock_items),u==="consumables"&&Q(xe,S.consumables),e.jsx("div",{style:{padding:"var(--space-4)",borderTop:"1px solid var(--color-border)",borderBottom:"1px solid var(--color-border)"},children:e.jsx("h2",{style:{margin:0,fontSize:"var(--font-size-md)"},children:"Ownership History"})}),u==="assets"&&F(ae,L.assets),u==="stock_items"&&F(Re,L.stock_items),u==="consumables"&&F(ne,L.consumables)]})})]}),_&&e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"var(--space-6)",zIndex:50},onClick:()=>{D||(N(!1),w(null))},children:e.jsxs("div",{className:"card",style:{width:"100%",maxWidth:600},onClick:U=>U.stopPropagation(),children:[e.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:"Report a problem"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>{D||(N(!1),w(null))},children:"Close"})]}),e.jsxs("div",{style:{padding:"var(--space-4)"},children:[e.jsx("div",{style:{marginBottom:"var(--space-3)",color:"var(--color-text-secondary)"},children:I?`${I.item_label} (${I.item_type} #${I.item_id})`:""}),e.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:500},children:"Observation"}),e.jsx("textarea",{value:O,onChange:U=>C(U.target.value),rows:4,style:{width:"100%",padding:"var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",resize:"vertical",fontFamily:"inherit",fontSize:"var(--font-size-sm)",boxSizing:"border-box"}}),e.jsxs("div",{style:{marginTop:"var(--space-4)",display:"flex",justifyContent:"flex-end",gap:"var(--space-2)"},children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>{D||(N(!1),w(null))},disabled:D,children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",onClick:ge,disabled:D,children:D?"Submitting...":"Submit report"})]})]})]})})]})},Bj=()=>{const{user:n,isSuperuser:l}=Ja(),[d,u]=c.useState(!1),[m,p]=c.useState(""),[h,g]=c.useState([]),[b,y]=c.useState([]),[x,_]=c.useState(!1),[N,I]=c.useState(null),[w,O]=c.useState(""),[C,D]=c.useState(""),[te,E]=c.useState(!1),[B,W]=c.useState(!1),[Q,P]=c.useState(null),[ge,F]=c.useState(!1),R=c.useMemo(()=>{var S;return l?!0:((S=n==null?void 0:n.roles)==null?void 0:S.some(L=>L.role_code==="maintenance_chief"||L.role_code==="exploitation_chief"))||!1},[l,n]),ae=c.useMemo(()=>{var S;return l?!0:((S=n==null?void 0:n.roles)==null?void 0:S.some(L=>L.role_code==="maintenance_chief"))||!1},[l,n]),ue=async()=>{try{u(!0),p("");const S=await rc.getAll();g(Array.isArray(S)?S:[])}catch{p("Failed to load reports")}finally{u(!1)}};c.useEffect(()=>{R&&ue()},[R]),c.useEffect(()=>{const S=async()=>{try{const L=await Tn.getAll({role:"maintenance_technician"});y(Array.isArray(L)?L:[])}catch{y([])}};ae&&S()},[ae]);const Re=S=>{p(""),I(S),O(""),D((S==null?void 0:S.owner_observation)||""),_(!0)},xe=async S=>{if(S.item_type==="asset")try{F(!0),p("");const L=await Us.getById(S.item_id);P(L),W(!0)}catch{p("Failed to load asset details")}finally{F(!1)}},ne=async S=>{var L,Z;if(S.preventDefault(),!!N){if(!w){p("Please select a technician");return}try{E(!0),p(""),await rc.createMaintenance({item_type:N.item_type,report_id:N.report_id,technician_person_id:w,description:C}),_(!1),I(null),O(""),D("")}catch(G){const fe=((Z=(L=G==null?void 0:G.response)==null?void 0:L.data)==null?void 0:Z.error)||(G==null?void 0:G.message)||"Failed to create maintenance";p(typeof fe=="string"?fe:"Failed to create maintenance")}finally{E(!1)}}};return R?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{className:"page-title",children:"Reports"}),e.jsx("p",{className:"page-subtitle",children:"View reported problems on owned items"})]}),m&&e.jsx("div",{className:"card",style:{marginBottom:"var(--space-6)",borderColor:"var(--color-error)"},children:e.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-error)"},children:m})}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:"All Reports"}),e.jsx("button",{className:"btn btn-secondary",onClick:ue,disabled:d,children:"Refresh"})]}),e.jsx("div",{className:"table-container",children:d?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"loading-spinner",style:{margin:"0 auto"}}),e.jsx("p",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading..."})]}):h.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{className:"empty-state-title",children:"No reports"}),e.jsx("p",{className:"empty-state-text",children:"No problem reports have been submitted yet."})]}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Report ID"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Item ID"}),e.jsx("th",{children:"Person"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Observation"}),ae&&e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:h.map(S=>e.jsxs("tr",{children:[e.jsx("td",{children:S.report_id}),e.jsx("td",{children:S.item_type}),e.jsx("td",{children:S.item_type==="asset"?e.jsx("button",{className:"btn btn-secondary",style:{padding:"0.25rem 0.5rem",fontSize:"0.875rem"},onClick:()=>xe(S),disabled:ge,children:S.item_id}):S.item_id}),e.jsx("td",{children:S.person_name||S.person_id}),e.jsx("td",{children:S.report_datetime?new Date(S.report_datetime).toLocaleString():"-"}),e.jsx("td",{children:S.owner_observation}),ae&&e.jsx("td",{children:e.jsx("button",{className:"btn btn-secondary",onClick:()=>Re(S),children:"Create maintenance"})})]},`${S.item_type}-${S.report_id}`))})]})})]}),x&&e.jsx("div",{className:"modal-overlay",onClick:()=>!te&&_(!1),children:e.jsxs("div",{className:"modal",onClick:S=>S.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Create Maintenance"}),e.jsx("button",{className:"modal-close",onClick:()=>!te&&_(!1),children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("form",{onSubmit:ne,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Report"}),e.jsxs("div",{className:"form-input",style:{backgroundColor:"#f5f5f5"},children:["#",N==null?void 0:N.report_id," (",N==null?void 0:N.item_type," #",N==null?void 0:N.item_id,")"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"technician",className:"form-label",children:"Technician"}),e.jsxs("select",{id:"technician",className:"form-input",value:w,onChange:S=>O(S.target.value),children:[e.jsx("option",{value:"",children:"-- Select Technician --"}),b.map(S=>e.jsxs("option",{value:S.person_id,children:[S.first_name," ",S.last_name]},S.person_id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),e.jsx("textarea",{id:"description",className:"form-input",rows:4,value:C,onChange:S=>D(S.target.value)})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>!te&&_(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:te,children:te?"Creating...":"Create"})]})]})]})}),B&&Q&&e.jsx("div",{className:"modal-overlay",onClick:()=>W(!1),children:e.jsxs("div",{className:"modal",onClick:S=>S.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Asset Details"}),e.jsx("button",{className:"modal-close",onClick:()=>W(!1),children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{style:{display:"grid",gap:"var(--space-3)"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Asset ID:"})," ",Q.asset_id]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",Q.asset_name||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Serial Number:"})," ",Q.asset_serial_number||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Inventory Number:"})," ",Q.asset_inventory_number||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Service Tag:"})," ",Q.asset_service_tag||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",Q.asset_status||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Model:"})," ",Q.asset_model_name||Q.asset_model||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Brand:"})," ",Q.brand_name||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"})," ",Q.asset_type_label||"-"]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>W(!1),children:"Close"})})]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{className:"page-title",children:"Reports"}),e.jsx("p",{className:"page-subtitle",children:"Problem reports"})]}),e.jsx("div",{className:"card",children:e.jsx("div",{style:{padding:"var(--space-4)"},children:"Forbidden"})})]})},Tj=()=>{var X;const n=Dt(),[l,d]=c.useState([]),[u,m]=c.useState([]),[p,h]=c.useState({}),[g,b]=c.useState(!0),[y,x]=c.useState(!1),[_,N]=c.useState(null),[I,w]=c.useState(null),[O,C]=c.useState({attribution_order_full_code:"",attribution_order_date:new Date().toISOString().split("T")[0],warehouse:"",attribution_order_barcode:""}),[D,te]=c.useState([]),[E,B]=c.useState({asset_type:"",asset_model:"",quantity:1}),[W,Q]=c.useState("list"),[P,ge]=c.useState([]),[F,R]=c.useState(null),[ae,ue]=c.useState([]),[Re,xe]=c.useState(!1),[ne,S]=c.useState({report_full_code:"",digital_copy:null}),[L,Z]=c.useState(null),[G,fe]=c.useState(!1),[k,$]=c.useState({stock_items:[],consumables:[]}),[re,U]=Hs(),ye=J=>J?J.startsWith("JVBERi0")?"application/pdf":J.startsWith("/9j/")?"image/jpeg":J.startsWith("iVBORw0K")?"image/png":"application/octet-stream":"application/octet-stream";c.useEffect(()=>{try{const ke=JSON.parse(sessionStorage.getItem("attribution_order_create_draft_assets")||"[]");Array.isArray(ke)&&ke.length>0&&(te(ke),[...new Set(ke.map(z=>z.asset_type).filter(Boolean))].forEach(async z=>{try{const A=await vt.getByAssetType(z);h(de=>({...de,[z]:A}))}catch{console.error("Failed to fetch models for type",z)}}))}catch{}try{const ke=JSON.parse(sessionStorage.getItem("attribution_order_create_draft_order_data")||"null");ke&&C(ke)}catch{}const J=re.get("mode"),we=re.get("orderId");J==="create"?(Q("create"),re.delete("mode"),U(re)):we&&((async()=>{try{const Te=await Cl.getById(we);if(Te){R(Te),Q("detail");const z=await Us.getAll({attribution_order:Te.attribution_order_id});ue(z.results||z||[])}}catch(Te){console.error("Failed to load order:",Te)}})(),re.delete("orderId"),U(re))},[]),c.useEffect(()=>{Ge()},[]),c.useEffect(()=>{const J=re.get("mode"),we=re.get("orderId");W==="list"&&!J&&!we&&(Me(),R(null),ue([]),Z(null),xe(!1),$({stock_items:[],consumables:[]}))},[W]);const be=J=>{try{sessionStorage.setItem("attribution_order_create_draft_assets",JSON.stringify(J))}catch{}},T=J=>{try{sessionStorage.setItem("attribution_order_create_draft_order_data",JSON.stringify(J))}catch{}},le=async J=>{R(J),Q("detail"),b(!0),Z(null);try{const we=await Us.getAll({attribution_order:J.attribution_order_id});ue(we.results||we||[]);const ke=await lc.getAll({attribution_order:J.attribution_order_id}),Te=ke.results||ke||[];if(Te.length>0&&Te[0].receipt_report){const A=Te[0].receipt_report,de=await qu.getById(A);Z(de)}const z=await Cl.getIncludedItems(J.attribution_order_id);$(z)}catch{N("Failed to fetch assets or receipt for this order")}finally{b(!1)}},Me=async()=>{b(!0);try{const J=await Cl.getAll();ge(J)}catch{N("Failed to fetch attribution orders")}finally{b(!1)}},Ge=async()=>{b(!0),N(null);try{const[J,we]=await Promise.all([Gy.getAll(),ln.getAll()]);d(J),m(we),b(!1)}catch{N("Failed to fetch initial data"),b(!1)}},De=J=>{const we={...O,[J.target.name]:J.target.value};C(we),T(we)},Ke=async(J,we,ke)=>{const Te=[...D];if(Te[J][we]=ke,we==="asset_type"&&(Te[J].asset_model="",ke&&!p[ke]))try{const z=await vt.getByAssetType(ke);h(A=>({...A,[ke]:z}))}catch{console.error("Failed to fetch models for type",ke)}te(Te),be(Te)},ze=async J=>{if(B(we=>({...we,asset_type:J,asset_model:""})),J&&!p[J])try{const we=await vt.getByAssetType(J);h(ke=>({...ke,[J]:we}))}catch{console.error("Failed to fetch models for type",J)}},st=()=>{const J=Number(E.quantity);if(!E.asset_type||!E.asset_model||!Number.isFinite(J)||J<1)return;const we=Date.now(),ke=Array.from({length:J},(Te,z)=>({id:we+z,asset_type:E.asset_type,asset_model:E.asset_model,asset_serial_number:"",asset_inventory_number:"",asset_name:""}));te(Te=>{const z=[...Te,...ke];return be(z),z}),B(Te=>({...Te,quantity:1}))},Ne=()=>{const J=[...D,{id:Date.now(),asset_type:"",asset_model:"",asset_serial_number:"",asset_inventory_number:"",asset_name:""}];te(J),be(J)},Qe=J=>{if(D.length>0){const we=D.filter((ke,Te)=>Te!==J);te(we),be(we)}},$e=(J,we)=>{be(D);const ke=W==="create"?"create":F==null?void 0:F.attribution_order_id;n(`/dashboard/attribution-orders/assets/${J.id}/included-items/${we}?context=${ke}`)},Ce=async J=>{var we,ke;J.preventDefault(),x(!0),N(null),w(null);try{let Te={};try{Te=JSON.parse(sessionStorage.getItem("attribution_order_create_draft_included_items")||"{}")}catch{Te={}}const A=(await Cl.create(O)).attribution_order_id;console.log("[handleSubmit] draftIncluded:",Te),console.log("[handleSubmit] assets:",D);for(const de of D){const{id:Ee,...Oe}=de,Ie=(Te==null?void 0:Te[String(Ee)])||(Te==null?void 0:Te[Ee])||null;console.log(`[handleSubmit] Asset id: ${Ee}, String(id): ${String(Ee)}`),console.log(`[handleSubmit] draftForRow for asset ${Ee}:`,Ie);const Pe={...Oe,attribution_order:A,asset_status:"In Stock",included_stock_items:Array.isArray(Ie==null?void 0:Ie.stock_items)?Ie.stock_items:[],included_consumables:Array.isArray(Ie==null?void 0:Ie.consumables)?Ie.consumables:[]};console.log(`[handleSubmit] Sending payload for asset ${Ee}:`,Pe),await Us.create(Pe)}w("Attribution Order and Assets created successfully!"),C({attribution_order_full_code:"",attribution_order_date:new Date().toISOString().split("T")[0],warehouse:"",attribution_order_barcode:""}),te([]);try{sessionStorage.removeItem("attribution_order_create_draft_assets"),sessionStorage.removeItem("attribution_order_create_draft_order_data"),sessionStorage.removeItem("attribution_order_create_draft_included_items")}catch{}setTimeout(()=>Q("list"),2e3)}catch(Te){console.error(Te),N(((ke=(we=Te.response)==null?void 0:we.data)==null?void 0:ke.error)||"Failed to create Attribution Order and Assets")}finally{x(!1)}},Be=async J=>{var we,ke;J.preventDefault(),x(!0),N(null),w(null);try{const Te=new FormData;Te.append("report_full_code",ne.report_full_code),ne.digital_copy&&Te.append("digital_copy",ne.digital_copy);const z=await qu.create(Te);await lc.create({warehouse:F.warehouse,attribution_order:F.attribution_order_id,receipt_report:z.receipt_report_id,operation:"entry"}),w("Receipt Report successfully created and linked to this order."),xe(!1),S({report_full_code:"",digital_copy:null}),Z(z)}catch(Te){console.error(Te),N(((ke=(we=Te.response)==null?void 0:we.data)==null?void 0:ke.error)||"Failed to create Receipt Report")}finally{x(!1)}};return g?e.jsx("div",{className:"loading",children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"page-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:W==="list"?"Attribution Orders":W==="detail"?`Order Details: ${(F==null?void 0:F.attribution_order_full_code)||""}`:"Create Attribution Order"}),e.jsx("p",{className:"page-subtitle",children:W==="list"?"Consult and manage your attribution orders":W==="detail"?"Consult associated order details and assets":"Register new equipment and link them to an attribution order"}),W==="detail"&&e.jsx("button",{className:"btn btn-secondary",onClick:()=>Q("list"),style:{marginTop:"var(--space-2)"},title:"Back","aria-label":"Back",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})})]}),W!=="list"&&W!=="detail"&&e.jsx("button",{className:"btn btn-secondary",onClick:()=>Q("list"),title:"Back to List","aria-label":"Back to List",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})})]}),_&&e.jsx("div",{className:"error-message",children:_}),I&&e.jsx("div",{className:"badge badge-success",style:{padding:"var(--space-4)",width:"100%",marginBottom:"var(--space-4)",borderRadius:"var(--radius-md)"},children:I}),W==="list"?e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h2",{className:"card-title",children:"All Attribution Orders"}),e.jsx("button",{className:"btn btn-primary",style:{width:"auto"},onClick:()=>Q("create"),children:"+ New Order"})]}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Full Code"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Barcode"}),e.jsx("th",{children:"ID"})]})}),e.jsx("tbody",{children:P.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"var(--space-4)"},children:"No attribution orders found."})}):P.map(J=>e.jsxs("tr",{onClick:()=>le(J),style:{cursor:"pointer"},className:"hover-row",children:[e.jsx("td",{style:{fontWeight:"500",color:"var(--color-primary)"},children:J.attribution_order_full_code}),e.jsx("td",{children:new Date(J.attribution_order_date).toLocaleDateString()}),e.jsx("td",{children:J.attribution_order_barcode||"-"}),e.jsxs("td",{children:["#",J.attribution_order_id]})]},J.attribution_order_id))})]})})]}):W==="detail"?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"var(--space-6)"},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"card-title",children:"Order Information"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"var(--space-6)"},children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Full Code"}),e.jsx("div",{style:{fontSize:"var(--font-size-md)",fontWeight:"500"},children:F==null?void 0:F.attribution_order_full_code})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Date"}),e.jsx("div",{style:{fontSize:"var(--font-size-md)"},children:F?new Date(F.attribution_order_date).toLocaleDateString():""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Warehouse"}),e.jsx("div",{style:{fontSize:"var(--font-size-md)"},children:F&&((X=l.find(J=>J.warehouse_id===F.warehouse))==null?void 0:X.warehouse_name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Barcode"}),e.jsx("div",{style:{fontSize:"var(--font-size-md)"},children:(F==null?void 0:F.attribution_order_barcode)||"-"})]})]})})]}),L&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"card-title",children:"Receipt Report"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"var(--space-6)"},children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Report Code"}),e.jsx("div",{style:{fontSize:"var(--font-size-md)",fontWeight:"500"},children:L.report_full_code||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Report Date"}),e.jsx("div",{style:{fontSize:"var(--font-size-md)"},children:L.report_datetime?new Date(L.report_datetime).toLocaleString():"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Digital Copy"}),e.jsx("div",{style:{fontSize:"var(--font-size-md)"},children:L.digital_copy?e.jsx("button",{type:"button",onClick:()=>fe(!0),className:"btn btn-primary",style:{padding:"var(--space-2) var(--space-4)",fontSize:"var(--font-size-sm)"},children:"Consult Report"}):e.jsx("span",{style:{color:"var(--color-text-light)"},children:"No file attached"})})]})]})})]}),F&&!L&&e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx("button",{className:`btn btn-${Re?"secondary":"primary"}`,onClick:()=>xe(!Re),children:Re?"Cancel Receipt Report":"Create Receipt Report"})}),Re&&e.jsxs("div",{className:"card",style:{border:"2px solid var(--color-primary)"},children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"card-title",children:"New Receipt Report"})}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:Be,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"var(--space-6)",marginBottom:"var(--space-6)"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Report Full Code"}),e.jsx("input",{type:"text",className:"form-input",value:ne.report_full_code,onChange:J=>S({...ne,report_full_code:J.target.value}),placeholder:"e.g. PV-2024-001",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Digital Copy (Attachment)"}),e.jsx("input",{type:"file",className:"form-input",onChange:J=>S({...ne,digital_copy:J.target.files[0]}),accept:"image/*,application/pdf"})]})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:y,children:y?"Submitting...":"Save Receipt Report"})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"card-title",children:"Associated Assets"})}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Asset Name"}),e.jsx("th",{children:"Inventory #"}),e.jsx("th",{children:"Serial #"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:ae.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"var(--space-4)"},children:"No assets linked to this order."})}):ae.map(J=>{var we;return e.jsxs("tr",{children:[e.jsx("td",{style:{fontWeight:"500"},children:J.asset_name||"-"}),e.jsx("td",{children:J.asset_inventory_number||"-"}),e.jsx("td",{children:J.asset_serial_number||"-"}),e.jsx("td",{children:e.jsx("span",{className:`status-badge status-${(we=J.asset_status)==null?void 0:we.replace(/\s+/g,"-").toLowerCase()}`,children:J.asset_status})})]},J.asset_id)})})]})})]}),k.stock_items.length>0&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"card-title",children:"Included Stock Items"})}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Item Name"}),e.jsx("th",{children:"Model"}),e.jsx("th",{children:"Asset"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:k.stock_items.map(J=>{var we;return e.jsxs("tr",{children:[e.jsx("td",{style:{fontWeight:"500"},children:J.name||"-"}),e.jsx("td",{children:J.model||"-"}),e.jsx("td",{children:J.asset_name||`Asset #${J.asset_id}`}),e.jsx("td",{children:e.jsx("span",{className:`status-badge status-${(we=J.status)==null?void 0:we.replace(/\s+/g,"-").toLowerCase()}`,children:J.status})})]},J.id)})})]})})]}),k.consumables.length>0&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"card-title",children:"Included Consumables"})}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Item Name"}),e.jsx("th",{children:"Model"}),e.jsx("th",{children:"Asset"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:k.consumables.map(J=>{var we;return e.jsxs("tr",{children:[e.jsx("td",{style:{fontWeight:"500"},children:J.name||"-"}),e.jsx("td",{children:J.model||"-"}),e.jsx("td",{children:J.asset_name||`Asset #${J.asset_id}`}),e.jsx("td",{children:e.jsx("span",{className:`status-badge status-${(we=J.status)==null?void 0:we.replace(/\s+/g,"-").toLowerCase()}`,children:J.status})})]},J.id)})})]})})]})]}):e.jsxs("form",{onSubmit:Ce,children:[e.jsxs("div",{className:"card",style:{marginBottom:"var(--space-8)"},children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"card-title",children:"Order Information"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"var(--space-6)"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Full Code"}),e.jsx("input",{type:"text",name:"attribution_order_full_code",className:"form-input",value:O.attribution_order_full_code,onChange:De,placeholder:"e.g. ORD-2024-001",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Date"}),e.jsx("input",{type:"date",name:"attribution_order_date",className:"form-input",value:O.attribution_order_date,onChange:De,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Warehouse"}),e.jsxs("select",{name:"warehouse",className:"form-input",value:O.warehouse,onChange:De,required:!0,children:[e.jsx("option",{value:"",children:"Select Warehouse"}),l.map(J=>e.jsx("option",{value:J.warehouse_id,children:J.warehouse_name},J.warehouse_id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Barcode"}),e.jsx("input",{type:"text",name:"attribution_order_barcode",className:"form-input",value:O.attribution_order_barcode,onChange:De,placeholder:"Scan barcode..."})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h2",{className:"card-title",children:"Assets"}),e.jsxs("button",{type:"button",onClick:Ne,className:"btn btn-secondary",style:{padding:"var(--space-2) var(--space-4)",fontSize:"var(--font-size-sm)"},children:[e.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginRight:"var(--space-2)"},children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Asset"]})]}),e.jsx("div",{className:"card-body",style:{paddingTop:0},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(180px, 1fr) minmax(180px, 1fr) minmax(120px, 180px) auto",gap:"var(--space-4)",alignItems:"end",marginBottom:"var(--space-6)"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Bulk Type"}),e.jsxs("select",{className:"form-input",value:E.asset_type,onChange:J=>ze(J.target.value),children:[e.jsx("option",{value:"",children:"Select Type"}),u.map(J=>e.jsx("option",{value:J.asset_type_id,children:J.asset_type_label},J.asset_type_id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Bulk Model"}),e.jsxs("select",{className:"form-input",value:E.asset_model,onChange:J=>B(we=>({...we,asset_model:J.target.value})),disabled:!E.asset_type,children:[e.jsx("option",{value:"",children:"Select Model"}),(p[E.asset_type]||[]).map(J=>e.jsx("option",{value:J.asset_model_id,children:J.model_name},J.asset_model_id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Quantity"}),e.jsx("input",{type:"number",className:"form-input",min:"1",value:E.quantity,onChange:J=>B(we=>({...we,quantity:J.target.value}))})]}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:st,disabled:!E.asset_type||!E.asset_model||Number(E.quantity)<1,style:{padding:"var(--space-2) var(--space-4)",height:"40px"},children:"Add Quantity"})]})}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Model"}),e.jsx("th",{children:"Serial Number"}),e.jsx("th",{children:"Inventory ID"}),e.jsx("th",{children:"Name"}),e.jsx("th",{style:{textAlign:"center"},children:"Actions"})]})}),e.jsx("tbody",{children:D.map((J,we)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("select",{className:"form-input",style:{padding:"var(--space-2)",minWidth:"140px"},value:J.asset_type,onChange:ke=>Ke(we,"asset_type",ke.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Type"}),u.map(ke=>e.jsx("option",{value:ke.asset_type_id,children:ke.asset_type_label},ke.asset_type_id))]})}),e.jsx("td",{children:e.jsxs("select",{className:"form-input",style:{padding:"var(--space-2)",minWidth:"140px"},value:J.asset_model,onChange:ke=>Ke(we,"asset_model",ke.target.value),required:!0,disabled:!J.asset_type,children:[e.jsx("option",{value:"",children:"Select Model"}),(p[J.asset_type]||[]).map(ke=>e.jsx("option",{value:ke.asset_model_id,children:ke.model_name},ke.asset_model_id))]})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-input",style:{padding:"var(--space-2)"},value:J.asset_serial_number,onChange:ke=>Ke(we,"asset_serial_number",ke.target.value),placeholder:"S/N"})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-input",style:{padding:"var(--space-2)"},value:J.asset_inventory_number,onChange:ke=>Ke(we,"asset_inventory_number",ke.target.value),placeholder:"Inv #",maxLength:"6"})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-input",style:{padding:"var(--space-2)"},value:J.asset_name,onChange:ke=>Ke(we,"asset_name",ke.target.value),placeholder:"Asset Name"})}),e.jsxs("td",{style:{textAlign:"center",whiteSpace:"nowrap"},children:[e.jsx("button",{type:"button",onClick:()=>$e(J,"stock"),className:"btn btn-secondary",style:{padding:"6px",marginRight:"8px"},disabled:!J.asset_model,title:J.asset_model?"Configure included stock items":"Select a model first",children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),e.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),e.jsx("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]})}),e.jsx("button",{type:"button",onClick:()=>$e(J,"consumables"),className:"btn btn-secondary",style:{padding:"6px",marginRight:"8px"},disabled:!J.asset_model,title:J.asset_model?"Configure included consumables":"Select a model first",children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M12 2v6m0 0v14m0-14c-2 0-6 1-6 5s4 5 6 5 6-1 6-5-4-5-6-5z"}),e.jsx("path",{d:"M6 12c0 4 2.5 8 6 10 3.5-2 6-6 6-10",fill:"none"})]})}),e.jsx("button",{type:"button",onClick:()=>Qe(we),className:"logout-btn",title:"Remove row",disabled:D.length===0,children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]},J.id))})]})})]}),e.jsx("div",{style:{marginTop:"var(--space-8)",display:"flex",justifyContent:"flex-end"},children:e.jsx("button",{type:"submit",className:"btn btn-primary",style:{width:"auto",minWidth:"200px"},disabled:y,children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"loading-spinner",style:{marginRight:"var(--space-2)"}}),"Creating..."]}):"Create Attribution Order & Assets"})})]}),G&&(L==null?void 0:L.digital_copy)&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"var(--space-6)"},onClick:()=>fe(!1),children:e.jsxs("div",{className:"card",style:{width:"100%",maxWidth:"900px",height:"90vh",display:"flex",flexDirection:"column",padding:"var(--space-4)"},onClick:J=>J.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-4)"},children:[e.jsxs("h2",{style:{margin:0},children:["Consult Receipt Report: ",L.report_full_code||"Attachment"]}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>fe(!1),children:"Close"})]}),ye(L.digital_copy)==="application/pdf"?e.jsx("iframe",{title:"Receipt Report Preview",src:`data:application/pdf;base64,${L.digital_copy}`,style:{flexGrow:1,border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",width:"100%",height:"100%"}}):e.jsx("div",{style:{flexGrow:1,overflow:"auto",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"var(--color-bg-alt)",borderRadius:"var(--radius-md)"},children:e.jsx("img",{src:`data:${ye(L.digital_copy)};base64,${L.digital_copy}`,alt:"Receipt Report Preview",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}})})]})})]})},Ej="attribution_order_create_draft_assets",Ru="attribution_order_create_draft_included_items",ry=()=>{const n=Dt(),{rowId:l,itemKind:d}=Or(),[u]=Hs(),m=u.get("context"),p=d==="stock"||d==="consumables"?d:"all",[h,g]=c.useState([]),[b,y]=c.useState([]),[x,_]=c.useState([]),[N,I]=c.useState([]),[w,O]=c.useState({}),[C,D]=c.useState({}),[te,E]=c.useState(!1),[B,W]=c.useState(null),Q=c.useMemo(()=>{try{return JSON.parse(sessionStorage.getItem(Ej)||"[]").find(Z=>String(Z.id)===String(l))||null}catch{return null}},[l]);c.useEffect(()=>{const L=async()=>{E(!0),W(null);try{const[k,$]=await Promise.all([Qa.getAll(),Xa.getAll()]);g(Array.isArray(k)?k:(k==null?void 0:k.results)||[]),y(Array.isArray($)?$:($==null?void 0:$.results)||[])}catch{W("Failed to fetch models")}finally{E(!1)}},Z=()=>{try{const k=JSON.parse(sessionStorage.getItem(Ru)||"{}"),$=(k==null?void 0:k[l])||{};return $.stock_item_instances&&O($.stock_item_instances),$.consumable_instances&&D($.consumable_instances),{hasDraft:!!$.stock_item_instances||!!$.consumable_instances}}catch{return{hasDraft:!1}}},G=async()=>{if(Q!=null&&Q.asset_model){E(!0),W(null);try{const[k,$]=await Promise.all([vt.getDefaultStockItems(Q.asset_model),vt.getDefaultConsumables(Q.asset_model)]),re=Array.isArray(k)?k:(k==null?void 0:k.results)||[],U=Array.isArray($)?$:($==null?void 0:$.results)||[];_(re),I(U);const ye={};re.forEach(T=>{const le=Math.max(1,Number(T.quantity)||1);ye[T.stock_item_model]=Array.from({length:le},()=>({stock_item_name:"",stock_item_inventory_number:""}))}),O(ye);const be={};U.forEach(T=>{const le=Math.max(1,Number(T.quantity)||1);be[T.consumable_model]=Array.from({length:le},()=>({consumable_name:"",consumable_serial_number:"",consumable_inventory_number:""}))}),D(be),F(ye,be)}catch{W("Failed to load default composition")}finally{E(!1)}}};L();const{hasDraft:fe}=Z();fe?Q!=null&&Q.asset_model&&(async()=>{try{const[k,$]=await Promise.all([vt.getDefaultStockItems(Q.asset_model),vt.getDefaultConsumables(Q.asset_model)]);_(Array.isArray(k)?k:(k==null?void 0:k.results)||[]),I(Array.isArray($)?$:($==null?void 0:$.results)||[])}catch{}})():G()},[l,Q==null?void 0:Q.asset_model]);const P=c.useMemo(()=>{const L=new Map;return(Array.isArray(h)?h:[]).forEach(Z=>{L.set(Z.stock_item_model_id,Z)}),L},[h]),ge=c.useMemo(()=>{const L=new Map;return(Array.isArray(b)?b:[]).forEach(Z=>{L.set(Z.consumable_model_id,Z)}),L},[b]),F=(L,Z)=>{let G={};try{G=JSON.parse(sessionStorage.getItem(Ru)||"{}")}catch{G={}}G[l]={stock_item_instances:L,consumable_instances:Z,stock_items:Object.entries(L).map(([fe,k])=>({stock_item_model:Number(fe),quantity:k.length,instances:k})),consumables:Object.entries(Z).map(([fe,k])=>({consumable_model:Number(fe),quantity:k.length,instances:k}))},sessionStorage.setItem(Ru,JSON.stringify(G))},R=(L,Z,G,fe)=>{const k={...w,[L]:w[L].map(($,re)=>re===Z?{...$,[G]:fe}:$)};O(k),F(k,C)},ae=(L,Z,G,fe)=>{const k={...C,[L]:C[L].map(($,re)=>re===Z?{...$,[G]:fe}:$)};D(k),F(w,k)},ue=()=>{n(m==="create"?"/dashboard/attribution-orders?mode=create":m?`/dashboard/attribution-orders?orderId=${m}`:"/dashboard/attribution-orders")},Re=c.useMemo(()=>{const L=[];return x.forEach(Z=>{const G=Z.stock_item_model,fe=w[G]||[],k=Math.max(1,Number(Z.quantity)||1);for(let $=0;$<k;$++)L.push({modelId:G,instanceIdx:$,instance:fe[$]||{stock_item_name:"",stock_item_inventory_number:""}})}),L},[x,w]),xe=c.useMemo(()=>{const L=[];return N.forEach(Z=>{const G=Z.consumable_model,fe=C[G]||[],k=Math.max(1,Number(Z.quantity)||1);for(let $=0;$<k;$++)L.push({modelId:G,instanceIdx:$,instance:fe[$]||{consumable_name:"",consumable_serial_number:"",consumable_inventory_number:""}})}),L},[N,C]),ne=Re.length,S=xe.length;return e.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[e.jsx("h1",{className:"page-title",children:"Attribution Orders"}),e.jsxs("p",{className:"page-subtitle",children:["Configure included items ",Q!=null&&Q.asset_name?` ${Q.asset_name}`:""]})]}),B&&e.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:B}),e.jsx("div",{className:"card",style:{padding:"var(--space-4)",marginBottom:"var(--space-4)"},children:e.jsxs("div",{style:{display:"flex",gap:"var(--space-3)",alignItems:"center",flexWrap:"wrap"},children:[e.jsx("button",{onClick:ue,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})}),e.jsxs("div",{style:{color:"var(--color-text-secondary)"},children:["Stock items: ",ne,"  Consumables: ",S]})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:p==="all"?"1fr 1fr":"1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[(p==="all"||p==="stock")&&e.jsxs("div",{className:"card",style:{padding:"var(--space-4)",overflow:"auto",display:"flex",flexDirection:"column"},children:[e.jsx("div",{className:"card-header",style:{marginBottom:"var(--space-3)"},children:e.jsx("h2",{className:"card-title",children:"Default Stock Items"})}),Re.length===0?e.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)"},children:"No default stock items for this asset model."}):e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"50px"},children:"#"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Model"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Inventory #"})]})}),e.jsx("tbody",{children:Re.map((L,Z)=>{const G=P.get(Number(L.modelId)),fe=(G==null?void 0:G.model_name)||`Model #${L.modelId}`,k=(G==null?void 0:G.model_code)||"",$=(G==null?void 0:G.stock_item_type_label)||"-";return e.jsxs("tr",{children:[e.jsx("td",{style:{color:"var(--color-text-secondary)"},children:Z+1}),e.jsx("td",{children:$}),e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:"500"},children:fe}),k&&e.jsx("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:k})]}),e.jsx("td",{children:e.jsx("input",{type:"text",value:L.instance.stock_item_name||"",onChange:re=>R(L.modelId,L.instanceIdx,"stock_item_name",re.target.value),style:{width:"100%",padding:"6px"},placeholder:"Enter name..."})}),e.jsx("td",{children:e.jsx("input",{type:"text",value:L.instance.stock_item_inventory_number||"",onChange:re=>R(L.modelId,L.instanceIdx,"stock_item_inventory_number",re.target.value),style:{width:"100%",padding:"6px"},placeholder:"Enter inventory #..."})})]},`stock-${L.modelId}-${L.instanceIdx}`)})})]})})]}),(p==="all"||p==="consumables")&&e.jsxs("div",{className:"card",style:{padding:"var(--space-4)",overflow:"auto",display:"flex",flexDirection:"column"},children:[e.jsx("div",{className:"card-header",style:{marginBottom:"var(--space-3)"},children:e.jsx("h2",{className:"card-title",children:"Default Consumables"})}),xe.length===0?e.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)"},children:"No default consumables for this asset model."}):e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"50px"},children:"#"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Model"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Serial #"}),e.jsx("th",{children:"Inventory #"})]})}),e.jsx("tbody",{children:xe.map((L,Z)=>{const G=ge.get(Number(L.modelId)),fe=(G==null?void 0:G.model_name)||`Model #${L.modelId}`,k=(G==null?void 0:G.model_code)||"",$=(G==null?void 0:G.consumable_type_label)||"-";return e.jsxs("tr",{children:[e.jsx("td",{style:{color:"var(--color-text-secondary)"},children:Z+1}),e.jsx("td",{children:$}),e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:"500"},children:fe}),k&&e.jsx("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:k})]}),e.jsx("td",{children:e.jsx("input",{type:"text",value:L.instance.consumable_name||"",onChange:re=>ae(L.modelId,L.instanceIdx,"consumable_name",re.target.value),style:{width:"100%",padding:"6px"},placeholder:"Enter name..."})}),e.jsx("td",{children:e.jsx("input",{type:"text",value:L.instance.consumable_serial_number||"",onChange:re=>ae(L.modelId,L.instanceIdx,"consumable_serial_number",re.target.value),style:{width:"100%",padding:"6px"},placeholder:"Enter serial #..."})}),e.jsx("td",{children:e.jsx("input",{type:"text",value:L.instance.consumable_inventory_number||"",onChange:re=>ae(L.modelId,L.instanceIdx,"consumable_inventory_number",re.target.value),style:{width:"100%",padding:"6px"},placeholder:"Enter inventory #..."})})]},`cons-${L.modelId}-${L.instanceIdx}`)})})]})})]})]})]})},zj=()=>{var E;const{user:n}=Ja(),l=(E=n==null?void 0:n.roles)==null?void 0:E.some(B=>B.role_code==="asset_responsible"),[d,u]=c.useState(!0),[m,p]=c.useState(null),[h,g]=c.useState(null),[b,y]=c.useState(!1),[x,_]=c.useState([]),[N,I]=c.useState({}),[w,O]=c.useState(!1),[C,D]=c.useState({attribution_order:"",administrative_serial_number:"",title_of_demand:"",organization_body_designation:"",register_number_or_book_journal_of_corpse:"",register_number_or_book_journal_of_establishment:"",is_signed_by_company:!1,is_signed_by_company_leader:!1,is_signed_by_regional_provider:!1,is_signed_by_company_representative:!1,digital_copy:null});c.useEffect(()=>{if(!l)return;(async()=>{u(!0),p(null),g(null);try{const[W,Q]=await Promise.all([wu.getAll(),Cl.getAll()]),P=(W==null?void 0:W.results)||W||[];_(P);const ge=(Q==null?void 0:Q.results)||Q||[],F={};ge.forEach(R=>{F[R.attribution_order_id]=R}),I(F)}catch{p("Failed to fetch company asset requests")}finally{u(!1)}})()},[l]);const te=async B=>{var W,Q;B.preventDefault(),y(!0),p(null),g(null);try{const P=new FormData;P.append("attribution_order",C.attribution_order),C.administrative_serial_number&&P.append("administrative_serial_number",C.administrative_serial_number),C.title_of_demand&&P.append("title_of_demand",C.title_of_demand),C.organization_body_designation&&P.append("organization_body_designation",C.organization_body_designation),C.register_number_or_book_journal_of_corpse&&P.append("register_number_or_book_journal_of_corpse",C.register_number_or_book_journal_of_corpse),C.register_number_or_book_journal_of_establishment&&P.append("register_number_or_book_journal_of_establishment",C.register_number_or_book_journal_of_establishment),P.append("is_signed_by_company",!!C.is_signed_by_company),P.append("is_signed_by_company_leader",!!C.is_signed_by_company_leader),P.append("is_signed_by_regional_provider",!!C.is_signed_by_regional_provider),P.append("is_signed_by_company_representative",!!C.is_signed_by_company_representative),C.digital_copy&&P.append("digital_copy",C.digital_copy),await wu.create(P);const ge=await wu.getAll(),F=(ge==null?void 0:ge.results)||ge||[];_(F),g("Company asset request created successfully"),O(!1),D({attribution_order:"",administrative_serial_number:"",title_of_demand:"",organization_body_designation:"",register_number_or_book_journal_of_corpse:"",register_number_or_book_journal_of_establishment:"",is_signed_by_company:!1,is_signed_by_company_leader:!1,is_signed_by_regional_provider:!1,is_signed_by_company_representative:!1,digital_copy:null})}catch(P){p(((Q=(W=P.response)==null?void 0:W.data)==null?void 0:Q.error)||"Failed to create company asset request")}finally{y(!1)}};return l?d?e.jsx("div",{className:"loading",children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Company Asset Requests"}),e.jsx("p",{className:"page-subtitle",children:"Consult company asset requests"})]}),e.jsx("div",{children:e.jsx("button",{className:`btn btn-${w?"secondary":"primary"}`,onClick:()=>O(!w),children:w?"Cancel":"+ New Request"})})]}),m&&e.jsx("div",{className:"error-message",children:m}),h&&e.jsx("div",{className:"badge badge-success",style:{padding:"var(--space-4)",width:"100%",marginBottom:"var(--space-4)",borderRadius:"var(--radius-md)"},children:h}),w&&e.jsxs("div",{className:"card",style:{marginBottom:"var(--space-6)",border:"2px solid var(--color-primary)"},children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"card-title",children:"New Company Asset Request"})}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:te,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"var(--space-6)",marginBottom:"var(--space-6)"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Attribution Order"}),e.jsxs("select",{className:"form-input",value:C.attribution_order,onChange:B=>D({...C,attribution_order:B.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Attribution Order"}),Object.values(N).map(B=>e.jsx("option",{value:B.attribution_order_id,children:B.attribution_order_full_code||`#${B.attribution_order_id}`},B.attribution_order_id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Administrative Serial Number"}),e.jsx("input",{type:"text",className:"form-input",value:C.administrative_serial_number,onChange:B=>D({...C,administrative_serial_number:B.target.value}),placeholder:"e.g. ADM-2026-001"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Title of Demand"}),e.jsx("input",{type:"text",className:"form-input",value:C.title_of_demand,onChange:B=>D({...C,title_of_demand:B.target.value}),placeholder:"Title"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Organization Body Designation"}),e.jsx("input",{type:"text",className:"form-input",value:C.organization_body_designation,onChange:B=>D({...C,organization_body_designation:B.target.value}),placeholder:"Designation"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Register Number / Book Journal of Corpse"}),e.jsx("input",{type:"text",className:"form-input",value:C.register_number_or_book_journal_of_corpse,onChange:B=>D({...C,register_number_or_book_journal_of_corpse:B.target.value}),placeholder:"Register #"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Register Number / Book Journal of Establishment"}),e.jsx("input",{type:"text",className:"form-input",value:C.register_number_or_book_journal_of_establishment,onChange:B=>D({...C,register_number_or_book_journal_of_establishment:B.target.value}),placeholder:"Register #"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Digital Copy (Attachment)"}),e.jsx("input",{type:"file",className:"form-input",onChange:B=>D({...C,digital_copy:B.target.files[0]}),accept:"image/*,application/pdf"})]}),e.jsxs("div",{className:"form-group",style:{display:"flex",flexDirection:"column",gap:"var(--space-2)"},children:[e.jsx("label",{className:"form-label",children:"Signatures"}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[e.jsx("input",{type:"checkbox",checked:!!C.is_signed_by_company,onChange:B=>D({...C,is_signed_by_company:B.target.checked})}),e.jsx("span",{children:"Signed by company"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[e.jsx("input",{type:"checkbox",checked:!!C.is_signed_by_company_leader,onChange:B=>D({...C,is_signed_by_company_leader:B.target.checked})}),e.jsx("span",{children:"Signed by company leader"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[e.jsx("input",{type:"checkbox",checked:!!C.is_signed_by_regional_provider,onChange:B=>D({...C,is_signed_by_regional_provider:B.target.checked})}),e.jsx("span",{children:"Signed by regional provider"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[e.jsx("input",{type:"checkbox",checked:!!C.is_signed_by_company_representative,onChange:B=>D({...C,is_signed_by_company_representative:B.target.checked})}),e.jsx("span",{children:"Signed by company representative"})]})]})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:b,children:b?"Creating...":"Create Request"})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"card-title",children:"All Requests"})}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Administrative #"}),e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Attribution Order"}),e.jsx("th",{children:"Body Designation"}),e.jsx("th",{children:"Reg. (Corpse)"}),e.jsx("th",{children:"Reg. (Est.)"}),e.jsx("th",{children:"Signed (Company)"}),e.jsx("th",{children:"Signed (Leader)"}),e.jsx("th",{children:"Signed (Regional)"}),e.jsx("th",{children:"Signed (Representative)"}),e.jsx("th",{children:"Digital Copy"})]})}),e.jsx("tbody",{children:x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"12",style:{textAlign:"center",padding:"var(--space-4)"},children:"No company asset requests found."})}):x.map(B=>{const W=B.attribution_order,Q=N[W];return e.jsxs("tr",{className:"hover-row",children:[e.jsxs("td",{children:["#",B.company_asset_request_id]}),e.jsx("td",{children:B.administrative_serial_number||"-"}),e.jsx("td",{children:B.title_of_demand||"-"}),e.jsx("td",{children:(Q==null?void 0:Q.attribution_order_full_code)||`#${W}`}),e.jsx("td",{children:B.organization_body_designation||"-"}),e.jsx("td",{children:B.register_number_or_book_journal_of_corpse||"-"}),e.jsx("td",{children:B.register_number_or_book_journal_of_establishment||"-"}),e.jsx("td",{children:B.is_signed_by_company?"Yes":"No"}),e.jsx("td",{children:B.is_signed_by_company_leader?"Yes":"No"}),e.jsx("td",{children:B.is_signed_by_regional_provider?"Yes":"No"}),e.jsx("td",{children:B.is_signed_by_company_representative?"Yes":"No"}),e.jsx("td",{children:B.digital_copy?"Yes":"No"})]},B.company_asset_request_id)})})]})})]})]}):e.jsx(Js,{to:"/dashboard",replace:!0})},Dj=()=>{var ge;const{user:n}=Ja(),l=(ge=n==null?void 0:n.roles)==null?void 0:ge.some(F=>F.role_code==="asset_responsible"),[d,u]=c.useState(!0),[m,p]=c.useState(null),[h,g]=c.useState(null),[b,y]=c.useState(!1),[x,_]=c.useState([]),[N,I]=c.useState({}),[w,O]=c.useState({}),[C,D]=c.useState({}),[te,E]=c.useState(!1),[B,W]=c.useState({warehouse:"",attribution_order:"",receipt_report:"",interested_organization:"ESAM/2RM",operation:"",format:"21x27",is_signed_by_warehouse_storage_magaziner:!1,is_signed_by_warehouse_storage_accountant:!1,is_signed_by_warehouse_storage_marketer:!1,is_signed_by_warehouse_it_chief:!1,is_signed_by_warehouse_leader:!1,digital_copy:null}),Q=async()=>{u(!0),p(null),g(null);try{const[F,R,ae]=await Promise.all([lc.getAll(),Cl.getAll(),Gy.getAll()]),ue=(F==null?void 0:F.results)||F||[];_(ue);const Re=(R==null?void 0:R.results)||R||[],xe={};Re.forEach(Z=>{xe[Z.attribution_order_id]=Z}),I(xe);const ne=(ae==null?void 0:ae.results)||ae||[],S={};ne.forEach(Z=>{S[Z.warehouse_id]=Z}),O(S);const L=Array.from(new Set(ue.map(Z=>Z.receipt_report).filter(Z=>!!Z)));if(L.length===0)D({});else{const Z=await Promise.all(L.map(async fe=>{try{const k=await qu.getById(fe);return[fe,k]}catch{return[fe,null]}})),G={};Z.forEach(([fe,k])=>{k&&(G[fe]=k)}),D(G)}}catch{p("Failed to fetch administrative certificates")}finally{u(!1)}};c.useEffect(()=>{l&&Q()},[l]);const P=async F=>{var R,ae;F.preventDefault(),y(!0),p(null),g(null);try{if(B.operation&&!["entry","exit","transfer"].includes(B.operation)){p("Operation must be entry, exit, or transfer");return}const ue=new FormData;B.warehouse&&ue.append("warehouse",B.warehouse),B.attribution_order&&ue.append("attribution_order",B.attribution_order),B.receipt_report&&ue.append("receipt_report",B.receipt_report),B.interested_organization&&ue.append("interested_organization",B.interested_organization),B.operation&&ue.append("operation",B.operation),B.format&&ue.append("format",B.format),ue.append("is_signed_by_warehouse_storage_magaziner",!!B.is_signed_by_warehouse_storage_magaziner),ue.append("is_signed_by_warehouse_storage_accountant",!!B.is_signed_by_warehouse_storage_accountant),ue.append("is_signed_by_warehouse_storage_marketer",!!B.is_signed_by_warehouse_storage_marketer),ue.append("is_signed_by_warehouse_it_chief",!!B.is_signed_by_warehouse_it_chief),ue.append("is_signed_by_warehouse_leader",!!B.is_signed_by_warehouse_leader),B.digital_copy&&ue.append("digital_copy",B.digital_copy),await lc.create(ue),await Q(),g("Administrative certificate created successfully"),E(!1),W({warehouse:"",attribution_order:"",receipt_report:"",interested_organization:"ESAM/2RM",operation:"",format:"21x27",is_signed_by_warehouse_storage_magaziner:!1,is_signed_by_warehouse_storage_accountant:!1,is_signed_by_warehouse_storage_marketer:!1,is_signed_by_warehouse_it_chief:!1,is_signed_by_warehouse_leader:!1,digital_copy:null})}catch(ue){p(((ae=(R=ue.response)==null?void 0:R.data)==null?void 0:ae.error)||"Failed to create administrative certificate")}finally{y(!1)}};return l?d?e.jsx("div",{className:"loading",children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Administrative Certificates"}),e.jsx("p",{className:"page-subtitle",children:"Consult and create administrative certificates"})]}),e.jsx("div",{children:e.jsx("button",{className:`btn btn-${te?"secondary":"primary"}`,onClick:()=>E(!te),children:te?"Cancel":"+ New Certificate"})})]}),m&&e.jsx("div",{className:"error-message",children:m}),h&&e.jsx("div",{className:"badge badge-success",style:{padding:"var(--space-4)",width:"100%",marginBottom:"var(--space-4)",borderRadius:"var(--radius-md)"},children:h}),te&&e.jsxs("div",{className:"card",style:{marginBottom:"var(--space-6)",border:"2px solid var(--color-primary)"},children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"card-title",children:"New Administrative Certificate"})}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:P,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"var(--space-6)",marginBottom:"var(--space-6)"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Warehouse"}),e.jsxs("select",{className:"form-input",value:B.warehouse,onChange:F=>W({...B,warehouse:F.target.value}),children:[e.jsx("option",{value:"",children:"Select Warehouse"}),Object.values(w).map(F=>e.jsx("option",{value:F.warehouse_id,children:F.warehouse_name||`#${F.warehouse_id}`},F.warehouse_id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Attribution Order"}),e.jsxs("select",{className:"form-input",value:B.attribution_order,onChange:F=>W({...B,attribution_order:F.target.value}),children:[e.jsx("option",{value:"",children:"Select Attribution Order"}),Object.values(N).map(F=>e.jsx("option",{value:F.attribution_order_id,children:F.attribution_order_full_code||`#${F.attribution_order_id}`},F.attribution_order_id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Receipt Report ID"}),e.jsx("input",{type:"number",className:"form-input",value:B.receipt_report,onChange:F=>W({...B,receipt_report:F.target.value}),placeholder:"e.g. 1"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Interested Organization"}),e.jsx("input",{type:"text",className:"form-input",value:B.interested_organization,onChange:F=>W({...B,interested_organization:F.target.value}),placeholder:"Organization"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Operation"}),e.jsxs("select",{className:"form-input",value:B.operation,onChange:F=>W({...B,operation:F.target.value}),children:[e.jsx("option",{value:"",children:"Select Operation"}),e.jsx("option",{value:"entry",children:"entry"}),e.jsx("option",{value:"exit",children:"exit"}),e.jsx("option",{value:"transfer",children:"transfer"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Format"}),e.jsx("input",{type:"text",className:"form-input",value:B.format,onChange:F=>W({...B,format:F.target.value}),placeholder:"Format"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Digital Copy (Attachment)"}),e.jsx("input",{type:"file",className:"form-input",onChange:F=>W({...B,digital_copy:F.target.files[0]}),accept:"image/*,application/pdf"})]}),e.jsxs("div",{className:"form-group",style:{display:"flex",flexDirection:"column",gap:"var(--space-2)"},children:[e.jsx("label",{className:"form-label",children:"Signatures"}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[e.jsx("input",{type:"checkbox",checked:!!B.is_signed_by_warehouse_storage_magaziner,onChange:F=>W({...B,is_signed_by_warehouse_storage_magaziner:F.target.checked})}),e.jsx("span",{children:"Signed by magaziner"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[e.jsx("input",{type:"checkbox",checked:!!B.is_signed_by_warehouse_storage_accountant,onChange:F=>W({...B,is_signed_by_warehouse_storage_accountant:F.target.checked})}),e.jsx("span",{children:"Signed by accountant"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[e.jsx("input",{type:"checkbox",checked:!!B.is_signed_by_warehouse_storage_marketer,onChange:F=>W({...B,is_signed_by_warehouse_storage_marketer:F.target.checked})}),e.jsx("span",{children:"Signed by marketer"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[e.jsx("input",{type:"checkbox",checked:!!B.is_signed_by_warehouse_it_chief,onChange:F=>W({...B,is_signed_by_warehouse_it_chief:F.target.checked})}),e.jsx("span",{children:"Signed by IT chief"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[e.jsx("input",{type:"checkbox",checked:!!B.is_signed_by_warehouse_leader,onChange:F=>W({...B,is_signed_by_warehouse_leader:F.target.checked})}),e.jsx("span",{children:"Signed by warehouse leader"})]})]})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:b,children:b?"Creating...":"Create Certificate"})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"card-title",children:"All Certificates"})}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Warehouse"}),e.jsx("th",{children:"Attribution Order"}),e.jsx("th",{children:"Receipt Report"}),e.jsx("th",{children:"Interested Org"}),e.jsx("th",{children:"Operation"}),e.jsx("th",{children:"Format"}),e.jsx("th",{children:"Signed (Magaziner)"}),e.jsx("th",{children:"Signed (Accountant)"}),e.jsx("th",{children:"Signed (Marketer)"}),e.jsx("th",{children:"Signed (IT)"}),e.jsx("th",{children:"Signed (Leader)"}),e.jsx("th",{children:"Digital Copy"})]})}),e.jsx("tbody",{children:x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"13",style:{textAlign:"center",padding:"var(--space-4)"},children:"No administrative certificates found."})}):x.map(F=>{const R=w[F.warehouse],ae=N[F.attribution_order],ue=C[F.receipt_report];return e.jsxs("tr",{className:"hover-row",children:[e.jsxs("td",{children:["#",F.administrative_certificate_id]}),e.jsx("td",{children:(R==null?void 0:R.warehouse_name)||(F.warehouse?`#${F.warehouse}`:"-")}),e.jsx("td",{children:(ae==null?void 0:ae.attribution_order_full_code)||(F.attribution_order?`#${F.attribution_order}`:"-")}),e.jsx("td",{children:(ue==null?void 0:ue.report_full_code)||(F.receipt_report?`#${F.receipt_report}`:"-")}),e.jsx("td",{children:F.interested_organization||"-"}),e.jsx("td",{children:F.operation||"-"}),e.jsx("td",{children:F.format||"-"}),e.jsx("td",{children:F.is_signed_by_warehouse_storage_magaziner?"Yes":"No"}),e.jsx("td",{children:F.is_signed_by_warehouse_storage_accountant?"Yes":"No"}),e.jsx("td",{children:F.is_signed_by_warehouse_storage_marketer?"Yes":"No"}),e.jsx("td",{children:F.is_signed_by_warehouse_it_chief?"Yes":"No"}),e.jsx("td",{children:F.is_signed_by_warehouse_leader?"Yes":"No"}),e.jsx("td",{children:F.digital_copy?"Yes":"No"})]},F.administrative_certificate_id)})})]})})]})]}):e.jsx(Js,{to:"/dashboard",replace:!0})},Oj=()=>{var xe;const{user:n}=Ja(),l=(xe=n==null?void 0:n.roles)==null?void 0:xe.some(ne=>ne.role_code==="stock_consumable_responsible"),[d,u]=c.useState(!0),[m,p]=c.useState(null),[h,g]=c.useState(null),[b,y]=c.useState(null),[x,_]=c.useState([]),[N,I]=c.useState([]),[w,O]=c.useState({}),[C,D]=c.useState({}),[te,E]=c.useState({}),B=c.useMemo(()=>(x||[]).filter(ne=>(ne.status||"").toLowerCase()==="pending"),[x]),W=async()=>{u(!0),g(null),y(null);try{const[ne,S]=await Promise.all([jl.getAll(),Ks.getAll()]),L=(ne==null?void 0:ne.results)||ne||[];_(Array.isArray(L)?L:[]),I(Array.isArray(S)?S:[]);const Z={};(Array.isArray(L)?L:[]).forEach(G=>{Z[G.maintenance_step_item_request_id]={source_room_id:"",destination_room_id:"",stock_item_id:"",consumable_id:""}}),O(Z)}catch{g("Failed to fetch item requests inbox")}finally{u(!1)}},Q=async ne=>{var L,Z;const S=ne.maintenance_step_item_request_id;p(S),g(null),y(null);try{const G=window.prompt("Rejection note (optional):","")??"",fe={};G!==""&&(fe.note=G),await jl.reject(S,fe),y(`Request #${S} rejected successfully`),await W()}catch(G){g(((Z=(L=G.response)==null?void 0:L.data)==null?void 0:Z.error)||"Failed to reject request")}finally{p(null)}};c.useEffect(()=>{l&&W()},[l]);const P=(ne,S)=>{O(L=>({...L,[ne]:{...L[ne]||{},...S}}))},ge=async ne=>{try{const S=await jl.eligibleItems(ne.maintenance_step_item_request_id);return Array.isArray(S==null?void 0:S.results)?S.results:[]}catch{return[]}return[]},F=async ne=>{const S=ne.maintenance_step_item_request_id;E(L=>({...L,[S]:!0}));try{const L=await jl.eligibleItems(S),Z=Array.isArray(L==null?void 0:L.results)?L.results:[];D(G=>({...G,[S]:Z}))}catch{D(L=>({...L,[S]:[]}))}finally{E(L=>({...L,[S]:!1}))}},R=async ne=>{const S=ne.maintenance_step_item_request_id;te[S]||Array.isArray(C[S])||await F(ne)},ae=ne=>{const S=Number(ne);if(!S||Number.isNaN(S))return"";const L=N.find(Z=>Number(Z.room_id)===S);return L?`${L.room_name} (#${L.room_id})`:`#${S}`},ue=async ne=>{var Z,G;const S=ne.maintenance_step_item_request_id,L=w[S]||{};p(S),g(null),y(null);try{if(!L.source_room_id||!L.destination_room_id){g("Source room and destination room are required");return}const fe={source_room_id:Number(L.source_room_id),destination_room_id:Number(L.destination_room_id)};if(ne.request_type==="stock_item"){if(!L.stock_item_id){g("stock_item_id is required");return}fe.stock_item_id=Number(L.stock_item_id)}else if(ne.request_type==="consumable"){if(!L.consumable_id){g("consumable_id is required");return}fe.consumable_id=Number(L.consumable_id)}else{g("Invalid request type");return}await jl.fulfill(S,fe),y(`Request #${S} fulfilled successfully`),await W()}catch(fe){g(((G=(Z=fe.response)==null?void 0:Z.data)==null?void 0:G.error)||"Failed to fulfill request")}finally{p(null)}},Re=async ne=>{var L,Z;const S=ne.maintenance_step_item_request_id;p(S),g(null),y(null);try{const G=await jl.selectRandom(S);G.request_type==="stock_item"?P(S,{stock_item_id:G.stock_item_id?String(G.stock_item_id):"",source_room_id:G.source_room_id||""}):G.request_type==="consumable"?P(S,{consumable_id:G.consumable_id?String(G.consumable_id):"",source_room_id:G.source_room_id||""}):g("Invalid selection response")}catch(G){g(((Z=(L=G.response)==null?void 0:L.data)==null?void 0:Z.error)||"Failed to select randomly")}finally{p(null)}};return l?d?e.jsx("div",{className:"loading",children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Item Requests Inbox"}),e.jsx("p",{className:"page-subtitle",children:"Fulfill maintenance step requests for stock items and consumables"})]}),e.jsx("div",{children:e.jsx("button",{className:"btn btn-secondary",onClick:W,children:"Refresh"})})]}),h&&e.jsx("div",{className:"error-message",children:h}),b&&e.jsx("div",{className:"badge badge-success",style:{padding:"var(--space-4)",width:"100%",marginBottom:"var(--space-4)",borderRadius:"var(--radius-md)"},children:b}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"card-title",children:"Pending Requests"})}),e.jsx("div",{className:"card-body",children:B.length===0?e.jsx("div",{style:{opacity:.8},children:"No pending requests"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"var(--space-4)"},children:B.map(ne=>{const S=ne.maintenance_step_item_request_id,L=w[S]||{},Z=ne.request_type==="stock_item"?ne.requested_stock_item_model:ne.requested_consumable_model;return e.jsxs("div",{className:"card",style:{border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)"},children:[e.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("div",{className:"card-title",style:{marginBottom:4},children:["Request #",S]}),e.jsxs("div",{style:{fontSize:12,opacity:.85},children:["Type: ",e.jsx("b",{children:ne.request_type})," | Step: ",e.jsx("b",{children:ne.maintenance_step})," | Requested model id:"," ",e.jsx("b",{children:Z||"-"})]})]}),e.jsxs("div",{style:{fontSize:12,opacity:.85},children:["Status: ",e.jsx("b",{children:ne.status})]})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:[ne.request_type==="stock_item"?e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Stock Item"}),e.jsxs("select",{className:"form-input",value:L.stock_item_id,onChange:G=>{const fe=G.target.value,$=(C[S]||[]).find(re=>String(re.stock_item_id)===String(fe));P(S,{stock_item_id:fe,source_room_id:($==null?void 0:$.current_room_id)||""})},onFocus:()=>R(ne),children:[e.jsx("option",{value:"",children:"Select stock item"}),(C[S]||[]).map(G=>e.jsxs("option",{value:G.stock_item_id,children:[G.stock_item_id,G.stock_item_inventory_number?` (${G.stock_item_inventory_number})`:""," - ",ae(G.current_room_id)]},G.stock_item_id))]}),e.jsx("div",{style:{fontSize:12,opacity:.75,marginTop:6},children:te[S]?"Loading available items...":"Choose an available item that matches the requested model."})]}):e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Consumable"}),e.jsxs("select",{className:"form-input",value:L.consumable_id,onChange:G=>{const fe=G.target.value,$=(C[S]||[]).find(re=>String(re.consumable_id)===String(fe));P(S,{consumable_id:fe,source_room_id:($==null?void 0:$.current_room_id)||""})},onFocus:()=>R(ne),children:[e.jsx("option",{value:"",children:"Select consumable"}),(C[S]||[]).map(G=>e.jsxs("option",{value:G.consumable_id,children:[G.consumable_id,G.consumable_inventory_number?` (${G.consumable_inventory_number})`:""," - ",ae(G.current_room_id)]},G.consumable_id))]}),e.jsx("div",{style:{fontSize:12,opacity:.75,marginTop:6},children:te[S]?"Loading available items...":"Choose an available item that matches the requested model."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Source Room"}),e.jsxs("select",{className:"form-input",value:L.source_room_id,onChange:()=>{},disabled:!0,children:[e.jsx("option",{value:"",children:"Source room (auto)"}),N.map(G=>e.jsxs("option",{value:G.room_id,children:[G.room_name," (#",G.room_id,")"]},G.room_id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Destination Room"}),e.jsxs("select",{className:"form-input",value:L.destination_room_id,onChange:G=>P(S,{destination_room_id:G.target.value}),children:[e.jsx("option",{value:"",children:"Select destination room"}),N.map(G=>e.jsxs("option",{value:G.room_id,children:[G.room_name," (#",G.room_id,")"]},G.room_id))]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-3)",alignItems:"center"},children:[e.jsx("button",{className:"btn btn-primary",disabled:m===S,onClick:()=>ue(ne),children:m===S?"Fulfilling...":"Fulfill"}),e.jsx("button",{className:"btn btn-secondary",disabled:m===S,onClick:()=>Q(ne),children:m===S?"Rejecting...":"Reject"}),e.jsx("button",{className:"btn btn-secondary",disabled:m===S,onClick:()=>Re(ne),children:"Select randomly"}),e.jsx("button",{className:"btn btn-secondary",disabled:m===S,onClick:async()=>{const fe=(await ge(ne)).slice(0,20).map(k=>ne.request_type==="stock_item"?`${k.stock_item_id} - ${k.stock_item_name||""} (model ${k.stock_item_model_id})`:`${k.consumable_id} - ${k.consumable_name||""} (model ${k.consumable_model_id})`).join(`
`);window.alert(fe||"No candidates found (or backend filtering not available).")},children:"Show candidates (top 20)"})]})]})]},S)})})})]})]}):e.jsx(Js,{to:"/dashboard",replace:!0})},Lj=({value:n,onChange:l,options:d=[],placeholder:u="Select...",disabled:m=!1,required:p=!1,className:h=""})=>{const[g,b]=c.useState(!1),[y,x]=c.useState(""),_=c.useRef(null),N=c.useRef(null),I=d.find(D=>String(D.value)===String(n)),w=d.filter(D=>{var te;return(te=D.label)==null?void 0:te.toLowerCase().includes(y.toLowerCase())});c.useEffect(()=>{const D=te=>{_.current&&!_.current.contains(te.target)&&(b(!1),x(""))};return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[]);const O=D=>{l({target:{value:D.value}}),b(!1),x("")},C=D=>{D.key==="Escape"?(b(!1),x("")):D.key==="Enter"&&w.length>0?O(w[0]):D.key==="ArrowDown"&&g&&D.preventDefault()};return e.jsxs("div",{ref:_,className:`searchable-select ${h}`,style:{position:"relative"},children:[e.jsxs("div",{className:"form-input",onClick:()=>!m&&b(!g),onKeyDown:C,style:{cursor:m?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:"38px",opacity:m?.7:1,backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",padding:"0.5rem 0.75rem"},children:[e.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:I?"var(--color-text-primary)":"var(--color-text-secondary)"},children:I?I.label:u}),e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginLeft:8,flexShrink:0,transform:g?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:e.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),g&&!m&&e.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:1e3,marginTop:4,backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",boxShadow:"var(--shadow-lg)",maxHeight:250,display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{padding:"0.5rem",borderBottom:"1px solid var(--color-border)"},children:e.jsx("input",{ref:N,type:"text",className:"form-input",value:y,onChange:D=>x(D.target.value),placeholder:"Search...",autoFocus:!0,style:{width:"100%",padding:"0.4rem 0.6rem",fontSize:14}})}),e.jsx("div",{style:{overflowY:"auto",flex:1},children:w.length===0?e.jsx("div",{style:{padding:"0.75rem",color:"var(--color-text-secondary)",textAlign:"center"},children:"No options found"}):w.map(D=>e.jsx("div",{onClick:()=>O(D),style:{padding:"0.5rem 0.75rem",cursor:"pointer",backgroundColor:String(D.value)===String(n)?"var(--color-bg-secondary)":"transparent",color:"var(--color-text-primary)"},onMouseEnter:te=>{String(D.value)!==String(n)&&(te.currentTarget.style.backgroundColor="var(--color-bg-secondary)")},onMouseLeave:te=>{String(D.value)!==String(n)&&(te.currentTarget.style.backgroundColor="transparent")},children:D.label},D.value))})]}),p&&e.jsx("input",{type:"hidden",value:n,required:!0,tabIndex:-1})]})},Ij=({maintenanceId:n,maintenancePerformedBy:l,maintenanceEnded:d,isChief:u,onStepsChange:m,canShowEndMaintenanceButton:p,endMaintenanceDisabled:h,onEndMaintenance:g})=>{var Io,Uo,qo;const{user:b}=Ja(),[y,x]=c.useState([]),[_,N]=c.useState([]),[I,w]=c.useState([]),[O,C]=c.useState([]),[D,te]=c.useState([]),[E,B]=c.useState([]),[W,Q]=c.useState(!0),[P,ge]=c.useState(""),[F,R]=c.useState(!1),[ae,ue]=c.useState(!1),[Re,xe]=c.useState(!1),[ne,S]=c.useState(null),[L,Z]=c.useState(!1),[G,fe]=c.useState([]),[k,$]=c.useState(!1),[re,U]=c.useState(!1),[ye,be]=c.useState(null),[T,le]=c.useState(""),[Me,Ge]=c.useState([]),[De,Ke]=c.useState(null),[ze,st]=c.useState(""),[Ne,Qe]=c.useState(!1),[$e,Ce]=c.useState(!1),[Be,X]=c.useState(null),[J,we]=c.useState(null),[ke,Te]=c.useState(""),[z,A]=c.useState(""),[de,Ee]=c.useState([]),[Oe,Ie]=c.useState(!1),[Pe,Bt]=c.useState(null),[tt,Ot]=c.useState(!1),[Ze,kt]=c.useState(null),[We,St]=c.useState({stock_items:[],consumables:[]}),[qe,ja]=c.useState(""),[ht,aa]=c.useState(""),[pa,Sa]=c.useState([]),[it,Ht]=c.useState(""),[Ra,wa]=c.useState(!1),[$t,Ma]=c.useState(!1),[Ut,At]=c.useState(!1),[Ka,fa]=c.useState(null),[$a,ms]=c.useState([]),[Ba,Xt]=c.useState(""),[yt,Ct]=c.useState(""),[Kt,ha]=c.useState(""),[$s,Ia]=c.useState(""),[Pa,ya]=c.useState(""),[Pt,ia]=c.useState(!1),[sa,ea]=c.useState(!1),[Yt,xt]=c.useState(null),[Ta,Ea]=c.useState({stock_items:[],consumables:[]}),[Ua,ta]=c.useState([]),[ws,ps]=c.useState([]),[Ys,en]=c.useState([]),[gt,Ya]=c.useState("asset"),[na,Wt]=c.useState(""),[Wa,Va]=c.useState(""),[es,ts]=c.useState(""),[ee,je]=c.useState(!1),[Le,et]=c.useState(""),[qt,ka]=c.useState(""),[Aa,as]=c.useState([]),[ra,ss]=c.useState(!1),[ks,Ft]=c.useState(null),[Ws,q]=c.useState(null),[v,H]=c.useState(!1),[ve,Fe]=c.useState(""),[Nt,ca]=c.useState(""),As=c.useMemo(()=>["pending","started","pending (waiting for stock item)","pending (waiting for consumable)","In Progress","done","failed (to be sent to a higher level)","cancelled"],[]),fs=c.useMemo(()=>({pending:10,started:20,"pending (waiting for stock item)":30,"pending (waiting for consumable)":30,"In Progress":40,done:50,"failed (to be sent to a higher level)":50,cancelled:50}),[]),Eo=M=>{const he=M==="in progress"?"In Progress":M,Ue=fs[he]??fs.pending,Ve=As.filter(rt=>{const Vt=fs[rt];return Vt==null?!1:Vt>=Ue});if(he==="started")return Ve.filter(rt=>rt!=="started");if(he==="In Progress")for(const rt of["pending (waiting for stock item)","pending (waiting for consumable)"])Ve.includes(rt)||Ve.unshift(rt);return he&&!Ve.includes(he)&&fs[he]!=null?[he,...Ve]:Ve},Lr=c.useMemo(()=>{var M;return((M=b==null?void 0:b.person)==null?void 0:M.person_id)===l},[b,l]),or=u||Lr,dn=c.useMemo(()=>!Array.isArray(G)||G.length===0?!1:G.some(M=>{const he=M==null?void 0:M.external_maintenance_status;if(he)return he!=="DRAFT"&&he!=="RECEIVED_BY_COMPANY";const Ue=M==null?void 0:M.item_sent_to_external_maintenance_datetime,Ve=M==null?void 0:M.item_received_by_company_datetime;return!!Ue&&!Ve}),[G]),Ns=c.useMemo(()=>!Array.isArray(G)||G.length===0?!1:G.some(M=>{const he=M==null?void 0:M.external_maintenance_status;return he?he!=="RECEIVED_BY_COMPANY":!(M==null?void 0:M.item_received_by_company_datetime)}),[G]),Tl=()=>{S(null),Z(!1),xe(!1),ue(!0)},ir=()=>{be(null),le(""),U(!1),$(!0)},hs=()=>{ue(!1),xe(!1),S(null),Z(!1)},El=async M=>{var Ue,Ve;M.preventDefault();const he=Array.isArray(G)?G[0]:null;if(!(he!=null&&he.external_maintenance_id)){be({type:"error",text:"No external maintenance found for this maintenance."});return}if(!T){be({type:"error",text:"Please select typical step."});return}try{U(!0),be(null),await sr.createStep(Number(he.external_maintenance_id),Number(T)),be({type:"success",text:"External maintenance step created successfully."}),await Rs()}catch(rt){console.error(rt),be({type:"error",text:((Ve=(Ue=rt.response)==null?void 0:Ue.data)==null?void 0:Ve.error)||"Failed to create external maintenance step."})}finally{U(!1)}},Vs=()=>{R(!1),Fe(""),ca("")},cr=()=>{$(!1),U(!1),be(null),le("")};c.useEffect(()=>{hs(),cr(),Vs(),Rs()},[n]),c.useEffect(()=>{d&&(mn(),Vs(),Hr(),mr(),pr(),$r())},[d]);const Ir=async M=>{if(d){ge("Maintenance is ended");return}ea(!0),xt(M),Ea({stock_items:[],consumables:[]}),ta([]),ps([]),en([]),Ya("asset"),Wt(""),Va(""),ts(""),je(!1),et(""),ka(""),as([]),Ft(null);try{const[he,Ue,Ve,rt]=await Promise.all([Zs.getComponents(M.maintenance_step_id).catch(()=>({stock_items:[],consumables:[]})),nr.getAll().catch(()=>[]),rr.getAll().catch(()=>[]),lr.getAll().catch(()=>[])]);Ea({stock_items:Array.isArray(he==null?void 0:he.stock_items)?he.stock_items:[],consumables:Array.isArray(he==null?void 0:he.consumables)?he.consumables:[]}),ta(Array.isArray(Ue)?Ue:[]),ps(Array.isArray(Ve)?Ve:[]),en(Array.isArray(rt)?rt:[])}catch(he){console.error(he)}},dr=()=>{const M=Number(Wa);return!M||Number.isNaN(M)?null:gt==="asset"?Ua.find(he=>Number(he.asset_attribute_definition_id)===M)||null:gt==="stock_item"?ws.find(he=>Number(he.stock_item_attribute_definition_id)===M)||null:Ys.find(he=>Number(he.consumable_attribute_definition_id)===M)||null},zl=M=>{const he=((M==null?void 0:M.data_type)||"").toString().trim().toLowerCase();return he==="bool"||he==="boolean"?"bool":he==="date"?"date":he==="number"||he==="numeric"||he==="decimal"||he==="int"||he==="integer"||he==="float"||he==="double"?"number":"string"},qa=()=>{const M=dr();if(!M){Ft({type:"error",text:"Please select an attribute."});return}let he=null;if(gt==="stock_item"||gt==="consumable"){if(!na){Ft({type:"error",text:"Please select a component."});return}if(he=Number(na),!he||Number.isNaN(he)){Ft({type:"error",text:"Invalid component."});return}}const Ue=zl(M),Ve=Number(gt==="asset"?M.asset_attribute_definition_id:gt==="stock_item"?M.stock_item_attribute_definition_id:M.consumable_attribute_definition_id),rt={target_type:gt,target_id:he,attribute_definition_id:Ve};if(Ue==="bool")rt.value_bool=!!ee;else if(Ue==="date"){if(!qt){Ft({type:"error",text:"Please select a date."});return}rt.value_date=qt}else if(Ue==="number"){if(Le===""||Le==null){Ft({type:"error",text:"Please enter a number."});return}const Vt=Number(Le);if(Number.isNaN(Vt)){Ft({type:"error",text:"Invalid number."});return}rt.value_number=Vt}else{if(!es){Ft({type:"error",text:"Please enter a value."});return}rt.value_string=es}as(Vt=>[...Vt,rt]),Ft({type:"success",text:"Change added to queue."})},un=async()=>{var M,he;if(Yt){if(!Array.isArray(Aa)||Aa.length===0){Ft({type:"error",text:"No changes to submit."});return}try{ss(!0),Ft(null),await Zs.addAttributeChanges(Yt.maintenance_step_id,Aa),Ft({type:"success",text:"Attribute changes queued. They will apply when the step is done."}),as([])}catch(Ue){console.error(Ue),Ft({type:"error",text:((he=(M=Ue.response)==null?void 0:M.data)==null?void 0:he.error)||"Failed to queue attribute changes."})}finally{ss(!1)}}},Ur=async()=>{const M=Number(Wa);if(!M||Number.isNaN(M)){q(null);return}try{H(!0);let he=null;const Ue=Yt==null?void 0:Yt.maintenance,Ve=Ue==null?void 0:Ue.asset;if(gt==="asset"){if(Ve!=null&&Ve.asset_id){const rt=await ec.getByAsset(Ve.asset_id);he=(rt==null?void 0:rt.find(Vt=>Number(Vt.attribute_definition_id||Vt.asset_attribute_definition_id)===M))||null}}else if(gt==="stock_item"){const rt=Number(na);if(rt&&!Number.isNaN(rt)){const Vt=await tc.getByStockItem(rt);he=(Vt==null?void 0:Vt.find(ys=>Number(ys.attribute_definition_id||ys.stock_item_attribute_definition_id)===M))||null}}else if(gt==="consumable"){const rt=Number(na);if(rt&&!Number.isNaN(rt)){const Vt=await ac.getByConsumable(rt);he=(Vt==null?void 0:Vt.find(ys=>Number(ys.attribute_definition_id||ys.consumable_attribute_definition_id)===M))||null}}q(he)}catch(he){console.error("Failed to load current attribute value:",he),q(null)}finally{H(!1)}},ur=async M=>{var he,Ue;if(M.preventDefault(),!L)try{xe(!0),S(null),await sr.createForMaintenance(Number(n)),S({type:"success",text:"External maintenance created successfully."}),Z(!0)}catch(Ve){console.error(Ve),S({type:"error",text:((Ue=(he=Ve.response)==null?void 0:he.data)==null?void 0:Ue.error)||"Failed to create external maintenance."})}finally{xe(!1)}},Dl=c.useMemo(()=>{const M=(Array.isArray(y)?y:[]).map(Ue=>({...Ue,__step_type:"internal",__key:`internal-${Ue.maintenance_step_id}`})),he=(Array.isArray(_)?_:[]).map(Ue=>({...Ue,__step_type:"external",__key:`external-${Ue.external_maintenance_step_id}`}));return[...M,...he]},[y,_]),qr=M=>M?M.end_datetime?M.is_successful===!0?"done":M.is_successful===!1?"failed":"done":"In Progress":"-",Fr=M=>{if(!M)return"var(--color-text-secondary)";const he=M.toLowerCase();return he.includes("done")||he==="completed"?"var(--color-success)":he.includes("fail")||he.includes("cancel")?"var(--color-error)":he.includes("progress")||he.includes("start")?"var(--color-info)":he.includes("pending")||he.includes("wait")?"var(--color-warning)":"var(--color-text-secondary)"},En=M=>M?new Date(M).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",Rs=async()=>{try{Q(!0);const[M,he,Ue,Ve,rt,Vt,ys]=await Promise.all([Zs.getAll({maintenance:n}),V_.getAll({maintenance:n}),K_.getAll(),Tn.getAll({role:"maintenance_technician"}),u?Tn.getAll({role:"maintenance_chief"}):Promise.resolve([]),sr.getAll({maintenance:n}),W_.getAll()]);x(M),typeof m=="function"&&m(Array.isArray(M)?M:[]),N(Array.isArray(he)?he:[]),w(Ue);const zn=[...Array.isArray(Ve)?Ve:[]];Array.isArray(rt)&&rt.forEach(ns=>{zn.some(tn=>tn.person_id===ns.person_id)||zn.push(ns)}),C(zn),fe(Array.isArray(Vt)?Vt:[]),Ge(Array.isArray(ys)?ys:[]);try{const ns=await Z_.getAll();ms(Array.isArray(ns)?ns:[])}catch(ns){console.error(ns),ms([])}const[fr,hr]=await Promise.all([on.getAll(),cn.getAll()]);te(Array.isArray(fr)?fr:[]),B(Array.isArray(hr)?hr:[])}catch(M){console.error(M),ge("Failed to load steps data")}finally{Q(!1)}},zo=async M=>{var he,Ue;if(M.preventDefault(),dn){ge("Cannot create maintenance steps while the asset has an ongoing external maintenance.");return}if(ve)try{await Zs.create({maintenance:n,maintenance_typical_step_id:ve,person_id:Nt||(Lr?b.person.person_id:null)}),Vs(),Rs()}catch(Ve){console.error(Ve);const rt=(Ue=(he=Ve==null?void 0:Ve.response)==null?void 0:he.data)==null?void 0:Ue.error;ge(rt||"Failed to add step")}},Do=async(M,he)=>{try{if(d){ge("Maintenance is ended");return}await Zs.patch(M.maintenance_step_id,{maintenance_step_status:he}),Rs()}catch(Ue){console.error(Ue),ge("Failed to update step status")}},fc=M=>{if(d){ge("Maintenance is ended");return}Ke(M.maintenance_step_id),M.maintenance_step_status==="started"?st(""):st(M.maintenance_step_status||"")},mn=()=>{Ke(null),st(""),Qe(!1)},Hr=()=>{Ce(!1),X(null),we(null),Te(""),A(""),Ee([]),Ie(!1),Bt(null)},mr=()=>{Ot(!1),kt(null),St({stock_items:[],consumables:[]}),ja(""),aa(""),Sa([]),Ht(""),wa(!1),Ma(!1)},pr=()=>{At(!1),fa(null),Xt(""),Ct(""),ha(""),Ia(""),ya(""),ia(!1)},$r=()=>{ea(!1),xt(null),Ea({stock_items:[],consumables:[]}),Ya("asset"),Wt(""),Va(""),ts(""),je(!1),et(""),ka(""),as([]),ss(!1),Ft(null),q(null),H(!1)};c.useEffect(()=>{sa&&Ur()},[Wa,gt,na,Yt]);const hc=M=>{if(d){ge("Maintenance is ended");return}At(!0),fa(M),Xt(""),Ct(""),ha(""),Ia(""),ya(""),ia(!1)},yc=async()=>{var M,he;if(Ka){if(!Ba){ge("Please select a condition");return}try{ia(!0),await Zs.updateAssetCondition(Ka.maintenance_step_id,{condition_id:Number(Ba),notes:yt||null,cosmetic_issues:Kt||null,functional_issues:$s||null,recommendation:Pa||null}),await Rs(),pr()}catch(Ue){console.error(Ue),ge(((he=(M=Ue.response)==null?void 0:M.data)==null?void 0:he.error)||"Failed to update asset condition")}finally{ia(!1)}}},Oo=async M=>{var he,Ue;if(d){ge("Maintenance is ended");return}Ot(!0),kt(M),St({stock_items:[],consumables:[]}),ja(""),aa(""),Sa([]),Ht("");try{wa(!0),await Do(M,"In Progress");const[Ve,rt]=await Promise.all([Zs.getComponents(M.maintenance_step_id),Ks.getAll()]);St({stock_items:Array.isArray(Ve==null?void 0:Ve.stock_items)?Ve.stock_items:[],consumables:Array.isArray(Ve==null?void 0:Ve.consumables)?Ve.consumables:[]}),Sa(Array.isArray(rt)?rt:[])}catch(Ve){console.error(Ve),ge(((Ue=(he=Ve.response)==null?void 0:he.data)==null?void 0:Ue.error)||"Failed to load components"),mr()}finally{wa(!1)}},bc=async()=>{var M,he;if(Ze){if(!qe||!ht){ge("Please select a component to remove");return}try{Ma(!0);const Ue={component_type:qe,component_id:Number(ht)};it&&(Ue.destination_room_id=Number(it)),await Zs.removeComponent(Ze.maintenance_step_id,Ue),await Rs(),mr()}catch(Ue){console.error(Ue),ge(((he=(M=Ue.response)==null?void 0:M.data)==null?void 0:he.error)||"Failed to remove component")}finally{Ma(!1)}}},Lo=(M,he)=>{Ce(!0),X(he),we(M),Te(""),A(""),Ee([]),Ie(!1),Bt(null)},vc=async M=>{try{if(Qe(!0),ze==="pending (waiting for stock item)"){mn(),Lo(M,"stock_item");return}if(ze==="pending (waiting for consumable)"){mn(),Lo(M,"consumable");return}await Do(M,ze),mn()}finally{Qe(!1)}},gc=async(M,he)=>{try{const Ue=Number(he);if(!Ue||Number.isNaN(Ue)){Ee([]);return}if(M==="stock_item"){const Ve=await Qa.getByStockItemType(Ue);Ee(Array.isArray(Ve)?Ve:[]);return}if(M==="consumable"){const Ve=await Xa.getByConsumableType(Ue);Ee(Array.isArray(Ve)?Ve:[])}}catch(Ue){console.error(Ue),Ee([])}},Ol=async()=>{var M,he;if(!(!J||!Be)){if(!z){Bt({type:"error",text:"Please select a model."});return}try{if(Ie(!0),Bt(null),Be==="stock_item")await Zs.requestStockItem(J.maintenance_step_id,{requested_stock_item_model_id:Number(z)});else if(Be==="consumable")await Zs.requestConsumable(J.maintenance_step_id,{requested_consumable_model_id:Number(z)});else{Bt({type:"error",text:"Invalid request type."});return}Bt({type:"success",text:"Request created successfully."}),await Rs()}catch(Ue){console.error(Ue),Bt({type:"error",text:((he=(M=Ue.response)==null?void 0:M.data)==null?void 0:he.error)||"Failed to create request."})}finally{Ie(!1)}}};return e.jsxs("div",{className:"maintenance-steps-container p-4 border-t",style:{backgroundColor:"var(--color-bg-secondary)",borderColor:"var(--color-border)"},children:[e.jsx("div",{className:"card",style:{backgroundColor:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)"},children:e.jsxs("div",{className:"card-body p-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",style:{display:"flex",alignItems:"center",width:"100%"},children:[e.jsx("h3",{className:"text-lg font-bold mb-0",children:"Maintenance Steps"}),e.jsxs("div",{style:{display:"flex",gap:8,marginLeft:"auto",flexWrap:"wrap",justifyContent:"flex-end"},children:[!!p&&e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{typeof g=="function"&&g()},disabled:!!h,style:{width:"auto",whiteSpace:"nowrap",padding:"0.35rem 0.55rem"},title:"End maintenance","aria-label":"End maintenance",children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 2v10"}),e.jsx("path",{d:"M18.4 6.6a9 9 0 1 1-12.8 0"})]})}),or&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{if(Ns){ge("Cannot create a new external maintenance while there is an open one.");return}Tl()},disabled:W||Ns,style:{width:"auto",whiteSpace:"nowrap",padding:"0.35rem 0.55rem"},title:"Create external maintenance","aria-label":"Create external maintenance",children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),e.jsx("path",{d:"M12 8v8"}),e.jsx("path",{d:"M8 12h8"})]})}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>ir(),disabled:W,style:{width:"auto",whiteSpace:"nowrap",padding:"0.35rem 0.55rem"},title:"Create new external maintenance step","aria-label":"Create new external maintenance step",children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("path",{d:"M12 8v8"}),e.jsx("path",{d:"M8 12h8"})]})}),e.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>{if(d){ge("Maintenance is ended");return}if(dn){ge("Cannot create maintenance steps while the asset has an ongoing external maintenance.");return}R(!0)},disabled:W||dn||d,style:{width:"auto",whiteSpace:"nowrap",padding:"0.35rem 0.55rem"},title:"Create new maintenance step","aria-label":"Create new maintenance step",children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("path",{d:"M14 2v6h6"}),e.jsx("path",{d:"M12 11v6"}),e.jsx("path",{d:"M9 14h6"})]})})]})]})]}),ae&&or&&gl.createPortal(e.jsx("div",{className:"modal-overlay",onClick:()=>hs(),children:e.jsxs("div",{className:"modal",onClick:M=>M.stopPropagation(),style:{maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Create external maintenance"}),e.jsx("button",{className:"modal-close",onClick:()=>hs(),children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("form",{onSubmit:ur,style:{display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[e.jsxs("div",{className:"modal-body",style:{overflowY:"auto",flex:1,minHeight:0},children:[ne&&e.jsx("div",{className:`alert ${ne.type==="error"?"alert-error":"alert-success"} mb-4`,children:ne.text}),e.jsx("div",{className:"alert alert-info mb-0",children:"This will create the external maintenance record. The asset responsible will later select the external maintenance provider and send the asset."})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>hs(),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:Re||L,children:"Create"})]})]})]})}),document.body),k&&or&&gl.createPortal(e.jsx("div",{className:"modal-overlay",onClick:()=>cr(),children:e.jsxs("div",{className:"modal",onClick:M=>M.stopPropagation(),style:{maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Create new external maintenance step"}),e.jsx("button",{className:"modal-close",onClick:()=>cr(),children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("form",{onSubmit:El,style:{display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[e.jsxs("div",{className:"modal-body",style:{overflowY:"auto",flex:1,minHeight:0},children:[ye&&e.jsx("div",{className:`alert ${ye.type==="error"?"alert-error":"alert-success"} mb-4`,children:ye.text}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Typical step"}),e.jsxs("select",{className:"form-input",value:T,onChange:M=>le(M.target.value),disabled:re,required:!0,children:[e.jsx("option",{value:"",children:"Select typical step..."}),Me.map(M=>e.jsx("option",{value:M.external_maintenance_typical_step_id,children:M.description},M.external_maintenance_typical_step_id))]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>cr(),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:re,children:re?"Creating...":"Create"})]})]})]})}),document.body),P&&e.jsx("div",{className:"alert alert-error mb-4",children:P}),F&&or&&gl.createPortal(e.jsx("div",{className:"modal-overlay",onClick:()=>Vs(),children:e.jsxs("div",{className:"modal",onClick:M=>M.stopPropagation(),style:{maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Create new maintenance step"}),e.jsx("button",{className:"modal-close",onClick:()=>Vs(),children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("form",{onSubmit:zo,style:{display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[e.jsxs("div",{className:"modal-body",style:{overflowY:"auto",flex:1,minHeight:0},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Typical Step"}),e.jsx(Lj,{value:ve,onChange:M=>Fe(M.target.value),options:I.map(M=>({value:M.maintenance_typical_step_id,label:M.description})),placeholder:"Select Task...",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Assign To"}),e.jsxs("select",{className:"form-input",value:Nt,onChange:M=>ca(M.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Person..."}),O.map(M=>e.jsxs("option",{value:M.person_id,children:[M.first_name," ",M.last_name,M.role_code==="maintenance_chief"?" (Chief)":""]},M.person_id))]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>Vs(),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:W,children:"Create"})]})]})]})}),document.body),W&&Dl.length===0?e.jsx("div",{className:"text-center py-4",style:{color:"var(--color-text-secondary)",marginTop:12},children:"Loading steps..."}):Dl.length===0?e.jsx("div",{className:"empty-state p-4 text-center rounded border",style:{color:"var(--color-text-secondary)",backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)",marginTop:12},children:e.jsx("p",{children:"No steps added yet."})}):e.jsxs("div",{className:"steps-timeline",style:{position:"relative",paddingLeft:"2rem",marginTop:12},children:[e.jsx("style",{children:`
                                .steps-timeline::before {
                                    content: '';
                                    position: absolute;
                                    left: 0.75rem;
                                    top: 0;
                                    bottom: 0;
                                    width: 2px;
                                    background: var(--color-border);
                                }
                                .step-timeline-entry {
                                    position: relative;
                                    padding-bottom: 1.5rem;
                                }
                                .step-timeline-entry:last-child {
                                    padding-bottom: 0;
                                }
                                .step-timeline-marker {
                                    position: absolute;
                                    left: -1.5rem;
                                    top: 0.25rem;
                                    width: 1.5rem;
                                    height: 1.5rem;
                                    border-radius: 50%;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    font-size: 0.75rem;
                                    font-weight: 600;
                                    background: var(--color-bg-primary);
                                    border: 2px solid var(--color-border);
                                    z-index: 1;
                                }
                                .step-timeline-marker.internal {
                                    background: var(--color-info);
                                    border-color: var(--color-info);
                                    color: white;
                                }
                                .step-timeline-marker.external {
                                    background: var(--color-warning);
                                    border-color: var(--color-warning);
                                    color: white;
                                }
                                .step-timeline-content {
                                    background: var(--color-bg-secondary);
                                    border: 1px solid var(--color-border);
                                    border-radius: var(--radius-md);
                                    padding: 1rem;
                                    margin-left: 0.5rem;
                                }
                                .step-timeline-header {
                                    display: flex;
                                    justify-content: space-between;
                                    align-items: flex-start;
                                    margin-bottom: 0.5rem;
                                    flex-wrap: wrap;
                                    gap: 0.5rem;
                                }
                                .step-timeline-title {
                                    font-weight: 600;
                                    font-size: var(--font-size-md);
                                    color: var(--color-text-primary);
                                    margin: 0;
                                }
                                .step-timeline-header-right {
                                    display: flex;
                                    flex-direction: column;
                                    align-items: flex-end;
                                    gap: 0.5rem;
                                }
                                .step-timeline-meta {
                                    display: flex;
                                    flex-wrap: wrap;
                                    align-items: center;
                                    gap: 0.75rem;
                                    font-size: var(--font-size-sm);
                                    color: var(--color-text-secondary);
                                    margin-top: 0.5rem;
                                }
                                .step-timeline-meta-item {
                                    display: flex;
                                    align-items: center;
                                    gap: 0.25rem;
                                }
                                .step-timeline-actions {
                                    display: flex;
                                    gap: 0.35rem;
                                    flex-wrap: wrap;
                                    margin-left: auto;
                                }
                            `}),Dl.map(M=>{var ys,zn,fr,hr,ns,tn;const he=M.__step_type==="internal",Ue=he?((ys=M.maintenance_typical_step)==null?void 0:ys.description)||`Step ${M.maintenance_step_id}`:M.external_maintenance_typical_step_description||`External step ${M.external_maintenance_step_id}`,Ve=he?`${((zn=M.person)==null?void 0:zn.first_name)||""} ${((fr=M.person)==null?void 0:fr.last_name)||""}`.trim():M.external_maintenance_provider_name||"External provider",rt=he?M.maintenance_step_status||"-":qr(M),Vt=Fr(he?M.maintenance_step_status:qr(M));return e.jsxs("div",{className:"step-timeline-entry",children:[e.jsx("div",{className:`step-timeline-marker ${he?"internal":"external"}`,children:he?"I":"E"}),e.jsxs("div",{className:"step-timeline-content",children:[e.jsxs("div",{className:"step-timeline-header",children:[e.jsx("h4",{className:"step-timeline-title",children:Ue}),e.jsx("span",{className:"badge badge-info",style:{backgroundColor:Vt,color:"white"},children:rt})]}),e.jsxs("div",{className:"step-timeline-meta",children:[e.jsx("div",{className:"step-timeline-meta-item",children:e.jsx("span",{className:"badge badge-info",children:he?"Internal":"External"})}),e.jsxs("div",{className:"step-timeline-meta-item",children:[e.jsx("strong",{children:"Assigned to:"})," ",Ve||"-"]}),he&&M.start_datetime&&e.jsxs("div",{className:"step-timeline-meta-item",children:[e.jsx("strong",{children:"Started:"})," ",En(M.start_datetime)]}),he&&M.end_datetime&&e.jsxs("div",{className:"step-timeline-meta-item",children:[e.jsx("strong",{children:"Ended:"})," ",En(M.end_datetime)]}),he&&!d&&(((hr=b==null?void 0:b.person)==null?void 0:hr.person_id)===((ns=M.person)==null?void 0:ns.person_id)||u)&&e.jsxs("div",{className:"step-timeline-actions",children:[M.maintenance_step_status!=="done"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-xs btn-secondary",style:{padding:"0.2rem 0.45rem",fontSize:12},onClick:()=>fc(M),title:"Update status","aria-label":"Update status",children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 20h9"}),e.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})}),e.jsx("button",{className:"btn btn-xs btn-secondary",style:{padding:"0.2rem 0.45rem",fontSize:12},onClick:()=>Ir(M),title:"Queue attribute changes","aria-label":"Queue attribute changes",children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 20h9"}),e.jsx("path",{d:"M12 4h9"}),e.jsx("path",{d:"M4 9h6"}),e.jsx("path",{d:"M4 15h6"}),e.jsx("path",{d:"M9 7l-2 2 2 2"}),e.jsx("path",{d:"M9 13l-2 2 2 2"})]})}),e.jsx("button",{className:"btn btn-xs btn-secondary",style:{padding:"0.2rem 0.45rem",fontSize:12},onClick:()=>hc(M),title:"Update asset condition","aria-label":"Update asset condition",children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 18h6"}),e.jsx("path",{d:"M10 22h4"}),e.jsx("path",{d:"M12 2a7 7 0 0 0-4 12.74V17a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-2.26A7 7 0 0 0 12 2z"})]})})]}),M.maintenance_step_status!=="done"&&((tn=M.maintenance_typical_step)==null?void 0:tn.operation_type)==="remove"&&e.jsx("button",{className:"btn btn-xs btn-danger",style:{padding:"0.2rem 0.45rem",fontSize:12},onClick:()=>Oo(M),disabled:Ra||$t,title:"Remove component","aria-label":"Remove component",children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"}),e.jsx("path",{d:"M10 11v6"}),e.jsx("path",{d:"M14 11v6"}),e.jsx("path",{d:"M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"})]})})]})]})]})]},M.__key)})]})]})}),$e&&J&&e.jsxs("div",{className:"card",style:{position:"fixed",right:20,bottom:20,zIndex:50,width:420,padding:"var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12,alignItems:"center",marginBottom:10},children:[e.jsx("div",{style:{fontWeight:700},children:Be==="stock_item"?"Request stock item":"Request consumable"}),e.jsx("button",{className:"btn btn-xs btn-secondary",style:{padding:"0.2rem 0.45rem",fontSize:12},onClick:Hr,disabled:Oe,children:"Close"})]}),e.jsxs("div",{style:{fontSize:12,opacity:.85,marginBottom:12},children:["Step: ",e.jsx("b",{children:J.maintenance_step_id})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[e.jsx("label",{className:"form-label",children:"Type"}),e.jsxs("select",{className:"form-input",value:ke,onChange:async M=>{const he=M.target.value;Te(he),A(""),Bt(null),await gc(Be,he)},disabled:Oe,children:[e.jsx("option",{value:"",children:"Select type..."}),(Be==="stock_item"?D:E).map(M=>e.jsx("option",{value:Be==="stock_item"?M.stock_item_type_id:M.consumable_type_id,children:Be==="stock_item"?M.stock_item_type_label:M.consumable_type_label},Be==="stock_item"?M.stock_item_type_id:M.consumable_type_id))]})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[e.jsx("label",{className:"form-label",children:"Model"}),e.jsxs("select",{className:"form-input",value:z,onChange:M=>{A(M.target.value),Bt(null)},disabled:Oe||!ke,children:[e.jsx("option",{value:"",children:"Select model..."}),de.map(M=>e.jsxs("option",{value:Be==="stock_item"?M.stock_item_model_id:M.consumable_model_id,children:[M.model_name,M.model_code?` (${M.model_code})`:""]},Be==="stock_item"?M.stock_item_model_id:M.consumable_model_id))]})]}),Pe&&e.jsx("div",{className:Pe.type==="success"?"badge badge-success":"badge badge-danger",style:{padding:"var(--space-3)",width:"100%",marginBottom:10,borderRadius:"var(--radius-md)",display:"block"},children:Pe.text}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"var(--space-2)",marginTop:10},children:e.jsx("button",{className:"btn btn-primary btn-sm",onClick:Ol,disabled:Oe||!z,children:Oe?"Requesting...":"Submit request"})})]}),De&&gl.createPortal(e.jsx("div",{className:"modal-overlay",onClick:()=>mn(),children:e.jsxs("div",{className:"modal",onClick:M=>M.stopPropagation(),style:{maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Update status"}),e.jsx("button",{className:"modal-close",onClick:()=>mn(),disabled:Ne,children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("div",{className:"modal-body",style:{overflowY:"auto",flex:1,minHeight:0},children:e.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{className:"form-input",value:ze,onChange:M=>st(M.target.value),disabled:Ne,children:[e.jsx("option",{value:"",children:"Select status..."}),Eo((Io=y.find(M=>M.maintenance_step_id===De))==null?void 0:Io.maintenance_step_status).map(M=>e.jsx("option",{value:M,children:M},M))]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>mn(),disabled:Ne,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{const M=y.find(he=>he.maintenance_step_id===De);M&&vc(M)},disabled:Ne||!ze,children:Ne?"Saving...":"Save"})]})]})}),document.body),tt&&Ze&&e.jsxs("div",{className:"card",style:{position:"fixed",right:20,bottom:20,zIndex:50,width:520,padding:"var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12,alignItems:"center",marginBottom:10},children:[e.jsx("div",{style:{fontWeight:700},children:"Remove component"}),e.jsx("button",{className:"btn btn-xs btn-secondary",style:{padding:"0.2rem 0.45rem",fontSize:12},onClick:mr,disabled:$t,children:"Close"})]}),e.jsxs("div",{style:{fontSize:12,opacity:.85,marginBottom:12},children:["Step: ",e.jsx("b",{children:Ze.maintenance_step_id})]}),Ra?e.jsx("div",{style:{fontSize:13,opacity:.85},children:"Loading components..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[e.jsx("label",{className:"form-label",children:"Component"}),e.jsxs("select",{className:"form-input",value:qe&&ht?`${qe}:${ht}`:"",onChange:M=>{const he=M.target.value;if(!he){ja(""),aa("");return}const[Ue,Ve]=he.split(":");ja(Ue),aa(Ve)},children:[e.jsx("option",{value:"",children:"Select component..."}),((Uo=We.stock_items)==null?void 0:Uo.length)>0&&e.jsx("optgroup",{label:"Stock items",children:We.stock_items.map(M=>e.jsxs("option",{value:`stock_item:${M.stock_item_id}`,children:[M.stock_item_inventory_number?`${M.stock_item_inventory_number} - `:"",M.stock_item_name||`Stock item ${M.stock_item_id}`]},`stock_item:${M.stock_item_id}`))}),((qo=We.consumables)==null?void 0:qo.length)>0&&e.jsx("optgroup",{label:"Consumables",children:We.consumables.map(M=>e.jsxs("option",{value:`consumable:${M.consumable_id}`,children:[M.consumable_inventory_number?`${M.consumable_inventory_number} - `:"",M.consumable_name||`Consumable ${M.consumable_id}`]},`consumable:${M.consumable_id}`))})]})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[e.jsx("label",{className:"form-label",children:"Move removed component to (maintenance room)"}),e.jsxs("select",{className:"form-input",value:it,onChange:M=>Ht(M.target.value),children:[e.jsx("option",{value:"",children:"Select room..."}),pa.map(M=>e.jsxs("option",{value:M.room_id,children:[M.room_name,M.room_type_label?` (${M.room_type_label})`:""]},M.room_id))]})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end",marginTop:"var(--space-3)"},children:[e.jsx("button",{className:"btn btn-xs btn-secondary",style:{padding:"0.2rem 0.45rem",fontSize:12},onClick:mr,disabled:$t,children:"Cancel"}),e.jsx("button",{className:"btn btn-xs btn-danger",style:{padding:"0.2rem 0.45rem",fontSize:12},onClick:bc,disabled:$t||!qe||!ht,children:$t?"Removing...":"Remove"})]})]})]}),Ut&&Ka&&gl.createPortal(e.jsx("div",{className:"modal-overlay",onClick:()=>pr(),children:e.jsxs("div",{className:"modal",onClick:M=>M.stopPropagation(),style:{maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Update asset condition"}),e.jsx("button",{className:"modal-close",onClick:()=>pr(),disabled:Pt,children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",style:{overflowY:"auto",flex:1,minHeight:0},children:[e.jsxs("div",{style:{fontSize:12,opacity:.85,marginBottom:12},children:["Step: ",e.jsx("b",{children:Ka.maintenance_step_id})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[e.jsx("label",{className:"form-label",children:"Condition"}),e.jsxs("select",{className:"form-input",value:Ba,onChange:M=>Xt(M.target.value),disabled:Pt,children:[e.jsx("option",{value:"",children:"Select condition..."}),$a.map(M=>e.jsx("option",{value:M.condition_id,children:M.condition_label||M.condition_code||M.condition_id},M.condition_id))]})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[e.jsx("label",{className:"form-label",children:"Notes"}),e.jsx("textarea",{className:"form-input",rows:3,value:yt,onChange:M=>Ct(M.target.value),disabled:Pt})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[e.jsx("label",{className:"form-label",children:"Cosmetic issues"}),e.jsx("input",{className:"form-input",value:Kt,onChange:M=>ha(M.target.value),disabled:Pt})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[e.jsx("label",{className:"form-label",children:"Functional issues"}),e.jsx("input",{className:"form-input",value:$s,onChange:M=>Ia(M.target.value),disabled:Pt})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[e.jsx("label",{className:"form-label",children:"Recommendation"}),e.jsx("input",{className:"form-input",value:Pa,onChange:M=>ya(M.target.value),disabled:Pt})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:pr,disabled:Pt,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:yc,disabled:Pt||!Ba,children:Pt?"Saving...":"Save"})]})]})}),document.body),sa&&Yt&&gl.createPortal(e.jsx("div",{className:"modal-overlay",onClick:()=>$r(),children:e.jsxs("div",{className:"modal",onClick:M=>M.stopPropagation(),style:{maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column",width:680},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Queue attribute changes"}),e.jsx("button",{className:"modal-close",onClick:()=>$r(),disabled:ra,children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",style:{overflowY:"auto",flex:1,minHeight:0},children:[e.jsxs("div",{style:{fontSize:12,opacity:.85,marginBottom:12},children:["Step: ",e.jsx("b",{children:Yt.maintenance_step_id})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[e.jsx("label",{className:"form-label",children:"Target"}),e.jsxs("select",{className:"form-input",value:gt,onChange:M=>{Ya(M.target.value),Wt(""),Va(""),Ft(null)},disabled:ra,children:[e.jsx("option",{value:"asset",children:"Asset"}),e.jsx("option",{value:"stock_item",children:"Stock item (composing asset)"}),e.jsx("option",{value:"consumable",children:"Consumable (composing asset)"})]})]}),(gt==="stock_item"||gt==="consumable")&&e.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[e.jsx("label",{className:"form-label",children:"Component"}),e.jsxs("select",{className:"form-input",value:na,onChange:M=>{Wt(M.target.value),Ft(null)},disabled:ra,children:[e.jsx("option",{value:"",children:"Select component..."}),(gt==="stock_item"?Ta.stock_items:Ta.consumables).map(M=>e.jsx("option",{value:gt==="stock_item"?M.stock_item_id:M.consumable_id,children:gt==="stock_item"?`${M.stock_item_inventory_number?`${M.stock_item_inventory_number} - `:""}${M.stock_item_name||`Stock item ${M.stock_item_id}`}`:`${M.consumable_inventory_number?`${M.consumable_inventory_number} - `:""}${M.consumable_name||`Consumable ${M.consumable_id}`}`},gt==="stock_item"?M.stock_item_id:M.consumable_id))]})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[e.jsx("label",{className:"form-label",children:"Attribute"}),e.jsxs("select",{className:"form-input",value:Wa,onChange:M=>{Va(M.target.value),Ft(null)},disabled:ra,children:[e.jsx("option",{value:"",children:"Select attribute..."}),(gt==="asset"?Ua:gt==="stock_item"?ws:Ys).map(M=>{const he=gt==="asset"?M.asset_attribute_definition_id:gt==="stock_item"?M.stock_item_attribute_definition_id:M.consumable_attribute_definition_id;return e.jsxs("option",{value:he,children:[M.description||`Attribute ${he}`,M.unit?` (${M.unit})`:""]},he)})]}),Wa&&e.jsxs("div",{style:{marginTop:8,fontSize:12,opacity:.85},children:[e.jsx("b",{children:"Current value:"})," ",v?"Loading...":Ws?(()=>{const M=Ws;return M.value_string!=null?M.value_string:M.value_number!=null?String(M.value_number):M.value_date!=null?M.value_date:M.value_bool!=null?String(M.value_bool):"-"})():e.jsx("span",{style:{opacity:.6},children:"Not set"})]})]}),(()=>{const M=dr(),he=zl(M);return he==="bool"?e.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[e.jsx("label",{className:"form-label",children:"Value"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("input",{type:"checkbox",checked:!!ee,onChange:Ue=>je(Ue.target.checked),disabled:ra}),e.jsx("div",{style:{fontSize:12,opacity:.85},children:"Set to true/false"})]})]}):he==="date"?e.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[e.jsx("label",{className:"form-label",children:"Value"}),e.jsx("input",{type:"date",className:"form-input",value:qt,onChange:Ue=>ka(Ue.target.value),disabled:ra})]}):he==="number"?e.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[e.jsx("label",{className:"form-label",children:"Value"}),e.jsx("input",{type:"number",className:"form-input",value:Le,onChange:Ue=>et(Ue.target.value),disabled:ra})]}):e.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[e.jsx("label",{className:"form-label",children:"Value"}),e.jsx("input",{className:"form-input",value:es,onChange:Ue=>ts(Ue.target.value),disabled:ra})]})})(),ks&&e.jsx("div",{className:ks.type==="success"?"badge badge-success":"badge badge-danger",style:{padding:"var(--space-3)",width:"100%",marginBottom:10,borderRadius:"var(--radius-md)",display:"block"},children:ks.text}),Array.isArray(Aa)&&Aa.length>0&&e.jsxs("div",{style:{marginTop:12},children:[e.jsx("div",{style:{fontWeight:700,marginBottom:6},children:"Queued (local)"}),e.jsx("div",{style:{fontSize:12,opacity:.85,marginBottom:8},children:'These will be sent to the server when you click "Submit".'}),e.jsx("div",{className:"table-container rounded border overflow-hidden",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)"},children:e.jsxs("table",{className:"data-table mb-0",children:[e.jsx("thead",{style:{backgroundColor:"var(--color-bg-secondary)"},children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"Target"}),e.jsx("th",{className:"px-4 py-2",children:"Definition"}),e.jsx("th",{className:"px-4 py-2",children:"Value"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Action"})]})}),e.jsx("tbody",{children:Aa.map((M,he)=>e.jsxs("tr",{className:"border-t",style:{borderColor:"var(--color-border)"},children:[e.jsxs("td",{className:"px-4 py-2",children:[M.target_type,M.target_id?` #${M.target_id}`:""]}),e.jsx("td",{className:"px-4 py-2",children:M.attribute_definition_id}),e.jsx("td",{className:"px-4 py-2",children:M.value_string!=null?M.value_string:M.value_number!=null?String(M.value_number):M.value_date!=null?M.value_date:String(!!M.value_bool)}),e.jsx("td",{className:"px-4 py-2 text-right",children:e.jsx("button",{className:"btn btn-xs btn-danger",style:{padding:"0.2rem 0.45rem",fontSize:12},onClick:()=>as(Ue=>Ue.filter((Ve,rt)=>rt!==he)),disabled:ra,children:"Remove"})})]},`chg-${he}`))})]})})]})]}),e.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"space-between",gap:10},children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:$r,disabled:ra,children:"Close"}),e.jsxs("div",{style:{display:"flex",gap:10},children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:qa,disabled:ra,children:"Add to queue"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:un,disabled:ra,children:ra?"Submitting...":"Submit"})]})]})]})}),document.body)]})},Uj=()=>{const n=Dt(),{maintenanceId:l}=Or(),{user:d,isSuperuser:u}=Ja(),[m,p]=c.useState(null),[h,g]=c.useState([]),[b,y]=c.useState(!0),[x,_]=c.useState(""),[N,I]=c.useState(!1),[w,O]=c.useState(!1),C=c.useMemo(()=>{var B;return u?!0:((B=d==null?void 0:d.roles)==null?void 0:B.some(W=>W.role_code==="maintenance_chief"||W.role_code==="exploitation_chief"))||!1},[u,d]),D=c.useMemo(()=>{var Q;if(C)return!0;const B=(Q=d==null?void 0:d.person)==null?void 0:Q.person_id,W=m==null?void 0:m.performed_by_person;return!B||!W?!1:Number(B)===Number(W)},[C,d,m]);c.useEffect(()=>{(async()=>{try{y(!0),_("");const W=Number(l);if(!W||Number.isNaN(W)){_("Invalid maintenance id");return}const[Q,P]=await Promise.all([Sl.getById(W),Zs.getAll({maintenance:W})]);p(Q),g(Array.isArray(P)?P:[])}catch(W){console.error(W),_("Failed to load maintenance")}finally{y(!1)}})()},[l]);const te=c.useMemo(()=>{const B=Array.isArray(h)?h:[];if(B.length===0)return!0;const W=new Set(["done","failed (to be sent to a higher level)","cancelled"]);return B.every(Q=>W.has(Q==null?void 0:Q.maintenance_step_status))},[h]),E=async B=>{var W,Q;try{if(!l)return;I(!0),_("");const P=Number(l),ge=await Sl.end(P,{is_successful:B});p(ge),O(!1)}catch(P){console.error(P),_(((Q=(W=P.response)==null?void 0:W.data)==null?void 0:Q.error)||"Failed to end maintenance")}finally{I(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Maintenance Steps"}),e.jsxs("p",{className:"page-subtitle",children:["Maintenance #",l,m!=null&&m.asset_name?` - ${m.asset_name}`:""]})]}),e.jsx("div",{className:"d-flex",style:{gap:"0.5rem"},children:e.jsx("button",{className:"btn btn-secondary",onClick:()=>n("/dashboard/maintenances"),title:"Back","aria-label":"Back",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})})})]})}),x&&e.jsx("div",{className:"alert alert-error mb-4",children:x}),b?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"loading-spinner",style:{margin:"0 auto"}}),e.jsx("p",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading steps..."})]}):e.jsx(Ij,{maintenanceId:Number(l),maintenancePerformedBy:m==null?void 0:m.performed_by_person,maintenanceEnded:!!(m!=null&&m.end_datetime),isChief:C,onStepsChange:B=>g(Array.isArray(B)?B:[]),canShowEndMaintenanceButton:te,canEndMaintenance:D,endMaintenanceDisabled:b||N||!!(m!=null&&m.end_datetime)||!D,onEndMaintenance:()=>O(!0)}),w&&e.jsx("div",{className:"modal-overlay",onClick:()=>N?null:O(!1),children:e.jsxs("div",{className:"modal",onClick:B=>B.stopPropagation(),style:{maxWidth:520},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"End maintenance"}),e.jsx("button",{className:"modal-close",onClick:()=>N?null:O(!1),children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("div",{className:"modal-body",style:{display:"flex",flexDirection:"column",gap:10},children:e.jsx("div",{children:"Was the maintenance successful?"})}),e.jsxs("div",{className:"modal-footer",style:{display:"flex",flexDirection:"column",gap:12},children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>E(!0),disabled:N,style:{width:"100%",padding:"12px"},children:"Yes"}),e.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"center"},children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>E(null),disabled:N,style:{flex:1},children:"I'll decide later"}),e.jsx("button",{className:"btn btn-danger",onClick:()=>E(!1),disabled:N,style:{flex:1},children:"No"})]})]})]})})]})},qj=()=>{const{user:n,isSuperuser:l}=Ja(),d=({label:Ne,date:Qe})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:Qe?"var(--color-success)":"var(--color-border)",flexShrink:0}}),e.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)"},children:Ne}),e.jsx("span",{style:{fontSize:"var(--font-size-sm)",fontWeight:500,color:Qe?"var(--color-text-primary)":"var(--color-text-muted)"},children:Qe||"Pending"})]})]}),[u,m]=c.useState([]),[p,h]=c.useState(!0),[g,b]=c.useState(""),[y,x]=c.useState(!1),[_,N]=c.useState(null),[I,w]=c.useState(!1),[O,C]=c.useState(null),[D,te]=c.useState([]),[E,B]=c.useState([]),[W,Q]=c.useState([]),[P,ge]=c.useState(""),[F,R]=c.useState(""),[ae,ue]=c.useState(!1),[Re,xe]=c.useState(null),[ne,S]=c.useState(!1),[L,Z]=c.useState(null),[G,fe]=c.useState(!1),[k,$]=c.useState(!1),[re,U]=c.useState(null),[ye,be]=c.useState(""),T=c.useMemo(()=>{var Ne;return l?!0:((Ne=n==null?void 0:n.roles)==null?void 0:Ne.some(Qe=>Qe.role_code==="asset_responsible"))||!1},[l,n]),le=async()=>{var Ne,Qe;try{h(!0),b("");const $e=await sr.getAll();m(Array.isArray($e)?$e:[])}catch($e){console.error($e),b(((Qe=(Ne=$e.response)==null?void 0:Ne.data)==null?void 0:Qe.error)||"Failed to load external maintenances")}finally{h(!1)}},Me=async()=>{var Ne,Qe;if(_){if(!ye){U({type:"error",text:"Please select a destination room."});return}try{$(!0),U(null);const $e=await sr.confirmReceivedByCompany(_.external_maintenance_id,Number(ye));U({type:"success",text:"Confirmed as received by company."}),N($e),fe(!1),await le()}catch($e){console.error($e),U({type:"error",text:((Qe=(Ne=$e.response)==null?void 0:Ne.data)==null?void 0:Qe.error)||"Failed to confirm received by company."})}finally{$(!1)}}},Ge=async()=>{var Ne,Qe;if(_)try{S(!0),Z(null);const $e=await sr.confirmSentToCompany(_.external_maintenance_id);Z({type:"success",text:"Confirmed as sent to company."}),N($e),await le()}catch($e){console.error($e),Z({type:"error",text:((Qe=(Ne=$e.response)==null?void 0:Ne.data)==null?void 0:Qe.error)||"Failed to confirm sent to company."})}finally{S(!1)}},De=async()=>{var Ne,Qe;if(_)try{ue(!0),xe(null);const $e=await sr.confirmReceivedByProvider(_.external_maintenance_id);xe({type:"success",text:"Confirmed as received by maintenance provider."}),N($e),await le()}catch($e){console.error($e),xe({type:"error",text:((Qe=(Ne=$e.response)==null?void 0:Ne.data)==null?void 0:Qe.error)||"Failed to confirm receipt."})}finally{ue(!1)}};c.useEffect(()=>{le()},[]);const Ke=Ne=>{N(Ne),C(null),xe(null),Z(null),ge(""),R(""),fe(!1),$(!1),U(null),be(""),x(!0)},ze=()=>{N(null),x(!1),w(!1),C(null),ue(!1),xe(null),S(!1),Z(null),ge(""),R(""),fe(!1),$(!1),U(null),be("")};c.useEffect(()=>{(async()=>{try{if(!y)return;const[Qe,$e]=await Promise.all([Y_.getAll(),Ks.getAll()]);te(Array.isArray(Qe)?Qe:[]);const Ce=Array.isArray($e)?$e:[];Q(Ce);const Be=Ce.filter(X=>(X==null?void 0:X.room_type_label)==="External Maintenance Center");B(Be)}catch(Qe){console.error(Qe),te([]),B([]),Q([])}})()},[y]);const st=async()=>{var Ne,Qe;if(_){if(!P){C({type:"error",text:"Please select provider."});return}if(!F){C({type:"error",text:"Please select destination room."});return}try{w(!0),C(null);const $e=await sr.sendToProvider(_.external_maintenance_id,Number(P),Number(F));C({type:"success",text:"Asset sent to external maintenance provider."}),N($e),await le()}catch($e){console.error($e),C({type:"error",text:((Qe=(Ne=$e.response)==null?void 0:Ne.data)==null?void 0:Qe.error)||"Failed to send to provider."})}finally{w(!1)}}};return T?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"External Maintenances"}),e.jsx("p",{className:"page-subtitle",children:"Consult external maintenance records"})]}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>le(),disabled:p,children:"Refresh"})]})}),g&&e.jsx("div",{className:"alert alert-error mb-4",children:g}),p?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"loading-spinner",style:{margin:"0 auto"}}),e.jsx("p",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading external maintenances..."})]}):u.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No external maintenances found."})}):e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"External Maintenance"}),e.jsx("th",{children:"Maintenance"}),e.jsx("th",{children:"Asset"}),e.jsx("th",{className:"text-right",children:"Actions"})]})}),e.jsx("tbody",{children:u.map(Ne=>e.jsxs("tr",{children:[e.jsxs("td",{children:["#",Ne.external_maintenance_id]}),e.jsxs("td",{children:["#",Ne.maintenance]}),e.jsx("td",{children:Ne.maintenance_asset_name||Ne.maintenance_asset_id||"-"}),e.jsx("td",{className:"text-right",children:e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>Ke(Ne),children:"View"})})]},Ne.external_maintenance_id))})]})})})}),y&&_&&e.jsx("div",{className:"modal-overlay",onClick:()=>ze(),children:e.jsxs("div",{className:"modal",onClick:Ne=>Ne.stopPropagation(),style:{maxWidth:680},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"External Maintenance Details"}),e.jsx("button",{className:"modal-close",onClick:()=>ze(),children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("div",{className:"modal-body",style:{padding:"var(--space-5)"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"var(--space-4)"},children:[e.jsxs("div",{className:"card",style:{background:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-lg)",padding:"var(--space-4)"},children:[e.jsx("div",{style:{fontSize:"var(--font-size-xs)",fontWeight:600,color:"var(--color-text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"var(--space-3)"},children:"Asset Information"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-3)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-muted)",marginBottom:2},children:"External Maintenance ID"}),e.jsxs("div",{style:{fontWeight:500},children:["#",_.external_maintenance_id]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-muted)",marginBottom:2},children:"Maintenance ID"}),e.jsxs("div",{style:{fontWeight:500},children:["#",_.maintenance]})]}),e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-muted)",marginBottom:2},children:"Asset"}),e.jsx("div",{style:{fontWeight:500},children:_.maintenance_asset_name||_.maintenance_asset_id||"-"})]})]})]}),e.jsxs("div",{className:"card",style:{background:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-lg)",padding:"var(--space-4)"},children:[e.jsx("div",{style:{fontSize:"var(--font-size-xs)",fontWeight:600,color:"var(--color-text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"var(--space-3)"},children:"Timeline"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"var(--space-3)"},children:[e.jsx(d,{label:"Sent to external maintenance",date:_.item_sent_to_external_maintenance_datetime}),e.jsx(d,{label:"Received by maintenance provider",date:_.item_received_by_maintenance_provider_datetime}),e.jsx(d,{label:"Sent to company",date:_.item_sent_to_company_datetime}),e.jsx(d,{label:"Received by company",date:_.item_received_by_company_datetime})]})]})]})}),e.jsxs("div",{style:{padding:"0 var(--space-5) var(--space-5)",display:"flex",flexDirection:"column",gap:"var(--space-4)"},children:[T&&!_.item_sent_to_external_maintenance_datetime&&e.jsxs("div",{className:"card",style:{background:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-lg)",padding:"var(--space-4)"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"var(--space-3)"},children:"Send to External Maintenance Provider"}),O&&e.jsx("div",{className:`alert ${O.type==="error"?"alert-error":"alert-success"} mb-3`,children:O.text}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-3)"},children:[e.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[e.jsx("label",{className:"form-label",children:"Provider"}),e.jsxs("select",{className:"form-input",value:P,onChange:Ne=>ge(Ne.target.value),disabled:I||!!_.item_sent_to_external_maintenance_datetime,children:[e.jsx("option",{value:"",children:"Select provider..."}),D.map(Ne=>e.jsx("option",{value:Ne.external_maintenance_provider_id,children:Ne.external_maintenance_provider_name||`Provider ${Ne.external_maintenance_provider_id}`},Ne.external_maintenance_provider_id))]})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[e.jsx("label",{className:"form-label",children:"Destination Room"}),e.jsxs("select",{className:"form-input",value:F,onChange:Ne=>R(Ne.target.value),disabled:I||!!_.item_sent_to_external_maintenance_datetime,children:[e.jsx("option",{value:"",children:"Select room..."}),E.map(Ne=>e.jsx("option",{value:Ne.room_id,children:Ne.room_name},Ne.room_id))]})]})]}),e.jsx("button",{className:"btn btn-primary",onClick:()=>st(),disabled:I||!P||!F,style:{marginTop:"var(--space-3)"},children:I?"Sending...":"Send"})]}),T&&_.item_sent_to_external_maintenance_datetime&&!_.item_received_by_maintenance_provider_datetime&&e.jsxs("div",{className:"card",style:{background:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-lg)",padding:"var(--space-4)"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"var(--space-3)"},children:"Confirm Received by Maintenance Provider"}),Re&&e.jsx("div",{className:`alert ${Re.type==="error"?"alert-error":"alert-success"} mb-3`,children:Re.text}),e.jsx("button",{className:"btn btn-primary",onClick:()=>De(),disabled:ae,children:ae?"Confirming...":"Confirm Received"})]}),T&&_.item_received_by_maintenance_provider_datetime&&!_.item_sent_to_company_datetime&&e.jsxs("div",{className:"card",style:{background:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-lg)",padding:"var(--space-4)"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"var(--space-3)"},children:"Confirm Asset Sent by External Maintenance Provider"}),L&&e.jsx("div",{className:`alert ${L.type==="error"?"alert-error":"alert-success"} mb-3`,children:L.text}),e.jsx("button",{className:"btn btn-primary",onClick:()=>Ge(),disabled:ne,children:ne?"Confirming...":"Confirm Asset Sent"})]}),T&&_.item_sent_to_company_datetime&&!_.item_received_by_company_datetime&&e.jsxs("div",{className:"card",style:{background:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-lg)",padding:"var(--space-4)"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:"var(--space-3)"},children:"Confirm Asset Received by Company"}),re&&e.jsx("div",{className:`alert ${re.type==="error"?"alert-error":"alert-success"} mb-3`,children:re.text}),e.jsx("button",{className:"btn btn-primary",onClick:()=>{U(null),be(""),fe(!0)},disabled:k,children:"Confirm Asset Received"})]})]}),G&&e.jsx("div",{className:"modal-overlay",onClick:()=>fe(!1),children:e.jsxs("div",{className:"modal",onClick:Ne=>Ne.stopPropagation(),style:{maxWidth:480},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Move Asset to Room"}),e.jsx("button",{className:"modal-close",onClick:()=>fe(!1),children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",children:[re&&e.jsx("div",{className:`alert ${re.type==="error"?"alert-error":"alert-success"} mb-3`,children:re.text}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Destination Room"}),e.jsxs("select",{className:"form-input",value:ye,onChange:Ne=>be(Ne.target.value),disabled:k,children:[e.jsx("option",{value:"",children:"Select room..."}),W.map(Ne=>e.jsxs("option",{value:Ne.room_id,children:[Ne.room_name,Ne.room_type_label?` - ${Ne.room_type_label}`:""]},Ne.room_id))]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>fe(!1),disabled:k,children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>Me(),disabled:k||!ye,children:k?"Confirming...":"Confirm & Move"})]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"btn btn-secondary",onClick:()=>ze(),children:"Close"})})]})})]}):e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"You are not allowed to view external maintenances."})})},Fj=({maintenances:n,steps:l})=>{const[d,u]=c.useState({}),m=y=>{u(x=>({...x,[y]:!x[y]}))},p=c.useMemo(()=>{if(!Array.isArray(n)||!Array.isArray(l))return{maintenances:[],stepsByMaintenance:{}};const y={};for(const _ of l){const N=_.maintenance;y[N]||(y[N]=[]),y[N].push(_)}return{maintenances:[...n].sort((_,N)=>{const I=_.start_datetime?new Date(_.start_datetime).getTime():0;return(N.start_datetime?new Date(N.start_datetime).getTime():0)-I}),stepsByMaintenance:y}},[n,l]),h=y=>y?new Date(y).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",g=y=>{if(!y)return"var(--color-text-secondary)";const x=y.toLowerCase();return x.includes("done")||x==="completed"?"var(--color-success)":x.includes("fail")||x.includes("cancel")?"var(--color-error)":x.includes("progress")||x.includes("start")?"var(--color-info)":x.includes("pending")||x.includes("wait")?"var(--color-warning)":"var(--color-text-secondary)"},b=y=>{if(!y)return"";const x=y.toLowerCase();return x.includes("done")?"":x.includes("fail")?"":x.includes("cancel")?"":x.includes("progress")||x.includes("start")?"":(x.includes("pending")||x.includes("wait"),"")};return p.maintenances.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{className:"empty-state-title",children:"No Maintenance History"}),e.jsx("p",{className:"empty-state-text",children:"No maintenance records found for assets you reported problems on."})]}):e.jsxs("div",{className:"maintenance-timeline",children:[e.jsx("style",{children:`
                .maintenance-timeline {
                    position: relative;
                    padding-left: 2rem;
                }
                .maintenance-timeline::before {
                    content: '';
                    position: absolute;
                    left: 0.75rem;
                    top: 0;
                    bottom: 0;
                    width: 2px;
                    background: var(--color-border);
                }
                .timeline-entry {
                    position: relative;
                    padding-bottom: 1.5rem;
                }
                .timeline-entry:last-child {
                    padding-bottom: 0;
                }
                .timeline-marker {
                    position: absolute;
                    left: -1.5rem;
                    top: 0.25rem;
                    width: 1.5rem;
                    height: 1.5rem;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 0.75rem;
                    font-weight: 600;
                    background: var(--color-bg-primary);
                    border: 2px solid var(--color-border);
                    z-index: 1;
                }
                .timeline-marker.maintenance-marker {
                    background: var(--color-primary);
                    border-color: var(--color-primary);
                    color: white;
                }
                .timeline-marker.step-marker {
                    background: var(--color-bg-primary);
                    border-color: var(--color-border);
                    color: var(--color-text-secondary);
                }
                .timeline-content {
                    background: var(--color-bg-secondary);
                    border: 1px solid var(--color-border);
                    border-radius: var(--radius-md);
                    padding: 1rem;
                    margin-left: 0.5rem;
                }
                .timeline-content.maintenance-content {
                    background: var(--color-bg-tertiary);
                    border-left: 3px solid var(--color-primary);
                }
                .timeline-content.step-content {
                    background: var(--color-bg-secondary);
                    margin-left: 1rem;
                }
                .timeline-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: flex-start;
                    margin-bottom: 0.5rem;
                    flex-wrap: wrap;
                    gap: 0.5rem;
                }
                .timeline-title {
                    font-weight: 600;
                    font-size: var(--font-size-md);
                    color: var(--color-text-primary);
                    margin: 0;
                }
                .timeline-badge {
                    display: inline-flex;
                    align-items: center;
                    padding: 0.25rem 0.5rem;
                    border-radius: var(--radius-sm);
                    font-size: var(--font-size-xs);
                    font-weight: 500;
                    background: var(--color-bg-secondary);
                    color: var(--color-text-secondary);
                }
                .timeline-times {
                    display: flex;
                    flex-wrap: wrap;
                    gap: 1rem;
                    font-size: var(--font-size-sm);
                    color: var(--color-text-secondary);
                    margin-top: 0.5rem;
                }
                .timeline-time-item {
                    display: flex;
                    flex-direction: column;
                    gap: 0.125rem;
                }
                .timeline-time-label {
                    font-size: var(--font-size-xs);
                    text-transform: uppercase;
                    letter-spacing: 0.05em;
                    opacity: 0.7;
                }
                .timeline-time-value {
                    font-weight: 500;
                }
                .timeline-performer {
                    margin-top: 0.5rem;
                    font-size: var(--font-size-sm);
                    color: var(--color-text-secondary);
                }
                .timeline-performer strong {
                    color: var(--color-text-primary);
                }
                .timeline-step-description {
                    margin-top: 0.25rem;
                    font-size: var(--font-size-sm);
                    color: var(--color-text-primary);
                }
            `}),p.maintenances.map(y=>{const x=d[y.maintenance_id],_=p.stepsByMaintenance[y.maintenance_id]||[],N=[..._].sort((I,w)=>I.maintenance_step_id-w.maintenance_step_id);return e.jsxs("div",{className:"timeline-entry",children:[e.jsx("div",{className:"timeline-marker maintenance-marker",children:"M"}),e.jsxs("div",{className:"timeline-content maintenance-content",style:{cursor:"pointer"},onClick:()=>m(y.maintenance_id),children:[e.jsxs("div",{className:"timeline-header",children:[e.jsxs("h4",{className:"timeline-title",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{display:"inline-block",transition:"transform 0.2s",transform:x?"rotate(90deg)":"rotate(0deg)"},children:""}),"Maintenance #",y.maintenance_id,y.description&&` - ${y.description}`]}),y.maintenance_status&&e.jsx("span",{className:"timeline-badge",style:{backgroundColor:g(y.maintenance_status),color:"white"},children:y.maintenance_status})]}),e.jsxs("div",{className:"timeline-times",children:[e.jsxs("div",{className:"timeline-time-item",children:[e.jsx("span",{className:"timeline-time-label",children:"Started"}),e.jsx("span",{className:"timeline-time-value",children:h(y.start_datetime)})]}),e.jsxs("div",{className:"timeline-time-item",children:[e.jsx("span",{className:"timeline-time-label",children:"Ended"}),e.jsx("span",{className:"timeline-time-value",children:h(y.end_datetime)})]})]}),y.performed_by_person_name&&e.jsxs("div",{className:"timeline-performer",children:[e.jsx("strong",{children:"Technician:"})," ",y.performed_by_person_name]}),e.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:[_.length," step",_.length!==1?"s":"","  Click to ",x?"collapse":"expand"]})]}),x&&N.length>0&&e.jsx("div",{style:{marginTop:"0.5rem",paddingLeft:"1rem"},children:N.map(I=>{var te,E;const w=g(I.maintenance_step_status),O=b(I.maintenance_step_status),C=((te=I.maintenance_typical_step)==null?void 0:te.description)||I.maintenance_step_status||"Step",D=(E=I.person)!=null&&E.first_name?`${I.person.first_name} ${I.person.last_name||""}`.trim():null;return e.jsxs("div",{className:"timeline-entry",children:[e.jsx("div",{className:"timeline-marker step-marker",style:{borderColor:w,color:w},children:O}),e.jsxs("div",{className:"timeline-content step-content",children:[e.jsxs("div",{className:"timeline-header",children:[e.jsxs("h4",{className:"timeline-title",children:["Step #",I.maintenance_step_id,": ",C]}),I.maintenance_step_status&&e.jsx("span",{className:"timeline-badge",style:{backgroundColor:w,color:"white"},children:I.maintenance_step_status})]}),e.jsxs("div",{className:"timeline-times",children:[e.jsxs("div",{className:"timeline-time-item",children:[e.jsx("span",{className:"timeline-time-label",children:"Started"}),e.jsx("span",{className:"timeline-time-value",children:h(I.start_datetime)})]}),e.jsxs("div",{className:"timeline-time-item",children:[e.jsx("span",{className:"timeline-time-label",children:"Ended"}),e.jsx("span",{className:"timeline-time-value",children:h(I.end_datetime)})]})]}),D&&e.jsxs("div",{className:"timeline-performer",children:[e.jsx("strong",{children:"Performer:"})," ",D]})]})]},`step-${I.maintenance_step_id}`)})})]},`maintenance-${y.maintenance_id}`)})]})},Hj=()=>{const{assetId:n}=Or(),l=Dt(),[d,u]=c.useState(!0),[m,p]=c.useState(""),[h,g]=c.useState(null),[b,y]=c.useState([]),[x,_]=c.useState([]);return c.useEffect(()=>{n&&(async()=>{var I,w;try{u(!0),p("");const O=await J_.getByAssetId(n);if(y(O.maintenances||[]),_(O.steps||[]),O.maintenances&&O.maintenances.length>0){const C=O.maintenances[0];g({asset_id:n,asset_name:C.asset_name})}else g({asset_id:n,asset_name:null})}catch(O){console.error(O);const C=((w=(I=O==null?void 0:O.response)==null?void 0:I.data)==null?void 0:w.error)||(O==null?void 0:O.message)||"Failed to load maintenance timeline";p(typeof C=="string"?C:"Failed to load maintenance timeline")}finally{u(!1)}})()},[n]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Maintenance Timeline"}),e.jsxs("p",{className:"page-subtitle",children:["Asset #",n,h!=null&&h.asset_name?` - ${h.asset_name}`:""]})]}),e.jsx("div",{className:"d-flex",style:{gap:"0.5rem"},children:e.jsx("button",{className:"btn btn-secondary",onClick:()=>l("/dashboard/my-items"),title:"Back to My Items","aria-label":"Back to My Items",children:e.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})})})]})}),m&&e.jsx("div",{className:"alert alert-error mb-4",children:m}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h2",{className:"card-title",children:"Maintenance History"}),e.jsx("p",{className:"card-subtitle",children:"View all maintenance operations and their steps for this asset"})]}),e.jsx("div",{className:"card-body",style:{padding:"var(--space-6)"},children:d?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"loading-spinner",style:{margin:"0 auto"}}),e.jsx("p",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading maintenance timeline..."})]}):e.jsx(Fj,{maintenances:b,steps:x})})]})]})},$j=({children:n})=>{const{isAuthenticated:l}=Ja();return l?n:e.jsx(Js,{to:"/login",replace:!0})},mt=({children:n,allowedRoles:l})=>{const{user:d,isSuperuser:u}=Ja();if(u)return n;const m=Array.isArray(d==null?void 0:d.roles)?d.roles.map(h=>h.role_code).filter(Boolean):[];return Array.isArray(l)&&l.some(h=>m.includes(h))?n:e.jsx(Js,{to:"/dashboard",replace:!0})},Yj=({children:n})=>{const{isAuthenticated:l}=Ja();return l?e.jsx(Js,{to:"/dashboard",replace:!0}):n};function Wj(){return e.jsx(P_,{children:e.jsx(rx,{children:e.jsxs(zg,{children:[e.jsx(nt,{path:"/login",element:e.jsx(Yj,{children:e.jsx(ej,{})})}),e.jsxs(nt,{path:"/dashboard",element:e.jsx($j,{children:e.jsx(tj,{})}),children:[e.jsx(nt,{index:!0,element:e.jsx(aj,{})}),e.jsx(nt,{path:"persons",element:e.jsx(mt,{allowedRoles:[],children:e.jsx(sj,{})})}),e.jsx(nt,{path:"assets",element:e.jsx(mt,{allowedRoles:["asset_responsible","exploitation_chief"],children:e.jsx(Js,{to:"/dashboard/assets/types",replace:!0})})}),e.jsx(nt,{path:"assets/types",element:e.jsx(mt,{allowedRoles:["asset_responsible","exploitation_chief"],children:e.jsx(rj,{})})}),e.jsx(nt,{path:"assets/types/attributes",element:e.jsx(mt,{allowedRoles:["asset_responsible","exploitation_chief"],children:e.jsx(lj,{})})}),e.jsx(nt,{path:"assets/models",element:e.jsx(mt,{allowedRoles:["asset_responsible","exploitation_chief"],children:e.jsx(oj,{})})}),e.jsx(nt,{path:"assets/models/default-composition",element:e.jsx(mt,{allowedRoles:["asset_responsible","exploitation_chief"],children:e.jsx(ny,{})})}),e.jsx(nt,{path:"assets/models/:modelId/default-composition",element:e.jsx(mt,{allowedRoles:["asset_responsible","exploitation_chief"],children:e.jsx(ny,{})})}),e.jsx(nt,{path:"assets/models/:modelId/compatibility",element:e.jsx(mt,{allowedRoles:["asset_responsible","exploitation_chief"],children:e.jsx(cj,{})})}),e.jsx(nt,{path:"assets/instances",element:e.jsx(mt,{allowedRoles:["asset_responsible","exploitation_chief"],children:e.jsx(nj,{})})}),e.jsx(nt,{path:"assets/attribute-definitions",element:e.jsx(mt,{allowedRoles:["asset_responsible","exploitation_chief"],children:e.jsx(ij,{})})}),e.jsx(nt,{path:"maintenances",element:e.jsx(mt,{allowedRoles:["maintenance_chief","maintenance_technician"],children:e.jsx(dj,{})})}),e.jsx(nt,{path:"maintenances/:maintenanceId/steps",element:e.jsx(mt,{allowedRoles:["maintenance_chief","maintenance_technician"],children:e.jsx(Uj,{})})}),e.jsx(nt,{path:"stock-items",element:e.jsx(mt,{allowedRoles:["stock_consumable_responsible","exploitation_chief"],children:e.jsx(Js,{to:"/dashboard/stock-items/types",replace:!0})})}),e.jsx(nt,{path:"stock-items/types",element:e.jsx(mt,{allowedRoles:["stock_consumable_responsible","exploitation_chief"],children:e.jsx(mj,{})})}),e.jsx(nt,{path:"stock-items/types/attributes",element:e.jsx(mt,{allowedRoles:["stock_consumable_responsible","exploitation_chief"],children:e.jsx(pj,{})})}),e.jsx(nt,{path:"stock-items/models",element:e.jsx(mt,{allowedRoles:["stock_consumable_responsible","exploitation_chief"],children:e.jsx(fj,{})})}),e.jsx(nt,{path:"stock-items/models/:modelId/compatibility",element:e.jsx(mt,{allowedRoles:["stock_consumable_responsible","exploitation_chief"],children:e.jsx(hj,{})})}),e.jsx(nt,{path:"stock-items/instances",element:e.jsx(mt,{allowedRoles:["stock_consumable_responsible","exploitation_chief"],children:e.jsx(uj,{})})}),e.jsx(nt,{path:"stock-items/attribute-definitions",element:e.jsx(mt,{allowedRoles:["stock_consumable_responsible","exploitation_chief"],children:e.jsx(yj,{})})}),e.jsx(nt,{path:"consumables",element:e.jsx(mt,{allowedRoles:["stock_consumable_responsible","exploitation_chief"],children:e.jsx(Js,{to:"/dashboard/consumables/types",replace:!0})})}),e.jsx(nt,{path:"consumables/types",element:e.jsx(mt,{allowedRoles:["stock_consumable_responsible","exploitation_chief"],children:e.jsx(vj,{})})}),e.jsx(nt,{path:"consumables/types/attributes",element:e.jsx(mt,{allowedRoles:["stock_consumable_responsible","exploitation_chief"],children:e.jsx(gj,{})})}),e.jsx(nt,{path:"consumables/models",element:e.jsx(mt,{allowedRoles:["stock_consumable_responsible","exploitation_chief"],children:e.jsx(xj,{})})}),e.jsx(nt,{path:"consumables/models/:modelId/compatibility",element:e.jsx(mt,{allowedRoles:["stock_consumable_responsible","exploitation_chief"],children:e.jsx(_j,{})})}),e.jsx(nt,{path:"consumables/instances",element:e.jsx(mt,{allowedRoles:["stock_consumable_responsible","exploitation_chief"],children:e.jsx(bj,{})})}),e.jsx(nt,{path:"consumables/attribute-definitions",element:e.jsx(mt,{allowedRoles:["stock_consumable_responsible","exploitation_chief"],children:e.jsx(jj,{})})}),e.jsx(nt,{path:"my-items",element:e.jsx(Mj,{})}),e.jsx(nt,{path:"my-items/assets/:assetId/maintenance-timeline",element:e.jsx(Hj,{})}),e.jsx(nt,{path:"reports",element:e.jsx(mt,{allowedRoles:["maintenance_chief","exploitation_chief"],children:e.jsx(Bj,{})})}),e.jsx(nt,{path:"rooms",element:e.jsx(mt,{allowedRoles:[],children:e.jsx(Sj,{})})}),e.jsx(nt,{path:"positions",element:e.jsx(mt,{allowedRoles:[],children:e.jsx(Cj,{})})}),e.jsx(nt,{path:"organizational-structure",element:e.jsx(mt,{allowedRoles:[],children:e.jsx(Rj,{})})}),e.jsx(nt,{path:"attribution-orders",element:e.jsx(mt,{allowedRoles:["asset_responsible"],children:e.jsx(Tj,{})})}),e.jsx(nt,{path:"attribution-orders/assets/:rowId/included-items",element:e.jsx(mt,{allowedRoles:["asset_responsible"],children:e.jsx(ry,{})})}),e.jsx(nt,{path:"attribution-orders/assets/:rowId/included-items/:itemKind",element:e.jsx(mt,{allowedRoles:["asset_responsible"],children:e.jsx(ry,{})})}),e.jsx(nt,{path:"company-asset-requests",element:e.jsx(mt,{allowedRoles:["asset_responsible"],children:e.jsx(zj,{})})}),e.jsx(nt,{path:"administrative-certificates",element:e.jsx(mt,{allowedRoles:["asset_responsible"],children:e.jsx(Dj,{})})}),e.jsx(nt,{path:"item-requests-inbox",element:e.jsx(mt,{allowedRoles:["stock_consumable_responsible"],children:e.jsx(Oj,{})})}),e.jsx(nt,{path:"external-maintenances",element:e.jsx(mt,{allowedRoles:["asset_responsible"],children:e.jsx(qj,{})})})]}),e.jsx(nt,{path:"/",element:e.jsx(Js,{to:"/login",replace:!0})}),e.jsx(nt,{path:"*",element:e.jsx(Js,{to:"/login",replace:!0})})]})})})}zv.createRoot(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(Wj,{})}));

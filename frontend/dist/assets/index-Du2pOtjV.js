(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))u(m);new MutationObserver(m=>{for(const p of m)if(p.type==="childList")for(const h of p.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&u(h)}).observe(document,{childList:!0,subtree:!0});function c(m){const p={};return m.integrity&&(p.integrity=m.integrity),m.referrerPolicy&&(p.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?p.credentials="include":m.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function u(m){if(m.ep)return;m.ep=!0;const p=c(m);fetch(m.href,p)}})();var Ed={exports:{}},Yl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zf;function kv(){if(Zf)return Yl;Zf=1;var r=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function c(u,m,p){var h=null;if(p!==void 0&&(h=""+p),m.key!==void 0&&(h=""+m.key),"key"in m){p={};for(var y in m)y!=="key"&&(p[y]=m[y])}else p=m;return m=p.ref,{$$typeof:r,type:u,key:h,ref:m!==void 0?m:null,props:p}}return Yl.Fragment=l,Yl.jsx=c,Yl.jsxs=c,Yl}var Jf;function Av(){return Jf||(Jf=1,Ed.exports=kv()),Ed.exports}var t=Av(),zd={exports:{}},tt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kf;function Nv(){if(Kf)return tt;Kf=1;var r=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),p=Symbol.for("react.consumer"),h=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),M=Symbol.iterator;function I(C){return C===null||typeof C!="object"?null:(C=M&&C[M]||C["@@iterator"],typeof C=="function"?C:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,S={};function V(C,$,oe){this.props=C,this.context=$,this.refs=S,this.updater=oe||k}V.prototype.isReactComponent={},V.prototype.setState=function(C,$){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,$,"setState")},V.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function se(){}se.prototype=V.prototype;function N(C,$,oe){this.props=C,this.context=$,this.refs=S,this.updater=oe||k}var R=N.prototype=new se;R.constructor=N,H(R,V.prototype),R.isPureReactComponent=!0;var W=Array.isArray;function K(){}var Y={H:null,A:null,T:null,S:null},he=Object.prototype.hasOwnProperty;function A(C,$,oe){var ye=oe.ref;return{$$typeof:r,type:C,key:$,ref:ye!==void 0?ye:null,props:oe}}function Q(C,$){return A(C.type,$,C.props)}function te(C){return typeof C=="object"&&C!==null&&C.$$typeof===r}function re(C){var $={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(oe){return $[oe]})}var xe=/\/+/g;function Ne(C,$){return typeof C=="object"&&C!==null&&C.key!=null?re(""+C.key):$.toString(36)}function le(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(K,K):(C.status="pending",C.then(function($){C.status==="pending"&&(C.status="fulfilled",C.value=$)},function($){C.status==="pending"&&(C.status="rejected",C.reason=$)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function w(C,$,oe,ye,Me){var Ae=typeof C;(Ae==="undefined"||Ae==="boolean")&&(C=null);var E=!1;if(C===null)E=!0;else switch(Ae){case"bigint":case"string":case"number":E=!0;break;case"object":switch(C.$$typeof){case r:case l:E=!0;break;case x:return E=C._init,w(E(C._payload),$,oe,ye,Me)}}if(E)return Me=Me(C),E=ye===""?"."+Ne(C,0):ye,W(Me)?(oe="",E!=null&&(oe=E.replace(xe,"$&/")+"/"),w(Me,$,oe,"",function(O){return O})):Me!=null&&(te(Me)&&(Me=Q(Me,oe+(Me.key==null||C&&C.key===Me.key?"":(""+Me.key).replace(xe,"$&/")+"/")+E)),$.push(Me)),1;E=0;var ie=ye===""?".":ye+":";if(W(C))for(var L=0;L<C.length;L++)ye=C[L],Ae=ie+Ne(ye,L),E+=w(ye,$,oe,Ae,Me);else if(L=I(C),typeof L=="function")for(C=L.call(C),L=0;!(ye=C.next()).done;)ye=ye.value,Ae=ie+Ne(ye,L++),E+=w(ye,$,oe,Ae,Me);else if(Ae==="object"){if(typeof C.then=="function")return w(le(C),$,oe,ye,Me);throw $=String(C),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return E}function z(C,$,oe){if(C==null)return C;var ye=[],Me=0;return w(C,ye,"","",function(Ae){return $.call(oe,Ae,Me++)}),ye}function X(C){if(C._status===-1){var $=C._result;$=$(),$.then(function(oe){(C._status===0||C._status===-1)&&(C._status=1,C._result=oe)},function(oe){(C._status===0||C._status===-1)&&(C._status=2,C._result=oe)}),C._status===-1&&(C._status=0,C._result=$)}if(C._status===1)return C._result.default;throw C._result}var F=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},fe={map:z,forEach:function(C,$,oe){z(C,function(){$.apply(this,arguments)},oe)},count:function(C){var $=0;return z(C,function(){$++}),$},toArray:function(C){return z(C,function($){return $})||[]},only:function(C){if(!te(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return tt.Activity=j,tt.Children=fe,tt.Component=V,tt.Fragment=c,tt.Profiler=m,tt.PureComponent=N,tt.StrictMode=u,tt.Suspense=g,tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,tt.__COMPILER_RUNTIME={__proto__:null,c:function(C){return Y.H.useMemoCache(C)}},tt.cache=function(C){return function(){return C.apply(null,arguments)}},tt.cacheSignal=function(){return null},tt.cloneElement=function(C,$,oe){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var ye=H({},C.props),Me=C.key;if($!=null)for(Ae in $.key!==void 0&&(Me=""+$.key),$)!he.call($,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&$.ref===void 0||(ye[Ae]=$[Ae]);var Ae=arguments.length-2;if(Ae===1)ye.children=oe;else if(1<Ae){for(var E=Array(Ae),ie=0;ie<Ae;ie++)E[ie]=arguments[ie+2];ye.children=E}return A(C.type,Me,ye)},tt.createContext=function(C){return C={$$typeof:h,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:p,_context:C},C},tt.createElement=function(C,$,oe){var ye,Me={},Ae=null;if($!=null)for(ye in $.key!==void 0&&(Ae=""+$.key),$)he.call($,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(Me[ye]=$[ye]);var E=arguments.length-2;if(E===1)Me.children=oe;else if(1<E){for(var ie=Array(E),L=0;L<E;L++)ie[L]=arguments[L+2];Me.children=ie}if(C&&C.defaultProps)for(ye in E=C.defaultProps,E)Me[ye]===void 0&&(Me[ye]=E[ye]);return A(C,Ae,Me)},tt.createRef=function(){return{current:null}},tt.forwardRef=function(C){return{$$typeof:y,render:C}},tt.isValidElement=te,tt.lazy=function(C){return{$$typeof:x,_payload:{_status:-1,_result:C},_init:X}},tt.memo=function(C,$){return{$$typeof:v,type:C,compare:$===void 0?null:$}},tt.startTransition=function(C){var $=Y.T,oe={};Y.T=oe;try{var ye=C(),Me=Y.S;Me!==null&&Me(oe,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(K,F)}catch(Ae){F(Ae)}finally{$!==null&&oe.types!==null&&($.types=oe.types),Y.T=$}},tt.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},tt.use=function(C){return Y.H.use(C)},tt.useActionState=function(C,$,oe){return Y.H.useActionState(C,$,oe)},tt.useCallback=function(C,$){return Y.H.useCallback(C,$)},tt.useContext=function(C){return Y.H.useContext(C)},tt.useDebugValue=function(){},tt.useDeferredValue=function(C,$){return Y.H.useDeferredValue(C,$)},tt.useEffect=function(C,$){return Y.H.useEffect(C,$)},tt.useEffectEvent=function(C){return Y.H.useEffectEvent(C)},tt.useId=function(){return Y.H.useId()},tt.useImperativeHandle=function(C,$,oe){return Y.H.useImperativeHandle(C,$,oe)},tt.useInsertionEffect=function(C,$){return Y.H.useInsertionEffect(C,$)},tt.useLayoutEffect=function(C,$){return Y.H.useLayoutEffect(C,$)},tt.useMemo=function(C,$){return Y.H.useMemo(C,$)},tt.useOptimistic=function(C,$){return Y.H.useOptimistic(C,$)},tt.useReducer=function(C,$,oe){return Y.H.useReducer(C,$,oe)},tt.useRef=function(C){return Y.H.useRef(C)},tt.useState=function(C){return Y.H.useState(C)},tt.useSyncExternalStore=function(C,$,oe){return Y.H.useSyncExternalStore(C,$,oe)},tt.useTransition=function(){return Y.H.useTransition()},tt.version="19.2.4",tt}var Pf;function lu(){return Pf||(Pf=1,zd.exports=Nv()),zd.exports}var d=lu(),Bd={exports:{}},Wl={},Dd={exports:{}},Od={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eh;function Rv(){return eh||(eh=1,(function(r){function l(w,z){var X=w.length;w.push(z);e:for(;0<X;){var F=X-1>>>1,fe=w[F];if(0<m(fe,z))w[F]=z,w[X]=fe,X=F;else break e}}function c(w){return w.length===0?null:w[0]}function u(w){if(w.length===0)return null;var z=w[0],X=w.pop();if(X!==z){w[0]=X;e:for(var F=0,fe=w.length,C=fe>>>1;F<C;){var $=2*(F+1)-1,oe=w[$],ye=$+1,Me=w[ye];if(0>m(oe,X))ye<fe&&0>m(Me,oe)?(w[F]=Me,w[ye]=X,F=ye):(w[F]=oe,w[$]=X,F=$);else if(ye<fe&&0>m(Me,X))w[F]=Me,w[ye]=X,F=ye;else break e}}return z}function m(w,z){var X=w.sortIndex-z.sortIndex;return X!==0?X:w.id-z.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var p=performance;r.unstable_now=function(){return p.now()}}else{var h=Date,y=h.now();r.unstable_now=function(){return h.now()-y}}var g=[],v=[],x=1,j=null,M=3,I=!1,k=!1,H=!1,S=!1,V=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function R(w){for(var z=c(v);z!==null;){if(z.callback===null)u(v);else if(z.startTime<=w)u(v),z.sortIndex=z.expirationTime,l(g,z);else break;z=c(v)}}function W(w){if(H=!1,R(w),!k)if(c(g)!==null)k=!0,K||(K=!0,re());else{var z=c(v);z!==null&&le(W,z.startTime-w)}}var K=!1,Y=-1,he=5,A=-1;function Q(){return S?!0:!(r.unstable_now()-A<he)}function te(){if(S=!1,K){var w=r.unstable_now();A=w;var z=!0;try{e:{k=!1,H&&(H=!1,se(Y),Y=-1),I=!0;var X=M;try{t:{for(R(w),j=c(g);j!==null&&!(j.expirationTime>w&&Q());){var F=j.callback;if(typeof F=="function"){j.callback=null,M=j.priorityLevel;var fe=F(j.expirationTime<=w);if(w=r.unstable_now(),typeof fe=="function"){j.callback=fe,R(w),z=!0;break t}j===c(g)&&u(g),R(w)}else u(g);j=c(g)}if(j!==null)z=!0;else{var C=c(v);C!==null&&le(W,C.startTime-w),z=!1}}break e}finally{j=null,M=X,I=!1}z=void 0}}finally{z?re():K=!1}}}var re;if(typeof N=="function")re=function(){N(te)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,Ne=xe.port2;xe.port1.onmessage=te,re=function(){Ne.postMessage(null)}}else re=function(){V(te,0)};function le(w,z){Y=V(function(){w(r.unstable_now())},z)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(w){w.callback=null},r.unstable_forceFrameRate=function(w){0>w||125<w?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<w?Math.floor(1e3/w):5},r.unstable_getCurrentPriorityLevel=function(){return M},r.unstable_next=function(w){switch(M){case 1:case 2:case 3:var z=3;break;default:z=M}var X=M;M=z;try{return w()}finally{M=X}},r.unstable_requestPaint=function(){S=!0},r.unstable_runWithPriority=function(w,z){switch(w){case 1:case 2:case 3:case 4:case 5:break;default:w=3}var X=M;M=w;try{return z()}finally{M=X}},r.unstable_scheduleCallback=function(w,z,X){var F=r.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?F+X:F):X=F,w){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=X+fe,w={id:x++,callback:z,priorityLevel:w,startTime:X,expirationTime:fe,sortIndex:-1},X>F?(w.sortIndex=X,l(v,w),c(g)===null&&w===c(v)&&(H?(se(Y),Y=-1):H=!0,le(W,X-F))):(w.sortIndex=fe,l(g,w),k||I||(k=!0,K||(K=!0,re()))),w},r.unstable_shouldYield=Q,r.unstable_wrapCallback=function(w){var z=M;return function(){var X=M;M=z;try{return w.apply(this,arguments)}finally{M=X}}}})(Od)),Od}var th;function Mv(){return th||(th=1,Dd.exports=Rv()),Dd.exports}var Ld={exports:{}},Ea={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ah;function Tv(){if(ah)return Ea;ah=1;var r=lu();function l(g){var v="https://react.dev/errors/"+g;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)v+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(){}var u={d:{f:c,r:function(){throw Error(l(522))},D:c,C:c,L:c,m:c,X:c,S:c,M:c},p:0,findDOMNode:null},m=Symbol.for("react.portal");function p(g,v,x){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:j==null?null:""+j,children:g,containerInfo:v,implementation:x}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(g,v){if(g==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return Ea.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=u,Ea.createPortal=function(g,v){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(l(299));return p(g,v,null,x)},Ea.flushSync=function(g){var v=h.T,x=u.p;try{if(h.T=null,u.p=2,g)return g()}finally{h.T=v,u.p=x,u.d.f()}},Ea.preconnect=function(g,v){typeof g=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,u.d.C(g,v))},Ea.prefetchDNS=function(g){typeof g=="string"&&u.d.D(g)},Ea.preinit=function(g,v){if(typeof g=="string"&&v&&typeof v.as=="string"){var x=v.as,j=y(x,v.crossOrigin),M=typeof v.integrity=="string"?v.integrity:void 0,I=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;x==="style"?u.d.S(g,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:j,integrity:M,fetchPriority:I}):x==="script"&&u.d.X(g,{crossOrigin:j,integrity:M,fetchPriority:I,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},Ea.preinitModule=function(g,v){if(typeof g=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var x=y(v.as,v.crossOrigin);u.d.M(g,{crossOrigin:x,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&u.d.M(g)},Ea.preload=function(g,v){if(typeof g=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var x=v.as,j=y(x,v.crossOrigin);u.d.L(g,x,{crossOrigin:j,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},Ea.preloadModule=function(g,v){if(typeof g=="string")if(v){var x=y(v.as,v.crossOrigin);u.d.m(g,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:x,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else u.d.m(g)},Ea.requestFormReset=function(g){u.d.r(g)},Ea.unstable_batchedUpdates=function(g,v){return g(v)},Ea.useFormState=function(g,v,x){return h.H.useFormState(g,v,x)},Ea.useFormStatus=function(){return h.H.useHostTransitionStatus()},Ea.version="19.2.4",Ea}var sh;function Th(){if(sh)return Ld.exports;sh=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(l){console.error(l)}}return r(),Ld.exports=Tv(),Ld.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nh;function Ev(){if(nh)return Wl;nh=1;var r=Mv(),l=lu(),c=Th();function u(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function p(e){var a=e,s=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(s=a.return),e=a.return;while(e)}return a.tag===3?s:null}function h(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function y(e){if(e.tag===31){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function g(e){if(p(e)!==e)throw Error(u(188))}function v(e){var a=e.alternate;if(!a){if(a=p(e),a===null)throw Error(u(188));return a!==e?null:e}for(var s=e,n=a;;){var o=s.return;if(o===null)break;var i=o.alternate;if(i===null){if(n=o.return,n!==null){s=n;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===s)return g(o),e;if(i===n)return g(o),a;i=i.sibling}throw Error(u(188))}if(s.return!==n.return)s=o,n=i;else{for(var f=!1,_=o.child;_;){if(_===s){f=!0,s=o,n=i;break}if(_===n){f=!0,n=o,s=i;break}_=_.sibling}if(!f){for(_=i.child;_;){if(_===s){f=!0,s=i,n=o;break}if(_===n){f=!0,n=i,s=o;break}_=_.sibling}if(!f)throw Error(u(189))}}if(s.alternate!==n)throw Error(u(190))}if(s.tag!==3)throw Error(u(188));return s.stateNode.current===s?e:a}function x(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=x(e),a!==null)return a;e=e.sibling}return null}var j=Object.assign,M=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),se=Symbol.for("react.consumer"),N=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),he=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),te=Symbol.iterator;function re(e){return e===null||typeof e!="object"?null:(e=te&&e[te]||e["@@iterator"],typeof e=="function"?e:null)}var xe=Symbol.for("react.client.reference");function Ne(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===xe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case H:return"Fragment";case V:return"Profiler";case S:return"StrictMode";case W:return"Suspense";case K:return"SuspenseList";case A:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case k:return"Portal";case N:return e.displayName||"Context";case se:return(e._context.displayName||"Context")+".Consumer";case R:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Y:return a=e.displayName||null,a!==null?a:Ne(e.type)||"Memo";case he:a=e._payload,e=e._init;try{return Ne(e(a))}catch{}}return null}var le=Array.isArray,w=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},F=[],fe=-1;function C(e){return{current:e}}function $(e){0>fe||(e.current=F[fe],F[fe]=null,fe--)}function oe(e,a){fe++,F[fe]=e.current,e.current=a}var ye=C(null),Me=C(null),Ae=C(null),E=C(null);function ie(e,a){switch(oe(Ae,a),oe(Me,e),oe(ye,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?gf(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=gf(a),e=xf(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}$(ye),oe(ye,e)}function L(){$(ye),$(Me),$(Ae)}function O(e){e.memoizedState!==null&&oe(E,e);var a=ye.current,s=xf(a,e.type);a!==s&&(oe(Me,e),oe(ye,s))}function Se(e){Me.current===e&&($(ye),$(Me)),E.current===e&&($(E),ql._currentValue=X)}var we,Ke;function Ue(e){if(we===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);we=a&&a[1]||"",Ke=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+we+e+Ke}var ze=!1;function Ye(e,a){if(!e||ze)return"";ze=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(a){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(pe){var ue=pe}Reflect.construct(e,[],Ce)}else{try{Ce.call()}catch(pe){ue=pe}e.call(Ce.prototype)}}else{try{throw Error()}catch(pe){ue=pe}(Ce=e())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(pe){if(pe&&ue&&typeof pe.stack=="string")return[pe.stack,ue.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=n.DetermineComponentFrameRoot(),f=i[0],_=i[1];if(f&&_){var q=f.split(`
`),de=_.split(`
`);for(o=n=0;n<q.length&&!q[n].includes("DetermineComponentFrameRoot");)n++;for(;o<de.length&&!de[o].includes("DetermineComponentFrameRoot");)o++;if(n===q.length||o===de.length)for(n=q.length-1,o=de.length-1;1<=n&&0<=o&&q[n]!==de[o];)o--;for(;1<=n&&0<=o;n--,o--)if(q[n]!==de[o]){if(n!==1||o!==1)do if(n--,o--,0>o||q[n]!==de[o]){var ge=`
`+q[n].replace(" at new "," at ");return e.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",e.displayName)),ge}while(1<=n&&0<=o);break}}}finally{ze=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Ue(s):""}function Fe(e,a){switch(e.tag){case 26:case 27:case 5:return Ue(e.type);case 16:return Ue("Lazy");case 13:return e.child!==a&&a!==null?Ue("Suspense Fallback"):Ue("Suspense");case 19:return Ue("SuspenseList");case 0:case 15:return Ye(e.type,!1);case 11:return Ye(e.type.render,!1);case 1:return Ye(e.type,!0);case 31:return Ue("Activity");default:return""}}function ke(e){try{var a="",s=null;do a+=Fe(e,s),s=e,e=e.return;while(e);return a}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var Ee=Object.prototype.hasOwnProperty,G=r.unstable_scheduleCallback,P=r.unstable_cancelCallback,_e=r.unstable_shouldYield,Te=r.unstable_requestPaint,T=r.unstable_now,Re=r.unstable_getCurrentPriorityLevel,ee=r.unstable_ImmediatePriority,Ie=r.unstable_UserBlockingPriority,We=r.unstable_NormalPriority,Qt=r.unstable_LowPriority,lt=r.unstable_IdlePriority,$t=r.log,Qe=r.unstable_setDisableYieldValue,ba=null,Ze=null;function Rt(e){if(typeof $t=="function"&&Qe(e),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(ba,e)}catch{}}var De=Math.clz32?Math.clz32:_a,bt=Math.log,qe=Math.LN2;function _a(e){return e>>>=0,e===0?32:31-(bt(e)/qe|0)|0}var pt=256,Yt=262144,ra=4194304;function la(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function rt(e,a,s){var n=e.pendingLanes;if(n===0)return 0;var o=0,i=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var _=n&134217727;return _!==0?(n=_&~i,n!==0?o=la(n):(f&=_,f!==0?o=la(f):s||(s=_&~e,s!==0&&(o=la(s))))):(_=n&~i,_!==0?o=la(_):f!==0?o=la(f):s||(s=n&~e,s!==0&&(o=la(s)))),o===0?0:a!==0&&a!==o&&(a&i)===0&&(i=o&-o,s=a&-a,i>=s||i===32&&(s&4194048)!==0)?a:o}function jt(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function ja(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Na(){var e=ra;return ra<<=1,(ra&62914560)===0&&(ra=4194304),e}function Kt(e){for(var a=[],s=0;31>s;s++)a.push(e);return a}function Wt(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Mt(e,a,s,n,o,i){var f=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var _=e.entanglements,q=e.expirationTimes,de=e.hiddenUpdates;for(s=f&~s;0<s;){var ge=31-De(s),Ce=1<<ge;_[ge]=0,q[ge]=-1;var ue=de[ge];if(ue!==null)for(de[ge]=null,ge=0;ge<ue.length;ge++){var pe=ue[ge];pe!==null&&(pe.lane&=-536870913)}s&=~Ce}n!==0&&St(e,n,0),i!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=i&~(f&~a))}function St(e,a,s){e.pendingLanes|=a,e.suspendedLanes&=~a;var n=31-De(a);e.entangledLanes|=a,e.entanglements[n]=e.entanglements[n]|1073741824|s&261930}function hs(e,a){var s=e.entangledLanes|=a;for(e=e.entanglements;s;){var n=31-De(s),o=1<<n;o&a|e[n]&a&&(e[n]|=a),s&=~o}}function Pt(e,a){var s=a&-a;return s=(s&42)!==0?1:Ra(s),(s&(e.suspendedLanes|a))!==0?0:s}function Ra(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ss(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ba(){var e=z.p;return e!==0?e:(e=window.event,e===void 0?32:$f(e.type))}function pa(e,a){var s=z.p;try{return z.p=e,a()}finally{z.p=s}}var Tt=Math.random().toString(36).slice(2),ft="__reactFiber$"+Tt,vt="__reactProps$"+Tt,Xt="__reactContainer$"+Tt,$a="__reactEvents$"+Tt,Da="__reactListeners$"+Tt,Ya="__reactHandles$"+Tt,Ma="__reactResources$"+Tt,fa="__reactMarker$"+Tt;function Gt(e){delete e[ft],delete e[vt],delete e[$a],delete e[Da],delete e[Ya]}function Ut(e){var a=e[ft];if(a)return a;for(var s=e.parentNode;s;){if(a=s[Xt]||s[ft]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(e=Af(e);e!==null;){if(s=e[ft])return s;e=Af(e)}return a}e=s,s=e.parentNode}return null}function Bt(e){if(e=e[ft]||e[Xt]){var a=e.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return e}return null}function va(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(u(33))}function oa(e){var a=e[Ma];return a||(a=e[Ma]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ht(e){e[fa]=!0}var Oa=new Set,ns={};function Vt(e,a){Sa(e,a),Sa(e+"Capture",a)}function Sa(e,a){for(ns[e]=a,e=0;e<a.length;e++)Oa.add(a[e])}var Wa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ys={},Ts={};function Zs(e){return Ee.call(Ts,e)?!0:Ee.call(ys,e)?!1:Wa.test(e)?Ts[e]=!0:(ys[e]=!0,!1)}function rs(e,a,s){if(Zs(a))if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var n=a.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+s)}}function La(e,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+s)}}function ha(e,a,s,n){if(n===null)e.removeAttribute(s);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(a,s,""+n)}}function zt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ta(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function qs(e,a,s){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,a);if(!e.hasOwnProperty(a)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return o.call(this)},set:function(f){s=""+f,i.call(this,f)}}),Object.defineProperty(e,a,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(f){s=""+f},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function Ia(e){if(!e._valueTracker){var a=Ta(e)?"checked":"value";e._valueTracker=qs(e,a,""+e[a])}}function ae(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var s=a.getValue(),n="";return e&&(n=Ta(e)?e.checked?"true":"false":e.value),e=n,e!==s?(a.setValue(e),!0):!1}function be(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Le=/[\n"\\]/g;function Ge(e){return e.replace(Le,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Dt(e,a,s,n,o,i,f,_){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),a!=null?f==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+zt(a)):e.value!==""+zt(a)&&(e.value=""+zt(a)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),a!=null?Es(e,f,zt(a)):s!=null?Es(e,f,zt(s)):n!=null&&e.removeAttribute("value"),o==null&&i!=null&&(e.defaultChecked=!!i),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+zt(_):e.removeAttribute("name")}function ea(e,a,s,n,o,i,f,_){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.type=i),a!=null||s!=null){if(!(i!=="submit"&&i!=="reset"||a!=null)){Ia(e);return}s=s!=null?""+zt(s):"",a=a!=null?""+zt(a):s,_||a===e.value||(e.value=a),e.defaultValue=a}n=n??o,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=_?e.checked:!!n,e.defaultChecked=!!n,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f),Ia(e)}function Es(e,a,s){a==="number"&&be(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function ga(e,a,s,n){if(e=e.options,a){a={};for(var o=0;o<s.length;o++)a["$"+s[o]]=!0;for(s=0;s<e.length;s++)o=a.hasOwnProperty("$"+e[s].value),e[s].selected!==o&&(e[s].selected=o),o&&n&&(e[s].defaultSelected=!0)}else{for(s=""+zt(s),a=null,o=0;o<e.length;o++){if(e[o].value===s){e[o].selected=!0,n&&(e[o].defaultSelected=!0);return}a!==null||e[o].disabled||(a=e[o])}a!==null&&(a.selected=!0)}}function Ga(e,a,s){if(a!=null&&(a=""+zt(a),a!==e.value&&(e.value=a),s==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=s!=null?""+zt(s):""}function gn(e,a,s,n){if(a==null){if(n!=null){if(s!=null)throw Error(u(92));if(le(n)){if(1<n.length)throw Error(u(93));n=n[0]}s=n}s==null&&(s=""),a=s}s=zt(a),e.defaultValue=s,n=e.textContent,n===s&&n!==""&&n!==null&&(e.value=n),Ia(e)}function Ua(e,a){if(a){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=a;return}}e.textContent=a}var Js=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fs(e,a,s){var n=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?n?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":n?e.setProperty(a,s):typeof s!="number"||s===0||Js.has(a)?a==="float"?e.cssFloat=s:e[a]=(""+s).trim():e[a]=s+"px"}function D(e,a,s){if(a!=null&&typeof a!="object")throw Error(u(62));if(e=e.style,s!=null){for(var n in s)!s.hasOwnProperty(n)||a!=null&&a.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var o in a)n=a[o],a.hasOwnProperty(o)&&s[o]!==n&&Fs(e,o,n)}else for(var i in a)a.hasOwnProperty(i)&&Fs(e,i,a[i])}function b(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var B=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ve=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $e(e){return ve.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ut(){}var ta=null;function Z(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Be=null,Ve=null;function et(e){var a=Bt(e);if(a&&(e=a.stateNode)){var s=e[vt]||null;e:switch(e=a.stateNode,a.type){case"input":if(Dt(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Ge(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var n=s[a];if(n!==e&&n.form===e.form){var o=n[vt]||null;if(!o)throw Error(u(90));Dt(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(a=0;a<s.length;a++)n=s[a],n.form===e.form&&ae(n)}break e;case"textarea":Ga(e,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&ga(e,!!s.multiple,a,!1)}}}var qt=!1;function zs(e,a,s){if(qt)return e(a,s);qt=!0;try{var n=e(a);return n}finally{if(qt=!1,(Be!==null||Ve!==null)&&(Yo(),Be&&(a=Be,e=Ve,Ve=Be=null,et(a),e)))for(a=0;a<e.length;a++)et(e[a])}}function Bs(e,a){var s=e.stateNode;if(s===null)return null;var n=s[vt]||null;if(n===null)return null;s=n[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(u(231,a,typeof s));return s}var bs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xn=!1;if(bs)try{var nl={};Object.defineProperty(nl,"passive",{get:function(){xn=!0}}),window.addEventListener("test",nl,nl),window.removeEventListener("test",nl,nl)}catch{xn=!1}var _n=null,zi=null,so=null;function gu(){if(so)return so;var e,a=zi,s=a.length,n,o="value"in _n?_n.value:_n.textContent,i=o.length;for(e=0;e<s&&a[e]===o[e];e++);var f=s-e;for(n=1;n<=f&&a[s-n]===o[i-n];n++);return so=o.slice(e,1<n?1-n:void 0)}function no(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function ro(){return!0}function xu(){return!1}function Va(e){function a(s,n,o,i,f){this._reactName=s,this._targetInst=o,this.type=n,this.nativeEvent=i,this.target=f,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(s=e[_],this[_]=s?s(i):i[_]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ro:xu,this.isPropagationStopped=xu,this}return j(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ro)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ro)},persist:function(){},isPersistent:ro}),a}var Gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lo=Va(Gn),rl=j({},Gn,{view:0,detail:0}),Cy=Va(rl),Bi,Di,ll,oo=j({},rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Li,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ll&&(ll&&e.type==="mousemove"?(Bi=e.screenX-ll.screenX,Di=e.screenY-ll.screenY):Di=Bi=0,ll=e),Bi)},movementY:function(e){return"movementY"in e?e.movementY:Di}}),_u=Va(oo),wy=j({},oo,{dataTransfer:0}),ky=Va(wy),Ay=j({},rl,{relatedTarget:0}),Oi=Va(Ay),Ny=j({},Gn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ry=Va(Ny),My=j({},Gn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ty=Va(My),Ey=j({},Gn,{data:0}),ju=Va(Ey),zy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},By={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Oy(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=Dy[e])?!!a[e]:!1}function Li(){return Oy}var Ly=j({},rl,{key:function(e){if(e.key){var a=zy[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=no(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?By[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Li,charCode:function(e){return e.type==="keypress"?no(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?no(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Iy=Va(Ly),Uy=j({},oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Su=Va(Uy),qy=j({},rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Li}),Fy=Va(qy),Hy=j({},Gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),$y=Va(Hy),Yy=j({},oo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Wy=Va(Yy),Gy=j({},Gn,{newState:0,oldState:0}),Vy=Va(Gy),Qy=[9,13,27,32],Ii=bs&&"CompositionEvent"in window,ol=null;bs&&"documentMode"in document&&(ol=document.documentMode);var Xy=bs&&"TextEvent"in window&&!ol,Cu=bs&&(!Ii||ol&&8<ol&&11>=ol),wu=" ",ku=!1;function Au(e,a){switch(e){case"keyup":return Qy.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var yr=!1;function Zy(e,a){switch(e){case"compositionend":return Nu(a);case"keypress":return a.which!==32?null:(ku=!0,wu);case"textInput":return e=a.data,e===wu&&ku?null:e;default:return null}}function Jy(e,a){if(yr)return e==="compositionend"||!Ii&&Au(e,a)?(e=gu(),so=zi=_n=null,yr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Cu&&a.locale!=="ko"?null:a.data;default:return null}}var Ky={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ru(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!Ky[e.type]:a==="textarea"}function Mu(e,a,s,n){Be?Ve?Ve.push(n):Ve=[n]:Be=n,a=Jo(a,"onChange"),0<a.length&&(s=new lo("onChange","change",null,s,n),e.push({event:s,listeners:a}))}var il=null,cl=null;function Py(e){pf(e,0)}function io(e){var a=va(e);if(ae(a))return e}function Tu(e,a){if(e==="change")return a}var Eu=!1;if(bs){var Ui;if(bs){var qi="oninput"in document;if(!qi){var zu=document.createElement("div");zu.setAttribute("oninput","return;"),qi=typeof zu.oninput=="function"}Ui=qi}else Ui=!1;Eu=Ui&&(!document.documentMode||9<document.documentMode)}function Bu(){il&&(il.detachEvent("onpropertychange",Du),cl=il=null)}function Du(e){if(e.propertyName==="value"&&io(cl)){var a=[];Mu(a,cl,e,Z(e)),zs(Py,a)}}function eb(e,a,s){e==="focusin"?(Bu(),il=a,cl=s,il.attachEvent("onpropertychange",Du)):e==="focusout"&&Bu()}function tb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return io(cl)}function ab(e,a){if(e==="click")return io(a)}function sb(e,a){if(e==="input"||e==="change")return io(a)}function nb(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var ls=typeof Object.is=="function"?Object.is:nb;function dl(e,a){if(ls(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var s=Object.keys(e),n=Object.keys(a);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var o=s[n];if(!Ee.call(a,o)||!ls(e[o],a[o]))return!1}return!0}function Ou(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Lu(e,a){var s=Ou(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=a&&n>=a)return{node:s,offset:a-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Ou(s)}}function Iu(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?Iu(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function Uu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=be(e.document);a instanceof e.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)e=a.contentWindow;else break;a=be(e.document)}return a}function Fi(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var rb=bs&&"documentMode"in document&&11>=document.documentMode,br=null,Hi=null,ul=null,$i=!1;function qu(e,a,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;$i||br==null||br!==be(n)||(n=br,"selectionStart"in n&&Fi(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ul&&dl(ul,n)||(ul=n,n=Jo(Hi,"onSelect"),0<n.length&&(a=new lo("onSelect","select",null,a,s),e.push({event:a,listeners:n}),a.target=br)))}function Vn(e,a){var s={};return s[e.toLowerCase()]=a.toLowerCase(),s["Webkit"+e]="webkit"+a,s["Moz"+e]="moz"+a,s}var vr={animationend:Vn("Animation","AnimationEnd"),animationiteration:Vn("Animation","AnimationIteration"),animationstart:Vn("Animation","AnimationStart"),transitionrun:Vn("Transition","TransitionRun"),transitionstart:Vn("Transition","TransitionStart"),transitioncancel:Vn("Transition","TransitionCancel"),transitionend:Vn("Transition","TransitionEnd")},Yi={},Fu={};bs&&(Fu=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);function Qn(e){if(Yi[e])return Yi[e];if(!vr[e])return e;var a=vr[e],s;for(s in a)if(a.hasOwnProperty(s)&&s in Fu)return Yi[e]=a[s];return e}var Hu=Qn("animationend"),$u=Qn("animationiteration"),Yu=Qn("animationstart"),lb=Qn("transitionrun"),ob=Qn("transitionstart"),ib=Qn("transitioncancel"),Wu=Qn("transitionend"),Gu=new Map,Wi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wi.push("scrollEnd");function Ds(e,a){Gu.set(e,a),Vt(a,[e])}var co=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},vs=[],gr=0,Gi=0;function uo(){for(var e=gr,a=Gi=gr=0;a<e;){var s=vs[a];vs[a++]=null;var n=vs[a];vs[a++]=null;var o=vs[a];vs[a++]=null;var i=vs[a];if(vs[a++]=null,n!==null&&o!==null){var f=n.pending;f===null?o.next=o:(o.next=f.next,f.next=o),n.pending=o}i!==0&&Vu(s,o,i)}}function mo(e,a,s,n){vs[gr++]=e,vs[gr++]=a,vs[gr++]=s,vs[gr++]=n,Gi|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Vi(e,a,s,n){return mo(e,a,s,n),po(e)}function Xn(e,a){return mo(e,null,null,a),po(e)}function Vu(e,a,s){e.lanes|=s;var n=e.alternate;n!==null&&(n.lanes|=s);for(var o=!1,i=e.return;i!==null;)i.childLanes|=s,n=i.alternate,n!==null&&(n.childLanes|=s),i.tag===22&&(e=i.stateNode,e===null||e._visibility&1||(o=!0)),e=i,i=i.return;return e.tag===3?(i=e.stateNode,o&&a!==null&&(o=31-De(s),e=i.hiddenUpdates,n=e[o],n===null?e[o]=[a]:n.push(a),a.lane=s|536870912),i):null}function po(e){if(50<zl)throw zl=0,ad=null,Error(u(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var xr={};function cb(e,a,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function os(e,a,s,n){return new cb(e,a,s,n)}function Qi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ks(e,a){var s=e.alternate;return s===null?(s=os(e.tag,a,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=a,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,a=e.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Qu(e,a){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,a=s.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function fo(e,a,s,n,o,i){var f=0;if(n=e,typeof e=="function")Qi(e)&&(f=1);else if(typeof e=="string")f=fv(e,s,ye.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case A:return e=os(31,s,a,o),e.elementType=A,e.lanes=i,e;case H:return Zn(s.children,o,i,a);case S:f=8,o|=24;break;case V:return e=os(12,s,a,o|2),e.elementType=V,e.lanes=i,e;case W:return e=os(13,s,a,o),e.elementType=W,e.lanes=i,e;case K:return e=os(19,s,a,o),e.elementType=K,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case N:f=10;break e;case se:f=9;break e;case R:f=11;break e;case Y:f=14;break e;case he:f=16,n=null;break e}f=29,s=Error(u(130,e===null?"null":typeof e,"")),n=null}return a=os(f,s,a,o),a.elementType=e,a.type=n,a.lanes=i,a}function Zn(e,a,s,n){return e=os(7,e,n,a),e.lanes=s,e}function Xi(e,a,s){return e=os(6,e,null,a),e.lanes=s,e}function Xu(e){var a=os(18,null,null,0);return a.stateNode=e,a}function Zi(e,a,s){return a=os(4,e.children!==null?e.children:[],e.key,a),a.lanes=s,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var Zu=new WeakMap;function gs(e,a){if(typeof e=="object"&&e!==null){var s=Zu.get(e);return s!==void 0?s:(a={value:e,source:a,stack:ke(a)},Zu.set(e,a),a)}return{value:e,source:a,stack:ke(a)}}var _r=[],jr=0,ho=null,ml=0,xs=[],_s=0,jn=null,Hs=1,$s="";function Ps(e,a){_r[jr++]=ml,_r[jr++]=ho,ho=e,ml=a}function Ju(e,a,s){xs[_s++]=Hs,xs[_s++]=$s,xs[_s++]=jn,jn=e;var n=Hs;e=$s;var o=32-De(n)-1;n&=~(1<<o),s+=1;var i=32-De(a)+o;if(30<i){var f=o-o%5;i=(n&(1<<f)-1).toString(32),n>>=f,o-=f,Hs=1<<32-De(a)+o|s<<o|n,$s=i+e}else Hs=1<<i|s<<o|n,$s=e}function Ji(e){e.return!==null&&(Ps(e,1),Ju(e,1,0))}function Ki(e){for(;e===ho;)ho=_r[--jr],_r[jr]=null,ml=_r[--jr],_r[jr]=null;for(;e===jn;)jn=xs[--_s],xs[_s]=null,$s=xs[--_s],xs[_s]=null,Hs=xs[--_s],xs[_s]=null}function Ku(e,a){xs[_s++]=Hs,xs[_s++]=$s,xs[_s++]=jn,Hs=a.id,$s=a.overflow,jn=e}var Ca=null,Ot=null,mt=!1,Sn=null,js=!1,Pi=Error(u(519));function Cn(e){var a=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw pl(gs(a,e)),Pi}function Pu(e){var a=e.stateNode,s=e.type,n=e.memoizedProps;switch(a[ft]=e,a[vt]=n,s){case"dialog":it("cancel",a),it("close",a);break;case"iframe":case"object":case"embed":it("load",a);break;case"video":case"audio":for(s=0;s<Dl.length;s++)it(Dl[s],a);break;case"source":it("error",a);break;case"img":case"image":case"link":it("error",a),it("load",a);break;case"details":it("toggle",a);break;case"input":it("invalid",a),ea(a,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":it("invalid",a);break;case"textarea":it("invalid",a),gn(a,n.value,n.defaultValue,n.children)}s=n.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||n.suppressHydrationWarning===!0||bf(a.textContent,s)?(n.popover!=null&&(it("beforetoggle",a),it("toggle",a)),n.onScroll!=null&&it("scroll",a),n.onScrollEnd!=null&&it("scrollend",a),n.onClick!=null&&(a.onclick=ut),a=!0):a=!1,a||Cn(e,!0)}function em(e){for(Ca=e.return;Ca;)switch(Ca.tag){case 5:case 31:case 13:js=!1;return;case 27:case 3:js=!0;return;default:Ca=Ca.return}}function Sr(e){if(e!==Ca)return!1;if(!mt)return em(e),mt=!0,!1;var a=e.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||bd(e.type,e.memoizedProps)),s=!s),s&&Ot&&Cn(e),em(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));Ot=kf(e)}else if(a===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));Ot=kf(e)}else a===27?(a=Ot,In(e.type)?(e=jd,jd=null,Ot=e):Ot=a):Ot=Ca?Cs(e.stateNode.nextSibling):null;return!0}function Jn(){Ot=Ca=null,mt=!1}function ec(){var e=Sn;return e!==null&&(Ja===null?Ja=e:Ja.push.apply(Ja,e),Sn=null),e}function pl(e){Sn===null?Sn=[e]:Sn.push(e)}var tc=C(null),Kn=null,en=null;function wn(e,a,s){oe(tc,a._currentValue),a._currentValue=s}function tn(e){e._currentValue=tc.current,$(tc)}function ac(e,a,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,n!==null&&(n.childLanes|=a)):n!==null&&(n.childLanes&a)!==a&&(n.childLanes|=a),e===s)break;e=e.return}}function sc(e,a,s,n){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var i=o.dependencies;if(i!==null){var f=o.child;i=i.firstContext;e:for(;i!==null;){var _=i;i=o;for(var q=0;q<a.length;q++)if(_.context===a[q]){i.lanes|=s,_=i.alternate,_!==null&&(_.lanes|=s),ac(i.return,s,e),n||(f=null);break e}i=_.next}}else if(o.tag===18){if(f=o.return,f===null)throw Error(u(341));f.lanes|=s,i=f.alternate,i!==null&&(i.lanes|=s),ac(f,s,e),f=null}else f=o.child;if(f!==null)f.return=o;else for(f=o;f!==null;){if(f===e){f=null;break}if(o=f.sibling,o!==null){o.return=f.return,f=o;break}f=f.return}o=f}}function Cr(e,a,s,n){e=null;for(var o=a,i=!1;o!==null;){if(!i){if((o.flags&524288)!==0)i=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var f=o.alternate;if(f===null)throw Error(u(387));if(f=f.memoizedProps,f!==null){var _=o.type;ls(o.pendingProps.value,f.value)||(e!==null?e.push(_):e=[_])}}else if(o===E.current){if(f=o.alternate,f===null)throw Error(u(387));f.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(ql):e=[ql])}o=o.return}e!==null&&sc(a,e,s,n),a.flags|=262144}function yo(e){for(e=e.firstContext;e!==null;){if(!ls(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Pn(e){Kn=e,en=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function wa(e){return tm(Kn,e)}function bo(e,a){return Kn===null&&Pn(e),tm(e,a)}function tm(e,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},en===null){if(e===null)throw Error(u(308));en=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else en=en.next=a;return s}var db=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(s,n){e.push(n)}};this.abort=function(){a.aborted=!0,e.forEach(function(s){return s()})}},ub=r.unstable_scheduleCallback,mb=r.unstable_NormalPriority,ia={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nc(){return{controller:new db,data:new Map,refCount:0}}function fl(e){e.refCount--,e.refCount===0&&ub(mb,function(){e.controller.abort()})}var hl=null,rc=0,wr=0,kr=null;function pb(e,a){if(hl===null){var s=hl=[];rc=0,wr=id(),kr={status:"pending",value:void 0,then:function(n){s.push(n)}}}return rc++,a.then(am,am),a}function am(){if(--rc===0&&hl!==null){kr!==null&&(kr.status="fulfilled");var e=hl;hl=null,wr=0,kr=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function fb(e,a){var s=[],n={status:"pending",value:null,reason:null,then:function(o){s.push(o)}};return e.then(function(){n.status="fulfilled",n.value=a;for(var o=0;o<s.length;o++)(0,s[o])(a)},function(o){for(n.status="rejected",n.reason=o,o=0;o<s.length;o++)(0,s[o])(void 0)}),n}var sm=w.S;w.S=function(e,a){qp=T(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&pb(e,a),sm!==null&&sm(e,a)};var er=C(null);function lc(){var e=er.current;return e!==null?e:Et.pooledCache}function vo(e,a){a===null?oe(er,er.current):oe(er,a.pool)}function nm(){var e=lc();return e===null?null:{parent:ia._currentValue,pool:e}}var Ar=Error(u(460)),oc=Error(u(474)),go=Error(u(542)),xo={then:function(){}};function rm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function lm(e,a,s){switch(s=e[s],s===void 0?e.push(a):s!==a&&(a.then(ut,ut),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,im(e),e;default:if(typeof a.status=="string")a.then(ut,ut);else{if(e=Et,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=a,e.status="pending",e.then(function(n){if(a.status==="pending"){var o=a;o.status="fulfilled",o.value=n}},function(n){if(a.status==="pending"){var o=a;o.status="rejected",o.reason=n}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,im(e),e}throw ar=a,Ar}}function tr(e){try{var a=e._init;return a(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(ar=s,Ar):s}}var ar=null;function om(){if(ar===null)throw Error(u(459));var e=ar;return ar=null,e}function im(e){if(e===Ar||e===go)throw Error(u(483))}var Nr=null,yl=0;function _o(e){var a=yl;return yl+=1,Nr===null&&(Nr=[]),lm(Nr,e,a)}function bl(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function jo(e,a){throw a.$$typeof===M?Error(u(525)):(e=Object.prototype.toString.call(a),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function cm(e){function a(ne,J){if(e){var ce=ne.deletions;ce===null?(ne.deletions=[J],ne.flags|=16):ce.push(J)}}function s(ne,J){if(!e)return null;for(;J!==null;)a(ne,J),J=J.sibling;return null}function n(ne){for(var J=new Map;ne!==null;)ne.key!==null?J.set(ne.key,ne):J.set(ne.index,ne),ne=ne.sibling;return J}function o(ne,J){return ne=Ks(ne,J),ne.index=0,ne.sibling=null,ne}function i(ne,J,ce){return ne.index=ce,e?(ce=ne.alternate,ce!==null?(ce=ce.index,ce<J?(ne.flags|=67108866,J):ce):(ne.flags|=67108866,J)):(ne.flags|=1048576,J)}function f(ne){return e&&ne.alternate===null&&(ne.flags|=67108866),ne}function _(ne,J,ce,je){return J===null||J.tag!==6?(J=Xi(ce,ne.mode,je),J.return=ne,J):(J=o(J,ce),J.return=ne,J)}function q(ne,J,ce,je){var Xe=ce.type;return Xe===H?ge(ne,J,ce.props.children,je,ce.key):J!==null&&(J.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===he&&tr(Xe)===J.type)?(J=o(J,ce.props),bl(J,ce),J.return=ne,J):(J=fo(ce.type,ce.key,ce.props,null,ne.mode,je),bl(J,ce),J.return=ne,J)}function de(ne,J,ce,je){return J===null||J.tag!==4||J.stateNode.containerInfo!==ce.containerInfo||J.stateNode.implementation!==ce.implementation?(J=Zi(ce,ne.mode,je),J.return=ne,J):(J=o(J,ce.children||[]),J.return=ne,J)}function ge(ne,J,ce,je,Xe){return J===null||J.tag!==7?(J=Zn(ce,ne.mode,je,Xe),J.return=ne,J):(J=o(J,ce),J.return=ne,J)}function Ce(ne,J,ce){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=Xi(""+J,ne.mode,ce),J.return=ne,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case I:return ce=fo(J.type,J.key,J.props,null,ne.mode,ce),bl(ce,J),ce.return=ne,ce;case k:return J=Zi(J,ne.mode,ce),J.return=ne,J;case he:return J=tr(J),Ce(ne,J,ce)}if(le(J)||re(J))return J=Zn(J,ne.mode,ce,null),J.return=ne,J;if(typeof J.then=="function")return Ce(ne,_o(J),ce);if(J.$$typeof===N)return Ce(ne,bo(ne,J),ce);jo(ne,J)}return null}function ue(ne,J,ce,je){var Xe=J!==null?J.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return Xe!==null?null:_(ne,J,""+ce,je);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case I:return ce.key===Xe?q(ne,J,ce,je):null;case k:return ce.key===Xe?de(ne,J,ce,je):null;case he:return ce=tr(ce),ue(ne,J,ce,je)}if(le(ce)||re(ce))return Xe!==null?null:ge(ne,J,ce,je,null);if(typeof ce.then=="function")return ue(ne,J,_o(ce),je);if(ce.$$typeof===N)return ue(ne,J,bo(ne,ce),je);jo(ne,ce)}return null}function pe(ne,J,ce,je,Xe){if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return ne=ne.get(ce)||null,_(J,ne,""+je,Xe);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case I:return ne=ne.get(je.key===null?ce:je.key)||null,q(J,ne,je,Xe);case k:return ne=ne.get(je.key===null?ce:je.key)||null,de(J,ne,je,Xe);case he:return je=tr(je),pe(ne,J,ce,je,Xe)}if(le(je)||re(je))return ne=ne.get(ce)||null,ge(J,ne,je,Xe,null);if(typeof je.then=="function")return pe(ne,J,ce,_o(je),Xe);if(je.$$typeof===N)return pe(ne,J,ce,bo(J,je),Xe);jo(J,je)}return null}function Oe(ne,J,ce,je){for(var Xe=null,gt=null,He=J,nt=J=0,dt=null;He!==null&&nt<ce.length;nt++){He.index>nt?(dt=He,He=null):dt=He.sibling;var xt=ue(ne,He,ce[nt],je);if(xt===null){He===null&&(He=dt);break}e&&He&&xt.alternate===null&&a(ne,He),J=i(xt,J,nt),gt===null?Xe=xt:gt.sibling=xt,gt=xt,He=dt}if(nt===ce.length)return s(ne,He),mt&&Ps(ne,nt),Xe;if(He===null){for(;nt<ce.length;nt++)He=Ce(ne,ce[nt],je),He!==null&&(J=i(He,J,nt),gt===null?Xe=He:gt.sibling=He,gt=He);return mt&&Ps(ne,nt),Xe}for(He=n(He);nt<ce.length;nt++)dt=pe(He,ne,nt,ce[nt],je),dt!==null&&(e&&dt.alternate!==null&&He.delete(dt.key===null?nt:dt.key),J=i(dt,J,nt),gt===null?Xe=dt:gt.sibling=dt,gt=dt);return e&&He.forEach(function($n){return a(ne,$n)}),mt&&Ps(ne,nt),Xe}function Je(ne,J,ce,je){if(ce==null)throw Error(u(151));for(var Xe=null,gt=null,He=J,nt=J=0,dt=null,xt=ce.next();He!==null&&!xt.done;nt++,xt=ce.next()){He.index>nt?(dt=He,He=null):dt=He.sibling;var $n=ue(ne,He,xt.value,je);if($n===null){He===null&&(He=dt);break}e&&He&&$n.alternate===null&&a(ne,He),J=i($n,J,nt),gt===null?Xe=$n:gt.sibling=$n,gt=$n,He=dt}if(xt.done)return s(ne,He),mt&&Ps(ne,nt),Xe;if(He===null){for(;!xt.done;nt++,xt=ce.next())xt=Ce(ne,xt.value,je),xt!==null&&(J=i(xt,J,nt),gt===null?Xe=xt:gt.sibling=xt,gt=xt);return mt&&Ps(ne,nt),Xe}for(He=n(He);!xt.done;nt++,xt=ce.next())xt=pe(He,ne,nt,xt.value,je),xt!==null&&(e&&xt.alternate!==null&&He.delete(xt.key===null?nt:xt.key),J=i(xt,J,nt),gt===null?Xe=xt:gt.sibling=xt,gt=xt);return e&&He.forEach(function(wv){return a(ne,wv)}),mt&&Ps(ne,nt),Xe}function Nt(ne,J,ce,je){if(typeof ce=="object"&&ce!==null&&ce.type===H&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case I:e:{for(var Xe=ce.key;J!==null;){if(J.key===Xe){if(Xe=ce.type,Xe===H){if(J.tag===7){s(ne,J.sibling),je=o(J,ce.props.children),je.return=ne,ne=je;break e}}else if(J.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===he&&tr(Xe)===J.type){s(ne,J.sibling),je=o(J,ce.props),bl(je,ce),je.return=ne,ne=je;break e}s(ne,J);break}else a(ne,J);J=J.sibling}ce.type===H?(je=Zn(ce.props.children,ne.mode,je,ce.key),je.return=ne,ne=je):(je=fo(ce.type,ce.key,ce.props,null,ne.mode,je),bl(je,ce),je.return=ne,ne=je)}return f(ne);case k:e:{for(Xe=ce.key;J!==null;){if(J.key===Xe)if(J.tag===4&&J.stateNode.containerInfo===ce.containerInfo&&J.stateNode.implementation===ce.implementation){s(ne,J.sibling),je=o(J,ce.children||[]),je.return=ne,ne=je;break e}else{s(ne,J);break}else a(ne,J);J=J.sibling}je=Zi(ce,ne.mode,je),je.return=ne,ne=je}return f(ne);case he:return ce=tr(ce),Nt(ne,J,ce,je)}if(le(ce))return Oe(ne,J,ce,je);if(re(ce)){if(Xe=re(ce),typeof Xe!="function")throw Error(u(150));return ce=Xe.call(ce),Je(ne,J,ce,je)}if(typeof ce.then=="function")return Nt(ne,J,_o(ce),je);if(ce.$$typeof===N)return Nt(ne,J,bo(ne,ce),je);jo(ne,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,J!==null&&J.tag===6?(s(ne,J.sibling),je=o(J,ce),je.return=ne,ne=je):(s(ne,J),je=Xi(ce,ne.mode,je),je.return=ne,ne=je),f(ne)):s(ne,J)}return function(ne,J,ce,je){try{yl=0;var Xe=Nt(ne,J,ce,je);return Nr=null,Xe}catch(He){if(He===Ar||He===go)throw He;var gt=os(29,He,null,ne.mode);return gt.lanes=je,gt.return=ne,gt}finally{}}}var sr=cm(!0),dm=cm(!1),kn=!1;function ic(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cc(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function An(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Nn(e,a,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(_t&2)!==0){var o=n.pending;return o===null?a.next=a:(a.next=o.next,o.next=a),n.pending=a,a=po(e),Vu(e,null,s),a}return mo(e,n,a,s),po(e)}function vl(e,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var n=a.lanes;n&=e.pendingLanes,s|=n,a.lanes=s,hs(e,s)}}function dc(e,a){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var o=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var f={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};i===null?o=i=f:i=i.next=f,s=s.next}while(s!==null);i===null?o=i=a:i=i.next=a}else o=i=a;s={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:n.shared,callbacks:n.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=a:e.next=a,s.lastBaseUpdate=a}var uc=!1;function gl(){if(uc){var e=kr;if(e!==null)throw e}}function xl(e,a,s,n){uc=!1;var o=e.updateQueue;kn=!1;var i=o.firstBaseUpdate,f=o.lastBaseUpdate,_=o.shared.pending;if(_!==null){o.shared.pending=null;var q=_,de=q.next;q.next=null,f===null?i=de:f.next=de,f=q;var ge=e.alternate;ge!==null&&(ge=ge.updateQueue,_=ge.lastBaseUpdate,_!==f&&(_===null?ge.firstBaseUpdate=de:_.next=de,ge.lastBaseUpdate=q))}if(i!==null){var Ce=o.baseState;f=0,ge=de=q=null,_=i;do{var ue=_.lane&-536870913,pe=ue!==_.lane;if(pe?(ct&ue)===ue:(n&ue)===ue){ue!==0&&ue===wr&&(uc=!0),ge!==null&&(ge=ge.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var Oe=e,Je=_;ue=a;var Nt=s;switch(Je.tag){case 1:if(Oe=Je.payload,typeof Oe=="function"){Ce=Oe.call(Nt,Ce,ue);break e}Ce=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Je.payload,ue=typeof Oe=="function"?Oe.call(Nt,Ce,ue):Oe,ue==null)break e;Ce=j({},Ce,ue);break e;case 2:kn=!0}}ue=_.callback,ue!==null&&(e.flags|=64,pe&&(e.flags|=8192),pe=o.callbacks,pe===null?o.callbacks=[ue]:pe.push(ue))}else pe={lane:ue,tag:_.tag,payload:_.payload,callback:_.callback,next:null},ge===null?(de=ge=pe,q=Ce):ge=ge.next=pe,f|=ue;if(_=_.next,_===null){if(_=o.shared.pending,_===null)break;pe=_,_=pe.next,pe.next=null,o.lastBaseUpdate=pe,o.shared.pending=null}}while(!0);ge===null&&(q=Ce),o.baseState=q,o.firstBaseUpdate=de,o.lastBaseUpdate=ge,i===null&&(o.shared.lanes=0),zn|=f,e.lanes=f,e.memoizedState=Ce}}function um(e,a){if(typeof e!="function")throw Error(u(191,e));e.call(a)}function mm(e,a){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)um(s[e],a)}var Rr=C(null),So=C(0);function pm(e,a){e=un,oe(So,e),oe(Rr,a),un=e|a.baseLanes}function mc(){oe(So,un),oe(Rr,Rr.current)}function pc(){un=So.current,$(Rr),$(So)}var is=C(null),Ss=null;function Rn(e){var a=e.alternate;oe(aa,aa.current&1),oe(is,e),Ss===null&&(a===null||Rr.current!==null||a.memoizedState!==null)&&(Ss=e)}function fc(e){oe(aa,aa.current),oe(is,e),Ss===null&&(Ss=e)}function fm(e){e.tag===22?(oe(aa,aa.current),oe(is,e),Ss===null&&(Ss=e)):Mn()}function Mn(){oe(aa,aa.current),oe(is,is.current)}function cs(e){$(is),Ss===e&&(Ss=null),$(aa)}var aa=C(0);function Co(e){for(var a=e;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||xd(s)||_d(s)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var an=0,st=null,kt=null,ca=null,wo=!1,Mr=!1,nr=!1,ko=0,_l=0,Tr=null,hb=0;function Zt(){throw Error(u(321))}function hc(e,a){if(a===null)return!1;for(var s=0;s<a.length&&s<e.length;s++)if(!ls(e[s],a[s]))return!1;return!0}function yc(e,a,s,n,o,i){return an=i,st=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,w.H=e===null||e.memoizedState===null?Jm:Tc,nr=!1,i=s(n,o),nr=!1,Mr&&(i=ym(a,s,n,o)),hm(e),i}function hm(e){w.H=Cl;var a=kt!==null&&kt.next!==null;if(an=0,ca=kt=st=null,wo=!1,_l=0,Tr=null,a)throw Error(u(300));e===null||da||(e=e.dependencies,e!==null&&yo(e)&&(da=!0))}function ym(e,a,s,n){st=e;var o=0;do{if(Mr&&(Tr=null),_l=0,Mr=!1,25<=o)throw Error(u(301));if(o+=1,ca=kt=null,e.updateQueue!=null){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}w.H=Km,i=a(s,n)}while(Mr);return i}function yb(){var e=w.H,a=e.useState()[0];return a=typeof a.then=="function"?jl(a):a,e=e.useState()[0],(kt!==null?kt.memoizedState:null)!==e&&(st.flags|=1024),a}function bc(){var e=ko!==0;return ko=0,e}function vc(e,a,s){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~s}function gc(e){if(wo){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}wo=!1}an=0,ca=kt=st=null,Mr=!1,_l=ko=0,Tr=null}function qa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ca===null?st.memoizedState=ca=e:ca=ca.next=e,ca}function sa(){if(kt===null){var e=st.alternate;e=e!==null?e.memoizedState:null}else e=kt.next;var a=ca===null?st.memoizedState:ca.next;if(a!==null)ca=a,kt=e;else{if(e===null)throw st.alternate===null?Error(u(467)):Error(u(310));kt=e,e={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},ca===null?st.memoizedState=ca=e:ca=ca.next=e}return ca}function Ao(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jl(e){var a=_l;return _l+=1,Tr===null&&(Tr=[]),e=lm(Tr,e,a),a=st,(ca===null?a.memoizedState:ca.next)===null&&(a=a.alternate,w.H=a===null||a.memoizedState===null?Jm:Tc),e}function No(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return jl(e);if(e.$$typeof===N)return wa(e)}throw Error(u(438,String(e)))}function xc(e){var a=null,s=st.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var n=st.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(a={data:n.data.map(function(o){return o.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=Ao(),st.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(e),n=0;n<e;n++)s[n]=Q;return a.index++,s}function sn(e,a){return typeof a=="function"?a(e):a}function Ro(e){var a=sa();return _c(a,kt,e)}function _c(e,a,s){var n=e.queue;if(n===null)throw Error(u(311));n.lastRenderedReducer=s;var o=e.baseQueue,i=n.pending;if(i!==null){if(o!==null){var f=o.next;o.next=i.next,i.next=f}a.baseQueue=o=i,n.pending=null}if(i=e.baseState,o===null)e.memoizedState=i;else{a=o.next;var _=f=null,q=null,de=a,ge=!1;do{var Ce=de.lane&-536870913;if(Ce!==de.lane?(ct&Ce)===Ce:(an&Ce)===Ce){var ue=de.revertLane;if(ue===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),Ce===wr&&(ge=!0);else if((an&ue)===ue){de=de.next,ue===wr&&(ge=!0);continue}else Ce={lane:0,revertLane:de.revertLane,gesture:null,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},q===null?(_=q=Ce,f=i):q=q.next=Ce,st.lanes|=ue,zn|=ue;Ce=de.action,nr&&s(i,Ce),i=de.hasEagerState?de.eagerState:s(i,Ce)}else ue={lane:Ce,revertLane:de.revertLane,gesture:de.gesture,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},q===null?(_=q=ue,f=i):q=q.next=ue,st.lanes|=Ce,zn|=Ce;de=de.next}while(de!==null&&de!==a);if(q===null?f=i:q.next=_,!ls(i,e.memoizedState)&&(da=!0,ge&&(s=kr,s!==null)))throw s;e.memoizedState=i,e.baseState=f,e.baseQueue=q,n.lastRenderedState=i}return o===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function jc(e){var a=sa(),s=a.queue;if(s===null)throw Error(u(311));s.lastRenderedReducer=e;var n=s.dispatch,o=s.pending,i=a.memoizedState;if(o!==null){s.pending=null;var f=o=o.next;do i=e(i,f.action),f=f.next;while(f!==o);ls(i,a.memoizedState)||(da=!0),a.memoizedState=i,a.baseQueue===null&&(a.baseState=i),s.lastRenderedState=i}return[i,n]}function bm(e,a,s){var n=st,o=sa(),i=mt;if(i){if(s===void 0)throw Error(u(407));s=s()}else s=a();var f=!ls((kt||o).memoizedState,s);if(f&&(o.memoizedState=s,da=!0),o=o.queue,wc(xm.bind(null,n,o,e),[e]),o.getSnapshot!==a||f||ca!==null&&ca.memoizedState.tag&1){if(n.flags|=2048,Er(9,{destroy:void 0},gm.bind(null,n,o,s,a),null),Et===null)throw Error(u(349));i||(an&127)!==0||vm(n,a,s)}return s}function vm(e,a,s){e.flags|=16384,e={getSnapshot:a,value:s},a=st.updateQueue,a===null?(a=Ao(),st.updateQueue=a,a.stores=[e]):(s=a.stores,s===null?a.stores=[e]:s.push(e))}function gm(e,a,s,n){a.value=s,a.getSnapshot=n,_m(a)&&jm(e)}function xm(e,a,s){return s(function(){_m(a)&&jm(e)})}function _m(e){var a=e.getSnapshot;e=e.value;try{var s=a();return!ls(e,s)}catch{return!0}}function jm(e){var a=Xn(e,2);a!==null&&Ka(a,e,2)}function Sc(e){var a=qa();if(typeof e=="function"){var s=e;if(e=s(),nr){Rt(!0);try{s()}finally{Rt(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sn,lastRenderedState:e},a}function Sm(e,a,s,n){return e.baseState=s,_c(e,kt,typeof n=="function"?n:sn)}function bb(e,a,s,n,o){if(Eo(e))throw Error(u(485));if(e=a.action,e!==null){var i={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){i.listeners.push(f)}};w.T!==null?s(!0):i.isTransition=!1,n(i),s=a.pending,s===null?(i.next=a.pending=i,Cm(a,i)):(i.next=s.next,a.pending=s.next=i)}}function Cm(e,a){var s=a.action,n=a.payload,o=e.state;if(a.isTransition){var i=w.T,f={};w.T=f;try{var _=s(o,n),q=w.S;q!==null&&q(f,_),wm(e,a,_)}catch(de){Cc(e,a,de)}finally{i!==null&&f.types!==null&&(i.types=f.types),w.T=i}}else try{i=s(o,n),wm(e,a,i)}catch(de){Cc(e,a,de)}}function wm(e,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(n){km(e,a,n)},function(n){return Cc(e,a,n)}):km(e,a,s)}function km(e,a,s){a.status="fulfilled",a.value=s,Am(a),e.state=s,a=e.pending,a!==null&&(s=a.next,s===a?e.pending=null:(s=s.next,a.next=s,Cm(e,s)))}function Cc(e,a,s){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do a.status="rejected",a.reason=s,Am(a),a=a.next;while(a!==n)}e.action=null}function Am(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function Nm(e,a){return a}function Rm(e,a){if(mt){var s=Et.formState;if(s!==null){e:{var n=st;if(mt){if(Ot){t:{for(var o=Ot,i=js;o.nodeType!==8;){if(!i){o=null;break t}if(o=Cs(o.nextSibling),o===null){o=null;break t}}i=o.data,o=i==="F!"||i==="F"?o:null}if(o){Ot=Cs(o.nextSibling),n=o.data==="F!";break e}}Cn(n)}n=!1}n&&(a=s[0])}}return s=qa(),s.memoizedState=s.baseState=a,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nm,lastRenderedState:a},s.queue=n,s=Qm.bind(null,st,n),n.dispatch=s,n=Sc(!1),i=Mc.bind(null,st,!1,n.queue),n=qa(),o={state:a,dispatch:null,action:e,pending:null},n.queue=o,s=bb.bind(null,st,o,i,s),o.dispatch=s,n.memoizedState=e,[a,s,!1]}function Mm(e){var a=sa();return Tm(a,kt,e)}function Tm(e,a,s){if(a=_c(e,a,Nm)[0],e=Ro(sn)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var n=jl(a)}catch(f){throw f===Ar?go:f}else n=a;a=sa();var o=a.queue,i=o.dispatch;return s!==a.memoizedState&&(st.flags|=2048,Er(9,{destroy:void 0},vb.bind(null,o,s),null)),[n,i,e]}function vb(e,a){e.action=a}function Em(e){var a=sa(),s=kt;if(s!==null)return Tm(a,s,e);sa(),a=a.memoizedState,s=sa();var n=s.queue.dispatch;return s.memoizedState=e,[a,n,!1]}function Er(e,a,s,n){return e={tag:e,create:s,deps:n,inst:a,next:null},a=st.updateQueue,a===null&&(a=Ao(),st.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,a.lastEffect=e),e}function zm(){return sa().memoizedState}function Mo(e,a,s,n){var o=qa();st.flags|=e,o.memoizedState=Er(1|a,{destroy:void 0},s,n===void 0?null:n)}function To(e,a,s,n){var o=sa();n=n===void 0?null:n;var i=o.memoizedState.inst;kt!==null&&n!==null&&hc(n,kt.memoizedState.deps)?o.memoizedState=Er(a,i,s,n):(st.flags|=e,o.memoizedState=Er(1|a,i,s,n))}function Bm(e,a){Mo(8390656,8,e,a)}function wc(e,a){To(2048,8,e,a)}function gb(e){st.flags|=4;var a=st.updateQueue;if(a===null)a=Ao(),st.updateQueue=a,a.events=[e];else{var s=a.events;s===null?a.events=[e]:s.push(e)}}function Dm(e){var a=sa().memoizedState;return gb({ref:a,nextImpl:e}),function(){if((_t&2)!==0)throw Error(u(440));return a.impl.apply(void 0,arguments)}}function Om(e,a){return To(4,2,e,a)}function Lm(e,a){return To(4,4,e,a)}function Im(e,a){if(typeof a=="function"){e=e();var s=a(e);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function Um(e,a,s){s=s!=null?s.concat([e]):null,To(4,4,Im.bind(null,a,e),s)}function kc(){}function qm(e,a){var s=sa();a=a===void 0?null:a;var n=s.memoizedState;return a!==null&&hc(a,n[1])?n[0]:(s.memoizedState=[e,a],e)}function Fm(e,a){var s=sa();a=a===void 0?null:a;var n=s.memoizedState;if(a!==null&&hc(a,n[1]))return n[0];if(n=e(),nr){Rt(!0);try{e()}finally{Rt(!1)}}return s.memoizedState=[n,a],n}function Ac(e,a,s){return s===void 0||(an&1073741824)!==0&&(ct&261930)===0?e.memoizedState=a:(e.memoizedState=s,e=Hp(),st.lanes|=e,zn|=e,s)}function Hm(e,a,s,n){return ls(s,a)?s:Rr.current!==null?(e=Ac(e,s,n),ls(e,a)||(da=!0),e):(an&42)===0||(an&1073741824)!==0&&(ct&261930)===0?(da=!0,e.memoizedState=s):(e=Hp(),st.lanes|=e,zn|=e,a)}function $m(e,a,s,n,o){var i=z.p;z.p=i!==0&&8>i?i:8;var f=w.T,_={};w.T=_,Mc(e,!1,a,s);try{var q=o(),de=w.S;if(de!==null&&de(_,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var ge=fb(q,n);Sl(e,a,ge,ms(e))}else Sl(e,a,n,ms(e))}catch(Ce){Sl(e,a,{then:function(){},status:"rejected",reason:Ce},ms())}finally{z.p=i,f!==null&&_.types!==null&&(f.types=_.types),w.T=f}}function xb(){}function Nc(e,a,s,n){if(e.tag!==5)throw Error(u(476));var o=Ym(e).queue;$m(e,o,a,X,s===null?xb:function(){return Wm(e),s(n)})}function Ym(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sn,lastRenderedState:X},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sn,lastRenderedState:s},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function Wm(e){var a=Ym(e);a.next===null&&(a=e.alternate.memoizedState),Sl(e,a.next.queue,{},ms())}function Rc(){return wa(ql)}function Gm(){return sa().memoizedState}function Vm(){return sa().memoizedState}function _b(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var s=ms();e=An(s);var n=Nn(a,e,s);n!==null&&(Ka(n,a,s),vl(n,a,s)),a={cache:nc()},e.payload=a;return}a=a.return}}function jb(e,a,s){var n=ms();s={lane:n,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Eo(e)?Xm(a,s):(s=Vi(e,a,s,n),s!==null&&(Ka(s,e,n),Zm(s,a,n)))}function Qm(e,a,s){var n=ms();Sl(e,a,s,n)}function Sl(e,a,s,n){var o={lane:n,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Eo(e))Xm(a,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=a.lastRenderedReducer,i!==null))try{var f=a.lastRenderedState,_=i(f,s);if(o.hasEagerState=!0,o.eagerState=_,ls(_,f))return mo(e,a,o,0),Et===null&&uo(),!1}catch{}finally{}if(s=Vi(e,a,o,n),s!==null)return Ka(s,e,n),Zm(s,a,n),!0}return!1}function Mc(e,a,s,n){if(n={lane:2,revertLane:id(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Eo(e)){if(a)throw Error(u(479))}else a=Vi(e,s,n,2),a!==null&&Ka(a,e,2)}function Eo(e){var a=e.alternate;return e===st||a!==null&&a===st}function Xm(e,a){Mr=wo=!0;var s=e.pending;s===null?a.next=a:(a.next=s.next,s.next=a),e.pending=a}function Zm(e,a,s){if((s&4194048)!==0){var n=a.lanes;n&=e.pendingLanes,s|=n,a.lanes=s,hs(e,s)}}var Cl={readContext:wa,use:No,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useLayoutEffect:Zt,useInsertionEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useSyncExternalStore:Zt,useId:Zt,useHostTransitionStatus:Zt,useFormState:Zt,useActionState:Zt,useOptimistic:Zt,useMemoCache:Zt,useCacheRefresh:Zt};Cl.useEffectEvent=Zt;var Jm={readContext:wa,use:No,useCallback:function(e,a){return qa().memoizedState=[e,a===void 0?null:a],e},useContext:wa,useEffect:Bm,useImperativeHandle:function(e,a,s){s=s!=null?s.concat([e]):null,Mo(4194308,4,Im.bind(null,a,e),s)},useLayoutEffect:function(e,a){return Mo(4194308,4,e,a)},useInsertionEffect:function(e,a){Mo(4,2,e,a)},useMemo:function(e,a){var s=qa();a=a===void 0?null:a;var n=e();if(nr){Rt(!0);try{e()}finally{Rt(!1)}}return s.memoizedState=[n,a],n},useReducer:function(e,a,s){var n=qa();if(s!==void 0){var o=s(a);if(nr){Rt(!0);try{s(a)}finally{Rt(!1)}}}else o=a;return n.memoizedState=n.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},n.queue=e,e=e.dispatch=jb.bind(null,st,e),[n.memoizedState,e]},useRef:function(e){var a=qa();return e={current:e},a.memoizedState=e},useState:function(e){e=Sc(e);var a=e.queue,s=Qm.bind(null,st,a);return a.dispatch=s,[e.memoizedState,s]},useDebugValue:kc,useDeferredValue:function(e,a){var s=qa();return Ac(s,e,a)},useTransition:function(){var e=Sc(!1);return e=$m.bind(null,st,e.queue,!0,!1),qa().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,s){var n=st,o=qa();if(mt){if(s===void 0)throw Error(u(407));s=s()}else{if(s=a(),Et===null)throw Error(u(349));(ct&127)!==0||vm(n,a,s)}o.memoizedState=s;var i={value:s,getSnapshot:a};return o.queue=i,Bm(xm.bind(null,n,i,e),[e]),n.flags|=2048,Er(9,{destroy:void 0},gm.bind(null,n,i,s,a),null),s},useId:function(){var e=qa(),a=Et.identifierPrefix;if(mt){var s=$s,n=Hs;s=(n&~(1<<32-De(n)-1)).toString(32)+s,a="_"+a+"R_"+s,s=ko++,0<s&&(a+="H"+s.toString(32)),a+="_"}else s=hb++,a="_"+a+"r_"+s.toString(32)+"_";return e.memoizedState=a},useHostTransitionStatus:Rc,useFormState:Rm,useActionState:Rm,useOptimistic:function(e){var a=qa();a.memoizedState=a.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=Mc.bind(null,st,!0,s),s.dispatch=a,[e,a]},useMemoCache:xc,useCacheRefresh:function(){return qa().memoizedState=_b.bind(null,st)},useEffectEvent:function(e){var a=qa(),s={impl:e};return a.memoizedState=s,function(){if((_t&2)!==0)throw Error(u(440));return s.impl.apply(void 0,arguments)}}},Tc={readContext:wa,use:No,useCallback:qm,useContext:wa,useEffect:wc,useImperativeHandle:Um,useInsertionEffect:Om,useLayoutEffect:Lm,useMemo:Fm,useReducer:Ro,useRef:zm,useState:function(){return Ro(sn)},useDebugValue:kc,useDeferredValue:function(e,a){var s=sa();return Hm(s,kt.memoizedState,e,a)},useTransition:function(){var e=Ro(sn)[0],a=sa().memoizedState;return[typeof e=="boolean"?e:jl(e),a]},useSyncExternalStore:bm,useId:Gm,useHostTransitionStatus:Rc,useFormState:Mm,useActionState:Mm,useOptimistic:function(e,a){var s=sa();return Sm(s,kt,e,a)},useMemoCache:xc,useCacheRefresh:Vm};Tc.useEffectEvent=Dm;var Km={readContext:wa,use:No,useCallback:qm,useContext:wa,useEffect:wc,useImperativeHandle:Um,useInsertionEffect:Om,useLayoutEffect:Lm,useMemo:Fm,useReducer:jc,useRef:zm,useState:function(){return jc(sn)},useDebugValue:kc,useDeferredValue:function(e,a){var s=sa();return kt===null?Ac(s,e,a):Hm(s,kt.memoizedState,e,a)},useTransition:function(){var e=jc(sn)[0],a=sa().memoizedState;return[typeof e=="boolean"?e:jl(e),a]},useSyncExternalStore:bm,useId:Gm,useHostTransitionStatus:Rc,useFormState:Em,useActionState:Em,useOptimistic:function(e,a){var s=sa();return kt!==null?Sm(s,kt,e,a):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:xc,useCacheRefresh:Vm};Km.useEffectEvent=Dm;function Ec(e,a,s,n){a=e.memoizedState,s=s(n,a),s=s==null?a:j({},a,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var zc={enqueueSetState:function(e,a,s){e=e._reactInternals;var n=ms(),o=An(n);o.payload=a,s!=null&&(o.callback=s),a=Nn(e,o,n),a!==null&&(Ka(a,e,n),vl(a,e,n))},enqueueReplaceState:function(e,a,s){e=e._reactInternals;var n=ms(),o=An(n);o.tag=1,o.payload=a,s!=null&&(o.callback=s),a=Nn(e,o,n),a!==null&&(Ka(a,e,n),vl(a,e,n))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var s=ms(),n=An(s);n.tag=2,a!=null&&(n.callback=a),a=Nn(e,n,s),a!==null&&(Ka(a,e,s),vl(a,e,s))}};function Pm(e,a,s,n,o,i,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,f):a.prototype&&a.prototype.isPureReactComponent?!dl(s,n)||!dl(o,i):!0}function ep(e,a,s,n){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,n),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,n),a.state!==e&&zc.enqueueReplaceState(a,a.state,null)}function rr(e,a){var s=a;if("ref"in a){s={};for(var n in a)n!=="ref"&&(s[n]=a[n])}if(e=e.defaultProps){s===a&&(s=j({},s));for(var o in e)s[o]===void 0&&(s[o]=e[o])}return s}function tp(e){co(e)}function ap(e){console.error(e)}function sp(e){co(e)}function zo(e,a){try{var s=e.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(n){setTimeout(function(){throw n})}}function np(e,a,s){try{var n=e.onCaughtError;n(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Bc(e,a,s){return s=An(s),s.tag=3,s.payload={element:null},s.callback=function(){zo(e,a)},s}function rp(e){return e=An(e),e.tag=3,e}function lp(e,a,s,n){var o=s.type.getDerivedStateFromError;if(typeof o=="function"){var i=n.value;e.payload=function(){return o(i)},e.callback=function(){np(a,s,n)}}var f=s.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){np(a,s,n),typeof o!="function"&&(Bn===null?Bn=new Set([this]):Bn.add(this));var _=n.stack;this.componentDidCatch(n.value,{componentStack:_!==null?_:""})})}function Sb(e,a,s,n,o){if(s.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(a=s.alternate,a!==null&&Cr(a,s,o,!0),s=is.current,s!==null){switch(s.tag){case 31:case 13:return Ss===null?Wo():s.alternate===null&&Jt===0&&(Jt=3),s.flags&=-257,s.flags|=65536,s.lanes=o,n===xo?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([n]):a.add(n),rd(e,n,o)),!1;case 22:return s.flags|=65536,n===xo?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([n])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([n]):s.add(n)),rd(e,n,o)),!1}throw Error(u(435,s.tag))}return rd(e,n,o),Wo(),!1}if(mt)return a=is.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=o,n!==Pi&&(e=Error(u(422),{cause:n}),pl(gs(e,s)))):(n!==Pi&&(a=Error(u(423),{cause:n}),pl(gs(a,s))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,n=gs(n,s),o=Bc(e.stateNode,n,o),dc(e,o),Jt!==4&&(Jt=2)),!1;var i=Error(u(520),{cause:n});if(i=gs(i,s),El===null?El=[i]:El.push(i),Jt!==4&&(Jt=2),a===null)return!0;n=gs(n,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,e=o&-o,s.lanes|=e,e=Bc(s.stateNode,n,e),dc(s,e),!1;case 1:if(a=s.type,i=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(Bn===null||!Bn.has(i))))return s.flags|=65536,o&=-o,s.lanes|=o,o=rp(o),lp(o,e,s,n),dc(s,o),!1}s=s.return}while(s!==null);return!1}var Dc=Error(u(461)),da=!1;function ka(e,a,s,n){a.child=e===null?dm(a,null,s,n):sr(a,e.child,s,n)}function op(e,a,s,n,o){s=s.render;var i=a.ref;if("ref"in n){var f={};for(var _ in n)_!=="ref"&&(f[_]=n[_])}else f=n;return Pn(a),n=yc(e,a,s,f,i,o),_=bc(),e!==null&&!da?(vc(e,a,o),nn(e,a,o)):(mt&&_&&Ji(a),a.flags|=1,ka(e,a,n,o),a.child)}function ip(e,a,s,n,o){if(e===null){var i=s.type;return typeof i=="function"&&!Qi(i)&&i.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=i,cp(e,a,i,n,o)):(e=fo(s.type,null,n,a,a.mode,o),e.ref=a.ref,e.return=a,a.child=e)}if(i=e.child,!$c(e,o)){var f=i.memoizedProps;if(s=s.compare,s=s!==null?s:dl,s(f,n)&&e.ref===a.ref)return nn(e,a,o)}return a.flags|=1,e=Ks(i,n),e.ref=a.ref,e.return=a,a.child=e}function cp(e,a,s,n,o){if(e!==null){var i=e.memoizedProps;if(dl(i,n)&&e.ref===a.ref)if(da=!1,a.pendingProps=n=i,$c(e,o))(e.flags&131072)!==0&&(da=!0);else return a.lanes=e.lanes,nn(e,a,o)}return Oc(e,a,s,n,o)}function dp(e,a,s,n){var o=n.children,i=e!==null?e.memoizedState:null;if(e===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((a.flags&128)!==0){if(i=i!==null?i.baseLanes|s:s,e!==null){for(n=a.child=e.child,o=0;n!==null;)o=o|n.lanes|n.childLanes,n=n.sibling;n=o&~i}else n=0,a.child=null;return up(e,a,i,s,n)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&vo(a,i!==null?i.cachePool:null),i!==null?pm(a,i):mc(),fm(a);else return n=a.lanes=536870912,up(e,a,i!==null?i.baseLanes|s:s,s,n)}else i!==null?(vo(a,i.cachePool),pm(a,i),Mn(),a.memoizedState=null):(e!==null&&vo(a,null),mc(),Mn());return ka(e,a,o,s),a.child}function wl(e,a){return e!==null&&e.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function up(e,a,s,n,o){var i=lc();return i=i===null?null:{parent:ia._currentValue,pool:i},a.memoizedState={baseLanes:s,cachePool:i},e!==null&&vo(a,null),mc(),fm(a),e!==null&&Cr(e,a,n,!0),a.childLanes=o,null}function Bo(e,a){return a=Oo({mode:a.mode,children:a.children},e.mode),a.ref=e.ref,e.child=a,a.return=e,a}function mp(e,a,s){return sr(a,e.child,null,s),e=Bo(a,a.pendingProps),e.flags|=2,cs(a),a.memoizedState=null,e}function Cb(e,a,s){var n=a.pendingProps,o=(a.flags&128)!==0;if(a.flags&=-129,e===null){if(mt){if(n.mode==="hidden")return e=Bo(a,n),a.lanes=536870912,wl(null,e);if(fc(a),(e=Ot)?(e=wf(e,js),e=e!==null&&e.data==="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:jn!==null?{id:Hs,overflow:$s}:null,retryLane:536870912,hydrationErrors:null},s=Xu(e),s.return=a,a.child=s,Ca=a,Ot=null)):e=null,e===null)throw Cn(a);return a.lanes=536870912,null}return Bo(a,n)}var i=e.memoizedState;if(i!==null){var f=i.dehydrated;if(fc(a),o)if(a.flags&256)a.flags&=-257,a=mp(e,a,s);else if(a.memoizedState!==null)a.child=e.child,a.flags|=128,a=null;else throw Error(u(558));else if(da||Cr(e,a,s,!1),o=(s&e.childLanes)!==0,da||o){if(n=Et,n!==null&&(f=Pt(n,s),f!==0&&f!==i.retryLane))throw i.retryLane=f,Xn(e,f),Ka(n,e,f),Dc;Wo(),a=mp(e,a,s)}else e=i.treeContext,Ot=Cs(f.nextSibling),Ca=a,mt=!0,Sn=null,js=!1,e!==null&&Ku(a,e),a=Bo(a,n),a.flags|=4096;return a}return e=Ks(e.child,{mode:n.mode,children:n.children}),e.ref=a.ref,a.child=e,e.return=a,e}function Do(e,a){var s=a.ref;if(s===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(u(284));(e===null||e.ref!==s)&&(a.flags|=4194816)}}function Oc(e,a,s,n,o){return Pn(a),s=yc(e,a,s,n,void 0,o),n=bc(),e!==null&&!da?(vc(e,a,o),nn(e,a,o)):(mt&&n&&Ji(a),a.flags|=1,ka(e,a,s,o),a.child)}function pp(e,a,s,n,o,i){return Pn(a),a.updateQueue=null,s=ym(a,n,s,o),hm(e),n=bc(),e!==null&&!da?(vc(e,a,i),nn(e,a,i)):(mt&&n&&Ji(a),a.flags|=1,ka(e,a,s,i),a.child)}function fp(e,a,s,n,o){if(Pn(a),a.stateNode===null){var i=xr,f=s.contextType;typeof f=="object"&&f!==null&&(i=wa(f)),i=new s(n,i),a.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=zc,a.stateNode=i,i._reactInternals=a,i=a.stateNode,i.props=n,i.state=a.memoizedState,i.refs={},ic(a),f=s.contextType,i.context=typeof f=="object"&&f!==null?wa(f):xr,i.state=a.memoizedState,f=s.getDerivedStateFromProps,typeof f=="function"&&(Ec(a,s,f,n),i.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(f=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),f!==i.state&&zc.enqueueReplaceState(i,i.state,null),xl(a,n,i,o),gl(),i.state=a.memoizedState),typeof i.componentDidMount=="function"&&(a.flags|=4194308),n=!0}else if(e===null){i=a.stateNode;var _=a.memoizedProps,q=rr(s,_);i.props=q;var de=i.context,ge=s.contextType;f=xr,typeof ge=="object"&&ge!==null&&(f=wa(ge));var Ce=s.getDerivedStateFromProps;ge=typeof Ce=="function"||typeof i.getSnapshotBeforeUpdate=="function",_=a.pendingProps!==_,ge||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(_||de!==f)&&ep(a,i,n,f),kn=!1;var ue=a.memoizedState;i.state=ue,xl(a,n,i,o),gl(),de=a.memoizedState,_||ue!==de||kn?(typeof Ce=="function"&&(Ec(a,s,Ce,n),de=a.memoizedState),(q=kn||Pm(a,s,q,n,ue,de,f))?(ge||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(a.flags|=4194308)):(typeof i.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=n,a.memoizedState=de),i.props=n,i.state=de,i.context=f,n=q):(typeof i.componentDidMount=="function"&&(a.flags|=4194308),n=!1)}else{i=a.stateNode,cc(e,a),f=a.memoizedProps,ge=rr(s,f),i.props=ge,Ce=a.pendingProps,ue=i.context,de=s.contextType,q=xr,typeof de=="object"&&de!==null&&(q=wa(de)),_=s.getDerivedStateFromProps,(de=typeof _=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(f!==Ce||ue!==q)&&ep(a,i,n,q),kn=!1,ue=a.memoizedState,i.state=ue,xl(a,n,i,o),gl();var pe=a.memoizedState;f!==Ce||ue!==pe||kn||e!==null&&e.dependencies!==null&&yo(e.dependencies)?(typeof _=="function"&&(Ec(a,s,_,n),pe=a.memoizedState),(ge=kn||Pm(a,s,ge,n,ue,pe,q)||e!==null&&e.dependencies!==null&&yo(e.dependencies))?(de||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,pe,q),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,pe,q)),typeof i.componentDidUpdate=="function"&&(a.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof i.componentDidUpdate!="function"||f===e.memoizedProps&&ue===e.memoizedState||(a.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&ue===e.memoizedState||(a.flags|=1024),a.memoizedProps=n,a.memoizedState=pe),i.props=n,i.state=pe,i.context=q,n=ge):(typeof i.componentDidUpdate!="function"||f===e.memoizedProps&&ue===e.memoizedState||(a.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&ue===e.memoizedState||(a.flags|=1024),n=!1)}return i=n,Do(e,a),n=(a.flags&128)!==0,i||n?(i=a.stateNode,s=n&&typeof s.getDerivedStateFromError!="function"?null:i.render(),a.flags|=1,e!==null&&n?(a.child=sr(a,e.child,null,o),a.child=sr(a,null,s,o)):ka(e,a,s,o),a.memoizedState=i.state,e=a.child):e=nn(e,a,o),e}function hp(e,a,s,n){return Jn(),a.flags|=256,ka(e,a,s,n),a.child}var Lc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ic(e){return{baseLanes:e,cachePool:nm()}}function Uc(e,a,s){return e=e!==null?e.childLanes&~s:0,a&&(e|=us),e}function yp(e,a,s){var n=a.pendingProps,o=!1,i=(a.flags&128)!==0,f;if((f=i)||(f=e!==null&&e.memoizedState===null?!1:(aa.current&2)!==0),f&&(o=!0,a.flags&=-129),f=(a.flags&32)!==0,a.flags&=-33,e===null){if(mt){if(o?Rn(a):Mn(),(e=Ot)?(e=wf(e,js),e=e!==null&&e.data!=="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:jn!==null?{id:Hs,overflow:$s}:null,retryLane:536870912,hydrationErrors:null},s=Xu(e),s.return=a,a.child=s,Ca=a,Ot=null)):e=null,e===null)throw Cn(a);return _d(e)?a.lanes=32:a.lanes=536870912,null}var _=n.children;return n=n.fallback,o?(Mn(),o=a.mode,_=Oo({mode:"hidden",children:_},o),n=Zn(n,o,s,null),_.return=a,n.return=a,_.sibling=n,a.child=_,n=a.child,n.memoizedState=Ic(s),n.childLanes=Uc(e,f,s),a.memoizedState=Lc,wl(null,n)):(Rn(a),qc(a,_))}var q=e.memoizedState;if(q!==null&&(_=q.dehydrated,_!==null)){if(i)a.flags&256?(Rn(a),a.flags&=-257,a=Fc(e,a,s)):a.memoizedState!==null?(Mn(),a.child=e.child,a.flags|=128,a=null):(Mn(),_=n.fallback,o=a.mode,n=Oo({mode:"visible",children:n.children},o),_=Zn(_,o,s,null),_.flags|=2,n.return=a,_.return=a,n.sibling=_,a.child=n,sr(a,e.child,null,s),n=a.child,n.memoizedState=Ic(s),n.childLanes=Uc(e,f,s),a.memoizedState=Lc,a=wl(null,n));else if(Rn(a),_d(_)){if(f=_.nextSibling&&_.nextSibling.dataset,f)var de=f.dgst;f=de,n=Error(u(419)),n.stack="",n.digest=f,pl({value:n,source:null,stack:null}),a=Fc(e,a,s)}else if(da||Cr(e,a,s,!1),f=(s&e.childLanes)!==0,da||f){if(f=Et,f!==null&&(n=Pt(f,s),n!==0&&n!==q.retryLane))throw q.retryLane=n,Xn(e,n),Ka(f,e,n),Dc;xd(_)||Wo(),a=Fc(e,a,s)}else xd(_)?(a.flags|=192,a.child=e.child,a=null):(e=q.treeContext,Ot=Cs(_.nextSibling),Ca=a,mt=!0,Sn=null,js=!1,e!==null&&Ku(a,e),a=qc(a,n.children),a.flags|=4096);return a}return o?(Mn(),_=n.fallback,o=a.mode,q=e.child,de=q.sibling,n=Ks(q,{mode:"hidden",children:n.children}),n.subtreeFlags=q.subtreeFlags&65011712,de!==null?_=Ks(de,_):(_=Zn(_,o,s,null),_.flags|=2),_.return=a,n.return=a,n.sibling=_,a.child=n,wl(null,n),n=a.child,_=e.child.memoizedState,_===null?_=Ic(s):(o=_.cachePool,o!==null?(q=ia._currentValue,o=o.parent!==q?{parent:q,pool:q}:o):o=nm(),_={baseLanes:_.baseLanes|s,cachePool:o}),n.memoizedState=_,n.childLanes=Uc(e,f,s),a.memoizedState=Lc,wl(e.child,n)):(Rn(a),s=e.child,e=s.sibling,s=Ks(s,{mode:"visible",children:n.children}),s.return=a,s.sibling=null,e!==null&&(f=a.deletions,f===null?(a.deletions=[e],a.flags|=16):f.push(e)),a.child=s,a.memoizedState=null,s)}function qc(e,a){return a=Oo({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function Oo(e,a){return e=os(22,e,null,a),e.lanes=0,e}function Fc(e,a,s){return sr(a,e.child,null,s),e=qc(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function bp(e,a,s){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a),ac(e.return,a,s)}function Hc(e,a,s,n,o,i){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:o,treeForkCount:i}:(f.isBackwards=a,f.rendering=null,f.renderingStartTime=0,f.last=n,f.tail=s,f.tailMode=o,f.treeForkCount=i)}function vp(e,a,s){var n=a.pendingProps,o=n.revealOrder,i=n.tail;n=n.children;var f=aa.current,_=(f&2)!==0;if(_?(f=f&1|2,a.flags|=128):f&=1,oe(aa,f),ka(e,a,n,s),n=mt?ml:0,!_&&e!==null&&(e.flags&128)!==0)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bp(e,s,a);else if(e.tag===19)bp(e,s,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(s=a.child,o=null;s!==null;)e=s.alternate,e!==null&&Co(e)===null&&(o=s),s=s.sibling;s=o,s===null?(o=a.child,a.child=null):(o=s.sibling,s.sibling=null),Hc(a,!1,o,s,i,n);break;case"backwards":case"unstable_legacy-backwards":for(s=null,o=a.child,a.child=null;o!==null;){if(e=o.alternate,e!==null&&Co(e)===null){a.child=o;break}e=o.sibling,o.sibling=s,s=o,o=e}Hc(a,!0,s,null,i,n);break;case"together":Hc(a,!1,null,null,void 0,n);break;default:a.memoizedState=null}return a.child}function nn(e,a,s){if(e!==null&&(a.dependencies=e.dependencies),zn|=a.lanes,(s&a.childLanes)===0)if(e!==null){if(Cr(e,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(u(153));if(a.child!==null){for(e=a.child,s=Ks(e,e.pendingProps),a.child=s,s.return=a;e.sibling!==null;)e=e.sibling,s=s.sibling=Ks(e,e.pendingProps),s.return=a;s.sibling=null}return a.child}function $c(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&yo(e)))}function wb(e,a,s){switch(a.tag){case 3:ie(a,a.stateNode.containerInfo),wn(a,ia,e.memoizedState.cache),Jn();break;case 27:case 5:O(a);break;case 4:ie(a,a.stateNode.containerInfo);break;case 10:wn(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,fc(a),null;break;case 13:var n=a.memoizedState;if(n!==null)return n.dehydrated!==null?(Rn(a),a.flags|=128,null):(s&a.child.childLanes)!==0?yp(e,a,s):(Rn(a),e=nn(e,a,s),e!==null?e.sibling:null);Rn(a);break;case 19:var o=(e.flags&128)!==0;if(n=(s&a.childLanes)!==0,n||(Cr(e,a,s,!1),n=(s&a.childLanes)!==0),o){if(n)return vp(e,a,s);a.flags|=128}if(o=a.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),oe(aa,aa.current),n)break;return null;case 22:return a.lanes=0,dp(e,a,s,a.pendingProps);case 24:wn(a,ia,e.memoizedState.cache)}return nn(e,a,s)}function gp(e,a,s){if(e!==null)if(e.memoizedProps!==a.pendingProps)da=!0;else{if(!$c(e,s)&&(a.flags&128)===0)return da=!1,wb(e,a,s);da=(e.flags&131072)!==0}else da=!1,mt&&(a.flags&1048576)!==0&&Ju(a,ml,a.index);switch(a.lanes=0,a.tag){case 16:e:{var n=a.pendingProps;if(e=tr(a.elementType),a.type=e,typeof e=="function")Qi(e)?(n=rr(e,n),a.tag=1,a=fp(null,a,e,n,s)):(a.tag=0,a=Oc(null,a,e,n,s));else{if(e!=null){var o=e.$$typeof;if(o===R){a.tag=11,a=op(null,a,e,n,s);break e}else if(o===Y){a.tag=14,a=ip(null,a,e,n,s);break e}}throw a=Ne(e)||e,Error(u(306,a,""))}}return a;case 0:return Oc(e,a,a.type,a.pendingProps,s);case 1:return n=a.type,o=rr(n,a.pendingProps),fp(e,a,n,o,s);case 3:e:{if(ie(a,a.stateNode.containerInfo),e===null)throw Error(u(387));n=a.pendingProps;var i=a.memoizedState;o=i.element,cc(e,a),xl(a,n,null,s);var f=a.memoizedState;if(n=f.cache,wn(a,ia,n),n!==i.cache&&sc(a,[ia],s,!0),gl(),n=f.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:f.cache},a.updateQueue.baseState=i,a.memoizedState=i,a.flags&256){a=hp(e,a,n,s);break e}else if(n!==o){o=gs(Error(u(424)),a),pl(o),a=hp(e,a,n,s);break e}else{switch(e=a.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ot=Cs(e.firstChild),Ca=a,mt=!0,Sn=null,js=!0,s=dm(a,null,n,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Jn(),n===o){a=nn(e,a,s);break e}ka(e,a,n,s)}a=a.child}return a;case 26:return Do(e,a),e===null?(s=Tf(a.type,null,a.pendingProps,null))?a.memoizedState=s:mt||(s=a.type,e=a.pendingProps,n=Ko(Ae.current).createElement(s),n[ft]=a,n[vt]=e,Aa(n,s,e),ht(n),a.stateNode=n):a.memoizedState=Tf(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return O(a),e===null&&mt&&(n=a.stateNode=Nf(a.type,a.pendingProps,Ae.current),Ca=a,js=!0,o=Ot,In(a.type)?(jd=o,Ot=Cs(n.firstChild)):Ot=o),ka(e,a,a.pendingProps.children,s),Do(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&mt&&((o=n=Ot)&&(n=tv(n,a.type,a.pendingProps,js),n!==null?(a.stateNode=n,Ca=a,Ot=Cs(n.firstChild),js=!1,o=!0):o=!1),o||Cn(a)),O(a),o=a.type,i=a.pendingProps,f=e!==null?e.memoizedProps:null,n=i.children,bd(o,i)?n=null:f!==null&&bd(o,f)&&(a.flags|=32),a.memoizedState!==null&&(o=yc(e,a,yb,null,null,s),ql._currentValue=o),Do(e,a),ka(e,a,n,s),a.child;case 6:return e===null&&mt&&((e=s=Ot)&&(s=av(s,a.pendingProps,js),s!==null?(a.stateNode=s,Ca=a,Ot=null,e=!0):e=!1),e||Cn(a)),null;case 13:return yp(e,a,s);case 4:return ie(a,a.stateNode.containerInfo),n=a.pendingProps,e===null?a.child=sr(a,null,n,s):ka(e,a,n,s),a.child;case 11:return op(e,a,a.type,a.pendingProps,s);case 7:return ka(e,a,a.pendingProps,s),a.child;case 8:return ka(e,a,a.pendingProps.children,s),a.child;case 12:return ka(e,a,a.pendingProps.children,s),a.child;case 10:return n=a.pendingProps,wn(a,a.type,n.value),ka(e,a,n.children,s),a.child;case 9:return o=a.type._context,n=a.pendingProps.children,Pn(a),o=wa(o),n=n(o),a.flags|=1,ka(e,a,n,s),a.child;case 14:return ip(e,a,a.type,a.pendingProps,s);case 15:return cp(e,a,a.type,a.pendingProps,s);case 19:return vp(e,a,s);case 31:return Cb(e,a,s);case 22:return dp(e,a,s,a.pendingProps);case 24:return Pn(a),n=wa(ia),e===null?(o=lc(),o===null&&(o=Et,i=nc(),o.pooledCache=i,i.refCount++,i!==null&&(o.pooledCacheLanes|=s),o=i),a.memoizedState={parent:n,cache:o},ic(a),wn(a,ia,o)):((e.lanes&s)!==0&&(cc(e,a),xl(a,null,null,s),gl()),o=e.memoizedState,i=a.memoizedState,o.parent!==n?(o={parent:n,cache:n},a.memoizedState=o,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=o),wn(a,ia,n)):(n=i.cache,wn(a,ia,n),n!==o.cache&&sc(a,[ia],s,!0))),ka(e,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(u(156,a.tag))}function rn(e){e.flags|=4}function Yc(e,a,s,n,o){if((a=(e.mode&32)!==0)&&(a=!1),a){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(Gp())e.flags|=8192;else throw ar=xo,oc}else e.flags&=-16777217}function xp(e,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Of(a))if(Gp())e.flags|=8192;else throw ar=xo,oc}function Lo(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?Na():536870912,e.lanes|=a,Or|=a)}function kl(e,a){if(!mt)switch(e.tailMode){case"hidden":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Lt(e){var a=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(a)for(var o=e.child;o!==null;)s|=o.lanes|o.childLanes,n|=o.subtreeFlags&65011712,n|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)s|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=n,e.childLanes=s,a}function kb(e,a,s){var n=a.pendingProps;switch(Ki(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(a),null;case 1:return Lt(a),null;case 3:return s=a.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),a.memoizedState.cache!==n&&(a.flags|=2048),tn(ia),L(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Sr(a)?rn(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ec())),Lt(a),null;case 26:var o=a.type,i=a.memoizedState;return e===null?(rn(a),i!==null?(Lt(a),xp(a,i)):(Lt(a),Yc(a,o,null,n,s))):i?i!==e.memoizedState?(rn(a),Lt(a),xp(a,i)):(Lt(a),a.flags&=-16777217):(e=e.memoizedProps,e!==n&&rn(a),Lt(a),Yc(a,o,e,n,s)),null;case 27:if(Se(a),s=Ae.current,o=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==n&&rn(a);else{if(!n){if(a.stateNode===null)throw Error(u(166));return Lt(a),null}e=ye.current,Sr(a)?Pu(a):(e=Nf(o,n,s),a.stateNode=e,rn(a))}return Lt(a),null;case 5:if(Se(a),o=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==n&&rn(a);else{if(!n){if(a.stateNode===null)throw Error(u(166));return Lt(a),null}if(i=ye.current,Sr(a))Pu(a);else{var f=Ko(Ae.current);switch(i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof n.is=="string"?f.createElement("select",{is:n.is}):f.createElement("select"),n.multiple?i.multiple=!0:n.size&&(i.size=n.size);break;default:i=typeof n.is=="string"?f.createElement(o,{is:n.is}):f.createElement(o)}}i[ft]=a,i[vt]=n;e:for(f=a.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===a)break e;for(;f.sibling===null;){if(f.return===null||f.return===a)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}a.stateNode=i;e:switch(Aa(i,o,n),o){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&rn(a)}}return Lt(a),Yc(a,a.type,e===null?null:e.memoizedProps,a.pendingProps,s),null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==n&&rn(a);else{if(typeof n!="string"&&a.stateNode===null)throw Error(u(166));if(e=Ae.current,Sr(a)){if(e=a.stateNode,s=a.memoizedProps,n=null,o=Ca,o!==null)switch(o.tag){case 27:case 5:n=o.memoizedProps}e[ft]=a,e=!!(e.nodeValue===s||n!==null&&n.suppressHydrationWarning===!0||bf(e.nodeValue,s)),e||Cn(a,!0)}else e=Ko(e).createTextNode(n),e[ft]=a,a.stateNode=e}return Lt(a),null;case 31:if(s=a.memoizedState,e===null||e.memoizedState!==null){if(n=Sr(a),s!==null){if(e===null){if(!n)throw Error(u(318));if(e=a.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(557));e[ft]=a}else Jn(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Lt(a),e=!1}else s=ec(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return a.flags&256?(cs(a),a):(cs(a),null);if((a.flags&128)!==0)throw Error(u(558))}return Lt(a),null;case 13:if(n=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=Sr(a),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(u(318));if(o=a.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(u(317));o[ft]=a}else Jn(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Lt(a),o=!1}else o=ec(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return a.flags&256?(cs(a),a):(cs(a),null)}return cs(a),(a.flags&128)!==0?(a.lanes=s,a):(s=n!==null,e=e!==null&&e.memoizedState!==null,s&&(n=a.child,o=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(o=n.alternate.memoizedState.cachePool.pool),i=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),i!==o&&(n.flags|=2048)),s!==e&&s&&(a.child.flags|=8192),Lo(a,a.updateQueue),Lt(a),null);case 4:return L(),e===null&&md(a.stateNode.containerInfo),Lt(a),null;case 10:return tn(a.type),Lt(a),null;case 19:if($(aa),n=a.memoizedState,n===null)return Lt(a),null;if(o=(a.flags&128)!==0,i=n.rendering,i===null)if(o)kl(n,!1);else{if(Jt!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(i=Co(e),i!==null){for(a.flags|=128,kl(n,!1),e=i.updateQueue,a.updateQueue=e,Lo(a,e),a.subtreeFlags=0,e=s,s=a.child;s!==null;)Qu(s,e),s=s.sibling;return oe(aa,aa.current&1|2),mt&&Ps(a,n.treeForkCount),a.child}e=e.sibling}n.tail!==null&&T()>Ho&&(a.flags|=128,o=!0,kl(n,!1),a.lanes=4194304)}else{if(!o)if(e=Co(i),e!==null){if(a.flags|=128,o=!0,e=e.updateQueue,a.updateQueue=e,Lo(a,e),kl(n,!0),n.tail===null&&n.tailMode==="hidden"&&!i.alternate&&!mt)return Lt(a),null}else 2*T()-n.renderingStartTime>Ho&&s!==536870912&&(a.flags|=128,o=!0,kl(n,!1),a.lanes=4194304);n.isBackwards?(i.sibling=a.child,a.child=i):(e=n.last,e!==null?e.sibling=i:a.child=i,n.last=i)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=T(),e.sibling=null,s=aa.current,oe(aa,o?s&1|2:s&1),mt&&Ps(a,n.treeForkCount),e):(Lt(a),null);case 22:case 23:return cs(a),pc(),n=a.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(a.flags|=8192):n&&(a.flags|=8192),n?(s&536870912)!==0&&(a.flags&128)===0&&(Lt(a),a.subtreeFlags&6&&(a.flags|=8192)):Lt(a),s=a.updateQueue,s!==null&&Lo(a,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==s&&(a.flags|=2048),e!==null&&$(er),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),tn(ia),Lt(a),null;case 25:return null;case 30:return null}throw Error(u(156,a.tag))}function Ab(e,a){switch(Ki(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return tn(ia),L(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return Se(a),null;case 31:if(a.memoizedState!==null){if(cs(a),a.alternate===null)throw Error(u(340));Jn()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 13:if(cs(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(u(340));Jn()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return $(aa),null;case 4:return L(),null;case 10:return tn(a.type),null;case 22:case 23:return cs(a),pc(),e!==null&&$(er),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return tn(ia),null;case 25:return null;default:return null}}function _p(e,a){switch(Ki(a),a.tag){case 3:tn(ia),L();break;case 26:case 27:case 5:Se(a);break;case 4:L();break;case 31:a.memoizedState!==null&&cs(a);break;case 13:cs(a);break;case 19:$(aa);break;case 10:tn(a.type);break;case 22:case 23:cs(a),pc(),e!==null&&$(er);break;case 24:tn(ia)}}function Al(e,a){try{var s=a.updateQueue,n=s!==null?s.lastEffect:null;if(n!==null){var o=n.next;s=o;do{if((s.tag&e)===e){n=void 0;var i=s.create,f=s.inst;n=i(),f.destroy=n}s=s.next}while(s!==o)}}catch(_){wt(a,a.return,_)}}function Tn(e,a,s){try{var n=a.updateQueue,o=n!==null?n.lastEffect:null;if(o!==null){var i=o.next;n=i;do{if((n.tag&e)===e){var f=n.inst,_=f.destroy;if(_!==void 0){f.destroy=void 0,o=a;var q=s,de=_;try{de()}catch(ge){wt(o,q,ge)}}}n=n.next}while(n!==i)}}catch(ge){wt(a,a.return,ge)}}function jp(e){var a=e.updateQueue;if(a!==null){var s=e.stateNode;try{mm(a,s)}catch(n){wt(e,e.return,n)}}}function Sp(e,a,s){s.props=rr(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(n){wt(e,a,n)}}function Nl(e,a){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof s=="function"?e.refCleanup=s(n):s.current=n}}catch(o){wt(e,a,o)}}function Ys(e,a){var s=e.ref,n=e.refCleanup;if(s!==null)if(typeof n=="function")try{n()}catch(o){wt(e,a,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(o){wt(e,a,o)}else s.current=null}function Cp(e){var a=e.type,s=e.memoizedProps,n=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&n.focus();break e;case"img":s.src?n.src=s.src:s.srcSet&&(n.srcset=s.srcSet)}}catch(o){wt(e,e.return,o)}}function Wc(e,a,s){try{var n=e.stateNode;Xb(n,e.type,s,a),n[vt]=a}catch(o){wt(e,e.return,o)}}function wp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&In(e.type)||e.tag===4}function Gc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||wp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&In(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vc(e,a,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(e),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=ut));else if(n!==4&&(n===27&&In(e.type)&&(s=e.stateNode,a=null),e=e.child,e!==null))for(Vc(e,a,s),e=e.sibling;e!==null;)Vc(e,a,s),e=e.sibling}function Io(e,a,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,a?s.insertBefore(e,a):s.appendChild(e);else if(n!==4&&(n===27&&In(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Io(e,a,s),e=e.sibling;e!==null;)Io(e,a,s),e=e.sibling}function kp(e){var a=e.stateNode,s=e.memoizedProps;try{for(var n=e.type,o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Aa(a,n,s),a[ft]=e,a[vt]=s}catch(i){wt(e,e.return,i)}}var ln=!1,ua=!1,Qc=!1,Ap=typeof WeakSet=="function"?WeakSet:Set,xa=null;function Nb(e,a){if(e=e.containerInfo,hd=ri,e=Uu(e),Fi(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var o=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var f=0,_=-1,q=-1,de=0,ge=0,Ce=e,ue=null;t:for(;;){for(var pe;Ce!==s||o!==0&&Ce.nodeType!==3||(_=f+o),Ce!==i||n!==0&&Ce.nodeType!==3||(q=f+n),Ce.nodeType===3&&(f+=Ce.nodeValue.length),(pe=Ce.firstChild)!==null;)ue=Ce,Ce=pe;for(;;){if(Ce===e)break t;if(ue===s&&++de===o&&(_=f),ue===i&&++ge===n&&(q=f),(pe=Ce.nextSibling)!==null)break;Ce=ue,ue=Ce.parentNode}Ce=pe}s=_===-1||q===-1?null:{start:_,end:q}}else s=null}s=s||{start:0,end:0}}else s=null;for(yd={focusedElem:e,selectionRange:s},ri=!1,xa=a;xa!==null;)if(a=xa,e=a.child,(a.subtreeFlags&1028)!==0&&e!==null)e.return=a,xa=e;else for(;xa!==null;){switch(a=xa,i=a.alternate,e=a.flags,a.tag){case 0:if((e&4)!==0&&(e=a.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)o=e[s],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&i!==null){e=void 0,s=a,o=i.memoizedProps,i=i.memoizedState,n=s.stateNode;try{var Oe=rr(s.type,o);e=n.getSnapshotBeforeUpdate(Oe,i),n.__reactInternalSnapshotBeforeUpdate=e}catch(Je){wt(s,s.return,Je)}}break;case 3:if((e&1024)!==0){if(e=a.stateNode.containerInfo,s=e.nodeType,s===9)gd(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=a.sibling,e!==null){e.return=a.return,xa=e;break}xa=a.return}}function Np(e,a,s){var n=s.flags;switch(s.tag){case 0:case 11:case 15:cn(e,s),n&4&&Al(5,s);break;case 1:if(cn(e,s),n&4)if(e=s.stateNode,a===null)try{e.componentDidMount()}catch(f){wt(s,s.return,f)}else{var o=rr(s.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(o,a,e.__reactInternalSnapshotBeforeUpdate)}catch(f){wt(s,s.return,f)}}n&64&&jp(s),n&512&&Nl(s,s.return);break;case 3:if(cn(e,s),n&64&&(e=s.updateQueue,e!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{mm(e,a)}catch(f){wt(s,s.return,f)}}break;case 27:a===null&&n&4&&kp(s);case 26:case 5:cn(e,s),a===null&&n&4&&Cp(s),n&512&&Nl(s,s.return);break;case 12:cn(e,s);break;case 31:cn(e,s),n&4&&Tp(e,s);break;case 13:cn(e,s),n&4&&Ep(e,s),n&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=Lb.bind(null,s),sv(e,s))));break;case 22:if(n=s.memoizedState!==null||ln,!n){a=a!==null&&a.memoizedState!==null||ua,o=ln;var i=ua;ln=n,(ua=a)&&!i?dn(e,s,(s.subtreeFlags&8772)!==0):cn(e,s),ln=o,ua=i}break;case 30:break;default:cn(e,s)}}function Rp(e){var a=e.alternate;a!==null&&(e.alternate=null,Rp(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&Gt(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ft=null,Qa=!1;function on(e,a,s){for(s=s.child;s!==null;)Mp(e,a,s),s=s.sibling}function Mp(e,a,s){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(ba,s)}catch{}switch(s.tag){case 26:ua||Ys(s,a),on(e,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:ua||Ys(s,a);var n=Ft,o=Qa;In(s.type)&&(Ft=s.stateNode,Qa=!1),on(e,a,s),Ll(s.stateNode),Ft=n,Qa=o;break;case 5:ua||Ys(s,a);case 6:if(n=Ft,o=Qa,Ft=null,on(e,a,s),Ft=n,Qa=o,Ft!==null)if(Qa)try{(Ft.nodeType===9?Ft.body:Ft.nodeName==="HTML"?Ft.ownerDocument.body:Ft).removeChild(s.stateNode)}catch(i){wt(s,a,i)}else try{Ft.removeChild(s.stateNode)}catch(i){wt(s,a,i)}break;case 18:Ft!==null&&(Qa?(e=Ft,Sf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),Yr(e)):Sf(Ft,s.stateNode));break;case 4:n=Ft,o=Qa,Ft=s.stateNode.containerInfo,Qa=!0,on(e,a,s),Ft=n,Qa=o;break;case 0:case 11:case 14:case 15:Tn(2,s,a),ua||Tn(4,s,a),on(e,a,s);break;case 1:ua||(Ys(s,a),n=s.stateNode,typeof n.componentWillUnmount=="function"&&Sp(s,a,n)),on(e,a,s);break;case 21:on(e,a,s);break;case 22:ua=(n=ua)||s.memoizedState!==null,on(e,a,s),ua=n;break;default:on(e,a,s)}}function Tp(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Yr(e)}catch(s){wt(a,a.return,s)}}}function Ep(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Yr(e)}catch(s){wt(a,a.return,s)}}function Rb(e){switch(e.tag){case 31:case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new Ap),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new Ap),a;default:throw Error(u(435,e.tag))}}function Uo(e,a){var s=Rb(e);a.forEach(function(n){if(!s.has(n)){s.add(n);var o=Ib.bind(null,e,n);n.then(o,o)}})}function Xa(e,a){var s=a.deletions;if(s!==null)for(var n=0;n<s.length;n++){var o=s[n],i=e,f=a,_=f;e:for(;_!==null;){switch(_.tag){case 27:if(In(_.type)){Ft=_.stateNode,Qa=!1;break e}break;case 5:Ft=_.stateNode,Qa=!1;break e;case 3:case 4:Ft=_.stateNode.containerInfo,Qa=!0;break e}_=_.return}if(Ft===null)throw Error(u(160));Mp(i,f,o),Ft=null,Qa=!1,i=o.alternate,i!==null&&(i.return=null),o.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)zp(a,e),a=a.sibling}var Os=null;function zp(e,a){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Xa(a,e),Za(e),n&4&&(Tn(3,e,e.return),Al(3,e),Tn(5,e,e.return));break;case 1:Xa(a,e),Za(e),n&512&&(ua||s===null||Ys(s,s.return)),n&64&&ln&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?n:s.concat(n))));break;case 26:var o=Os;if(Xa(a,e),Za(e),n&512&&(ua||s===null||Ys(s,s.return)),n&4){var i=s!==null?s.memoizedState:null;if(n=e.memoizedState,s===null)if(n===null)if(e.stateNode===null){e:{n=e.type,s=e.memoizedProps,o=o.ownerDocument||o;t:switch(n){case"title":i=o.getElementsByTagName("title")[0],(!i||i[fa]||i[ft]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=o.createElement(n),o.head.insertBefore(i,o.querySelector("head > title"))),Aa(i,n,s),i[ft]=e,ht(i),n=i;break e;case"link":var f=Bf("link","href",o).get(n+(s.href||""));if(f){for(var _=0;_<f.length;_++)if(i=f[_],i.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&i.getAttribute("rel")===(s.rel==null?null:s.rel)&&i.getAttribute("title")===(s.title==null?null:s.title)&&i.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){f.splice(_,1);break t}}i=o.createElement(n),Aa(i,n,s),o.head.appendChild(i);break;case"meta":if(f=Bf("meta","content",o).get(n+(s.content||""))){for(_=0;_<f.length;_++)if(i=f[_],i.getAttribute("content")===(s.content==null?null:""+s.content)&&i.getAttribute("name")===(s.name==null?null:s.name)&&i.getAttribute("property")===(s.property==null?null:s.property)&&i.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&i.getAttribute("charset")===(s.charSet==null?null:s.charSet)){f.splice(_,1);break t}}i=o.createElement(n),Aa(i,n,s),o.head.appendChild(i);break;default:throw Error(u(468,n))}i[ft]=e,ht(i),n=i}e.stateNode=n}else Df(o,e.type,e.stateNode);else e.stateNode=zf(o,n,e.memoizedProps);else i!==n?(i===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):i.count--,n===null?Df(o,e.type,e.stateNode):zf(o,n,e.memoizedProps)):n===null&&e.stateNode!==null&&Wc(e,e.memoizedProps,s.memoizedProps)}break;case 27:Xa(a,e),Za(e),n&512&&(ua||s===null||Ys(s,s.return)),s!==null&&n&4&&Wc(e,e.memoizedProps,s.memoizedProps);break;case 5:if(Xa(a,e),Za(e),n&512&&(ua||s===null||Ys(s,s.return)),e.flags&32){o=e.stateNode;try{Ua(o,"")}catch(Oe){wt(e,e.return,Oe)}}n&4&&e.stateNode!=null&&(o=e.memoizedProps,Wc(e,o,s!==null?s.memoizedProps:o)),n&1024&&(Qc=!0);break;case 6:if(Xa(a,e),Za(e),n&4){if(e.stateNode===null)throw Error(u(162));n=e.memoizedProps,s=e.stateNode;try{s.nodeValue=n}catch(Oe){wt(e,e.return,Oe)}}break;case 3:if(ti=null,o=Os,Os=Po(a.containerInfo),Xa(a,e),Os=o,Za(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Yr(a.containerInfo)}catch(Oe){wt(e,e.return,Oe)}Qc&&(Qc=!1,Bp(e));break;case 4:n=Os,Os=Po(e.stateNode.containerInfo),Xa(a,e),Za(e),Os=n;break;case 12:Xa(a,e),Za(e);break;case 31:Xa(a,e),Za(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Uo(e,n)));break;case 13:Xa(a,e),Za(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Fo=T()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Uo(e,n)));break;case 22:o=e.memoizedState!==null;var q=s!==null&&s.memoizedState!==null,de=ln,ge=ua;if(ln=de||o,ua=ge||q,Xa(a,e),ua=ge,ln=de,Za(e),n&8192)e:for(a=e.stateNode,a._visibility=o?a._visibility&-2:a._visibility|1,o&&(s===null||q||ln||ua||lr(e)),s=null,a=e;;){if(a.tag===5||a.tag===26){if(s===null){q=s=a;try{if(i=q.stateNode,o)f=i.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{_=q.stateNode;var Ce=q.memoizedProps.style,ue=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;_.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(Oe){wt(q,q.return,Oe)}}}else if(a.tag===6){if(s===null){q=a;try{q.stateNode.nodeValue=o?"":q.memoizedProps}catch(Oe){wt(q,q.return,Oe)}}}else if(a.tag===18){if(s===null){q=a;try{var pe=q.stateNode;o?Cf(pe,!0):Cf(q.stateNode,!1)}catch(Oe){wt(q,q.return,Oe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}n&4&&(n=e.updateQueue,n!==null&&(s=n.retryQueue,s!==null&&(n.retryQueue=null,Uo(e,s))));break;case 19:Xa(a,e),Za(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Uo(e,n)));break;case 30:break;case 21:break;default:Xa(a,e),Za(e)}}function Za(e){var a=e.flags;if(a&2){try{for(var s,n=e.return;n!==null;){if(wp(n)){s=n;break}n=n.return}if(s==null)throw Error(u(160));switch(s.tag){case 27:var o=s.stateNode,i=Gc(e);Io(e,i,o);break;case 5:var f=s.stateNode;s.flags&32&&(Ua(f,""),s.flags&=-33);var _=Gc(e);Io(e,_,f);break;case 3:case 4:var q=s.stateNode.containerInfo,de=Gc(e);Vc(e,de,q);break;default:throw Error(u(161))}}catch(ge){wt(e,e.return,ge)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function Bp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;Bp(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function cn(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Np(e,a.alternate,a),a=a.sibling}function lr(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:Tn(4,a,a.return),lr(a);break;case 1:Ys(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&Sp(a,a.return,s),lr(a);break;case 27:Ll(a.stateNode);case 26:case 5:Ys(a,a.return),lr(a);break;case 22:a.memoizedState===null&&lr(a);break;case 30:lr(a);break;default:lr(a)}e=e.sibling}}function dn(e,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var n=a.alternate,o=e,i=a,f=i.flags;switch(i.tag){case 0:case 11:case 15:dn(o,i,s),Al(4,i);break;case 1:if(dn(o,i,s),n=i,o=n.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(de){wt(n,n.return,de)}if(n=i,o=n.updateQueue,o!==null){var _=n.stateNode;try{var q=o.shared.hiddenCallbacks;if(q!==null)for(o.shared.hiddenCallbacks=null,o=0;o<q.length;o++)um(q[o],_)}catch(de){wt(n,n.return,de)}}s&&f&64&&jp(i),Nl(i,i.return);break;case 27:kp(i);case 26:case 5:dn(o,i,s),s&&n===null&&f&4&&Cp(i),Nl(i,i.return);break;case 12:dn(o,i,s);break;case 31:dn(o,i,s),s&&f&4&&Tp(o,i);break;case 13:dn(o,i,s),s&&f&4&&Ep(o,i);break;case 22:i.memoizedState===null&&dn(o,i,s),Nl(i,i.return);break;case 30:break;default:dn(o,i,s)}a=a.sibling}}function Xc(e,a){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&fl(s))}function Zc(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&fl(e))}function Ls(e,a,s,n){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Dp(e,a,s,n),a=a.sibling}function Dp(e,a,s,n){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Ls(e,a,s,n),o&2048&&Al(9,a);break;case 1:Ls(e,a,s,n);break;case 3:Ls(e,a,s,n),o&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&fl(e)));break;case 12:if(o&2048){Ls(e,a,s,n),e=a.stateNode;try{var i=a.memoizedProps,f=i.id,_=i.onPostCommit;typeof _=="function"&&_(f,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(q){wt(a,a.return,q)}}else Ls(e,a,s,n);break;case 31:Ls(e,a,s,n);break;case 13:Ls(e,a,s,n);break;case 23:break;case 22:i=a.stateNode,f=a.alternate,a.memoizedState!==null?i._visibility&2?Ls(e,a,s,n):Rl(e,a):i._visibility&2?Ls(e,a,s,n):(i._visibility|=2,zr(e,a,s,n,(a.subtreeFlags&10256)!==0||!1)),o&2048&&Xc(f,a);break;case 24:Ls(e,a,s,n),o&2048&&Zc(a.alternate,a);break;default:Ls(e,a,s,n)}}function zr(e,a,s,n,o){for(o=o&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var i=e,f=a,_=s,q=n,de=f.flags;switch(f.tag){case 0:case 11:case 15:zr(i,f,_,q,o),Al(8,f);break;case 23:break;case 22:var ge=f.stateNode;f.memoizedState!==null?ge._visibility&2?zr(i,f,_,q,o):Rl(i,f):(ge._visibility|=2,zr(i,f,_,q,o)),o&&de&2048&&Xc(f.alternate,f);break;case 24:zr(i,f,_,q,o),o&&de&2048&&Zc(f.alternate,f);break;default:zr(i,f,_,q,o)}a=a.sibling}}function Rl(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=e,n=a,o=n.flags;switch(n.tag){case 22:Rl(s,n),o&2048&&Xc(n.alternate,n);break;case 24:Rl(s,n),o&2048&&Zc(n.alternate,n);break;default:Rl(s,n)}a=a.sibling}}var Ml=8192;function Br(e,a,s){if(e.subtreeFlags&Ml)for(e=e.child;e!==null;)Op(e,a,s),e=e.sibling}function Op(e,a,s){switch(e.tag){case 26:Br(e,a,s),e.flags&Ml&&e.memoizedState!==null&&hv(s,Os,e.memoizedState,e.memoizedProps);break;case 5:Br(e,a,s);break;case 3:case 4:var n=Os;Os=Po(e.stateNode.containerInfo),Br(e,a,s),Os=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Ml,Ml=16777216,Br(e,a,s),Ml=n):Br(e,a,s));break;default:Br(e,a,s)}}function Lp(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function Tl(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var n=a[s];xa=n,Up(n,e)}Lp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ip(e),e=e.sibling}function Ip(e){switch(e.tag){case 0:case 11:case 15:Tl(e),e.flags&2048&&Tn(9,e,e.return);break;case 3:Tl(e);break;case 12:Tl(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,qo(e)):Tl(e);break;default:Tl(e)}}function qo(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var n=a[s];xa=n,Up(n,e)}Lp(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:Tn(8,a,a.return),qo(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,qo(a));break;default:qo(a)}e=e.sibling}}function Up(e,a){for(;xa!==null;){var s=xa;switch(s.tag){case 0:case 11:case 15:Tn(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var n=s.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:fl(s.memoizedState.cache)}if(n=s.child,n!==null)n.return=s,xa=n;else e:for(s=e;xa!==null;){n=xa;var o=n.sibling,i=n.return;if(Rp(n),n===s){xa=null;break e}if(o!==null){o.return=i,xa=o;break e}xa=i}}}var Mb={getCacheForType:function(e){var a=wa(ia),s=a.data.get(e);return s===void 0&&(s=e(),a.data.set(e,s)),s},cacheSignal:function(){return wa(ia).controller.signal}},Tb=typeof WeakMap=="function"?WeakMap:Map,_t=0,Et=null,ot=null,ct=0,Ct=0,ds=null,En=!1,Dr=!1,Jc=!1,un=0,Jt=0,zn=0,or=0,Kc=0,us=0,Or=0,El=null,Ja=null,Pc=!1,Fo=0,qp=0,Ho=1/0,$o=null,Bn=null,ya=0,Dn=null,Lr=null,mn=0,ed=0,td=null,Fp=null,zl=0,ad=null;function ms(){return(_t&2)!==0&&ct!==0?ct&-ct:w.T!==null?id():Ba()}function Hp(){if(us===0)if((ct&536870912)===0||mt){var e=Yt;Yt<<=1,(Yt&3932160)===0&&(Yt=262144),us=e}else us=536870912;return e=is.current,e!==null&&(e.flags|=32),us}function Ka(e,a,s){(e===Et&&(Ct===2||Ct===9)||e.cancelPendingCommit!==null)&&(Ir(e,0),On(e,ct,us,!1)),Wt(e,s),((_t&2)===0||e!==Et)&&(e===Et&&((_t&2)===0&&(or|=s),Jt===4&&On(e,ct,us,!1)),Ws(e))}function $p(e,a,s){if((_t&6)!==0)throw Error(u(327));var n=!s&&(a&127)===0&&(a&e.expiredLanes)===0||jt(e,a),o=n?Bb(e,a):nd(e,a,!0),i=n;do{if(o===0){Dr&&!n&&On(e,a,0,!1);break}else{if(s=e.current.alternate,i&&!Eb(s)){o=nd(e,a,!1),i=!1;continue}if(o===2){if(i=a,e.errorRecoveryDisabledLanes&i)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){a=f;e:{var _=e;o=El;var q=_.current.memoizedState.isDehydrated;if(q&&(Ir(_,f).flags|=256),f=nd(_,f,!1),f!==2){if(Jc&&!q){_.errorRecoveryDisabledLanes|=i,or|=i,o=4;break e}i=Ja,Ja=o,i!==null&&(Ja===null?Ja=i:Ja.push.apply(Ja,i))}o=f}if(i=!1,o!==2)continue}}if(o===1){Ir(e,0),On(e,a,0,!0);break}e:{switch(n=e,i=o,i){case 0:case 1:throw Error(u(345));case 4:if((a&4194048)!==a)break;case 6:On(n,a,us,!En);break e;case 2:Ja=null;break;case 3:case 5:break;default:throw Error(u(329))}if((a&62914560)===a&&(o=Fo+300-T(),10<o)){if(On(n,a,us,!En),rt(n,0,!0)!==0)break e;mn=a,n.timeoutHandle=_f(Yp.bind(null,n,s,Ja,$o,Pc,a,us,or,Or,En,i,"Throttled",-0,0),o);break e}Yp(n,s,Ja,$o,Pc,a,us,or,Or,En,i,null,-0,0)}}break}while(!0);Ws(e)}function Yp(e,a,s,n,o,i,f,_,q,de,ge,Ce,ue,pe){if(e.timeoutHandle=-1,Ce=a.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ut},Op(a,i,Ce);var Oe=(i&62914560)===i?Fo-T():(i&4194048)===i?qp-T():0;if(Oe=yv(Ce,Oe),Oe!==null){mn=i,e.cancelPendingCommit=Oe(Kp.bind(null,e,a,i,s,n,o,f,_,q,ge,Ce,null,ue,pe)),On(e,i,f,!de);return}}Kp(e,a,i,s,n,o,f,_,q)}function Eb(e){for(var a=e;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var n=0;n<s.length;n++){var o=s[n],i=o.getSnapshot;o=o.value;try{if(!ls(i(),o))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function On(e,a,s,n){a&=~Kc,a&=~or,e.suspendedLanes|=a,e.pingedLanes&=~a,n&&(e.warmLanes|=a),n=e.expirationTimes;for(var o=a;0<o;){var i=31-De(o),f=1<<i;n[i]=-1,o&=~f}s!==0&&St(e,s,a)}function Yo(){return(_t&6)===0?(Bl(0),!1):!0}function sd(){if(ot!==null){if(Ct===0)var e=ot.return;else e=ot,en=Kn=null,gc(e),Nr=null,yl=0,e=ot;for(;e!==null;)_p(e.alternate,e),e=e.return;ot=null}}function Ir(e,a){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,Kb(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),mn=0,sd(),Et=e,ot=s=Ks(e.current,null),ct=a,Ct=0,ds=null,En=!1,Dr=jt(e,a),Jc=!1,Or=us=Kc=or=zn=Jt=0,Ja=El=null,Pc=!1,(a&8)!==0&&(a|=a&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=a;0<n;){var o=31-De(n),i=1<<o;a|=e[o],n&=~i}return un=a,uo(),s}function Wp(e,a){st=null,w.H=Cl,a===Ar||a===go?(a=om(),Ct=3):a===oc?(a=om(),Ct=4):Ct=a===Dc?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ds=a,ot===null&&(Jt=1,zo(e,gs(a,e.current)))}function Gp(){var e=is.current;return e===null?!0:(ct&4194048)===ct?Ss===null:(ct&62914560)===ct||(ct&536870912)!==0?e===Ss:!1}function Vp(){var e=w.H;return w.H=Cl,e===null?Cl:e}function Qp(){var e=w.A;return w.A=Mb,e}function Wo(){Jt=4,En||(ct&4194048)!==ct&&is.current!==null||(Dr=!0),(zn&134217727)===0&&(or&134217727)===0||Et===null||On(Et,ct,us,!1)}function nd(e,a,s){var n=_t;_t|=2;var o=Vp(),i=Qp();(Et!==e||ct!==a)&&($o=null,Ir(e,a)),a=!1;var f=Jt;e:do try{if(Ct!==0&&ot!==null){var _=ot,q=ds;switch(Ct){case 8:sd(),f=6;break e;case 3:case 2:case 9:case 6:is.current===null&&(a=!0);var de=Ct;if(Ct=0,ds=null,Ur(e,_,q,de),s&&Dr){f=0;break e}break;default:de=Ct,Ct=0,ds=null,Ur(e,_,q,de)}}zb(),f=Jt;break}catch(ge){Wp(e,ge)}while(!0);return a&&e.shellSuspendCounter++,en=Kn=null,_t=n,w.H=o,w.A=i,ot===null&&(Et=null,ct=0,uo()),f}function zb(){for(;ot!==null;)Xp(ot)}function Bb(e,a){var s=_t;_t|=2;var n=Vp(),o=Qp();Et!==e||ct!==a?($o=null,Ho=T()+500,Ir(e,a)):Dr=jt(e,a);e:do try{if(Ct!==0&&ot!==null){a=ot;var i=ds;t:switch(Ct){case 1:Ct=0,ds=null,Ur(e,a,i,1);break;case 2:case 9:if(rm(i)){Ct=0,ds=null,Zp(a);break}a=function(){Ct!==2&&Ct!==9||Et!==e||(Ct=7),Ws(e)},i.then(a,a);break e;case 3:Ct=7;break e;case 4:Ct=5;break e;case 7:rm(i)?(Ct=0,ds=null,Zp(a)):(Ct=0,ds=null,Ur(e,a,i,7));break;case 5:var f=null;switch(ot.tag){case 26:f=ot.memoizedState;case 5:case 27:var _=ot;if(f?Of(f):_.stateNode.complete){Ct=0,ds=null;var q=_.sibling;if(q!==null)ot=q;else{var de=_.return;de!==null?(ot=de,Go(de)):ot=null}break t}}Ct=0,ds=null,Ur(e,a,i,5);break;case 6:Ct=0,ds=null,Ur(e,a,i,6);break;case 8:sd(),Jt=6;break e;default:throw Error(u(462))}}Db();break}catch(ge){Wp(e,ge)}while(!0);return en=Kn=null,w.H=n,w.A=o,_t=s,ot!==null?0:(Et=null,ct=0,uo(),Jt)}function Db(){for(;ot!==null&&!_e();)Xp(ot)}function Xp(e){var a=gp(e.alternate,e,un);e.memoizedProps=e.pendingProps,a===null?Go(e):ot=a}function Zp(e){var a=e,s=a.alternate;switch(a.tag){case 15:case 0:a=pp(s,a,a.pendingProps,a.type,void 0,ct);break;case 11:a=pp(s,a,a.pendingProps,a.type.render,a.ref,ct);break;case 5:gc(a);default:_p(s,a),a=ot=Qu(a,un),a=gp(s,a,un)}e.memoizedProps=e.pendingProps,a===null?Go(e):ot=a}function Ur(e,a,s,n){en=Kn=null,gc(a),Nr=null,yl=0;var o=a.return;try{if(Sb(e,o,a,s,ct)){Jt=1,zo(e,gs(s,e.current)),ot=null;return}}catch(i){if(o!==null)throw ot=o,i;Jt=1,zo(e,gs(s,e.current)),ot=null;return}a.flags&32768?(mt||n===1?e=!0:Dr||(ct&536870912)!==0?e=!1:(En=e=!0,(n===2||n===9||n===3||n===6)&&(n=is.current,n!==null&&n.tag===13&&(n.flags|=16384))),Jp(a,e)):Go(a)}function Go(e){var a=e;do{if((a.flags&32768)!==0){Jp(a,En);return}e=a.return;var s=kb(a.alternate,a,un);if(s!==null){ot=s;return}if(a=a.sibling,a!==null){ot=a;return}ot=a=e}while(a!==null);Jt===0&&(Jt=5)}function Jp(e,a){do{var s=Ab(e.alternate,e);if(s!==null){s.flags&=32767,ot=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(e=e.sibling,e!==null)){ot=e;return}ot=e=s}while(e!==null);Jt=6,ot=null}function Kp(e,a,s,n,o,i,f,_,q){e.cancelPendingCommit=null;do Vo();while(ya!==0);if((_t&6)!==0)throw Error(u(327));if(a!==null){if(a===e.current)throw Error(u(177));if(i=a.lanes|a.childLanes,i|=Gi,Mt(e,s,i,f,_,q),e===Et&&(ot=Et=null,ct=0),Lr=a,Dn=e,mn=s,ed=i,td=o,Fp=n,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ub(We,function(){return sf(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||n){n=w.T,w.T=null,o=z.p,z.p=2,f=_t,_t|=4;try{Nb(e,a,s)}finally{_t=f,z.p=o,w.T=n}}ya=1,Pp(),ef(),tf()}}function Pp(){if(ya===1){ya=0;var e=Dn,a=Lr,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=w.T,w.T=null;var n=z.p;z.p=2;var o=_t;_t|=4;try{zp(a,e);var i=yd,f=Uu(e.containerInfo),_=i.focusedElem,q=i.selectionRange;if(f!==_&&_&&_.ownerDocument&&Iu(_.ownerDocument.documentElement,_)){if(q!==null&&Fi(_)){var de=q.start,ge=q.end;if(ge===void 0&&(ge=de),"selectionStart"in _)_.selectionStart=de,_.selectionEnd=Math.min(ge,_.value.length);else{var Ce=_.ownerDocument||document,ue=Ce&&Ce.defaultView||window;if(ue.getSelection){var pe=ue.getSelection(),Oe=_.textContent.length,Je=Math.min(q.start,Oe),Nt=q.end===void 0?Je:Math.min(q.end,Oe);!pe.extend&&Je>Nt&&(f=Nt,Nt=Je,Je=f);var ne=Lu(_,Je),J=Lu(_,Nt);if(ne&&J&&(pe.rangeCount!==1||pe.anchorNode!==ne.node||pe.anchorOffset!==ne.offset||pe.focusNode!==J.node||pe.focusOffset!==J.offset)){var ce=Ce.createRange();ce.setStart(ne.node,ne.offset),pe.removeAllRanges(),Je>Nt?(pe.addRange(ce),pe.extend(J.node,J.offset)):(ce.setEnd(J.node,J.offset),pe.addRange(ce))}}}}for(Ce=[],pe=_;pe=pe.parentNode;)pe.nodeType===1&&Ce.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<Ce.length;_++){var je=Ce[_];je.element.scrollLeft=je.left,je.element.scrollTop=je.top}}ri=!!hd,yd=hd=null}finally{_t=o,z.p=n,w.T=s}}e.current=a,ya=2}}function ef(){if(ya===2){ya=0;var e=Dn,a=Lr,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=w.T,w.T=null;var n=z.p;z.p=2;var o=_t;_t|=4;try{Np(e,a.alternate,a)}finally{_t=o,z.p=n,w.T=s}}ya=3}}function tf(){if(ya===4||ya===3){ya=0,Te();var e=Dn,a=Lr,s=mn,n=Fp;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?ya=5:(ya=0,Lr=Dn=null,af(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Bn=null),ss(s),a=a.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(ba,a,void 0,(a.current.flags&128)===128)}catch{}if(n!==null){a=w.T,o=z.p,z.p=2,w.T=null;try{for(var i=e.onRecoverableError,f=0;f<n.length;f++){var _=n[f];i(_.value,{componentStack:_.stack})}}finally{w.T=a,z.p=o}}(mn&3)!==0&&Vo(),Ws(e),o=e.pendingLanes,(s&261930)!==0&&(o&42)!==0?e===ad?zl++:(zl=0,ad=e):zl=0,Bl(0)}}function af(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,fl(a)))}function Vo(){return Pp(),ef(),tf(),sf()}function sf(){if(ya!==5)return!1;var e=Dn,a=ed;ed=0;var s=ss(mn),n=w.T,o=z.p;try{z.p=32>s?32:s,w.T=null,s=td,td=null;var i=Dn,f=mn;if(ya=0,Lr=Dn=null,mn=0,(_t&6)!==0)throw Error(u(331));var _=_t;if(_t|=4,Ip(i.current),Dp(i,i.current,f,s),_t=_,Bl(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(ba,i)}catch{}return!0}finally{z.p=o,w.T=n,af(e,a)}}function nf(e,a,s){a=gs(s,a),a=Bc(e.stateNode,a,2),e=Nn(e,a,2),e!==null&&(Wt(e,2),Ws(e))}function wt(e,a,s){if(e.tag===3)nf(e,e,s);else for(;a!==null;){if(a.tag===3){nf(a,e,s);break}else if(a.tag===1){var n=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Bn===null||!Bn.has(n))){e=gs(s,e),s=rp(2),n=Nn(a,s,2),n!==null&&(lp(s,n,a,e),Wt(n,2),Ws(n));break}}a=a.return}}function rd(e,a,s){var n=e.pingCache;if(n===null){n=e.pingCache=new Tb;var o=new Set;n.set(a,o)}else o=n.get(a),o===void 0&&(o=new Set,n.set(a,o));o.has(s)||(Jc=!0,o.add(s),e=Ob.bind(null,e,a,s),a.then(e,e))}function Ob(e,a,s){var n=e.pingCache;n!==null&&n.delete(a),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Et===e&&(ct&s)===s&&(Jt===4||Jt===3&&(ct&62914560)===ct&&300>T()-Fo?(_t&2)===0&&Ir(e,0):Kc|=s,Or===ct&&(Or=0)),Ws(e)}function rf(e,a){a===0&&(a=Na()),e=Xn(e,a),e!==null&&(Wt(e,a),Ws(e))}function Lb(e){var a=e.memoizedState,s=0;a!==null&&(s=a.retryLane),rf(e,s)}function Ib(e,a){var s=0;switch(e.tag){case 31:case 13:var n=e.stateNode,o=e.memoizedState;o!==null&&(s=o.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(u(314))}n!==null&&n.delete(a),rf(e,s)}function Ub(e,a){return G(e,a)}var Qo=null,qr=null,ld=!1,Xo=!1,od=!1,Ln=0;function Ws(e){e!==qr&&e.next===null&&(qr===null?Qo=qr=e:qr=qr.next=e),Xo=!0,ld||(ld=!0,Fb())}function Bl(e,a){if(!od&&Xo){od=!0;do for(var s=!1,n=Qo;n!==null;){if(e!==0){var o=n.pendingLanes;if(o===0)var i=0;else{var f=n.suspendedLanes,_=n.pingedLanes;i=(1<<31-De(42|e)+1)-1,i&=o&~(f&~_),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(s=!0,df(n,i))}else i=ct,i=rt(n,n===Et?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(i&3)===0||jt(n,i)||(s=!0,df(n,i));n=n.next}while(s);od=!1}}function qb(){lf()}function lf(){Xo=ld=!1;var e=0;Ln!==0&&Jb()&&(e=Ln);for(var a=T(),s=null,n=Qo;n!==null;){var o=n.next,i=of(n,a);i===0?(n.next=null,s===null?Qo=o:s.next=o,o===null&&(qr=s)):(s=n,(e!==0||(i&3)!==0)&&(Xo=!0)),n=o}ya!==0&&ya!==5||Bl(e),Ln!==0&&(Ln=0)}function of(e,a){for(var s=e.suspendedLanes,n=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes&-62914561;0<i;){var f=31-De(i),_=1<<f,q=o[f];q===-1?((_&s)===0||(_&n)!==0)&&(o[f]=ja(_,a)):q<=a&&(e.expiredLanes|=_),i&=~_}if(a=Et,s=ct,s=rt(e,e===a?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,s===0||e===a&&(Ct===2||Ct===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&P(n),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||jt(e,s)){if(a=s&-s,a===e.callbackPriority)return a;switch(n!==null&&P(n),ss(s)){case 2:case 8:s=Ie;break;case 32:s=We;break;case 268435456:s=lt;break;default:s=We}return n=cf.bind(null,e),s=G(s,n),e.callbackPriority=a,e.callbackNode=s,a}return n!==null&&n!==null&&P(n),e.callbackPriority=2,e.callbackNode=null,2}function cf(e,a){if(ya!==0&&ya!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Vo()&&e.callbackNode!==s)return null;var n=ct;return n=rt(e,e===Et?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:($p(e,n,a),of(e,T()),e.callbackNode!=null&&e.callbackNode===s?cf.bind(null,e):null)}function df(e,a){if(Vo())return null;$p(e,a,!0)}function Fb(){Pb(function(){(_t&6)!==0?G(ee,qb):lf()})}function id(){if(Ln===0){var e=wr;e===0&&(e=pt,pt<<=1,(pt&261888)===0&&(pt=256)),Ln=e}return Ln}function uf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:$e(""+e)}function mf(e,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,e.id&&s.setAttribute("form",e.id),a.parentNode.insertBefore(s,a),e=new FormData(e),s.parentNode.removeChild(s),e}function Hb(e,a,s,n,o){if(a==="submit"&&s&&s.stateNode===o){var i=uf((o[vt]||null).action),f=n.submitter;f&&(a=(a=f[vt]||null)?uf(a.formAction):f.getAttribute("formAction"),a!==null&&(i=a,f=null));var _=new lo("action","action",null,n,o);e.push({event:_,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Ln!==0){var q=f?mf(o,f):new FormData(o);Nc(s,{pending:!0,data:q,method:o.method,action:i},null,q)}}else typeof i=="function"&&(_.preventDefault(),q=f?mf(o,f):new FormData(o),Nc(s,{pending:!0,data:q,method:o.method,action:i},i,q))},currentTarget:o}]})}}for(var cd=0;cd<Wi.length;cd++){var dd=Wi[cd],$b=dd.toLowerCase(),Yb=dd[0].toUpperCase()+dd.slice(1);Ds($b,"on"+Yb)}Ds(Hu,"onAnimationEnd"),Ds($u,"onAnimationIteration"),Ds(Yu,"onAnimationStart"),Ds("dblclick","onDoubleClick"),Ds("focusin","onFocus"),Ds("focusout","onBlur"),Ds(lb,"onTransitionRun"),Ds(ob,"onTransitionStart"),Ds(ib,"onTransitionCancel"),Ds(Wu,"onTransitionEnd"),Sa("onMouseEnter",["mouseout","mouseover"]),Sa("onMouseLeave",["mouseout","mouseover"]),Sa("onPointerEnter",["pointerout","pointerover"]),Sa("onPointerLeave",["pointerout","pointerover"]),Vt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dl));function pf(e,a){a=(a&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],o=n.event;n=n.listeners;e:{var i=void 0;if(a)for(var f=n.length-1;0<=f;f--){var _=n[f],q=_.instance,de=_.currentTarget;if(_=_.listener,q!==i&&o.isPropagationStopped())break e;i=_,o.currentTarget=de;try{i(o)}catch(ge){co(ge)}o.currentTarget=null,i=q}else for(f=0;f<n.length;f++){if(_=n[f],q=_.instance,de=_.currentTarget,_=_.listener,q!==i&&o.isPropagationStopped())break e;i=_,o.currentTarget=de;try{i(o)}catch(ge){co(ge)}o.currentTarget=null,i=q}}}}function it(e,a){var s=a[$a];s===void 0&&(s=a[$a]=new Set);var n=e+"__bubble";s.has(n)||(ff(a,e,2,!1),s.add(n))}function ud(e,a,s){var n=0;a&&(n|=4),ff(s,e,n,a)}var Zo="_reactListening"+Math.random().toString(36).slice(2);function md(e){if(!e[Zo]){e[Zo]=!0,Oa.forEach(function(s){s!=="selectionchange"&&(Wb.has(s)||ud(s,!1,e),ud(s,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[Zo]||(a[Zo]=!0,ud("selectionchange",!1,a))}}function ff(e,a,s,n){switch($f(a)){case 2:var o=gv;break;case 8:o=xv;break;default:o=Ad}s=o.bind(null,a,s,e),o=void 0,!xn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(o=!0),n?o!==void 0?e.addEventListener(a,s,{capture:!0,passive:o}):e.addEventListener(a,s,!0):o!==void 0?e.addEventListener(a,s,{passive:o}):e.addEventListener(a,s,!1)}function pd(e,a,s,n,o){var i=n;if((a&1)===0&&(a&2)===0&&n!==null)e:for(;;){if(n===null)return;var f=n.tag;if(f===3||f===4){var _=n.stateNode.containerInfo;if(_===o)break;if(f===4)for(f=n.return;f!==null;){var q=f.tag;if((q===3||q===4)&&f.stateNode.containerInfo===o)return;f=f.return}for(;_!==null;){if(f=Ut(_),f===null)return;if(q=f.tag,q===5||q===6||q===26||q===27){n=i=f;continue e}_=_.parentNode}}n=n.return}zs(function(){var de=i,ge=Z(s),Ce=[];e:{var ue=Gu.get(e);if(ue!==void 0){var pe=lo,Oe=e;switch(e){case"keypress":if(no(s)===0)break e;case"keydown":case"keyup":pe=Iy;break;case"focusin":Oe="focus",pe=Oi;break;case"focusout":Oe="blur",pe=Oi;break;case"beforeblur":case"afterblur":pe=Oi;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=_u;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=ky;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=Fy;break;case Hu:case $u:case Yu:pe=Ry;break;case Wu:pe=$y;break;case"scroll":case"scrollend":pe=Cy;break;case"wheel":pe=Wy;break;case"copy":case"cut":case"paste":pe=Ty;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=Su;break;case"toggle":case"beforetoggle":pe=Vy}var Je=(a&4)!==0,Nt=!Je&&(e==="scroll"||e==="scrollend"),ne=Je?ue!==null?ue+"Capture":null:ue;Je=[];for(var J=de,ce;J!==null;){var je=J;if(ce=je.stateNode,je=je.tag,je!==5&&je!==26&&je!==27||ce===null||ne===null||(je=Bs(J,ne),je!=null&&Je.push(Ol(J,je,ce))),Nt)break;J=J.return}0<Je.length&&(ue=new pe(ue,Oe,null,s,ge),Ce.push({event:ue,listeners:Je}))}}if((a&7)===0){e:{if(ue=e==="mouseover"||e==="pointerover",pe=e==="mouseout"||e==="pointerout",ue&&s!==ta&&(Oe=s.relatedTarget||s.fromElement)&&(Ut(Oe)||Oe[Xt]))break e;if((pe||ue)&&(ue=ge.window===ge?ge:(ue=ge.ownerDocument)?ue.defaultView||ue.parentWindow:window,pe?(Oe=s.relatedTarget||s.toElement,pe=de,Oe=Oe?Ut(Oe):null,Oe!==null&&(Nt=p(Oe),Je=Oe.tag,Oe!==Nt||Je!==5&&Je!==27&&Je!==6)&&(Oe=null)):(pe=null,Oe=de),pe!==Oe)){if(Je=_u,je="onMouseLeave",ne="onMouseEnter",J="mouse",(e==="pointerout"||e==="pointerover")&&(Je=Su,je="onPointerLeave",ne="onPointerEnter",J="pointer"),Nt=pe==null?ue:va(pe),ce=Oe==null?ue:va(Oe),ue=new Je(je,J+"leave",pe,s,ge),ue.target=Nt,ue.relatedTarget=ce,je=null,Ut(ge)===de&&(Je=new Je(ne,J+"enter",Oe,s,ge),Je.target=ce,Je.relatedTarget=Nt,je=Je),Nt=je,pe&&Oe)t:{for(Je=Gb,ne=pe,J=Oe,ce=0,je=ne;je;je=Je(je))ce++;je=0;for(var Xe=J;Xe;Xe=Je(Xe))je++;for(;0<ce-je;)ne=Je(ne),ce--;for(;0<je-ce;)J=Je(J),je--;for(;ce--;){if(ne===J||J!==null&&ne===J.alternate){Je=ne;break t}ne=Je(ne),J=Je(J)}Je=null}else Je=null;pe!==null&&hf(Ce,ue,pe,Je,!1),Oe!==null&&Nt!==null&&hf(Ce,Nt,Oe,Je,!0)}}e:{if(ue=de?va(de):window,pe=ue.nodeName&&ue.nodeName.toLowerCase(),pe==="select"||pe==="input"&&ue.type==="file")var gt=Tu;else if(Ru(ue))if(Eu)gt=sb;else{gt=tb;var He=eb}else pe=ue.nodeName,!pe||pe.toLowerCase()!=="input"||ue.type!=="checkbox"&&ue.type!=="radio"?de&&b(de.elementType)&&(gt=Tu):gt=ab;if(gt&&(gt=gt(e,de))){Mu(Ce,gt,s,ge);break e}He&&He(e,ue,de),e==="focusout"&&de&&ue.type==="number"&&de.memoizedProps.value!=null&&Es(ue,"number",ue.value)}switch(He=de?va(de):window,e){case"focusin":(Ru(He)||He.contentEditable==="true")&&(br=He,Hi=de,ul=null);break;case"focusout":ul=Hi=br=null;break;case"mousedown":$i=!0;break;case"contextmenu":case"mouseup":case"dragend":$i=!1,qu(Ce,s,ge);break;case"selectionchange":if(rb)break;case"keydown":case"keyup":qu(Ce,s,ge)}var nt;if(Ii)e:{switch(e){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else yr?Au(e,s)&&(dt="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(dt="onCompositionStart");dt&&(Cu&&s.locale!=="ko"&&(yr||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&yr&&(nt=gu()):(_n=ge,zi="value"in _n?_n.value:_n.textContent,yr=!0)),He=Jo(de,dt),0<He.length&&(dt=new ju(dt,e,null,s,ge),Ce.push({event:dt,listeners:He}),nt?dt.data=nt:(nt=Nu(s),nt!==null&&(dt.data=nt)))),(nt=Xy?Zy(e,s):Jy(e,s))&&(dt=Jo(de,"onBeforeInput"),0<dt.length&&(He=new ju("onBeforeInput","beforeinput",null,s,ge),Ce.push({event:He,listeners:dt}),He.data=nt)),Hb(Ce,e,de,s,ge)}pf(Ce,a)})}function Ol(e,a,s){return{instance:e,listener:a,currentTarget:s}}function Jo(e,a){for(var s=a+"Capture",n=[];e!==null;){var o=e,i=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||i===null||(o=Bs(e,s),o!=null&&n.unshift(Ol(e,o,i)),o=Bs(e,a),o!=null&&n.push(Ol(e,o,i))),e.tag===3)return n;e=e.return}return[]}function Gb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function hf(e,a,s,n,o){for(var i=a._reactName,f=[];s!==null&&s!==n;){var _=s,q=_.alternate,de=_.stateNode;if(_=_.tag,q!==null&&q===n)break;_!==5&&_!==26&&_!==27||de===null||(q=de,o?(de=Bs(s,i),de!=null&&f.unshift(Ol(s,de,q))):o||(de=Bs(s,i),de!=null&&f.push(Ol(s,de,q)))),s=s.return}f.length!==0&&e.push({event:a,listeners:f})}var Vb=/\r\n?/g,Qb=/\u0000|\uFFFD/g;function yf(e){return(typeof e=="string"?e:""+e).replace(Vb,`
`).replace(Qb,"")}function bf(e,a){return a=yf(a),yf(e)===a}function At(e,a,s,n,o,i){switch(s){case"children":typeof n=="string"?a==="body"||a==="textarea"&&n===""||Ua(e,n):(typeof n=="number"||typeof n=="bigint")&&a!=="body"&&Ua(e,""+n);break;case"className":La(e,"class",n);break;case"tabIndex":La(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":La(e,s,n);break;case"style":D(e,n,i);break;case"data":if(a!=="object"){La(e,"data",n);break}case"src":case"href":if(n===""&&(a!=="a"||s!=="href")){e.removeAttribute(s);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(s);break}n=$e(""+n),e.setAttribute(s,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(s==="formAction"?(a!=="input"&&At(e,a,"name",o.name,o,null),At(e,a,"formEncType",o.formEncType,o,null),At(e,a,"formMethod",o.formMethod,o,null),At(e,a,"formTarget",o.formTarget,o,null)):(At(e,a,"encType",o.encType,o,null),At(e,a,"method",o.method,o,null),At(e,a,"target",o.target,o,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(s);break}n=$e(""+n),e.setAttribute(s,n);break;case"onClick":n!=null&&(e.onclick=ut);break;case"onScroll":n!=null&&it("scroll",e);break;case"onScrollEnd":n!=null&&it("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(u(61));if(s=n.__html,s!=null){if(o.children!=null)throw Error(u(60));e.innerHTML=s}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}s=$e(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,""+n):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":n===!0?e.setAttribute(s,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(s,n):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(s,n):e.removeAttribute(s);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(s):e.setAttribute(s,n);break;case"popover":it("beforetoggle",e),it("toggle",e),rs(e,"popover",n);break;case"xlinkActuate":ha(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":ha(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":ha(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":ha(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":ha(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":ha(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":ha(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":ha(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":ha(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":rs(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=B.get(s)||s,rs(e,s,n))}}function fd(e,a,s,n,o,i){switch(s){case"style":D(e,n,i);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(u(61));if(s=n.__html,s!=null){if(o.children!=null)throw Error(u(60));e.innerHTML=s}}break;case"children":typeof n=="string"?Ua(e,n):(typeof n=="number"||typeof n=="bigint")&&Ua(e,""+n);break;case"onScroll":n!=null&&it("scroll",e);break;case"onScrollEnd":n!=null&&it("scrollend",e);break;case"onClick":n!=null&&(e.onclick=ut);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ns.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(o=s.endsWith("Capture"),a=s.slice(2,o?s.length-7:void 0),i=e[vt]||null,i=i!=null?i[s]:null,typeof i=="function"&&e.removeEventListener(a,i,o),typeof n=="function")){typeof i!="function"&&i!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(a,n,o);break e}s in e?e[s]=n:n===!0?e.setAttribute(s,""):rs(e,s,n)}}}function Aa(e,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",e),it("load",e);var n=!1,o=!1,i;for(i in s)if(s.hasOwnProperty(i)){var f=s[i];if(f!=null)switch(i){case"src":n=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,a));default:At(e,a,i,f,s,null)}}o&&At(e,a,"srcSet",s.srcSet,s,null),n&&At(e,a,"src",s.src,s,null);return;case"input":it("invalid",e);var _=i=f=o=null,q=null,de=null;for(n in s)if(s.hasOwnProperty(n)){var ge=s[n];if(ge!=null)switch(n){case"name":o=ge;break;case"type":f=ge;break;case"checked":q=ge;break;case"defaultChecked":de=ge;break;case"value":i=ge;break;case"defaultValue":_=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(u(137,a));break;default:At(e,a,n,ge,s,null)}}ea(e,i,_,q,de,f,o,!1);return;case"select":it("invalid",e),n=f=i=null;for(o in s)if(s.hasOwnProperty(o)&&(_=s[o],_!=null))switch(o){case"value":i=_;break;case"defaultValue":f=_;break;case"multiple":n=_;default:At(e,a,o,_,s,null)}a=i,s=f,e.multiple=!!n,a!=null?ga(e,!!n,a,!1):s!=null&&ga(e,!!n,s,!0);return;case"textarea":it("invalid",e),i=o=n=null;for(f in s)if(s.hasOwnProperty(f)&&(_=s[f],_!=null))switch(f){case"value":n=_;break;case"defaultValue":o=_;break;case"children":i=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(u(91));break;default:At(e,a,f,_,s,null)}gn(e,n,o,i);return;case"option":for(q in s)if(s.hasOwnProperty(q)&&(n=s[q],n!=null))switch(q){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:At(e,a,q,n,s,null)}return;case"dialog":it("beforetoggle",e),it("toggle",e),it("cancel",e),it("close",e);break;case"iframe":case"object":it("load",e);break;case"video":case"audio":for(n=0;n<Dl.length;n++)it(Dl[n],e);break;case"image":it("error",e),it("load",e);break;case"details":it("toggle",e);break;case"embed":case"source":case"link":it("error",e),it("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(de in s)if(s.hasOwnProperty(de)&&(n=s[de],n!=null))switch(de){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,a));default:At(e,a,de,n,s,null)}return;default:if(b(a)){for(ge in s)s.hasOwnProperty(ge)&&(n=s[ge],n!==void 0&&fd(e,a,ge,n,s,void 0));return}}for(_ in s)s.hasOwnProperty(_)&&(n=s[_],n!=null&&At(e,a,_,n,s,null))}function Xb(e,a,s,n){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,i=null,f=null,_=null,q=null,de=null,ge=null;for(pe in s){var Ce=s[pe];if(s.hasOwnProperty(pe)&&Ce!=null)switch(pe){case"checked":break;case"value":break;case"defaultValue":q=Ce;default:n.hasOwnProperty(pe)||At(e,a,pe,null,n,Ce)}}for(var ue in n){var pe=n[ue];if(Ce=s[ue],n.hasOwnProperty(ue)&&(pe!=null||Ce!=null))switch(ue){case"type":i=pe;break;case"name":o=pe;break;case"checked":de=pe;break;case"defaultChecked":ge=pe;break;case"value":f=pe;break;case"defaultValue":_=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(u(137,a));break;default:pe!==Ce&&At(e,a,ue,pe,n,Ce)}}Dt(e,f,_,q,de,ge,i,o);return;case"select":pe=f=_=ue=null;for(i in s)if(q=s[i],s.hasOwnProperty(i)&&q!=null)switch(i){case"value":break;case"multiple":pe=q;default:n.hasOwnProperty(i)||At(e,a,i,null,n,q)}for(o in n)if(i=n[o],q=s[o],n.hasOwnProperty(o)&&(i!=null||q!=null))switch(o){case"value":ue=i;break;case"defaultValue":_=i;break;case"multiple":f=i;default:i!==q&&At(e,a,o,i,n,q)}a=_,s=f,n=pe,ue!=null?ga(e,!!s,ue,!1):!!n!=!!s&&(a!=null?ga(e,!!s,a,!0):ga(e,!!s,s?[]:"",!1));return;case"textarea":pe=ue=null;for(_ in s)if(o=s[_],s.hasOwnProperty(_)&&o!=null&&!n.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:At(e,a,_,null,n,o)}for(f in n)if(o=n[f],i=s[f],n.hasOwnProperty(f)&&(o!=null||i!=null))switch(f){case"value":ue=o;break;case"defaultValue":pe=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(u(91));break;default:o!==i&&At(e,a,f,o,n,i)}Ga(e,ue,pe);return;case"option":for(var Oe in s)if(ue=s[Oe],s.hasOwnProperty(Oe)&&ue!=null&&!n.hasOwnProperty(Oe))switch(Oe){case"selected":e.selected=!1;break;default:At(e,a,Oe,null,n,ue)}for(q in n)if(ue=n[q],pe=s[q],n.hasOwnProperty(q)&&ue!==pe&&(ue!=null||pe!=null))switch(q){case"selected":e.selected=ue&&typeof ue!="function"&&typeof ue!="symbol";break;default:At(e,a,q,ue,n,pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Je in s)ue=s[Je],s.hasOwnProperty(Je)&&ue!=null&&!n.hasOwnProperty(Je)&&At(e,a,Je,null,n,ue);for(de in n)if(ue=n[de],pe=s[de],n.hasOwnProperty(de)&&ue!==pe&&(ue!=null||pe!=null))switch(de){case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(u(137,a));break;default:At(e,a,de,ue,n,pe)}return;default:if(b(a)){for(var Nt in s)ue=s[Nt],s.hasOwnProperty(Nt)&&ue!==void 0&&!n.hasOwnProperty(Nt)&&fd(e,a,Nt,void 0,n,ue);for(ge in n)ue=n[ge],pe=s[ge],!n.hasOwnProperty(ge)||ue===pe||ue===void 0&&pe===void 0||fd(e,a,ge,ue,n,pe);return}}for(var ne in s)ue=s[ne],s.hasOwnProperty(ne)&&ue!=null&&!n.hasOwnProperty(ne)&&At(e,a,ne,null,n,ue);for(Ce in n)ue=n[Ce],pe=s[Ce],!n.hasOwnProperty(Ce)||ue===pe||ue==null&&pe==null||At(e,a,Ce,ue,n,pe)}function vf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Zb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,a=0,s=performance.getEntriesByType("resource"),n=0;n<s.length;n++){var o=s[n],i=o.transferSize,f=o.initiatorType,_=o.duration;if(i&&_&&vf(f)){for(f=0,_=o.responseEnd,n+=1;n<s.length;n++){var q=s[n],de=q.startTime;if(de>_)break;var ge=q.transferSize,Ce=q.initiatorType;ge&&vf(Ce)&&(q=q.responseEnd,f+=ge*(q<_?1:(_-de)/(q-de)))}if(--n,a+=8*(i+f)/(o.duration/1e3),e++,10<e)break}}if(0<e)return a/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var hd=null,yd=null;function Ko(e){return e.nodeType===9?e:e.ownerDocument}function gf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xf(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function bd(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var vd=null;function Jb(){var e=window.event;return e&&e.type==="popstate"?e===vd?!1:(vd=e,!0):(vd=null,!1)}var _f=typeof setTimeout=="function"?setTimeout:void 0,Kb=typeof clearTimeout=="function"?clearTimeout:void 0,jf=typeof Promise=="function"?Promise:void 0,Pb=typeof queueMicrotask=="function"?queueMicrotask:typeof jf<"u"?function(e){return jf.resolve(null).then(e).catch(ev)}:_f;function ev(e){setTimeout(function(){throw e})}function In(e){return e==="head"}function Sf(e,a){var s=a,n=0;do{var o=s.nextSibling;if(e.removeChild(s),o&&o.nodeType===8)if(s=o.data,s==="/$"||s==="/&"){if(n===0){e.removeChild(o),Yr(a);return}n--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")n++;else if(s==="html")Ll(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,Ll(s);for(var i=s.firstChild;i;){var f=i.nextSibling,_=i.nodeName;i[fa]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&i.rel.toLowerCase()==="stylesheet"||s.removeChild(i),i=f}}else s==="body"&&Ll(e.ownerDocument.body);s=o}while(s);Yr(a)}function Cf(e,a){var s=e;e=0;do{var n=s.nextSibling;if(s.nodeType===1?a?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(a?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),n&&n.nodeType===8)if(s=n.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=n}while(s)}function gd(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":gd(s),Gt(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function tv(e,a,s,n){for(;e.nodeType===1;){var o=s;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[fa])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(i=e.getAttribute("rel"),i==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(i!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(i=e.getAttribute("src"),(i!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var i=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===i)return e}else return e;if(e=Cs(e.nextSibling),e===null)break}return null}function av(e,a,s){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Cs(e.nextSibling),e===null))return null;return e}function wf(e,a){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Cs(e.nextSibling),e===null))return null;return e}function xd(e){return e.data==="$?"||e.data==="$~"}function _d(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function sv(e,a){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=a;else if(e.data!=="$?"||s.readyState!=="loading")a();else{var n=function(){a(),s.removeEventListener("DOMContentLoaded",n)};s.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function Cs(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return e}var jd=null;function kf(e){e=e.nextSibling;for(var a=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(a===0)return Cs(e.nextSibling);a--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||a++}e=e.nextSibling}return null}function Af(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(a===0)return e;a--}else s!=="/$"&&s!=="/&"||a++}e=e.previousSibling}return null}function Nf(e,a,s){switch(a=Ko(s),e){case"html":if(e=a.documentElement,!e)throw Error(u(452));return e;case"head":if(e=a.head,!e)throw Error(u(453));return e;case"body":if(e=a.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function Ll(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);Gt(e)}var ws=new Map,Rf=new Set;function Po(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var pn=z.d;z.d={f:nv,r:rv,D:lv,C:ov,L:iv,m:cv,X:uv,S:dv,M:mv};function nv(){var e=pn.f(),a=Yo();return e||a}function rv(e){var a=Bt(e);a!==null&&a.tag===5&&a.type==="form"?Wm(a):pn.r(e)}var Fr=typeof document>"u"?null:document;function Mf(e,a,s){var n=Fr;if(n&&typeof a=="string"&&a){var o=Ge(a);o='link[rel="'+e+'"][href="'+o+'"]',typeof s=="string"&&(o+='[crossorigin="'+s+'"]'),Rf.has(o)||(Rf.add(o),e={rel:e,crossOrigin:s,href:a},n.querySelector(o)===null&&(a=n.createElement("link"),Aa(a,"link",e),ht(a),n.head.appendChild(a)))}}function lv(e){pn.D(e),Mf("dns-prefetch",e,null)}function ov(e,a){pn.C(e,a),Mf("preconnect",e,a)}function iv(e,a,s){pn.L(e,a,s);var n=Fr;if(n&&e&&a){var o='link[rel="preload"][as="'+Ge(a)+'"]';a==="image"&&s&&s.imageSrcSet?(o+='[imagesrcset="'+Ge(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(o+='[imagesizes="'+Ge(s.imageSizes)+'"]')):o+='[href="'+Ge(e)+'"]';var i=o;switch(a){case"style":i=Hr(e);break;case"script":i=$r(e)}ws.has(i)||(e=j({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:e,as:a},s),ws.set(i,e),n.querySelector(o)!==null||a==="style"&&n.querySelector(Il(i))||a==="script"&&n.querySelector(Ul(i))||(a=n.createElement("link"),Aa(a,"link",e),ht(a),n.head.appendChild(a)))}}function cv(e,a){pn.m(e,a);var s=Fr;if(s&&e){var n=a&&typeof a.as=="string"?a.as:"script",o='link[rel="modulepreload"][as="'+Ge(n)+'"][href="'+Ge(e)+'"]',i=o;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=$r(e)}if(!ws.has(i)&&(e=j({rel:"modulepreload",href:e},a),ws.set(i,e),s.querySelector(o)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Ul(i)))return}n=s.createElement("link"),Aa(n,"link",e),ht(n),s.head.appendChild(n)}}}function dv(e,a,s){pn.S(e,a,s);var n=Fr;if(n&&e){var o=oa(n).hoistableStyles,i=Hr(e);a=a||"default";var f=o.get(i);if(!f){var _={loading:0,preload:null};if(f=n.querySelector(Il(i)))_.loading=5;else{e=j({rel:"stylesheet",href:e,"data-precedence":a},s),(s=ws.get(i))&&Sd(e,s);var q=f=n.createElement("link");ht(q),Aa(q,"link",e),q._p=new Promise(function(de,ge){q.onload=de,q.onerror=ge}),q.addEventListener("load",function(){_.loading|=1}),q.addEventListener("error",function(){_.loading|=2}),_.loading|=4,ei(f,a,n)}f={type:"stylesheet",instance:f,count:1,state:_},o.set(i,f)}}}function uv(e,a){pn.X(e,a);var s=Fr;if(s&&e){var n=oa(s).hoistableScripts,o=$r(e),i=n.get(o);i||(i=s.querySelector(Ul(o)),i||(e=j({src:e,async:!0},a),(a=ws.get(o))&&Cd(e,a),i=s.createElement("script"),ht(i),Aa(i,"link",e),s.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(o,i))}}function mv(e,a){pn.M(e,a);var s=Fr;if(s&&e){var n=oa(s).hoistableScripts,o=$r(e),i=n.get(o);i||(i=s.querySelector(Ul(o)),i||(e=j({src:e,async:!0,type:"module"},a),(a=ws.get(o))&&Cd(e,a),i=s.createElement("script"),ht(i),Aa(i,"link",e),s.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(o,i))}}function Tf(e,a,s,n){var o=(o=Ae.current)?Po(o):null;if(!o)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=Hr(s.href),s=oa(o).hoistableStyles,n=s.get(a),n||(n={type:"style",instance:null,count:0,state:null},s.set(a,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Hr(s.href);var i=oa(o).hoistableStyles,f=i.get(e);if(f||(o=o.ownerDocument||o,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(e,f),(i=o.querySelector(Il(e)))&&!i._p&&(f.instance=i,f.state.loading=5),ws.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},ws.set(e,s),i||pv(o,e,s,f.state))),a&&n===null)throw Error(u(528,""));return f}if(a&&n!==null)throw Error(u(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=$r(s),s=oa(o).hoistableScripts,n=s.get(a),n||(n={type:"script",instance:null,count:0,state:null},s.set(a,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function Hr(e){return'href="'+Ge(e)+'"'}function Il(e){return'link[rel="stylesheet"]['+e+"]"}function Ef(e){return j({},e,{"data-precedence":e.precedence,precedence:null})}function pv(e,a,s,n){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?n.loading=1:(a=e.createElement("link"),n.preload=a,a.addEventListener("load",function(){return n.loading|=1}),a.addEventListener("error",function(){return n.loading|=2}),Aa(a,"link",s),ht(a),e.head.appendChild(a))}function $r(e){return'[src="'+Ge(e)+'"]'}function Ul(e){return"script[async]"+e}function zf(e,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var n=e.querySelector('style[data-href~="'+Ge(s.href)+'"]');if(n)return a.instance=n,ht(n),n;var o=j({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),ht(n),Aa(n,"style",o),ei(n,s.precedence,e),a.instance=n;case"stylesheet":o=Hr(s.href);var i=e.querySelector(Il(o));if(i)return a.state.loading|=4,a.instance=i,ht(i),i;n=Ef(s),(o=ws.get(o))&&Sd(n,o),i=(e.ownerDocument||e).createElement("link"),ht(i);var f=i;return f._p=new Promise(function(_,q){f.onload=_,f.onerror=q}),Aa(i,"link",n),a.state.loading|=4,ei(i,s.precedence,e),a.instance=i;case"script":return i=$r(s.src),(o=e.querySelector(Ul(i)))?(a.instance=o,ht(o),o):(n=s,(o=ws.get(i))&&(n=j({},s),Cd(n,o)),e=e.ownerDocument||e,o=e.createElement("script"),ht(o),Aa(o,"link",n),e.head.appendChild(o),a.instance=o);case"void":return null;default:throw Error(u(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(n=a.instance,a.state.loading|=4,ei(n,s.precedence,e));return a.instance}function ei(e,a,s){for(var n=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=n.length?n[n.length-1]:null,i=o,f=0;f<n.length;f++){var _=n[f];if(_.dataset.precedence===a)i=_;else if(i!==o)break}i?i.parentNode.insertBefore(e,i.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(e,a.firstChild))}function Sd(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function Cd(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var ti=null;function Bf(e,a,s){if(ti===null){var n=new Map,o=ti=new Map;o.set(s,n)}else o=ti,n=o.get(s),n||(n=new Map,o.set(s,n));if(n.has(e))return n;for(n.set(e,null),s=s.getElementsByTagName(e),o=0;o<s.length;o++){var i=s[o];if(!(i[fa]||i[ft]||e==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var f=i.getAttribute(a)||"";f=e+f;var _=n.get(f);_?_.push(i):n.set(f,[i])}}return n}function Df(e,a,s){e=e.ownerDocument||e,e.head.insertBefore(s,a==="title"?e.querySelector("head > title"):null)}function fv(e,a,s){if(s===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return e=a.disabled,typeof a.precedence=="string"&&e==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Of(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function hv(e,a,s,n){if(s.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var o=Hr(n.href),i=a.querySelector(Il(o));if(i){a=i._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(e.count++,e=ai.bind(e),a.then(e,e)),s.state.loading|=4,s.instance=i,ht(i);return}i=a.ownerDocument||a,n=Ef(n),(o=ws.get(o))&&Sd(n,o),i=i.createElement("link"),ht(i);var f=i;f._p=new Promise(function(_,q){f.onload=_,f.onerror=q}),Aa(i,"link",n),s.instance=i}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,a),(a=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=ai.bind(e),a.addEventListener("load",s),a.addEventListener("error",s))}}var wd=0;function yv(e,a){return e.stylesheets&&e.count===0&&ni(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var n=setTimeout(function(){if(e.stylesheets&&ni(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4+a);0<e.imgBytes&&wd===0&&(wd=62500*Zb());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ni(e,e.stylesheets),e.unsuspend)){var i=e.unsuspend;e.unsuspend=null,i()}},(e.imgBytes>wd?50:800)+a);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(o)}}:null}function ai(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ni(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var si=null;function ni(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,si=new Map,a.forEach(bv,e),si=null,ai.call(e))}function bv(e,a){if(!(a.state.loading&4)){var s=si.get(e);if(s)var n=s.get(null);else{s=new Map,si.set(e,s);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<o.length;i++){var f=o[i];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(s.set(f.dataset.precedence,f),n=f)}n&&s.set(null,n)}o=a.instance,f=o.getAttribute("data-precedence"),i=s.get(f)||n,i===n&&s.set(null,o),s.set(f,o),this.count++,n=ai.bind(this),o.addEventListener("load",n),o.addEventListener("error",n),i?i.parentNode.insertBefore(o,i.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),a.state.loading|=4}}var ql={$$typeof:N,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function vv(e,a,s,n,o,i,f,_,q){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kt(0),this.hiddenUpdates=Kt(null),this.identifierPrefix=n,this.onUncaughtError=o,this.onCaughtError=i,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function Lf(e,a,s,n,o,i,f,_,q,de,ge,Ce){return e=new vv(e,a,s,f,q,de,ge,Ce,_),a=1,i===!0&&(a|=24),i=os(3,null,null,a),e.current=i,i.stateNode=e,a=nc(),a.refCount++,e.pooledCache=a,a.refCount++,i.memoizedState={element:n,isDehydrated:s,cache:a},ic(i),e}function If(e){return e?(e=xr,e):xr}function Uf(e,a,s,n,o,i){o=If(o),n.context===null?n.context=o:n.pendingContext=o,n=An(a),n.payload={element:s},i=i===void 0?null:i,i!==null&&(n.callback=i),s=Nn(e,n,a),s!==null&&(Ka(s,e,a),vl(s,e,a))}function qf(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<a?s:a}}function kd(e,a){qf(e,a),(e=e.alternate)&&qf(e,a)}function Ff(e){if(e.tag===13||e.tag===31){var a=Xn(e,67108864);a!==null&&Ka(a,e,67108864),kd(e,67108864)}}function Hf(e){if(e.tag===13||e.tag===31){var a=ms();a=Ra(a);var s=Xn(e,a);s!==null&&Ka(s,e,a),kd(e,a)}}var ri=!0;function gv(e,a,s,n){var o=w.T;w.T=null;var i=z.p;try{z.p=2,Ad(e,a,s,n)}finally{z.p=i,w.T=o}}function xv(e,a,s,n){var o=w.T;w.T=null;var i=z.p;try{z.p=8,Ad(e,a,s,n)}finally{z.p=i,w.T=o}}function Ad(e,a,s,n){if(ri){var o=Nd(n);if(o===null)pd(e,a,n,li,s),Yf(e,n);else if(jv(o,e,a,s,n))n.stopPropagation();else if(Yf(e,n),a&4&&-1<_v.indexOf(e)){for(;o!==null;){var i=Bt(o);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var f=la(i.pendingLanes);if(f!==0){var _=i;for(_.pendingLanes|=2,_.entangledLanes|=2;f;){var q=1<<31-De(f);_.entanglements[1]|=q,f&=~q}Ws(i),(_t&6)===0&&(Ho=T()+500,Bl(0))}}break;case 31:case 13:_=Xn(i,2),_!==null&&Ka(_,i,2),Yo(),kd(i,2)}if(i=Nd(n),i===null&&pd(e,a,n,li,s),i===o)break;o=i}o!==null&&n.stopPropagation()}else pd(e,a,n,null,s)}}function Nd(e){return e=Z(e),Rd(e)}var li=null;function Rd(e){if(li=null,e=Ut(e),e!==null){var a=p(e);if(a===null)e=null;else{var s=a.tag;if(s===13){if(e=h(a),e!==null)return e;e=null}else if(s===31){if(e=y(a),e!==null)return e;e=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return li=e,null}function $f(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Re()){case ee:return 2;case Ie:return 8;case We:case Qt:return 32;case lt:return 268435456;default:return 32}default:return 32}}var Md=!1,Un=null,qn=null,Fn=null,Fl=new Map,Hl=new Map,Hn=[],_v="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yf(e,a){switch(e){case"focusin":case"focusout":Un=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Fn=null;break;case"pointerover":case"pointerout":Fl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hl.delete(a.pointerId)}}function $l(e,a,s,n,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:a,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[o]},a!==null&&(a=Bt(a),a!==null&&Ff(a)),e):(e.eventSystemFlags|=n,a=e.targetContainers,o!==null&&a.indexOf(o)===-1&&a.push(o),e)}function jv(e,a,s,n,o){switch(a){case"focusin":return Un=$l(Un,e,a,s,n,o),!0;case"dragenter":return qn=$l(qn,e,a,s,n,o),!0;case"mouseover":return Fn=$l(Fn,e,a,s,n,o),!0;case"pointerover":var i=o.pointerId;return Fl.set(i,$l(Fl.get(i)||null,e,a,s,n,o)),!0;case"gotpointercapture":return i=o.pointerId,Hl.set(i,$l(Hl.get(i)||null,e,a,s,n,o)),!0}return!1}function Wf(e){var a=Ut(e.target);if(a!==null){var s=p(a);if(s!==null){if(a=s.tag,a===13){if(a=h(s),a!==null){e.blockedOn=a,pa(e.priority,function(){Hf(s)});return}}else if(a===31){if(a=y(s),a!==null){e.blockedOn=a,pa(e.priority,function(){Hf(s)});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function oi(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var s=Nd(e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);ta=n,s.target.dispatchEvent(n),ta=null}else return a=Bt(s),a!==null&&Ff(a),e.blockedOn=s,!1;a.shift()}return!0}function Gf(e,a,s){oi(e)&&s.delete(a)}function Sv(){Md=!1,Un!==null&&oi(Un)&&(Un=null),qn!==null&&oi(qn)&&(qn=null),Fn!==null&&oi(Fn)&&(Fn=null),Fl.forEach(Gf),Hl.forEach(Gf)}function ii(e,a){e.blockedOn===a&&(e.blockedOn=null,Md||(Md=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Sv)))}var ci=null;function Vf(e){ci!==e&&(ci=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){ci===e&&(ci=null);for(var a=0;a<e.length;a+=3){var s=e[a],n=e[a+1],o=e[a+2];if(typeof n!="function"){if(Rd(n||s)===null)continue;break}var i=Bt(s);i!==null&&(e.splice(a,3),a-=3,Nc(i,{pending:!0,data:o,method:s.method,action:n},n,o))}}))}function Yr(e){function a(q){return ii(q,e)}Un!==null&&ii(Un,e),qn!==null&&ii(qn,e),Fn!==null&&ii(Fn,e),Fl.forEach(a),Hl.forEach(a);for(var s=0;s<Hn.length;s++){var n=Hn[s];n.blockedOn===e&&(n.blockedOn=null)}for(;0<Hn.length&&(s=Hn[0],s.blockedOn===null);)Wf(s),s.blockedOn===null&&Hn.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(n=0;n<s.length;n+=3){var o=s[n],i=s[n+1],f=o[vt]||null;if(typeof i=="function")f||Vf(s);else if(f){var _=null;if(i&&i.hasAttribute("formAction")){if(o=i,f=i[vt]||null)_=f.formAction;else if(Rd(o)!==null)continue}else _=f.action;typeof _=="function"?s[n+1]=_:(s.splice(n,3),n-=3),Vf(s)}}}function Qf(){function e(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(f){return o=f})},focusReset:"manual",scroll:"manual"})}function a(){o!==null&&(o(),o=null),n||setTimeout(s,20)}function s(){if(!n&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(s,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),o!==null&&(o(),o=null)}}}function Td(e){this._internalRoot=e}di.prototype.render=Td.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(u(409));var s=a.current,n=ms();Uf(s,n,e,a,null,null)},di.prototype.unmount=Td.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;Uf(e.current,2,null,e,null,null),Yo(),a[Xt]=null}};function di(e){this._internalRoot=e}di.prototype.unstable_scheduleHydration=function(e){if(e){var a=Ba();e={blockedOn:null,target:e,priority:a};for(var s=0;s<Hn.length&&a!==0&&a<Hn[s].priority;s++);Hn.splice(s,0,e),s===0&&Wf(e)}};var Xf=l.version;if(Xf!=="19.2.4")throw Error(u(527,Xf,"19.2.4"));z.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=v(a),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var Cv={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:w,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ui=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ui.isDisabled&&ui.supportsFiber)try{ba=ui.inject(Cv),Ze=ui}catch{}}return Wl.createRoot=function(e,a){if(!m(e))throw Error(u(299));var s=!1,n="",o=tp,i=ap,f=sp;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(n=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(i=a.onCaughtError),a.onRecoverableError!==void 0&&(f=a.onRecoverableError)),a=Lf(e,1,!1,null,null,s,n,null,o,i,f,Qf),e[Xt]=a.current,md(e),new Td(a)},Wl.hydrateRoot=function(e,a,s){if(!m(e))throw Error(u(299));var n=!1,o="",i=tp,f=ap,_=sp,q=null;return s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onUncaughtError!==void 0&&(i=s.onUncaughtError),s.onCaughtError!==void 0&&(f=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError),s.formState!==void 0&&(q=s.formState)),a=Lf(e,1,!0,a,s??null,n,o,q,i,f,_,Qf),a.context=If(null),s=a.current,n=ms(),n=Ra(n),o=An(n),o.callback=null,Nn(s,o,n),s=n,a.current.lanes=s,Wt(a,s),Ws(a),e[Xt]=a.current,md(e),new di(a)},Wl.version="19.2.4",Wl}var rh;function zv(){if(rh)return Bd.exports;rh=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(l){console.error(l)}}return r(),Bd.exports=Ev(),Bd.exports}var Bv=zv();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var lh="popstate";function Dv(r={}){function l(u,m){let{pathname:p,search:h,hash:y}=u.location;return Kd("",{pathname:p,search:h,hash:y},m.state&&m.state.usr||null,m.state&&m.state.key||"default")}function c(u,m){return typeof m=="string"?m:Xl(m)}return Lv(l,c,null,r)}function Ht(r,l){if(r===!1||r===null||typeof r>"u")throw new Error(l)}function Ns(r,l){if(!r){typeof console<"u"&&console.warn(l);try{throw new Error(l)}catch{}}}function Ov(){return Math.random().toString(36).substring(2,10)}function oh(r,l){return{usr:r.state,key:r.key,idx:l}}function Kd(r,l,c=null,u){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof l=="string"?Pr(l):l,state:c,key:l&&l.key||u||Ov()}}function Xl({pathname:r="/",search:l="",hash:c=""}){return l&&l!=="?"&&(r+=l.charAt(0)==="?"?l:"?"+l),c&&c!=="#"&&(r+=c.charAt(0)==="#"?c:"#"+c),r}function Pr(r){let l={};if(r){let c=r.indexOf("#");c>=0&&(l.hash=r.substring(c),r=r.substring(0,c));let u=r.indexOf("?");u>=0&&(l.search=r.substring(u),r=r.substring(0,u)),r&&(l.pathname=r)}return l}function Lv(r,l,c,u={}){let{window:m=document.defaultView,v5Compat:p=!1}=u,h=m.history,y="POP",g=null,v=x();v==null&&(v=0,h.replaceState({...h.state,idx:v},""));function x(){return(h.state||{idx:null}).idx}function j(){y="POP";let S=x(),V=S==null?null:S-v;v=S,g&&g({action:y,location:H.location,delta:V})}function M(S,V){y="PUSH";let se=Kd(H.location,S,V);v=x()+1;let N=oh(se,v),R=H.createHref(se);try{h.pushState(N,"",R)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;m.location.assign(R)}p&&g&&g({action:y,location:H.location,delta:1})}function I(S,V){y="REPLACE";let se=Kd(H.location,S,V);v=x();let N=oh(se,v),R=H.createHref(se);h.replaceState(N,"",R),p&&g&&g({action:y,location:H.location,delta:0})}function k(S){return Iv(S)}let H={get action(){return y},get location(){return r(m,h)},listen(S){if(g)throw new Error("A history only accepts one active listener");return m.addEventListener(lh,j),g=S,()=>{m.removeEventListener(lh,j),g=null}},createHref(S){return l(m,S)},createURL:k,encodeLocation(S){let V=k(S);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:M,replace:I,go(S){return h.go(S)}};return H}function Iv(r,l=!1){let c="http://localhost";typeof window<"u"&&(c=window.location.origin!=="null"?window.location.origin:window.location.href),Ht(c,"No window.location.(origin|href) available to create URL");let u=typeof r=="string"?r:Xl(r);return u=u.replace(/ $/,"%20"),!l&&u.startsWith("//")&&(u=c+u),new URL(u,c)}function Eh(r,l,c="/"){return Uv(r,l,c,!1)}function Uv(r,l,c,u){let m=typeof l=="string"?Pr(l):l,p=vn(m.pathname||"/",c);if(p==null)return null;let h=zh(r);qv(h);let y=null;for(let g=0;y==null&&g<h.length;++g){let v=Jv(p);y=Xv(h[g],v,u)}return y}function zh(r,l=[],c=[],u="",m=!1){let p=(h,y,g=m,v)=>{let x={relativePath:v===void 0?h.path||"":v,caseSensitive:h.caseSensitive===!0,childrenIndex:y,route:h};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(u)&&g)return;Ht(x.relativePath.startsWith(u),`Absolute route path "${x.relativePath}" nested under path "${u}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(u.length)}let j=hn([u,x.relativePath]),M=c.concat(x);h.children&&h.children.length>0&&(Ht(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${j}".`),zh(h.children,l,M,j,g)),!(h.path==null&&!h.index)&&l.push({path:j,score:Vv(j,h.index),routesMeta:M})};return r.forEach((h,y)=>{var g;if(h.path===""||!((g=h.path)!=null&&g.includes("?")))p(h,y);else for(let v of Bh(h.path))p(h,y,!0,v)}),l}function Bh(r){let l=r.split("/");if(l.length===0)return[];let[c,...u]=l,m=c.endsWith("?"),p=c.replace(/\?$/,"");if(u.length===0)return m?[p,""]:[p];let h=Bh(u.join("/")),y=[];return y.push(...h.map(g=>g===""?p:[p,g].join("/"))),m&&y.push(...h),y.map(g=>r.startsWith("/")&&g===""?"/":g)}function qv(r){r.sort((l,c)=>l.score!==c.score?c.score-l.score:Qv(l.routesMeta.map(u=>u.childrenIndex),c.routesMeta.map(u=>u.childrenIndex)))}var Fv=/^:[\w-]+$/,Hv=3,$v=2,Yv=1,Wv=10,Gv=-2,ih=r=>r==="*";function Vv(r,l){let c=r.split("/"),u=c.length;return c.some(ih)&&(u+=Gv),l&&(u+=$v),c.filter(m=>!ih(m)).reduce((m,p)=>m+(Fv.test(p)?Hv:p===""?Yv:Wv),u)}function Qv(r,l){return r.length===l.length&&r.slice(0,-1).every((u,m)=>u===l[m])?r[r.length-1]-l[l.length-1]:0}function Xv(r,l,c=!1){let{routesMeta:u}=r,m={},p="/",h=[];for(let y=0;y<u.length;++y){let g=u[y],v=y===u.length-1,x=p==="/"?l:l.slice(p.length)||"/",j=ji({path:g.relativePath,caseSensitive:g.caseSensitive,end:v},x),M=g.route;if(!j&&v&&c&&!u[u.length-1].route.index&&(j=ji({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},x)),!j)return null;Object.assign(m,j.params),h.push({params:m,pathname:hn([p,j.pathname]),pathnameBase:tg(hn([p,j.pathnameBase])),route:M}),j.pathnameBase!=="/"&&(p=hn([p,j.pathnameBase]))}return h}function ji(r,l){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[c,u]=Zv(r.path,r.caseSensitive,r.end),m=l.match(c);if(!m)return null;let p=m[0],h=p.replace(/(.)\/+$/,"$1"),y=m.slice(1);return{params:u.reduce((v,{paramName:x,isOptional:j},M)=>{if(x==="*"){let k=y[M]||"";h=p.slice(0,p.length-k.length).replace(/(.)\/+$/,"$1")}const I=y[M];return j&&!I?v[x]=void 0:v[x]=(I||"").replace(/%2F/g,"/"),v},{}),pathname:p,pathnameBase:h,pattern:r}}function Zv(r,l=!1,c=!0){Ns(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let u=[],m="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,y,g)=>(u.push({paramName:y,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(u.push({paramName:"*"}),m+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):c?m+="\\/*$":r!==""&&r!=="/"&&(m+="(?:(?=\\/|$))"),[new RegExp(m,l?void 0:"i"),u]}function Jv(r){try{return r.split("/").map(l=>decodeURIComponent(l).replace(/\//g,"%2F")).join("/")}catch(l){return Ns(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${l}).`),r}}function vn(r,l){if(l==="/")return r;if(!r.toLowerCase().startsWith(l.toLowerCase()))return null;let c=l.endsWith("/")?l.length-1:l.length,u=r.charAt(c);return u&&u!=="/"?null:r.slice(c)||"/"}var Kv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Pv(r,l="/"){let{pathname:c,search:u="",hash:m=""}=typeof r=="string"?Pr(r):r,p;return c?(c=c.replace(/\/\/+/g,"/"),c.startsWith("/")?p=ch(c.substring(1),"/"):p=ch(c,l)):p=l,{pathname:p,search:ag(u),hash:sg(m)}}function ch(r,l){let c=l.replace(/\/+$/,"").split("/");return r.split("/").forEach(m=>{m===".."?c.length>1&&c.pop():m!=="."&&c.push(m)}),c.length>1?c.join("/"):"/"}function Id(r,l,c,u){return`Cannot include a '${r}' character in a manually specified \`to.${l}\` field [${JSON.stringify(u)}].  Please separate it out to the \`to.${c}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function eg(r){return r.filter((l,c)=>c===0||l.route.path&&l.route.path.length>0)}function ou(r){let l=eg(r);return l.map((c,u)=>u===l.length-1?c.pathname:c.pathnameBase)}function iu(r,l,c,u=!1){let m;typeof r=="string"?m=Pr(r):(m={...r},Ht(!m.pathname||!m.pathname.includes("?"),Id("?","pathname","search",m)),Ht(!m.pathname||!m.pathname.includes("#"),Id("#","pathname","hash",m)),Ht(!m.search||!m.search.includes("#"),Id("#","search","hash",m)));let p=r===""||m.pathname==="",h=p?"/":m.pathname,y;if(h==null)y=c;else{let j=l.length-1;if(!u&&h.startsWith("..")){let M=h.split("/");for(;M[0]==="..";)M.shift(),j-=1;m.pathname=M.join("/")}y=j>=0?l[j]:"/"}let g=Pv(m,y),v=h&&h!=="/"&&h.endsWith("/"),x=(p||h===".")&&c.endsWith("/");return!g.pathname.endsWith("/")&&(v||x)&&(g.pathname+="/"),g}var hn=r=>r.join("/").replace(/\/\/+/g,"/"),tg=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),ag=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,sg=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,ng=class{constructor(r,l,c,u=!1){this.status=r,this.statusText=l||"",this.internal=u,c instanceof Error?(this.data=c.toString(),this.error=c):this.data=c}};function rg(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function lg(r){return r.map(l=>l.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Dh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Oh(r,l){let c=r;if(typeof c!="string"||!Kv.test(c))return{absoluteURL:void 0,isExternal:!1,to:c};let u=c,m=!1;if(Dh)try{let p=new URL(window.location.href),h=c.startsWith("//")?new URL(p.protocol+c):new URL(c),y=vn(h.pathname,l);h.origin===p.origin&&y!=null?c=y+h.search+h.hash:m=!0}catch{Ns(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:u,isExternal:m,to:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Lh=["POST","PUT","PATCH","DELETE"];new Set(Lh);var og=["GET",...Lh];new Set(og);var el=d.createContext(null);el.displayName="DataRouter";var ki=d.createContext(null);ki.displayName="DataRouterState";var ig=d.createContext(!1),Ih=d.createContext({isTransitioning:!1});Ih.displayName="ViewTransition";var cg=d.createContext(new Map);cg.displayName="Fetchers";var dg=d.createContext(null);dg.displayName="Await";var ps=d.createContext(null);ps.displayName="Navigation";var Zl=d.createContext(null);Zl.displayName="Location";var Rs=d.createContext({outlet:null,matches:[],isDataRoute:!1});Rs.displayName="Route";var cu=d.createContext(null);cu.displayName="RouteError";var Uh="REACT_ROUTER_ERROR",ug="REDIRECT",mg="ROUTE_ERROR_RESPONSE";function pg(r){if(r.startsWith(`${Uh}:${ug}:{`))try{let l=JSON.parse(r.slice(28));if(typeof l=="object"&&l&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.location=="string"&&typeof l.reloadDocument=="boolean"&&typeof l.replace=="boolean")return l}catch{}}function fg(r){if(r.startsWith(`${Uh}:${mg}:{`))try{let l=JSON.parse(r.slice(40));if(typeof l=="object"&&l&&typeof l.status=="number"&&typeof l.statusText=="string")return new ng(l.status,l.statusText,l.data)}catch{}}function hg(r,{relative:l}={}){Ht(tl(),"useHref() may be used only in the context of a <Router> component.");let{basename:c,navigator:u}=d.useContext(ps),{hash:m,pathname:p,search:h}=Jl(r,{relative:l}),y=p;return c!=="/"&&(y=p==="/"?c:hn([c,p])),u.createHref({pathname:y,search:h,hash:m})}function tl(){return d.useContext(Zl)!=null}function Ha(){return Ht(tl(),"useLocation() may be used only in the context of a <Router> component."),d.useContext(Zl).location}var qh="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Fh(r){d.useContext(ps).static||d.useLayoutEffect(r)}function It(){let{isDataRoute:r}=d.useContext(Rs);return r?Mg():yg()}function yg(){Ht(tl(),"useNavigate() may be used only in the context of a <Router> component.");let r=d.useContext(el),{basename:l,navigator:c}=d.useContext(ps),{matches:u}=d.useContext(Rs),{pathname:m}=Ha(),p=JSON.stringify(ou(u)),h=d.useRef(!1);return Fh(()=>{h.current=!0}),d.useCallback((g,v={})=>{if(Ns(h.current,qh),!h.current)return;if(typeof g=="number"){c.go(g);return}let x=iu(g,JSON.parse(p),m,v.relative==="path");r==null&&l!=="/"&&(x.pathname=x.pathname==="/"?l:hn([l,x.pathname])),(v.replace?c.replace:c.push)(x,v.state,v)},[l,c,p,m,r])}var bg=d.createContext(null);function vg(r){let l=d.useContext(Rs).outlet;return d.useMemo(()=>l&&d.createElement(bg.Provider,{value:r},l),[l,r])}function al(){let{matches:r}=d.useContext(Rs),l=r[r.length-1];return l?l.params:{}}function Jl(r,{relative:l}={}){let{matches:c}=d.useContext(Rs),{pathname:u}=Ha(),m=JSON.stringify(ou(c));return d.useMemo(()=>iu(r,JSON.parse(m),u,l==="path"),[r,m,u,l])}function gg(r,l){return Hh(r,l)}function Hh(r,l,c,u,m){var se;Ht(tl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:p}=d.useContext(ps),{matches:h}=d.useContext(Rs),y=h[h.length-1],g=y?y.params:{},v=y?y.pathname:"/",x=y?y.pathnameBase:"/",j=y&&y.route;{let N=j&&j.path||"";Yh(v,!j||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let M=Ha(),I;if(l){let N=typeof l=="string"?Pr(l):l;Ht(x==="/"||((se=N.pathname)==null?void 0:se.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${N.pathname}" was given in the \`location\` prop.`),I=N}else I=M;let k=I.pathname||"/",H=k;if(x!=="/"){let N=x.replace(/^\//,"").split("/");H="/"+k.replace(/^\//,"").split("/").slice(N.length).join("/")}let S=Eh(r,{pathname:H});Ns(j||S!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),Ns(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=Cg(S&&S.map(N=>Object.assign({},N,{params:Object.assign({},g,N.params),pathname:hn([x,p.encodeLocation?p.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?x:hn([x,p.encodeLocation?p.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),h,c,u,m);return l&&V?d.createElement(Zl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},V):V}function xg(){let r=Rg(),l=rg(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),c=r instanceof Error?r.stack:null,u="rgba(200,200,200, 0.5)",m={padding:"0.5rem",backgroundColor:u},p={padding:"2px 4px",backgroundColor:u},h=null;return console.error("Error handled by React Router default ErrorBoundary:",r),h=d.createElement(d.Fragment,null,d.createElement("p",null," Hey developer "),d.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",d.createElement("code",{style:p},"ErrorBoundary")," or"," ",d.createElement("code",{style:p},"errorElement")," prop on your route.")),d.createElement(d.Fragment,null,d.createElement("h2",null,"Unexpected Application Error!"),d.createElement("h3",{style:{fontStyle:"italic"}},l),c?d.createElement("pre",{style:m},c):null,h)}var _g=d.createElement(xg,null),$h=class extends d.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,l){return l.location!==r.location||l.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:l.error,location:l.location,revalidation:r.revalidation||l.revalidation}}componentDidCatch(r,l){this.props.onError?this.props.onError(r,l):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const c=fg(r.digest);c&&(r=c)}let l=r!==void 0?d.createElement(Rs.Provider,{value:this.props.routeContext},d.createElement(cu.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?d.createElement(jg,{error:r},l):l}};$h.contextType=ig;var Ud=new WeakMap;function jg({children:r,error:l}){let{basename:c}=d.useContext(ps);if(typeof l=="object"&&l&&"digest"in l&&typeof l.digest=="string"){let u=pg(l.digest);if(u){let m=Ud.get(l);if(m)throw m;let p=Oh(u.location,c);if(Dh&&!Ud.get(l))if(p.isExternal||u.reloadDocument)window.location.href=p.absoluteURL||p.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(p.to,{replace:u.replace}));throw Ud.set(l,h),h}return d.createElement("meta",{httpEquiv:"refresh",content:`0;url=${p.absoluteURL||p.to}`})}}return r}function Sg({routeContext:r,match:l,children:c}){let u=d.useContext(el);return u&&u.static&&u.staticContext&&(l.route.errorElement||l.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=l.route.id),d.createElement(Rs.Provider,{value:r},c)}function Cg(r,l=[],c=null,u=null,m=null){if(r==null){if(!c)return null;if(c.errors)r=c.matches;else if(l.length===0&&!c.initialized&&c.matches.length>0)r=c.matches;else return null}let p=r,h=c==null?void 0:c.errors;if(h!=null){let x=p.findIndex(j=>j.route.id&&(h==null?void 0:h[j.route.id])!==void 0);Ht(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),p=p.slice(0,Math.min(p.length,x+1))}let y=!1,g=-1;if(c)for(let x=0;x<p.length;x++){let j=p[x];if((j.route.HydrateFallback||j.route.hydrateFallbackElement)&&(g=x),j.route.id){let{loaderData:M,errors:I}=c,k=j.route.loader&&!M.hasOwnProperty(j.route.id)&&(!I||I[j.route.id]===void 0);if(j.route.lazy||k){y=!0,g>=0?p=p.slice(0,g+1):p=[p[0]];break}}}let v=c&&u?(x,j)=>{var M,I;u(x,{location:c.location,params:((I=(M=c.matches)==null?void 0:M[0])==null?void 0:I.params)??{},unstable_pattern:lg(c.matches),errorInfo:j})}:void 0;return p.reduceRight((x,j,M)=>{let I,k=!1,H=null,S=null;c&&(I=h&&j.route.id?h[j.route.id]:void 0,H=j.route.errorElement||_g,y&&(g<0&&M===0?(Yh("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,S=null):g===M&&(k=!0,S=j.route.hydrateFallbackElement||null)));let V=l.concat(p.slice(0,M+1)),se=()=>{let N;return I?N=H:k?N=S:j.route.Component?N=d.createElement(j.route.Component,null):j.route.element?N=j.route.element:N=x,d.createElement(Sg,{match:j,routeContext:{outlet:x,matches:V,isDataRoute:c!=null},children:N})};return c&&(j.route.ErrorBoundary||j.route.errorElement||M===0)?d.createElement($h,{location:c.location,revalidation:c.revalidation,component:H,error:I,children:se(),routeContext:{outlet:null,matches:V,isDataRoute:!0},onError:v}):se()},null)}function du(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wg(r){let l=d.useContext(el);return Ht(l,du(r)),l}function kg(r){let l=d.useContext(ki);return Ht(l,du(r)),l}function Ag(r){let l=d.useContext(Rs);return Ht(l,du(r)),l}function uu(r){let l=Ag(r),c=l.matches[l.matches.length-1];return Ht(c.route.id,`${r} can only be used on routes that contain a unique "id"`),c.route.id}function Ng(){return uu("useRouteId")}function Rg(){var u;let r=d.useContext(cu),l=kg("useRouteError"),c=uu("useRouteError");return r!==void 0?r:(u=l.errors)==null?void 0:u[c]}function Mg(){let{router:r}=wg("useNavigate"),l=uu("useNavigate"),c=d.useRef(!1);return Fh(()=>{c.current=!0}),d.useCallback(async(m,p={})=>{Ns(c.current,qh),c.current&&(typeof m=="number"?await r.navigate(m):await r.navigate(m,{fromRouteId:l,...p}))},[r,l])}var dh={};function Yh(r,l,c){!l&&!dh[r]&&(dh[r]=!0,Ns(!1,c))}d.memo(Tg);function Tg({routes:r,future:l,state:c,onError:u}){return Hh(r,void 0,c,u,l)}function Gs({to:r,replace:l,state:c,relative:u}){Ht(tl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:m}=d.useContext(ps);Ns(!m,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:p}=d.useContext(Rs),{pathname:h}=Ha(),y=It(),g=iu(r,ou(p),h,u==="path"),v=JSON.stringify(g);return d.useEffect(()=>{y(JSON.parse(v),{replace:l,state:c,relative:u})},[y,v,u,l,c]),null}function Eg(r){return vg(r.context)}function at(r){Ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function zg({basename:r="/",children:l=null,location:c,navigationType:u="POP",navigator:m,static:p=!1,unstable_useTransitions:h}){Ht(!tl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=r.replace(/^\/*/,"/"),g=d.useMemo(()=>({basename:y,navigator:m,static:p,unstable_useTransitions:h,future:{}}),[y,m,p,h]);typeof c=="string"&&(c=Pr(c));let{pathname:v="/",search:x="",hash:j="",state:M=null,key:I="default"}=c,k=d.useMemo(()=>{let H=vn(v,y);return H==null?null:{location:{pathname:H,search:x,hash:j,state:M,key:I},navigationType:u}},[y,v,x,j,M,I,u]);return Ns(k!=null,`<Router basename="${y}"> is not able to match the URL "${v}${x}${j}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:d.createElement(ps.Provider,{value:g},d.createElement(Zl.Provider,{children:l,value:k}))}function Bg({children:r,location:l}){return gg(Pd(r),l)}function Pd(r,l=[]){let c=[];return d.Children.forEach(r,(u,m)=>{if(!d.isValidElement(u))return;let p=[...l,m];if(u.type===d.Fragment){c.push.apply(c,Pd(u.props.children,p));return}Ht(u.type===at,`[${typeof u.type=="string"?u.type:u.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ht(!u.props.index||!u.props.children,"An index route cannot have child routes.");let h={id:u.props.id||p.join("-"),caseSensitive:u.props.caseSensitive,element:u.props.element,Component:u.props.Component,index:u.props.index,path:u.props.path,middleware:u.props.middleware,loader:u.props.loader,action:u.props.action,hydrateFallbackElement:u.props.hydrateFallbackElement,HydrateFallback:u.props.HydrateFallback,errorElement:u.props.errorElement,ErrorBoundary:u.props.ErrorBoundary,hasErrorBoundary:u.props.hasErrorBoundary===!0||u.props.ErrorBoundary!=null||u.props.errorElement!=null,shouldRevalidate:u.props.shouldRevalidate,handle:u.props.handle,lazy:u.props.lazy};u.props.children&&(h.children=Pd(u.props.children,p)),c.push(h)}),c}var bi="get",vi="application/x-www-form-urlencoded";function Ai(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function Dg(r){return Ai(r)&&r.tagName.toLowerCase()==="button"}function Og(r){return Ai(r)&&r.tagName.toLowerCase()==="form"}function Lg(r){return Ai(r)&&r.tagName.toLowerCase()==="input"}function Ig(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Ug(r,l){return r.button===0&&(!l||l==="_self")&&!Ig(r)}function eu(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((l,c)=>{let u=r[c];return l.concat(Array.isArray(u)?u.map(m=>[c,m]):[[c,u]])},[]))}function qg(r,l){let c=eu(r);return l&&l.forEach((u,m)=>{c.has(m)||l.getAll(m).forEach(p=>{c.append(m,p)})}),c}var mi=null;function Fg(){if(mi===null)try{new FormData(document.createElement("form"),0),mi=!1}catch{mi=!0}return mi}var Hg=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qd(r){return r!=null&&!Hg.has(r)?(Ns(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vi}"`),null):r}function $g(r,l){let c,u,m,p,h;if(Og(r)){let y=r.getAttribute("action");u=y?vn(y,l):null,c=r.getAttribute("method")||bi,m=qd(r.getAttribute("enctype"))||vi,p=new FormData(r)}else if(Dg(r)||Lg(r)&&(r.type==="submit"||r.type==="image")){let y=r.form;if(y==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=r.getAttribute("formaction")||y.getAttribute("action");if(u=g?vn(g,l):null,c=r.getAttribute("formmethod")||y.getAttribute("method")||bi,m=qd(r.getAttribute("formenctype"))||qd(y.getAttribute("enctype"))||vi,p=new FormData(y,r),!Fg()){let{name:v,type:x,value:j}=r;if(x==="image"){let M=v?`${v}.`:"";p.append(`${M}x`,"0"),p.append(`${M}y`,"0")}else v&&p.append(v,j)}}else{if(Ai(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');c=bi,u=null,m=vi,h=r}return p&&m==="text/plain"&&(h=p,p=void 0),{action:u,method:c.toLowerCase(),encType:m,formData:p,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function mu(r,l){if(r===!1||r===null||typeof r>"u")throw new Error(l)}function Yg(r,l,c,u){let m=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return c?m.pathname.endsWith("/")?m.pathname=`${m.pathname}_.${u}`:m.pathname=`${m.pathname}.${u}`:m.pathname==="/"?m.pathname=`_root.${u}`:l&&vn(m.pathname,l)==="/"?m.pathname=`${l.replace(/\/$/,"")}/_root.${u}`:m.pathname=`${m.pathname.replace(/\/$/,"")}.${u}`,m}async function Wg(r,l){if(r.id in l)return l[r.id];try{let c=await import(r.module);return l[r.id]=c,c}catch(c){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(c),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Gg(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Vg(r,l,c){let u=await Promise.all(r.map(async m=>{let p=l.routes[m.route.id];if(p){let h=await Wg(p,c);return h.links?h.links():[]}return[]}));return Jg(u.flat(1).filter(Gg).filter(m=>m.rel==="stylesheet"||m.rel==="preload").map(m=>m.rel==="stylesheet"?{...m,rel:"prefetch",as:"style"}:{...m,rel:"prefetch"}))}function uh(r,l,c,u,m,p){let h=(g,v)=>c[v]?g.route.id!==c[v].route.id:!0,y=(g,v)=>{var x;return c[v].pathname!==g.pathname||((x=c[v].route.path)==null?void 0:x.endsWith("*"))&&c[v].params["*"]!==g.params["*"]};return p==="assets"?l.filter((g,v)=>h(g,v)||y(g,v)):p==="data"?l.filter((g,v)=>{var j;let x=u.routes[g.route.id];if(!x||!x.hasLoader)return!1;if(h(g,v)||y(g,v))return!0;if(g.route.shouldRevalidate){let M=g.route.shouldRevalidate({currentUrl:new URL(m.pathname+m.search+m.hash,window.origin),currentParams:((j=c[0])==null?void 0:j.params)||{},nextUrl:new URL(r,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof M=="boolean")return M}return!0}):[]}function Qg(r,l,{includeHydrateFallback:c}={}){return Xg(r.map(u=>{let m=l.routes[u.route.id];if(!m)return[];let p=[m.module];return m.clientActionModule&&(p=p.concat(m.clientActionModule)),m.clientLoaderModule&&(p=p.concat(m.clientLoaderModule)),c&&m.hydrateFallbackModule&&(p=p.concat(m.hydrateFallbackModule)),m.imports&&(p=p.concat(m.imports)),p}).flat(1))}function Xg(r){return[...new Set(r)]}function Zg(r){let l={},c=Object.keys(r).sort();for(let u of c)l[u]=r[u];return l}function Jg(r,l){let c=new Set;return new Set(l),r.reduce((u,m)=>{let p=JSON.stringify(Zg(m));return c.has(p)||(c.add(p),u.push({key:p,link:m})),u},[])}function Wh(){let r=d.useContext(el);return mu(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Kg(){let r=d.useContext(ki);return mu(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var pu=d.createContext(void 0);pu.displayName="FrameworkContext";function Gh(){let r=d.useContext(pu);return mu(r,"You must render this element inside a <HydratedRouter> element"),r}function Pg(r,l){let c=d.useContext(pu),[u,m]=d.useState(!1),[p,h]=d.useState(!1),{onFocus:y,onBlur:g,onMouseEnter:v,onMouseLeave:x,onTouchStart:j}=l,M=d.useRef(null);d.useEffect(()=>{if(r==="render"&&h(!0),r==="viewport"){let H=V=>{V.forEach(se=>{h(se.isIntersecting)})},S=new IntersectionObserver(H,{threshold:.5});return M.current&&S.observe(M.current),()=>{S.disconnect()}}},[r]),d.useEffect(()=>{if(u){let H=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(H)}}},[u]);let I=()=>{m(!0)},k=()=>{m(!1),h(!1)};return c?r!=="intent"?[p,M,{}]:[p,M,{onFocus:Gl(y,I),onBlur:Gl(g,k),onMouseEnter:Gl(v,I),onMouseLeave:Gl(x,k),onTouchStart:Gl(j,I)}]:[!1,M,{}]}function Gl(r,l){return c=>{r&&r(c),c.defaultPrevented||l(c)}}function ex({page:r,...l}){let{router:c}=Wh(),u=d.useMemo(()=>Eh(c.routes,r,c.basename),[c.routes,r,c.basename]);return u?d.createElement(ax,{page:r,matches:u,...l}):null}function tx(r){let{manifest:l,routeModules:c}=Gh(),[u,m]=d.useState([]);return d.useEffect(()=>{let p=!1;return Vg(r,l,c).then(h=>{p||m(h)}),()=>{p=!0}},[r,l,c]),u}function ax({page:r,matches:l,...c}){let u=Ha(),{future:m,manifest:p,routeModules:h}=Gh(),{basename:y}=Wh(),{loaderData:g,matches:v}=Kg(),x=d.useMemo(()=>uh(r,l,v,p,u,"data"),[r,l,v,p,u]),j=d.useMemo(()=>uh(r,l,v,p,u,"assets"),[r,l,v,p,u]),M=d.useMemo(()=>{if(r===u.pathname+u.search+u.hash)return[];let H=new Set,S=!1;if(l.forEach(se=>{var R;let N=p.routes[se.route.id];!N||!N.hasLoader||(!x.some(W=>W.route.id===se.route.id)&&se.route.id in g&&((R=h[se.route.id])!=null&&R.shouldRevalidate)||N.hasClientLoader?S=!0:H.add(se.route.id))}),H.size===0)return[];let V=Yg(r,y,m.unstable_trailingSlashAwareDataRequests,"data");return S&&H.size>0&&V.searchParams.set("_routes",l.filter(se=>H.has(se.route.id)).map(se=>se.route.id).join(",")),[V.pathname+V.search]},[y,m.unstable_trailingSlashAwareDataRequests,g,u,p,x,l,r,h]),I=d.useMemo(()=>Qg(j,p),[j,p]),k=tx(j);return d.createElement(d.Fragment,null,M.map(H=>d.createElement("link",{key:H,rel:"prefetch",as:"fetch",href:H,...c})),I.map(H=>d.createElement("link",{key:H,rel:"modulepreload",href:H,...c})),k.map(({key:H,link:S})=>d.createElement("link",{key:H,nonce:c.nonce,...S,crossOrigin:S.crossOrigin??c.crossOrigin})))}function sx(...r){return l=>{r.forEach(c=>{typeof c=="function"?c(l):c!=null&&(c.current=l)})}}var nx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{nx&&(window.__reactRouterVersion="7.13.0")}catch{}function rx({basename:r,children:l,unstable_useTransitions:c,window:u}){let m=d.useRef();m.current==null&&(m.current=Dv({window:u,v5Compat:!0}));let p=m.current,[h,y]=d.useState({action:p.action,location:p.location}),g=d.useCallback(v=>{c===!1?y(v):d.startTransition(()=>y(v))},[c]);return d.useLayoutEffect(()=>p.listen(g),[p,g]),d.createElement(zg,{basename:r,children:l,location:h.location,navigationType:h.action,navigator:p,unstable_useTransitions:c})}var Vh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qh=d.forwardRef(function({onClick:l,discover:c="render",prefetch:u="none",relative:m,reloadDocument:p,replace:h,state:y,target:g,to:v,preventScrollReset:x,viewTransition:j,unstable_defaultShouldRevalidate:M,...I},k){let{basename:H,unstable_useTransitions:S}=d.useContext(ps),V=typeof v=="string"&&Vh.test(v),se=Oh(v,H);v=se.to;let N=hg(v,{relative:m}),[R,W,K]=Pg(u,I),Y=ix(v,{replace:h,state:y,target:g,preventScrollReset:x,relative:m,viewTransition:j,unstable_defaultShouldRevalidate:M,unstable_useTransitions:S});function he(Q){l&&l(Q),Q.defaultPrevented||Y(Q)}let A=d.createElement("a",{...I,...K,href:se.absoluteURL||N,onClick:se.isExternal||p?l:he,ref:sx(k,W),target:g,"data-discover":!V&&c==="render"?"true":void 0});return R&&!V?d.createElement(d.Fragment,null,A,d.createElement(ex,{page:N})):A});Qh.displayName="Link";var ma=d.forwardRef(function({"aria-current":l="page",caseSensitive:c=!1,className:u="",end:m=!1,style:p,to:h,viewTransition:y,children:g,...v},x){let j=Jl(h,{relative:v.relative}),M=Ha(),I=d.useContext(ki),{navigator:k,basename:H}=d.useContext(ps),S=I!=null&&px(j)&&y===!0,V=k.encodeLocation?k.encodeLocation(j).pathname:j.pathname,se=M.pathname,N=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;c||(se=se.toLowerCase(),N=N?N.toLowerCase():null,V=V.toLowerCase()),N&&H&&(N=vn(N,H)||N);const R=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let W=se===V||!m&&se.startsWith(V)&&se.charAt(R)==="/",K=N!=null&&(N===V||!m&&N.startsWith(V)&&N.charAt(V.length)==="/"),Y={isActive:W,isPending:K,isTransitioning:S},he=W?l:void 0,A;typeof u=="function"?A=u(Y):A=[u,W?"active":null,K?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let Q=typeof p=="function"?p(Y):p;return d.createElement(Qh,{...v,"aria-current":he,className:A,ref:x,style:Q,to:h,viewTransition:y},typeof g=="function"?g(Y):g)});ma.displayName="NavLink";var lx=d.forwardRef(({discover:r="render",fetcherKey:l,navigate:c,reloadDocument:u,replace:m,state:p,method:h=bi,action:y,onSubmit:g,relative:v,preventScrollReset:x,viewTransition:j,unstable_defaultShouldRevalidate:M,...I},k)=>{let{unstable_useTransitions:H}=d.useContext(ps),S=ux(),V=mx(y,{relative:v}),se=h.toLowerCase()==="get"?"get":"post",N=typeof y=="string"&&Vh.test(y),R=W=>{if(g&&g(W),W.defaultPrevented)return;W.preventDefault();let K=W.nativeEvent.submitter,Y=(K==null?void 0:K.getAttribute("formmethod"))||h,he=()=>S(K||W.currentTarget,{fetcherKey:l,method:Y,navigate:c,replace:m,state:p,relative:v,preventScrollReset:x,viewTransition:j,unstable_defaultShouldRevalidate:M});H&&c!==!1?d.startTransition(()=>he()):he()};return d.createElement("form",{ref:k,method:se,action:V,onSubmit:u?g:R,...I,"data-discover":!N&&r==="render"?"true":void 0})});lx.displayName="Form";function ox(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Xh(r){let l=d.useContext(el);return Ht(l,ox(r)),l}function ix(r,{target:l,replace:c,state:u,preventScrollReset:m,relative:p,viewTransition:h,unstable_defaultShouldRevalidate:y,unstable_useTransitions:g}={}){let v=It(),x=Ha(),j=Jl(r,{relative:p});return d.useCallback(M=>{if(Ug(M,l)){M.preventDefault();let I=c!==void 0?c:Xl(x)===Xl(j),k=()=>v(r,{replace:I,state:u,preventScrollReset:m,relative:p,viewTransition:h,unstable_defaultShouldRevalidate:y});g?d.startTransition(()=>k()):k()}},[x,v,j,c,u,l,r,m,p,h,y,g])}function Ms(r){Ns(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let l=d.useRef(eu(r)),c=d.useRef(!1),u=Ha(),m=d.useMemo(()=>qg(u.search,c.current?null:l.current),[u.search]),p=It(),h=d.useCallback((y,g)=>{const v=eu(typeof y=="function"?y(new URLSearchParams(m)):y);c.current=!0,p("?"+v,g)},[p,m]);return[m,h]}var cx=0,dx=()=>`__${String(++cx)}__`;function ux(){let{router:r}=Xh("useSubmit"),{basename:l}=d.useContext(ps),c=Ng(),u=r.fetch,m=r.navigate;return d.useCallback(async(p,h={})=>{let{action:y,method:g,encType:v,formData:x,body:j}=$g(p,l);if(h.navigate===!1){let M=h.fetcherKey||dx();await u(M,c,h.action||y,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:x,body:j,formMethod:h.method||g,formEncType:h.encType||v,flushSync:h.flushSync})}else await m(h.action||y,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:x,body:j,formMethod:h.method||g,formEncType:h.encType||v,replace:h.replace,state:h.state,fromRouteId:c,flushSync:h.flushSync,viewTransition:h.viewTransition})},[u,m,l,c])}function mx(r,{relative:l}={}){let{basename:c}=d.useContext(ps),u=d.useContext(Rs);Ht(u,"useFormAction must be used inside a RouteContext");let[m]=u.matches.slice(-1),p={...Jl(r||".",{relative:l})},h=Ha();if(r==null){p.search=h.search;let y=new URLSearchParams(p.search),g=y.getAll("index");if(g.some(x=>x==="")){y.delete("index"),g.filter(j=>j).forEach(j=>y.append("index",j));let x=y.toString();p.search=x?`?${x}`:""}}return(!r||r===".")&&m.route.index&&(p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index"),c!=="/"&&(p.pathname=p.pathname==="/"?c:hn([c,p.pathname])),Xl(p)}function px(r,{relative:l}={}){let c=d.useContext(Ih);Ht(c!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:u}=Xh("useViewTransitionState"),m=Jl(r,{relative:l});if(!c.isTransitioning)return!1;let p=vn(c.currentLocation.pathname,u)||c.currentLocation.pathname,h=vn(c.nextLocation.pathname,u)||c.nextLocation.pathname;return ji(m.pathname,h)!=null||ji(m.pathname,p)!=null}var Vl=Th();function Zh(r,l){return function(){return r.apply(l,arguments)}}const{toString:fx}=Object.prototype,{getPrototypeOf:fu}=Object,{iterator:Ni,toStringTag:Jh}=Symbol,Ri=(r=>l=>{const c=fx.call(l);return r[c]||(r[c]=c.slice(8,-1).toLowerCase())})(Object.create(null)),Us=r=>(r=r.toLowerCase(),l=>Ri(l)===r),Mi=r=>l=>typeof l===r,{isArray:sl}=Array,Kr=Mi("undefined");function Kl(r){return r!==null&&!Kr(r)&&r.constructor!==null&&!Kr(r.constructor)&&ts(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const Kh=Us("ArrayBuffer");function hx(r){let l;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?l=ArrayBuffer.isView(r):l=r&&r.buffer&&Kh(r.buffer),l}const yx=Mi("string"),ts=Mi("function"),Ph=Mi("number"),Pl=r=>r!==null&&typeof r=="object",bx=r=>r===!0||r===!1,gi=r=>{if(Ri(r)!=="object")return!1;const l=fu(r);return(l===null||l===Object.prototype||Object.getPrototypeOf(l)===null)&&!(Jh in r)&&!(Ni in r)},vx=r=>{if(!Pl(r)||Kl(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},gx=Us("Date"),xx=Us("File"),_x=Us("Blob"),jx=Us("FileList"),Sx=r=>Pl(r)&&ts(r.pipe),Cx=r=>{let l;return r&&(typeof FormData=="function"&&r instanceof FormData||ts(r.append)&&((l=Ri(r))==="formdata"||l==="object"&&ts(r.toString)&&r.toString()==="[object FormData]"))},wx=Us("URLSearchParams"),[kx,Ax,Nx,Rx]=["ReadableStream","Request","Response","Headers"].map(Us),Mx=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function eo(r,l,{allOwnKeys:c=!1}={}){if(r===null||typeof r>"u")return;let u,m;if(typeof r!="object"&&(r=[r]),sl(r))for(u=0,m=r.length;u<m;u++)l.call(null,r[u],u,r);else{if(Kl(r))return;const p=c?Object.getOwnPropertyNames(r):Object.keys(r),h=p.length;let y;for(u=0;u<h;u++)y=p[u],l.call(null,r[y],y,r)}}function ey(r,l){if(Kl(r))return null;l=l.toLowerCase();const c=Object.keys(r);let u=c.length,m;for(;u-- >0;)if(m=c[u],l===m.toLowerCase())return m;return null}const cr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ty=r=>!Kr(r)&&r!==cr;function tu(){const{caseless:r,skipUndefined:l}=ty(this)&&this||{},c={},u=(m,p)=>{if(p==="__proto__"||p==="constructor"||p==="prototype")return;const h=r&&ey(c,p)||p;gi(c[h])&&gi(m)?c[h]=tu(c[h],m):gi(m)?c[h]=tu({},m):sl(m)?c[h]=m.slice():(!l||!Kr(m))&&(c[h]=m)};for(let m=0,p=arguments.length;m<p;m++)arguments[m]&&eo(arguments[m],u);return c}const Tx=(r,l,c,{allOwnKeys:u}={})=>(eo(l,(m,p)=>{c&&ts(m)?Object.defineProperty(r,p,{value:Zh(m,c),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(r,p,{value:m,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:u}),r),Ex=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),zx=(r,l,c,u)=>{r.prototype=Object.create(l.prototype,u),Object.defineProperty(r.prototype,"constructor",{value:r,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(r,"super",{value:l.prototype}),c&&Object.assign(r.prototype,c)},Bx=(r,l,c,u)=>{let m,p,h;const y={};if(l=l||{},r==null)return l;do{for(m=Object.getOwnPropertyNames(r),p=m.length;p-- >0;)h=m[p],(!u||u(h,r,l))&&!y[h]&&(l[h]=r[h],y[h]=!0);r=c!==!1&&fu(r)}while(r&&(!c||c(r,l))&&r!==Object.prototype);return l},Dx=(r,l,c)=>{r=String(r),(c===void 0||c>r.length)&&(c=r.length),c-=l.length;const u=r.indexOf(l,c);return u!==-1&&u===c},Ox=r=>{if(!r)return null;if(sl(r))return r;let l=r.length;if(!Ph(l))return null;const c=new Array(l);for(;l-- >0;)c[l]=r[l];return c},Lx=(r=>l=>r&&l instanceof r)(typeof Uint8Array<"u"&&fu(Uint8Array)),Ix=(r,l)=>{const u=(r&&r[Ni]).call(r);let m;for(;(m=u.next())&&!m.done;){const p=m.value;l.call(r,p[0],p[1])}},Ux=(r,l)=>{let c;const u=[];for(;(c=r.exec(l))!==null;)u.push(c);return u},qx=Us("HTMLFormElement"),Fx=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(c,u,m){return u.toUpperCase()+m}),mh=(({hasOwnProperty:r})=>(l,c)=>r.call(l,c))(Object.prototype),Hx=Us("RegExp"),ay=(r,l)=>{const c=Object.getOwnPropertyDescriptors(r),u={};eo(c,(m,p)=>{let h;(h=l(m,p,r))!==!1&&(u[p]=h||m)}),Object.defineProperties(r,u)},$x=r=>{ay(r,(l,c)=>{if(ts(r)&&["arguments","caller","callee"].indexOf(c)!==-1)return!1;const u=r[c];if(ts(u)){if(l.enumerable=!1,"writable"in l){l.writable=!1;return}l.set||(l.set=()=>{throw Error("Can not rewrite read-only method '"+c+"'")})}})},Yx=(r,l)=>{const c={},u=m=>{m.forEach(p=>{c[p]=!0})};return sl(r)?u(r):u(String(r).split(l)),c},Wx=()=>{},Gx=(r,l)=>r!=null&&Number.isFinite(r=+r)?r:l;function Vx(r){return!!(r&&ts(r.append)&&r[Jh]==="FormData"&&r[Ni])}const Qx=r=>{const l=new Array(10),c=(u,m)=>{if(Pl(u)){if(l.indexOf(u)>=0)return;if(Kl(u))return u;if(!("toJSON"in u)){l[m]=u;const p=sl(u)?[]:{};return eo(u,(h,y)=>{const g=c(h,m+1);!Kr(g)&&(p[y]=g)}),l[m]=void 0,p}}return u};return c(r,0)},Xx=Us("AsyncFunction"),Zx=r=>r&&(Pl(r)||ts(r))&&ts(r.then)&&ts(r.catch),sy=((r,l)=>r?setImmediate:l?((c,u)=>(cr.addEventListener("message",({source:m,data:p})=>{m===cr&&p===c&&u.length&&u.shift()()},!1),m=>{u.push(m),cr.postMessage(c,"*")}))(`axios@${Math.random()}`,[]):c=>setTimeout(c))(typeof setImmediate=="function",ts(cr.postMessage)),Jx=typeof queueMicrotask<"u"?queueMicrotask.bind(cr):typeof process<"u"&&process.nextTick||sy,Kx=r=>r!=null&&ts(r[Ni]),me={isArray:sl,isArrayBuffer:Kh,isBuffer:Kl,isFormData:Cx,isArrayBufferView:hx,isString:yx,isNumber:Ph,isBoolean:bx,isObject:Pl,isPlainObject:gi,isEmptyObject:vx,isReadableStream:kx,isRequest:Ax,isResponse:Nx,isHeaders:Rx,isUndefined:Kr,isDate:gx,isFile:xx,isBlob:_x,isRegExp:Hx,isFunction:ts,isStream:Sx,isURLSearchParams:wx,isTypedArray:Lx,isFileList:jx,forEach:eo,merge:tu,extend:Tx,trim:Mx,stripBOM:Ex,inherits:zx,toFlatObject:Bx,kindOf:Ri,kindOfTest:Us,endsWith:Dx,toArray:Ox,forEachEntry:Ix,matchAll:Ux,isHTMLForm:qx,hasOwnProperty:mh,hasOwnProp:mh,reduceDescriptors:ay,freezeMethods:$x,toObjectSet:Yx,toCamelCase:Fx,noop:Wx,toFiniteNumber:Gx,findKey:ey,global:cr,isContextDefined:ty,isSpecCompliantForm:Vx,toJSONObject:Qx,isAsyncFn:Xx,isThenable:Zx,setImmediate:sy,asap:Jx,isIterable:Kx};let Pe=class ny extends Error{static from(l,c,u,m,p,h){const y=new ny(l.message,c||l.code,u,m,p);return y.cause=l,y.name=l.name,h&&Object.assign(y,h),y}constructor(l,c,u,m,p){super(l),this.name="AxiosError",this.isAxiosError=!0,c&&(this.code=c),u&&(this.config=u),m&&(this.request=m),p&&(this.response=p,this.status=p.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:me.toJSONObject(this.config),code:this.code,status:this.status}}};Pe.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";Pe.ERR_BAD_OPTION="ERR_BAD_OPTION";Pe.ECONNABORTED="ECONNABORTED";Pe.ETIMEDOUT="ETIMEDOUT";Pe.ERR_NETWORK="ERR_NETWORK";Pe.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";Pe.ERR_DEPRECATED="ERR_DEPRECATED";Pe.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";Pe.ERR_BAD_REQUEST="ERR_BAD_REQUEST";Pe.ERR_CANCELED="ERR_CANCELED";Pe.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";Pe.ERR_INVALID_URL="ERR_INVALID_URL";const Px=null;function au(r){return me.isPlainObject(r)||me.isArray(r)}function ry(r){return me.endsWith(r,"[]")?r.slice(0,-2):r}function ph(r,l,c){return r?r.concat(l).map(function(m,p){return m=ry(m),!c&&p?"["+m+"]":m}).join(c?".":""):l}function e_(r){return me.isArray(r)&&!r.some(au)}const t_=me.toFlatObject(me,{},null,function(l){return/^is[A-Z]/.test(l)});function Ti(r,l,c){if(!me.isObject(r))throw new TypeError("target must be an object");l=l||new FormData,c=me.toFlatObject(c,{metaTokens:!0,dots:!1,indexes:!1},!1,function(H,S){return!me.isUndefined(S[H])});const u=c.metaTokens,m=c.visitor||x,p=c.dots,h=c.indexes,g=(c.Blob||typeof Blob<"u"&&Blob)&&me.isSpecCompliantForm(l);if(!me.isFunction(m))throw new TypeError("visitor must be a function");function v(k){if(k===null)return"";if(me.isDate(k))return k.toISOString();if(me.isBoolean(k))return k.toString();if(!g&&me.isBlob(k))throw new Pe("Blob is not supported. Use a Buffer instead.");return me.isArrayBuffer(k)||me.isTypedArray(k)?g&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function x(k,H,S){let V=k;if(k&&!S&&typeof k=="object"){if(me.endsWith(H,"{}"))H=u?H:H.slice(0,-2),k=JSON.stringify(k);else if(me.isArray(k)&&e_(k)||(me.isFileList(k)||me.endsWith(H,"[]"))&&(V=me.toArray(k)))return H=ry(H),V.forEach(function(N,R){!(me.isUndefined(N)||N===null)&&l.append(h===!0?ph([H],R,p):h===null?H:H+"[]",v(N))}),!1}return au(k)?!0:(l.append(ph(S,H,p),v(k)),!1)}const j=[],M=Object.assign(t_,{defaultVisitor:x,convertValue:v,isVisitable:au});function I(k,H){if(!me.isUndefined(k)){if(j.indexOf(k)!==-1)throw Error("Circular reference detected in "+H.join("."));j.push(k),me.forEach(k,function(V,se){(!(me.isUndefined(V)||V===null)&&m.call(l,V,me.isString(se)?se.trim():se,H,M))===!0&&I(V,H?H.concat(se):[se])}),j.pop()}}if(!me.isObject(r))throw new TypeError("data must be an object");return I(r),l}function fh(r){const l={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(u){return l[u]})}function hu(r,l){this._pairs=[],r&&Ti(r,this,l)}const ly=hu.prototype;ly.append=function(l,c){this._pairs.push([l,c])};ly.toString=function(l){const c=l?function(u){return l.call(this,u,fh)}:fh;return this._pairs.map(function(m){return c(m[0])+"="+c(m[1])},"").join("&")};function a_(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function oy(r,l,c){if(!l)return r;const u=c&&c.encode||a_,m=me.isFunction(c)?{serialize:c}:c,p=m&&m.serialize;let h;if(p?h=p(l,m):h=me.isURLSearchParams(l)?l.toString():new hu(l,m).toString(u),h){const y=r.indexOf("#");y!==-1&&(r=r.slice(0,y)),r+=(r.indexOf("?")===-1?"?":"&")+h}return r}class hh{constructor(){this.handlers=[]}use(l,c,u){return this.handlers.push({fulfilled:l,rejected:c,synchronous:u?u.synchronous:!1,runWhen:u?u.runWhen:null}),this.handlers.length-1}eject(l){this.handlers[l]&&(this.handlers[l]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(l){me.forEach(this.handlers,function(u){u!==null&&l(u)})}}const yu={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},s_=typeof URLSearchParams<"u"?URLSearchParams:hu,n_=typeof FormData<"u"?FormData:null,r_=typeof Blob<"u"?Blob:null,l_={isBrowser:!0,classes:{URLSearchParams:s_,FormData:n_,Blob:r_},protocols:["http","https","file","blob","url","data"]},bu=typeof window<"u"&&typeof document<"u",su=typeof navigator=="object"&&navigator||void 0,o_=bu&&(!su||["ReactNative","NativeScript","NS"].indexOf(su.product)<0),i_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",c_=bu&&window.location.href||"http://localhost",d_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:bu,hasStandardBrowserEnv:o_,hasStandardBrowserWebWorkerEnv:i_,navigator:su,origin:c_},Symbol.toStringTag,{value:"Module"})),za={...d_,...l_};function u_(r,l){return Ti(r,new za.classes.URLSearchParams,{visitor:function(c,u,m,p){return za.isNode&&me.isBuffer(c)?(this.append(u,c.toString("base64")),!1):p.defaultVisitor.apply(this,arguments)},...l})}function m_(r){return me.matchAll(/\w+|\[(\w*)]/g,r).map(l=>l[0]==="[]"?"":l[1]||l[0])}function p_(r){const l={},c=Object.keys(r);let u;const m=c.length;let p;for(u=0;u<m;u++)p=c[u],l[p]=r[p];return l}function iy(r){function l(c,u,m,p){let h=c[p++];if(h==="__proto__")return!0;const y=Number.isFinite(+h),g=p>=c.length;return h=!h&&me.isArray(m)?m.length:h,g?(me.hasOwnProp(m,h)?m[h]=[m[h],u]:m[h]=u,!y):((!m[h]||!me.isObject(m[h]))&&(m[h]=[]),l(c,u,m[h],p)&&me.isArray(m[h])&&(m[h]=p_(m[h])),!y)}if(me.isFormData(r)&&me.isFunction(r.entries)){const c={};return me.forEachEntry(r,(u,m)=>{l(m_(u),m,c,0)}),c}return null}function f_(r,l,c){if(me.isString(r))try{return(l||JSON.parse)(r),me.trim(r)}catch(u){if(u.name!=="SyntaxError")throw u}return(c||JSON.stringify)(r)}const to={transitional:yu,adapter:["xhr","http","fetch"],transformRequest:[function(l,c){const u=c.getContentType()||"",m=u.indexOf("application/json")>-1,p=me.isObject(l);if(p&&me.isHTMLForm(l)&&(l=new FormData(l)),me.isFormData(l))return m?JSON.stringify(iy(l)):l;if(me.isArrayBuffer(l)||me.isBuffer(l)||me.isStream(l)||me.isFile(l)||me.isBlob(l)||me.isReadableStream(l))return l;if(me.isArrayBufferView(l))return l.buffer;if(me.isURLSearchParams(l))return c.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),l.toString();let y;if(p){if(u.indexOf("application/x-www-form-urlencoded")>-1)return u_(l,this.formSerializer).toString();if((y=me.isFileList(l))||u.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return Ti(y?{"files[]":l}:l,g&&new g,this.formSerializer)}}return p||m?(c.setContentType("application/json",!1),f_(l)):l}],transformResponse:[function(l){const c=this.transitional||to.transitional,u=c&&c.forcedJSONParsing,m=this.responseType==="json";if(me.isResponse(l)||me.isReadableStream(l))return l;if(l&&me.isString(l)&&(u&&!this.responseType||m)){const h=!(c&&c.silentJSONParsing)&&m;try{return JSON.parse(l,this.parseReviver)}catch(y){if(h)throw y.name==="SyntaxError"?Pe.from(y,Pe.ERR_BAD_RESPONSE,this,null,this.response):y}}return l}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:za.classes.FormData,Blob:za.classes.Blob},validateStatus:function(l){return l>=200&&l<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};me.forEach(["delete","get","head","post","put","patch"],r=>{to.headers[r]={}});const h_=me.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),y_=r=>{const l={};let c,u,m;return r&&r.split(`
`).forEach(function(h){m=h.indexOf(":"),c=h.substring(0,m).trim().toLowerCase(),u=h.substring(m+1).trim(),!(!c||l[c]&&h_[c])&&(c==="set-cookie"?l[c]?l[c].push(u):l[c]=[u]:l[c]=l[c]?l[c]+", "+u:u)}),l},yh=Symbol("internals");function Ql(r){return r&&String(r).trim().toLowerCase()}function xi(r){return r===!1||r==null?r:me.isArray(r)?r.map(xi):String(r)}function b_(r){const l=Object.create(null),c=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let u;for(;u=c.exec(r);)l[u[1]]=u[2];return l}const v_=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function Fd(r,l,c,u,m){if(me.isFunction(u))return u.call(this,l,c);if(m&&(l=c),!!me.isString(l)){if(me.isString(u))return l.indexOf(u)!==-1;if(me.isRegExp(u))return u.test(l)}}function g_(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(l,c,u)=>c.toUpperCase()+u)}function x_(r,l){const c=me.toCamelCase(" "+l);["get","set","has"].forEach(u=>{Object.defineProperty(r,u+c,{value:function(m,p,h){return this[u].call(this,l,m,p,h)},configurable:!0})})}let as=class{constructor(l){l&&this.set(l)}set(l,c,u){const m=this;function p(y,g,v){const x=Ql(g);if(!x)throw new Error("header name must be a non-empty string");const j=me.findKey(m,x);(!j||m[j]===void 0||v===!0||v===void 0&&m[j]!==!1)&&(m[j||g]=xi(y))}const h=(y,g)=>me.forEach(y,(v,x)=>p(v,x,g));if(me.isPlainObject(l)||l instanceof this.constructor)h(l,c);else if(me.isString(l)&&(l=l.trim())&&!v_(l))h(y_(l),c);else if(me.isObject(l)&&me.isIterable(l)){let y={},g,v;for(const x of l){if(!me.isArray(x))throw TypeError("Object iterator must return a key-value pair");y[v=x[0]]=(g=y[v])?me.isArray(g)?[...g,x[1]]:[g,x[1]]:x[1]}h(y,c)}else l!=null&&p(c,l,u);return this}get(l,c){if(l=Ql(l),l){const u=me.findKey(this,l);if(u){const m=this[u];if(!c)return m;if(c===!0)return b_(m);if(me.isFunction(c))return c.call(this,m,u);if(me.isRegExp(c))return c.exec(m);throw new TypeError("parser must be boolean|regexp|function")}}}has(l,c){if(l=Ql(l),l){const u=me.findKey(this,l);return!!(u&&this[u]!==void 0&&(!c||Fd(this,this[u],u,c)))}return!1}delete(l,c){const u=this;let m=!1;function p(h){if(h=Ql(h),h){const y=me.findKey(u,h);y&&(!c||Fd(u,u[y],y,c))&&(delete u[y],m=!0)}}return me.isArray(l)?l.forEach(p):p(l),m}clear(l){const c=Object.keys(this);let u=c.length,m=!1;for(;u--;){const p=c[u];(!l||Fd(this,this[p],p,l,!0))&&(delete this[p],m=!0)}return m}normalize(l){const c=this,u={};return me.forEach(this,(m,p)=>{const h=me.findKey(u,p);if(h){c[h]=xi(m),delete c[p];return}const y=l?g_(p):String(p).trim();y!==p&&delete c[p],c[y]=xi(m),u[y]=!0}),this}concat(...l){return this.constructor.concat(this,...l)}toJSON(l){const c=Object.create(null);return me.forEach(this,(u,m)=>{u!=null&&u!==!1&&(c[m]=l&&me.isArray(u)?u.join(", "):u)}),c}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([l,c])=>l+": "+c).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(l){return l instanceof this?l:new this(l)}static concat(l,...c){const u=new this(l);return c.forEach(m=>u.set(m)),u}static accessor(l){const u=(this[yh]=this[yh]={accessors:{}}).accessors,m=this.prototype;function p(h){const y=Ql(h);u[y]||(x_(m,h),u[y]=!0)}return me.isArray(l)?l.forEach(p):p(l),this}};as.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);me.reduceDescriptors(as.prototype,({value:r},l)=>{let c=l[0].toUpperCase()+l.slice(1);return{get:()=>r,set(u){this[c]=u}}});me.freezeMethods(as);function Hd(r,l){const c=this||to,u=l||c,m=as.from(u.headers);let p=u.data;return me.forEach(r,function(y){p=y.call(c,p,m.normalize(),l?l.status:void 0)}),m.normalize(),p}function cy(r){return!!(r&&r.__CANCEL__)}let ao=class extends Pe{constructor(l,c,u){super(l??"canceled",Pe.ERR_CANCELED,c,u),this.name="CanceledError",this.__CANCEL__=!0}};function dy(r,l,c){const u=c.config.validateStatus;!c.status||!u||u(c.status)?r(c):l(new Pe("Request failed with status code "+c.status,[Pe.ERR_BAD_REQUEST,Pe.ERR_BAD_RESPONSE][Math.floor(c.status/100)-4],c.config,c.request,c))}function __(r){const l=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return l&&l[1]||""}function j_(r,l){r=r||10;const c=new Array(r),u=new Array(r);let m=0,p=0,h;return l=l!==void 0?l:1e3,function(g){const v=Date.now(),x=u[p];h||(h=v),c[m]=g,u[m]=v;let j=p,M=0;for(;j!==m;)M+=c[j++],j=j%r;if(m=(m+1)%r,m===p&&(p=(p+1)%r),v-h<l)return;const I=x&&v-x;return I?Math.round(M*1e3/I):void 0}}function S_(r,l){let c=0,u=1e3/l,m,p;const h=(v,x=Date.now())=>{c=x,m=null,p&&(clearTimeout(p),p=null),r(...v)};return[(...v)=>{const x=Date.now(),j=x-c;j>=u?h(v,x):(m=v,p||(p=setTimeout(()=>{p=null,h(m)},u-j)))},()=>m&&h(m)]}const Si=(r,l,c=3)=>{let u=0;const m=j_(50,250);return S_(p=>{const h=p.loaded,y=p.lengthComputable?p.total:void 0,g=h-u,v=m(g),x=h<=y;u=h;const j={loaded:h,total:y,progress:y?h/y:void 0,bytes:g,rate:v||void 0,estimated:v&&y&&x?(y-h)/v:void 0,event:p,lengthComputable:y!=null,[l?"download":"upload"]:!0};r(j)},c)},bh=(r,l)=>{const c=r!=null;return[u=>l[0]({lengthComputable:c,total:r,loaded:u}),l[1]]},vh=r=>(...l)=>me.asap(()=>r(...l)),C_=za.hasStandardBrowserEnv?((r,l)=>c=>(c=new URL(c,za.origin),r.protocol===c.protocol&&r.host===c.host&&(l||r.port===c.port)))(new URL(za.origin),za.navigator&&/(msie|trident)/i.test(za.navigator.userAgent)):()=>!0,w_=za.hasStandardBrowserEnv?{write(r,l,c,u,m,p,h){if(typeof document>"u")return;const y=[`${r}=${encodeURIComponent(l)}`];me.isNumber(c)&&y.push(`expires=${new Date(c).toUTCString()}`),me.isString(u)&&y.push(`path=${u}`),me.isString(m)&&y.push(`domain=${m}`),p===!0&&y.push("secure"),me.isString(h)&&y.push(`SameSite=${h}`),document.cookie=y.join("; ")},read(r){if(typeof document>"u")return null;const l=document.cookie.match(new RegExp("(?:^|; )"+r+"=([^;]*)"));return l?decodeURIComponent(l[1]):null},remove(r){this.write(r,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function k_(r){return typeof r!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function A_(r,l){return l?r.replace(/\/?\/$/,"")+"/"+l.replace(/^\/+/,""):r}function uy(r,l,c){let u=!k_(l);return r&&(u||c==!1)?A_(r,l):l}const gh=r=>r instanceof as?{...r}:r;function hr(r,l){l=l||{};const c={};function u(v,x,j,M){return me.isPlainObject(v)&&me.isPlainObject(x)?me.merge.call({caseless:M},v,x):me.isPlainObject(x)?me.merge({},x):me.isArray(x)?x.slice():x}function m(v,x,j,M){if(me.isUndefined(x)){if(!me.isUndefined(v))return u(void 0,v,j,M)}else return u(v,x,j,M)}function p(v,x){if(!me.isUndefined(x))return u(void 0,x)}function h(v,x){if(me.isUndefined(x)){if(!me.isUndefined(v))return u(void 0,v)}else return u(void 0,x)}function y(v,x,j){if(j in l)return u(v,x);if(j in r)return u(void 0,v)}const g={url:p,method:p,data:p,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:y,headers:(v,x,j)=>m(gh(v),gh(x),j,!0)};return me.forEach(Object.keys({...r,...l}),function(x){if(x==="__proto__"||x==="constructor"||x==="prototype")return;const j=me.hasOwnProp(g,x)?g[x]:m,M=j(r[x],l[x],x);me.isUndefined(M)&&j!==y||(c[x]=M)}),c}const my=r=>{const l=hr({},r);let{data:c,withXSRFToken:u,xsrfHeaderName:m,xsrfCookieName:p,headers:h,auth:y}=l;if(l.headers=h=as.from(h),l.url=oy(uy(l.baseURL,l.url,l.allowAbsoluteUrls),r.params,r.paramsSerializer),y&&h.set("Authorization","Basic "+btoa((y.username||"")+":"+(y.password?unescape(encodeURIComponent(y.password)):""))),me.isFormData(c)){if(za.hasStandardBrowserEnv||za.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if(me.isFunction(c.getHeaders)){const g=c.getHeaders(),v=["content-type","content-length"];Object.entries(g).forEach(([x,j])=>{v.includes(x.toLowerCase())&&h.set(x,j)})}}if(za.hasStandardBrowserEnv&&(u&&me.isFunction(u)&&(u=u(l)),u||u!==!1&&C_(l.url))){const g=m&&p&&w_.read(p);g&&h.set(m,g)}return l},N_=typeof XMLHttpRequest<"u",R_=N_&&function(r){return new Promise(function(c,u){const m=my(r);let p=m.data;const h=as.from(m.headers).normalize();let{responseType:y,onUploadProgress:g,onDownloadProgress:v}=m,x,j,M,I,k;function H(){I&&I(),k&&k(),m.cancelToken&&m.cancelToken.unsubscribe(x),m.signal&&m.signal.removeEventListener("abort",x)}let S=new XMLHttpRequest;S.open(m.method.toUpperCase(),m.url,!0),S.timeout=m.timeout;function V(){if(!S)return;const N=as.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),W={data:!y||y==="text"||y==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:N,config:r,request:S};dy(function(Y){c(Y),H()},function(Y){u(Y),H()},W),S=null}"onloadend"in S?S.onloadend=V:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(V)},S.onabort=function(){S&&(u(new Pe("Request aborted",Pe.ECONNABORTED,r,S)),S=null)},S.onerror=function(R){const W=R&&R.message?R.message:"Network Error",K=new Pe(W,Pe.ERR_NETWORK,r,S);K.event=R||null,u(K),S=null},S.ontimeout=function(){let R=m.timeout?"timeout of "+m.timeout+"ms exceeded":"timeout exceeded";const W=m.transitional||yu;m.timeoutErrorMessage&&(R=m.timeoutErrorMessage),u(new Pe(R,W.clarifyTimeoutError?Pe.ETIMEDOUT:Pe.ECONNABORTED,r,S)),S=null},p===void 0&&h.setContentType(null),"setRequestHeader"in S&&me.forEach(h.toJSON(),function(R,W){S.setRequestHeader(W,R)}),me.isUndefined(m.withCredentials)||(S.withCredentials=!!m.withCredentials),y&&y!=="json"&&(S.responseType=m.responseType),v&&([M,k]=Si(v,!0),S.addEventListener("progress",M)),g&&S.upload&&([j,I]=Si(g),S.upload.addEventListener("progress",j),S.upload.addEventListener("loadend",I)),(m.cancelToken||m.signal)&&(x=N=>{S&&(u(!N||N.type?new ao(null,r,S):N),S.abort(),S=null)},m.cancelToken&&m.cancelToken.subscribe(x),m.signal&&(m.signal.aborted?x():m.signal.addEventListener("abort",x)));const se=__(m.url);if(se&&za.protocols.indexOf(se)===-1){u(new Pe("Unsupported protocol "+se+":",Pe.ERR_BAD_REQUEST,r));return}S.send(p||null)})},M_=(r,l)=>{const{length:c}=r=r?r.filter(Boolean):[];if(l||c){let u=new AbortController,m;const p=function(v){if(!m){m=!0,y();const x=v instanceof Error?v:this.reason;u.abort(x instanceof Pe?x:new ao(x instanceof Error?x.message:x))}};let h=l&&setTimeout(()=>{h=null,p(new Pe(`timeout of ${l}ms exceeded`,Pe.ETIMEDOUT))},l);const y=()=>{r&&(h&&clearTimeout(h),h=null,r.forEach(v=>{v.unsubscribe?v.unsubscribe(p):v.removeEventListener("abort",p)}),r=null)};r.forEach(v=>v.addEventListener("abort",p));const{signal:g}=u;return g.unsubscribe=()=>me.asap(y),g}},T_=function*(r,l){let c=r.byteLength;if(c<l){yield r;return}let u=0,m;for(;u<c;)m=u+l,yield r.slice(u,m),u=m},E_=async function*(r,l){for await(const c of z_(r))yield*T_(c,l)},z_=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const l=r.getReader();try{for(;;){const{done:c,value:u}=await l.read();if(c)break;yield u}}finally{await l.cancel()}},xh=(r,l,c,u)=>{const m=E_(r,l);let p=0,h,y=g=>{h||(h=!0,u&&u(g))};return new ReadableStream({async pull(g){try{const{done:v,value:x}=await m.next();if(v){y(),g.close();return}let j=x.byteLength;if(c){let M=p+=j;c(M)}g.enqueue(new Uint8Array(x))}catch(v){throw y(v),v}},cancel(g){return y(g),m.return()}},{highWaterMark:2})},_h=64*1024,{isFunction:pi}=me,B_=(({Request:r,Response:l})=>({Request:r,Response:l}))(me.global),{ReadableStream:jh,TextEncoder:Sh}=me.global,Ch=(r,...l)=>{try{return!!r(...l)}catch{return!1}},D_=r=>{r=me.merge.call({skipUndefined:!0},B_,r);const{fetch:l,Request:c,Response:u}=r,m=l?pi(l):typeof fetch=="function",p=pi(c),h=pi(u);if(!m)return!1;const y=m&&pi(jh),g=m&&(typeof Sh=="function"?(k=>H=>k.encode(H))(new Sh):async k=>new Uint8Array(await new c(k).arrayBuffer())),v=p&&y&&Ch(()=>{let k=!1;const H=new c(za.origin,{body:new jh,method:"POST",get duplex(){return k=!0,"half"}}).headers.has("Content-Type");return k&&!H}),x=h&&y&&Ch(()=>me.isReadableStream(new u("").body)),j={stream:x&&(k=>k.body)};m&&["text","arrayBuffer","blob","formData","stream"].forEach(k=>{!j[k]&&(j[k]=(H,S)=>{let V=H&&H[k];if(V)return V.call(H);throw new Pe(`Response type '${k}' is not supported`,Pe.ERR_NOT_SUPPORT,S)})});const M=async k=>{if(k==null)return 0;if(me.isBlob(k))return k.size;if(me.isSpecCompliantForm(k))return(await new c(za.origin,{method:"POST",body:k}).arrayBuffer()).byteLength;if(me.isArrayBufferView(k)||me.isArrayBuffer(k))return k.byteLength;if(me.isURLSearchParams(k)&&(k=k+""),me.isString(k))return(await g(k)).byteLength},I=async(k,H)=>{const S=me.toFiniteNumber(k.getContentLength());return S??M(H)};return async k=>{let{url:H,method:S,data:V,signal:se,cancelToken:N,timeout:R,onDownloadProgress:W,onUploadProgress:K,responseType:Y,headers:he,withCredentials:A="same-origin",fetchOptions:Q}=my(k),te=l||fetch;Y=Y?(Y+"").toLowerCase():"text";let re=M_([se,N&&N.toAbortSignal()],R),xe=null;const Ne=re&&re.unsubscribe&&(()=>{re.unsubscribe()});let le;try{if(K&&v&&S!=="get"&&S!=="head"&&(le=await I(he,V))!==0){let C=new c(H,{method:"POST",body:V,duplex:"half"}),$;if(me.isFormData(V)&&($=C.headers.get("content-type"))&&he.setContentType($),C.body){const[oe,ye]=bh(le,Si(vh(K)));V=xh(C.body,_h,oe,ye)}}me.isString(A)||(A=A?"include":"omit");const w=p&&"credentials"in c.prototype,z={...Q,signal:re,method:S.toUpperCase(),headers:he.normalize().toJSON(),body:V,duplex:"half",credentials:w?A:void 0};xe=p&&new c(H,z);let X=await(p?te(xe,Q):te(H,z));const F=x&&(Y==="stream"||Y==="response");if(x&&(W||F&&Ne)){const C={};["status","statusText","headers"].forEach(Me=>{C[Me]=X[Me]});const $=me.toFiniteNumber(X.headers.get("content-length")),[oe,ye]=W&&bh($,Si(vh(W),!0))||[];X=new u(xh(X.body,_h,oe,()=>{ye&&ye(),Ne&&Ne()}),C)}Y=Y||"text";let fe=await j[me.findKey(j,Y)||"text"](X,k);return!F&&Ne&&Ne(),await new Promise((C,$)=>{dy(C,$,{data:fe,headers:as.from(X.headers),status:X.status,statusText:X.statusText,config:k,request:xe})})}catch(w){throw Ne&&Ne(),w&&w.name==="TypeError"&&/Load failed|fetch/i.test(w.message)?Object.assign(new Pe("Network Error",Pe.ERR_NETWORK,k,xe,w&&w.response),{cause:w.cause||w}):Pe.from(w,w&&w.code,k,xe,w&&w.response)}}},O_=new Map,py=r=>{let l=r&&r.env||{};const{fetch:c,Request:u,Response:m}=l,p=[u,m,c];let h=p.length,y=h,g,v,x=O_;for(;y--;)g=p[y],v=x.get(g),v===void 0&&x.set(g,v=y?new Map:D_(l)),x=v;return v};py();const vu={http:Px,xhr:R_,fetch:{get:py}};me.forEach(vu,(r,l)=>{if(r){try{Object.defineProperty(r,"name",{value:l})}catch{}Object.defineProperty(r,"adapterName",{value:l})}});const wh=r=>`- ${r}`,L_=r=>me.isFunction(r)||r===null||r===!1;function I_(r,l){r=me.isArray(r)?r:[r];const{length:c}=r;let u,m;const p={};for(let h=0;h<c;h++){u=r[h];let y;if(m=u,!L_(u)&&(m=vu[(y=String(u)).toLowerCase()],m===void 0))throw new Pe(`Unknown adapter '${y}'`);if(m&&(me.isFunction(m)||(m=m.get(l))))break;p[y||"#"+h]=m}if(!m){const h=Object.entries(p).map(([g,v])=>`adapter ${g} `+(v===!1?"is not supported by the environment":"is not available in the build"));let y=c?h.length>1?`since :
`+h.map(wh).join(`
`):" "+wh(h[0]):"as no adapter specified";throw new Pe("There is no suitable adapter to dispatch the request "+y,"ERR_NOT_SUPPORT")}return m}const fy={getAdapter:I_,adapters:vu};function $d(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new ao(null,r)}function kh(r){return $d(r),r.headers=as.from(r.headers),r.data=Hd.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),fy.getAdapter(r.adapter||to.adapter,r)(r).then(function(u){return $d(r),u.data=Hd.call(r,r.transformResponse,u),u.headers=as.from(u.headers),u},function(u){return cy(u)||($d(r),u&&u.response&&(u.response.data=Hd.call(r,r.transformResponse,u.response),u.response.headers=as.from(u.response.headers))),Promise.reject(u)})}const hy="1.13.5",Ei={};["object","boolean","number","function","string","symbol"].forEach((r,l)=>{Ei[r]=function(u){return typeof u===r||"a"+(l<1?"n ":" ")+r}});const Ah={};Ei.transitional=function(l,c,u){function m(p,h){return"[Axios v"+hy+"] Transitional option '"+p+"'"+h+(u?". "+u:"")}return(p,h,y)=>{if(l===!1)throw new Pe(m(h," has been removed"+(c?" in "+c:"")),Pe.ERR_DEPRECATED);return c&&!Ah[h]&&(Ah[h]=!0,console.warn(m(h," has been deprecated since v"+c+" and will be removed in the near future"))),l?l(p,h,y):!0}};Ei.spelling=function(l){return(c,u)=>(console.warn(`${u} is likely a misspelling of ${l}`),!0)};function U_(r,l,c){if(typeof r!="object")throw new Pe("options must be an object",Pe.ERR_BAD_OPTION_VALUE);const u=Object.keys(r);let m=u.length;for(;m-- >0;){const p=u[m],h=l[p];if(h){const y=r[p],g=y===void 0||h(y,p,r);if(g!==!0)throw new Pe("option "+p+" must be "+g,Pe.ERR_BAD_OPTION_VALUE);continue}if(c!==!0)throw new Pe("Unknown option "+p,Pe.ERR_BAD_OPTION)}}const _i={assertOptions:U_,validators:Ei},ks=_i.validators;let dr=class{constructor(l){this.defaults=l||{},this.interceptors={request:new hh,response:new hh}}async request(l,c){try{return await this._request(l,c)}catch(u){if(u instanceof Error){let m={};Error.captureStackTrace?Error.captureStackTrace(m):m=new Error;const p=m.stack?m.stack.replace(/^.+\n/,""):"";try{u.stack?p&&!String(u.stack).endsWith(p.replace(/^.+\n.+\n/,""))&&(u.stack+=`
`+p):u.stack=p}catch{}}throw u}}_request(l,c){typeof l=="string"?(c=c||{},c.url=l):c=l||{},c=hr(this.defaults,c);const{transitional:u,paramsSerializer:m,headers:p}=c;u!==void 0&&_i.assertOptions(u,{silentJSONParsing:ks.transitional(ks.boolean),forcedJSONParsing:ks.transitional(ks.boolean),clarifyTimeoutError:ks.transitional(ks.boolean),legacyInterceptorReqResOrdering:ks.transitional(ks.boolean)},!1),m!=null&&(me.isFunction(m)?c.paramsSerializer={serialize:m}:_i.assertOptions(m,{encode:ks.function,serialize:ks.function},!0)),c.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?c.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:c.allowAbsoluteUrls=!0),_i.assertOptions(c,{baseUrl:ks.spelling("baseURL"),withXsrfToken:ks.spelling("withXSRFToken")},!0),c.method=(c.method||this.defaults.method||"get").toLowerCase();let h=p&&me.merge(p.common,p[c.method]);p&&me.forEach(["delete","get","head","post","put","patch","common"],k=>{delete p[k]}),c.headers=as.concat(h,p);const y=[];let g=!0;this.interceptors.request.forEach(function(H){if(typeof H.runWhen=="function"&&H.runWhen(c)===!1)return;g=g&&H.synchronous;const S=c.transitional||yu;S&&S.legacyInterceptorReqResOrdering?y.unshift(H.fulfilled,H.rejected):y.push(H.fulfilled,H.rejected)});const v=[];this.interceptors.response.forEach(function(H){v.push(H.fulfilled,H.rejected)});let x,j=0,M;if(!g){const k=[kh.bind(this),void 0];for(k.unshift(...y),k.push(...v),M=k.length,x=Promise.resolve(c);j<M;)x=x.then(k[j++],k[j++]);return x}M=y.length;let I=c;for(;j<M;){const k=y[j++],H=y[j++];try{I=k(I)}catch(S){H.call(this,S);break}}try{x=kh.call(this,I)}catch(k){return Promise.reject(k)}for(j=0,M=v.length;j<M;)x=x.then(v[j++],v[j++]);return x}getUri(l){l=hr(this.defaults,l);const c=uy(l.baseURL,l.url,l.allowAbsoluteUrls);return oy(c,l.params,l.paramsSerializer)}};me.forEach(["delete","get","head","options"],function(l){dr.prototype[l]=function(c,u){return this.request(hr(u||{},{method:l,url:c,data:(u||{}).data}))}});me.forEach(["post","put","patch"],function(l){function c(u){return function(p,h,y){return this.request(hr(y||{},{method:l,headers:u?{"Content-Type":"multipart/form-data"}:{},url:p,data:h}))}}dr.prototype[l]=c(),dr.prototype[l+"Form"]=c(!0)});let q_=class yy{constructor(l){if(typeof l!="function")throw new TypeError("executor must be a function.");let c;this.promise=new Promise(function(p){c=p});const u=this;this.promise.then(m=>{if(!u._listeners)return;let p=u._listeners.length;for(;p-- >0;)u._listeners[p](m);u._listeners=null}),this.promise.then=m=>{let p;const h=new Promise(y=>{u.subscribe(y),p=y}).then(m);return h.cancel=function(){u.unsubscribe(p)},h},l(function(p,h,y){u.reason||(u.reason=new ao(p,h,y),c(u.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(l){if(this.reason){l(this.reason);return}this._listeners?this._listeners.push(l):this._listeners=[l]}unsubscribe(l){if(!this._listeners)return;const c=this._listeners.indexOf(l);c!==-1&&this._listeners.splice(c,1)}toAbortSignal(){const l=new AbortController,c=u=>{l.abort(u)};return this.subscribe(c),l.signal.unsubscribe=()=>this.unsubscribe(c),l.signal}static source(){let l;return{token:new yy(function(m){l=m}),cancel:l}}};function F_(r){return function(c){return r.apply(null,c)}}function H_(r){return me.isObject(r)&&r.isAxiosError===!0}const nu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(nu).forEach(([r,l])=>{nu[l]=r});function by(r){const l=new dr(r),c=Zh(dr.prototype.request,l);return me.extend(c,dr.prototype,l,{allOwnKeys:!0}),me.extend(c,l,null,{allOwnKeys:!0}),c.create=function(m){return by(hr(r,m))},c}const na=by(to);na.Axios=dr;na.CanceledError=ao;na.CancelToken=q_;na.isCancel=cy;na.VERSION=hy;na.toFormData=Ti;na.AxiosError=Pe;na.Cancel=na.CanceledError;na.all=function(l){return Promise.all(l)};na.spread=F_;na.isAxiosError=H_;na.mergeConfig=hr;na.AxiosHeaders=as;na.formToJSON=r=>iy(me.isHTMLForm(r)?new FormData(r):r);na.getAdapter=fy.getAdapter;na.HttpStatusCode=nu;na.default=na;const{Axios:Yj,AxiosError:Wj,CanceledError:Gj,isCancel:Vj,CancelToken:Qj,VERSION:Xj,all:Zj,Cancel:Jj,isAxiosError:Kj,spread:Pj,toFormData:e0,AxiosHeaders:t0,HttpStatusCode:a0,formToJSON:s0,getAdapter:n0,mergeConfig:r0}=na,$_="/api/",U=na.create({baseURL:$_,headers:{"Content-Type":"application/json"}}),vy=async(r,l)=>await U.post(r,l,{headers:{"Content-Type":"multipart/form-data"}});U.interceptors.request.use(r=>{const l=localStorage.getItem("access_token");return l&&(r.headers.Authorization=`Bearer ${l}`),r},r=>Promise.reject(r));U.interceptors.response.use(r=>r,async r=>{var l;return((l=r.response)==null?void 0:l.status)===401&&(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(r)});const Fa={login:async(r,l)=>{const c=await U.post("auth/login/",{username:r,password:l}),{access:u,refresh:m,user:p}=c.data;return localStorage.setItem("access_token",u),localStorage.setItem("refresh_token",m),localStorage.setItem("user",JSON.stringify(p)),p},logout:()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user")},getUser:()=>{const r=localStorage.getItem("user");return r?JSON.parse(r):null},isAuthenticated:()=>!!localStorage.getItem("access_token"),isSuperuser:()=>{const r=Fa.getUser();return(r==null?void 0:r.is_superuser)||!1}},Yd={getAll:async()=>(await U.get("company-asset-requests/")).data,create:async r=>(typeof FormData<"u"&&r instanceof FormData?await vy("company-asset-requests/",r):await U.post("company-asset-requests/",r)).data,getById:async r=>(await U.get(`company-asset-requests/${r}/`)).data},Y_={getAll:async()=>(await U.get("external-maintenance-providers/")).data},W_={getAll:async()=>(await U.get("external-maintenance-typical-steps/")).data},Yn={getAll:async r=>(await U.get("external-maintenances/",{params:r})).data,getById:async r=>(await U.get(`external-maintenances/${r}/`)).data,createForMaintenance:async r=>(await U.post("external-maintenances/create-for-maintenance/",{maintenance_id:r})).data,sendToProvider:async(r,l,c)=>(await U.post(`external-maintenances/${r}/send-to-provider/`,{external_maintenance_provider_id:l,destination_room_id:c})).data,createStep:async(r,l)=>(await U.post(`external-maintenances/${r}/create-step/`,{external_maintenance_typical_step_id:l})).data,confirmReceivedByProvider:async r=>(await U.post(`external-maintenances/${r}/confirm-received-by-provider/`)).data,confirmSentToCompany:async r=>(await U.post(`external-maintenances/${r}/confirm-sent-to-company/`)).data,confirmReceivedByCompany:async(r,l)=>(await U.post(`external-maintenances/${r}/confirm-received-by-company/`,{destination_room_id:l})).data},G_={getAll:async r=>(await U.get("external-maintenance-steps/",{params:r})).data,getById:async r=>(await U.get(`external-maintenance-steps/${r}/`)).data},Wn={getAll:async r=>(await U.get("persons/",{params:r})).data,getById:async r=>(await U.get(`persons/${r}/`)).data,create:async r=>(await U.post("persons/",r)).data,update:async(r,l)=>(await U.put(`persons/${r}/`,l)).data,delete:async r=>{await U.delete(`persons/${r}/`)}},V_={create:async r=>(await U.post("user-accounts/",r)).data},Nh={get:async()=>(await U.get("my-items/")).data,getAssetMaintenances:async r=>(await U.post("my-items/",{asset_id:r})).data},Ci={getAll:async()=>(await U.get("problem-reports/")).data,create:async r=>(await U.post("problem-reports/",r)).data,createMaintenance:async r=>(await U.post("problem-reports/create-maintenance/",r)).data},Vs={getAll:async()=>(await U.get("asset-types/")).data,getById:async r=>(await U.get(`asset-types/${r}/`)).data,create:async r=>(await U.post("asset-types/",r)).data,update:async(r,l)=>(await U.put(`asset-types/${r}/`,l)).data,delete:async r=>{await U.delete(`asset-types/${r}/`)}},gy={getAll:async()=>(await U.get("asset-brands/")).data,getById:async r=>(await U.get(`asset-brands/${r}/`)).data,create:async r=>(await U.post("asset-brands/",r)).data,update:async(r,l)=>(await U.put(`asset-brands/${r}/`,l)).data,delete:async r=>{await U.delete(`asset-brands/${r}/`)}},yt={getAll:async()=>(await U.get("asset-models/")).data,getByAssetType:async r=>(await U.get(`asset-models/?asset_type=${r}`)).data,getById:async r=>(await U.get(`asset-models/${r}/`)).data,create:async r=>(await U.post("asset-models/",r)).data,update:async(r,l)=>(await U.put(`asset-models/${r}/`,l)).data,delete:async r=>{await U.delete(`asset-models/${r}/`)},getCompatibleStockItemModels:async r=>(await U.get(`asset-models/${r}/compatible-stock-item-models/`)).data,addCompatibleStockItemModel:async(r,l)=>(await U.post(`asset-models/${r}/compatible-stock-item-models/`,{stock_item_model_id:l})).data,removeCompatibleStockItemModel:async(r,l)=>(await U.delete(`asset-models/${r}/compatible-stock-item-models/${l}/`)).data,getCompatibleConsumableModels:async r=>(await U.get(`asset-models/${r}/compatible-consumable-models/`)).data,addCompatibleConsumableModel:async(r,l)=>(await U.post(`asset-models/${r}/compatible-consumable-models/`,{consumable_model_id:l})).data,removeCompatibleConsumableModel:async(r,l)=>(await U.delete(`asset-models/${r}/compatible-consumable-models/${l}/`)).data,getDefaultStockItems:async r=>(await U.get(`asset-model-default-stock-items/?asset_model=${r}`)).data,addDefaultStockItem:async(r,l,c=1,u="")=>(await U.post("asset-model-default-stock-items/",{asset_model:r,stock_item_model:l,quantity:c,notes:u})).data,removeDefaultStockItem:async r=>{await U.delete(`asset-model-default-stock-items/${r}/`)},getDefaultConsumables:async r=>(await U.get(`asset-model-default-consumables/?asset_model=${r}`)).data,addDefaultConsumable:async(r,l,c=1,u="")=>(await U.post("asset-model-default-consumables/",{asset_model:r,consumable_model:l,quantity:c,notes:u})).data,removeDefaultConsumable:async r=>{await U.delete(`asset-model-default-consumables/${r}/`)}},ur={getAll:async()=>(await U.get("asset-attribute-definitions/")).data,create:async r=>(await U.post("asset-attribute-definitions/",r)).data,update:async(r,l)=>(await U.put(`asset-attribute-definitions/${r}/`,l)).data,delete:async r=>{await U.delete(`asset-attribute-definitions/${r}/`)}},yn={getByAssetType:async r=>(await U.get(`asset-type-attributes/?asset_type=${r}`)).data,create:async r=>(await U.post("asset-type-attributes/",r)).data,update:async(r,l,c)=>(await U.put(`asset-type-attributes/${r}/`,{asset_type:r,asset_attribute_definition:l,...c})).data,delete:async(r,l)=>{await U.delete(`asset-type-attributes/${l}/`,{params:{asset_type:r,asset_attribute_definition:l}})}},Zr={getByAssetModel:async r=>(await U.get(`asset-model-attributes/?asset_model=${r}`)).data,create:async r=>(await U.post("asset-model-attributes/",r)).data,update:async(r,l,c)=>(await U.put(`asset-model-attributes/${r}/`,{asset_model:r,asset_attribute_definition:l,...c})).data,delete:async(r,l)=>{await U.delete(`asset-model-attributes/${l}/`,{params:{asset_model:r,asset_attribute_definition:l}})}},Wd={getByAsset:async r=>(await U.get(`asset-attributes/?asset=${r}`)).data,create:async r=>(await U.post("asset-attributes/",r)).data,update:async(r,l,c)=>(await U.put(`asset-attributes/${l}/`,{asset:r,asset_attribute_definition:l,...c})).data,delete:async(r,l)=>{await U.delete(`asset-attributes/${l}/`,{params:{asset:r,asset_attribute_definition:l}})}},mr={getAll:async()=>(await U.get("stock-item-attribute-definitions/")).data,create:async r=>(await U.post("stock-item-attribute-definitions/",r)).data,update:async(r,l)=>(await U.put(`stock-item-attribute-definitions/${r}/`,l)).data,delete:async r=>{await U.delete(`stock-item-attribute-definitions/${r}/`)}},pr={getByStockItemType:async r=>(await U.get(`stock-item-type-attributes/?stock_item_type=${r}`)).data,create:async r=>(await U.post("stock-item-type-attributes/",r)).data,delete:async(r,l)=>{await U.delete(`stock-item-type-attributes/${l}/`,{params:{stock_item_type:r,stock_item_attribute_definition:l}})}},Gd={getByStockItemModel:async r=>(await U.get(`stock-item-model-attributes/?stock_item_model=${r}`)).data,create:async r=>(await U.post("stock-item-model-attributes/",r)).data,delete:async(r,l)=>{await U.delete(`stock-item-model-attributes/${l}/`,{params:{stock_item_model:r,stock_item_attribute_definition:l}})}},Vd={getByStockItem:async r=>(await U.get(`stock-item-attributes/?stock_item=${r}`)).data,create:async r=>(await U.post("stock-item-attributes/",r)).data,delete:async(r,l)=>{await U.delete(`stock-item-attributes/${l}/`,{params:{stock_item:r,stock_item_attribute_definition:l}})}},fr={getAll:async()=>(await U.get("consumable-attribute-definitions/")).data,create:async r=>(await U.post("consumable-attribute-definitions/",r)).data,update:async(r,l)=>(await U.put(`consumable-attribute-definitions/${r}/`,l)).data,delete:async r=>{await U.delete(`consumable-attribute-definitions/${r}/`)}},bn={getByConsumableType:async r=>(await U.get(`consumable-type-attributes/?consumable_type=${r}`)).data,create:async r=>(await U.post("consumable-type-attributes/",r)).data,delete:async(r,l)=>{await U.delete(`consumable-type-attributes/${l}/`,{params:{consumable_type:r,consumable_attribute_definition:l}})}},Jr={getByConsumableModel:async r=>(await U.get(`consumable-model-attributes/?consumable_model=${r}`)).data,create:async r=>(await U.post("consumable-model-attributes/",r)).data,delete:async(r,l)=>{await U.delete(`consumable-model-attributes/${l}/`,{params:{consumable_model:r,consumable_attribute_definition:l}})}},Qd={getByConsumable:async r=>(await U.get(`consumable-attributes/?consumable=${r}`)).data,create:async r=>(await U.post("consumable-attributes/",r)).data,delete:async(r,l)=>{await U.delete(`consumable-attributes/${l}/`,{params:{consumable:r,consumable_attribute_definition:l}})}},Qs={getAll:async()=>(await U.get("stock-item-types/")).data,getById:async r=>(await U.get(`stock-item-types/${r}/`)).data,create:async r=>(await U.post("stock-item-types/",r)).data,update:async(r,l)=>(await U.put(`stock-item-types/${r}/`,l)).data,delete:async r=>{await U.delete(`stock-item-types/${r}/`)}},xy={getAll:async()=>(await U.get("stock-item-brands/")).data,getById:async r=>(await U.get(`stock-item-brands/${r}/`)).data,create:async r=>(await U.post("stock-item-brands/",r)).data,update:async(r,l)=>(await U.put(`stock-item-brands/${r}/`,l)).data,delete:async r=>{await U.delete(`stock-item-brands/${r}/`)}},Pa={getAll:async()=>(await U.get("stock-item-models/")).data,getByStockItemType:async r=>(await U.get(`stock-item-models/?stock_item_type=${r}`)).data,getById:async r=>(await U.get(`stock-item-models/${r}/`)).data,create:async r=>(await U.post("stock-item-models/",r)).data,update:async(r,l)=>(await U.put(`stock-item-models/${r}/`,l)).data,delete:async r=>{await U.delete(`stock-item-models/${r}/`)},getCompatibleAssetModels:async r=>(await U.get(`stock-item-models/${r}/compatible-asset-models/`)).data,addCompatibleAssetModel:async(r,l)=>(await U.post(`stock-item-models/${r}/compatible-asset-models/`,{asset_model_id:l})).data,removeCompatibleAssetModel:async(r,l)=>(await U.delete(`stock-item-models/${r}/compatible-asset-models/${l}/`)).data},Xs={getAll:async()=>(await U.get("consumable-types/")).data,getById:async r=>(await U.get(`consumable-types/${r}/`)).data,create:async r=>(await U.post("consumable-types/",r)).data,update:async(r,l)=>(await U.put(`consumable-types/${r}/`,l)).data,delete:async r=>{await U.delete(`consumable-types/${r}/`)}},_y={getAll:async()=>(await U.get("consumable-brands/")).data,getById:async r=>(await U.get(`consumable-brands/${r}/`)).data,create:async r=>(await U.post("consumable-brands/",r)).data,update:async(r,l)=>(await U.put(`consumable-brands/${r}/`,l)).data,delete:async r=>{await U.delete(`consumable-brands/${r}/`)}},es={getAll:async()=>(await U.get("consumable-models/")).data,getByConsumableType:async r=>(await U.get(`consumable-models/?consumable_type=${r}`)).data,getById:async r=>(await U.get(`consumable-models/${r}/`)).data,create:async r=>(await U.post("consumable-models/",r)).data,update:async(r,l)=>(await U.put(`consumable-models/${r}/`,l)).data,delete:async r=>{await U.delete(`consumable-models/${r}/`)},getCompatibleAssetModels:async r=>(await U.get(`consumable-models/${r}/compatible-asset-models/`)).data,addCompatibleAssetModel:async(r,l)=>(await U.post(`consumable-models/${r}/compatible-asset-models/`,{asset_model_id:l})).data,removeCompatibleAssetModel:async(r,l)=>(await U.delete(`consumable-models/${r}/compatible-asset-models/${l}/`)).data},Q_={getAll:async()=>(await U.get("room-types/")).data,getById:async r=>(await U.get(`room-types/${r}/`)).data,create:async r=>(await U.post("room-types/",r)).data,update:async(r,l)=>(await U.put(`room-types/${r}/`,l)).data,delete:async r=>{await U.delete(`room-types/${r}/`)}},Is={getAll:async()=>(await U.get("rooms/")).data,getByRoomType:async r=>(await U.get(`rooms/?room_type=${r}`)).data,getById:async r=>(await U.get(`rooms/${r}/`)).data,create:async r=>(await U.post("rooms/",r)).data,update:async(r,l)=>(await U.put(`rooms/${r}/`,l)).data,delete:async r=>{await U.delete(`rooms/${r}/`)}},fi={getAll:async()=>(await U.get("positions/")).data,getById:async r=>(await U.get(`positions/${r}/`)).data,create:async r=>(await U.post("positions/",r)).data,update:async(r,l)=>(await U.put(`positions/${r}/`,l)).data,delete:async r=>{await U.delete(`positions/${r}/`)}},hi={getAll:async()=>(await U.get("organizational-structures/")).data,getById:async r=>(await U.get(`organizational-structures/${r}/`)).data,create:async r=>(await U.post("organizational-structures/",r)).data,update:async(r,l)=>(await U.put(`organizational-structures/${r}/`,l)).data,delete:async r=>{await U.delete(`organizational-structures/${r}/`)}},ir={getAll:async()=>(await U.get("organizational-structure-relations/")).data,getByStructureId:async r=>(await U.get(`organizational-structure-relations/?org_structure_id=${r}`)).data,create:async r=>(await U.post("organizational-structure-relations/",r)).data,update:async(r,l,c)=>(await U.put(`organizational-structure-relations/${r}/${l}/`,c)).data,delete:async(r,l)=>{await U.delete(`organizational-structure-relations/${r}/${l}/`)}},As={getAll:async r=>(await U.get("assets/",{params:r})).data,getById:async r=>(await U.get(`assets/${r}/`)).data,create:async r=>(await U.post("assets/",r)).data,update:async(r,l)=>(await U.put(`assets/${r}/`,l)).data,delete:async r=>{await U.delete(`assets/${r}/`)},getCurrentRoom:async r=>(await U.get(`assets/${r}/current-room/`)).data,move:async(r,l)=>(await U.post(`assets/${r}/move/`,l)).data},Wr={getAll:async r=>(await U.get("stock-items/",{params:r})).data,getById:async r=>(await U.get(`stock-items/${r}/`)).data,create:async r=>(await U.post("stock-items/",r)).data,update:async(r,l)=>(await U.put(`stock-items/${r}/`,l)).data,delete:async r=>{await U.delete(`stock-items/${r}/`)},getCurrentRoom:async r=>(await U.get(`stock-items/${r}/current-room/`)).data,move:async(r,l)=>(await U.post(`stock-items/${r}/move/`,l)).data},Gr={getAll:async r=>(await U.get("consumables/",{params:r})).data,getById:async r=>(await U.get(`consumables/${r}/`)).data,create:async r=>(await U.post("consumables/",r)).data,update:async(r,l)=>(await U.put(`consumables/${r}/`,l)).data,delete:async r=>{await U.delete(`consumables/${r}/`)},getCurrentRoom:async r=>(await U.get(`consumables/${r}/current-room/`)).data,move:async(r,l)=>(await U.post(`consumables/${r}/move/`,l)).data},Qr={getAll:async()=>(await U.get("maintenances/")).data,getById:async r=>(await U.get(`maintenances/${r}/`)).data,create:async r=>(await U.post("maintenances/",r)).data,createDirect:async r=>(await U.post("maintenances/create-direct/",r)).data,end:async(r,l)=>(await U.post(`maintenances/${r}/end/`,l||{})).data,update:async(r,l)=>(await U.put(`maintenances/${r}/`,l)).data,delete:async r=>{await U.delete(`maintenances/${r}/`)}},fn={getAll:async r=>(await U.get("maintenance-steps/",{params:r})).data,getById:async r=>(await U.get(`maintenance-steps/${r}/`)).data,create:async r=>(await U.post("maintenance-steps/",r)).data,update:async(r,l)=>(await U.put(`maintenance-steps/${r}/`,l)).data,patch:async(r,l)=>(await U.patch(`maintenance-steps/${r}/`,l)).data,requestStockItem:async(r,l)=>(await U.post(`maintenance-steps/${r}/request-stock-item/`,l)).data,requestConsumable:async(r,l)=>(await U.post(`maintenance-steps/${r}/request-consumable/`,l)).data,getComponents:async r=>(await U.get(`maintenance-steps/${r}/components/`)).data,removeComponent:async(r,l)=>(await U.post(`maintenance-steps/${r}/remove-component/`,l)).data,updateAssetCondition:async(r,l)=>(await U.post(`maintenance-steps/${r}/update-asset-condition/`,l)).data,delete:async r=>{await U.delete(`maintenance-steps/${r}/`)}},X_={getAll:async()=>(await U.get("physical-conditions/")).data},Vr={getAll:async r=>(await U.get("maintenance-step-item-requests/",{params:r})).data,fulfill:async(r,l)=>(await U.post(`maintenance-step-item-requests/${r}/fulfill/`,l)).data,reject:async(r,l)=>(await U.post(`maintenance-step-item-requests/${r}/reject/`,l)).data,selectRandom:async r=>(await U.get(`maintenance-step-item-requests/${r}/select-random/`)).data,eligibleItems:async r=>(await U.get(`maintenance-step-item-requests/${r}/eligible-items/`)).data},Z_={getAll:async()=>(await U.get("maintenance-typical-steps/")).data},yi={getAll:async r=>(await U.get("asset-assignments/",{params:r})).data,create:async r=>(await U.post("asset-assignments/",r)).data,confirm:async r=>(await U.post(`asset-assignments/${r}/confirm/`)).data,discharge:async r=>(await U.post(`asset-assignments/${r}/discharge/`)).data},Xd={getAll:async r=>(await U.get("stock-item-assignments/",{params:r})).data,create:async r=>(await U.post("stock-item-assignments/",r)).data,discharge:async r=>(await U.post(`stock-item-assignments/${r}/discharge/`)).data},Zd={getAll:async r=>(await U.get("consumable-assignments/",{params:r})).data,create:async r=>(await U.post("consumable-assignments/",r)).data,discharge:async r=>(await U.post(`consumable-assignments/${r}/discharge/`)).data},jy={getAll:async()=>(await U.get("warehouses/")).data,create:async r=>(await U.post("warehouses/",r)).data},Xr={getAll:async()=>(await U.get("attribution-orders/")).data,getById:async r=>(await U.get(`attribution-orders/${r}/`)).data,create:async r=>(await U.post("attribution-orders/",r)).data,getIncludedItems:async r=>(await U.get(`attribution-orders/${r}/included-items/`)).data},ru={getById:async r=>(await U.get(`receipt-reports/${r}/`)).data,create:async r=>(await U.post("receipt-reports/",r,{headers:{"Content-Type":"multipart/form-data"}})).data},wi={getAll:async r=>(await U.get("administrative-certificates/",{params:r})).data,create:async r=>(typeof FormData<"u"&&r instanceof FormData?await vy("administrative-certificates/",r):await U.post("administrative-certificates/",r)).data},Sy=d.createContext(null),J_=({children:r})=>{const[l,c]=d.useState(null),[u,m]=d.useState(!0);d.useEffect(()=>{const g=Fa.getUser();g&&Fa.isAuthenticated()&&c(g),m(!1)},[]);const y={user:l,login:async(g,v)=>{const x=await Fa.login(g,v);return c(x),x},logout:()=>{Fa.logout(),c(null)},loading:u,isAuthenticated:!!l,isSuperuser:(l==null?void 0:l.is_superuser)||!1};return t.jsx(Sy.Provider,{value:y,children:!u&&r})},fs=()=>{const r=d.useContext(Sy);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},K_=()=>{const[r,l]=d.useState(""),[c,u]=d.useState(""),[m,p]=d.useState(""),[h,y]=d.useState(!1),{login:g}=fs(),v=It(),x=async j=>{var M,I;j.preventDefault(),p(""),y(!0);try{await g(r,c),v("/dashboard")}catch(k){p(((I=(M=k.response)==null?void 0:M.data)==null?void 0:I.error)||"Login failed. Please try again.")}finally{y(!1)}};return t.jsx("div",{className:"login-page",children:t.jsx("div",{className:"login-container",children:t.jsxs("div",{className:"login-card",children:[t.jsxs("div",{className:"login-header",children:[t.jsx("div",{className:"login-logo",children:t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})}),t.jsx("h1",{className:"login-title",children:"Equipment Management"}),t.jsx("p",{className:"login-subtitle",children:"Sign in to your account"})]}),t.jsxs("form",{onSubmit:x,children:[m&&t.jsx("div",{className:"error-message",children:m}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"username",className:"form-label",children:"Username"}),t.jsx("input",{type:"text",id:"username",className:"form-input",placeholder:"Enter your username",value:r,onChange:j=>l(j.target.value),required:!0,autoFocus:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),t.jsx("input",{type:"password",id:"password",className:"form-input",placeholder:"Enter your password",value:c,onChange:j=>u(j.target.value),required:!0})]}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:h,children:h?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"loading-spinner"}),"Signing in..."]}):"Sign In"})]})]})})})},P_=()=>{var k,H,S,V,se;const{user:r,logout:l,isSuperuser:c}=fs(),u=It(),m=()=>{l(),u("/login")},p=()=>{var N,R;return r!=null&&r.person?`${r.person.first_name[0]}${r.person.last_name[0]}`.toUpperCase():((R=(N=r==null?void 0:r.username)==null?void 0:N[0])==null?void 0:R.toUpperCase())||"U"},h=()=>r!=null&&r.person?`${r.person.first_name} ${r.person.last_name}`:(r==null?void 0:r.username)||"User",y=()=>c?"Superuser":r!=null&&r.roles&&r.roles.length>0?r.roles[0].role_label:"User",g=(k=r==null?void 0:r.roles)==null?void 0:k.some(N=>N.role_code==="maintenance_chief"),v=(H=r==null?void 0:r.roles)==null?void 0:H.some(N=>N.role_code==="maintenance_technician"),x=(S=r==null?void 0:r.roles)==null?void 0:S.some(N=>N.role_code==="exploitation_chief"),j=(V=r==null?void 0:r.roles)==null?void 0:V.some(N=>N.role_code==="stock_consumable_responsible"),M=(se=r==null?void 0:r.roles)==null?void 0:se.some(N=>N.role_code==="asset_responsible"),I=c||g||x;return t.jsxs("div",{className:"dashboard-layout",children:[t.jsxs("aside",{className:"sidebar",children:[t.jsx("div",{className:"sidebar-header",children:t.jsxs("div",{className:"sidebar-logo",children:[t.jsx("div",{className:"sidebar-logo-icon",children:t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})}),t.jsx("span",{className:"sidebar-logo-text",children:"EMS"})]})}),t.jsxs("nav",{className:"sidebar-nav",children:[t.jsxs("div",{className:"nav-section",children:[t.jsx("span",{className:"nav-section-title",children:"Dashboard"}),t.jsxs(ma,{to:"/dashboard",end:!0,className:({isActive:N})=>`nav-link ${N?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),t.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),t.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),t.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),"Dashboard"]})]}),c&&t.jsx(t.Fragment,{children:t.jsxs("div",{className:"nav-section",children:[t.jsx("span",{className:"nav-section-title",children:"Management"}),t.jsxs(ma,{to:"/dashboard/organizational-structure",className:({isActive:N})=>`nav-link ${N?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),t.jsx("circle",{cx:"12",cy:"7",r:"4"}),t.jsx("path",{d:"M3.27 6.96a3 3 0 0 1 5.46 0"}),t.jsx("path",{d:"M15.27 6.96a3 3 0 0 1 5.46 0"})]}),"Organizational Structure"]}),t.jsxs(ma,{to:"/dashboard/persons",className:({isActive:N})=>`nav-link ${N?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),t.jsx("circle",{cx:"9",cy:"7",r:"4"}),t.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),t.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),"Persons"]}),t.jsxs(ma,{to:"/dashboard/assets",className:({isActive:N})=>`nav-link ${N?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),t.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),"Assets"]}),t.jsxs(ma,{to:"/dashboard/stock-items",className:({isActive:N})=>`nav-link ${N?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("circle",{cx:"9",cy:"21",r:"1"}),t.jsx("circle",{cx:"20",cy:"21",r:"1"}),t.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),"Stock Items"]}),t.jsxs(ma,{to:"/dashboard/consumables",className:({isActive:N})=>`nav-link ${N?"active":""}`,children:[t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})}),"Consumables"]}),t.jsxs(ma,{to:"/dashboard/rooms",className:({isActive:N})=>`nav-link ${N?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),t.jsx("path",{d:"M9 3v18M9 9h12M9 15h12"})]}),"Rooms"]}),t.jsxs(ma,{to:"/dashboard/positions",className:({isActive:N})=>`nav-link ${N?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),t.jsx("circle",{cx:"9",cy:"7",r:"4"}),t.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),t.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),"Positions"]})]})}),t.jsxs("div",{className:"nav-section",children:[t.jsx("span",{className:"nav-section-title",children:"My"}),t.jsxs(ma,{to:"/dashboard/my-items",className:({isActive:N})=>`nav-link ${N?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),t.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"My Items"]})]}),I&&t.jsxs("div",{className:"nav-section",children:[t.jsx("span",{className:"nav-section-title",children:"Reports"}),t.jsxs(ma,{to:"/dashboard/reports",className:({isActive:N})=>`nav-link ${N?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M3 3h18v18H3z"}),t.jsx("path",{d:"M7 7h10"}),t.jsx("path",{d:"M7 12h10"}),t.jsx("path",{d:"M7 17h6"})]}),"Reports"]})]}),(x||j||M)&&t.jsxs("div",{className:"nav-section",children:[t.jsx("span",{className:"nav-section-title",children:"Inventory"}),(x||M)&&t.jsxs(ma,{to:"/dashboard/assets",className:({isActive:N})=>`nav-link ${N?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),t.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),"Assets"]}),M&&t.jsxs(ma,{to:"/dashboard/attribution-orders",className:({isActive:N})=>`nav-link ${N?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),t.jsx("polyline",{points:"14 2 14 8 20 8"}),t.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),t.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),t.jsx("polyline",{points:"10 9 9 9 8 9"})]}),"Attribution Orders"]}),M&&t.jsxs(ma,{to:"/dashboard/company-asset-requests",className:({isActive:N})=>`nav-link ${N?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M9 12h6"}),t.jsx("path",{d:"M9 16h6"}),t.jsx("path",{d:"M9 8h6"}),t.jsx("path",{d:"M7 22h10a2 2 0 0 0 2-2V6l-4-4H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2z"}),t.jsx("path",{d:"M15 2v4h4"})]}),"Company Asset Requests"]}),M&&t.jsxs(ma,{to:"/dashboard/administrative-certificates",className:({isActive:N})=>`nav-link ${N?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),t.jsx("polyline",{points:"14 2 14 8 20 8"}),t.jsx("path",{d:"M8 13h8"}),t.jsx("path",{d:"M8 17h8"})]}),"Administrative Certificates"]}),M&&t.jsxs(ma,{to:"/dashboard/external-maintenances",className:({isActive:N})=>`nav-link ${N?"active":""}`,children:[t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),"External Maintenances"]}),(x||j)&&t.jsxs(t.Fragment,{children:[j&&t.jsxs(ma,{to:"/dashboard/item-requests-inbox",className:({isActive:N})=>`nav-link ${N?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M9 12h6"}),t.jsx("path",{d:"M9 16h6"}),t.jsx("path",{d:"M9 8h6"}),t.jsx("path",{d:"M7 22h10a2 2 0 0 0 2-2V6l-4-4H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2z"}),t.jsx("path",{d:"M15 2v4h4"})]}),"Item Requests Inbox"]}),t.jsxs(ma,{to:"/dashboard/stock-items",className:({isActive:N})=>`nav-link ${N?"active":""}`,children:[t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("circle",{cx:"9",cy:"21",r:"1"}),t.jsx("circle",{cx:"20",cy:"21",r:"1"}),t.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),"Stock Items"]}),t.jsxs(ma,{to:"/dashboard/consumables",className:({isActive:N})=>`nav-link ${N?"active":""}`,children:[t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})}),"Consumables"]})]})]}),(c||g||v)&&t.jsxs("div",{className:"nav-section",children:[t.jsx("span",{className:"nav-section-title",children:"Maintenance"}),t.jsxs(ma,{to:"/dashboard/maintenances",className:({isActive:N})=>`nav-link ${N?"active":""}`,children:[t.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),"Maintenance"]})]})]}),t.jsx("div",{className:"sidebar-footer",children:t.jsxs("div",{className:"user-info",children:[t.jsx("div",{className:"user-avatar",children:p()}),t.jsxs("div",{className:"user-details",children:[t.jsx("div",{className:"user-name",children:h()}),t.jsx("div",{className:"user-role",children:y()})]}),t.jsx("button",{className:"logout-btn",onClick:m,title:"Logout",children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),t.jsx("polyline",{points:"16,17 21,12 16,7"}),t.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})})]}),t.jsx("main",{className:"main-content",children:t.jsx(Eg,{})})]})},ej=()=>t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",children:[t.jsx("h1",{className:"page-title",children:"Dashboard"}),t.jsx("p",{className:"page-subtitle",children:"Welcome to the Equipment Management System"})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"var(--space-6)"},children:[t.jsx("div",{className:"card",children:t.jsxs("div",{className:"card-body",style:{textAlign:"center"},children:[t.jsx("div",{style:{width:"48px",height:"48px",background:"var(--gradient-primary)",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto var(--space-4)"},children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"white",strokeWidth:"2",children:[t.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),t.jsx("circle",{cx:"9",cy:"7",r:"4"})]})}),t.jsx("h3",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",marginBottom:"var(--space-1)"},children:"Persons"}),t.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-sm)"},children:"Manage registered personnel"})]})}),t.jsx("div",{className:"card",children:t.jsxs("div",{className:"card-body",style:{textAlign:"center"},children:[t.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto var(--space-4)"},children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"white",strokeWidth:"2",children:[t.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),t.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]})}),t.jsx("h3",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",marginBottom:"var(--space-1)"},children:"Assets"}),t.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-sm)"},children:"Track equipment & assets"})]})}),t.jsx("div",{className:"card",children:t.jsxs("div",{className:"card-body",style:{textAlign:"center"},children:[t.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto var(--space-4)"},children:t.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"white",strokeWidth:"2",children:t.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})})}),t.jsx("h3",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",marginBottom:"var(--space-1)"},children:"Maintenance"}),t.jsx("p",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-sm)"},children:"Schedule & track repairs"})]})})]})]}),tj=()=>{const[r,l]=d.useState([]),[c,u]=d.useState(!0),[m,p]=d.useState(""),[h,y]=d.useState(!1),[g,v]=d.useState(!1),[x,j]=d.useState(null),[M,I]=d.useState({first_name:"",last_name:"",sex:"Male",birth_date:"",is_approved:!1}),[k,H]=d.useState({username:"",password:"",account_status:"active",role_code:""}),[S,V]=d.useState(!1),[se,N]=d.useState(!1);d.useEffect(()=>{R()},[]);const R=async()=>{try{u(!0);const te=await Wn.getAll();l(te)}catch{p("Failed to load persons")}finally{u(!1)}},W=te=>{const{name:re,value:xe,type:Ne,checked:le}=te.target;I(w=>({...w,[re]:Ne==="checkbox"?le:xe}))},K=te=>{const{name:re,value:xe}=te.target;H(Ne=>({...Ne,[re]:xe}))},Y=async te=>{te.preventDefault(),V(!0),p("");try{await Wn.create(M),y(!1),I({first_name:"",last_name:"",sex:"Male",birth_date:"",is_approved:!1}),R()}catch{p("Failed to create person")}finally{V(!1)}},he=te=>{j(te),H({username:"",password:"",account_status:"active",role_code:""}),v(!0),p("")},A=async te=>{if(te.preventDefault(),!!x){N(!0),p("");try{await V_.create({person_id:x.person_id,username:k.username,password:k.password,account_status:k.account_status,role_code:k.role_code||void 0}),v(!1),j(null)}catch{p("Failed to create account")}finally{N(!1)}}},Q=te=>new Date(te).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",children:[t.jsx("h1",{className:"page-title",children:"Persons"}),t.jsx("p",{className:"page-subtitle",children:"Manage all registered persons in the system"})]}),t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"card-header",children:[t.jsx("h2",{className:"card-title",children:"All Persons"}),t.jsxs("button",{className:"btn btn-primary",onClick:()=>y(!0),children:[t.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Person"]})]}),t.jsx("div",{className:"table-container",children:c?t.jsxs("div",{className:"empty-state",children:[t.jsx("div",{className:"loading-spinner",style:{margin:"0 auto"}}),t.jsx("p",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading persons..."})]}):m?t.jsx("div",{className:"empty-state",children:t.jsx("p",{className:"empty-state-title",style:{color:"var(--color-error)"},children:m})}):r.length===0?t.jsxs("div",{className:"empty-state",children:[t.jsxs("svg",{className:"empty-state-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[t.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),t.jsx("circle",{cx:"9",cy:"7",r:"4"}),t.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),t.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),t.jsx("h3",{className:"empty-state-title",children:"No persons yet"}),t.jsx("p",{className:"empty-state-text",children:"Get started by adding your first person"})]}):t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"ID"}),t.jsx("th",{children:"Name"}),t.jsx("th",{children:"Sex"}),t.jsx("th",{children:"Birth Date"}),t.jsx("th",{children:"Status"}),Fa.isSuperuser()&&t.jsx("th",{children:"Actions"})]})}),t.jsx("tbody",{children:r.map(te=>t.jsxs("tr",{children:[t.jsx("td",{children:te.person_id}),t.jsx("td",{children:t.jsxs("strong",{children:[te.first_name," ",te.last_name]})}),t.jsx("td",{children:te.sex}),t.jsx("td",{children:Q(te.birth_date)}),t.jsx("td",{children:t.jsx("span",{className:`badge ${te.is_approved?"badge-success":"badge-warning"}`,children:te.is_approved?"Approved":"Pending"})}),Fa.isSuperuser()&&t.jsx("td",{children:t.jsx("button",{className:"btn btn-secondary",onClick:()=>he(te),children:"Create Account"})})]},te.person_id))})]})})]}),h&&t.jsx("div",{className:"modal-overlay",onClick:()=>y(!1),children:t.jsxs("div",{className:"modal",onClick:te=>te.stopPropagation(),children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Add New Person"}),t.jsx("button",{className:"modal-close",onClick:()=>y(!1),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsxs("form",{onSubmit:Y,children:[t.jsxs("div",{className:"modal-body",children:[t.jsxs("div",{className:"form-row",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"first_name",className:"form-label",children:"First Name"}),t.jsx("input",{type:"text",id:"first_name",name:"first_name",className:"form-input",value:M.first_name,onChange:W,required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"last_name",className:"form-label",children:"Last Name"}),t.jsx("input",{type:"text",id:"last_name",name:"last_name",className:"form-input",value:M.last_name,onChange:W,required:!0})]})]}),t.jsxs("div",{className:"form-row",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"sex",className:"form-label",children:"Sex"}),t.jsxs("select",{id:"sex",name:"sex",className:"form-input",value:M.sex,onChange:W,required:!0,children:[t.jsx("option",{value:"Male",children:"Male"}),t.jsx("option",{value:"Female",children:"Female"})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"birth_date",className:"form-label",children:"Birth Date"}),t.jsx("input",{type:"date",id:"birth_date",name:"birth_date",className:"form-input",value:M.birth_date,onChange:W,required:!0})]})]}),t.jsx("div",{className:"form-group",children:t.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",name:"is_approved",checked:M.is_approved,onChange:W}),"Approved"]})})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>y(!1),children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:S,children:S?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"loading-spinner"}),"Creating..."]}):"Create Person"})]})]})]})}),g&&t.jsx("div",{className:"modal-overlay",onClick:()=>v(!1),children:t.jsxs("div",{className:"modal",onClick:te=>te.stopPropagation(),children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Create Account"}),t.jsx("button",{className:"modal-close",onClick:()=>v(!1),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsxs("form",{onSubmit:A,children:[t.jsxs("div",{className:"modal-body",children:[t.jsxs("p",{style:{color:"var(--color-text-secondary)",marginBottom:"1rem"},children:["Creating an account for ",t.jsxs("strong",{children:[x==null?void 0:x.first_name," ",x==null?void 0:x.last_name]})]}),t.jsxs("div",{className:"form-row",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"username",className:"form-label",children:"Username"}),t.jsx("input",{type:"text",id:"username",name:"username",className:"form-input",value:k.username,onChange:K,required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"account_status",className:"form-label",children:"Account Status"}),t.jsxs("select",{id:"account_status",name:"account_status",className:"form-input",value:k.account_status,onChange:K,children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"disabled",children:"Disabled"})]})]})]}),t.jsxs("div",{className:"form-row",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),t.jsx("input",{type:"password",id:"password",name:"password",className:"form-input",value:k.password,onChange:K,required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"role_code",className:"form-label",children:"Role Code (optional)"}),t.jsx("input",{type:"text",id:"role_code",name:"role_code",className:"form-input",value:k.role_code,onChange:K,placeholder:"e.g. maintenance_chief"})]})]})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>v(!1),children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:se,children:se?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"loading-spinner"}),"Creating..."]}):"Create Account"})]})]})]})})]})},aj=()=>{var Js,Fs,D;const r=It(),l=Ha(),[c]=Ms(),u=c.get("typeId"),m=c.get("modelId"),p=l.pathname.endsWith("/instances"),[h,y]=d.useState([]),[g,v]=d.useState([]),[x,j]=d.useState([]),[M,I]=d.useState([]),[k,H]=d.useState([]),[S,V]=d.useState([]),[se,N]=d.useState([]),[R,W]=d.useState([]),[K,Y]=d.useState(!1),[he,A]=d.useState(null),[Q,te]=d.useState([]),[re,xe]=d.useState([]),[Ne,le]=d.useState(!1),[w,z]=d.useState(!1),[X,F]=d.useState(!1),[fe,C]=d.useState(!1),[$,oe]=d.useState(!1),[ye,Me]=d.useState(!1),[Ae,E]=d.useState(!1),[ie,L]=d.useState(!1),[O,Se]=d.useState(null),[we,Ke]=d.useState(null),[Ue,ze]=d.useState(null),[Ye,Fe]=d.useState(null),[ke,Ee]=d.useState(null),[G,P]=d.useState({asset_type_label:"",asset_type_code:""}),[_e,Te]=d.useState({model_name:"",model_code:"",asset_brand:"",asset_type:"",release_year:"",discontinued_year:"",is_active:!0,notes:"",warranty_expiry_in_months:""}),[T,Re]=d.useState({asset_serial_number:"",asset_inventory_number:"",asset_service_tag:"",asset_name:"",asset_status:"active",attribution_order_id:"",destruction_certificate_id:""}),[ee,Ie]=d.useState({asset_attribute_definition:"",is_mandatory:!1,default_value:""}),[We,Qt]=d.useState({asset_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[lt,$t]=d.useState({asset_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[Qe,ba]=d.useState({person:"",start_datetime:"",end_datetime:"",condition_on_assignment:"New"}),[Ze,Rt]=d.useState(null),[De,bt]=d.useState(!1),[qe,_a]=d.useState(null),[pt,Yt]=d.useState(!1),[ra,la]=d.useState([]),[rt,jt]=d.useState(null),[ja,Na]=d.useState(""),[Kt,Wt]=d.useState(""),[Mt,St]=d.useState(!1);d.useEffect(()=>{Ra(),ss(),Tt(),$a(),Da()},[]),d.useEffect(()=>{p&&(!u||!m)&&r("/dashboard/assets/types",{replace:!0})},[p,u,m,r]),d.useEffect(()=>{O?(Ba(O.asset_type_id),ft(O.asset_type_id),Ke(null),I([]),N([])):(j([]),V([]))},[O]),d.useEffect(()=>{if(!p||!u||!Array.isArray(h)||h.length===0)return;const b=h.find(B=>String(B.asset_type_id)===String(u))||null;b&&(O==null?void 0:O.asset_type_id)!==b.asset_type_id&&Se(b)},[p,u,h,O]),d.useEffect(()=>{we?(pa(we.asset_model_id),vt(we.asset_model_id)):(I([]),N([]),ze(null),W([]))},[we]),d.useEffect(()=>{if(!p||!m||!Array.isArray(x)||x.length===0)return;const b=x.find(B=>String(B.asset_model_id)===String(m))||null;b&&(we==null?void 0:we.asset_model_id)!==b.asset_model_id&&Ke(b)},[p,m,x,we]),d.useEffect(()=>{Ue?Xt(Ue.asset_id):W([])},[Ue]);const hs=d.useMemo(()=>{const b=new Map;return re.forEach(B=>{var ve;B.is_active&&b.set((ve=B.asset)==null?void 0:ve.asset_id,B)}),b},[re]),Pt=d.useMemo(()=>{const b=new Map;return k.forEach(B=>{b.set(B.asset_attribute_definition_id,B)}),b},[k]),Ra=async()=>{Y(!0),A(null);try{const b=await Vs.getAll();y(Array.isArray(b)?b:[])}catch(b){A("Failed to fetch asset types: "+b.message),y([])}finally{Y(!1)}},ss=async()=>{try{const b=await gy.getAll();v(Array.isArray(b)?b:[])}catch(b){console.error("Failed to fetch asset brands:",b),v([])}},Ba=async b=>{try{const B=await yt.getByAssetType(b);j(Array.isArray(B)?B:[])}catch(B){A("Failed to fetch asset models: "+B.message),j([])}},pa=async b=>{try{const B=await As.getAll({asset_model:b});I(Array.isArray(B)?B:[])}catch(B){A("Failed to fetch assets: "+B.message),I([])}},Tt=async()=>{try{const b=await ur.getAll();H(Array.isArray(b)?b:[])}catch(b){A("Failed to fetch attribute definitions: "+b.message),H([])}},ft=async b=>{try{const B=await yn.getByAssetType(b);V(Array.isArray(B)?B:[])}catch(B){A("Failed to fetch asset type attributes: "+B.message),V([])}},vt=async b=>{try{const B=await Zr.getByAssetModel(b);N(Array.isArray(B)?B:[])}catch(B){A("Failed to fetch asset model attributes: "+B.message),N([])}},Xt=async b=>{try{const B=await Wd.getByAsset(b);W(Array.isArray(B)?B:[])}catch(B){A("Failed to fetch asset attributes: "+B.message),W([])}},$a=async()=>{try{const b=await Wn.getAll();te(Array.isArray(b)?b:[])}catch(b){console.error("Failed to fetch persons:",b)}},Da=async()=>{try{const b=await yi.getAll();xe(Array.isArray(b)?b:[])}catch(b){console.error("Failed to fetch assignments:",b)}},Ya=b=>{const{name:B,value:ve}=b.target;ba($e=>({...$e,[B]:ve}))},Ma=async b=>{var B,ve;if(b.preventDefault(),!!Ye){bt(!0),A(null);try{await yi.create({...Qe,asset:Ye.asset_id,start_datetime:new Date(Qe.start_datetime).toISOString(),end_datetime:Qe.end_datetime?new Date(Qe.end_datetime).toISOString():null}),E(!1),Fe(null),Da(),alert("Asset assigned successfully!")}catch($e){A("Failed to assign asset: "+(((ve=(B=$e.response)==null?void 0:B.data)==null?void 0:ve.error)||$e.message))}finally{bt(!1)}}},fa=async b=>{var B,ve;bt(!0),A(null);try{await yi.discharge(b),Ee(null),Da(),alert("Asset discharged successfully!")}catch($e){A("Failed to discharge asset: "+(((ve=(B=$e.response)==null?void 0:B.data)==null?void 0:ve.error)||$e.message))}finally{bt(!1)}},Gt=async b=>{var B,ve;bt(!0),A(null);try{await yi.confirm(b),Da(),alert("Assignment confirmed successfully!")}catch($e){A("Failed to confirm assignment: "+(((ve=(B=$e.response)==null?void 0:B.data)==null?void 0:ve.error)||$e.message))}finally{bt(!1)}},Ut=b=>{const{name:B,value:ve}=b.target;P($e=>({...$e,[B]:ve}))},Bt=b=>{const{name:B,value:ve,type:$e,checked:ut}=b.target;Te(ta=>({...ta,[B]:$e==="checkbox"?ut:$e==="number"?ve?parseInt(ve):"":ve}))},va=b=>{const{name:B,value:ve}=b.target;Re($e=>({...$e,[B]:ve}))},oa=b=>{const{name:B,value:ve,type:$e,checked:ut}=b.target;Ie(ta=>({...ta,[B]:$e==="checkbox"?ut:ve}))},ht=b=>{const{name:B,value:ve,type:$e,checked:ut}=b.target;Qt(ta=>({...ta,[B]:$e==="checkbox"?ut:ve}))},Oa=b=>{const{name:B,value:ve,type:$e,checked:ut}=b.target;$t(ta=>({...ta,[B]:$e==="checkbox"?ut:ve}))},ns=async b=>{var B,ve;b.preventDefault(),bt(!0),A(null);try{await Vs.create(G),P({asset_type_label:"",asset_type_code:""}),le(!1),await Ra()}catch($e){A("Failed to create asset type: "+(((ve=(B=$e.response)==null?void 0:B.data)==null?void 0:ve.error)||$e.message))}finally{bt(!1)}},Vt=async b=>{var B;if(b.preventDefault(),!O){A("Please select an asset type first");return}if(!_e.asset_brand){A("Please select a brand");return}bt(!0),A(null);try{const ve={model_name:_e.model_name,model_code:_e.model_code,asset_brand:parseInt(_e.asset_brand),asset_type:O.asset_type_id,is_active:_e.is_active,notes:_e.notes||"",release_year:_e.release_year?parseInt(_e.release_year):null,discontinued_year:_e.discontinued_year?parseInt(_e.discontinued_year):null,warranty_expiry_in_months:_e.warranty_expiry_in_months?parseInt(_e.warranty_expiry_in_months):null};await yt.create(ve),Te({model_name:"",model_code:"",asset_brand:"",asset_type:"",release_year:"",discontinued_year:"",is_active:!0,notes:"",warranty_expiry_in_months:""}),z(!1),await Ba(O.asset_type_id)}catch(ve){const $e=(B=ve.response)!=null&&B.data?typeof ve.response.data=="object"?JSON.stringify(ve.response.data):ve.response.data:ve.message;A("Failed to create asset model: "+$e)}finally{bt(!1)}},Sa=async b=>{var B;if(b.preventDefault(),!we){A("Please select an asset model first");return}bt(!0),A(null);try{const ve={...T,asset_model:we.asset_model_id,attribution_order_id:T.attribution_order_id?Number(T.attribution_order_id):null,destruction_certificate_id:T.destruction_certificate_id?Number(T.destruction_certificate_id):null};Ze?await As.update(Ze,ve):await As.create(ve),Re({asset_serial_number:"",asset_inventory_number:"",asset_service_tag:"",asset_name:"",asset_status:"active",attribution_order_id:"",destruction_certificate_id:""}),Rt(null),F(!1),await pa(we.asset_model_id)}catch(ve){const $e=(B=ve.response)!=null&&B.data?typeof ve.response.data=="object"?JSON.stringify(ve.response.data):ve.response.data:ve.message;A(`Failed to ${Ze?"update":"create"} asset: `+$e)}finally{bt(!1)}},Wa=async b=>{if(b.preventDefault(),!O){A("Please select an asset type first");return}if(!ee.asset_attribute_definition){A("Please select an attribute definition");return}bt(!0),A(null);try{const B={asset_type:O.asset_type_id,asset_attribute_definition:Number(ee.asset_attribute_definition),is_mandatory:ee.is_mandatory,default_value:ee.default_value||null};await yn.create(B),Ie({asset_attribute_definition:"",is_mandatory:!1,default_value:""}),C(!1),await ft(O.asset_type_id)}catch(B){A("Failed to assign attribute to asset type: "+B.message)}finally{bt(!1)}},ys=async b=>{if(b.preventDefault(),!we){A("Please select an asset model first");return}if(!We.asset_attribute_definition){A("Please select an attribute definition");return}bt(!0),A(null);try{const B={asset_model:we.asset_model_id,asset_attribute_definition:Number(We.asset_attribute_definition),value_string:We.value_string||null,value_number:We.value_number?Number(We.value_number):null,value_bool:We.value_bool,value_date:We.value_date||null};await Zr.create(B),Qt({asset_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),oe(!1),await vt(we.asset_model_id)}catch(B){A("Failed to add model attribute value: "+B.message)}finally{bt(!1)}},Ts=async b=>{if(b.preventDefault(),!Ue){A("Please select an asset first");return}if(!lt.asset_attribute_definition){A("Please select an attribute definition");return}bt(!0),A(null);try{const B={asset:Ue.asset_id,asset_attribute_definition:Number(lt.asset_attribute_definition),value_string:lt.value_string||null,value_number:lt.value_number?Number(lt.value_number):null,value_bool:lt.value_bool,value_date:lt.value_date||null};await Wd.create(B),$t({asset_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),Me(!1),await Xt(Ue.asset_id)}catch(B){A("Failed to add asset attribute value: "+B.message)}finally{bt(!1)}},Zs=b=>{Rt(b.asset_id),Re({asset_serial_number:b.asset_serial_number||"",asset_inventory_number:b.asset_inventory_number||"",asset_service_tag:b.asset_service_tag||"",asset_name:b.asset_name||"",asset_status:b.asset_status||"active",attribution_order_id:b.attribution_order_id??"",destruction_certificate_id:b.destruction_certificate_id??""}),F(!0)},rs=async b=>{if(window.confirm("Are you sure you want to delete this asset type?"))try{await Vs.delete(b),(O==null?void 0:O.asset_type_id)===b&&Se(null),await Ra()}catch(B){A("Failed to delete asset type: "+B.message)}},La=async b=>{if(window.confirm("Are you sure you want to delete this asset model?"))try{await yt.delete(b),O&&await Ba(O.asset_type_id)}catch(B){A("Failed to delete asset model: "+B.message)}},ha=async b=>{if(window.confirm("Are you sure you want to delete this asset?"))try{await As.delete(b),we&&await pa(we.asset_model_id)}catch(B){A("Failed to delete asset: "+B.message)}},zt=async(b,B)=>{if(window.confirm("Remove this attribute from the asset type?"))try{await yn.delete(b,B),O&&await ft(O.asset_type_id)}catch(ve){A("Failed to remove asset type attribute: "+ve.message)}},Ta=async(b,B)=>{if(window.confirm("Remove this attribute value from the asset model?"))try{await Zr.delete(b,B),we&&await vt(we.asset_model_id)}catch(ve){A("Failed to remove asset model attribute: "+ve.message)}},qs=async(b,B)=>{if(window.confirm("Remove this attribute value from the asset?"))try{await Wd.delete(b,B),Ue&&await Xt(Ue.asset_id)}catch(ve){A("Failed to remove asset attribute: "+ve.message)}},Ia=b=>{ze(b),L(!0)},ae=()=>{L(!1),Me(!1)},be=()=>{Yt(!1),_a(null),la([]),jt(null),Na(""),Wt(""),St(!1)},Le=async b=>{var B;A(null),_a(b),jt(null),Na(""),Wt(""),Yt(!0);try{const[ve,$e]=await Promise.all([Is.getAll(),As.getCurrentRoom(b.asset_id)]),ut=Array.isArray(ve)?ve:[];la(ut);const ta=((B=$e==null?void 0:$e.room)==null?void 0:B.room_id)??null;jt(ta);const Z=ut.find(Be=>Be.room_id===ta);Na((Z==null?void 0:Z.room_name)||(ta?`Room ${ta}`:"Unknown"))}catch(ve){console.error(ve),la([]),A("Failed to load rooms")}},Ge=async b=>{var B,ve;if(b.preventDefault(),!!qe){if(!Kt){A("Please select a destination room");return}try{St(!0),await As.move(qe.asset_id,{destination_room_id:Number(Kt)}),we&&await pa(we.asset_model_id),be()}catch($e){console.error($e),A(((ve=(B=$e.response)==null?void 0:B.data)==null?void 0:ve.error)||"Failed to move asset")}finally{St(!1)}}},Dt=Fa.getUser(),ea=Dt==null?void 0:Dt.is_superuser,Es=((Js=Dt==null?void 0:Dt.roles)==null?void 0:Js.some(b=>b.role_code==="asset_responsible"))||ea,ga=((Fs=Dt==null?void 0:Dt.roles)==null?void 0:Fs.some(b=>b.role_code==="exploitation_chief"))||ea,Ga=Es||ga,gn=Es||ga,Ua=re.filter(b=>!b.is_confirmed_by_exploitation_chief&&b.is_active);return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Assets Explorer"}),t.jsx("p",{className:"page-subtitle",children:"Manage asset types, models, and inventory"})]}),ga&&Ua.length>0&&t.jsxs("div",{style:{backgroundColor:"rgba(59, 130, 246, 0.1)",border:"1px solid var(--color-primary)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)",marginBottom:"var(--space-4)"},children:[t.jsxs("h3",{style:{fontSize:"var(--font-size-sm)",fontWeight:"600",color:"var(--color-primary)",marginBottom:"var(--space-2)"},children:["Pending Confirmations (",Ua.length,")"]}),t.jsx("div",{style:{display:"flex",gap:"var(--space-4)",overflowX:"auto",paddingBottom:"var(--space-2)"},children:Ua.map(b=>{var B,ve;return t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-3)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",minWidth:"250px",fontSize:"var(--font-size-xs)"},children:[t.jsxs("div",{style:{fontWeight:"600"},children:[((B=b.asset)==null?void 0:B.asset_name)||"Asset"," (ID: ",(ve=b.asset)==null?void 0:ve.asset_id,")"]}),t.jsxs("div",{style:{color:"var(--color-text-secondary)"},children:["Assignee ID: ",b.person]}),t.jsx("div",{style:{marginTop:"var(--space-2)",display:"flex",justifyContent:"flex-end"},children:t.jsx("button",{onClick:()=>Gt(b.assignment_id),style:{backgroundColor:"var(--color-primary)",color:"white",border:"none",padding:"4px 8px",borderRadius:"4px",cursor:"pointer"},children:"Confirm"})})]},b.assignment_id)})})]}),he&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:he}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:p?"1fr":"300px 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[!p&&t.jsxs("div",{className:"card",style:{display:"flex",flexDirection:"column",overflow:"hidden",height:"100%"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Library"}),t.jsx("button",{onClick:()=>le(!Ne),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Asset Type",children:"+"})]}),Ne&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:ns,children:[t.jsx("input",{type:"text",name:"asset_type_label",value:G.asset_type_label,onChange:Ut,placeholder:"Type Name",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsx("input",{type:"text",name:"asset_type_code",value:G.asset_type_code,onChange:Ut,placeholder:"Code (e.g. LAP)",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:De,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>le(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[h.map(b=>t.jsxs("div",{children:[t.jsxs("div",{onClick:()=>Se((O==null?void 0:O.asset_type_id)===b.asset_type_id?null:b),style:{padding:"var(--space-3) var(--space-4)",cursor:"pointer",backgroundColor:(O==null?void 0:O.asset_type_id)===b.asset_type_id?"var(--color-bg-secondary)":"transparent",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsx("span",{style:{fontWeight:"500"},children:b.asset_type_label}),t.jsx("button",{onClick:B=>{B.stopPropagation(),rs(b.asset_type_id)},style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]}),(O==null?void 0:O.asset_type_id)===b.asset_type_id&&t.jsxs("div",{style:{backgroundColor:"var(--color-bg-secondary)",borderBottom:"1px solid var(--color-border)"},children:[t.jsx("div",{onClick:()=>z(!0),style:{padding:"var(--space-2) var(--space-4)",fontSize:"var(--font-size-xs)",color:"var(--color-primary)",cursor:"pointer",borderBottom:"1px dashed var(--color-border)",textAlign:"center"},children:"+ Add Model"}),x.map(B=>t.jsxs("div",{onClick:()=>Ke(B),style:{padding:"var(--space-2) var(--space-4)",paddingLeft:"var(--space-8)",cursor:"pointer",backgroundColor:(we==null?void 0:we.asset_model_id)===B.asset_model_id?"var(--color-primary)":"transparent",color:(we==null?void 0:we.asset_model_id)===B.asset_model_id?"white":"var(--color-text)",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"var(--font-size-sm)"},children:[t.jsx("span",{children:B.model_name}),(we==null?void 0:we.asset_model_id)===B.asset_model_id&&t.jsx("button",{onClick:ve=>{ve.stopPropagation(),La(B.asset_model_id)},style:{border:"none",background:"none",color:"white",cursor:"pointer",opacity:.8},children:""})]},B.asset_model_id))]})]},b.asset_type_id)),h.length===0&&!K&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No asset types."})]})]}),t.jsx("div",{className:"card",style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:w?t.jsxs("div",{style:{padding:"var(--space-6)",overflowY:"auto"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-6)"},children:[t.jsxs("h2",{children:["Add New Model for ",O==null?void 0:O.asset_type_label]}),t.jsx("button",{onClick:()=>z(!1),style:{padding:"var(--space-2) var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]}),g.length===0?t.jsx("div",{style:{color:"#c33",backgroundColor:"#fee",padding:"var(--space-4)",borderRadius:"var(--radius-sm)"},children:"No asset brands found. Please create a brand first."}):t.jsxs("form",{onSubmit:Vt,style:{maxWidth:"600px"},children:[t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Brand *"}),t.jsxs("select",{name:"asset_brand",value:_e.asset_brand,onChange:Bt,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"},children:[t.jsx("option",{value:"",children:"Select a brand..."}),g.map(b=>t.jsx("option",{value:b.asset_brand_id,children:b.brand_name},b.asset_brand_id))]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Model Name *"}),t.jsx("input",{type:"text",name:"model_name",value:_e.model_name,onChange:Bt,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Model Code *"}),t.jsx("input",{type:"text",name:"model_code",value:_e.model_code,onChange:Bt,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Release Year"}),t.jsx("input",{type:"number",name:"release_year",value:_e.release_year,onChange:Bt,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Warranty (Months)"}),t.jsx("input",{type:"number",name:"warranty_expiry_in_months",value:_e.warranty_expiry_in_months,onChange:Bt,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]})]}),t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Notes"}),t.jsx("textarea",{name:"notes",value:_e.notes,onChange:Bt,rows:"3",style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),t.jsx("div",{style:{marginBottom:"var(--space-6)"},children:t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",name:"is_active",checked:_e.is_active,onChange:Bt}),"Active Model"]})}),t.jsx("button",{type:"submit",disabled:De,style:{padding:"var(--space-2) var(--space-6)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:De?"Creating...":"Create Model"})]})]}):we?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsxs("h2",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",margin:0},children:[we.model_name," ",t.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-md)",fontWeight:"normal"},children:["(",we.model_code,")"]})]}),t.jsxs("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)",marginTop:"var(--space-1)"},children:[we.brand_name,"  ",M.length," Assets"]})]}),t.jsx("button",{onClick:()=>{Rt(null),Re({asset_serial_number:"",asset_inventory_number:"",asset_service_tag:"",asset_name:"",asset_status:"active",attribution_order_id:0,destruction_certificate_id:0}),F(!0)},style:{backgroundColor:"var(--color-primary)",color:"white",border:"none",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:"pointer",fontWeight:"500"},children:"+ Add Asset"})]}),t.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"var(--space-4)"},children:[!p&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"var(--space-4)",marginBottom:"var(--space-6)"},children:t.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[t.jsx("div",{style:{fontWeight:"600"},children:"Asset Type Attributes"}),t.jsx("button",{onClick:()=>C(!fe),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Assign"})]}),fe&&t.jsxs("form",{onSubmit:Wa,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"asset_attribute_definition",value:ee.asset_attribute_definition,onChange:oa,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),k.map(b=>t.jsx("option",{value:b.asset_attribute_definition_id,children:b.description||`Attribute ${b.asset_attribute_definition_id}`},b.asset_attribute_definition_id))]}),t.jsx("input",{type:"text",name:"default_value",placeholder:"Default value",value:ee.default_value,onChange:oa,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"is_mandatory",checked:ee.is_mandatory,onChange:oa}),"Mandatory"]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:De,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>C(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),t.jsx("div",{style:{maxHeight:"240px",overflowY:"auto"},children:S.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned."}):S.map(b=>{const B=b.definition||Pt.get(b.asset_attribute_definition);return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(B==null?void 0:B.description)||`Attribute ${b.asset_attribute_definition}`}),t.jsxs("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:[(B==null?void 0:B.data_type)||"type",B!=null&&B.unit?`  ${B.unit}`:"",b.is_mandatory?"  mandatory":"",b.default_value?`  default: ${b.default_value}`:""]})]}),t.jsx("button",{onClick:()=>zt(b.asset_type,b.asset_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${b.asset_type}-${b.asset_attribute_definition}`)})})]})}),t.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)",marginBottom:"var(--space-6)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[t.jsx("div",{style:{fontWeight:"600"},children:"Asset Model Attributes"}),t.jsx("button",{onClick:()=>oe(!$),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add Value"})]}),$&&t.jsxs("form",{onSubmit:ys,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"asset_attribute_definition",value:We.asset_attribute_definition,onChange:ht,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),k.map(b=>t.jsx("option",{value:b.asset_attribute_definition_id,children:b.description||`Attribute ${b.asset_attribute_definition_id}`},b.asset_attribute_definition_id))]}),(()=>{var ve;const b=Pt.get(Number(We.asset_attribute_definition)),B=(ve=b==null?void 0:b.data_type)==null?void 0:ve.toLowerCase();return B==="number"?t.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:We.value_number,onChange:ht,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):B==="bool"||B==="boolean"?t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"value_bool",checked:We.value_bool,onChange:ht}),"True"]}):B==="date"?t.jsx("input",{type:"date",name:"value_date",value:We.value_date,onChange:ht,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):t.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:We.value_string,onChange:ht,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:De,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>oe(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),t.jsx("div",{style:{maxHeight:"240px",overflowY:"auto"},children:se.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No model attribute values."}):se.map(b=>{const B=b.definition||Pt.get(b.asset_attribute_definition),ve=b.value_string??b.value_number??b.value_bool??b.value_date??"";return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(B==null?void 0:B.description)||`Attribute ${b.asset_attribute_definition}`}),t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:ve===""?"No value":String(ve)})]}),t.jsx("button",{onClick:()=>Ta(b.asset_model,b.asset_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${b.asset_model}-${b.asset_attribute_definition}`)})})]})]}),X&&t.jsxs("div",{style:{marginBottom:"var(--space-6)",padding:"var(--space-4)",backgroundColor:"var(--color-bg-secondary)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"},children:[t.jsx("div",{style:{fontWeight:"600",marginBottom:"var(--space-4)"},children:Ze?"Edit Asset":"New Asset"}),t.jsxs("form",{onSubmit:Sa,children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Name"}),t.jsx("input",{type:"text",name:"asset_name",value:T.asset_name,onChange:va,placeholder:"Asset Name",style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Status"}),t.jsxs("select",{name:"asset_status",value:T.asset_status,onChange:va,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"},children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"}),t.jsx("option",{value:"maintenance",children:"Maintenance"}),t.jsx("option",{value:"retired",children:"Retired"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Serial Number"}),t.jsx("input",{type:"text",name:"asset_serial_number",value:T.asset_serial_number,onChange:va,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Inventory Number"}),t.jsx("input",{type:"text",name:"asset_inventory_number",value:T.asset_inventory_number,onChange:va,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]})]}),t.jsxs("div",{style:{marginTop:"var(--space-4)",display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",style:{padding:"var(--space-2) var(--space-4)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Save Asset"}),t.jsx("button",{type:"button",onClick:()=>F(!1),style:{padding:"var(--space-2) var(--space-4)",backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})]})]}),M.length===0?t.jsx("div",{style:{textAlign:"center",color:"var(--color-text-secondary)",padding:"var(--space-8)"},children:"No assets found for this model."}):t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"var(--font-size-sm)"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{borderBottom:"2px solid var(--color-border)",textAlign:"left"},children:[t.jsx("th",{style:{padding:"var(--space-2)"},children:"Name"}),t.jsx("th",{style:{padding:"var(--space-2)"},children:"Serial / Tag"}),t.jsx("th",{style:{padding:"var(--space-2)"},children:"Status"}),t.jsx("th",{style:{padding:"var(--space-2)",textAlign:"right"},children:"Actions"})]})}),t.jsx("tbody",{children:M.map(b=>t.jsxs("tr",{onClick:()=>Ia(b),style:{borderBottom:"1px solid var(--color-border)",cursor:"pointer"},children:[t.jsxs("td",{style:{padding:"var(--space-3) var(--space-2)"},children:[t.jsx("div",{style:{fontWeight:"500"},children:b.asset_name||"Unnamed Asset"}),t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:b.asset_inventory_number})]}),t.jsxs("td",{style:{padding:"var(--space-3) var(--space-2)"},children:[t.jsx("div",{children:b.asset_serial_number}),t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:b.asset_service_tag})]}),t.jsx("td",{style:{padding:"var(--space-3) var(--space-2)"},children:t.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"var(--font-size-xs)",backgroundColor:b.asset_status==="active"?"rgba(16, 185, 129, 0.15)":"var(--color-bg-secondary)",color:b.asset_status==="active"?"var(--color-success)":"var(--color-text-secondary)"},children:b.asset_status})}),t.jsxs("td",{style:{padding:"var(--space-3) var(--space-2)",textAlign:"right"},children:[t.jsx("button",{onClick:B=>{B.stopPropagation(),Ia(b)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-text-secondary)",cursor:"pointer",fontWeight:"500"},children:"Attributes"}),t.jsx("button",{onClick:B=>{B.stopPropagation(),Zs(b)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-primary)",cursor:"pointer",fontWeight:"500"},children:"Edit"}),Ga&&t.jsx("button",{onClick:B=>{B.stopPropagation(),Le(b)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-primary)",cursor:"pointer",fontWeight:"500"},children:"Move"}),gn&&(()=>{const B=hs.get(b.asset_id);return B?t.jsx("button",{onClick:ve=>{ve.stopPropagation(),Ee(B)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontWeight:"500"},children:"Discharge"}):t.jsx("button",{onClick:ve=>{ve.stopPropagation(),Fe(b);const $e=new Date,ut=$e.getTimezoneOffset()*6e4,ta=new Date($e-ut).toISOString().slice(0,16);ba({person:"",start_datetime:ta,end_datetime:"",condition_on_assignment:b.asset_status==="active"?"Good":"Needs Repair"}),E(!0)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"#10b981",cursor:"pointer",fontWeight:"500"},children:"Assign"})})(),t.jsx("button",{onClick:B=>{B.stopPropagation(),ha(b.asset_id)},style:{background:"none",border:"none",color:"#c33",cursor:"pointer",fontWeight:"500"},children:"Delete"})]})]},b.asset_id))})]})]})]}):O?t.jsxs("div",{style:{padding:"var(--space-6)",overflowY:"auto"},children:[t.jsxs("h2",{style:{marginBottom:"var(--space-4)"},children:[O.asset_type_label," Attributes"]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"var(--space-4)"},children:!p&&t.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[t.jsx("div",{style:{fontWeight:"600"},children:"Asset Type Attributes"}),t.jsx("button",{onClick:()=>C(!fe),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Assign"})]}),fe&&t.jsxs("form",{onSubmit:Wa,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"asset_attribute_definition",value:ee.asset_attribute_definition,onChange:oa,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),k.map(b=>t.jsx("option",{value:b.asset_attribute_definition_id,children:b.description||`Attribute ${b.asset_attribute_definition_id}`},b.asset_attribute_definition_id))]}),t.jsx("input",{type:"text",name:"default_value",placeholder:"Default value",value:ee.default_value,onChange:oa,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"is_mandatory",checked:ee.is_mandatory,onChange:oa}),"Mandatory"]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:De,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>C(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),t.jsx("div",{style:{maxHeight:"320px",overflowY:"auto"},children:S.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned."}):S.map(b=>{const B=b.definition||Pt.get(b.asset_attribute_definition);return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(B==null?void 0:B.description)||`Attribute ${b.asset_attribute_definition}`}),t.jsxs("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:[(B==null?void 0:B.data_type)||"type",B!=null&&B.unit?`  ${B.unit}`:"",b.is_mandatory?"  mandatory":"",b.default_value?`  default: ${b.default_value}`:""]})]}),t.jsx("button",{onClick:()=>zt(b.asset_type,b.asset_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${b.asset_type}-${b.asset_attribute_definition}`)})})]})})]}):t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--color-text-secondary)"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"var(--space-4)",opacity:.2},children:""}),t.jsx("p",{children:"Select a model from the sidebar to view assets."})]})})]}),Ae&&Ye&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t.jsxs("div",{style:{backgroundColor:"white",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"500px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},children:[t.jsxs("h2",{style:{marginBottom:"var(--space-4)"},children:["Assign Asset: ",Ye.asset_name]}),t.jsxs("form",{onSubmit:Ma,children:[t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Assign to Person"}),t.jsxs("select",{name:"person",value:Qe.person,onChange:Ya,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"},children:[t.jsx("option",{value:"",children:"Select a person..."}),Q.map(b=>t.jsxs("option",{value:b.person_id,children:[b.first_name," ",b.last_name," (",b.person_id,")"]},b.person_id))]})]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Start Date (Automatic)"}),t.jsx("input",{type:"datetime-local",name:"start_datetime",value:Qe.start_datetime,onChange:Ya,required:!0,readOnly:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-secondary)",cursor:"not-allowed"}})]})}),t.jsxs("div",{style:{marginBottom:"var(--space-6)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Condition"}),t.jsx("input",{type:"text",name:"condition_on_assignment",value:Qe.condition_on_assignment,onChange:Ya,placeholder:"e.g. Good, New",required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[t.jsx("button",{type:"button",onClick:()=>{E(!1),Fe(null)},style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"}),t.jsx("button",{type:"submit",disabled:De,style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:De?"Assigning...":"Assign Asset"})]})]})]})}),ie&&Ue&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"var(--space-4)"},children:t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"900px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12,marginBottom:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:Ue.asset_name||`Asset ${Ue.asset_id}`}),t.jsxs("div",{style:{marginTop:6,color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:["ID: ",Ue.asset_id,Ue.asset_inventory_number?`  Inv: ${Ue.asset_inventory_number}`:"",Ue.asset_serial_number?`  SN: ${Ue.asset_serial_number}`:"",Ue.asset_service_tag?`  Tag: ${Ue.asset_service_tag}`:""]})]}),t.jsx("button",{type:"button",onClick:ae,style:{border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",cursor:"pointer"},children:"Close"})]}),t.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[t.jsx("div",{style:{fontWeight:"600"},children:"Asset Attributes"}),t.jsx("button",{onClick:()=>Me(!ye),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add Value"})]}),ye&&t.jsxs("form",{onSubmit:Ts,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"asset_attribute_definition",value:lt.asset_attribute_definition,onChange:Oa,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),k.map(b=>t.jsx("option",{value:b.asset_attribute_definition_id,children:b.description||`Attribute ${b.asset_attribute_definition_id}`},b.asset_attribute_definition_id))]}),(()=>{var ve;const b=Pt.get(Number(lt.asset_attribute_definition)),B=(ve=b==null?void 0:b.data_type)==null?void 0:ve.toLowerCase();return B==="number"?t.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:lt.value_number,onChange:Oa,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):B==="bool"||B==="boolean"?t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"value_bool",checked:lt.value_bool,onChange:Oa}),"True"]}):B==="date"?t.jsx("input",{type:"date",name:"value_date",value:lt.value_date,onChange:Oa,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):t.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:lt.value_string,onChange:Oa,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:De,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>Me(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),R.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attribute values set for this asset."}):R.map(b=>{const B=b.definition||Pt.get(b.asset_attribute_definition),ve=b.value_string??b.value_number??b.value_bool??b.value_date??"";return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(B==null?void 0:B.description)||`Attribute ${b.asset_attribute_definition}`}),t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:ve===""?"No value":String(ve)})]}),t.jsx("button",{onClick:()=>qs(b.asset,b.asset_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${b.asset}-${b.asset_attribute_definition}`)})]})]})}),ke&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"400px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[t.jsx("h2",{style:{marginBottom:"var(--space-4)"},children:"Confirm Discharge"}),t.jsxs("p",{style:{marginBottom:"var(--space-6)"},children:["Are you sure you want to end the assignment of ",t.jsx("strong",{children:(D=ke.asset)==null?void 0:D.asset_name})," to person ",t.jsx("strong",{children:ke.person}),"?",t.jsx("br",{}),t.jsx("br",{}),"The end date will be set to right now."]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[t.jsx("button",{type:"button",onClick:()=>Ee(null),style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"}),t.jsx("button",{type:"button",onClick:()=>fa(ke.assignment_id),disabled:De,style:{padding:"var(--space-2) var(--space-4)",background:"#ef4444",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:De?"Discharging...":"Confirm Discharge"})]})]})}),pt&&qe&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"520px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,marginBottom:"var(--space-4)"},children:[t.jsxs("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:["Move Asset: ",qe.asset_name||`Asset ${qe.asset_id}`]}),t.jsx("button",{type:"button",onClick:()=>!Mt&&be(),style:{border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",cursor:"pointer"},children:"Close"})]}),t.jsxs("form",{onSubmit:Ge,children:[t.jsxs("div",{style:{marginBottom:"var(--space-6)"},children:[t.jsxs("div",{style:{marginBottom:"var(--space-3)",padding:"var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"2px"},children:"Current room"}),t.jsx("div",{style:{fontWeight:600},children:ja||"Unknown"})]}),t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Destination room"}),t.jsxs("select",{value:Kt,onChange:b=>Wt(b.target.value),required:!0,disabled:Mt,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[t.jsx("option",{value:"",children:"Select a room..."}),ra.map(b=>t.jsxs("option",{value:b.room_id,children:[b.room_name||`Room ${b.room_id}`,b.room_type_label?` (${b.room_type_label})`:""]},b.room_id))]})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[t.jsx("button",{type:"button",onClick:()=>!Mt&&be(),style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"}),t.jsx("button",{type:"submit",disabled:Mt||!Kt,style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:Mt?"Moving...":"Move"})]})]})]})})]})},sj=()=>{const r=It(),[l,c]=d.useState([]),[u,m]=d.useState([]),[p,h]=d.useState(null),[y,g]=d.useState([]),[v,x]=d.useState(!1),[j,M]=d.useState(!1),[I,k]=d.useState(null),[H,S]=d.useState(!1),[V,se]=d.useState(!1),[N,R]=d.useState(!1),[W,K]=d.useState({asset_type_label:"",asset_type_code:""}),[Y,he]=d.useState({description:"",data_type:"",unit:""}),[A,Q]=d.useState(!1),[te,re]=d.useState({asset_attribute_definition:"",is_mandatory:!1,default_value:""});d.useEffect(()=>{xe(),X()},[]);const xe=async()=>{M(!0),k(null);try{const E=await Vs.getAll();c(Array.isArray(E)?E:[])}catch(E){k("Failed to fetch asset types: "+E.message),c([])}finally{M(!1)}},Ne=async E=>{x(!0),k(null);try{const ie=await yn.getByAssetType(E);g(Array.isArray(ie)?ie:[])}catch(ie){k("Failed to fetch type attributes: "+ie.message),g([])}finally{x(!1)}},le=E=>{const{name:ie,value:L,type:O,checked:Se}=E.target;re(we=>({...we,[ie]:O==="checkbox"?Se:L}))},w=async E=>{if(E.preventDefault(),!p){k("Please select an asset type first");return}if(!te.asset_attribute_definition){k("Please select an attribute definition");return}R(!0),k(null);try{const ie={asset_type:p.asset_type_id,asset_attribute_definition:Number(te.asset_attribute_definition),is_mandatory:!!te.is_mandatory,default_value:te.default_value||null};await yn.create(ie),re({asset_attribute_definition:"",is_mandatory:!1,default_value:""}),Q(!1),await Ne(p.asset_type_id)}catch(ie){k("Failed to add type attribute: "+ie.message)}finally{R(!1)}},z=async E=>{if(p&&window.confirm("Remove this attribute from the asset type?"))try{await yn.delete(p.asset_type_id,E),await Ne(p.asset_type_id)}catch(ie){k("Failed to remove type attribute: "+ie.message)}},X=async()=>{try{const E=await ur.getAll();m(Array.isArray(E)?E:[])}catch(E){k("Failed to fetch attribute definitions: "+E.message),m([])}},F=E=>{const{name:ie,value:L}=E.target;K(O=>({...O,[ie]:L}))},fe=async E=>{var ie,L;E.preventDefault(),R(!0),k(null);try{await Vs.create(W),K({asset_type_label:"",asset_type_code:""}),S(!1),await xe()}catch(O){k("Failed to create asset type: "+(((L=(ie=O.response)==null?void 0:ie.data)==null?void 0:L.error)||O.message))}finally{R(!1)}},C=async E=>{if(window.confirm("Are you sure you want to delete this asset type?"))try{await Vs.delete(E),await xe()}catch(ie){k("Failed to delete asset type: "+ie.message)}},$=E=>{r(`/dashboard/assets/models?typeId=${E.asset_type_id}`)},oe=async E=>{h(E),Q(!1),re({asset_attribute_definition:"",is_mandatory:!1,default_value:""}),await Ne(E.asset_type_id)},ye=new Set((Array.isArray(y)?y:[]).map(E=>E.asset_attribute_definition)),Me=(Array.isArray(u)?u:[]).filter(E=>!ye.has(E.asset_attribute_definition_id)),Ae=()=>{r("/dashboard/assets/attribute-definitions")};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Assets"}),t.jsx("p",{className:"page-subtitle",children:"Select an asset type"})]}),I&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:I}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Types"}),t.jsx("button",{onClick:()=>S(!H),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Asset Type",children:"+"})]}),H&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:fe,children:[t.jsx("input",{type:"text",name:"asset_type_label",value:W.asset_type_label,onChange:F,placeholder:"Type Name",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsx("input",{type:"text",name:"asset_type_code",value:W.asset_type_code,onChange:F,placeholder:"Code (e.g. LAP)",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:N,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>S(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[l.map(E=>t.jsxs("div",{onClick:()=>$(E),style:{padding:"var(--space-3) var(--space-4)",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsx("span",{style:{fontWeight:"500"},children:E.asset_type_label}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("button",{onClick:ie=>{ie.stopPropagation(),oe(E)},style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Attributes"}),t.jsx("button",{onClick:ie=>{ie.stopPropagation(),C(E.asset_type_id)},style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]})]},E.asset_type_id)),l.length===0&&!j&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No asset types."})]})]}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsxs("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:["Type Attributes ",p?` ${p.asset_type_label}`:""]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{onClick:()=>Q(E=>!E),disabled:!p,style:{border:"none",background:"none",color:"var(--color-primary)",cursor:p?"pointer":"not-allowed",opacity:p?1:.6},children:"+ Add"}),t.jsx("button",{onClick:Ae,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Manage"})]})]}),t.jsx("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:p?t.jsxs(t.Fragment,{children:[A&&t.jsxs("form",{onSubmit:w,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"asset_attribute_definition",value:te.asset_attribute_definition,onChange:le,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),Me.map(E=>t.jsx("option",{value:E.asset_attribute_definition_id,children:E.description||`Attribute ${E.asset_attribute_definition_id}`},E.asset_attribute_definition_id))]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"is_mandatory",checked:te.is_mandatory,onChange:le}),"Mandatory"]}),t.jsx("input",{type:"text",name:"default_value",placeholder:"Default value (optional)",value:te.default_value,onChange:le,style:{padding:"var(--space-2)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:N,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>Q(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),v&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!v&&y.length===0&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned to this type."}),!v&&y.map(E=>{const ie=E.definition||u.find(L=>L.asset_attribute_definition_id===E.asset_attribute_definition);return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(ie==null?void 0:ie.description)||`Attribute ${E.asset_attribute_definition}`}),t.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[(ie==null?void 0:ie.data_type)||"n/a",ie!=null&&ie.unit?`  ${ie.unit}`:"",E.is_mandatory?"  mandatory":"",E.default_value?`  default: ${E.default_value}`:""]})]}),t.jsx("button",{onClick:()=>z(E.asset_attribute_definition),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},`${E.asset_type}-${E.asset_attribute_definition}`)})]}):t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:'Click "Attributes" on a type to view its attributes.'})})]})]})]})},nj=()=>{const r=It(),l=Ha(),u=d.useMemo(()=>new URLSearchParams(l.search),[l.search]).get("typeId"),[m,p]=d.useState(null),[h,y]=d.useState([]),[g,v]=d.useState([]),[x,j]=d.useState(!1),[M,I]=d.useState(null),[k,H]=d.useState(!1),[S,V]=d.useState(!1),[se,N]=d.useState({asset_attribute_definition:"",is_mandatory:!1,default_value:""});d.useEffect(()=>{if(!u){I("typeId is required");return}R()},[u]);const R=async()=>{j(!0),I(null);try{const[Q,te,re]=await Promise.all([Vs.getById(u),ur.getAll(),yn.getByAssetType(u)]);p(Q),v(Array.isArray(te)?te:[]),y(Array.isArray(re)?re:[])}catch(Q){I("Failed to load type attributes: "+Q.message)}finally{j(!1)}},W=Q=>{const{name:te,value:re,type:xe,checked:Ne}=Q.target;N(le=>({...le,[te]:xe==="checkbox"?Ne:re}))},K=async Q=>{if(Q.preventDefault(),!se.asset_attribute_definition){I("Please select an attribute definition");return}V(!0),I(null);try{const te={asset_type:Number(u),asset_attribute_definition:Number(se.asset_attribute_definition),is_mandatory:se.is_mandatory,default_value:se.default_value||null};await yn.create(te),N({asset_attribute_definition:"",is_mandatory:!1,default_value:""}),H(!1),await R()}catch(te){I("Failed to add attribute to type: "+te.message)}finally{V(!1)}},Y=async Q=>{if(window.confirm("Remove this attribute from the asset type?"))try{await yn.delete(Number(u),Number(Q)),await R()}catch(te){I("Failed to remove type attribute: "+te.message)}},he=d.useMemo(()=>new Set(h.map(Q=>Q.asset_attribute_definition)),[h]),A=d.useMemo(()=>g.filter(Q=>!he.has(Q.asset_attribute_definition_id)),[g,he]);return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"flex-end",gap:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("h1",{className:"page-title",children:"Asset Type Attributes"}),t.jsxs("p",{className:"page-subtitle",children:[m?m.asset_type_label:"Type","  Manage attributes"]})]}),t.jsx("button",{onClick:()=>r("/dashboard/assets/types"),style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back to Types","aria-label":"Back to Types",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})]}),M&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:M}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Attributes"}),t.jsx("button",{onClick:()=>H(!k),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add"})]}),k&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:K,children:[t.jsxs("select",{name:"asset_attribute_definition",value:se.asset_attribute_definition,onChange:W,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition"}),A.map(Q=>t.jsxs("option",{value:Q.asset_attribute_definition_id,children:[Q.description," (",Q.data_type||"n/a",Q.unit?`  ${Q.unit}`:"",")"]},Q.asset_attribute_definition_id))]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"is_mandatory",checked:se.is_mandatory,onChange:W}),"Mandatory"]}),t.jsx("input",{type:"text",name:"default_value",placeholder:"Default value (optional)",value:se.default_value,onChange:W,style:{padding:"var(--space-2)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:S,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>H(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:[x&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!x&&h.length===0&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned to this type."}),h.map(Q=>{var te,re,xe;return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:((te=Q.definition)==null?void 0:te.description)||`Definition ${Q.asset_attribute_definition}`}),t.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[((re=Q.definition)==null?void 0:re.data_type)||"n/a",(xe=Q.definition)!=null&&xe.unit?`  ${Q.definition.unit}`:"",Q.is_mandatory?"  mandatory":"",Q.default_value?`  default: ${Q.default_value}`:""]})]}),t.jsx("button",{onClick:()=>Y(Q.asset_attribute_definition),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},Q.asset_attribute_definition)})]})]})]})},rj=()=>{const r=It(),[l]=Ms(),c=l.get("typeId"),[u,m]=d.useState(null),[p,h]=d.useState([]),[y,g]=d.useState(null),[v,x]=d.useState([]),[j,M]=d.useState([]),[I,k]=d.useState([]),[H,S]=d.useState(!1),[V,se]=d.useState(!1),[N,R]=d.useState({asset_brand:"",model_name:"",model_code:""}),[W,K]=d.useState(!1),[Y,he]=d.useState({asset_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[A,Q]=d.useState(!1),[te,re]=d.useState(null),[xe,Ne]=d.useState(!1);d.useEffect(()=>{c&&le(c)},[c]),d.useEffect(()=>{w(),z()},[]),d.useEffect(()=>{if(!y){k([]),K(!1),he({asset_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""});return}X(y.asset_model_id)},[y]);const le=async O=>{Q(!0),re(null);try{const[Se,we]=await Promise.all([Vs.getById(O),yt.getByAssetType(O)]);m(Se||null),h(Array.isArray(we)?we:[]),g(null)}catch(Se){re("Failed to fetch asset models: "+Se.message),m(null),h([]),g(null)}finally{Q(!1)}},w=async()=>{try{const O=await ur.getAll();M(Array.isArray(O)?O:[])}catch{M([])}},z=async()=>{try{const O=await gy.getAll();x(Array.isArray(O)?O:[])}catch{x([])}},X=async O=>{try{const Se=await Zr.getByAssetModel(O);k(Array.isArray(Se)?Se:[])}catch(Se){re("Failed to fetch asset model attributes: "+Se.message),k([])}},F=O=>{const{name:Se,value:we,type:Ke,checked:Ue}=O.target;he(ze=>({...ze,[Se]:Ke==="checkbox"?Ue:we}))},fe=O=>{const{name:Se,value:we}=O.target;R(Ke=>({...Ke,[Se]:we}))},C=async O=>{var Se,we;if(O.preventDefault(),!!c){if(!N.asset_brand){re("Please select a brand");return}se(!0),re(null);try{const Ke={asset_type:Number(c),asset_brand:Number(N.asset_brand),model_name:N.model_name||null,model_code:N.model_code||null};await yt.create(Ke),R({asset_brand:"",model_name:"",model_code:""}),S(!1),await le(c)}catch(Ke){re("Failed to create asset model: "+(((we=(Se=Ke.response)==null?void 0:Se.data)==null?void 0:we.error)||Ke.message))}finally{se(!1)}}},$=async O=>{if(O.preventDefault(),!y){re("Please select an asset model first");return}if(!Y.asset_attribute_definition){re("Please select an attribute definition");return}Ne(!0),re(null);try{const Se={asset_model:y.asset_model_id,asset_attribute_definition:Number(Y.asset_attribute_definition),value_string:Y.value_string||null,value_number:Y.value_number?Number(Y.value_number):null,value_bool:Y.value_bool,value_date:Y.value_date||null};await Zr.create(Se),he({asset_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),K(!1),await X(y.asset_model_id)}catch(Se){re("Failed to add model attribute value: "+Se.message)}finally{Ne(!1)}},oe=async(O,Se)=>{if(window.confirm("Remove this attribute value from the asset model?"))try{await Zr.delete(O,Se),y&&await X(y.asset_model_id)}catch(we){re("Failed to remove asset model attribute: "+we.message)}},ye=d.useMemo(()=>{const O=new Map;return(Array.isArray(j)?j:[]).forEach(Se=>{O.set(Se.asset_attribute_definition_id,Se)}),O},[j]),Me=d.useMemo(()=>{if(!y)return j;const O=new Set((Array.isArray(I)?I:[]).map(Se=>Se.asset_attribute_definition));return(Array.isArray(j)?j:[]).filter(Se=>!O.has(Se.asset_attribute_definition_id))},[j,I,y]),Ae=()=>{r("/dashboard/assets/types")},E=O=>{r(`/dashboard/assets/instances?typeId=${c}&modelId=${O.asset_model_id}`)},ie=O=>{r(`/dashboard/assets/models/${O.asset_model_id}/compatibility?typeId=${c}`)},L=O=>{r(`/dashboard/assets/models/${O.asset_model_id}/default-composition?typeId=${c}`)};return c?t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Assets"}),t.jsxs("p",{className:"page-subtitle",children:["Select a model",u!=null&&u.asset_type_label?` for ${u.asset_type_label}`:""]})]}),te&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:te}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsxs("div",{style:{display:"flex",gap:"var(--space-3)",alignItems:"center"},children:[t.jsx("button",{onClick:Ae,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})}),t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Models"})]}),t.jsx("button",{onClick:()=>S(O=>!O),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Model",children:"+"})]}),H&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:C,children:[t.jsxs("select",{name:"asset_brand",value:N.asset_brand,onChange:fe,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select brand..."}),v.map(O=>t.jsx("option",{value:O.asset_brand_id,children:O.brand_name},O.asset_brand_id))]}),t.jsx("input",{type:"text",name:"model_name",value:N.model_name,onChange:fe,placeholder:"Model Name",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsx("input",{type:"text",name:"model_code",value:N.model_code,onChange:fe,placeholder:"Model Code",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:V,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>S(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[p.map(O=>t.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[t.jsx("span",{style:{fontWeight:"500"},children:O.model_name}),t.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:O.model_code})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{onClick:()=>g(O),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:(y==null?void 0:y.asset_model_id)===O.asset_model_id?"var(--color-bg-secondary)":"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Attributes"}),t.jsx("button",{onClick:()=>ie(O),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Compatibility"}),t.jsx("button",{onClick:()=>L(O),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Default configuration"}),t.jsx("button",{onClick:()=>E(O),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Instances"})]})]},O.asset_model_id)),p.length===0&&!A&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No models."})]})]}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsxs("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:["Model Attributes ",y?` ${y.model_name}`:""]}),t.jsx("button",{onClick:()=>K(O=>!O),disabled:!y,style:{border:"none",background:"none",color:"var(--color-primary)",cursor:y?"pointer":"not-allowed",opacity:y?1:.6},children:"+ Add Value"})]}),t.jsx("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:y?t.jsxs(t.Fragment,{children:[W&&t.jsxs("form",{onSubmit:$,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"asset_attribute_definition",value:Y.asset_attribute_definition,onChange:F,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),Me.map(O=>t.jsx("option",{value:O.asset_attribute_definition_id,children:O.description||`Attribute ${O.asset_attribute_definition_id}`},O.asset_attribute_definition_id))]}),(()=>{var we;const O=ye.get(Number(Y.asset_attribute_definition)),Se=(we=O==null?void 0:O.data_type)==null?void 0:we.toLowerCase();return Se==="number"?t.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:Y.value_number,onChange:F,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):Se==="bool"||Se==="boolean"?t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"value_bool",checked:Y.value_bool,onChange:F}),"True"]}):Se==="date"?t.jsx("input",{type:"date",name:"value_date",value:Y.value_date,onChange:F,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):t.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:Y.value_string,onChange:F,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:xe,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>K(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),I.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No model attribute values."}):I.map(O=>{const Se=O.definition||ye.get(O.asset_attribute_definition),we=O.value_string??O.value_number??O.value_bool??O.value_date??"";return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(Se==null?void 0:Se.description)||`Attribute ${O.asset_attribute_definition}`}),t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:we===""?"No value":String(we)})]}),t.jsx("button",{onClick:()=>oe(O.asset_model,O.asset_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${O.asset_model}-${O.asset_attribute_definition}`)})]}):t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Select a model to view or add values."})})]})]})]}):t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Assets"}),t.jsx("p",{className:"page-subtitle",children:"Select a type first"})]}),t.jsx("div",{className:"card",style:{padding:"var(--space-6)"},children:t.jsx("button",{className:"btn",onClick:Ae,style:{padding:"var(--space-2) var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer",width:"fit-content"},title:"Back to types","aria-label":"Back to types",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})})]})},lj=()=>{const[r,l]=d.useState([]),[c,u]=d.useState(!1),[m,p]=d.useState(null),[h,y]=d.useState(!1),[g,v]=d.useState(!1),[x,j]=d.useState({description:"",data_type:"",unit:""});d.useEffect(()=>{M()},[]);const M=async()=>{u(!0),p(null);try{const S=await ur.getAll();l(Array.isArray(S)?S:[])}catch(S){p("Failed to fetch attribute definitions: "+S.message),l([])}finally{u(!1)}},I=S=>{const{name:V,value:se}=S.target;j(N=>({...N,[V]:se}))},k=async S=>{S.preventDefault(),v(!0),p(null);try{const V={description:x.description||null,data_type:x.data_type||null,unit:x.unit||null};await ur.create(V),j({description:"",data_type:"",unit:""}),y(!1),await M()}catch(V){p("Failed to create attribute definition: "+V.message)}finally{v(!1)}},H=async S=>{if(window.confirm("Delete this attribute definition?"))try{await ur.delete(S),await M()}catch(V){p("Failed to delete attribute definition: "+V.message)}};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Asset Attribute Definitions"}),t.jsx("p",{className:"page-subtitle",children:"Manage asset attribute definitions"})]}),m&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:m}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Definitions"}),t.jsx("button",{onClick:()=>y(!h),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add"})]}),h&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:k,children:[t.jsx("input",{type:"text",name:"description",placeholder:"Description",value:x.description,onChange:I,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)"},children:[t.jsxs("select",{name:"data_type",value:x.data_type,onChange:I,style:{padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Data Type"}),t.jsx("option",{value:"string",children:"String"}),t.jsx("option",{value:"number",children:"Number"}),t.jsx("option",{value:"bool",children:"Boolean"}),t.jsx("option",{value:"date",children:"Date"})]}),t.jsx("input",{type:"text",name:"unit",placeholder:"Unit",value:x.unit,onChange:I,style:{padding:"var(--space-2)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:g,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>y(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:[c&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!c&&r.length===0&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attribute definitions."}),r.map(S=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:S.description}),t.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[S.data_type,S.unit?`  ${S.unit}`:""]})]}),t.jsx("button",{onClick:()=>H(S.asset_attribute_definition_id),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},S.asset_attribute_definition_id))]})]})]})},oj=()=>{const r=It(),{modelId:l}=al(),[c]=Ms(),u=c.get("typeId"),[m,p]=d.useState(null),[h,y]=d.useState([]),[g,v]=d.useState([]),[x,j]=d.useState([]),[M,I]=d.useState([]),[k,H]=d.useState([]),[S,V]=d.useState([]),[se,N]=d.useState(!1),[R,W]=d.useState(null),[K,Y]=d.useState(""),[he,A]=d.useState(""),[Q,te]=d.useState(!1),[re,xe]=d.useState(!1),[Ne,le]=d.useState(!1),[w,z]=d.useState(!1),[X,F]=d.useState(""),[fe,C]=d.useState(""),[$,oe]=d.useState(1),[ye,Me]=d.useState(1),Ae=d.useRef(null),E=Fa.isSuperuser(),ie=()=>{if(u){r(`/dashboard/assets/models?typeId=${u}`);return}r(-1)},L=d.useCallback(async()=>{if(l){N(!0),W(null);try{const[ee,Ie,We,Qt,lt,$t,Qe]=await Promise.all([yt.getById(l),yt.getCompatibleStockItemModels(l),yt.getCompatibleConsumableModels(l),Pa.getAll(),es.getAll(),yt.getDefaultStockItems(l),yt.getDefaultConsumables(l)]);p(ee||null),y(Array.isArray(Ie)?Ie:[]),v(Array.isArray(We)?We:[]),H(Array.isArray(Qt)?Qt:[]),V(Array.isArray(lt)?lt:[]),j(Array.isArray($t)?$t:[]),I(Array.isArray(Qe)?Qe:[])}catch(ee){W("Failed to fetch compatibility: "+ee.message)}finally{N(!1)}}},[l]);d.useEffect(()=>{L()},[L]);const O=d.useMemo(()=>new Set((Array.isArray(h)?h:[]).map(ee=>ee.stock_item_model_id)),[h]),Se=d.useMemo(()=>new Set((Array.isArray(g)?g:[]).map(ee=>ee.consumable_model_id)),[g]),we=d.useMemo(()=>(Array.isArray(k)?k:[]).filter(ee=>!O.has(ee.stock_item_model_id)),[k,O]),Ke=d.useMemo(()=>(Array.isArray(S)?S:[]).filter(ee=>!Se.has(ee.consumable_model_id)),[S,Se]),Ue=async()=>{if(K){W(null);try{await yt.addCompatibleStockItemModel(l,Number(K)),Y(""),te(!1),await L()}catch(ee){W("Failed to add compatible stock item model: "+ee.message)}}},ze=async ee=>{W(null);try{await yt.removeCompatibleStockItemModel(l,ee),await L()}catch(Ie){W("Failed to remove compatible stock item model: "+Ie.message)}},Ye=async()=>{if(he){W(null);try{await yt.addCompatibleConsumableModel(l,Number(he)),A(""),xe(!1),await L()}catch(ee){W("Failed to add compatible consumable model: "+ee.message)}}},Fe=async ee=>{W(null);try{await yt.removeCompatibleConsumableModel(l,ee),await L()}catch(Ie){W("Failed to remove compatible consumable model: "+Ie.message)}},ke=d.useMemo(()=>new Set(x.map(ee=>ee.stock_item_model)),[x]),Ee=d.useMemo(()=>new Set(M.map(ee=>ee.consumable_model)),[M]),G=d.useMemo(()=>(Array.isArray(k)?k:[]).filter(ee=>!ke.has(ee.stock_item_model_id)),[k,ke]),P=d.useMemo(()=>(Array.isArray(S)?S:[]).filter(ee=>!Ee.has(ee.consumable_model_id)),[S,Ee]),_e=async()=>{if(X){W(null);try{await yt.addDefaultStockItem(l,Number(X),$),F(""),oe(1),le(!1),await L()}catch(ee){W("Failed to add default stock item: "+ee.message)}}},Te=async ee=>{W(null);try{await yt.removeDefaultStockItem(ee),await L()}catch(Ie){W("Failed to remove default stock item: "+Ie.message)}},T=async()=>{if(fe){W(null);try{await yt.addDefaultConsumable(l,Number(fe),ye),C(""),Me(1),z(!1),await L()}catch(ee){W("Failed to add default consumable: "+ee.message)}}},Re=async ee=>{W(null);try{await yt.removeDefaultConsumable(ee),await L()}catch(Ie){W("Failed to remove default consumable: "+Ie.message)}};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Assets"}),t.jsxs("p",{className:"page-subtitle",children:["Compatibility ",m!=null&&m.model_name?` ${m.model_name}`:""]})]}),R&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:R}),t.jsx("div",{className:"card",style:{padding:"var(--space-4)",marginBottom:"var(--space-4)",display:"flex",justifyContent:"space-between",gap:"var(--space-3)"},children:t.jsx("button",{onClick:ie,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Compatible Stock Item Models"}),E&&!Q&&t.jsx("button",{onClick:()=>te(!0),style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add compatible model"})]}),E&&Q&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsxs("select",{value:K,onChange:ee=>Y(ee.target.value),style:{flex:1,padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select stock item model..."}),we.map(ee=>t.jsx("option",{value:ee.stock_item_model_id,children:ee.model_name||`Model ${ee.stock_item_model_id}`},ee.stock_item_model_id))]}),t.jsx("button",{onClick:Ue,disabled:!K||se,style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add"}),t.jsx("button",{onClick:()=>{te(!1),Y("")},style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[(Array.isArray(h)?h:[]).map(ee=>t.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[t.jsx("span",{style:{fontWeight:"500"},children:ee.model_name}),t.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:ee.model_code})]}),E&&t.jsx("button",{onClick:()=>ze(ee.stock_item_model_id),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},ee.stock_item_model_id)),h.length===0&&!se&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No compatible stock item models."})]})]}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Compatible Consumable Models"}),E&&!re&&t.jsx("button",{onClick:()=>xe(!0),style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add compatible model"})]}),E&&re&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsxs("select",{value:he,onChange:ee=>A(ee.target.value),style:{flex:1,padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select consumable model..."}),Ke.map(ee=>t.jsx("option",{value:ee.consumable_model_id,children:ee.model_name||`Model ${ee.consumable_model_id}`},ee.consumable_model_id))]}),t.jsx("button",{onClick:Ye,disabled:!he||se,style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add"}),t.jsx("button",{onClick:()=>{xe(!1),A("")},style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[(Array.isArray(g)?g:[]).map(ee=>t.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[t.jsx("span",{style:{fontWeight:"500"},children:ee.model_name}),t.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:ee.model_code})]}),E&&t.jsx("button",{onClick:()=>Fe(ee.consumable_model_id),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},ee.consumable_model_id)),g.length===0&&!se&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No compatible consumable models."})]})]})]}),t.jsx("div",{ref:Ae}),t.jsx("h2",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",marginTop:"var(--space-6)",marginBottom:"var(--space-4)"},children:"Default Composition (Included with new assets)"}),t.jsx("p",{style:{color:"var(--color-text-secondary)",marginBottom:"var(--space-4)",fontSize:"var(--font-size-sm)"},children:"These items will be automatically created and linked to new assets of this model when added via an attribution order."}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Default Stock Items"}),E&&!Ne&&t.jsx("button",{onClick:()=>le(!0),style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add default item"})]}),E&&Ne&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",alignItems:"center"},children:[t.jsxs("select",{value:X,onChange:ee=>F(ee.target.value),style:{flex:1,padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select stock item model..."}),G.map(ee=>t.jsx("option",{value:ee.stock_item_model_id,children:ee.model_name||`Model ${ee.stock_item_model_id}`},ee.stock_item_model_id))]}),t.jsx("input",{type:"number",min:"1",value:$,onChange:ee=>oe(Number(ee.target.value)),style:{width:"60px",padding:"var(--space-2)"},placeholder:"Qty"}),t.jsx("button",{onClick:_e,disabled:!X||se,style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add"}),t.jsx("button",{onClick:()=>{le(!1),F(""),oe(1)},style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[x.map(ee=>t.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[t.jsx("span",{style:{fontWeight:"500"},children:ee.stock_item_model_name}),t.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:["Qty: ",ee.quantity]})]}),E&&t.jsx("button",{onClick:()=>Te(ee.id),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},ee.id)),x.length===0&&!se&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No default stock items defined."})]})]}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Default Consumables"}),E&&!w&&t.jsx("button",{onClick:()=>z(!0),style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add default item"})]}),E&&w&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",alignItems:"center"},children:[t.jsxs("select",{value:fe,onChange:ee=>C(ee.target.value),style:{flex:1,padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select consumable model..."}),P.map(ee=>t.jsx("option",{value:ee.consumable_model_id,children:ee.model_name||`Model ${ee.consumable_model_id}`},ee.consumable_model_id))]}),t.jsx("input",{type:"number",min:"1",value:ye,onChange:ee=>Me(Number(ee.target.value)),style:{width:"60px",padding:"var(--space-2)"},placeholder:"Qty"}),t.jsx("button",{onClick:T,disabled:!fe||se,style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add"}),t.jsx("button",{onClick:()=>{z(!1),C(""),Me(1)},style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[M.map(ee=>t.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[t.jsx("span",{style:{fontWeight:"500"},children:ee.consumable_model_name}),t.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:["Qty: ",ee.quantity]})]}),E&&t.jsx("button",{onClick:()=>Re(ee.id),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},ee.id)),M.length===0&&!se&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No default consumables defined."})]})]})]})]})},Rh=()=>{const r=It(),{modelId:l}=al(),[c]=Ms(),u=c.get("typeId")||"",[m,p]=d.useState(null),[h,y]=d.useState([]),[g,v]=d.useState([]),[x,j]=d.useState([]),[M,I]=d.useState([]),[k,H]=d.useState([]),[S,V]=d.useState([]),[se,N]=d.useState([]),[R,W]=d.useState([]),[K,Y]=d.useState(new Set),[he,A]=d.useState(new Set),[Q,te]=d.useState(u),[re,xe]=d.useState(l?[Number(l)]:[]);d.useEffect(()=>{if(l){const ke=Number(l);xe([ke]),console.log("Auto-selecting modelId:",ke)}},[l]);const[Ne,le]=d.useState(""),[w,z]=d.useState(""),[X,F]=d.useState(1),[fe,C]=d.useState(""),[$,oe]=d.useState(""),[ye,Me]=d.useState(1),[Ae,E]=d.useState(!1),[ie,L]=d.useState(null),[O,Se]=d.useState(Fa.isSuperuser());d.useEffect(()=>{Se(Fa.isSuperuser())},[]),d.useEffect(()=>{(async()=>{E(!0),L(null);try{const[Ee,G,P,_e,Te]=await Promise.all([Vs.getAll(),Qs.getAll(),Xs.getAll(),Pa.getAll(),es.getAll()]);if(y((Ee==null?void 0:Ee.results)||Ee||[]),j((G==null?void 0:G.results)||G||[]),V((P==null?void 0:P.results)||P||[]),H((_e==null?void 0:_e.results)||_e||[]),W((Te==null?void 0:Te.results)||Te||[]),l){const[T,Re,ee]=await Promise.all([yt.getById(l),yt.getDefaultStockItems(l),yt.getDefaultConsumables(l)]);p(T),Y(new Set((Re||[]).map(Ie=>Ie.stock_item_model))),A(new Set((ee||[]).map(Ie=>Ie.consumable_model)))}}catch{L("Failed to fetch initial data")}finally{E(!1)}})()},[l]),d.useEffect(()=>{(async()=>{if(!Ne){I([]),z("");return}E(!0),L(null);try{const Ee=await Pa.getByStockItemType(Ne),G=(Ee==null?void 0:Ee.results)||Ee||[];I(Array.isArray(G)?G:[]),z("")}catch{L("Failed to fetch stock item models")}finally{E(!1)}})()},[Ne]),d.useEffect(()=>{(async()=>{if(!fe){N([]),oe("");return}E(!0),L(null);try{const Ee=await es.getByConsumableType(fe),G=(Ee==null?void 0:Ee.results)||Ee||[];N(Array.isArray(G)?G:[]),oe("")}catch{L("Failed to fetch consumable models")}finally{E(!1)}})()},[fe]),d.useEffect(()=>{(async()=>{if(!Q){v([]),xe([]);return}E(!0),L(null);try{const Ee=await yt.getByAssetType(Q),G=(Ee==null?void 0:Ee.results)||Ee||[];v(Array.isArray(G)?G:[]),xe([])}catch{L("Failed to fetch asset models")}finally{E(!1)}})()},[Q]);const we=ke=>{xe(Ee=>Ee.includes(ke)?Ee.filter(G=>G!==ke):[...Ee,ke])};d.useMemo(()=>{const ke=new Set(re);return g.filter(Ee=>ke.has(Ee.asset_model_id))},[g,re]);const Ke=async()=>{const ke=l?[Number(l)]:re;if(!(!w||ke.length===0)){E(!0),L(null);try{for(const Ee of ke)await yt.addDefaultStockItem(Ee,Number(w),X);l&&Y(Ee=>new Set([...Ee,Number(w)])),z(""),F(1)}catch{L("Failed to insert default stock items")}finally{E(!1)}}},Ue=async()=>{const ke=l?[Number(l)]:re;if(!(!$||ke.length===0)){E(!0),L(null);try{for(const Ee of ke)await yt.addDefaultConsumable(Ee,Number($),ye);l&&A(Ee=>new Set([...Ee,Number($)])),oe(""),Me(1)}catch{L("Failed to insert default consumables")}finally{E(!1)}}},ze=d.useMemo(()=>l?x.filter(ke=>{const Ee=k.filter(G=>G.stock_item_type===ke.stock_item_type_id);return Ee.length===0?!1:Ee.some(G=>!K.has(G.stock_item_model_id))}):x,[x,k,K,l]),Ye=d.useMemo(()=>l?S.filter(ke=>{const Ee=R.filter(G=>G.consumable_type===ke.consumable_type_id);return Ee.length===0?!1:Ee.some(G=>!he.has(G.consumable_model_id))}):S,[S,R,he,l]),Fe=()=>{if(l){r(`/dashboard/assets/models/${l}/compatibility?typeId=${u}`);return}if(Q){r(`/dashboard/assets/models?typeId=${Q}`);return}r("/dashboard/assets/models")};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Assets"}),t.jsxs("p",{className:"page-subtitle",children:["Default composition ",m?` ${m.model_name}`:" Select asset type + asset model(s), then choose stock/consumable models"]})]}),ie&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:ie}),!l&&t.jsx("div",{className:"card",style:{padding:"var(--space-4)",marginBottom:"var(--space-4)"},children:t.jsxs("div",{style:{display:"flex",gap:"var(--space-3)",alignItems:"center",flexWrap:"wrap"},children:[t.jsx("button",{onClick:Fe,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})}),t.jsxs("div",{style:{minWidth:"260px"},children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"4px"},children:"Asset Type"}),t.jsxs("select",{value:Q,onChange:ke=>te(ke.target.value),style:{width:"100%",padding:"var(--space-2)"},disabled:Ae,children:[t.jsx("option",{value:"",children:"Select type..."}),h.map(ke=>t.jsx("option",{value:ke.asset_type_id,children:ke.asset_type_label||`Type ${ke.asset_type_id}`},ke.asset_type_id))]})]})]})}),l&&t.jsx("div",{className:"card",style:{padding:"var(--space-4)",marginBottom:"var(--space-4)"},children:t.jsxs("div",{style:{display:"flex",gap:"var(--space-3)",alignItems:"center"},children:[t.jsx("button",{onClick:Fe,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back to Compatibility","aria-label":"Back to Compatibility",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})}),t.jsxs("div",{style:{fontWeight:"500"},children:["Adding to: ",t.jsx("span",{style:{color:"var(--color-primary)"},children:m==null?void 0:m.model_name})]})]})}),(Q||l)&&t.jsxs("div",{style:{display:"grid",gridTemplateColumns:l?"1fr":"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[!l&&t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",minHeight:0},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Target Asset Model(s)"}),t.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[re.length," selected"]})]}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[g.map(ke=>t.jsxs("label",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",gap:"var(--space-3)",alignItems:"center",borderBottom:"1px solid var(--color-border)",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",checked:re.includes(ke.asset_model_id),onChange:()=>we(ke.asset_model_id)}),t.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[t.jsx("span",{style:{fontWeight:"500"},children:ke.model_name||`Model ${ke.asset_model_id}`}),t.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:ke.model_code||""})]})]},ke.asset_model_id)),g.length===0&&!Ae&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No models for this type."})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",minHeight:0},children:[t.jsxs("div",{className:"card",style:{padding:"var(--space-4)"},children:[t.jsx("div",{style:{fontWeight:600,marginBottom:"var(--space-3)"},children:"Add default stock item models"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"var(--space-3)"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"4px"},children:"Stock Item Type"}),t.jsxs("select",{value:Ne,onChange:ke=>le(ke.target.value),style:{width:"100%",padding:"var(--space-2)"},disabled:Ae,children:[t.jsx("option",{value:"",children:"Select type..."}),ze.map(ke=>t.jsx("option",{value:ke.stock_item_type_id,children:ke.stock_item_type_label||`Type ${ke.stock_item_type_id}`},ke.stock_item_type_id))]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"4px"},children:"Stock Item Model"}),t.jsxs("select",{value:w,onChange:ke=>z(ke.target.value),style:{width:"100%",padding:"var(--space-2)"},disabled:Ae||!Ne,children:[t.jsx("option",{value:"",children:"Select model..."}),M.filter(ke=>!K.has(ke.stock_item_model_id)).map(ke=>t.jsx("option",{value:ke.stock_item_model_id,children:ke.model_name||`Model ${ke.stock_item_model_id}`},ke.stock_item_model_id))]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"4px"},children:"Qty"}),t.jsx("input",{type:"number",min:"1",value:X,onChange:ke=>F(Number(ke.target.value)),style:{width:"100%",padding:"var(--space-2)"}})]}),t.jsx("button",{onClick:Ke,disabled:!w||(l?!1:re.length===0)||Ae,style:{padding:"var(--space-2) var(--space-3)",border:"none",background:"var(--color-primary)",color:"white",borderRadius:"var(--radius-sm)",cursor:!w||!l&&re.length===0||Ae?"not-allowed":"pointer",opacity:!w||!l&&re.length===0||Ae?.7:1,width:"100%"},title:!w||!l&&re.length===0?"Select a stock model":void 0,children:"Add to selected"})]})]}),t.jsxs("div",{className:"card",style:{padding:"var(--space-4)"},children:[t.jsx("div",{style:{fontWeight:600,marginBottom:"var(--space-3)"},children:"Add default consumable models"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"var(--space-3)"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"4px"},children:"Consumable Type"}),t.jsxs("select",{value:fe,onChange:ke=>C(ke.target.value),style:{width:"100%",padding:"var(--space-2)"},disabled:Ae,children:[t.jsx("option",{value:"",children:"Select type..."}),Ye.map(ke=>t.jsx("option",{value:ke.consumable_type_id,children:ke.consumable_type_label||`Type ${ke.consumable_type_id}`},ke.consumable_type_id))]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"4px"},children:"Consumable Model"}),t.jsxs("select",{value:$,onChange:ke=>oe(ke.target.value),style:{width:"100%",padding:"var(--space-2)"},disabled:Ae||!fe,children:[t.jsx("option",{value:"",children:"Select model..."}),se.filter(ke=>!he.has(ke.consumable_model_id)).map(ke=>t.jsx("option",{value:ke.consumable_model_id,children:ke.model_name||`Model ${ke.consumable_model_id}`},ke.consumable_model_id))]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"4px"},children:"Qty"}),t.jsx("input",{type:"number",min:"1",value:ye,onChange:ke=>Me(Number(ke.target.value)),style:{width:"100%",padding:"var(--space-2)"}})]}),t.jsx("button",{onClick:Ue,disabled:!$||(l?!1:re.length===0)||Ae,style:{padding:"var(--space-2) var(--space-3)",border:"none",background:"var(--color-primary)",color:"white",borderRadius:"var(--radius-sm)",cursor:!$||!l&&re.length===0||Ae?"not-allowed":"pointer",opacity:!$||!l&&re.length===0||Ae?.7:1,width:"100%"},title:!$||!l&&re.length===0?"Select a consumable model":void 0,children:"Add to selected"})]})]})]})]})]})},ij=()=>{const{user:r,isSuperuser:l}=fs(),c=It(),[u,m]=d.useState([]),[p,h]=d.useState([]),[y,g]=d.useState(!0),[v,x]=d.useState(""),[j,M]=d.useState(!1),[I,k]=d.useState(null),[H,S]=d.useState(""),[V,se]=d.useState(!1),[N,R]=d.useState([]),[W,K]=d.useState(!1),[Y,he]=d.useState(""),[A,Q]=d.useState(""),[te,re]=d.useState(null),[xe,Ne]=d.useState([]),[le,w]=d.useState(""),[z,X]=d.useState(!1),[F,fe]=d.useState("start_datetime"),[C,$]=d.useState("desc"),oe=d.useMemo(()=>{var G;return l?!0:((G=r==null?void 0:r.roles)==null?void 0:G.some(P=>P.role_code==="maintenance_chief"||P.role_code==="exploitation_chief"))||!1},[l,r]);d.useMemo(()=>{var G;return((G=r==null?void 0:r.roles)==null?void 0:G.some(P=>P.role_code==="maintenance_technician"))||!1},[r]),d.useEffect(()=>{ye(),oe&&(Me(),Ae())},[oe]);const ye=async()=>{try{g(!0);const G=await Qr.getAll();m(G)}catch(G){x("Failed to load maintenances"),console.error(G)}finally{g(!1)}},Me=async()=>{try{const G=await Wn.getAll({role:"maintenance_technician"});h(G)}catch(G){console.error("Failed to load technicians",G)}},Ae=async()=>{try{const G=await As.getAll();R(Array.isArray(G)?G:[])}catch(G){console.error("Failed to load assets",G),R([])}},E=()=>{x(""),he(""),S(""),Q(""),re(null),Ne([]),w(""),K(!0)},ie=G=>{const P=((G==null?void 0:G.room_type_code)||"").toUpperCase(),_e=((G==null?void 0:G.room_type_label)||"").toLowerCase();return P&&["MR","MAINTENANCE","MAINT"].includes(P)?!0:_e.includes("maintenance")},L=async()=>{try{const G=await Is.getAll(),P=(Array.isArray(G)?G:[]).filter(ie);Ne(P)}catch(G){console.error(G),Ne([])}},O=async G=>{var P,_e;if(G.preventDefault(),!Y){x("Please select an asset");return}if(!H){x("Please select a technician");return}se(!0);try{const Te={asset_id:Y,technician_person_id:H,description:A};if(te&&!ie(te)){if(!le){x("Please select the maintenance room to move the asset to"),se(!1);return}Te.destination_room_id=Number(le)}await Qr.createDirect(Te),K(!1),ye()}catch(Te){const T=((_e=(P=Te==null?void 0:Te.response)==null?void 0:P.data)==null?void 0:_e.error)||(Te==null?void 0:Te.message)||"Failed to create maintenance";x(typeof T=="string"?T:"Failed to create maintenance")}finally{se(!1)}},Se=G=>{k(G),S(G.performed_by_person||""),M(!0)},we=async G=>{if(G.preventDefault(),!!I){se(!0);try{await Qr.update(I.maintenance_id,{...I,performed_by_person:H||null}),M(!1),ye()}catch(P){x("Failed to assign technician"),console.error(P)}finally{se(!1)}}},Ke=async G=>{var P,_e;if(window.confirm("Are you sure you want to cancel this maintenance? This will delete it from the database."))try{g(!0),await Qr.delete(G),ye()}catch(Te){const T=((_e=(P=Te==null?void 0:Te.response)==null?void 0:P.data)==null?void 0:_e.error)||(Te==null?void 0:Te.message)||"Failed to cancel maintenance";x(typeof T=="string"?T:"Failed to cancel maintenance")}finally{g(!1)}},Ue=G=>G?new Date(G).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",ze=G=>(G==null?void 0:G.asset_name)||(G==null?void 0:G.stock_item_name)||(G==null?void 0:G.consumable_name)||(G!=null&&G.asset?`Asset ${G.asset}`:G!=null&&G.stock_item?`Stock Item ${G.stock_item}`:G!=null&&G.consumable?`Consumable ${G.consumable}`:"Unknown"),Ye=(G,P)=>{switch(P){case"maintenance_id":return Number((G==null?void 0:G.maintenance_id)??0);case"asset":return(ze(G)||"").toString().toLowerCase();case"description":return((G==null?void 0:G.description)||"").toString().toLowerCase();case"maintenance_status":return((G==null?void 0:G.maintenance_status)||"").toString().toLowerCase();case"start_datetime":{const _e=G!=null&&G.start_datetime?new Date(G.start_datetime).getTime():null;return Number.isFinite(_e)?_e:null}case"end_datetime":{const _e=G!=null&&G.end_datetime?new Date(G.end_datetime).getTime():null;return Number.isFinite(_e)?_e:null}case"performed_by_person_name":return((G==null?void 0:G.performed_by_person_name)||"").toString().toLowerCase();default:return""}},Fe=d.useMemo(()=>{const G=Array.isArray(u)?u:[],P=C==="asc"?1:-1;return[...G].sort((_e,Te)=>{const T=Ye(_e,F),Re=Ye(Te,F);if(T==null&&Re==null)return 0;if(T==null)return 1;if(Re==null)return-1;if(typeof T=="number"&&typeof Re=="number")return T===Re?0:T>Re?P:-P;const ee=String(T),Ie=String(Re),We=ee.localeCompare(Ie);return We===0?0:We*P})},[u,C,F]),ke=G=>{if(F===G){$(P=>P==="asc"?"desc":"asc");return}fe(G),$("asc")},Ee=G=>F!==G?"":C==="asc"?" ":" ";return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",children:[t.jsx("h1",{className:"page-title",children:"Maintenance"}),t.jsx("p",{className:"page-subtitle",children:"Manage maintenance tasks and assignments"})]}),t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsxs("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"nowrap",gap:"0.75rem"},children:[t.jsx("h2",{className:"card-title",style:{margin:0,flex:"1 1 auto",minWidth:0},children:oe?"All Maintenances":"My Maintenances"}),oe&&t.jsx("button",{className:"btn btn-sm btn-primary",onClick:E,style:{width:"auto",whiteSpace:"nowrap",flex:"0 0 auto"},children:"Create Maintenance"})]})}),t.jsx("div",{className:"table-container",children:y?t.jsxs("div",{className:"empty-state",children:[t.jsx("div",{className:"loading-spinner",style:{margin:"0 auto"}}),t.jsx("p",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading maintenances..."})]}):v?t.jsx("div",{className:"empty-state",children:t.jsx("p",{className:"empty-state-title",style:{color:"var(--color-error)"},children:v})}):u.length===0?t.jsx("div",{className:"empty-state",children:t.jsx("h3",{className:"empty-state-title",children:"No maintenances found"})}):t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsxs("th",{style:{cursor:"pointer"},onClick:()=>ke("maintenance_id"),children:["ID",Ee("maintenance_id")]}),t.jsxs("th",{style:{cursor:"pointer"},onClick:()=>ke("asset"),children:["Asset",Ee("asset")]}),t.jsxs("th",{style:{cursor:"pointer"},onClick:()=>ke("description"),children:["Description",Ee("description")]}),oe&&t.jsxs("th",{style:{cursor:"pointer"},onClick:()=>ke("maintenance_status"),children:["Status",Ee("maintenance_status")]}),t.jsxs("th",{style:{cursor:"pointer"},onClick:()=>ke("start_datetime"),children:["Start Date",Ee("start_datetime")]}),t.jsxs("th",{style:{cursor:"pointer"},onClick:()=>ke("end_datetime"),children:["End Date",Ee("end_datetime")]}),t.jsxs("th",{style:{cursor:"pointer"},onClick:()=>ke("performed_by_person_name"),children:["Technician",Ee("performed_by_person_name")]}),t.jsx("th",{children:"Actions"})]})}),t.jsx("tbody",{children:Fe.map(G=>{var P;return t.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>c(`/dashboard/maintenances/${G.maintenance_id}/steps`),children:[t.jsx("td",{children:G.maintenance_id}),t.jsx("td",{children:ze(G)}),t.jsx("td",{children:G.description}),oe&&t.jsx("td",{children:G.maintenance_status?t.jsx("span",{className:"badge badge-info",children:G.maintenance_status}):t.jsx("span",{className:"badge badge-warning",children:"-"})}),t.jsx("td",{children:Ue(G.start_datetime)}),t.jsx("td",{children:Ue(G.end_datetime)}),t.jsx("td",{children:G.performed_by_person_name?t.jsx("span",{className:"badge badge-info",children:G.performed_by_person_name}):t.jsx("span",{className:"badge badge-warning",children:"Unassigned"})}),t.jsx("td",{children:t.jsxs("div",{className:"d-flex align-items-center",children:[!G.performed_by_person&&oe&&t.jsx("button",{className:"btn btn-sm btn-secondary",onClick:_e=>{_e.stopPropagation(),Se(G)},children:"Assign"}),!G.has_steps&&!G.has_external_maintenances&&(l||oe||G.performed_by_person===((P=r==null?void 0:r.person)==null?void 0:P.person_id))&&t.jsx("button",{className:"btn btn-sm btn-danger ml-2",onClick:_e=>{_e.stopPropagation(),Ke(G.maintenance_id)},style:{marginLeft:"0.5rem"},children:"Cancel maintenance"})]})})]},G.maintenance_id)})})]})})]}),j&&t.jsx("div",{className:"modal-overlay",onClick:()=>M(!1),children:t.jsxs("div",{className:"modal",onClick:G=>G.stopPropagation(),children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Assign Technician"}),t.jsx("button",{className:"modal-close",onClick:()=>M(!1),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsxs("form",{onSubmit:we,children:[t.jsxs("div",{className:"modal-body",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Maintenance Task"}),t.jsxs("div",{className:"form-input",style:{backgroundColor:"#f5f5f5"},children:[(I==null?void 0:I.description)||"No description","(",I==null?void 0:I.asset_name,")"]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"technician",className:"form-label",children:"Technician"}),t.jsxs("select",{id:"technician",className:"form-input",value:H,onChange:G=>S(G.target.value),children:[t.jsx("option",{value:"",children:"-- Select Technician --"}),p.map(G=>t.jsxs("option",{value:G.person_id,children:[G.first_name," ",G.last_name]},G.person_id))]})]})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>M(!1),children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:V,children:V?"Saving...":"Save Assignment"})]})]})]})}),W&&t.jsx("div",{className:"modal-overlay",onClick:()=>!V&&K(!1),children:t.jsxs("div",{className:"modal",onClick:G=>G.stopPropagation(),style:{maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Create Maintenance"}),t.jsx("button",{className:"modal-close",onClick:()=>!V&&K(!1),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsxs("form",{onSubmit:O,style:{display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"modal-body",style:{overflowY:"auto",flex:1,minHeight:0},children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"asset",className:"form-label",children:"Asset"}),t.jsxs("select",{id:"asset",className:"form-input",value:Y,onChange:async G=>{const P=G.target.value;if(he(P),re(null),w(""),!!P)try{X(!0);const _e=await As.getCurrentRoom(P),Te=(_e==null?void 0:_e.room)||null;re(Te),Te&&!ie(Te)&&await L()}catch(_e){console.error(_e),re(null)}finally{X(!1)}},children:[t.jsx("option",{value:"",children:"-- Select Asset --"}),N.map(G=>t.jsx("option",{value:G.asset_id,children:G.asset_name?`${G.asset_name} (#${G.asset_id})`:`Asset #${G.asset_id}`},G.asset_id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Asset Current Room"}),t.jsx("div",{className:"form-input",style:{backgroundColor:"var(--color-bg-secondary)",color:"var(--color-text-primary)"},children:z?"Loading...":te?`${te.room_name}${te.room_type_label?` (${te.room_type_label})`:""}`:"-"})]}),te&&!ie(te)&&t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Move asset to maintenance room"}),t.jsxs("select",{className:"form-input",value:le,onChange:G=>w(G.target.value),children:[t.jsx("option",{value:"",children:"-- Select Maintenance Room --"}),xe.map(G=>t.jsxs("option",{value:G.room_id,children:[G.room_name,G.room_type_label?` (${G.room_type_label})`:""]},G.room_id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"technician_create",className:"form-label",children:"Technician"}),t.jsxs("select",{id:"technician_create",className:"form-input",value:H,onChange:G=>S(G.target.value),children:[t.jsx("option",{value:"",children:"-- Select Technician --"}),p.map(G=>t.jsxs("option",{value:G.person_id,children:[G.first_name," ",G.last_name]},G.person_id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"description_create",className:"form-label",children:"Description"}),t.jsx("textarea",{id:"description_create",className:"form-input",rows:4,value:A,onChange:G=>Q(G.target.value)})]})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>!V&&K(!1),children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:V,children:V?"Creating...":"Create"})]})]})]})})]})},cj=()=>{var Ta,qs,Ia;const r=It(),l=Ha(),[c]=Ms(),u=c.get("typeId"),m=c.get("modelId"),p=l.pathname.endsWith("/instances"),[h,y]=d.useState([]),[g,v]=d.useState([]),[x,j]=d.useState([]),[M,I]=d.useState([]),[k,H]=d.useState([]),[S,V]=d.useState([]),[se,N]=d.useState([]),[R,W]=d.useState([]),[K,Y]=d.useState([]),[he,A]=d.useState([]),[Q,te]=d.useState(!1),[re,xe]=d.useState(null),[Ne,le]=d.useState(!1),[w,z]=d.useState(null),[X,F]=d.useState(null),[fe,C]=d.useState(""),[$,oe]=d.useState(""),[ye,Me]=d.useState(!1),[Ae,E]=d.useState(!1),[ie,L]=d.useState(null),[O,Se]=d.useState(null),[we,Ke]=d.useState({person:"",start_datetime:"",condition_on_assignment:"Good"}),[Ue,ze]=d.useState(!1),[Ye,Fe]=d.useState(!1),[ke,Ee]=d.useState(!1),[G,P]=d.useState(null),[_e,Te]=d.useState({stock_item_attribute_definition:"",is_mandatory:!1,default_value:""}),[T,Re]=d.useState({stock_item_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[ee,Ie]=d.useState(!1),[We,Qt]=d.useState(!1),[lt,$t]=d.useState(!1),[Qe,ba]=d.useState(null),[Ze,Rt]=d.useState(null),[De,bt]=d.useState({stock_item_type_label:"",stock_item_type_code:""}),[qe,_a]=d.useState({model_name:"",model_code:"",stock_item_brand:"",stock_item_type:"",release_year:"",discontinued_year:"",is_active:!0,notes:"",warranty_expiry_in_months:""}),[pt,Yt]=d.useState({stock_item_name:"",stock_item_inventory_number:"",stock_item_status:"active",stock_item_warranty_expiry_in_months:"",stock_item_name_in_administrative_certificate:"",destruction_certificate_id:"",maintenance_step_id:null}),[ra,la]=d.useState(null),[rt,jt]=d.useState(!1);d.useEffect(()=>{Wt(),Mt(),Ra(),ja(),Na(),Kt()},[]),d.useEffect(()=>{p&&(!u||!m)&&r("/dashboard/stock-items/types",{replace:!0})},[p,u,m,r]);const ja=async()=>{try{const ae=await Is.getAll();N(Array.isArray(ae)?ae:[])}catch(ae){console.error("Failed to fetch rooms:",ae),N([])}},Na=async()=>{try{const ae=await Wn.getAll();H(Array.isArray(ae)?ae:[])}catch(ae){console.error("Failed to fetch persons:",ae),H([])}},Kt=async()=>{try{const ae=await Xd.getAll();V(Array.isArray(ae)?ae:[])}catch(ae){console.error("Failed to fetch stock item assignments:",ae),V([])}};d.useEffect(()=>{(async()=>{if(!(!Ne||!w))try{const be=await Wr.getCurrentRoom(w.stock_item_id),Le=(be==null?void 0:be.room_id)??null;F(Le);const Ge=se.find(Dt=>Dt.room_id===Le);C((Ge==null?void 0:Ge.room_name)||(Le?`Room ${Le}`:"Unknown"))}catch(be){console.error(be),F(null),C("Unknown")}})()},[Ne,w,se]),d.useEffect(()=>{Qe?(St(Qe.stock_item_type_id),ss(Qe.stock_item_type_id),Rt(null),P(null),I([]),A([])):(j([]),Y([]))},[Qe]),d.useEffect(()=>{if(!p||!u||!Array.isArray(h)||h.length===0)return;const ae=h.find(be=>String(be.stock_item_type_id)===String(u))||null;ae&&(Qe==null?void 0:Qe.stock_item_type_id)!==ae.stock_item_type_id&&ba(ae)},[p,u,h,Qe]),d.useEffect(()=>{Ze?Pt(Ze.stock_item_model_id):(I([]),P(null),A([]))},[Ze]),d.useEffect(()=>{if(!p||!m||!Array.isArray(x)||x.length===0)return;const ae=x.find(be=>String(be.stock_item_model_id)===String(m))||null;ae&&(Ze==null?void 0:Ze.stock_item_model_id)!==ae.stock_item_model_id&&Rt(ae)},[p,m,x,Ze]);const Wt=async()=>{te(!0),xe(null);try{const ae=await Qs.getAll();y(Array.isArray(ae)?ae:[])}catch(ae){xe("Failed to fetch stock item types: "+ae.message),y([])}finally{te(!1)}},Mt=async()=>{try{const ae=await xy.getAll();v(Array.isArray(ae)?ae:[])}catch(ae){console.error("Failed to fetch stock item brands:",ae),v([])}},St=async ae=>{try{const be=await Pa.getByStockItemType(ae);j(Array.isArray(be)?be:[])}catch(be){xe("Failed to fetch stock item models: "+be.message),j([])}};d.useEffect(()=>{G?Ba(G.stock_item_id):A([])},[G]);const hs=d.useMemo(()=>{const ae=new Map;return R.forEach(be=>{ae.set(be.stock_item_attribute_definition_id,be)}),ae},[R]),Pt=async ae=>{try{const be=await Wr.getAll({stock_item_model:ae});I(Array.isArray(be)?be:[])}catch(be){xe("Failed to fetch stock items: "+be.message),I([])}},Ra=async()=>{try{const ae=await mr.getAll();W(Array.isArray(ae)?ae:[])}catch(ae){xe("Failed to fetch stock item attribute definitions: "+ae.message),W([])}},ss=async ae=>{try{const be=await pr.getByStockItemType(ae);Y(Array.isArray(be)?be:[])}catch(be){xe("Failed to fetch stock item type attributes: "+be.message),Y([])}},Ba=async ae=>{try{const be=await Vd.getByStockItem(ae);A(Array.isArray(be)?be:[])}catch(be){xe("Failed to fetch stock item attributes: "+be.message),A([])}},pa=ae=>{const{name:be,value:Le}=ae.target;bt(Ge=>({...Ge,[be]:Le}))},Tt=ae=>{const{name:be,value:Le,type:Ge,checked:Dt}=ae.target;_a(ea=>({...ea,[be]:Ge==="checkbox"?Dt:Le}))},ft=ae=>{const{name:be,value:Le}=ae.target;Yt(Ge=>({...Ge,[be]:Le}))},vt=ae=>{const{name:be,value:Le,type:Ge,checked:Dt}=ae.target;Re(ea=>({...ea,[be]:Ge==="checkbox"?Dt:Le}))},Xt=async ae=>{var be,Le;ae.preventDefault(),jt(!0),xe(null);try{await Qs.create(De),bt({stock_item_type_label:"",stock_item_type_code:""}),Ie(!1),await Wt()}catch(Ge){xe("Failed to create stock item type: "+(((Le=(be=Ge.response)==null?void 0:be.data)==null?void 0:Le.error)||Ge.message))}finally{jt(!1)}},$a=ae=>{P(ae),Ee(!0)},Da=()=>{Ee(!1),Fe(!1)},Ya=async ae=>{var be,Le;if(ae.preventDefault(),!Qe){xe("Please select a stock item type first");return}jt(!0),xe(null);try{const Ge={...qe,stock_item_brand:qe.stock_item_brand?Number(qe.stock_item_brand):null,stock_item_type:Qe.stock_item_type_id,release_year:qe.release_year?Number(qe.release_year):null,discontinued_year:qe.discontinued_year?Number(qe.discontinued_year):null,warranty_expiry_in_months:qe.warranty_expiry_in_months?Number(qe.warranty_expiry_in_months):null};await Pa.create(Ge),_a({model_name:"",model_code:"",stock_item_brand:"",stock_item_type:"",release_year:"",discontinued_year:"",is_active:!0,notes:"",warranty_expiry_in_months:""}),Qt(!1),await St(Qe.stock_item_type_id)}catch(Ge){xe("Failed to create stock item model: "+(((Le=(be=Ge.response)==null?void 0:be.data)==null?void 0:Le.error)||Ge.message))}finally{jt(!1)}},Ma=async ae=>{if(window.confirm("Are you sure you want to delete this stock item model?"))try{await Pa.delete(ae),(Ze==null?void 0:Ze.stock_item_model_id)===ae&&Rt(null),Qe&&await St(Qe.stock_item_type_id)}catch(be){xe("Failed to delete stock item model: "+be.message)}},fa=async ae=>{var be;ae.preventDefault(),jt(!0),xe(null);try{const Le={...pt,stock_item_model:Ze.stock_item_model_id,destruction_certificate_id:pt.destruction_certificate_id?Number(pt.destruction_certificate_id):null};ra?await Wr.update(ra,Le):await Wr.create(Le),Yt({stock_item_name:"",stock_item_inventory_number:"",stock_item_status:"active",stock_item_warranty_expiry_in_months:"",stock_item_name_in_administrative_certificate:"",destruction_certificate_id:"",maintenance_step_id:null}),la(null),$t(!1),await Pt(Ze.stock_item_model_id)}catch(Le){const Ge=(be=Le.response)!=null&&be.data?typeof Le.response.data=="object"?JSON.stringify(Le.response.data):Le.response.data:Le.message;xe(`Failed to ${ra?"update":"create"} stock item: `+Ge)}finally{jt(!1)}},Gt=ae=>{la(ae.stock_item_id),Yt({stock_item_name:ae.stock_item_name||"",stock_item_inventory_number:ae.stock_item_inventory_number||"",stock_item_status:ae.stock_item_status||"active",stock_item_warranty_expiry_in_months:ae.stock_item_warranty_expiry_in_months||"",stock_item_name_in_administrative_certificate:ae.stock_item_name_in_administrative_certificate||"",destruction_certificate_id:ae.destruction_certificate_id??"",maintenance_step_id:ae.maintenance_step_id||null}),$t(!0)},Ut=async ae=>{if(ae.preventDefault(),!G){xe("Please select a stock item first");return}if(!T.stock_item_attribute_definition){xe("Please select an attribute definition");return}jt(!0),xe(null);try{const be={stock_item:G.stock_item_id,stock_item_attribute_definition:Number(T.stock_item_attribute_definition),value_string:T.value_string||null,value_number:T.value_number?Number(T.value_number):null,value_bool:T.value_bool,value_date:T.value_date||null};await Vd.create(be),Re({stock_item_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),Fe(!1),await Ba(G.stock_item_id)}catch(be){xe("Failed to add stock item attribute value: "+be.message)}finally{jt(!1)}},Bt=async(ae,be)=>{if(window.confirm("Remove this attribute value from the stock item?"))try{await Vd.delete(ae,be),G&&await Ba(G.stock_item_id)}catch(Le){xe("Failed to remove stock item attribute: "+Le.message)}},va=async ae=>{if(window.confirm("Are you sure you want to delete this stock item type?"))try{await Qs.delete(ae),(Qe==null?void 0:Qe.stock_item_type_id)===ae&&ba(null),await Wt()}catch(be){xe("Failed to delete stock item type: "+be.message)}},oa=async ae=>{if(window.confirm("Are you sure you want to delete this stock item?"))try{await Wr.delete(ae),Ze&&await Pt(Ze.stock_item_model_id)}catch(be){xe("Failed to delete stock item: "+be.message)}},ht=ae=>{const{name:be,value:Le}=ae.target;Ke(Ge=>({...Ge,[be]:Le}))},Oa=async ae=>{var be,Le;if(ae.preventDefault(),!!ie){jt(!0),xe(null);try{await Xd.create({person:we.person,stock_item:ie.stock_item_id,start_datetime:new Date(we.start_datetime).toISOString(),condition_on_assignment:we.condition_on_assignment}),E(!1),L(null),await Kt(),alert("Stock item assigned successfully!")}catch(Ge){xe("Failed to assign stock item: "+(((Le=(be=Ge.response)==null?void 0:be.data)==null?void 0:Le.error)||Ge.message))}finally{jt(!1)}}},ns=async ae=>{var be,Le;jt(!0),xe(null);try{await Xd.discharge(ae),Se(null),await Kt(),alert("Stock item discharged successfully!")}catch(Ge){xe("Failed to discharge stock item: "+(((Le=(be=Ge.response)==null?void 0:be.data)==null?void 0:Le.error)||Ge.message))}finally{jt(!1)}},Vt=Fa.getUser(),Sa=Vt==null?void 0:Vt.is_superuser,Wa=((Ta=Vt==null?void 0:Vt.roles)==null?void 0:Ta.some(ae=>ae.role_code==="stock_consumable_responsible"))||Sa,ys=((qs=Vt==null?void 0:Vt.roles)==null?void 0:qs.some(ae=>ae.role_code==="exploitation_chief"))||Sa,Ts=Wa,Zs=Wa||ys,rs=d.useMemo(()=>{const ae=new Map;return S.forEach(be=>{var Le;be.is_active&&ae.set(((Le=be.stock_item)==null?void 0:Le.stock_item_id)??be.stock_item,be)}),ae},[S]),La=ae=>{z(ae),F(null),C(""),oe(""),le(!0)},ha=()=>{le(!1),z(null),F(null),C(""),oe("")},zt=async ae=>{var be,Le;if(ae.preventDefault(),!(!w||!$)){Me(!0),xe(null);try{await Wr.move(w.stock_item_id,{destination_room_id:$}),Ze&&await Pt(Ze.stock_item_model_id),ha()}catch(Ge){xe("Failed to move stock item: "+(((Le=(be=Ge==null?void 0:Ge.response)==null?void 0:be.data)==null?void 0:Le.error)||Ge.message))}finally{Me(!1)}}};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsx("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("h1",{className:"page-title",children:"Stock Items Explorer"}),t.jsx("p",{className:"page-subtitle",children:"Manage stock item types, models, and inventory"})]}),p&&t.jsx("button",{type:"button",onClick:()=>{r(u?`/dashboard/stock-items/models?typeId=${u}`:"/dashboard/stock-items/types")},style:{padding:"var(--space-2) var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer",height:"fit-content"},title:"Back","aria-label":"Back",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})]})}),re&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:re}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:p?"1fr":"300px 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[!p&&t.jsxs("div",{className:"card",style:{display:"flex",flexDirection:"column",overflow:"hidden",height:"100%"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Library"}),t.jsx("button",{onClick:()=>Ie(!ee),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Stock Item Type",children:"+"})]}),ee&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:Xt,children:[t.jsx("input",{type:"text",name:"stock_item_type_label",value:De.stock_item_type_label,onChange:pa,placeholder:"Type Name",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsx("input",{type:"text",name:"stock_item_type_code",value:De.stock_item_type_code,onChange:pa,placeholder:"Code (e.g. CBL)",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:rt,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>Ie(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[h.map(ae=>t.jsxs("div",{children:[t.jsxs("div",{onClick:()=>ba((Qe==null?void 0:Qe.stock_item_type_id)===ae.stock_item_type_id?null:ae),style:{padding:"var(--space-3) var(--space-4)",cursor:"pointer",backgroundColor:(Qe==null?void 0:Qe.stock_item_type_id)===ae.stock_item_type_id?"var(--color-bg-secondary)":"transparent",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsx("span",{style:{fontWeight:"500"},children:ae.stock_item_type_label}),t.jsx("button",{onClick:be=>{be.stopPropagation(),va(ae.stock_item_type_id)},style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]}),(Qe==null?void 0:Qe.stock_item_type_id)===ae.stock_item_type_id&&t.jsxs("div",{style:{backgroundColor:"var(--color-bg-secondary)",borderBottom:"1px solid var(--color-border)"},children:[t.jsx("div",{onClick:()=>Qt(!0),style:{padding:"var(--space-2) var(--space-4)",fontSize:"var(--font-size-xs)",color:"var(--color-primary)",cursor:"pointer",borderBottom:"1px dashed var(--color-border)",textAlign:"center"},children:"+ Add Model"}),x.map(be=>t.jsxs("div",{onClick:()=>Rt(be),style:{padding:"var(--space-2) var(--space-4)",paddingLeft:"var(--space-8)",cursor:"pointer",backgroundColor:(Ze==null?void 0:Ze.stock_item_model_id)===be.stock_item_model_id?"var(--color-primary)":"transparent",color:(Ze==null?void 0:Ze.stock_item_model_id)===be.stock_item_model_id?"white":"var(--color-text)",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"var(--font-size-sm)"},children:[t.jsx("span",{children:be.model_name}),(Ze==null?void 0:Ze.stock_item_model_id)===be.stock_item_model_id&&t.jsx("button",{onClick:Le=>{Le.stopPropagation(),Ma(be.stock_item_model_id)},style:{border:"none",background:"none",color:"white",cursor:"pointer",opacity:.8},children:""})]},be.stock_item_model_id))]})]},ae.stock_item_type_id)),h.length===0&&!Q&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No stock item types."})]})]}),t.jsx("div",{className:"card",style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:We?t.jsxs("div",{style:{padding:"var(--space-6)",overflowY:"auto"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-6)"},children:[t.jsxs("h2",{children:["Add New Model for ",Qe==null?void 0:Qe.stock_item_type_label]}),t.jsx("button",{onClick:()=>Qt(!1),style:{padding:"var(--space-2) var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]}),g.length===0?t.jsx("div",{style:{color:"#c33",backgroundColor:"#fee",padding:"var(--space-4)",borderRadius:"var(--radius-sm)"},children:"No stock item brands found. Please create a brand first."}):t.jsxs("form",{onSubmit:Ya,style:{maxWidth:"600px"},children:[t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Brand *"}),t.jsxs("select",{name:"stock_item_brand",value:qe.stock_item_brand,onChange:Tt,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"},children:[t.jsx("option",{value:"",children:"Select a brand..."}),g.map(ae=>t.jsx("option",{value:ae.stock_item_brand_id,children:ae.brand_name},ae.stock_item_brand_id))]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Model Name *"}),t.jsx("input",{type:"text",name:"model_name",value:qe.model_name,onChange:Tt,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Model Code *"}),t.jsx("input",{type:"text",name:"model_code",value:qe.model_code,onChange:Tt,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Release Year"}),t.jsx("input",{type:"number",name:"release_year",value:qe.release_year,onChange:Tt,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Warranty (Months)"}),t.jsx("input",{type:"number",name:"warranty_expiry_in_months",value:qe.warranty_expiry_in_months,onChange:Tt,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]})]}),t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Notes"}),t.jsx("textarea",{name:"notes",value:qe.notes,onChange:Tt,rows:"3",style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),t.jsx("div",{style:{marginBottom:"var(--space-6)"},children:t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",name:"is_active",checked:qe.is_active,onChange:Tt}),"Active Model"]})}),t.jsx("button",{type:"submit",disabled:rt,style:{padding:"var(--space-2) var(--space-6)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:rt?"Creating...":"Create Model"})]})]}):Ze?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsxs("h2",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",margin:0},children:[Ze.model_name," ",t.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-md)",fontWeight:"normal"},children:["(",Ze.model_code,")"]})]}),t.jsxs("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)",marginTop:"var(--space-1)"},children:[Ze.brand_name,"  ",M.length," Items"]})]}),t.jsx("button",{onClick:()=>{la(null),Yt({stock_item_name:"",stock_item_inventory_number:"",stock_item_status:"active",stock_item_warranty_expiry_in_months:"",stock_item_name_in_administrative_certificate:"",destruction_certificate_id:0,maintenance_step_id:null}),$t(!0)},style:{backgroundColor:"var(--color-primary)",color:"white",border:"none",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:"pointer",fontWeight:"500"},children:"+ Add Item"})]}),t.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"var(--space-4)"},children:[lt&&t.jsxs("div",{style:{marginBottom:"var(--space-6)",padding:"var(--space-4)",backgroundColor:"var(--color-bg-secondary)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"},children:[t.jsx("div",{style:{fontWeight:"600",marginBottom:"var(--space-4)"},children:ra?"Edit Stock Item":"New Stock Item"}),t.jsxs("form",{onSubmit:fa,children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Name"}),t.jsx("input",{type:"text",name:"stock_item_name",value:pt.stock_item_name,onChange:ft,placeholder:"Stock Item Name",style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Status"}),t.jsxs("select",{name:"stock_item_status",value:pt.stock_item_status,onChange:ft,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"},children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"}),t.jsx("option",{value:"maintenance",children:"Maintenance"}),t.jsx("option",{value:"retired",children:"Retired"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Inventory Number"}),t.jsx("input",{type:"text",name:"stock_item_inventory_number",value:pt.stock_item_inventory_number,onChange:ft,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Warranty (Months)"}),t.jsx("input",{type:"number",name:"stock_item_warranty_expiry_in_months",value:pt.stock_item_warranty_expiry_in_months,onChange:ft,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]})]}),t.jsxs("div",{style:{marginTop:"var(--space-4)",display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",style:{padding:"var(--space-2) var(--space-4)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Save Item"}),t.jsx("button",{type:"button",onClick:()=>$t(!1),style:{padding:"var(--space-2) var(--space-4)",backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})]})]}),M.length===0?t.jsx("div",{style:{textAlign:"center",color:"var(--color-text-secondary)",padding:"var(--space-8)"},children:"No stock items found for this model."}):t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"var(--font-size-sm)"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{borderBottom:"2px solid var(--color-border)",textAlign:"left"},children:[t.jsx("th",{style:{padding:"var(--space-2)"},children:"Name"}),t.jsx("th",{style:{padding:"var(--space-2)"},children:"Inventory No."}),t.jsx("th",{style:{padding:"var(--space-2)"},children:"Status"}),t.jsx("th",{style:{padding:"var(--space-2)",textAlign:"right"},children:"Actions"})]})}),t.jsx("tbody",{children:M.map(ae=>t.jsxs("tr",{onClick:()=>$a(ae),style:{borderBottom:"1px solid var(--color-border)",cursor:"pointer",backgroundColor:(G==null?void 0:G.stock_item_id)===ae.stock_item_id?"var(--color-bg-secondary)":"transparent"},children:[t.jsx("td",{style:{padding:"var(--space-3) var(--space-2)"},children:t.jsx("div",{style:{fontWeight:"500"},children:ae.stock_item_name||"Unnamed Item"})}),t.jsx("td",{style:{padding:"var(--space-3) var(--space-2)"},children:t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:ae.stock_item_inventory_number})}),t.jsx("td",{style:{padding:"var(--space-3) var(--space-2)"},children:t.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"var(--font-size-xs)",backgroundColor:ae.stock_item_status==="active"?"rgba(16, 185, 129, 0.15)":"var(--color-bg-secondary)",color:ae.stock_item_status==="active"?"var(--color-success)":"var(--color-text-secondary)"},children:ae.stock_item_status})}),t.jsxs("td",{style:{padding:"var(--space-3) var(--space-2)",textAlign:"right"},children:[t.jsx("button",{onClick:be=>{be.stopPropagation(),$a(ae)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-text-secondary)",cursor:"pointer",fontWeight:"500"},children:"Attributes"}),Ts&&t.jsx("button",{onClick:be=>{be.stopPropagation(),La(ae)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-primary)",cursor:"pointer",fontWeight:"500"},children:"Move"}),Zs&&(()=>{const be=rs.get(ae.stock_item_id);return be?t.jsx("button",{onClick:Le=>{Le.stopPropagation(),Se(be)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontWeight:"500"},children:"Discharge"}):t.jsx("button",{onClick:Le=>{Le.stopPropagation(),L(ae);const Ge=new Date,Dt=Ge.getTimezoneOffset()*6e4,ea=new Date(Ge-Dt).toISOString().slice(0,16);Ke({person:"",start_datetime:ea,condition_on_assignment:ae.stock_item_status==="active"?"Good":"Needs Repair"}),E(!0)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"#10b981",cursor:"pointer",fontWeight:"500"},children:"Assign"})})(),t.jsx("button",{onClick:be=>{be.stopPropagation(),Gt(ae)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-primary)",cursor:"pointer",fontWeight:"500"},children:"Edit"}),t.jsx("button",{onClick:be=>{be.stopPropagation(),oa(ae.stock_item_id)},style:{background:"none",border:"none",color:"#c33",cursor:"pointer",fontWeight:"500"},children:"Delete"})]})]},ae.stock_item_id))})]})]})]}):Qe?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:t.jsx("div",{children:t.jsx("h2",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",margin:0},children:Qe.stock_item_type_label})})}),t.jsx("div",{style:{flex:1,overflowY:"auto",padding:"var(--space-4)"},children:t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"var(--space-4)"}})})]}):t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--color-text-secondary)"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"var(--space-4)",opacity:.2},children:""}),t.jsx("p",{children:"Select a stock item model from the sidebar to view inventory."})]})})]}),ke&&G&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"var(--space-4)"},children:t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"720px",maxHeight:"85vh",overflowY:"auto",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,marginBottom:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:G.stock_item_name||`Item ${G.stock_item_id}`}),t.jsxs("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)",marginTop:"var(--space-1)"},children:["Inventory: ",G.stock_item_inventory_number||"","  Status: ",G.stock_item_status||""]})]}),t.jsx("button",{type:"button",onClick:Da,style:{border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",cursor:"pointer"},children:"Close"})]}),t.jsx("div",{style:{marginBottom:"var(--space-6)",padding:"var(--space-4)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",background:"var(--color-bg-secondary)"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:2},children:"Warranty (months)"}),t.jsx("div",{style:{fontWeight:600},children:G.stock_item_warranty_expiry_in_months??""})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:2},children:"Assigned to"}),(()=>{const ae=rs.get(G.stock_item_id);return t.jsx("div",{style:{fontWeight:600},children:(ae==null?void 0:ae.person_name)||""})})()]})]})}),t.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[t.jsx("div",{style:{fontWeight:"600"},children:"Stock Item Attributes"}),t.jsx("button",{onClick:()=>Fe(!Ye),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add Value"})]}),Ye&&t.jsxs("form",{onSubmit:Ut,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"stock_item_attribute_definition",value:T.stock_item_attribute_definition,onChange:vt,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),R.map(ae=>t.jsx("option",{value:ae.stock_item_attribute_definition_id,children:ae.description||`Attribute ${ae.stock_item_attribute_definition_id}`},ae.stock_item_attribute_definition_id))]}),(()=>{var Le;const ae=hs.get(Number(T.stock_item_attribute_definition)),be=(Le=ae==null?void 0:ae.data_type)==null?void 0:Le.toLowerCase();return be==="number"?t.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:T.value_number,onChange:vt,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):be==="bool"||be==="boolean"?t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"value_bool",checked:T.value_bool,onChange:vt}),"True"]}):be==="date"?t.jsx("input",{type:"date",name:"value_date",value:T.value_date,onChange:vt,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):t.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:T.value_string,onChange:vt,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:rt,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>Fe(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),he.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attribute values set for this stock item."}):he.map(ae=>{const be=ae.definition||hs.get(ae.stock_item_attribute_definition),Le=ae.value_string??ae.value_number??ae.value_bool??ae.value_date??"";return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(be==null?void 0:be.description)||`Attribute ${ae.stock_item_attribute_definition}`}),t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:Le===""?"No value":String(Le)})]}),t.jsx("button",{onClick:()=>Bt(ae.stock_item,ae.stock_item_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${ae.stock_item}-${ae.stock_item_attribute_definition}`)})]})]})}),Ne&&w&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"520px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,marginBottom:"var(--space-4)"},children:[t.jsxs("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:["Move Stock Item: ",w.stock_item_name||`Item ${w.stock_item_id}`]}),t.jsx("button",{type:"button",onClick:()=>!ye&&ha(),style:{border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",cursor:"pointer"},children:"Close"})]}),t.jsxs("form",{onSubmit:zt,children:[t.jsxs("div",{style:{marginBottom:"var(--space-6)"},children:[t.jsxs("div",{style:{marginBottom:"var(--space-3)",padding:"var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"2px"},children:"Current room"}),t.jsx("div",{style:{fontWeight:600},children:fe||"Unknown"})]}),t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Destination room"}),t.jsxs("select",{value:$,onChange:ae=>oe(ae.target.value),required:!0,disabled:ye,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[t.jsx("option",{value:"",children:"Select a room..."}),se.map(ae=>t.jsx("option",{value:ae.room_id,children:ae.room_name||`Room ${ae.room_id}`},ae.room_id))]})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[t.jsx("button",{type:"button",onClick:()=>!ye&&ha(),style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"}),t.jsx("button",{type:"submit",disabled:ye||!$,style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:ye?"Moving...":"Move"})]})]})]})}),Ae&&ie&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"520px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[t.jsxs("h2",{style:{marginBottom:"var(--space-4)"},children:["Assign Stock Item: ",ie.stock_item_name||`Item ${ie.stock_item_id}`]}),t.jsxs("form",{onSubmit:Oa,children:[t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Assign to Person"}),t.jsxs("select",{name:"person",value:we.person,onChange:ht,required:!0,disabled:rt,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[t.jsx("option",{value:"",children:"Select a person..."}),k.map(ae=>t.jsxs("option",{value:ae.person_id,children:[ae.first_name," ",ae.last_name," (",ae.person_id,")"]},ae.person_id))]})]}),t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Start Date (Automatic)"}),t.jsx("input",{type:"datetime-local",name:"start_datetime",value:we.start_datetime,onChange:ht,required:!0,readOnly:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-secondary)",cursor:"not-allowed",color:"var(--color-text)"}})]}),t.jsxs("div",{style:{marginBottom:"var(--space-6)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Condition"}),t.jsx("input",{type:"text",name:"condition_on_assignment",value:we.condition_on_assignment,onChange:ht,placeholder:"e.g. Good, New",required:!0,disabled:rt,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[t.jsx("button",{type:"button",onClick:()=>{E(!1),L(null)},style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer",color:"var(--color-text)"},children:"Cancel"}),t.jsx("button",{type:"submit",disabled:rt,style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:rt?"Assigning...":"Assign Stock Item"})]})]})]})}),O&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"420px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[t.jsx("h2",{style:{marginBottom:"var(--space-4)"},children:"Confirm Discharge"}),t.jsxs("p",{style:{marginBottom:"var(--space-6)"},children:["Are you sure you want to end the assignment of ",t.jsx("strong",{children:((Ia=O.stock_item)==null?void 0:Ia.stock_item_name)||"Stock Item"})," to person ",t.jsx("strong",{children:O.person}),"?",t.jsx("br",{}),t.jsx("br",{}),"The end date will be set to right now."]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[t.jsx("button",{type:"button",onClick:()=>Se(null),style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer",color:"var(--color-text)"},children:"Cancel"}),t.jsx("button",{type:"button",onClick:()=>ns(O.assignment_id),disabled:rt,style:{padding:"var(--space-2) var(--space-4)",background:"#ef4444",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:rt?"Discharging...":"Confirm Discharge"})]})]})})]})},dj=()=>{const r=It(),[l,c]=d.useState([]),[u,m]=d.useState([]),[p,h]=d.useState(null),[y,g]=d.useState([]),[v,x]=d.useState(!1),[j,M]=d.useState(!1),[I,k]=d.useState(null),[H,S]=d.useState(!1),[V,se]=d.useState(!1),[N,R]=d.useState(!1),[W,K]=d.useState({stock_item_type_label:"",stock_item_type_code:""}),[Y,he]=d.useState({description:"",data_type:"",unit:""}),[A,Q]=d.useState(!1),[te,re]=d.useState({stock_item_attribute_definition:"",is_mandatory:!1,default_value:""});d.useEffect(()=>{xe(),X()},[]);const xe=async()=>{M(!0),k(null);try{const E=await Qs.getAll();c(Array.isArray(E)?E:[])}catch(E){k("Failed to fetch stock item types: "+E.message),c([])}finally{M(!1)}},Ne=async E=>{x(!0),k(null);try{const ie=await pr.getByStockItemType(E);g(Array.isArray(ie)?ie:[])}catch(ie){k("Failed to fetch type attributes: "+ie.message),g([])}finally{x(!1)}},le=E=>{const{name:ie,value:L,type:O,checked:Se}=E.target;re(we=>({...we,[ie]:O==="checkbox"?Se:L}))},w=async E=>{if(E.preventDefault(),!p){k("Please select a stock item type first");return}if(!te.stock_item_attribute_definition){k("Please select an attribute definition");return}R(!0),k(null);try{const ie={stock_item_type:p.stock_item_type_id,stock_item_attribute_definition:Number(te.stock_item_attribute_definition),is_mandatory:!!te.is_mandatory,default_value:te.default_value||null};await pr.create(ie),re({stock_item_attribute_definition:"",is_mandatory:!1,default_value:""}),Q(!1),await Ne(p.stock_item_type_id)}catch(ie){k("Failed to add type attribute: "+ie.message)}finally{R(!1)}},z=async E=>{if(p&&window.confirm("Remove this attribute from the stock item type?"))try{await pr.delete(p.stock_item_type_id,E),await Ne(p.stock_item_type_id)}catch(ie){k("Failed to remove type attribute: "+ie.message)}},X=async()=>{try{const E=await mr.getAll();m(Array.isArray(E)?E:[])}catch(E){k("Failed to fetch stock item attribute definitions: "+E.message),m([])}},F=E=>{const{name:ie,value:L}=E.target;K(O=>({...O,[ie]:L}))},fe=async E=>{var ie,L;E.preventDefault(),R(!0),k(null);try{await Qs.create(W),K({stock_item_type_label:"",stock_item_type_code:""}),S(!1),await xe()}catch(O){k("Failed to create stock item type: "+(((L=(ie=O.response)==null?void 0:ie.data)==null?void 0:L.error)||O.message))}finally{R(!1)}},C=async E=>{if(window.confirm("Are you sure you want to delete this stock item type?"))try{await Qs.delete(E),await xe()}catch(ie){k("Failed to delete stock item type: "+ie.message)}},$=E=>{r(`/dashboard/stock-items/models?typeId=${E.stock_item_type_id}`)},oe=async E=>{h(E),Q(!1),re({stock_item_attribute_definition:"",is_mandatory:!1,default_value:""}),await Ne(E.stock_item_type_id)},ye=new Set((Array.isArray(y)?y:[]).map(E=>E.stock_item_attribute_definition)),Me=(Array.isArray(u)?u:[]).filter(E=>!ye.has(E.stock_item_attribute_definition_id)),Ae=()=>{r("/dashboard/stock-items/attribute-definitions")};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Stock Items"}),t.jsx("p",{className:"page-subtitle",children:"Select a stock item type"})]}),I&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:I}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Types"}),t.jsx("button",{onClick:()=>S(!H),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Stock Item Type",children:"+"})]}),H&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:fe,children:[t.jsx("input",{type:"text",name:"stock_item_type_label",value:W.stock_item_type_label,onChange:F,placeholder:"Type Name",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsx("input",{type:"text",name:"stock_item_type_code",value:W.stock_item_type_code,onChange:F,placeholder:"Code (e.g. CBL)",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:N,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>S(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[l.map(E=>t.jsxs("div",{onClick:()=>$(E),style:{padding:"var(--space-3) var(--space-4)",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsx("span",{style:{fontWeight:"500"},children:E.stock_item_type_label}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("button",{onClick:ie=>{ie.stopPropagation(),oe(E)},style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Attributes"}),t.jsx("button",{onClick:ie=>{ie.stopPropagation(),C(E.stock_item_type_id)},style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]})]},E.stock_item_type_id)),l.length===0&&!j&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No stock item types."})]})]}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsxs("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:["Type Attributes ",p?` ${p.stock_item_type_label}`:""]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{onClick:()=>Q(E=>!E),disabled:!p,style:{border:"none",background:"none",color:"var(--color-primary)",cursor:p?"pointer":"not-allowed",opacity:p?1:.6},children:"+ Add"}),t.jsx("button",{onClick:Ae,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Manage"})]})]}),t.jsx("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:p?t.jsxs(t.Fragment,{children:[A&&t.jsxs("form",{onSubmit:w,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"stock_item_attribute_definition",value:te.stock_item_attribute_definition,onChange:le,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),Me.map(E=>t.jsx("option",{value:E.stock_item_attribute_definition_id,children:E.description||`Attribute ${E.stock_item_attribute_definition_id}`},E.stock_item_attribute_definition_id))]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"is_mandatory",checked:te.is_mandatory,onChange:le}),"Mandatory"]}),t.jsx("input",{type:"text",name:"default_value",placeholder:"Default value (optional)",value:te.default_value,onChange:le,style:{padding:"var(--space-2)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:N,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>Q(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),v&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!v&&y.length===0&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned to this type."}),!v&&y.map(E=>{const ie=E.definition||u.find(L=>L.stock_item_attribute_definition_id===E.stock_item_attribute_definition);return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(ie==null?void 0:ie.description)||`Attribute ${E.stock_item_attribute_definition}`}),t.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[(ie==null?void 0:ie.data_type)||"n/a",ie!=null&&ie.unit?`  ${ie.unit}`:"",E.is_mandatory?"  mandatory":"",E.default_value?`  default: ${E.default_value}`:""]})]}),t.jsx("button",{onClick:()=>z(E.stock_item_attribute_definition),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},`${E.stock_item_type}-${E.stock_item_attribute_definition}`)})]}):t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:'Click "Attributes" on a type to view its attributes.'})})]})]})]})},uj=()=>{const r=It(),l=Ha(),u=d.useMemo(()=>new URLSearchParams(l.search),[l.search]).get("typeId"),[m,p]=d.useState(null),[h,y]=d.useState([]),[g,v]=d.useState([]),[x,j]=d.useState(!1),[M,I]=d.useState(null),[k,H]=d.useState(!1),[S,V]=d.useState(!1),[se,N]=d.useState({stock_item_attribute_definition:"",is_mandatory:!1,default_value:""});d.useEffect(()=>{if(!u){I("typeId is required");return}R()},[u]);const R=async()=>{j(!0),I(null);try{const[Q,te,re]=await Promise.all([Qs.getById(u),mr.getAll(),pr.getByStockItemType(u)]);p(Q),v(Array.isArray(te)?te:[]),y(Array.isArray(re)?re:[])}catch(Q){I("Failed to load type attributes: "+Q.message)}finally{j(!1)}},W=Q=>{const{name:te,value:re,type:xe,checked:Ne}=Q.target;N(le=>({...le,[te]:xe==="checkbox"?Ne:re}))},K=async Q=>{if(Q.preventDefault(),!se.stock_item_attribute_definition){I("Please select an attribute definition");return}V(!0),I(null);try{const te={stock_item_type:Number(u),stock_item_attribute_definition:Number(se.stock_item_attribute_definition),is_mandatory:se.is_mandatory,default_value:se.default_value||null};await pr.create(te),N({stock_item_attribute_definition:"",is_mandatory:!1,default_value:""}),H(!1),await R()}catch(te){I("Failed to add attribute to type: "+te.message)}finally{V(!1)}},Y=async Q=>{if(window.confirm("Remove this attribute from the stock item type?"))try{await pr.delete(Number(u),Number(Q)),await R()}catch(te){I("Failed to remove type attribute: "+te.message)}},he=d.useMemo(()=>new Set(h.map(Q=>Q.stock_item_attribute_definition)),[h]),A=d.useMemo(()=>g.filter(Q=>!he.has(Q.stock_item_attribute_definition_id)),[g,he]);return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"flex-end",gap:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("h1",{className:"page-title",children:"Stock Item Type Attributes"}),t.jsxs("p",{className:"page-subtitle",children:[m?m.stock_item_type_label:"Type","  Manage attributes"]})]}),t.jsx("button",{onClick:()=>r("/dashboard/stock-items/types"),style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back to Types","aria-label":"Back to Types",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})]}),M&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:M}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Attributes"}),t.jsx("button",{onClick:()=>H(!k),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add"})]}),k&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:K,children:[t.jsxs("select",{name:"stock_item_attribute_definition",value:se.stock_item_attribute_definition,onChange:W,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition"}),A.map(Q=>t.jsxs("option",{value:Q.stock_item_attribute_definition_id,children:[Q.description," (",Q.data_type||"n/a",Q.unit?`  ${Q.unit}`:"",")"]},Q.stock_item_attribute_definition_id))]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"is_mandatory",checked:se.is_mandatory,onChange:W}),"Mandatory"]}),t.jsx("input",{type:"text",name:"default_value",placeholder:"Default value (optional)",value:se.default_value,onChange:W,style:{padding:"var(--space-2)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:S,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>H(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:[x&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!x&&h.length===0&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned to this type."}),h.map(Q=>{var te,re,xe;return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:((te=Q.definition)==null?void 0:te.description)||`Definition ${Q.stock_item_attribute_definition}`}),t.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[((re=Q.definition)==null?void 0:re.data_type)||"n/a",(xe=Q.definition)!=null&&xe.unit?`  ${Q.definition.unit}`:"",Q.is_mandatory?"  mandatory":"",Q.default_value?`  default: ${Q.default_value}`:""]})]}),t.jsx("button",{onClick:()=>Y(Q.stock_item_attribute_definition),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},Q.stock_item_attribute_definition)})]})]})]})},mj=()=>{const r=It(),[l]=Ms(),c=l.get("typeId"),[u,m]=d.useState(null),[p,h]=d.useState([]),[y,g]=d.useState(null),[v,x]=d.useState([]),[j,M]=d.useState([]),[I,k]=d.useState([]),[H,S]=d.useState(!1),[V,se]=d.useState(!1),[N,R]=d.useState({stock_item_brand:"",model_name:"",model_code:""}),[W,K]=d.useState(!1),[Y,he]=d.useState({stock_item_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[A,Q]=d.useState(!1),[te,re]=d.useState(null),[xe,Ne]=d.useState(!1);d.useEffect(()=>{c&&le(c)},[c]),d.useEffect(()=>{w(),z()},[]),d.useEffect(()=>{if(!y){k([]),K(!1),he({stock_item_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""});return}X(y.stock_item_model_id)},[y]);const le=async L=>{Q(!0),re(null);try{const[O,Se]=await Promise.all([Qs.getAll(),Pa.getByStockItemType(L)]),Ke=(Array.isArray(O)?O:[]).find(Ue=>String(Ue.stock_item_type_id)===String(L))||null;m(Ke),h(Array.isArray(Se)?Se:[]),g(null)}catch(O){re("Failed to fetch stock item models: "+O.message),m(null),h([]),g(null)}finally{Q(!1)}},w=async()=>{try{const L=await mr.getAll();M(Array.isArray(L)?L:[])}catch{M([])}},z=async()=>{try{const L=await xy.getAll();x(Array.isArray(L)?L:[])}catch{x([])}},X=async L=>{try{const O=await Gd.getByStockItemModel(L);k(Array.isArray(O)?O:[])}catch(O){re("Failed to fetch stock item model attributes: "+O.message),k([])}},F=L=>{const{name:O,value:Se,type:we,checked:Ke}=L.target;he(Ue=>({...Ue,[O]:we==="checkbox"?Ke:Se}))},fe=L=>{const{name:O,value:Se}=L.target;R(we=>({...we,[O]:Se}))},C=async L=>{var O,Se;if(L.preventDefault(),!!c){if(!N.stock_item_brand){re("Please select a brand");return}se(!0),re(null);try{const we={stock_item_type:Number(c),stock_item_brand:Number(N.stock_item_brand),model_name:N.model_name||null,model_code:N.model_code||null};await Pa.create(we),R({stock_item_brand:"",model_name:"",model_code:""}),S(!1),await le(c)}catch(we){re("Failed to create stock item model: "+(((Se=(O=we.response)==null?void 0:O.data)==null?void 0:Se.error)||we.message))}finally{se(!1)}}},$=async L=>{if(L.preventDefault(),!y){re("Please select a stock item model first");return}if(!Y.stock_item_attribute_definition){re("Please select an attribute definition");return}Ne(!0),re(null);try{const O={stock_item_model:y.stock_item_model_id,stock_item_attribute_definition:Number(Y.stock_item_attribute_definition),value_string:Y.value_string||null,value_number:Y.value_number?Number(Y.value_number):null,value_bool:Y.value_bool,value_date:Y.value_date||null};await Gd.create(O),he({stock_item_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),K(!1),await X(y.stock_item_model_id)}catch(O){re("Failed to add model attribute value: "+O.message)}finally{Ne(!1)}},oe=async(L,O)=>{if(window.confirm("Remove this attribute value from the stock item model?"))try{await Gd.delete(L,O),y&&await X(y.stock_item_model_id)}catch(Se){re("Failed to remove stock item model attribute: "+Se.message)}},ye=d.useMemo(()=>{const L=new Map;return(Array.isArray(j)?j:[]).forEach(O=>{L.set(O.stock_item_attribute_definition_id,O)}),L},[j]),Me=d.useMemo(()=>{if(!y)return j;const L=new Set((Array.isArray(I)?I:[]).map(O=>O.stock_item_attribute_definition));return(Array.isArray(j)?j:[]).filter(O=>!L.has(O.stock_item_attribute_definition_id))},[y,j,I]),Ae=()=>{r("/dashboard/stock-items/types")},E=L=>{r(`/dashboard/stock-items/instances?typeId=${c}&modelId=${L.stock_item_model_id}`)},ie=L=>{r(`/dashboard/stock-items/models/${L.stock_item_model_id}/compatibility?typeId=${c}`)};return c?t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Stock Items"}),t.jsxs("p",{className:"page-subtitle",children:["Select a model",u!=null&&u.stock_item_type_label?` for ${u.stock_item_type_label}`:""]})]}),te&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:te}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsxs("div",{style:{display:"flex",gap:"var(--space-3)",alignItems:"center"},children:[t.jsx("button",{onClick:Ae,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})}),t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Models"})]}),t.jsx("button",{onClick:()=>S(L=>!L),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Model",children:"+"})]}),H&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:C,children:[t.jsxs("select",{name:"stock_item_brand",value:N.stock_item_brand,onChange:fe,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select brand..."}),v.map(L=>t.jsx("option",{value:L.stock_item_brand_id,children:L.brand_name},L.stock_item_brand_id))]}),t.jsx("input",{type:"text",name:"model_name",value:N.model_name,onChange:fe,placeholder:"Model Name",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsx("input",{type:"text",name:"model_code",value:N.model_code,onChange:fe,placeholder:"Model Code",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:V,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>S(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[p.map(L=>t.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[t.jsx("span",{style:{fontWeight:"500"},children:L.model_name}),t.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:L.model_code})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{onClick:()=>g(L),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:(y==null?void 0:y.stock_item_model_id)===L.stock_item_model_id?"var(--color-bg-secondary)":"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Attributes"}),t.jsx("button",{onClick:()=>ie(L),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Compatibility"}),t.jsx("button",{onClick:()=>E(L),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Instances"})]})]},L.stock_item_model_id)),p.length===0&&!A&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No models."})]})]}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsxs("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:["Model Attributes ",y?` ${y.model_name}`:""]}),t.jsx("button",{onClick:()=>K(L=>!L),disabled:!y,style:{border:"none",background:"none",color:"var(--color-primary)",cursor:y?"pointer":"not-allowed",opacity:y?1:.6},children:"+ Add Value"})]}),t.jsx("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:y?t.jsxs(t.Fragment,{children:[W&&t.jsxs("form",{onSubmit:$,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"stock_item_attribute_definition",value:Y.stock_item_attribute_definition,onChange:F,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),Me.map(L=>t.jsx("option",{value:L.stock_item_attribute_definition_id,children:L.description||`Attribute ${L.stock_item_attribute_definition_id}`},L.stock_item_attribute_definition_id))]}),(()=>{var Se;const L=ye.get(Number(Y.stock_item_attribute_definition)),O=(Se=L==null?void 0:L.data_type)==null?void 0:Se.toLowerCase();return O==="number"?t.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:Y.value_number,onChange:F,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):O==="bool"||O==="boolean"?t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"value_bool",checked:Y.value_bool,onChange:F}),"True"]}):O==="date"?t.jsx("input",{type:"date",name:"value_date",value:Y.value_date,onChange:F,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):t.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:Y.value_string,onChange:F,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:xe,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>K(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),I.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No model attribute values."}):I.map(L=>{const O=L.definition||ye.get(L.stock_item_attribute_definition),Se=L.value_string??L.value_number??L.value_bool??L.value_date??"";return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(O==null?void 0:O.description)||`Attribute ${L.stock_item_attribute_definition}`}),t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:Se===""?"No value":String(Se)})]}),t.jsx("button",{onClick:()=>oe(L.stock_item_model,L.stock_item_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${L.stock_item_model}-${L.stock_item_attribute_definition}`)})]}):t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Select a model to view or add values."})})]})]})]}):t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Stock Items"}),t.jsx("p",{className:"page-subtitle",children:"Select a type first"})]}),t.jsx("div",{className:"card",style:{padding:"var(--space-6)"},children:t.jsx("button",{onClick:Ae,style:{padding:"var(--space-2) var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer",width:"fit-content"},title:"Back to types","aria-label":"Back to types",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})})]})},pj=()=>{const r=It(),{modelId:l}=al(),[c]=Ms(),u=c.get("typeId"),[m,p]=d.useState(null),[h,y]=d.useState([]),[g,v]=d.useState([]),[x,j]=d.useState(""),[M,I]=d.useState(!1),[k,H]=d.useState(!1),[S,V]=d.useState(null),se=Fa.isSuperuser(),N=()=>{if(u){r(`/dashboard/stock-items/models?typeId=${u}`);return}r(-1)},R=d.useCallback(async()=>{if(l){H(!0),V(null);try{const[A,Q,te]=await Promise.all([Pa.getById(l),Pa.getCompatibleAssetModels(l),yt.getAll()]);p(A||null),y(Array.isArray(Q)?Q:[]),v(Array.isArray(te)?te:[])}catch(A){V("Failed to fetch compatibility: "+A.message)}finally{H(!1)}}},[l]);d.useEffect(()=>{R()},[R]);const W=d.useMemo(()=>new Set((Array.isArray(h)?h:[]).map(A=>A.asset_model_id)),[h]),K=d.useMemo(()=>(Array.isArray(g)?g:[]).filter(A=>!W.has(A.asset_model_id)),[g,W]),Y=async()=>{if(x){V(null);try{await Pa.addCompatibleAssetModel(l,Number(x)),j(""),I(!1),await R()}catch(A){V("Failed to add compatible asset model: "+A.message)}}},he=async A=>{V(null);try{await Pa.removeCompatibleAssetModel(l,A),await R()}catch(Q){V("Failed to remove compatible asset model: "+Q.message)}};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Stock Items"}),t.jsxs("p",{className:"page-subtitle",children:["Compatibility ",m!=null&&m.model_name?` ${m.model_name}`:""]})]}),S&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:S}),t.jsx("div",{className:"card",style:{padding:"var(--space-4)",marginBottom:"var(--space-4)"},children:t.jsx("button",{onClick:N,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Compatible Asset Models"}),se&&!M&&t.jsx("button",{onClick:()=>I(!0),style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add compatible model"})]}),se&&M&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsxs("select",{value:x,onChange:A=>j(A.target.value),style:{flex:1,padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select asset model..."}),K.map(A=>t.jsx("option",{value:A.asset_model_id,children:A.model_name||`Model ${A.asset_model_id}`},A.asset_model_id))]}),t.jsx("button",{onClick:Y,disabled:!x||k,style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add"}),t.jsx("button",{onClick:()=>{I(!1),j("")},style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[(Array.isArray(h)?h:[]).map(A=>t.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[t.jsx("span",{style:{fontWeight:"500"},children:A.model_name}),t.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:A.model_code})]}),se&&t.jsx("button",{onClick:()=>he(A.asset_model_id),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},A.asset_model_id)),h.length===0&&!k&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No compatible asset models."})]})]})]})},fj=()=>{const[r,l]=d.useState([]),[c,u]=d.useState(!1),[m,p]=d.useState(null),[h,y]=d.useState(!1),[g,v]=d.useState(!1),[x,j]=d.useState({description:"",data_type:"",unit:""});d.useEffect(()=>{M()},[]);const M=async()=>{u(!0),p(null);try{const S=await mr.getAll();l(Array.isArray(S)?S:[])}catch(S){p("Failed to fetch stock item attribute definitions: "+S.message),l([])}finally{u(!1)}},I=S=>{const{name:V,value:se}=S.target;j(N=>({...N,[V]:se}))},k=async S=>{S.preventDefault(),v(!0),p(null);try{const V={description:x.description||null,data_type:x.data_type||null,unit:x.unit||null};await mr.create(V),j({description:"",data_type:"",unit:""}),y(!1),await M()}catch(V){p("Failed to create stock item attribute definition: "+V.message)}finally{v(!1)}},H=async S=>{if(window.confirm("Delete this attribute definition?"))try{await mr.delete(S),await M()}catch(V){p("Failed to delete stock item attribute definition: "+V.message)}};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Stock Item Attribute Definitions"}),t.jsx("p",{className:"page-subtitle",children:"Manage stock item attribute definitions"})]}),m&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:m}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Definitions"}),t.jsx("button",{onClick:()=>y(!h),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add"})]}),h&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:k,children:[t.jsx("input",{type:"text",name:"description",placeholder:"Description",value:x.description,onChange:I,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)"},children:[t.jsxs("select",{name:"data_type",value:x.data_type,onChange:I,style:{padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Data Type"}),t.jsx("option",{value:"string",children:"String"}),t.jsx("option",{value:"number",children:"Number"}),t.jsx("option",{value:"bool",children:"Boolean"}),t.jsx("option",{value:"date",children:"Date"})]}),t.jsx("input",{type:"text",name:"unit",placeholder:"Unit",value:x.unit,onChange:I,style:{padding:"var(--space-2)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:g,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>y(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:[c&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!c&&r.length===0&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attribute definitions."}),r.map(S=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:S.description}),t.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[S.data_type,S.unit?`  ${S.unit}`:""]})]}),t.jsx("button",{onClick:()=>H(S.stock_item_attribute_definition_id),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},S.stock_item_attribute_definition_id))]})]})]})},hj=()=>{var Ua,Js,Fs;const r=It(),l=Ha(),[c]=Ms(),u=c.get("typeId"),m=c.get("modelId"),p=l.pathname.endsWith("/instances"),[h,y]=d.useState([]),[g,v]=d.useState([]),[x,j]=d.useState([]),[M,I]=d.useState([]),[k,H]=d.useState([]),[S,V]=d.useState([]),[se,N]=d.useState([]),[R,W]=d.useState([]),[K,Y]=d.useState([]),[he,A]=d.useState([]),[Q,te]=d.useState([]),[re,xe]=d.useState(!1),[Ne,le]=d.useState(null),[w,z]=d.useState(!1),[X,F]=d.useState(null),[fe,C]=d.useState(null),[$,oe]=d.useState(""),[ye,Me]=d.useState(""),[Ae,E]=d.useState(!1),[ie,L]=d.useState(!1),[O,Se]=d.useState(null),[we,Ke]=d.useState(null),[Ue,ze]=d.useState({person:"",start_datetime:"",condition_on_assignment:"Good"}),[Ye,Fe]=d.useState(!1),[ke,Ee]=d.useState(!1),[G,P]=d.useState(!1),[_e,Te]=d.useState(!1),[T,Re]=d.useState({consumable_attribute_definition:"",is_mandatory:!1,default_value:""}),[ee,Ie]=d.useState({consumable_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[We,Qt]=d.useState({consumable_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[lt,$t]=d.useState(!1),[Qe,ba]=d.useState(!1),[Ze,Rt]=d.useState(!1),[De,bt]=d.useState(null),[qe,_a]=d.useState(null),[pt,Yt]=d.useState(null),[ra,la]=d.useState({consumable_type_label:"",consumable_type_code:""}),[rt,jt]=d.useState({model_name:"",model_code:"",consumable_brand:"",consumable_type:"",release_year:"",discontinued_year:"",is_active:!0,notes:"",warranty_expiry_in_months:""}),[ja,Na]=d.useState({consumable_name:"",consumable_inventory_number:"",consumable_status:"active",consumable_warranty_expiry_in_months:"",consumable_name_in_administrative_certificate:"",destruction_certificate_id:"",maintenance_step_id:null}),[Kt,Wt]=d.useState(null),[Mt,St]=d.useState(!1);d.useEffect(()=>{ss(),Ba(),$a(),hs(),Pt(),Ra()},[]),d.useEffect(()=>{p&&(!u||!m)&&r("/dashboard/consumables/types",{replace:!0})},[p,u,m,r]);const hs=async()=>{try{const D=await Is.getAll();N(Array.isArray(D)?D:[])}catch(D){console.error("Failed to fetch rooms:",D),N([])}},Pt=async()=>{try{const D=await Wn.getAll();H(Array.isArray(D)?D:[])}catch(D){console.error("Failed to fetch persons:",D),H([])}},Ra=async()=>{try{const D=await Zd.getAll();V(Array.isArray(D)?D:[])}catch(D){console.error("Failed to fetch consumable assignments:",D),V([])}};d.useEffect(()=>{(async()=>{if(!(!w||!X))try{const b=await Gr.getCurrentRoom(X.consumable_id),B=(b==null?void 0:b.room_id)??null;C(B);const ve=se.find($e=>$e.room_id===B);oe((ve==null?void 0:ve.room_name)||(B?`Room ${B}`:"Unknown"))}catch(b){console.error(b),C(null),oe("Unknown")}})()},[w,X,se]),d.useEffect(()=>{De?(pa(De.consumable_type_id),Da(De.consumable_type_id),_a(null),I([]),A([]),Yt(null),te([])):(j([]),Y([]),A([]),Yt(null),te([]))},[De]),d.useEffect(()=>{if(!p||!u||!Array.isArray(h)||h.length===0)return;const D=h.find(b=>String(b.consumable_type_id)===String(u))||null;D&&(De==null?void 0:De.consumable_type_id)!==D.consumable_type_id&&bt(D)},[p,u,h,De]),d.useEffect(()=>{qe?(Tt(qe.consumable_model_id),ft(qe.consumable_model_id)):(I([]),A([]),Yt(null),te([]))},[qe]),d.useEffect(()=>{if(!p||!m||!Array.isArray(x)||x.length===0)return;const D=x.find(b=>String(b.consumable_model_id)===String(m))||null;D&&(qe==null?void 0:qe.consumable_model_id)!==D.consumable_model_id&&_a(D)},[p,m,x,qe]),d.useEffect(()=>{pt?vt(pt.consumable_id):te([])},[pt]);const ss=async()=>{xe(!0),le(null);try{const D=await Xs.getAll();y(Array.isArray(D)?D:[])}catch(D){le("Failed to fetch consumable types: "+D.message),y([])}finally{xe(!1)}},Ba=async()=>{try{const D=await _y.getAll();v(Array.isArray(D)?D:[])}catch(D){console.error("Failed to fetch consumable brands:",D),v([])}},pa=async D=>{try{const b=await es.getByConsumableType(D);j(Array.isArray(b)?b:[])}catch(b){le("Failed to fetch consumable models: "+b.message),j([])}},Tt=async D=>{try{const b=await Gr.getAll({consumable_model:D});I(Array.isArray(b)?b:[])}catch(b){le("Failed to fetch consumables: "+b.message),I([])}},ft=async D=>{try{const b=await Jr.getByConsumableModel(D);A(Array.isArray(b)?b:[])}catch(b){le("Failed to fetch model attributes: "+b.message),A([])}},vt=async D=>{try{const b=await Qd.getByConsumable(D);te(Array.isArray(b)?b:[])}catch(b){le("Failed to fetch consumable attributes: "+b.message),te([])}},Xt=d.useMemo(()=>{const D=new Map;return R.forEach(b=>{D.set(b.consumable_attribute_definition_id,b)}),D},[R]),$a=async()=>{try{const D=await fr.getAll();W(Array.isArray(D)?D:[])}catch(D){le("Failed to fetch attribute definitions: "+D.message),W([])}},Da=async D=>{try{const b=await bn.getByConsumableType(D);Y(Array.isArray(b)?b:[])}catch(b){le("Failed to fetch type attributes: "+b.message),Y([])}},Ya=D=>{const{name:b,value:B}=D.target;la(ve=>({...ve,[b]:B}))},Ma=D=>{const{name:b,value:B,type:ve,checked:$e}=D.target;Re(ut=>({...ut,[b]:ve==="checkbox"?$e:B}))},fa=D=>{const{name:b,value:B,type:ve,checked:$e}=D.target;Ie(ut=>({...ut,[b]:ve==="checkbox"?$e:B}))},Gt=D=>{const{name:b,value:B,type:ve,checked:$e}=D.target;Qt(ut=>({...ut,[b]:ve==="checkbox"?$e:B}))},Ut=D=>{const{name:b,value:B,type:ve,checked:$e}=D.target;jt(ut=>({...ut,[b]:ve==="checkbox"?$e:ve==="number"?B?parseInt(B):"":B}))},Bt=D=>{const{name:b,value:B}=D.target;Na(ve=>({...ve,[b]:B}))},va=async D=>{if(D.preventDefault(),!De){le("Please select a consumable type first");return}if(!T.consumable_attribute_definition){le("Please select an attribute definition");return}St(!0),le(null);try{const b={consumable_type:De.consumable_type_id,consumable_attribute_definition:Number(T.consumable_attribute_definition),is_mandatory:T.is_mandatory,default_value:T.default_value||null};await bn.create(b),Re({consumable_attribute_definition:"",is_mandatory:!1,default_value:""}),Fe(!1),await Da(De.consumable_type_id)}catch(b){le("Failed to assign attribute to type: "+b.message)}finally{St(!1)}},oa=async D=>{if(D.preventDefault(),!qe){le("Please select a consumable model first");return}if(!ee.consumable_attribute_definition){le("Please select an attribute definition");return}St(!0),le(null);try{const b={consumable_model:qe.consumable_model_id,consumable_attribute_definition:Number(ee.consumable_attribute_definition),value_string:ee.value_string||null,value_number:ee.value_number?Number(ee.value_number):null,value_bool:ee.value_bool,value_date:ee.value_date||null};await Jr.create(b),Ie({consumable_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),Ee(!1),await ft(qe.consumable_model_id)}catch(b){le("Failed to add model attribute value: "+b.message)}finally{St(!1)}},ht=async D=>{if(D.preventDefault(),!pt){le("Please select a consumable first");return}if(!We.consumable_attribute_definition){le("Please select an attribute definition");return}St(!0),le(null);try{const b={consumable:pt.consumable_id,consumable_attribute_definition:Number(We.consumable_attribute_definition),value_string:We.value_string||null,value_number:We.value_number?Number(We.value_number):null,value_bool:We.value_bool,value_date:We.value_date||null};await Qd.create(b),Qt({consumable_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),P(!1),await vt(pt.consumable_id)}catch(b){le("Failed to add consumable attribute value: "+b.message)}finally{St(!1)}},Oa=async(D,b)=>{if(window.confirm("Remove this attribute from the consumable type?"))try{await bn.delete(D,b),De&&await Da(De.consumable_type_id)}catch(B){le("Failed to remove type attribute: "+B.message)}},ns=async(D,b)=>{if(window.confirm("Remove this attribute value from the consumable model?"))try{await Jr.delete(D,b),qe&&await ft(qe.consumable_model_id)}catch(B){le("Failed to remove model attribute: "+B.message)}},Vt=async(D,b)=>{if(window.confirm("Remove this attribute value from the consumable?"))try{await Qd.delete(D,b),pt&&await vt(pt.consumable_id)}catch(B){le("Failed to remove consumable attribute: "+B.message)}},Sa=D=>{Yt(D),Te(!0)},Wa=()=>{Te(!1),P(!1)},ys=async D=>{var b,B;D.preventDefault(),St(!0),le(null);try{await Xs.create(ra),la({consumable_type_label:"",consumable_type_code:""}),$t(!1),await ss()}catch(ve){le("Failed to create consumable type: "+(((B=(b=ve.response)==null?void 0:b.data)==null?void 0:B.error)||ve.message))}finally{St(!1)}},Ts=async D=>{var b;if(D.preventDefault(),!De){le("Please select a consumable type first");return}if(!rt.consumable_brand){le("Please select a brand");return}St(!0),le(null);try{const B={model_name:rt.model_name,model_code:rt.model_code,consumable_brand:parseInt(rt.consumable_brand),consumable_type:De.consumable_type_id,is_active:rt.is_active,notes:rt.notes||"",release_year:rt.release_year?parseInt(rt.release_year):null,discontinued_year:rt.discontinued_year?parseInt(rt.discontinued_year):null,warranty_expiry_in_months:rt.warranty_expiry_in_months?parseInt(rt.warranty_expiry_in_months):null};await es.create(B),jt({model_name:"",model_code:"",consumable_brand:"",consumable_type:"",release_year:"",discontinued_year:"",is_active:!0,notes:"",warranty_expiry_in_months:""}),ba(!1),await pa(De.consumable_type_id)}catch(B){const ve=(b=B.response)!=null&&b.data?typeof B.response.data=="object"?JSON.stringify(B.response.data):B.response.data:B.message;le("Failed to create consumable model: "+ve)}finally{St(!1)}},Zs=async D=>{var b;if(D.preventDefault(),!qe){le("Please select a consumable model first");return}St(!0),le(null);try{const B={...ja,consumable_model:qe.consumable_model_id,destruction_certificate_id:ja.destruction_certificate_id?Number(ja.destruction_certificate_id):null};Kt?await Gr.update(Kt,B):await Gr.create(B),Na({consumable_name:"",consumable_inventory_number:"",consumable_status:"active",consumable_warranty_expiry_in_months:"",consumable_name_in_administrative_certificate:"",destruction_certificate_id:"",maintenance_step_id:null}),Wt(null),Rt(!1),await Tt(qe.consumable_model_id)}catch(B){const ve=(b=B.response)!=null&&b.data?typeof B.response.data=="object"?JSON.stringify(B.response.data):B.response.data:B.message;le(`Failed to ${Kt?"update":"create"} consumable: `+ve)}finally{St(!1)}},rs=D=>{Wt(D.consumable_id),Na({consumable_name:D.consumable_name||"",consumable_inventory_number:D.consumable_inventory_number||"",consumable_status:D.consumable_status||"active",consumable_warranty_expiry_in_months:D.consumable_warranty_expiry_in_months||"",consumable_name_in_administrative_certificate:D.consumable_name_in_administrative_certificate||"",destruction_certificate_id:D.destruction_certificate_id??"",maintenance_step_id:D.maintenance_step_id||null}),Rt(!0)},La=async D=>{if(window.confirm("Are you sure you want to delete this consumable type?"))try{await Xs.delete(D),(De==null?void 0:De.consumable_type_id)===D&&bt(null),await ss()}catch(b){le("Failed to delete consumable type: "+b.message)}},ha=async D=>{if(window.confirm("Are you sure you want to delete this consumable model?"))try{await es.delete(D),De&&await pa(De.consumable_type_id)}catch(b){le("Failed to delete consumable model: "+b.message)}},zt=async D=>{if(window.confirm("Are you sure you want to delete this consumable?"))try{await Gr.delete(D),qe&&await Tt(qe.consumable_model_id)}catch(b){le("Failed to delete consumable: "+b.message)}},Ta=D=>{const{name:b,value:B}=D.target;ze(ve=>({...ve,[b]:B}))},qs=async D=>{var b,B;if(D.preventDefault(),!!O){St(!0),le(null);try{await Zd.create({person:Ue.person,consumable:O.consumable_id,start_datetime:new Date(Ue.start_datetime).toISOString(),condition_on_assignment:Ue.condition_on_assignment}),L(!1),Se(null),await Ra(),alert("Consumable assigned successfully!")}catch(ve){le("Failed to assign consumable: "+(((B=(b=ve.response)==null?void 0:b.data)==null?void 0:B.error)||ve.message))}finally{St(!1)}}},Ia=async D=>{var b,B;St(!0),le(null);try{await Zd.discharge(D),Ke(null),await Ra(),alert("Consumable discharged successfully!")}catch(ve){le("Failed to discharge consumable: "+(((B=(b=ve.response)==null?void 0:b.data)==null?void 0:B.error)||ve.message))}finally{St(!1)}},ae=Fa.getUser(),be=ae==null?void 0:ae.is_superuser,Le=((Ua=ae==null?void 0:ae.roles)==null?void 0:Ua.some(D=>D.role_code==="stock_consumable_responsible"))||be,Ge=((Js=ae==null?void 0:ae.roles)==null?void 0:Js.some(D=>D.role_code==="exploitation_chief"))||be,Dt=Le,ea=Le||Ge,Es=d.useMemo(()=>{const D=new Map;return S.forEach(b=>{var B;b.is_active&&D.set(((B=b.consumable)==null?void 0:B.consumable_id)??b.consumable,b)}),D},[S]),ga=D=>{F(D),C(null),oe(""),Me(""),z(!0)},Ga=()=>{z(!1),F(null),C(null),oe(""),Me("")},gn=async D=>{var b,B;if(D.preventDefault(),!(!X||!ye)){E(!0),le(null);try{await Gr.move(X.consumable_id,{destination_room_id:ye}),qe&&await Tt(qe.consumable_model_id),Ga()}catch(ve){le("Failed to move consumable: "+(((B=(b=ve==null?void 0:ve.response)==null?void 0:b.data)==null?void 0:B.error)||ve.message))}finally{E(!1)}}};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Consumables Explorer"}),t.jsx("p",{className:"page-subtitle",children:"Manage consumable types, models, and inventory"})]}),Ne&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:Ne}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:p?"1fr":"300px 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[!p&&t.jsxs("div",{className:"card",style:{display:"flex",flexDirection:"column",overflow:"hidden",height:"100%"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Library"}),t.jsx("button",{onClick:()=>$t(!lt),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Consumable Type",children:"+"})]}),lt&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:ys,children:[t.jsx("input",{type:"text",name:"consumable_type_label",value:ra.consumable_type_label,onChange:Ya,placeholder:"Type Name",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsx("input",{type:"text",name:"consumable_type_code",value:ra.consumable_type_code,onChange:Ya,placeholder:"Code (e.g. INK)",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:Mt,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>$t(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[h.map(D=>t.jsxs("div",{children:[t.jsxs("div",{onClick:()=>bt((De==null?void 0:De.consumable_type_id)===D.consumable_type_id?null:D),style:{padding:"var(--space-3) var(--space-4)",cursor:"pointer",backgroundColor:(De==null?void 0:De.consumable_type_id)===D.consumable_type_id?"var(--color-bg-secondary)":"transparent",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsx("span",{style:{fontWeight:"500"},children:D.consumable_type_label}),t.jsx("button",{onClick:b=>{b.stopPropagation(),La(D.consumable_type_id)},style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]}),(De==null?void 0:De.consumable_type_id)===D.consumable_type_id&&t.jsxs("div",{style:{backgroundColor:"var(--color-bg-secondary)",borderBottom:"1px solid var(--color-border)"},children:[t.jsx("div",{onClick:()=>ba(!0),style:{padding:"var(--space-2) var(--space-4)",fontSize:"var(--font-size-xs)",color:"var(--color-primary)",cursor:"pointer",borderBottom:"1px dashed var(--color-border)",textAlign:"center"},children:"+ Add Model"}),x.map(b=>t.jsxs("div",{onClick:()=>_a(b),style:{padding:"var(--space-2) var(--space-4)",paddingLeft:"var(--space-8)",cursor:"pointer",backgroundColor:(qe==null?void 0:qe.consumable_model_id)===b.consumable_model_id?"var(--color-primary)":"transparent",color:(qe==null?void 0:qe.consumable_model_id)===b.consumable_model_id?"white":"var(--color-text)",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"var(--font-size-sm)"},children:[t.jsx("span",{children:b.model_name}),(qe==null?void 0:qe.consumable_model_id)===b.consumable_model_id&&t.jsx("button",{onClick:B=>{B.stopPropagation(),ha(b.consumable_model_id)},style:{border:"none",background:"none",color:"white",cursor:"pointer",opacity:.8},children:""})]},b.consumable_model_id))]})]},D.consumable_type_id)),h.length===0&&!re&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No consumable types."})]})]}),t.jsx("div",{className:"card",style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:Qe?t.jsxs("div",{style:{padding:"var(--space-6)",overflowY:"auto"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-6)"},children:[t.jsxs("h2",{children:["Add New Model for ",De==null?void 0:De.consumable_type_label]}),t.jsx("button",{onClick:()=>ba(!1),style:{padding:"var(--space-2) var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]}),g.length===0?t.jsx("div",{style:{color:"#c33",backgroundColor:"#fee",padding:"var(--space-4)",borderRadius:"var(--radius-sm)"},children:"No consumable brands found. Please create a brand first."}):t.jsxs("form",{onSubmit:Ts,style:{maxWidth:"600px"},children:[t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Brand *"}),t.jsxs("select",{name:"consumable_brand",value:rt.consumable_brand,onChange:Ut,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"},children:[t.jsx("option",{value:"",children:"Select a brand..."}),g.map(D=>t.jsx("option",{value:D.consumable_brand_id,children:D.brand_name},D.consumable_brand_id))]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Model Name *"}),t.jsx("input",{type:"text",name:"model_name",value:rt.model_name,onChange:Ut,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Model Code *"}),t.jsx("input",{type:"text",name:"model_code",value:rt.model_code,onChange:Ut,required:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Release Year"}),t.jsx("input",{type:"number",name:"release_year",value:rt.release_year,onChange:Ut,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Warranty (Months)"}),t.jsx("input",{type:"number",name:"warranty_expiry_in_months",value:rt.warranty_expiry_in_months,onChange:Ut,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]})]}),t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:"500"},children:"Notes"}),t.jsx("textarea",{name:"notes",value:rt.notes,onChange:Ut,rows:"3",style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),t.jsx("div",{style:{marginBottom:"var(--space-6)"},children:t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",name:"is_active",checked:rt.is_active,onChange:Ut}),"Active Model"]})}),t.jsx("button",{type:"submit",disabled:Mt,style:{padding:"var(--space-2) var(--space-6)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:Mt?"Creating...":"Create Model"})]})]}):qe?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsxs("h2",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",margin:0},children:[qe.model_name," ",t.jsxs("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-md)",fontWeight:"normal"},children:["(",qe.model_code,")"]})]}),t.jsxs("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)",marginTop:"var(--space-1)"},children:[qe.brand_name,"  ",M.length," Items"]})]}),t.jsx("button",{onClick:()=>{Wt(null),Na({consumable_name:"",consumable_inventory_number:"",consumable_status:"active",consumable_warranty_expiry_in_months:"",consumable_name_in_administrative_certificate:"",destruction_certificate_id:0,maintenance_step_id:null}),Rt(!0)},style:{backgroundColor:"var(--color-primary)",color:"white",border:"none",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:"pointer",fontWeight:"500"},children:"+ Add Item"})]}),t.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"var(--space-4)"},children:[!p&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"var(--space-4)",marginBottom:"var(--space-6)"},children:t.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[t.jsx("div",{style:{fontWeight:"600"},children:"Consumable Type Attributes"}),t.jsx("button",{onClick:()=>Fe(!Ye),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Assign"})]}),Ye&&t.jsxs("form",{onSubmit:va,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"consumable_attribute_definition",value:T.consumable_attribute_definition,onChange:Ma,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),R.map(D=>t.jsx("option",{value:D.consumable_attribute_definition_id,children:D.description||`Attribute ${D.consumable_attribute_definition_id}`},D.consumable_attribute_definition_id))]}),t.jsx("input",{type:"text",name:"default_value",placeholder:"Default value",value:T.default_value,onChange:Ma,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"is_mandatory",checked:T.is_mandatory,onChange:Ma}),"Mandatory"]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:Mt,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>Fe(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),t.jsx("div",{style:{maxHeight:"240px",overflowY:"auto"},children:K.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned."}):K.map(D=>{const b=D.definition||Xt.get(D.consumable_attribute_definition);return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(b==null?void 0:b.description)||`Attribute ${D.consumable_attribute_definition}`}),t.jsxs("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:[(b==null?void 0:b.data_type)||"type",b!=null&&b.unit?`  ${b.unit}`:"",D.is_mandatory?"  mandatory":"",D.default_value?`  default: ${D.default_value}`:""]})]}),t.jsx("button",{onClick:()=>Oa(D.consumable_type,D.consumable_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${D.consumable_type}-${D.consumable_attribute_definition}`)})})]})}),t.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)",marginBottom:"var(--space-6)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[t.jsx("div",{style:{fontWeight:"600"},children:"Consumable Model Attributes"}),t.jsx("button",{onClick:()=>Ee(!ke),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add Value"})]}),ke&&t.jsxs("form",{onSubmit:oa,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"consumable_attribute_definition",value:ee.consumable_attribute_definition,onChange:fa,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),R.map(D=>t.jsx("option",{value:D.consumable_attribute_definition_id,children:D.description||`Attribute ${D.consumable_attribute_definition_id}`},D.consumable_attribute_definition_id))]}),(()=>{var B;const D=Xt.get(Number(ee.consumable_attribute_definition)),b=(B=D==null?void 0:D.data_type)==null?void 0:B.toLowerCase();return b==="number"?t.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:ee.value_number,onChange:fa,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):b==="bool"||b==="boolean"?t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"value_bool",checked:ee.value_bool,onChange:fa}),"True"]}):b==="date"?t.jsx("input",{type:"date",name:"value_date",value:ee.value_date,onChange:fa,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):t.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:ee.value_string,onChange:fa,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:Mt,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>Ee(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),he.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No model attribute values."}):he.map(D=>{const b=D.definition||Xt.get(D.consumable_attribute_definition),B=D.value_string??D.value_number??D.value_bool??D.value_date??"";return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(b==null?void 0:b.description)||`Attribute ${D.consumable_attribute_definition}`}),t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:B===""?"No value":String(B)})]}),t.jsx("button",{onClick:()=>ns(D.consumable_model,D.consumable_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${D.consumable_model}-${D.consumable_attribute_definition}`)})]})]}),Ze&&t.jsxs("div",{style:{marginBottom:"var(--space-6)",padding:"var(--space-4)",backgroundColor:"var(--color-bg-secondary)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"},children:[t.jsx("div",{style:{fontWeight:"600",marginBottom:"var(--space-4)"},children:Kt?"Edit Consumable":"New Consumable"}),t.jsxs("form",{onSubmit:Zs,children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Name"}),t.jsx("input",{type:"text",name:"consumable_name",value:ja.consumable_name,onChange:Bt,placeholder:"Consumable Name",style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Status"}),t.jsxs("select",{name:"consumable_status",value:ja.consumable_status,onChange:Bt,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"},children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"}),t.jsx("option",{value:"maintenance",children:"Maintenance"}),t.jsx("option",{value:"retired",children:"Retired"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Inventory Number"}),t.jsx("input",{type:"text",name:"consumable_inventory_number",value:ja.consumable_inventory_number,onChange:Bt,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:"var(--font-size-xs)",marginBottom:"var(--space-1)"},children:"Warranty (Months)"}),t.jsx("input",{type:"number",name:"consumable_warranty_expiry_in_months",value:ja.consumable_warranty_expiry_in_months,onChange:Bt,style:{width:"100%",padding:"var(--space-2)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)"}})]})]}),t.jsxs("div",{style:{marginTop:"var(--space-4)",display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",style:{padding:"var(--space-2) var(--space-4)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Save Item"}),t.jsx("button",{type:"button",onClick:()=>Rt(!1),style:{padding:"var(--space-2) var(--space-4)",backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})]})]}),M.length===0?t.jsx("div",{style:{textAlign:"center",color:"var(--color-text-secondary)",padding:"var(--space-8)"},children:"No consumables found for this model."}):t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"var(--font-size-sm)"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{borderBottom:"2px solid var(--color-border)",textAlign:"left"},children:[t.jsx("th",{style:{padding:"var(--space-2)"},children:"Name"}),t.jsx("th",{style:{padding:"var(--space-2)"},children:"Inventory No."}),t.jsx("th",{style:{padding:"var(--space-2)"},children:"Status"}),t.jsx("th",{style:{padding:"var(--space-2)",textAlign:"right"},children:"Actions"})]})}),t.jsx("tbody",{children:M.map(D=>t.jsxs("tr",{style:{borderBottom:"1px solid var(--color-border)",cursor:"pointer"},onClick:()=>Sa(D),children:[t.jsx("td",{style:{padding:"var(--space-3) var(--space-2)"},children:t.jsx("div",{style:{fontWeight:"500"},children:D.consumable_name||"Unnamed Item"})}),t.jsx("td",{style:{padding:"var(--space-3) var(--space-2)"},children:t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:D.consumable_inventory_number})}),t.jsx("td",{style:{padding:"var(--space-3) var(--space-2)"},children:t.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"var(--font-size-xs)",backgroundColor:D.consumable_status==="active"?"rgba(16, 185, 129, 0.15)":"var(--color-bg-secondary)",color:D.consumable_status==="active"?"var(--color-success)":"var(--color-text-secondary)"},children:D.consumable_status})}),t.jsxs("td",{style:{padding:"var(--space-3) var(--space-2)",textAlign:"right"},children:[t.jsx("button",{onClick:b=>{b.stopPropagation(),Sa(D)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-text-secondary)",cursor:"pointer",fontWeight:"500"},children:"Attributes"}),t.jsx("button",{onClick:b=>{b.stopPropagation(),rs(D)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-primary)",cursor:"pointer",fontWeight:"500"},children:"Edit"}),Dt&&t.jsx("button",{onClick:b=>{b.stopPropagation(),ga(D)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"var(--color-primary)",cursor:"pointer",fontWeight:"500"},children:"Move"}),ea&&(()=>{const b=Es.get(D.consumable_id);return b?t.jsx("button",{onClick:B=>{B.stopPropagation(),Ke(b)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontWeight:"500"},children:"Discharge"}):t.jsx("button",{onClick:B=>{B.stopPropagation(),Se(D);const ve=new Date,$e=ve.getTimezoneOffset()*6e4,ut=new Date(ve-$e).toISOString().slice(0,16);ze({person:"",start_datetime:ut,condition_on_assignment:D.consumable_status==="active"?"Good":"Needs Repair"}),L(!0)},style:{marginRight:"var(--space-2)",background:"none",border:"none",color:"#10b981",cursor:"pointer",fontWeight:"500"},children:"Assign"})})(),t.jsx("button",{onClick:b=>{b.stopPropagation(),zt(D.consumable_id)},style:{background:"none",border:"none",color:"#c33",cursor:"pointer",fontWeight:"500"},children:"Delete"})]})]},D.consumable_id))})]})]})]}):De?t.jsx("div",{style:{flex:1,overflowY:"auto",padding:"var(--space-4)"},children:t.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"var(--space-4)"},children:!p&&t.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[t.jsx("div",{style:{fontWeight:"600"},children:"Consumable Type Attributes"}),t.jsx("button",{onClick:()=>Fe(!Ye),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Assign"})]}),Ye&&t.jsxs("form",{onSubmit:va,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"consumable_attribute_definition",value:T.consumable_attribute_definition,onChange:Ma,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),R.map(D=>t.jsx("option",{value:D.consumable_attribute_definition_id,children:D.description||`Attribute ${D.consumable_attribute_definition_id}`},D.consumable_attribute_definition_id))]}),t.jsx("input",{type:"text",name:"default_value",placeholder:"Default value",value:T.default_value,onChange:Ma,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"is_mandatory",checked:T.is_mandatory,onChange:Ma}),"Mandatory"]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:Mt,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>Fe(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),t.jsx("div",{style:{maxHeight:"240px",overflowY:"auto"},children:K.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned."}):K.map(D=>{const b=D.definition||Xt.get(D.consumable_attribute_definition);return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(b==null?void 0:b.description)||`Attribute ${D.consumable_attribute_definition}`}),t.jsxs("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:[(b==null?void 0:b.data_type)||"type",b!=null&&b.unit?`  ${b.unit}`:"",D.is_mandatory?"  mandatory":"",D.default_value?`  default: ${D.default_value}`:""]})]}),t.jsx("button",{onClick:()=>Oa(D.consumable_type,D.consumable_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${D.consumable_type}-${D.consumable_attribute_definition}`)})})]})})}):t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--color-text-secondary)"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"var(--space-4)",opacity:.2},children:""}),t.jsx("p",{children:"Select a consumable model from the sidebar to view inventory."})]})})]}),w&&X&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"520px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,marginBottom:"var(--space-4)"},children:[t.jsxs("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:["Move Consumable: ",X.consumable_name||`Consumable ${X.consumable_id}`]}),t.jsx("button",{type:"button",onClick:()=>!Ae&&Ga(),style:{border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",cursor:"pointer"},children:"Close"})]}),t.jsxs("form",{onSubmit:gn,children:[t.jsxs("div",{style:{marginBottom:"var(--space-6)"},children:[t.jsxs("div",{style:{marginBottom:"var(--space-3)",padding:"var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",marginBottom:"2px"},children:"Current room"}),t.jsx("div",{style:{fontWeight:600},children:$||"Unknown"})]}),t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Destination room"}),t.jsxs("select",{value:ye,onChange:D=>Me(D.target.value),required:!0,disabled:Ae,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[t.jsx("option",{value:"",children:"Select a room..."}),se.map(D=>t.jsx("option",{value:D.room_id,children:D.room_name||`Room ${D.room_id}`},D.room_id))]})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[t.jsx("button",{type:"button",onClick:()=>!Ae&&Ga(),style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"}),t.jsx("button",{type:"submit",disabled:Ae||!ye,style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:Ae?"Moving...":"Move"})]})]})]})}),_e&&pt&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"var(--space-4)"},children:t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"900px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12,marginBottom:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:pt.consumable_name||`Consumable ${pt.consumable_id}`}),t.jsxs("div",{style:{marginTop:6,color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:["ID: ",pt.consumable_id,pt.consumable_inventory_number?`  Inv: ${pt.consumable_inventory_number}`:""]})]}),t.jsx("button",{type:"button",onClick:Wa,style:{border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",padding:"6px 10px",cursor:"pointer"},children:"Close"})]}),t.jsxs("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",padding:"var(--space-4)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-3)"},children:[t.jsx("div",{style:{fontWeight:"600"},children:"Consumable Attributes"}),t.jsx("button",{onClick:()=>P(!G),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add Value"})]}),G&&t.jsxs("form",{onSubmit:ht,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"consumable_attribute_definition",value:We.consumable_attribute_definition,onChange:Gt,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),R.map(D=>t.jsx("option",{value:D.consumable_attribute_definition_id,children:D.description||`Attribute ${D.consumable_attribute_definition_id}`},D.consumable_attribute_definition_id))]}),(()=>{var B;const D=Xt.get(Number(We.consumable_attribute_definition)),b=(B=D==null?void 0:D.data_type)==null?void 0:B.toLowerCase();return b==="number"?t.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:We.value_number,onChange:Gt,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):b==="bool"||b==="boolean"?t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"value_bool",checked:We.value_bool,onChange:Gt}),"True"]}):b==="date"?t.jsx("input",{type:"date",name:"value_date",value:We.value_date,onChange:Gt,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):t.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:We.value_string,onChange:Gt,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:Mt,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>P(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),Q.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No consumable attribute values."}):Q.map(D=>{const b=D.definition||Xt.get(D.consumable_attribute_definition),B=D.value_string??D.value_number??D.value_bool??D.value_date??"";return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(b==null?void 0:b.description)||`Attribute ${D.consumable_attribute_definition}`}),t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:B===""?"No value":String(B)})]}),t.jsx("button",{onClick:()=>Vt(D.consumable,D.consumable_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${D.consumable}-${D.consumable_attribute_definition}`)})]})]})}),ie&&O&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"520px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[t.jsxs("h2",{style:{marginBottom:"var(--space-4)"},children:["Assign Consumable: ",O.consumable_name||`Consumable ${O.consumable_id}`]}),t.jsxs("form",{onSubmit:qs,children:[t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Assign to Person"}),t.jsxs("select",{name:"person",value:Ue.person,onChange:Ta,required:!0,disabled:Mt,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)"},children:[t.jsx("option",{value:"",children:"Select a person..."}),k.map(D=>t.jsxs("option",{value:D.person_id,children:[D.first_name," ",D.last_name," (",D.person_id,")"]},D.person_id))]})]}),t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Start Date (Automatic)"}),t.jsx("input",{type:"datetime-local",name:"start_datetime",value:Ue.start_datetime,onChange:Ta,required:!0,readOnly:!0,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-secondary)",cursor:"not-allowed",color:"var(--color-text)"}})]}),t.jsxs("div",{style:{marginBottom:"var(--space-6)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)"},children:"Condition"}),t.jsx("input",{type:"text",name:"condition_on_assignment",value:Ue.condition_on_assignment,onChange:Ta,placeholder:"e.g. Good, New",required:!0,disabled:Mt,style:{width:"100%",padding:"var(--space-2)",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",background:"var(--color-bg-secondary)",color:"var(--color-text)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[t.jsx("button",{type:"button",onClick:()=>{L(!1),Se(null)},style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer",color:"var(--color-text)"},children:"Cancel"}),t.jsx("button",{type:"submit",disabled:Mt,style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:Mt?"Assigning...":"Assign Consumable"})]})]})]})}),we&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t.jsxs("div",{style:{backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",padding:"var(--space-6)",borderRadius:"var(--radius-md)",width:"100%",maxWidth:"420px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.25)",border:"1px solid var(--color-border)"},children:[t.jsx("h2",{style:{marginBottom:"var(--space-4)"},children:"Confirm Discharge"}),t.jsxs("p",{style:{marginBottom:"var(--space-6)"},children:["Are you sure you want to end the assignment of ",t.jsx("strong",{children:((Fs=we.consumable)==null?void 0:Fs.consumable_name)||"Consumable"})," to person ",t.jsx("strong",{children:we.person}),"?",t.jsx("br",{}),t.jsx("br",{}),"The end date will be set to right now."]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end"},children:[t.jsx("button",{type:"button",onClick:()=>Ke(null),style:{padding:"var(--space-2) var(--space-4)",background:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",cursor:"pointer",color:"var(--color-text)"},children:"Cancel"}),t.jsx("button",{type:"button",onClick:()=>Ia(we.assignment_id),disabled:Mt,style:{padding:"var(--space-2) var(--space-4)",background:"#ef4444",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:Mt?"Discharging...":"Confirm Discharge"})]})]})})]})},yj=()=>{const r=It(),[l,c]=d.useState([]),[u,m]=d.useState([]),[p,h]=d.useState(null),[y,g]=d.useState([]),[v,x]=d.useState(!1),[j,M]=d.useState(!1),[I,k]=d.useState(null),[H,S]=d.useState(!1),[V,se]=d.useState(!1),[N,R]=d.useState(!1),[W,K]=d.useState({consumable_type_label:"",consumable_type_code:""}),[Y,he]=d.useState({description:"",data_type:"",unit:""}),[A,Q]=d.useState(!1),[te,re]=d.useState({consumable_attribute_definition:"",is_mandatory:!1,default_value:""});d.useEffect(()=>{xe(),X()},[]);const xe=async()=>{M(!0),k(null);try{const E=await Xs.getAll();c(Array.isArray(E)?E:[])}catch(E){k("Failed to fetch consumable types: "+E.message),c([])}finally{M(!1)}},Ne=async E=>{x(!0),k(null);try{const ie=await bn.getByConsumableType(E);g(Array.isArray(ie)?ie:[])}catch(ie){k("Failed to fetch type attributes: "+ie.message),g([])}finally{x(!1)}},le=E=>{const{name:ie,value:L,type:O,checked:Se}=E.target;re(we=>({...we,[ie]:O==="checkbox"?Se:L}))},w=async E=>{if(E.preventDefault(),!p){k("Please select a consumable type first");return}if(!te.consumable_attribute_definition){k("Please select an attribute definition");return}R(!0),k(null);try{const ie={consumable_type:p.consumable_type_id,consumable_attribute_definition:Number(te.consumable_attribute_definition),is_mandatory:!!te.is_mandatory,default_value:te.default_value||null};await bn.create(ie),re({consumable_attribute_definition:"",is_mandatory:!1,default_value:""}),Q(!1),await Ne(p.consumable_type_id)}catch(ie){k("Failed to add type attribute: "+ie.message)}finally{R(!1)}},z=async E=>{if(p&&window.confirm("Remove this attribute from the consumable type?"))try{await bn.delete(p.consumable_type_id,E),await Ne(p.consumable_type_id)}catch(ie){k("Failed to remove type attribute: "+ie.message)}},X=async()=>{try{const E=await fr.getAll();m(Array.isArray(E)?E:[])}catch(E){k("Failed to fetch attribute definitions: "+E.message),m([])}},F=E=>{const{name:ie,value:L}=E.target;K(O=>({...O,[ie]:L}))},fe=async E=>{var ie,L;E.preventDefault(),R(!0),k(null);try{await Xs.create(W),K({consumable_type_label:"",consumable_type_code:""}),S(!1),await xe()}catch(O){k("Failed to create consumable type: "+(((L=(ie=O.response)==null?void 0:ie.data)==null?void 0:L.error)||O.message))}finally{R(!1)}},C=async E=>{if(window.confirm("Are you sure you want to delete this consumable type?"))try{await Xs.delete(E),await xe()}catch(ie){k("Failed to delete consumable type: "+ie.message)}},$=E=>{r(`/dashboard/consumables/models?typeId=${E.consumable_type_id}`)},oe=async E=>{h(E),Q(!1),re({consumable_attribute_definition:"",is_mandatory:!1,default_value:""}),await Ne(E.consumable_type_id)},ye=new Set((Array.isArray(y)?y:[]).map(E=>E.consumable_attribute_definition)),Me=(Array.isArray(u)?u:[]).filter(E=>!ye.has(E.consumable_attribute_definition_id)),Ae=()=>{r("/dashboard/consumables/attribute-definitions")};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Consumables"}),t.jsx("p",{className:"page-subtitle",children:"Select a consumable type"})]}),I&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:I}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Types"}),t.jsx("button",{onClick:()=>S(!H),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Consumable Type",children:"+"})]}),H&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:fe,children:[t.jsx("input",{type:"text",name:"consumable_type_label",value:W.consumable_type_label,onChange:F,placeholder:"Type Name",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsx("input",{type:"text",name:"consumable_type_code",value:W.consumable_type_code,onChange:F,placeholder:"Code (e.g. PPR)",required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:N,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>S(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[l.map(E=>t.jsxs("div",{onClick:()=>$(E),style:{padding:"var(--space-3) var(--space-4)",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsx("span",{style:{fontWeight:"500"},children:E.consumable_type_label}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("button",{onClick:ie=>{ie.stopPropagation(),oe(E)},style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Attributes"}),t.jsx("button",{onClick:ie=>{ie.stopPropagation(),C(E.consumable_type_id)},style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]})]},E.consumable_type_id)),l.length===0&&!j&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No consumable types."})]})]}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsxs("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:["Type Attributes ",p?` ${p.consumable_type_label}`:""]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{onClick:()=>Q(E=>!E),disabled:!p,style:{border:"none",background:"none",color:"var(--color-primary)",cursor:p?"pointer":"not-allowed",opacity:p?1:.6},children:"+ Add"}),t.jsx("button",{onClick:Ae,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Manage"})]})]}),t.jsx("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:p?t.jsxs(t.Fragment,{children:[A&&t.jsxs("form",{onSubmit:w,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"consumable_attribute_definition",value:te.consumable_attribute_definition,onChange:le,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),Me.map(E=>t.jsx("option",{value:E.consumable_attribute_definition_id,children:E.description||`Attribute ${E.consumable_attribute_definition_id}`},E.consumable_attribute_definition_id))]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"is_mandatory",checked:te.is_mandatory,onChange:le}),"Mandatory"]}),t.jsx("input",{type:"text",name:"default_value",placeholder:"Default value (optional)",value:te.default_value,onChange:le,style:{padding:"var(--space-2)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:N,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>Q(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),v&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!v&&y.length===0&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned to this type."}),!v&&y.map(E=>{const ie=E.definition||u.find(L=>L.consumable_attribute_definition_id===E.consumable_attribute_definition);return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(ie==null?void 0:ie.description)||`Attribute ${E.consumable_attribute_definition}`}),t.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[(ie==null?void 0:ie.data_type)||"n/a",ie!=null&&ie.unit?`  ${ie.unit}`:"",E.is_mandatory?"  mandatory":"",E.default_value?`  default: ${E.default_value}`:""]})]}),t.jsx("button",{onClick:()=>z(E.consumable_attribute_definition),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},`${E.consumable_type}-${E.consumable_attribute_definition}`)})]}):t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:'Click "Attributes" on a type to view its attributes.'})})]})]})]})},bj=()=>{const r=It(),l=Ha(),u=d.useMemo(()=>new URLSearchParams(l.search),[l.search]).get("typeId"),[m,p]=d.useState(null),[h,y]=d.useState([]),[g,v]=d.useState([]),[x,j]=d.useState(!1),[M,I]=d.useState(null),[k,H]=d.useState(!1),[S,V]=d.useState(!1),[se,N]=d.useState({consumable_attribute_definition:"",is_mandatory:!1,default_value:""});d.useEffect(()=>{if(!u){I("typeId is required");return}R()},[u]);const R=async()=>{j(!0),I(null);try{const[Q,te,re]=await Promise.all([Xs.getById(u),fr.getAll(),bn.getByConsumableType(u)]);p(Q),v(Array.isArray(te)?te:[]),y(Array.isArray(re)?re:[])}catch(Q){I("Failed to load type attributes: "+Q.message)}finally{j(!1)}},W=Q=>{const{name:te,value:re,type:xe,checked:Ne}=Q.target;N(le=>({...le,[te]:xe==="checkbox"?Ne:re}))},K=async Q=>{if(Q.preventDefault(),!se.consumable_attribute_definition){I("Please select an attribute definition");return}V(!0),I(null);try{const te={consumable_type:Number(u),consumable_attribute_definition:Number(se.consumable_attribute_definition),is_mandatory:se.is_mandatory,default_value:se.default_value||null};await bn.create(te),N({consumable_attribute_definition:"",is_mandatory:!1,default_value:""}),H(!1),await R()}catch(te){I("Failed to add attribute to type: "+te.message)}finally{V(!1)}},Y=async Q=>{if(window.confirm("Remove this attribute from the consumable type?"))try{await bn.delete(Number(u),Number(Q)),await R()}catch(te){I("Failed to remove type attribute: "+te.message)}},he=d.useMemo(()=>new Set(h.map(Q=>Q.consumable_attribute_definition)),[h]),A=d.useMemo(()=>g.filter(Q=>!he.has(Q.consumable_attribute_definition_id)),[g,he]);return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"flex-end",gap:"var(--space-4)"},children:[t.jsxs("div",{children:[t.jsx("h1",{className:"page-title",children:"Consumable Type Attributes"}),t.jsxs("p",{className:"page-subtitle",children:[m?m.consumable_type_label:"Type","  Manage attributes"]})]}),t.jsx("button",{onClick:()=>r("/dashboard/consumables/types"),style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back to Types","aria-label":"Back to Types",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})]}),M&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:M}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Attributes"}),t.jsx("button",{onClick:()=>H(!k),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add"})]}),k&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:K,children:[t.jsxs("select",{name:"consumable_attribute_definition",value:se.consumable_attribute_definition,onChange:W,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition"}),A.map(Q=>t.jsxs("option",{value:Q.consumable_attribute_definition_id,children:[Q.description," (",Q.data_type||"n/a",Q.unit?`  ${Q.unit}`:"",")"]},Q.consumable_attribute_definition_id))]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"is_mandatory",checked:se.is_mandatory,onChange:W}),"Mandatory"]}),t.jsx("input",{type:"text",name:"default_value",placeholder:"Default value (optional)",value:se.default_value,onChange:W,style:{padding:"var(--space-2)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:S,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>H(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:[x&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!x&&h.length===0&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attributes assigned to this type."}),h.map(Q=>{var te,re,xe;return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:((te=Q.definition)==null?void 0:te.description)||`Definition ${Q.consumable_attribute_definition}`}),t.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[((re=Q.definition)==null?void 0:re.data_type)||"n/a",(xe=Q.definition)!=null&&xe.unit?`  ${Q.definition.unit}`:"",Q.is_mandatory?"  mandatory":"",Q.default_value?`  default: ${Q.default_value}`:""]})]}),t.jsx("button",{onClick:()=>Y(Q.consumable_attribute_definition),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},Q.consumable_attribute_definition)})]})]})]})},vj=()=>{const r=It(),[l]=Ms(),c=l.get("typeId"),[u,m]=d.useState(null),[p,h]=d.useState([]),[y,g]=d.useState(null),[v,x]=d.useState([]),[j,M]=d.useState([]),[I,k]=d.useState([]),[H,S]=d.useState(!1),[V,se]=d.useState(!1),[N,R]=d.useState({consumable_brand:"",model_name:"",model_code:""}),[W,K]=d.useState(!1),[Y,he]=d.useState({consumable_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),[A,Q]=d.useState(!1),[te,re]=d.useState(null),[xe,Ne]=d.useState(!1);d.useEffect(()=>{c&&le(c)},[c]),d.useEffect(()=>{w(),z()},[]),d.useEffect(()=>{if(!y){k([]),K(!1),he({consumable_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""});return}X(y.consumable_model_id)},[y]);const le=async L=>{Q(!0),re(null);try{const[O,Se]=await Promise.all([Xs.getAll(),es.getByConsumableType(L)]),Ke=(Array.isArray(O)?O:[]).find(Ue=>String(Ue.consumable_type_id)===String(L))||null;m(Ke),h(Array.isArray(Se)?Se:[]),g(null)}catch(O){re("Failed to fetch consumable models: "+O.message),m(null),h([]),g(null)}finally{Q(!1)}},w=async()=>{try{const L=await fr.getAll();M(Array.isArray(L)?L:[])}catch{M([])}},z=async()=>{try{const L=await _y.getAll();x(Array.isArray(L)?L:[])}catch{x([])}},X=async L=>{try{const O=await Jr.getByConsumableModel(L);k(Array.isArray(O)?O:[])}catch(O){re("Failed to fetch consumable model attributes: "+O.message),k([])}},F=L=>{const{name:O,value:Se,type:we,checked:Ke}=L.target;he(Ue=>({...Ue,[O]:we==="checkbox"?Ke:Se}))},fe=L=>{const{name:O,value:Se}=L.target;R(we=>({...we,[O]:Se}))},C=async L=>{var O,Se;if(L.preventDefault(),!!c){if(!N.consumable_brand){re("Please select a brand");return}se(!0),re(null);try{const we={consumable_type:Number(c),consumable_brand:Number(N.consumable_brand),model_name:N.model_name||null,model_code:N.model_code||null};await es.create(we),R({consumable_brand:"",model_name:"",model_code:""}),S(!1),await le(c)}catch(we){re("Failed to create consumable model: "+(((Se=(O=we.response)==null?void 0:O.data)==null?void 0:Se.error)||we.message))}finally{se(!1)}}},$=async L=>{if(L.preventDefault(),!y){re("Please select a consumable model first");return}if(!Y.consumable_attribute_definition){re("Please select an attribute definition");return}Ne(!0),re(null);try{const O={consumable_model:y.consumable_model_id,consumable_attribute_definition:Number(Y.consumable_attribute_definition),value_string:Y.value_string||null,value_number:Y.value_number?Number(Y.value_number):null,value_bool:Y.value_bool,value_date:Y.value_date||null};await Jr.create(O),he({consumable_attribute_definition:"",value_string:"",value_number:"",value_bool:!1,value_date:""}),K(!1),await X(y.consumable_model_id)}catch(O){re("Failed to add model attribute value: "+O.message)}finally{Ne(!1)}},oe=async(L,O)=>{if(window.confirm("Remove this attribute value from the consumable model?"))try{await Jr.delete(L,O),y&&await X(y.consumable_model_id)}catch(Se){re("Failed to remove consumable model attribute: "+Se.message)}},ye=d.useMemo(()=>{const L=new Map;return(Array.isArray(j)?j:[]).forEach(O=>{L.set(O.consumable_attribute_definition_id,O)}),L},[j]),Me=d.useMemo(()=>{if(!y)return j;const L=new Set((Array.isArray(I)?I:[]).map(O=>O.consumable_attribute_definition));return(Array.isArray(j)?j:[]).filter(O=>!L.has(O.consumable_attribute_definition_id))},[j,I,y]),Ae=()=>{r("/dashboard/consumables/types")},E=L=>{r(`/dashboard/consumables/instances?typeId=${c}&modelId=${L.consumable_model_id}`)},ie=L=>{r(`/dashboard/consumables/models/${L.consumable_model_id}/compatibility?typeId=${c}`)};return c?t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Consumables"}),t.jsxs("p",{className:"page-subtitle",children:["Select a model",u!=null&&u.consumable_type_label?` for ${u.consumable_type_label}`:""]})]}),te&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:te}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsxs("div",{style:{display:"flex",gap:"var(--space-3)",alignItems:"center"},children:[t.jsx("button",{onClick:Ae,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})}),t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Models"})]}),t.jsx("button",{onClick:()=>S(L=>!L),style:{background:"none",border:"none",cursor:"pointer",fontSize:"var(--font-size-lg)",color:"var(--color-primary)",padding:"0 var(--space-2)"},title:"Add Model",children:"+"})]}),H&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:C,children:[t.jsxs("select",{name:"consumable_brand",value:N.consumable_brand,onChange:fe,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select brand..."}),v.map(L=>t.jsx("option",{value:L.consumable_brand_id,children:L.brand_name},L.consumable_brand_id))]}),t.jsx("input",{type:"text",name:"model_name",value:N.model_name,onChange:fe,placeholder:"Model Name",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsx("input",{type:"text",name:"model_code",value:N.model_code,onChange:fe,placeholder:"Model Code",style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:V,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>S(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[p.map(L=>t.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[t.jsx("span",{style:{fontWeight:"500"},children:L.model_name}),t.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:L.model_code})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{onClick:()=>g(L),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:(y==null?void 0:y.consumable_model_id)===L.consumable_model_id?"var(--color-bg-secondary)":"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Attributes"}),t.jsx("button",{onClick:()=>ie(L),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Compatibility"}),t.jsx("button",{onClick:()=>E(L),style:{padding:"var(--space-1) var(--space-2)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Instances"})]})]},L.consumable_model_id)),p.length===0&&!A&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No models."})]})]}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsxs("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:["Model Attributes ",y?` ${y.model_name}`:""]}),t.jsx("button",{onClick:()=>K(L=>!L),disabled:!y,style:{border:"none",background:"none",color:"var(--color-primary)",cursor:y?"pointer":"not-allowed",opacity:y?1:.6},children:"+ Add Value"})]}),t.jsx("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:y?t.jsxs(t.Fragment,{children:[W&&t.jsxs("form",{onSubmit:$,style:{marginBottom:"var(--space-4)"},children:[t.jsxs("select",{name:"consumable_attribute_definition",value:Y.consumable_attribute_definition,onChange:F,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select attribute definition..."}),Me.map(L=>t.jsx("option",{value:L.consumable_attribute_definition_id,children:L.description||`Attribute ${L.consumable_attribute_definition_id}`},L.consumable_attribute_definition_id))]}),(()=>{var Se;const L=ye.get(Number(Y.consumable_attribute_definition)),O=(Se=L==null?void 0:L.data_type)==null?void 0:Se.toLowerCase();return O==="number"?t.jsx("input",{type:"number",name:"value_number",placeholder:"Number value",value:Y.value_number,onChange:F,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):O==="bool"||O==="boolean"?t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-2)",marginBottom:"var(--space-2)"},children:[t.jsx("input",{type:"checkbox",name:"value_bool",checked:Y.value_bool,onChange:F}),"True"]}):O==="date"?t.jsx("input",{type:"date",name:"value_date",value:Y.value_date,onChange:F,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}):t.jsx("input",{type:"text",name:"value_string",placeholder:"String value",value:Y.value_string,onChange:F,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}})})(),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:xe,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>K(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]}),I.length===0?t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No model attribute values."}):I.map(L=>{const O=L.definition||ye.get(L.consumable_attribute_definition),Se=L.value_string??L.value_number??L.value_bool??L.value_date??"";return t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:(O==null?void 0:O.description)||`Attribute ${L.consumable_attribute_definition}`}),t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)"},children:Se===""?"No value":String(Se)})]}),t.jsx("button",{onClick:()=>oe(L.consumable_model,L.consumable_attribute_definition),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},`${L.consumable_model}-${L.consumable_attribute_definition}`)})]}):t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Select a model to view or add values."})})]})]})]}):t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Consumables"}),t.jsx("p",{className:"page-subtitle",children:"Select a type first"})]}),t.jsx("div",{className:"card",style:{padding:"var(--space-6)"},children:t.jsx("button",{onClick:Ae,style:{padding:"var(--space-2) var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer",width:"fit-content"},title:"Back to types","aria-label":"Back to types",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})})]})},gj=()=>{const r=It(),{modelId:l}=al(),[c]=Ms(),u=c.get("typeId"),[m,p]=d.useState(null),[h,y]=d.useState([]),[g,v]=d.useState([]),[x,j]=d.useState(""),[M,I]=d.useState(!1),[k,H]=d.useState(!1),[S,V]=d.useState(null),se=Fa.isSuperuser(),N=()=>{if(u){r(`/dashboard/consumables/models?typeId=${u}`);return}r(-1)},R=d.useCallback(async()=>{if(l){H(!0),V(null);try{const[A,Q,te]=await Promise.all([es.getById(l),es.getCompatibleAssetModels(l),yt.getAll()]);p(A||null),y(Array.isArray(Q)?Q:[]),v(Array.isArray(te)?te:[])}catch(A){V("Failed to fetch compatibility: "+A.message)}finally{H(!1)}}},[l]);d.useEffect(()=>{R()},[R]);const W=d.useMemo(()=>new Set((Array.isArray(h)?h:[]).map(A=>A.asset_model_id)),[h]),K=d.useMemo(()=>(Array.isArray(g)?g:[]).filter(A=>!W.has(A.asset_model_id)),[g,W]),Y=async()=>{if(x){V(null);try{await es.addCompatibleAssetModel(l,Number(x)),j(""),I(!1),await R()}catch(A){V("Failed to add compatible asset model: "+A.message)}}},he=async A=>{V(null);try{await es.removeCompatibleAssetModel(l,A),await R()}catch(Q){V("Failed to remove compatible asset model: "+Q.message)}};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Consumables"}),t.jsxs("p",{className:"page-subtitle",children:["Compatibility ",m!=null&&m.model_name?` ${m.model_name}`:""]})]}),S&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:S}),t.jsx("div",{className:"card",style:{padding:"var(--space-4)",marginBottom:"var(--space-4)"},children:t.jsx("button",{onClick:N,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Compatible Asset Models"}),se&&!M&&t.jsx("button",{onClick:()=>I(!0),style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add compatible model"})]}),se&&M&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsxs("select",{value:x,onChange:A=>j(A.target.value),style:{flex:1,padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Select asset model..."}),K.map(A=>t.jsx("option",{value:A.asset_model_id,children:A.model_name||`Model ${A.asset_model_id}`},A.asset_model_id))]}),t.jsx("button",{onClick:Y,disabled:!x||k,style:{padding:"var(--space-2) var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Add"}),t.jsx("button",{onClick:()=>{I(!1),j("")},style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Cancel"})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1},children:[(Array.isArray(h)?h:[]).map(A=>t.jsxs("div",{style:{padding:"var(--space-3) var(--space-4)",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[t.jsx("span",{style:{fontWeight:"500"},children:A.model_name}),t.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:A.model_code})]}),se&&t.jsx("button",{onClick:()=>he(A.asset_model_id),style:{border:"none",background:"none",color:"#c33",cursor:"pointer"},children:""})]},A.asset_model_id)),h.length===0&&!k&&t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)",textAlign:"center"},children:"No compatible asset models."})]})]})]})},xj=()=>{const[r,l]=d.useState([]),[c,u]=d.useState(!1),[m,p]=d.useState(null),[h,y]=d.useState(!1),[g,v]=d.useState(!1),[x,j]=d.useState({description:"",data_type:"",unit:""});d.useEffect(()=>{M()},[]);const M=async()=>{u(!0),p(null);try{const S=await fr.getAll();l(Array.isArray(S)?S:[])}catch(S){p("Failed to fetch attribute definitions: "+S.message),l([])}finally{u(!1)}},I=S=>{const{name:V,value:se}=S.target;j(N=>({...N,[V]:se}))},k=async S=>{S.preventDefault(),v(!0),p(null);try{const V={description:x.description||null,data_type:x.data_type||null,unit:x.unit||null};await fr.create(V),j({description:"",data_type:"",unit:""}),y(!1),await M()}catch(V){p("Failed to create attribute definition: "+V.message)}finally{v(!1)}},H=async S=>{if(window.confirm("Delete this attribute definition?"))try{await fr.delete(S),await M()}catch(V){p("Failed to delete attribute definition: "+V.message)}};return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Consumable Attribute Definitions"}),t.jsx("p",{className:"page-subtitle",children:"Manage consumable attribute definitions"})]}),m&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:m}),t.jsxs("div",{className:"card",style:{overflow:"hidden",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"card-header",style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-md)",fontWeight:"600",margin:0},children:"Definitions"}),t.jsx("button",{onClick:()=>y(!h),style:{border:"none",background:"none",color:"var(--color-primary)",cursor:"pointer"},children:"+ Add"})]}),h&&t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-tertiary)"},children:t.jsxs("form",{onSubmit:k,children:[t.jsx("input",{type:"text",name:"description",placeholder:"Description",value:x.description,onChange:I,required:!0,style:{width:"100%",marginBottom:"var(--space-2)",padding:"var(--space-2)"}}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-2)"},children:[t.jsxs("select",{name:"data_type",value:x.data_type,onChange:I,style:{padding:"var(--space-2)"},children:[t.jsx("option",{value:"",children:"Data Type"}),t.jsx("option",{value:"string",children:"String"}),t.jsx("option",{value:"number",children:"Number"}),t.jsx("option",{value:"bool",children:"Boolean"}),t.jsx("option",{value:"date",children:"Date"})]}),t.jsx("input",{type:"text",name:"unit",placeholder:"Unit",value:x.unit,onChange:I,style:{padding:"var(--space-2)"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",marginTop:"var(--space-3)"},children:[t.jsx("button",{type:"submit",disabled:g,style:{flex:1,padding:"var(--space-1)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)"},children:"Save"}),t.jsx("button",{type:"button",onClick:()=>y(!1),style:{flex:1,padding:"var(--space-1)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)"},children:"Cancel"})]})]})}),t.jsxs("div",{style:{overflowY:"auto",flex:1,padding:"var(--space-4)"},children:[c&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"Loading..."}),!c&&r.length===0&&t.jsx("div",{style:{color:"var(--color-text-secondary)"},children:"No attribute definitions."}),r.map(S=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-2) 0",borderBottom:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"500"},children:S.description}),t.jsxs("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:[S.data_type,S.unit?`  ${S.unit}`:""]})]}),t.jsx("button",{onClick:()=>H(S.consumable_attribute_definition_id),style:{border:"none",background:"none",color:"#999",cursor:"pointer"},children:""})]},S.consumable_attribute_definition_id))]})]})]})},_j=()=>{const[r,l]=d.useState([]),[c,u]=d.useState([]),[m,p]=d.useState(!1),[h,y]=d.useState(null),[g,v]=d.useState(!1),[x,j]=d.useState(null),[M,I]=d.useState(!1),[k,H]=d.useState({room_name:"",room_type:""});d.useEffect(()=>{V(),S()},[]);const S=async()=>{try{const Y=await Q_.getAll();u(Array.isArray(Y)?Y:[])}catch{u([])}},V=async()=>{p(!0),y(null);try{const Y=await Is.getAll();l(Array.isArray(Y)?Y:[])}catch(Y){y("Failed to fetch rooms: "+Y.message),l([])}finally{p(!1)}},se=Y=>{const{name:he,value:A}=Y.target;H(Q=>({...Q,[he]:A}))},N=async Y=>{var he,A;Y.preventDefault(),I(!0),y(null);try{x?await Is.update(x,k):await Is.create(k),H({room_name:"",room_type:""}),v(!1),j(null),await V()}catch(Q){y("Failed to save room: "+(((A=(he=Q.response)==null?void 0:he.data)==null?void 0:A.error)||Q.message))}finally{I(!1)}},R=Y=>{H({room_name:Y.room_name,room_type:Y.room_type||""}),j(Y.room_id),v(!0)},W=async Y=>{if(window.confirm("Are you sure you want to delete this room?"))try{await Is.delete(Y),await V()}catch(he){y("Failed to delete room: "+he.message)}},K=()=>{H({room_name:"",room_type:""}),v(!1),j(null)};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",children:[t.jsx("h1",{className:"page-title",children:"Rooms"}),t.jsx("p",{className:"page-subtitle",children:"Manage building rooms"})]}),h&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-6)",border:"1px solid #fcc"},children:h}),t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"var(--space-4)",borderBottom:"1px solid var(--color-border)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",margin:0},children:"All Rooms"}),t.jsx("button",{onClick:()=>{g?K():v(!0)},style:{backgroundColor:g?"var(--color-text-secondary)":"var(--color-primary)",color:"white",border:"none",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:"pointer",fontSize:"var(--font-size-xs)",fontWeight:"500",whiteSpace:"nowrap"},children:g?"Cancel":"+ New Room"})]}),g&&t.jsx("div",{style:{padding:"var(--space-6)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-secondary)"},children:t.jsxs("form",{onSubmit:N,children:[t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontSize:"var(--font-size-sm)",fontWeight:"500"},children:"Room Name *"}),t.jsx("input",{type:"text",name:"room_name",value:k.room_name,onChange:se,required:!0,placeholder:"e.g., Conference Room A",maxLength:"30",style:{width:"100%",padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",fontSize:"var(--font-size-sm)",boxSizing:"border-box",fontFamily:"inherit"}})]}),t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontSize:"var(--font-size-sm)",fontWeight:"500"},children:"Room Type *"}),t.jsxs("select",{name:"room_type",value:k.room_type,onChange:se,required:!0,style:{width:"100%",padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",fontSize:"var(--font-size-sm)",boxSizing:"border-box",fontFamily:"inherit"},children:[t.jsx("option",{value:"",children:"Select a room type"}),c.map(Y=>t.jsx("option",{value:Y.room_type_id,children:Y.room_type_label},Y.room_type_id))]})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:M,style:{flex:1,backgroundColor:M?"var(--color-text-secondary)":"var(--color-primary)",color:"white",border:"none",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:M?"default":"pointer",fontSize:"var(--font-size-sm)",fontWeight:"500",opacity:M?.6:1},children:M?"Saving...":x?"Update":"Create"}),t.jsx("button",{type:"button",onClick:K,style:{flex:1,backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",border:"1px solid var(--color-border)",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:"pointer",fontSize:"var(--font-size-sm)",fontWeight:"500"},children:"Cancel"})]})]})}),t.jsx("div",{className:"card-body",style:{padding:0},children:m?t.jsx("div",{style:{textAlign:"center",padding:"var(--space-6)",color:"var(--color-text-secondary)"},children:"Loading..."}):r.length===0?t.jsx("div",{style:{textAlign:"center",padding:"var(--space-6)",color:"var(--color-text-secondary)"},children:"No rooms found"}):t.jsxs("div",{children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 200px 100px",gap:"var(--space-3)",padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-secondary)",fontWeight:"600",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",textTransform:"uppercase",letterSpacing:"0.5px"},children:[t.jsx("div",{children:"Room Name"}),t.jsx("div",{children:"Room Type"}),t.jsx("div",{children:"Actions"})]}),r.map((Y,he)=>t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 200px 100px",gap:"var(--space-3)",padding:"var(--space-4)",borderBottom:he<r.length-1?"1px solid var(--color-border)":"none",alignItems:"center",transition:"background-color 0.2s"},onMouseEnter:A=>{A.currentTarget.style.backgroundColor="var(--color-bg-secondary)"},onMouseLeave:A=>{A.currentTarget.style.backgroundColor="transparent"},children:[t.jsx("div",{children:t.jsx("div",{style:{fontSize:"var(--font-size-sm)",fontWeight:"500"},children:Y.room_name})}),t.jsx("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)"},children:Y.room_type_label||Y.room_type}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{onClick:()=>R(Y),style:{backgroundColor:"transparent",color:"var(--color-primary)",border:"none",padding:"var(--space-1) var(--space-2)",cursor:"pointer",fontSize:"var(--font-size-xs)",opacity:.7,transition:"opacity 0.2s"},onMouseEnter:A=>{A.target.style.opacity=1},onMouseLeave:A=>{A.target.style.opacity=.7},children:"Edit"}),t.jsx("button",{onClick:()=>W(Y.room_id),style:{backgroundColor:"transparent",color:"#c33",border:"none",padding:"var(--space-1) var(--space-2)",cursor:"pointer",fontSize:"var(--font-size-xs)",opacity:.7,transition:"opacity 0.2s"},onMouseEnter:A=>{A.target.style.opacity=1},onMouseLeave:A=>{A.target.style.opacity=.7},children:"Delete"})]})]},Y.room_id))]})})]})]})},jj=()=>{const[r,l]=d.useState([]),[c,u]=d.useState(!1),[m,p]=d.useState(null),[h,y]=d.useState(!1),[g,v]=d.useState(null),[x,j]=d.useState(!1),[M,I]=d.useState({position_label:"",position_code:"",description:""});d.useEffect(()=>{k()},[]);const k=async()=>{u(!0),p(null);try{const R=await fi.getAll();l(Array.isArray(R)?R:[])}catch(R){p("Failed to fetch positions: "+R.message),l([])}finally{u(!1)}},H=R=>{const{name:W,value:K}=R.target;I(Y=>({...Y,[W]:K}))},S=async R=>{var W,K;R.preventDefault(),j(!0),p(null);try{g?await fi.update(g,M):await fi.create(M),I({position_label:"",position_code:"",description:""}),y(!1),v(null),await k()}catch(Y){p("Failed to save position: "+(((K=(W=Y.response)==null?void 0:W.data)==null?void 0:K.error)||Y.message))}finally{j(!1)}},V=R=>{I({position_label:R.position_label,position_code:R.position_code,description:R.description||""}),v(R.position_id),y(!0)},se=async R=>{if(window.confirm("Are you sure you want to delete this position?"))try{await fi.delete(R),await k()}catch(W){p("Failed to delete position: "+W.message)}},N=()=>{I({position_label:"",position_code:"",description:""}),y(!1),v(null)};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",children:[t.jsx("h1",{className:"page-title",children:"Positions"}),t.jsx("p",{className:"page-subtitle",children:"Manage job positions in the organization"})]}),m&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-6)",border:"1px solid #fcc"},children:m}),t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"var(--space-4)",borderBottom:"1px solid var(--color-border)"},children:[t.jsx("h2",{style:{fontSize:"var(--font-size-lg)",fontWeight:"600",margin:0},children:"All Positions"}),t.jsx("button",{onClick:()=>{h?N():y(!0)},style:{backgroundColor:h?"var(--color-text-secondary)":"var(--color-primary)",color:"white",border:"none",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:"pointer",fontSize:"var(--font-size-xs)",fontWeight:"500",whiteSpace:"nowrap"},children:h?"Cancel":"+ New Position"})]}),h&&t.jsx("div",{style:{padding:"var(--space-6)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-secondary)"},children:t.jsxs("form",{onSubmit:S,children:[t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontSize:"var(--font-size-sm)",fontWeight:"500"},children:"Position Label *"}),t.jsx("input",{type:"text",name:"position_label",value:M.position_label,onChange:H,required:!0,placeholder:"e.g., Software Engineer",style:{width:"100%",padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",fontSize:"var(--font-size-sm)",boxSizing:"border-box",fontFamily:"inherit"}})]}),t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontSize:"var(--font-size-sm)",fontWeight:"500"},children:"Position Code *"}),t.jsx("input",{type:"text",name:"position_code",value:M.position_code,onChange:H,required:!0,placeholder:"e.g., SE",maxLength:"48",style:{width:"100%",padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",fontSize:"var(--font-size-sm)",boxSizing:"border-box",fontFamily:"inherit"}})]}),t.jsxs("div",{style:{marginBottom:"var(--space-4)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontSize:"var(--font-size-sm)",fontWeight:"500"},children:"Description"}),t.jsx("textarea",{name:"description",value:M.description,onChange:H,placeholder:"Optional description for this position",rows:"3",maxLength:"256",style:{width:"100%",padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",fontSize:"var(--font-size-sm)",boxSizing:"border-box",fontFamily:"inherit",resize:"vertical"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{type:"submit",disabled:x,style:{flex:1,backgroundColor:x?"var(--color-text-secondary)":"var(--color-primary)",color:"white",border:"none",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:x?"default":"pointer",fontSize:"var(--font-size-sm)",fontWeight:"500",opacity:x?.6:1},children:x?"Saving...":g?"Update":"Create"}),t.jsx("button",{type:"button",onClick:N,style:{flex:1,backgroundColor:"var(--color-bg-tertiary)",color:"var(--color-text)",border:"1px solid var(--color-border)",padding:"var(--space-2) var(--space-4)",borderRadius:"var(--radius-sm)",cursor:"pointer",fontSize:"var(--font-size-sm)",fontWeight:"500"},children:"Cancel"})]})]})}),t.jsx("div",{className:"card-body",style:{padding:0},children:c?t.jsx("div",{style:{textAlign:"center",padding:"var(--space-6)",color:"var(--color-text-secondary)"},children:"Loading..."}):r.length===0?t.jsx("div",{style:{textAlign:"center",padding:"var(--space-6)",color:"var(--color-text-secondary)"},children:"No positions found"}):t.jsxs("div",{children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 150px 150px 100px",gap:"var(--space-3)",padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)",backgroundColor:"var(--color-bg-secondary)",fontWeight:"600",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",textTransform:"uppercase",letterSpacing:"0.5px"},children:[t.jsx("div",{children:"Position"}),t.jsx("div",{children:"Code"}),t.jsx("div",{children:"Description"}),t.jsx("div",{children:"Actions"})]}),r.map((R,W)=>t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 150px 150px 100px",gap:"var(--space-3)",padding:"var(--space-4)",borderBottom:W<r.length-1?"1px solid var(--color-border)":"none",alignItems:"center",transition:"background-color 0.2s"},onMouseEnter:K=>{K.currentTarget.style.backgroundColor="var(--color-bg-secondary)"},onMouseLeave:K=>{K.currentTarget.style.backgroundColor="transparent"},children:[t.jsx("div",{children:t.jsx("div",{style:{fontSize:"var(--font-size-sm)",fontWeight:"500"},children:R.position_label})}),t.jsx("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)"},children:R.position_code}),t.jsx("div",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)",maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:R.description||""}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)"},children:[t.jsx("button",{onClick:()=>V(R),style:{backgroundColor:"transparent",color:"var(--color-primary)",border:"none",padding:"var(--space-1) var(--space-2)",cursor:"pointer",fontSize:"var(--font-size-xs)",opacity:.7,transition:"opacity 0.2s"},onMouseEnter:K=>{K.target.style.opacity=1},onMouseLeave:K=>{K.target.style.opacity=.7},children:"Edit"}),t.jsx("button",{onClick:()=>se(R.position_id),style:{backgroundColor:"transparent",color:"#c33",border:"none",padding:"var(--space-1) var(--space-2)",cursor:"pointer",fontSize:"var(--font-size-xs)",opacity:.7,transition:"opacity 0.2s"},onMouseEnter:K=>{K.target.style.opacity=1},onMouseLeave:K=>{K.target.style.opacity=.7},children:"Delete"})]})]},R.position_id))]})})]})]})},Sj=({editingId:r,formData:l,handleFormChange:c,handleSubmit:u,handleCancel:m})=>t.jsxs("form",{onSubmit:u,style:{padding:"var(--space-4)",maxWidth:"600px"},children:[t.jsx("h3",{style:{marginBottom:"var(--space-3)",color:"var(--color-text-primary)"},children:r?"Edit Structure":"Add Structure"}),t.jsxs("div",{style:{marginBottom:"var(--space-3)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Structure Code*"}),t.jsx("input",{type:"text",name:"structure_code",value:l.structure_code,onChange:c,required:!0,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--color-border)",borderRadius:"3px",fontSize:"0.875rem",boxSizing:"border-box"}})]}),t.jsxs("div",{style:{marginBottom:"var(--space-3)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Structure Name*"}),t.jsx("input",{type:"text",name:"structure_name",value:l.structure_name,onChange:c,required:!0,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--color-border)",borderRadius:"3px",fontSize:"0.875rem",boxSizing:"border-box"}})]}),t.jsxs("div",{style:{marginBottom:"var(--space-3)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Structure Type*"}),t.jsx("input",{type:"text",name:"structure_type",value:l.structure_type,onChange:c,required:!0,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--color-border)",borderRadius:"3px",fontSize:"0.875rem",boxSizing:"border-box"}})]}),t.jsx("div",{style:{marginBottom:"var(--space-4)"},children:t.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",name:"is_active",checked:l.is_active,onChange:c,style:{marginRight:"0.5rem"}}),t.jsx("span",{children:"Active"})]})}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-3)"},children:[t.jsx("button",{type:"submit",style:{flex:1,padding:"var(--space-3)",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",fontSize:"var(--font-size-sm)",fontWeight:"600",cursor:"pointer"},children:r?"Update Structure":"Create Structure"}),r&&t.jsx("button",{type:"button",onClick:m,style:{flex:1,padding:"var(--space-3)",backgroundColor:"var(--color-bg-secondary)",color:"var(--color-text-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",fontSize:"var(--font-size-sm)",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]}),Cj=({loading:r,structures:l,handleEdit:c,handleSelectStructureForRelations:u,setActiveTab:m,handleDelete:p})=>t.jsxs("div",{style:{padding:"var(--space-4)"},children:[t.jsx("h3",{style:{marginBottom:"var(--space-3)",color:"var(--color-text-primary)"},children:"Organizational Structures List"}),r?t.jsx("p",{children:"Loading..."}):l.length===0?t.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"No organizational structures found. Create one to get started!"}):t.jsx("div",{style:{overflowX:"auto",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"var(--font-size-sm)"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{backgroundColor:"var(--color-bg-secondary)",borderBottom:"2px solid var(--color-border)"},children:[t.jsx("th",{style:{padding:"var(--space-3)",textAlign:"left",fontWeight:"600"},children:"Code"}),t.jsx("th",{style:{padding:"var(--space-3)",textAlign:"left",fontWeight:"600"},children:"Name"}),t.jsx("th",{style:{padding:"var(--space-3)",textAlign:"left",fontWeight:"600"},children:"Type"}),t.jsx("th",{style:{padding:"var(--space-3)",textAlign:"center",fontWeight:"600"},children:"Active"}),t.jsx("th",{style:{padding:"var(--space-3)",textAlign:"center",fontWeight:"600"},children:"Actions"})]})}),t.jsx("tbody",{children:l.map(h=>t.jsxs("tr",{style:{borderBottom:"1px solid var(--color-border)"},children:[t.jsx("td",{style:{padding:"var(--space-3)"},children:h.structure_code}),t.jsx("td",{style:{padding:"var(--space-3)"},children:h.structure_name}),t.jsx("td",{style:{padding:"var(--space-3)"},children:h.structure_type}),t.jsx("td",{style:{padding:"var(--space-3)",textAlign:"center"},children:h.is_active?"":""}),t.jsxs("td",{style:{padding:"var(--space-3)",textAlign:"center"},children:[t.jsx("button",{onClick:()=>c(h),style:{padding:"0.4rem 0.8rem",marginRight:"0.5rem",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"0.75rem"},children:"Edit"}),t.jsx("button",{onClick:()=>{u(h),m("relations_list")},style:{padding:"0.4rem 0.8rem",marginRight:"0.5rem",backgroundColor:"#1e7e34",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"0.75rem"},children:"Relations"}),t.jsx("button",{onClick:()=>p(h.organizational_structure_id),style:{padding:"0.4rem 0.8rem",backgroundColor:"#d9534f",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"0.75rem"},children:"Delete"})]})]},h.organizational_structure_id))})]})})]}),wj=({selectedStructure:r,loading:l,relations:c,handleEditRelation:u,handleDeleteRelation:m,setActiveTab:p})=>t.jsx("div",{style:{padding:"var(--space-4)"},children:r?t.jsxs(t.Fragment,{children:[t.jsxs("h3",{style:{marginBottom:"var(--space-3)",color:"var(--color-text-primary)"},children:["Relations for: ",t.jsx("strong",{children:r.structure_name})]}),t.jsx("div",{style:{marginBottom:"var(--space-4)"},children:l?t.jsx("p",{children:"Loading..."}):c.length===0?t.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"No relations found."}):t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"var(--space-3)"},children:c.map(h=>t.jsxs("div",{style:{padding:"var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",backgroundColor:"var(--color-bg-secondary)"},children:[t.jsxs("div",{style:{marginBottom:"0.5rem"},children:[t.jsx("strong",{style:{fontSize:"0.85rem",color:"var(--color-primary)"},children:h.organizational_structure_name}),t.jsx("span",{style:{display:"block",margin:"0.25rem 0",color:"var(--color-text-secondary)"},children:" Parent"}),t.jsx("strong",{style:{fontSize:"0.85rem",color:"#1e7e34"},children:h.parent_organizational_structure_name})]}),h.relation_type&&t.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--color-text-secondary)",marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Type:"})," ",h.relation_type]}),t.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[t.jsx("button",{onClick:()=>{u(h),p("relations_form")},style:{flex:1,padding:"0.3rem 0.6rem",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"2px",cursor:"pointer",fontSize:"0.7rem"},children:"Edit"}),t.jsx("button",{onClick:()=>m(h.organizational_structure,h.parent_organizational_structure),style:{flex:1,padding:"0.3rem 0.6rem",backgroundColor:"#d9534f",color:"white",border:"none",borderRadius:"2px",cursor:"pointer",fontSize:"0.7rem"},children:"Delete"})]})]},`${h.organizational_structure}-${h.parent_organizational_structure}`))})})]}):t.jsxs("p",{style:{color:"var(--color-text-secondary)"},children:["Please select a structure from the ",t.jsx("strong",{children:"Structures"})," tab first."]})}),kj=({selectedStructure:r,editingRelation:l,handleSubmitRelation:c,relationFormData:u,handleRelationFormChange:m,structures:p,handleCancelRelation:h,setActiveTab:y})=>t.jsx("div",{style:{padding:"var(--space-4)"},children:r?t.jsxs("div",{style:{maxWidth:"400px"},children:[t.jsxs("h3",{style:{marginBottom:"var(--space-3)",color:"var(--color-text-primary)"},children:["Relation for: ",t.jsx("strong",{children:r.structure_name})]}),t.jsx("h4",{style:{marginBottom:"var(--space-3)",color:"var(--color-text-secondary)"},children:l?"Edit Relation":"Add New Relation"}),t.jsxs("form",{onSubmit:c,children:[t.jsxs("div",{style:{marginBottom:"var(--space-3)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Parent Structure*"}),t.jsxs("select",{name:"parent_organizational_structure",value:u.parent_organizational_structure,onChange:m,required:!0,disabled:!!l,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--color-border)",borderRadius:"3px",fontSize:"0.875rem",boxSizing:"border-box",backgroundColor:l?"var(--color-bg-secondary)":"white",color:l?"var(--color-text-secondary)":"inherit"},children:[t.jsx("option",{value:"",children:"Select a parent..."}),p.filter(g=>g.organizational_structure_id!==r.organizational_structure_id).map(g=>t.jsx("option",{value:g.organizational_structure_id,children:g.structure_name},g.organizational_structure_id))]}),l&&t.jsx("p",{style:{fontSize:"0.75rem",color:"var(--color-text-secondary)",marginTop:"0.25rem"},children:"Parent structure cannot be changed once created. Create a new relation instead."})]}),t.jsxs("div",{style:{marginBottom:"var(--space-3)"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Relation Type (Optional)"}),t.jsx("input",{type:"text",name:"relation_type",value:u.relation_type,onChange:m,placeholder:"e.g., Department, Division",style:{width:"100%",padding:"0.5rem",border:"1px solid var(--color-border)",borderRadius:"3px",fontSize:"0.875rem",boxSizing:"border-box"}})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-3)"},children:[t.jsx("button",{type:"submit",style:{flex:1,padding:"0.5rem",backgroundColor:"#1e7e34",color:"white",border:"none",borderRadius:"var(--radius-sm)",fontSize:"var(--font-size-sm)",fontWeight:"600",cursor:"pointer"},children:l?"Update Relation":"Add Relation"}),t.jsx("button",{type:"button",onClick:()=>{h(),y("relations_list")},style:{flex:1,padding:"0.5rem",backgroundColor:"var(--color-bg-secondary)",color:"var(--color-text-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",fontSize:"var(--font-size-sm)",fontWeight:"600",cursor:"pointer"},children:l?"Cancel":"Clear Form"})]})]})]}):t.jsxs("p",{style:{color:"var(--color-text-secondary)"},children:["Please select a structure from the ",t.jsx("strong",{children:"Structures"})," tab first."]})}),Aj=()=>{const[r,l]=d.useState("structures"),[c,u]=d.useState([]),[m,p]=d.useState({structure_code:"",structure_name:"",structure_type:"",is_active:!0}),[h,y]=d.useState(null),[g,v]=d.useState([]),[x,j]=d.useState(null),[M,I]=d.useState({organizational_structure:"",parent_organizational_structure:"",relation_type:""}),[k,H]=d.useState(null),[S,V]=d.useState(!1),[se,N]=d.useState(null),[R,W]=d.useState(null);d.useEffect(()=>{K()},[]);const K=d.useCallback(async()=>{V(!0),N(null);try{const X=await hi.getAll();u(Array.isArray(X)?X:[])}catch(X){N("Failed to fetch organizational structures: "+X.message)}finally{V(!1)}},[]),Y=d.useCallback(X=>{const{name:F,value:fe,type:C,checked:$}=X.target;p(oe=>({...oe,[F]:C==="checkbox"?$:fe}))},[]),he=d.useCallback(async X=>{X.preventDefault(),N(null),W(null);try{h?(await hi.update(h,m),W("Organizational structure updated successfully!")):(await hi.create(m),W("Organizational structure created successfully!")),p({structure_code:"",structure_name:"",structure_type:"",is_active:!0}),y(null),await K()}catch(F){N("Failed to save organizational structure: "+F.message)}},[h,m,K]),A=d.useCallback(X=>{p({structure_code:X.structure_code,structure_name:X.structure_name,structure_type:X.structure_type,is_active:X.is_active}),y(X.organizational_structure_id),l("form")},[]),Q=d.useCallback(async X=>{if(window.confirm("Are you sure you want to delete this organizational structure?"))try{await hi.delete(X),W("Organizational structure deleted successfully!"),await K()}catch(F){N("Failed to delete organizational structure: "+F.message)}},[K]),te=d.useCallback(()=>{p({structure_code:"",structure_name:"",structure_type:"",is_active:!0}),y(null)},[]);d.useCallback(async X=>{V(!0),N(null);try{const F=await ir.getByStructureId(X);v(Array.isArray(F)?F:[])}catch(F){N("Failed to fetch relations: "+F.message)}finally{V(!1)}},[]);const re=d.useCallback(async X=>{j(X),I({organizational_structure:X.organizational_structure_id,parent_organizational_structure:"",relation_type:""}),H(null);const F=await ir.getByStructureId(X.organizational_structure_id);v(Array.isArray(F)?F:[])},[]),xe=d.useCallback(X=>{const{name:F,value:fe}=X.target;I(C=>({...C,[F]:fe}))},[]),Ne=d.useCallback(async X=>{if(X.preventDefault(),N(null),W(null),!M.parent_organizational_structure){N("Please select a parent organizational structure");return}try{k?(await ir.update(k.organizational_structure,k.parent_organizational_structure,M),W("Relation updated successfully!")):(await ir.create(M),W("Relation created successfully!")),I({organizational_structure:x.organizational_structure_id,parent_organizational_structure:"",relation_type:""}),H(null);const F=await ir.getByStructureId(x.organizational_structure_id);v(Array.isArray(F)?F:[]),l("relations_list")}catch(F){N("Failed to save relation: "+F.message)}},[k,M,x]),le=d.useCallback(X=>{I({organizational_structure:X.organizational_structure,parent_organizational_structure:X.parent_organizational_structure,relation_type:X.relation_type||""}),H(X)},[]),w=d.useCallback(async(X,F)=>{if(window.confirm("Are you sure you want to delete this relation?"))try{await ir.delete(X,F),W("Relation deleted successfully!");const fe=await ir.getByStructureId(x.organizational_structure_id);v(Array.isArray(fe)?fe:[])}catch(fe){N("Failed to delete relation: "+fe.message)}},[x]),z=d.useCallback(()=>{I({organizational_structure:x.organizational_structure_id,parent_organizational_structure:"",relation_type:""}),H(null)},[x]);return t.jsxs("div",{style:{padding:"var(--space-4)"},children:[se&&t.jsx("div",{style:{padding:"var(--space-3)",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-3)",border:"1px solid #f5c6cb"},children:se}),R&&t.jsx("div",{style:{padding:"var(--space-3)",backgroundColor:"#d4edda",color:"#155724",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-3)",border:"1px solid #c3e6cb"},children:R}),t.jsx("h2",{style:{marginBottom:"var(--space-4)",color:"var(--color-text-primary)"},children:"Organizational Structure Management"}),t.jsxs("div",{style:{display:"flex",borderBottom:"2px solid var(--color-border)",marginBottom:"var(--space-4)"},children:[t.jsx("button",{onClick:()=>l("structures"),style:{padding:"var(--space-3)",backgroundColor:r==="structures"?"var(--color-primary)":"transparent",color:r==="structures"?"white":"var(--color-text-primary)",border:"none",borderBottom:r==="structures"?"3px solid var(--color-primary)":"none",cursor:"pointer",fontWeight:r==="structures"?"600":"400",fontSize:"var(--font-size-sm)"},children:" Structures"}),t.jsx("button",{onClick:()=>l("form"),style:{padding:"var(--space-3)",backgroundColor:r==="form"?"var(--color-primary)":"transparent",color:r==="form"?"white":"var(--color-text-primary)",border:"none",borderBottom:r==="form"?"3px solid var(--color-primary)":"none",cursor:"pointer",fontWeight:r==="form"?"600":"400",fontSize:"var(--font-size-sm)"},children:" Add/Edit Structure"}),t.jsx("button",{onClick:()=>l("relations_list"),style:{padding:"var(--space-3)",backgroundColor:r==="relations_list"?"var(--color-primary)":"transparent",color:r==="relations_list"?"white":"var(--color-text-primary)",border:"none",borderBottom:r==="relations_list"?"3px solid var(--color-primary)":"none",cursor:"pointer",fontWeight:r==="relations_list"?"600":"400",fontSize:"var(--font-size-sm)"},children:" Relations List"}),t.jsx("button",{onClick:()=>l("relations_form"),style:{padding:"var(--space-3)",backgroundColor:r==="relations_form"?"var(--color-primary)":"transparent",color:r==="relations_form"?"white":"var(--color-text-primary)",border:"none",borderBottom:r==="relations_form"?"3px solid var(--color-primary)":"none",cursor:"pointer",fontWeight:r==="relations_form"?"600":"400",fontSize:"var(--font-size-sm)"},children:" Add/Edit Relation"})]}),r==="structures"&&t.jsx(Cj,{loading:S,structures:c,handleEdit:A,handleSelectStructureForRelations:re,setActiveTab:l,handleDelete:Q}),r==="form"&&t.jsx(Sj,{editingId:h,formData:m,handleFormChange:Y,handleSubmit:he,handleCancel:te}),r==="relations_list"&&t.jsx(wj,{selectedStructure:x,loading:S,relations:g,handleEditRelation:le,handleDeleteRelation:w,setActiveTab:l}),r==="relations_form"&&t.jsx(kj,{selectedStructure:x,editingRelation:k,handleSubmitRelation:Ne,relationFormData:M,handleRelationFormChange:xe,structures:c,handleCancelRelation:z,setActiveTab:l})]})},Nj=()=>{var ke,Ee,G,P,_e,Te;const{user:r,isSuperuser:l}=fs(),[c,u]=d.useState("assets"),[m,p]=d.useState(!1),[h,y]=d.useState(""),[g,v]=d.useState(null),[x,j]=d.useState(!1),[M,I]=d.useState(null),[k,H]=d.useState(""),[S,V]=d.useState(!1),[se,N]=d.useState(""),[R,W]=d.useState(!1),[K,Y]=d.useState(null),[he,A]=d.useState(null),[Q,te]=d.useState(!1),[re,xe]=d.useState(""),[Ne,le]=d.useState(0),w=d.useMemo(()=>{var T;return l?!0:((T=r==null?void 0:r.roles)==null?void 0:T.some(Re=>Re.role_code==="maintenance_chief"||Re.role_code==="exploitation_chief"))||!1},[l,r]);d.useEffect(()=>{(async()=>{try{p(!0),y("");const Re=await Nh.get();v(Re)}catch{y("Failed to load your items")}finally{p(!1)}})()},[]);const z=(T,Re)=>!T||T.length===0?t.jsxs("div",{className:"empty-state",children:[t.jsx("h3",{className:"empty-state-title",children:"No items"}),t.jsx("p",{className:"empty-state-text",children:"You don't currently own any items in this category."})]}):t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsx("tr",{children:Re.map(ee=>t.jsx("th",{children:ee.label},ee.key))})}),t.jsx("tbody",{children:T.map(ee=>t.jsx("tr",{children:Re.map(Ie=>t.jsx("td",{children:Ie.render(ee)},Ie.key))},ee.id))})]}),X=T=>{N(""),y(""),I(T),H(""),j(!0)},F=async()=>{var T,Re;if(M){if(!k.trim()){y("Please enter an observation");return}try{if(V(!0),y(""),N(""),await Ci.create({item_type:M.item_type,item_id:M.item_id,owner_observation:k.trim()}),j(!1),I(null),H(""),N("Report submitted successfully"),w&&c==="reports"){const ee=await Ci.getAll()}}catch(ee){const Ie=((Re=(T=ee==null?void 0:ee.response)==null?void 0:T.data)==null?void 0:Re.error)||(ee==null?void 0:ee.message)||"Failed to submit report";y(typeof Ie=="string"?Ie:"Failed to submit report")}finally{V(!1)}}},fe=(T,Re)=>!T||T.length===0?t.jsxs("div",{className:"empty-state",children:[t.jsx("h3",{className:"empty-state-title",children:"No history"}),t.jsx("p",{className:"empty-state-text",children:"No previous ownership records found."})]}):t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsx("tr",{children:Re.map(ee=>t.jsx("th",{children:ee.label},ee.key))})}),t.jsx("tbody",{children:T.map(ee=>t.jsx("tr",{children:Re.map(Ie=>t.jsx("td",{children:Ie.render(ee)},Ie.key))},ee.assignment_id))})]}),C=async T=>{var Re,ee;Y(T),A(null),xe(""),te(!0),le(0),W(!0);try{const Ie=await Nh.getAssetMaintenances(T.id);A(Ie.maintenances||[])}catch(Ie){const We=((ee=(Re=Ie==null?void 0:Ie.response)==null?void 0:Re.data)==null?void 0:ee.error)||(Ie==null?void 0:Ie.message)||"Failed to load maintenance data";xe(typeof We=="string"?We:"Failed to load maintenance data")}finally{te(!1)}},$=()=>{W(!1),Y(null),A(null),xe("")},oe=T=>T?new Date(T).toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",ye=T=>{if(!T)return"pending";const Re=T.toLowerCase();return Re.includes("done")||Re.includes("completed")?"done":Re.includes("fail")?"failed":Re.includes("cancel")?"cancelled":Re.includes("in progress")||Re.includes("in_progress")?"in-progress":Re.includes("started")?"started":(Re.includes("pending"),"pending")},Me=()=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.75-13a.75.75 0 00-1.5 0v5c0 .414.336.75.75.75h4a.75.75 0 000-1.5h-3.25V5z",clipRule:"evenodd"})}),Ae=()=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{d:"M10 8a3 3 0 100-6 3 3 0 000 6zM3.465 14.493a1.23 1.23 0 00.41 1.412A9.957 9.957 0 0010 18c2.31 0 4.438-.784 6.131-2.1.43-.333.604-.903.408-1.41a7.002 7.002 0 00-13.074.003z"})}),E=()=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M14.5 10a4.5 4.5 0 004.284-5.882c-.105-.324-.51-.391-.752-.15L15.34 6.66a.454.454 0 01-.493.11 3.01 3.01 0 01-1.618-1.616.455.455 0 01.11-.494l2.694-2.692c.24-.241.174-.647-.15-.752a4.5 4.5 0 00-5.873 4.575c.055.873-.128 1.808-.8 2.368l-7.23 6.024a2.724 2.724 0 103.837 3.837l6.024-7.23c.56-.672 1.495-.855 2.368-.8.096.007.193.01.291.01zM5 16a1 1 0 11-2 0 1 1 0 012 0z",clipRule:"evenodd"})}),ie=()=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M 10 1 a .75 .75 0 0 1 .75 .75 v 1.5 a .75 .75 0 0 1 -1.5 0 v -1.5 A .75 .75 0 0 1 10 1 Z M 10 14.5 a .75 .75 0 0 1 .75 .75 v 3 a .75 .75 0 0 1 -1.5 0 v -3 a .75 .75 0 0 1 .75 -.75 Z M 10 8.5 a .75 .75 0 0 1 .75 .75 v 1.5 a .75 .75 0 0 1 -1.5 0 v -1.5 A .75 .75 0 0 1 10 8.5 Z M 10 5 a 1.5 1.5 0 1 0 0 3 a 1.5 1.5 0 0 0 0 -3 Z M 10 12 a 1.5 1.5 0 1 0 0 3 a 1.5 1.5 0 0 0 0 -3 Z",clipRule:"evenodd"})}),L=()=>{if(Q)return t.jsxs("div",{className:"empty-state",children:[t.jsx("div",{className:"loading-spinner",style:{margin:"0 auto"}}),t.jsx("p",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading maintenance data..."})]});if(re)return t.jsx("div",{className:"empty-state",children:t.jsx("p",{style:{color:"var(--color-error)"},children:re})});if(!he||he.length===0)return t.jsxs("div",{className:"timeline-empty",children:[t.jsx("div",{className:"timeline-empty-icon",children:""}),t.jsx("p",{children:"No maintenance records found for this asset."})]});const T=he[Ne];if(!T)return null;const Re=ye(T.maintenance_status);return t.jsxs(t.Fragment,{children:[he.length>1&&t.jsx("div",{className:"maintenance-selector",children:he.map((ee,Ie)=>t.jsxs("button",{className:`maintenance-selector-btn ${Ie===Ne?"active":""}`,onClick:()=>le(Ie),children:["#",ee.maintenance_id,t.jsx("span",{className:`maintenance-status-badge status-${ye(ee.maintenance_status)}`,style:{padding:"1px 6px",fontSize:"0.625rem"},children:ee.maintenance_status||"pending"})]},ee.maintenance_id))}),t.jsxs("div",{className:"maintenance-header-card",children:[t.jsxs("div",{className:"maintenance-header-top",children:[t.jsxs("h3",{className:"maintenance-header-title",children:["Maintenance #",T.maintenance_id]}),t.jsx("span",{className:`maintenance-status-badge status-${Re}`,children:T.maintenance_status||"pending"})]}),t.jsxs("div",{className:"maintenance-header-meta",children:[T.performed_by_name&&t.jsxs("span",{children:[t.jsx("span",{className:"meta-label",children:"Technician:"})," ",T.performed_by_name]}),T.approved_by_name&&t.jsxs("span",{children:[t.jsx("span",{className:"meta-label",children:"Approved by:"})," ",T.approved_by_name]}),T.start_datetime&&t.jsxs("span",{children:[t.jsx("span",{className:"meta-label",children:"Started:"})," ",oe(T.start_datetime)]}),T.end_datetime&&t.jsxs("span",{children:[t.jsx("span",{className:"meta-label",children:"Ended:"})," ",oe(T.end_datetime)]})]}),T.description&&t.jsx("div",{className:"maintenance-header-desc",children:T.description})]}),T.steps&&T.steps.length>0?t.jsx("div",{className:"timeline",children:T.steps.map(ee=>{const Ie=ye(ee.status);return t.jsxs("div",{className:"timeline-item",children:[t.jsx("div",{className:`timeline-dot dot-${Ie}`}),t.jsxs("div",{className:"timeline-card",children:[t.jsxs("div",{className:"timeline-card-header",children:[t.jsx("span",{className:"timeline-step-title",children:ee.step_description||`Step #${ee.maintenance_step_id}`}),t.jsx("span",{className:`timeline-step-badge step-${Ie}`,children:ee.status||"pending"})]}),t.jsxs("div",{className:"timeline-card-meta",children:[ee.performer_name&&t.jsxs("div",{className:"timeline-card-meta-item",children:[t.jsx(Ae,{}),t.jsx("span",{className:"meta-value",children:ee.performer_name})]}),t.jsxs("div",{className:"timeline-card-meta-item",children:[t.jsx(Me,{}),t.jsx("span",{className:"meta-value",children:oe(ee.start_datetime)})]}),ee.end_datetime&&t.jsxs("div",{className:"timeline-card-meta-item",children:[t.jsx(Me,{}),t.jsxs("span",{className:"meta-value",children:[" ",oe(ee.end_datetime)]})]}),ee.operation_type&&t.jsxs("div",{className:"timeline-card-meta-item",children:[t.jsx(E,{}),t.jsx("span",{className:"meta-value",children:ee.operation_type})]})]})]})]},ee.maintenance_step_id)})}):t.jsxs("div",{className:"timeline-empty",children:[t.jsx("div",{className:"timeline-empty-icon",children:""}),t.jsx("p",{children:"No steps recorded for this maintenance yet."})]})]})},O=(((ke=g==null?void 0:g.assets)==null?void 0:ke.current)||[]).map(T=>({id:T.asset_id,name:T.asset_name||`Asset ${T.asset_id}`,status:T.asset_status,inventory:T.asset_inventory_number,serial:T.asset_serial_number})),Se=((Ee=g==null?void 0:g.assets)==null?void 0:Ee.history)||[],we=(((G=g==null?void 0:g.stock_items)==null?void 0:G.current)||[]).map(T=>({id:T.stock_item_id,name:T.stock_item_name||`Stock Item ${T.stock_item_id}`,status:T.stock_item_status,inventory:T.stock_item_inventory_number})),Ke=((P=g==null?void 0:g.stock_items)==null?void 0:P.history)||[],Ue=(((_e=g==null?void 0:g.consumables)==null?void 0:_e.current)||[]).map(T=>({id:T.consumable_id,name:T.consumable_name||`Consumable ${T.consumable_id}`,status:T.consumable_status,inventory:T.consumable_inventory_number,serial:T.consumable_serial_number})),ze=((Te=g==null?void 0:g.consumables)==null?void 0:Te.history)||[],Ye={assets:[{key:"id",label:"ID",render:T=>T.id},{key:"name",label:"Name",render:T=>T.name},{key:"inventory",label:"Inventory #",render:T=>T.inventory||"-"},{key:"serial",label:"Serial #",render:T=>T.serial||"-"},{key:"status",label:"Status",render:T=>T.status||"-"},{key:"actions",label:"Actions",render:T=>t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",flexWrap:"wrap"},children:[t.jsxs("button",{className:"btn-track",onClick:()=>C(T),id:`track-maintenance-${T.id}`,children:[t.jsx(ie,{}),"Track Maintenance"]}),t.jsx("button",{className:"btn btn-secondary",onClick:()=>X({item_type:"asset",item_id:T.id,item_label:T.name}),style:{padding:"0.25rem 0.5rem"},children:"Report problem"})]})}],stock_items:[{key:"id",label:"ID",render:T=>T.id},{key:"name",label:"Name",render:T=>T.name},{key:"inventory",label:"Inventory #",render:T=>T.inventory||"-"},{key:"status",label:"Status",render:T=>T.status||"-"},{key:"actions",label:"Actions",render:T=>t.jsx("button",{className:"btn btn-secondary",onClick:()=>X({item_type:"stock_item",item_id:T.id,item_label:T.name}),style:{padding:"0.25rem 0.5rem"},children:"Report problem"})}],consumables:[{key:"id",label:"ID",render:T=>T.id},{key:"name",label:"Name",render:T=>T.name},{key:"inventory",label:"Inventory #",render:T=>T.inventory||"-"},{key:"serial",label:"Serial #",render:T=>T.serial||"-"},{key:"status",label:"Status",render:T=>T.status||"-"},{key:"actions",label:"Actions",render:T=>t.jsx("button",{className:"btn btn-secondary",onClick:()=>X({item_type:"consumable",item_id:T.id,item_label:T.name}),style:{padding:"0.25rem 0.5rem"},children:"Report problem"})}]},Fe={assets:[{key:"assignment_id",label:"Assignment ID",render:T=>T.assignment_id},{key:"asset_id",label:"Asset ID",render:T=>{var Re;return(Re=T.asset)==null?void 0:Re.asset_id}},{key:"name",label:"Name",render:T=>{var Re,ee;return((Re=T.asset)==null?void 0:Re.asset_name)||`Asset ${(ee=T.asset)==null?void 0:ee.asset_id}`}},{key:"start",label:"Start",render:T=>T.start_datetime?new Date(T.start_datetime).toLocaleString():"-"},{key:"end",label:"End",render:T=>T.end_datetime?new Date(T.end_datetime).toLocaleString():"-"},{key:"condition",label:"Condition",render:T=>T.condition_on_assignment||"-"}],stock_items:[{key:"assignment_id",label:"Assignment ID",render:T=>T.assignment_id},{key:"stock_item_id",label:"Stock Item ID",render:T=>{var Re;return(Re=T.stock_item)==null?void 0:Re.stock_item_id}},{key:"name",label:"Name",render:T=>{var Re,ee;return((Re=T.stock_item)==null?void 0:Re.stock_item_name)||`Stock Item ${(ee=T.stock_item)==null?void 0:ee.stock_item_id}`}},{key:"start",label:"Start",render:T=>T.start_datetime?new Date(T.start_datetime).toLocaleString():"-"},{key:"end",label:"End",render:T=>T.end_datetime?new Date(T.end_datetime).toLocaleString():"-"},{key:"condition",label:"Condition",render:T=>T.condition_on_assignment||"-"}],consumables:[{key:"assignment_id",label:"Assignment ID",render:T=>T.assignment_id},{key:"consumable_id",label:"Consumable ID",render:T=>{var Re;return(Re=T.consumable)==null?void 0:Re.consumable_id}},{key:"name",label:"Name",render:T=>{var Re,ee;return((Re=T.consumable)==null?void 0:Re.consumable_name)||`Consumable ${(ee=T.consumable)==null?void 0:ee.consumable_id}`}},{key:"start",label:"Start",render:T=>T.start_datetime?new Date(T.start_datetime).toLocaleString():"-"},{key:"end",label:"End",render:T=>T.end_datetime?new Date(T.end_datetime).toLocaleString():"-"},{key:"condition",label:"Condition",render:T=>T.condition_on_assignment||"-"}]};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",children:[t.jsx("h1",{className:"page-title",children:"My Items"}),t.jsx("p",{className:"page-subtitle",children:"View what you currently own and your ownership history"})]}),se&&t.jsx("div",{className:"card",style:{marginBottom:"var(--space-6)",borderColor:"var(--color-success)"},children:t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-success)"},children:se})}),h&&t.jsx("div",{className:"card",style:{marginBottom:"var(--space-6)",borderColor:"var(--color-error)"},children:t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-error)"},children:h})}),t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"card-header",style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx("button",{className:`btn ${c==="assets"?"btn-primary":"btn-secondary"}`,onClick:()=>u("assets"),children:"Assets"}),t.jsx("button",{className:`btn ${c==="stock_items"?"btn-primary":"btn-secondary"}`,onClick:()=>u("stock_items"),children:"Stock Items"}),t.jsx("button",{className:`btn ${c==="consumables"?"btn-primary":"btn-secondary"}`,onClick:()=>u("consumables"),children:"Consumables"})]}),t.jsx("div",{className:"table-container",children:m?t.jsxs("div",{className:"empty-state",children:[t.jsx("div",{className:"loading-spinner",style:{margin:"0 auto"}}),t.jsx("p",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{padding:"var(--space-4)",borderBottom:"1px solid var(--color-border)"},children:t.jsx("h2",{style:{margin:0,fontSize:"var(--font-size-md)"},children:"Currently Owned"})}),c==="assets"&&z(O,Ye.assets),c==="stock_items"&&z(we,Ye.stock_items),c==="consumables"&&z(Ue,Ye.consumables),t.jsx("div",{style:{padding:"var(--space-4)",borderTop:"1px solid var(--color-border)",borderBottom:"1px solid var(--color-border)"},children:t.jsx("h2",{style:{margin:0,fontSize:"var(--font-size-md)"},children:"Ownership History"})}),c==="assets"&&fe(Se,Fe.assets),c==="stock_items"&&fe(Ke,Fe.stock_items),c==="consumables"&&fe(ze,Fe.consumables)]})})]}),x&&t.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"var(--space-6)",zIndex:50},onClick:()=>{S||(j(!1),I(null))},children:t.jsxs("div",{className:"card",style:{width:"100%",maxWidth:600},onClick:T=>T.stopPropagation(),children:[t.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:"Report a problem"}),t.jsx("button",{className:"btn btn-secondary",onClick:()=>{S||(j(!1),I(null))},children:"Close"})]}),t.jsxs("div",{style:{padding:"var(--space-4)"},children:[t.jsx("div",{style:{marginBottom:"var(--space-3)",color:"var(--color-text-secondary)"},children:M?`${M.item_label} (${M.item_type} #${M.item_id})`:""}),t.jsx("label",{style:{display:"block",marginBottom:"var(--space-2)",fontWeight:500},children:"Observation"}),t.jsx("textarea",{value:k,onChange:T=>H(T.target.value),rows:4,style:{width:"100%",padding:"var(--space-3)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",resize:"vertical",fontFamily:"inherit",fontSize:"var(--font-size-sm)",boxSizing:"border-box"}}),t.jsxs("div",{style:{marginTop:"var(--space-4)",display:"flex",justifyContent:"flex-end",gap:"var(--space-2)"},children:[t.jsx("button",{className:"btn btn-secondary",onClick:()=>{S||(j(!1),I(null))},disabled:S,children:"Cancel"}),t.jsx("button",{className:"btn btn-primary",onClick:F,disabled:S,children:S?"Submitting...":"Submit report"})]})]})]})}),R&&t.jsx("div",{className:"modal-overlay",onClick:$,children:t.jsxs("div",{className:"card maintenance-timeline-modal",onClick:T=>T.stopPropagation(),children:[t.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("h2",{style:{margin:0,fontSize:"var(--font-size-lg)",display:"flex",alignItems:"center",gap:"var(--space-2)"},children:[t.jsx(E,{}),"Maintenance Timeline"]}),t.jsx("button",{className:"btn btn-secondary",onClick:$,children:"Close"})]}),K&&t.jsx("div",{style:{padding:"var(--space-3) var(--space-6)",borderBottom:"1px solid var(--color-border)",background:"rgba(255,255,255,0.01)"},children:t.jsxs("span",{style:{color:"var(--color-text-muted)",fontSize:"var(--font-size-sm)"},children:["Asset: ",t.jsx("strong",{style:{color:"var(--color-text-primary)"},children:K.name}),K.inventory&&t.jsxs("span",{style:{marginLeft:"var(--space-3)",color:"var(--color-text-muted)"},children:["INV# ",K.inventory]})]})}),t.jsx("div",{style:{padding:"var(--space-6)"},children:L()})]})})]})},Rj=()=>{const{user:r,isSuperuser:l}=fs(),[c,u]=d.useState(!1),[m,p]=d.useState(""),[h,y]=d.useState([]),[g,v]=d.useState([]),[x,j]=d.useState(!1),[M,I]=d.useState(null),[k,H]=d.useState(""),[S,V]=d.useState(""),[se,N]=d.useState(!1),[R,W]=d.useState(!1),[K,Y]=d.useState(null),[he,A]=d.useState(!1),Q=d.useMemo(()=>{var w;return l?!0:((w=r==null?void 0:r.roles)==null?void 0:w.some(z=>z.role_code==="maintenance_chief"||z.role_code==="exploitation_chief"))||!1},[l,r]),te=d.useMemo(()=>{var w;return l?!0:((w=r==null?void 0:r.roles)==null?void 0:w.some(z=>z.role_code==="maintenance_chief"))||!1},[l,r]),re=async()=>{try{u(!0),p("");const w=await Ci.getAll();y(Array.isArray(w)?w:[])}catch{p("Failed to load reports")}finally{u(!1)}};d.useEffect(()=>{Q&&re()},[Q]),d.useEffect(()=>{const w=async()=>{try{const z=await Wn.getAll({role:"maintenance_technician"});v(Array.isArray(z)?z:[])}catch{v([])}};te&&w()},[te]);const xe=w=>{p(""),I(w),H(""),V((w==null?void 0:w.owner_observation)||""),j(!0)},Ne=async w=>{if(w.item_type==="asset")try{A(!0),p("");const z=await As.getById(w.item_id);Y(z),W(!0)}catch{p("Failed to load asset details")}finally{A(!1)}},le=async w=>{var z,X;if(w.preventDefault(),!!M){if(!k){p("Please select a technician");return}try{N(!0),p(""),await Ci.createMaintenance({item_type:M.item_type,report_id:M.report_id,technician_person_id:k,description:S}),j(!1),I(null),H(""),V("")}catch(F){const fe=((X=(z=F==null?void 0:F.response)==null?void 0:z.data)==null?void 0:X.error)||(F==null?void 0:F.message)||"Failed to create maintenance";p(typeof fe=="string"?fe:"Failed to create maintenance")}finally{N(!1)}}};return Q?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",children:[t.jsx("h1",{className:"page-title",children:"Reports"}),t.jsx("p",{className:"page-subtitle",children:"View reported problems on owned items"})]}),m&&t.jsx("div",{className:"card",style:{marginBottom:"var(--space-6)",borderColor:"var(--color-error)"},children:t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-error)"},children:m})}),t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h2",{style:{margin:0,fontSize:"var(--font-size-lg)"},children:"All Reports"}),t.jsx("button",{className:"btn btn-secondary",onClick:re,disabled:c,children:"Refresh"})]}),t.jsx("div",{className:"table-container",children:c?t.jsxs("div",{className:"empty-state",children:[t.jsx("div",{className:"loading-spinner",style:{margin:"0 auto"}}),t.jsx("p",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading..."})]}):h.length===0?t.jsxs("div",{className:"empty-state",children:[t.jsx("h3",{className:"empty-state-title",children:"No reports"}),t.jsx("p",{className:"empty-state-text",children:"No problem reports have been submitted yet."})]}):t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Report ID"}),t.jsx("th",{children:"Type"}),t.jsx("th",{children:"Item ID"}),t.jsx("th",{children:"Person"}),t.jsx("th",{children:"Date"}),t.jsx("th",{children:"Observation"}),te&&t.jsx("th",{children:"Actions"})]})}),t.jsx("tbody",{children:h.map(w=>t.jsxs("tr",{children:[t.jsx("td",{children:w.report_id}),t.jsx("td",{children:w.item_type}),t.jsx("td",{children:w.item_type==="asset"?t.jsx("button",{className:"btn btn-secondary",style:{padding:"0.25rem 0.5rem",fontSize:"0.875rem"},onClick:()=>Ne(w),disabled:he,children:w.item_id}):w.item_id}),t.jsx("td",{children:w.person_name||w.person_id}),t.jsx("td",{children:w.report_datetime?new Date(w.report_datetime).toLocaleString():"-"}),t.jsx("td",{children:w.owner_observation}),te&&t.jsx("td",{children:t.jsx("button",{className:"btn btn-secondary",onClick:()=>xe(w),children:"Create maintenance"})})]},`${w.item_type}-${w.report_id}`))})]})})]}),x&&t.jsx("div",{className:"modal-overlay",onClick:()=>!se&&j(!1),children:t.jsxs("div",{className:"modal",onClick:w=>w.stopPropagation(),children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Create Maintenance"}),t.jsx("button",{className:"modal-close",onClick:()=>!se&&j(!1),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsxs("form",{onSubmit:le,children:[t.jsxs("div",{className:"modal-body",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Report"}),t.jsxs("div",{className:"form-input",style:{backgroundColor:"#f5f5f5"},children:["#",M==null?void 0:M.report_id," (",M==null?void 0:M.item_type," #",M==null?void 0:M.item_id,")"]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"technician",className:"form-label",children:"Technician"}),t.jsxs("select",{id:"technician",className:"form-input",value:k,onChange:w=>H(w.target.value),children:[t.jsx("option",{value:"",children:"-- Select Technician --"}),g.map(w=>t.jsxs("option",{value:w.person_id,children:[w.first_name," ",w.last_name]},w.person_id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),t.jsx("textarea",{id:"description",className:"form-input",rows:4,value:S,onChange:w=>V(w.target.value)})]})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>!se&&j(!1),children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:se,children:se?"Creating...":"Create"})]})]})]})}),R&&K&&t.jsx("div",{className:"modal-overlay",onClick:()=>W(!1),children:t.jsxs("div",{className:"modal",onClick:w=>w.stopPropagation(),children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Asset Details"}),t.jsx("button",{className:"modal-close",onClick:()=>W(!1),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsx("div",{className:"modal-body",children:t.jsxs("div",{style:{display:"grid",gap:"var(--space-3)"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Asset ID:"})," ",K.asset_id]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Name:"})," ",K.asset_name||"-"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Serial Number:"})," ",K.asset_serial_number||"-"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Inventory Number:"})," ",K.asset_inventory_number||"-"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Service Tag:"})," ",K.asset_service_tag||"-"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Status:"})," ",K.asset_status||"-"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Model:"})," ",K.asset_model_name||K.asset_model||"-"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Brand:"})," ",K.brand_name||"-"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Type:"})," ",K.asset_type_label||"-"]})]})}),t.jsx("div",{className:"modal-footer",children:t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>W(!1),children:"Close"})})]})})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",children:[t.jsx("h1",{className:"page-title",children:"Reports"}),t.jsx("p",{className:"page-subtitle",children:"Problem reports"})]}),t.jsx("div",{className:"card",children:t.jsx("div",{style:{padding:"var(--space-4)"},children:"Forbidden"})})]})},Mj=()=>{var G;const r=It(),[l,c]=d.useState([]),[u,m]=d.useState([]),[p,h]=d.useState({}),[y,g]=d.useState(!0),[v,x]=d.useState(!1),[j,M]=d.useState(null),[I,k]=d.useState(null),[H,S]=d.useState({attribution_order_full_code:"",attribution_order_date:new Date().toISOString().split("T")[0],warehouse:"",attribution_order_barcode:""}),[V,se]=d.useState([]),[N,R]=d.useState({asset_type:"",asset_model:"",quantity:1}),[W,K]=d.useState("list"),[Y,he]=d.useState([]),[A,Q]=d.useState(null),[te,re]=d.useState([]),[xe,Ne]=d.useState(!1),[le,w]=d.useState({report_full_code:"",digital_copy:null}),[z,X]=d.useState(null),[F,fe]=d.useState(!1),[C,$]=d.useState({stock_items:[],consumables:[]}),[oe,ye]=Ms(),Me=P=>P?P.startsWith("JVBERi0")?"application/pdf":P.startsWith("/9j/")?"image/jpeg":P.startsWith("iVBORw0K")?"image/png":"application/octet-stream":"application/octet-stream";d.useEffect(()=>{try{const Te=JSON.parse(sessionStorage.getItem("attribution_order_create_draft_assets")||"[]");Array.isArray(Te)&&Te.length>0&&(se(Te),[...new Set(Te.map(Re=>Re.asset_type).filter(Boolean))].forEach(async Re=>{try{const ee=await yt.getByAssetType(Re);h(Ie=>({...Ie,[Re]:ee}))}catch{console.error("Failed to fetch models for type",Re)}}))}catch{}try{const Te=JSON.parse(sessionStorage.getItem("attribution_order_create_draft_order_data")||"null");Te&&S(Te)}catch{}const P=oe.get("mode"),_e=oe.get("orderId");P==="create"?(K("create"),oe.delete("mode"),ye(oe)):_e&&((async()=>{try{const T=await Xr.getById(_e);if(T){Q(T),K("detail");const Re=await As.getAll({attribution_order:T.attribution_order_id});re(Re.results||Re||[])}}catch(T){console.error("Failed to load order:",T)}})(),oe.delete("orderId"),ye(oe))},[]),d.useEffect(()=>{O()},[]),d.useEffect(()=>{const P=oe.get("mode"),_e=oe.get("orderId");W==="list"&&!P&&!_e&&(L(),Q(null),re([]),X(null),Ne(!1),$({stock_items:[],consumables:[]}))},[W]);const Ae=P=>{try{sessionStorage.setItem("attribution_order_create_draft_assets",JSON.stringify(P))}catch{}},E=P=>{try{sessionStorage.setItem("attribution_order_create_draft_order_data",JSON.stringify(P))}catch{}},ie=async P=>{Q(P),K("detail"),g(!0),X(null);try{const _e=await As.getAll({attribution_order:P.attribution_order_id});re(_e.results||_e||[]);const Te=await wi.getAll({attribution_order:P.attribution_order_id}),T=Te.results||Te||[];if(T.length>0&&T[0].receipt_report){const ee=T[0].receipt_report,Ie=await ru.getById(ee);X(Ie)}const Re=await Xr.getIncludedItems(P.attribution_order_id);$(Re)}catch{M("Failed to fetch assets or receipt for this order")}finally{g(!1)}},L=async()=>{g(!0);try{const P=await Xr.getAll();he(P)}catch{M("Failed to fetch attribution orders")}finally{g(!1)}},O=async()=>{g(!0),M(null);try{const[P,_e]=await Promise.all([jy.getAll(),Vs.getAll()]);c(P),m(_e),g(!1)}catch{M("Failed to fetch initial data"),g(!1)}},Se=P=>{const _e={...H,[P.target.name]:P.target.value};S(_e),E(_e)},we=async(P,_e,Te)=>{const T=[...V];if(T[P][_e]=Te,_e==="asset_type"&&(T[P].asset_model="",Te&&!p[Te]))try{const Re=await yt.getByAssetType(Te);h(ee=>({...ee,[Te]:Re}))}catch{console.error("Failed to fetch models for type",Te)}se(T),Ae(T)},Ke=async P=>{if(R(_e=>({..._e,asset_type:P,asset_model:""})),P&&!p[P])try{const _e=await yt.getByAssetType(P);h(Te=>({...Te,[P]:_e}))}catch{console.error("Failed to fetch models for type",P)}},Ue=()=>{const P=Number(N.quantity);if(!N.asset_type||!N.asset_model||!Number.isFinite(P)||P<1)return;const _e=Date.now(),Te=Array.from({length:P},(T,Re)=>({id:_e+Re,asset_type:N.asset_type,asset_model:N.asset_model,asset_serial_number:"",asset_inventory_number:"",asset_name:""}));se(T=>{const Re=[...T,...Te];return Ae(Re),Re}),R(T=>({...T,quantity:1}))},ze=()=>{const P=[...V,{id:Date.now(),asset_type:"",asset_model:"",asset_serial_number:"",asset_inventory_number:"",asset_name:""}];se(P),Ae(P)},Ye=P=>{if(V.length>0){const _e=V.filter((Te,T)=>T!==P);se(_e),Ae(_e)}},Fe=(P,_e)=>{Ae(V);const Te=W==="create"?"create":A==null?void 0:A.attribution_order_id;r(`/dashboard/attribution-orders/assets/${P.id}/included-items/${_e}?context=${Te}`)},ke=async P=>{var _e,Te;P.preventDefault(),x(!0),M(null),k(null);try{let T={};try{T=JSON.parse(sessionStorage.getItem("attribution_order_create_draft_included_items")||"{}")}catch{T={}}const ee=(await Xr.create(H)).attribution_order_id;console.log("[handleSubmit] draftIncluded:",T),console.log("[handleSubmit] assets:",V);for(const Ie of V){const{id:We,...Qt}=Ie,lt=(T==null?void 0:T[String(We)])||(T==null?void 0:T[We])||null;console.log(`[handleSubmit] Asset id: ${We}, String(id): ${String(We)}`),console.log(`[handleSubmit] draftForRow for asset ${We}:`,lt);const $t={...Qt,attribution_order:ee,asset_status:"In Stock",included_stock_items:Array.isArray(lt==null?void 0:lt.stock_items)?lt.stock_items:[],included_consumables:Array.isArray(lt==null?void 0:lt.consumables)?lt.consumables:[]};console.log(`[handleSubmit] Sending payload for asset ${We}:`,$t),await As.create($t)}k("Attribution Order and Assets created successfully!"),S({attribution_order_full_code:"",attribution_order_date:new Date().toISOString().split("T")[0],warehouse:"",attribution_order_barcode:""}),se([]);try{sessionStorage.removeItem("attribution_order_create_draft_assets"),sessionStorage.removeItem("attribution_order_create_draft_order_data"),sessionStorage.removeItem("attribution_order_create_draft_included_items")}catch{}setTimeout(()=>K("list"),2e3)}catch(T){console.error(T),M(((Te=(_e=T.response)==null?void 0:_e.data)==null?void 0:Te.error)||"Failed to create Attribution Order and Assets")}finally{x(!1)}},Ee=async P=>{var _e,Te;P.preventDefault(),x(!0),M(null),k(null);try{const T=new FormData;T.append("report_full_code",le.report_full_code),le.digital_copy&&T.append("digital_copy",le.digital_copy);const Re=await ru.create(T);await wi.create({warehouse:A.warehouse,attribution_order:A.attribution_order_id,receipt_report:Re.receipt_report_id,operation:"entry"}),k("Receipt Report successfully created and linked to this order."),Ne(!1),w({report_full_code:"",digital_copy:null}),X(Re)}catch(T){console.error(T),M(((Te=(_e=T.response)==null?void 0:_e.data)==null?void 0:Te.error)||"Failed to create Receipt Report")}finally{x(!1)}};return y?t.jsx("div",{className:"loading",children:"Loading..."}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsx("h1",{className:"page-title",children:W==="list"?"Attribution Orders":W==="detail"?`Order Details: ${(A==null?void 0:A.attribution_order_full_code)||""}`:"Create Attribution Order"}),t.jsx("p",{className:"page-subtitle",children:W==="list"?"Consult and manage your attribution orders":W==="detail"?"Consult associated order details and assets":"Register new equipment and link them to an attribution order"}),W==="detail"&&t.jsx("button",{className:"btn btn-secondary",onClick:()=>K("list"),style:{marginTop:"var(--space-2)"},title:"Back","aria-label":"Back",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})]}),W!=="list"&&W!=="detail"&&t.jsx("button",{className:"btn btn-secondary",onClick:()=>K("list"),title:"Back to List","aria-label":"Back to List",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})]}),j&&t.jsx("div",{className:"error-message",children:j}),I&&t.jsx("div",{className:"badge badge-success",style:{padding:"var(--space-4)",width:"100%",marginBottom:"var(--space-4)",borderRadius:"var(--radius-md)"},children:I}),W==="list"?t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"card-header",children:[t.jsx("h2",{className:"card-title",children:"All Attribution Orders"}),t.jsx("button",{className:"btn btn-primary",style:{width:"auto"},onClick:()=>K("create"),children:"+ New Order"})]}),t.jsx("div",{className:"table-container",children:t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Full Code"}),t.jsx("th",{children:"Date"}),t.jsx("th",{children:"Barcode"}),t.jsx("th",{children:"ID"})]})}),t.jsx("tbody",{children:Y.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"var(--space-4)"},children:"No attribution orders found."})}):Y.map(P=>t.jsxs("tr",{onClick:()=>ie(P),style:{cursor:"pointer"},className:"hover-row",children:[t.jsx("td",{style:{fontWeight:"500",color:"var(--color-primary)"},children:P.attribution_order_full_code}),t.jsx("td",{children:new Date(P.attribution_order_date).toLocaleDateString()}),t.jsx("td",{children:P.attribution_order_barcode||"-"}),t.jsxs("td",{children:["#",P.attribution_order_id]})]},P.attribution_order_id))})]})})]}):W==="detail"?t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"var(--space-6)"},children:[t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"Order Information"})}),t.jsx("div",{className:"card-body",children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"var(--space-6)"},children:[t.jsxs("div",{children:[t.jsx("label",{className:"form-label",children:"Full Code"}),t.jsx("div",{style:{fontSize:"var(--font-size-md)",fontWeight:"500"},children:A==null?void 0:A.attribution_order_full_code})]}),t.jsxs("div",{children:[t.jsx("label",{className:"form-label",children:"Date"}),t.jsx("div",{style:{fontSize:"var(--font-size-md)"},children:A?new Date(A.attribution_order_date).toLocaleDateString():""})]}),t.jsxs("div",{children:[t.jsx("label",{className:"form-label",children:"Warehouse"}),t.jsx("div",{style:{fontSize:"var(--font-size-md)"},children:A&&((G=l.find(P=>P.warehouse_id===A.warehouse))==null?void 0:G.warehouse_name)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"form-label",children:"Barcode"}),t.jsx("div",{style:{fontSize:"var(--font-size-md)"},children:(A==null?void 0:A.attribution_order_barcode)||"-"})]})]})})]}),z&&t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"Receipt Report"})}),t.jsx("div",{className:"card-body",children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"var(--space-6)"},children:[t.jsxs("div",{children:[t.jsx("label",{className:"form-label",children:"Report Code"}),t.jsx("div",{style:{fontSize:"var(--font-size-md)",fontWeight:"500"},children:z.report_full_code||"-"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"form-label",children:"Report Date"}),t.jsx("div",{style:{fontSize:"var(--font-size-md)"},children:z.report_datetime?new Date(z.report_datetime).toLocaleString():"-"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"form-label",children:"Digital Copy"}),t.jsx("div",{style:{fontSize:"var(--font-size-md)"},children:z.digital_copy?t.jsx("button",{type:"button",onClick:()=>fe(!0),className:"btn btn-primary",style:{padding:"var(--space-2) var(--space-4)",fontSize:"var(--font-size-sm)"},children:"Consult Report"}):t.jsx("span",{style:{color:"var(--color-text-light)"},children:"No file attached"})})]})]})})]}),A&&!z&&t.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:t.jsx("button",{className:`btn btn-${xe?"secondary":"primary"}`,onClick:()=>Ne(!xe),children:xe?"Cancel Receipt Report":"Create Receipt Report"})}),xe&&t.jsxs("div",{className:"card",style:{border:"2px solid var(--color-primary)"},children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"New Receipt Report"})}),t.jsx("div",{className:"card-body",children:t.jsxs("form",{onSubmit:Ee,children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"var(--space-6)",marginBottom:"var(--space-6)"},children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Report Full Code"}),t.jsx("input",{type:"text",className:"form-input",value:le.report_full_code,onChange:P=>w({...le,report_full_code:P.target.value}),placeholder:"e.g. PV-2024-001",required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Digital Copy (Attachment)"}),t.jsx("input",{type:"file",className:"form-input",onChange:P=>w({...le,digital_copy:P.target.files[0]}),accept:"image/*,application/pdf"})]})]}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:v,children:v?"Submitting...":"Save Receipt Report"})]})})]}),t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"Associated Assets"})}),t.jsx("div",{className:"table-container",children:t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Asset Name"}),t.jsx("th",{children:"Inventory #"}),t.jsx("th",{children:"Serial #"}),t.jsx("th",{children:"Status"})]})}),t.jsx("tbody",{children:te.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"var(--space-4)"},children:"No assets linked to this order."})}):te.map(P=>{var _e;return t.jsxs("tr",{children:[t.jsx("td",{style:{fontWeight:"500"},children:P.asset_name||"-"}),t.jsx("td",{children:P.asset_inventory_number||"-"}),t.jsx("td",{children:P.asset_serial_number||"-"}),t.jsx("td",{children:t.jsx("span",{className:`status-badge status-${(_e=P.asset_status)==null?void 0:_e.replace(/\s+/g,"-").toLowerCase()}`,children:P.asset_status})})]},P.asset_id)})})]})})]}),C.stock_items.length>0&&t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"Included Stock Items"})}),t.jsx("div",{className:"table-container",children:t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Item Name"}),t.jsx("th",{children:"Model"}),t.jsx("th",{children:"Asset"}),t.jsx("th",{children:"Status"})]})}),t.jsx("tbody",{children:C.stock_items.map(P=>{var _e;return t.jsxs("tr",{children:[t.jsx("td",{style:{fontWeight:"500"},children:P.name||"-"}),t.jsx("td",{children:P.model||"-"}),t.jsx("td",{children:P.asset_name||`Asset #${P.asset_id}`}),t.jsx("td",{children:t.jsx("span",{className:`status-badge status-${(_e=P.status)==null?void 0:_e.replace(/\s+/g,"-").toLowerCase()}`,children:P.status})})]},P.id)})})]})})]}),C.consumables.length>0&&t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"Included Consumables"})}),t.jsx("div",{className:"table-container",children:t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Item Name"}),t.jsx("th",{children:"Model"}),t.jsx("th",{children:"Asset"}),t.jsx("th",{children:"Status"})]})}),t.jsx("tbody",{children:C.consumables.map(P=>{var _e;return t.jsxs("tr",{children:[t.jsx("td",{style:{fontWeight:"500"},children:P.name||"-"}),t.jsx("td",{children:P.model||"-"}),t.jsx("td",{children:P.asset_name||`Asset #${P.asset_id}`}),t.jsx("td",{children:t.jsx("span",{className:`status-badge status-${(_e=P.status)==null?void 0:_e.replace(/\s+/g,"-").toLowerCase()}`,children:P.status})})]},P.id)})})]})})]})]}):t.jsxs("form",{onSubmit:ke,children:[t.jsxs("div",{className:"card",style:{marginBottom:"var(--space-8)"},children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"Order Information"})}),t.jsx("div",{className:"card-body",children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"var(--space-6)"},children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Full Code"}),t.jsx("input",{type:"text",name:"attribution_order_full_code",className:"form-input",value:H.attribution_order_full_code,onChange:Se,placeholder:"e.g. ORD-2024-001",required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Date"}),t.jsx("input",{type:"date",name:"attribution_order_date",className:"form-input",value:H.attribution_order_date,onChange:Se,required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Warehouse"}),t.jsxs("select",{name:"warehouse",className:"form-input",value:H.warehouse,onChange:Se,required:!0,children:[t.jsx("option",{value:"",children:"Select Warehouse"}),l.map(P=>t.jsx("option",{value:P.warehouse_id,children:P.warehouse_name},P.warehouse_id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Barcode"}),t.jsx("input",{type:"text",name:"attribution_order_barcode",className:"form-input",value:H.attribution_order_barcode,onChange:Se,placeholder:"Scan barcode..."})]})]})})]}),t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h2",{className:"card-title",children:"Assets"}),t.jsxs("button",{type:"button",onClick:ze,className:"btn btn-secondary",style:{padding:"var(--space-2) var(--space-4)",fontSize:"var(--font-size-sm)"},children:[t.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginRight:"var(--space-2)"},children:[t.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Asset"]})]}),t.jsx("div",{className:"card-body",style:{paddingTop:0},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(180px, 1fr) minmax(180px, 1fr) minmax(120px, 180px) auto",gap:"var(--space-4)",alignItems:"end",marginBottom:"var(--space-6)"},children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Bulk Type"}),t.jsxs("select",{className:"form-input",value:N.asset_type,onChange:P=>Ke(P.target.value),children:[t.jsx("option",{value:"",children:"Select Type"}),u.map(P=>t.jsx("option",{value:P.asset_type_id,children:P.asset_type_label},P.asset_type_id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Bulk Model"}),t.jsxs("select",{className:"form-input",value:N.asset_model,onChange:P=>R(_e=>({..._e,asset_model:P.target.value})),disabled:!N.asset_type,children:[t.jsx("option",{value:"",children:"Select Model"}),(p[N.asset_type]||[]).map(P=>t.jsx("option",{value:P.asset_model_id,children:P.model_name},P.asset_model_id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Quantity"}),t.jsx("input",{type:"number",className:"form-input",min:"1",value:N.quantity,onChange:P=>R(_e=>({..._e,quantity:P.target.value}))})]}),t.jsx("button",{type:"button",className:"btn btn-primary",onClick:Ue,disabled:!N.asset_type||!N.asset_model||Number(N.quantity)<1,style:{padding:"var(--space-2) var(--space-4)",height:"40px"},children:"Add Quantity"})]})}),t.jsx("div",{className:"table-container",children:t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Type"}),t.jsx("th",{children:"Model"}),t.jsx("th",{children:"Serial Number"}),t.jsx("th",{children:"Inventory ID"}),t.jsx("th",{children:"Name"}),t.jsx("th",{style:{textAlign:"center"},children:"Actions"})]})}),t.jsx("tbody",{children:V.map((P,_e)=>t.jsxs("tr",{children:[t.jsx("td",{children:t.jsxs("select",{className:"form-input",style:{padding:"var(--space-2)",minWidth:"140px"},value:P.asset_type,onChange:Te=>we(_e,"asset_type",Te.target.value),required:!0,children:[t.jsx("option",{value:"",children:"Select Type"}),u.map(Te=>t.jsx("option",{value:Te.asset_type_id,children:Te.asset_type_label},Te.asset_type_id))]})}),t.jsx("td",{children:t.jsxs("select",{className:"form-input",style:{padding:"var(--space-2)",minWidth:"140px"},value:P.asset_model,onChange:Te=>we(_e,"asset_model",Te.target.value),required:!0,disabled:!P.asset_type,children:[t.jsx("option",{value:"",children:"Select Model"}),(p[P.asset_type]||[]).map(Te=>t.jsx("option",{value:Te.asset_model_id,children:Te.model_name},Te.asset_model_id))]})}),t.jsx("td",{children:t.jsx("input",{type:"text",className:"form-input",style:{padding:"var(--space-2)"},value:P.asset_serial_number,onChange:Te=>we(_e,"asset_serial_number",Te.target.value),placeholder:"S/N"})}),t.jsx("td",{children:t.jsx("input",{type:"text",className:"form-input",style:{padding:"var(--space-2)"},value:P.asset_inventory_number,onChange:Te=>we(_e,"asset_inventory_number",Te.target.value),placeholder:"Inv #",maxLength:"6"})}),t.jsx("td",{children:t.jsx("input",{type:"text",className:"form-input",style:{padding:"var(--space-2)"},value:P.asset_name,onChange:Te=>we(_e,"asset_name",Te.target.value),placeholder:"Asset Name"})}),t.jsxs("td",{style:{textAlign:"center",whiteSpace:"nowrap"},children:[t.jsx("button",{type:"button",onClick:()=>Fe(P,"stock"),className:"btn btn-secondary",style:{padding:"6px",marginRight:"8px"},disabled:!P.asset_model,title:P.asset_model?"Configure included stock items":"Select a model first",children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),t.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),t.jsx("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]})}),t.jsx("button",{type:"button",onClick:()=>Fe(P,"consumables"),className:"btn btn-secondary",style:{padding:"6px",marginRight:"8px"},disabled:!P.asset_model,title:P.asset_model?"Configure included consumables":"Select a model first",children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M12 2v6m0 0v14m0-14c-2 0-6 1-6 5s4 5 6 5 6-1 6-5-4-5-6-5z"}),t.jsx("path",{d:"M6 12c0 4 2.5 8 6 10 3.5-2 6-6 6-10",fill:"none"})]})}),t.jsx("button",{type:"button",onClick:()=>Ye(_e),className:"logout-btn",title:"Remove row",disabled:V.length===0,children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("polyline",{points:"3 6 5 6 21 6"}),t.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]},P.id))})]})})]}),t.jsx("div",{style:{marginTop:"var(--space-8)",display:"flex",justifyContent:"flex-end"},children:t.jsx("button",{type:"submit",className:"btn btn-primary",style:{width:"auto",minWidth:"200px"},disabled:v,children:v?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"loading-spinner",style:{marginRight:"var(--space-2)"}}),"Creating..."]}):"Create Attribution Order & Assets"})})]}),F&&(z==null?void 0:z.digital_copy)&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"var(--space-6)"},onClick:()=>fe(!1),children:t.jsxs("div",{className:"card",style:{width:"100%",maxWidth:"900px",height:"90vh",display:"flex",flexDirection:"column",padding:"var(--space-4)"},onClick:P=>P.stopPropagation(),children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--space-4)"},children:[t.jsxs("h2",{style:{margin:0},children:["Consult Receipt Report: ",z.report_full_code||"Attachment"]}),t.jsx("button",{className:"btn btn-secondary",onClick:()=>fe(!1),children:"Close"})]}),Me(z.digital_copy)==="application/pdf"?t.jsx("iframe",{title:"Receipt Report Preview",src:`data:application/pdf;base64,${z.digital_copy}`,style:{flexGrow:1,border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",width:"100%",height:"100%"}}):t.jsx("div",{style:{flexGrow:1,overflow:"auto",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"var(--color-bg-alt)",borderRadius:"var(--radius-md)"},children:t.jsx("img",{src:`data:${Me(z.digital_copy)};base64,${z.digital_copy}`,alt:"Receipt Report Preview",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}})})]})})]})},Tj="attribution_order_create_draft_assets",Jd="attribution_order_create_draft_included_items",Mh=()=>{const r=It(),{rowId:l,itemKind:c}=al(),[u]=Ms(),m=u.get("context"),p=c==="stock"||c==="consumables"?c:"all",[h,y]=d.useState([]),[g,v]=d.useState([]),[x,j]=d.useState([]),[M,I]=d.useState([]),[k,H]=d.useState({}),[S,V]=d.useState({}),[se,N]=d.useState(!1),[R,W]=d.useState(null),K=d.useMemo(()=>{try{return JSON.parse(sessionStorage.getItem(Tj)||"[]").find(X=>String(X.id)===String(l))||null}catch{return null}},[l]);d.useEffect(()=>{const z=async()=>{N(!0),W(null);try{const[C,$]=await Promise.all([Pa.getAll(),es.getAll()]);y(Array.isArray(C)?C:(C==null?void 0:C.results)||[]),v(Array.isArray($)?$:($==null?void 0:$.results)||[])}catch{W("Failed to fetch models")}finally{N(!1)}},X=()=>{try{const C=JSON.parse(sessionStorage.getItem(Jd)||"{}"),$=(C==null?void 0:C[l])||{};return $.stock_item_instances&&H($.stock_item_instances),$.consumable_instances&&V($.consumable_instances),{hasDraft:!!$.stock_item_instances||!!$.consumable_instances}}catch{return{hasDraft:!1}}},F=async()=>{if(K!=null&&K.asset_model){N(!0),W(null);try{const[C,$]=await Promise.all([yt.getDefaultStockItems(K.asset_model),yt.getDefaultConsumables(K.asset_model)]),oe=Array.isArray(C)?C:(C==null?void 0:C.results)||[],ye=Array.isArray($)?$:($==null?void 0:$.results)||[];j(oe),I(ye);const Me={};oe.forEach(E=>{const ie=Math.max(1,Number(E.quantity)||1);Me[E.stock_item_model]=Array.from({length:ie},()=>({stock_item_name:"",stock_item_inventory_number:""}))}),H(Me);const Ae={};ye.forEach(E=>{const ie=Math.max(1,Number(E.quantity)||1);Ae[E.consumable_model]=Array.from({length:ie},()=>({consumable_name:"",consumable_serial_number:"",consumable_inventory_number:""}))}),V(Ae),A(Me,Ae)}catch{W("Failed to load default composition")}finally{N(!1)}}};z();const{hasDraft:fe}=X();fe?K!=null&&K.asset_model&&(async()=>{try{const[C,$]=await Promise.all([yt.getDefaultStockItems(K.asset_model),yt.getDefaultConsumables(K.asset_model)]);j(Array.isArray(C)?C:(C==null?void 0:C.results)||[]),I(Array.isArray($)?$:($==null?void 0:$.results)||[])}catch{}})():F()},[l,K==null?void 0:K.asset_model]);const Y=d.useMemo(()=>{const z=new Map;return(Array.isArray(h)?h:[]).forEach(X=>{z.set(X.stock_item_model_id,X)}),z},[h]),he=d.useMemo(()=>{const z=new Map;return(Array.isArray(g)?g:[]).forEach(X=>{z.set(X.consumable_model_id,X)}),z},[g]),A=(z,X)=>{let F={};try{F=JSON.parse(sessionStorage.getItem(Jd)||"{}")}catch{F={}}F[l]={stock_item_instances:z,consumable_instances:X,stock_items:Object.entries(z).map(([fe,C])=>({stock_item_model:Number(fe),quantity:C.length,instances:C})),consumables:Object.entries(X).map(([fe,C])=>({consumable_model:Number(fe),quantity:C.length,instances:C}))},sessionStorage.setItem(Jd,JSON.stringify(F))},Q=(z,X,F,fe)=>{const C={...k,[z]:k[z].map(($,oe)=>oe===X?{...$,[F]:fe}:$)};H(C),A(C,S)},te=(z,X,F,fe)=>{const C={...S,[z]:S[z].map(($,oe)=>oe===X?{...$,[F]:fe}:$)};V(C),A(k,C)},re=()=>{r(m==="create"?"/dashboard/attribution-orders?mode=create":m?`/dashboard/attribution-orders?orderId=${m}`:"/dashboard/attribution-orders")},xe=d.useMemo(()=>{const z=[];return x.forEach(X=>{const F=X.stock_item_model,fe=k[F]||[],C=Math.max(1,Number(X.quantity)||1);for(let $=0;$<C;$++)z.push({modelId:F,instanceIdx:$,instance:fe[$]||{stock_item_name:"",stock_item_inventory_number:""}})}),z},[x,k]),Ne=d.useMemo(()=>{const z=[];return M.forEach(X=>{const F=X.consumable_model,fe=S[F]||[],C=Math.max(1,Number(X.quantity)||1);for(let $=0;$<C;$++)z.push({modelId:F,instanceIdx:$,instance:fe[$]||{consumable_name:"",consumable_serial_number:"",consumable_inventory_number:""}})}),z},[M,S]),le=xe.length,w=Ne.length;return t.jsxs("div",{style:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"page-header",style:{marginBottom:"var(--space-4)"},children:[t.jsx("h1",{className:"page-title",children:"Attribution Orders"}),t.jsxs("p",{className:"page-subtitle",children:["Configure included items ",K!=null&&K.asset_name?` ${K.asset_name}`:""]})]}),R&&t.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"var(--space-4)",borderRadius:"var(--radius-sm)",marginBottom:"var(--space-4)",border:"1px solid #fcc"},children:R}),t.jsx("div",{className:"card",style:{padding:"var(--space-4)",marginBottom:"var(--space-4)"},children:t.jsxs("div",{style:{display:"flex",gap:"var(--space-3)",alignItems:"center",flexWrap:"wrap"},children:[t.jsx("button",{onClick:re,style:{padding:"var(--space-2) var(--space-3)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)",color:"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer"},title:"Back","aria-label":"Back",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})}),t.jsxs("div",{style:{color:"var(--color-text-secondary)"},children:["Stock items: ",le,"  Consumables: ",w]})]})}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:p==="all"?"1fr 1fr":"1fr",gap:"var(--space-6)",flex:1,minHeight:0},children:[(p==="all"||p==="stock")&&t.jsxs("div",{className:"card",style:{padding:"var(--space-4)",overflow:"auto",display:"flex",flexDirection:"column"},children:[t.jsx("div",{className:"card-header",style:{marginBottom:"var(--space-3)"},children:t.jsx("h2",{className:"card-title",children:"Default Stock Items"})}),xe.length===0?t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)"},children:"No default stock items for this asset model."}):t.jsx("div",{className:"table-container",children:t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:{width:"50px"},children:"#"}),t.jsx("th",{children:"Type"}),t.jsx("th",{children:"Model"}),t.jsx("th",{children:"Name"}),t.jsx("th",{children:"Inventory #"})]})}),t.jsx("tbody",{children:xe.map((z,X)=>{const F=Y.get(Number(z.modelId)),fe=(F==null?void 0:F.model_name)||`Model #${z.modelId}`,C=(F==null?void 0:F.model_code)||"",$=(F==null?void 0:F.stock_item_type_label)||"-";return t.jsxs("tr",{children:[t.jsx("td",{style:{color:"var(--color-text-secondary)"},children:X+1}),t.jsx("td",{children:$}),t.jsxs("td",{children:[t.jsx("div",{style:{fontWeight:"500"},children:fe}),C&&t.jsx("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:C})]}),t.jsx("td",{children:t.jsx("input",{type:"text",value:z.instance.stock_item_name||"",onChange:oe=>Q(z.modelId,z.instanceIdx,"stock_item_name",oe.target.value),style:{width:"100%",padding:"6px"},placeholder:"Enter name..."})}),t.jsx("td",{children:t.jsx("input",{type:"text",value:z.instance.stock_item_inventory_number||"",onChange:oe=>Q(z.modelId,z.instanceIdx,"stock_item_inventory_number",oe.target.value),style:{width:"100%",padding:"6px"},placeholder:"Enter inventory #..."})})]},`stock-${z.modelId}-${z.instanceIdx}`)})})]})})]}),(p==="all"||p==="consumables")&&t.jsxs("div",{className:"card",style:{padding:"var(--space-4)",overflow:"auto",display:"flex",flexDirection:"column"},children:[t.jsx("div",{className:"card-header",style:{marginBottom:"var(--space-3)"},children:t.jsx("h2",{className:"card-title",children:"Default Consumables"})}),Ne.length===0?t.jsx("div",{style:{padding:"var(--space-4)",color:"var(--color-text-secondary)"},children:"No default consumables for this asset model."}):t.jsx("div",{className:"table-container",children:t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:{width:"50px"},children:"#"}),t.jsx("th",{children:"Type"}),t.jsx("th",{children:"Model"}),t.jsx("th",{children:"Name"}),t.jsx("th",{children:"Serial #"}),t.jsx("th",{children:"Inventory #"})]})}),t.jsx("tbody",{children:Ne.map((z,X)=>{const F=he.get(Number(z.modelId)),fe=(F==null?void 0:F.model_name)||`Model #${z.modelId}`,C=(F==null?void 0:F.model_code)||"",$=(F==null?void 0:F.consumable_type_label)||"-";return t.jsxs("tr",{children:[t.jsx("td",{style:{color:"var(--color-text-secondary)"},children:X+1}),t.jsx("td",{children:$}),t.jsxs("td",{children:[t.jsx("div",{style:{fontWeight:"500"},children:fe}),C&&t.jsx("div",{style:{color:"var(--color-text-secondary)",fontSize:"var(--font-size-xs)"},children:C})]}),t.jsx("td",{children:t.jsx("input",{type:"text",value:z.instance.consumable_name||"",onChange:oe=>te(z.modelId,z.instanceIdx,"consumable_name",oe.target.value),style:{width:"100%",padding:"6px"},placeholder:"Enter name..."})}),t.jsx("td",{children:t.jsx("input",{type:"text",value:z.instance.consumable_serial_number||"",onChange:oe=>te(z.modelId,z.instanceIdx,"consumable_serial_number",oe.target.value),style:{width:"100%",padding:"6px"},placeholder:"Enter serial #..."})}),t.jsx("td",{children:t.jsx("input",{type:"text",value:z.instance.consumable_inventory_number||"",onChange:oe=>te(z.modelId,z.instanceIdx,"consumable_inventory_number",oe.target.value),style:{width:"100%",padding:"6px"},placeholder:"Enter inventory #..."})})]},`cons-${z.modelId}-${z.instanceIdx}`)})})]})})]})]})]})},Ej=()=>{var N;const{user:r}=fs(),l=(N=r==null?void 0:r.roles)==null?void 0:N.some(R=>R.role_code==="asset_responsible"),[c,u]=d.useState(!0),[m,p]=d.useState(null),[h,y]=d.useState(null),[g,v]=d.useState(!1),[x,j]=d.useState([]),[M,I]=d.useState({}),[k,H]=d.useState(!1),[S,V]=d.useState({attribution_order:"",administrative_serial_number:"",title_of_demand:"",organization_body_designation:"",register_number_or_book_journal_of_corpse:"",register_number_or_book_journal_of_establishment:"",is_signed_by_company:!1,is_signed_by_company_leader:!1,is_signed_by_regional_provider:!1,is_signed_by_company_representative:!1,digital_copy:null});d.useEffect(()=>{if(!l)return;(async()=>{u(!0),p(null),y(null);try{const[W,K]=await Promise.all([Yd.getAll(),Xr.getAll()]),Y=(W==null?void 0:W.results)||W||[];j(Y);const he=(K==null?void 0:K.results)||K||[],A={};he.forEach(Q=>{A[Q.attribution_order_id]=Q}),I(A)}catch{p("Failed to fetch company asset requests")}finally{u(!1)}})()},[l]);const se=async R=>{var W,K;R.preventDefault(),v(!0),p(null),y(null);try{const Y=new FormData;Y.append("attribution_order",S.attribution_order),S.administrative_serial_number&&Y.append("administrative_serial_number",S.administrative_serial_number),S.title_of_demand&&Y.append("title_of_demand",S.title_of_demand),S.organization_body_designation&&Y.append("organization_body_designation",S.organization_body_designation),S.register_number_or_book_journal_of_corpse&&Y.append("register_number_or_book_journal_of_corpse",S.register_number_or_book_journal_of_corpse),S.register_number_or_book_journal_of_establishment&&Y.append("register_number_or_book_journal_of_establishment",S.register_number_or_book_journal_of_establishment),Y.append("is_signed_by_company",!!S.is_signed_by_company),Y.append("is_signed_by_company_leader",!!S.is_signed_by_company_leader),Y.append("is_signed_by_regional_provider",!!S.is_signed_by_regional_provider),Y.append("is_signed_by_company_representative",!!S.is_signed_by_company_representative),S.digital_copy&&Y.append("digital_copy",S.digital_copy),await Yd.create(Y);const he=await Yd.getAll(),A=(he==null?void 0:he.results)||he||[];j(A),y("Company asset request created successfully"),H(!1),V({attribution_order:"",administrative_serial_number:"",title_of_demand:"",organization_body_designation:"",register_number_or_book_journal_of_corpse:"",register_number_or_book_journal_of_establishment:"",is_signed_by_company:!1,is_signed_by_company_leader:!1,is_signed_by_regional_provider:!1,is_signed_by_company_representative:!1,digital_copy:null})}catch(Y){p(((K=(W=Y.response)==null?void 0:W.data)==null?void 0:K.error)||"Failed to create company asset request")}finally{v(!1)}};return l?c?t.jsx("div",{className:"loading",children:"Loading..."}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"page-title",children:"Company Asset Requests"}),t.jsx("p",{className:"page-subtitle",children:"Consult company asset requests"})]}),t.jsx("div",{children:t.jsx("button",{className:`btn btn-${k?"secondary":"primary"}`,onClick:()=>H(!k),children:k?"Cancel":"+ New Request"})})]}),m&&t.jsx("div",{className:"error-message",children:m}),h&&t.jsx("div",{className:"badge badge-success",style:{padding:"var(--space-4)",width:"100%",marginBottom:"var(--space-4)",borderRadius:"var(--radius-md)"},children:h}),k&&t.jsxs("div",{className:"card",style:{marginBottom:"var(--space-6)",border:"2px solid var(--color-primary)"},children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"New Company Asset Request"})}),t.jsx("div",{className:"card-body",children:t.jsxs("form",{onSubmit:se,children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"var(--space-6)",marginBottom:"var(--space-6)"},children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Attribution Order"}),t.jsxs("select",{className:"form-input",value:S.attribution_order,onChange:R=>V({...S,attribution_order:R.target.value}),required:!0,children:[t.jsx("option",{value:"",children:"Select Attribution Order"}),Object.values(M).map(R=>t.jsx("option",{value:R.attribution_order_id,children:R.attribution_order_full_code||`#${R.attribution_order_id}`},R.attribution_order_id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Administrative Serial Number"}),t.jsx("input",{type:"text",className:"form-input",value:S.administrative_serial_number,onChange:R=>V({...S,administrative_serial_number:R.target.value}),placeholder:"e.g. ADM-2026-001"})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Title of Demand"}),t.jsx("input",{type:"text",className:"form-input",value:S.title_of_demand,onChange:R=>V({...S,title_of_demand:R.target.value}),placeholder:"Title"})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Organization Body Designation"}),t.jsx("input",{type:"text",className:"form-input",value:S.organization_body_designation,onChange:R=>V({...S,organization_body_designation:R.target.value}),placeholder:"Designation"})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Register Number / Book Journal of Corpse"}),t.jsx("input",{type:"text",className:"form-input",value:S.register_number_or_book_journal_of_corpse,onChange:R=>V({...S,register_number_or_book_journal_of_corpse:R.target.value}),placeholder:"Register #"})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Register Number / Book Journal of Establishment"}),t.jsx("input",{type:"text",className:"form-input",value:S.register_number_or_book_journal_of_establishment,onChange:R=>V({...S,register_number_or_book_journal_of_establishment:R.target.value}),placeholder:"Register #"})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Digital Copy (Attachment)"}),t.jsx("input",{type:"file",className:"form-input",onChange:R=>V({...S,digital_copy:R.target.files[0]}),accept:"image/*,application/pdf"})]}),t.jsxs("div",{className:"form-group",style:{display:"flex",flexDirection:"column",gap:"var(--space-2)"},children:[t.jsx("label",{className:"form-label",children:"Signatures"}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[t.jsx("input",{type:"checkbox",checked:!!S.is_signed_by_company,onChange:R=>V({...S,is_signed_by_company:R.target.checked})}),t.jsx("span",{children:"Signed by company"})]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[t.jsx("input",{type:"checkbox",checked:!!S.is_signed_by_company_leader,onChange:R=>V({...S,is_signed_by_company_leader:R.target.checked})}),t.jsx("span",{children:"Signed by company leader"})]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[t.jsx("input",{type:"checkbox",checked:!!S.is_signed_by_regional_provider,onChange:R=>V({...S,is_signed_by_regional_provider:R.target.checked})}),t.jsx("span",{children:"Signed by regional provider"})]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[t.jsx("input",{type:"checkbox",checked:!!S.is_signed_by_company_representative,onChange:R=>V({...S,is_signed_by_company_representative:R.target.checked})}),t.jsx("span",{children:"Signed by company representative"})]})]})]}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:g,children:g?"Creating...":"Create Request"})]})})]}),t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"All Requests"})}),t.jsx("div",{className:"table-container",children:t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"ID"}),t.jsx("th",{children:"Administrative #"}),t.jsx("th",{children:"Title"}),t.jsx("th",{children:"Attribution Order"}),t.jsx("th",{children:"Body Designation"}),t.jsx("th",{children:"Reg. (Corpse)"}),t.jsx("th",{children:"Reg. (Est.)"}),t.jsx("th",{children:"Signed (Company)"}),t.jsx("th",{children:"Signed (Leader)"}),t.jsx("th",{children:"Signed (Regional)"}),t.jsx("th",{children:"Signed (Representative)"}),t.jsx("th",{children:"Digital Copy"})]})}),t.jsx("tbody",{children:x.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:"12",style:{textAlign:"center",padding:"var(--space-4)"},children:"No company asset requests found."})}):x.map(R=>{const W=R.attribution_order,K=M[W];return t.jsxs("tr",{className:"hover-row",children:[t.jsxs("td",{children:["#",R.company_asset_request_id]}),t.jsx("td",{children:R.administrative_serial_number||"-"}),t.jsx("td",{children:R.title_of_demand||"-"}),t.jsx("td",{children:(K==null?void 0:K.attribution_order_full_code)||`#${W}`}),t.jsx("td",{children:R.organization_body_designation||"-"}),t.jsx("td",{children:R.register_number_or_book_journal_of_corpse||"-"}),t.jsx("td",{children:R.register_number_or_book_journal_of_establishment||"-"}),t.jsx("td",{children:R.is_signed_by_company?"Yes":"No"}),t.jsx("td",{children:R.is_signed_by_company_leader?"Yes":"No"}),t.jsx("td",{children:R.is_signed_by_regional_provider?"Yes":"No"}),t.jsx("td",{children:R.is_signed_by_company_representative?"Yes":"No"}),t.jsx("td",{children:R.digital_copy?"Yes":"No"})]},R.company_asset_request_id)})})]})})]})]}):t.jsx(Gs,{to:"/dashboard",replace:!0})},zj=()=>{var he;const{user:r}=fs(),l=(he=r==null?void 0:r.roles)==null?void 0:he.some(A=>A.role_code==="asset_responsible"),[c,u]=d.useState(!0),[m,p]=d.useState(null),[h,y]=d.useState(null),[g,v]=d.useState(!1),[x,j]=d.useState([]),[M,I]=d.useState({}),[k,H]=d.useState({}),[S,V]=d.useState({}),[se,N]=d.useState(!1),[R,W]=d.useState({warehouse:"",attribution_order:"",receipt_report:"",interested_organization:"ESAM/2RM",operation:"",format:"21x27",is_signed_by_warehouse_storage_magaziner:!1,is_signed_by_warehouse_storage_accountant:!1,is_signed_by_warehouse_storage_marketer:!1,is_signed_by_warehouse_it_chief:!1,is_signed_by_warehouse_leader:!1,digital_copy:null}),K=async()=>{u(!0),p(null),y(null);try{const[A,Q,te]=await Promise.all([wi.getAll(),Xr.getAll(),jy.getAll()]),re=(A==null?void 0:A.results)||A||[];j(re);const xe=(Q==null?void 0:Q.results)||Q||[],Ne={};xe.forEach(X=>{Ne[X.attribution_order_id]=X}),I(Ne);const le=(te==null?void 0:te.results)||te||[],w={};le.forEach(X=>{w[X.warehouse_id]=X}),H(w);const z=Array.from(new Set(re.map(X=>X.receipt_report).filter(X=>!!X)));if(z.length===0)V({});else{const X=await Promise.all(z.map(async fe=>{try{const C=await ru.getById(fe);return[fe,C]}catch{return[fe,null]}})),F={};X.forEach(([fe,C])=>{C&&(F[fe]=C)}),V(F)}}catch{p("Failed to fetch administrative certificates")}finally{u(!1)}};d.useEffect(()=>{l&&K()},[l]);const Y=async A=>{var Q,te;A.preventDefault(),v(!0),p(null),y(null);try{if(R.operation&&!["entry","exit","transfer"].includes(R.operation)){p("Operation must be entry, exit, or transfer");return}const re=new FormData;R.warehouse&&re.append("warehouse",R.warehouse),R.attribution_order&&re.append("attribution_order",R.attribution_order),R.receipt_report&&re.append("receipt_report",R.receipt_report),R.interested_organization&&re.append("interested_organization",R.interested_organization),R.operation&&re.append("operation",R.operation),R.format&&re.append("format",R.format),re.append("is_signed_by_warehouse_storage_magaziner",!!R.is_signed_by_warehouse_storage_magaziner),re.append("is_signed_by_warehouse_storage_accountant",!!R.is_signed_by_warehouse_storage_accountant),re.append("is_signed_by_warehouse_storage_marketer",!!R.is_signed_by_warehouse_storage_marketer),re.append("is_signed_by_warehouse_it_chief",!!R.is_signed_by_warehouse_it_chief),re.append("is_signed_by_warehouse_leader",!!R.is_signed_by_warehouse_leader),R.digital_copy&&re.append("digital_copy",R.digital_copy),await wi.create(re),await K(),y("Administrative certificate created successfully"),N(!1),W({warehouse:"",attribution_order:"",receipt_report:"",interested_organization:"ESAM/2RM",operation:"",format:"21x27",is_signed_by_warehouse_storage_magaziner:!1,is_signed_by_warehouse_storage_accountant:!1,is_signed_by_warehouse_storage_marketer:!1,is_signed_by_warehouse_it_chief:!1,is_signed_by_warehouse_leader:!1,digital_copy:null})}catch(re){p(((te=(Q=re.response)==null?void 0:Q.data)==null?void 0:te.error)||"Failed to create administrative certificate")}finally{v(!1)}};return l?c?t.jsx("div",{className:"loading",children:"Loading..."}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"page-title",children:"Administrative Certificates"}),t.jsx("p",{className:"page-subtitle",children:"Consult and create administrative certificates"})]}),t.jsx("div",{children:t.jsx("button",{className:`btn btn-${se?"secondary":"primary"}`,onClick:()=>N(!se),children:se?"Cancel":"+ New Certificate"})})]}),m&&t.jsx("div",{className:"error-message",children:m}),h&&t.jsx("div",{className:"badge badge-success",style:{padding:"var(--space-4)",width:"100%",marginBottom:"var(--space-4)",borderRadius:"var(--radius-md)"},children:h}),se&&t.jsxs("div",{className:"card",style:{marginBottom:"var(--space-6)",border:"2px solid var(--color-primary)"},children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"New Administrative Certificate"})}),t.jsx("div",{className:"card-body",children:t.jsxs("form",{onSubmit:Y,children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"var(--space-6)",marginBottom:"var(--space-6)"},children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Warehouse"}),t.jsxs("select",{className:"form-input",value:R.warehouse,onChange:A=>W({...R,warehouse:A.target.value}),children:[t.jsx("option",{value:"",children:"Select Warehouse"}),Object.values(k).map(A=>t.jsx("option",{value:A.warehouse_id,children:A.warehouse_name||`#${A.warehouse_id}`},A.warehouse_id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Attribution Order"}),t.jsxs("select",{className:"form-input",value:R.attribution_order,onChange:A=>W({...R,attribution_order:A.target.value}),children:[t.jsx("option",{value:"",children:"Select Attribution Order"}),Object.values(M).map(A=>t.jsx("option",{value:A.attribution_order_id,children:A.attribution_order_full_code||`#${A.attribution_order_id}`},A.attribution_order_id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Receipt Report ID"}),t.jsx("input",{type:"number",className:"form-input",value:R.receipt_report,onChange:A=>W({...R,receipt_report:A.target.value}),placeholder:"e.g. 1"})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Interested Organization"}),t.jsx("input",{type:"text",className:"form-input",value:R.interested_organization,onChange:A=>W({...R,interested_organization:A.target.value}),placeholder:"Organization"})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Operation"}),t.jsxs("select",{className:"form-input",value:R.operation,onChange:A=>W({...R,operation:A.target.value}),children:[t.jsx("option",{value:"",children:"Select Operation"}),t.jsx("option",{value:"entry",children:"entry"}),t.jsx("option",{value:"exit",children:"exit"}),t.jsx("option",{value:"transfer",children:"transfer"})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Format"}),t.jsx("input",{type:"text",className:"form-input",value:R.format,onChange:A=>W({...R,format:A.target.value}),placeholder:"Format"})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Digital Copy (Attachment)"}),t.jsx("input",{type:"file",className:"form-input",onChange:A=>W({...R,digital_copy:A.target.files[0]}),accept:"image/*,application/pdf"})]}),t.jsxs("div",{className:"form-group",style:{display:"flex",flexDirection:"column",gap:"var(--space-2)"},children:[t.jsx("label",{className:"form-label",children:"Signatures"}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[t.jsx("input",{type:"checkbox",checked:!!R.is_signed_by_warehouse_storage_magaziner,onChange:A=>W({...R,is_signed_by_warehouse_storage_magaziner:A.target.checked})}),t.jsx("span",{children:"Signed by magaziner"})]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[t.jsx("input",{type:"checkbox",checked:!!R.is_signed_by_warehouse_storage_accountant,onChange:A=>W({...R,is_signed_by_warehouse_storage_accountant:A.target.checked})}),t.jsx("span",{children:"Signed by accountant"})]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[t.jsx("input",{type:"checkbox",checked:!!R.is_signed_by_warehouse_storage_marketer,onChange:A=>W({...R,is_signed_by_warehouse_storage_marketer:A.target.checked})}),t.jsx("span",{children:"Signed by marketer"})]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[t.jsx("input",{type:"checkbox",checked:!!R.is_signed_by_warehouse_it_chief,onChange:A=>W({...R,is_signed_by_warehouse_it_chief:A.target.checked})}),t.jsx("span",{children:"Signed by IT chief"})]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[t.jsx("input",{type:"checkbox",checked:!!R.is_signed_by_warehouse_leader,onChange:A=>W({...R,is_signed_by_warehouse_leader:A.target.checked})}),t.jsx("span",{children:"Signed by warehouse leader"})]})]})]}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:g,children:g?"Creating...":"Create Certificate"})]})})]}),t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"All Certificates"})}),t.jsx("div",{className:"table-container",children:t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"ID"}),t.jsx("th",{children:"Warehouse"}),t.jsx("th",{children:"Attribution Order"}),t.jsx("th",{children:"Receipt Report"}),t.jsx("th",{children:"Interested Org"}),t.jsx("th",{children:"Operation"}),t.jsx("th",{children:"Format"}),t.jsx("th",{children:"Signed (Magaziner)"}),t.jsx("th",{children:"Signed (Accountant)"}),t.jsx("th",{children:"Signed (Marketer)"}),t.jsx("th",{children:"Signed (IT)"}),t.jsx("th",{children:"Signed (Leader)"}),t.jsx("th",{children:"Digital Copy"})]})}),t.jsx("tbody",{children:x.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:"13",style:{textAlign:"center",padding:"var(--space-4)"},children:"No administrative certificates found."})}):x.map(A=>{const Q=k[A.warehouse],te=M[A.attribution_order],re=S[A.receipt_report];return t.jsxs("tr",{className:"hover-row",children:[t.jsxs("td",{children:["#",A.administrative_certificate_id]}),t.jsx("td",{children:(Q==null?void 0:Q.warehouse_name)||(A.warehouse?`#${A.warehouse}`:"-")}),t.jsx("td",{children:(te==null?void 0:te.attribution_order_full_code)||(A.attribution_order?`#${A.attribution_order}`:"-")}),t.jsx("td",{children:(re==null?void 0:re.report_full_code)||(A.receipt_report?`#${A.receipt_report}`:"-")}),t.jsx("td",{children:A.interested_organization||"-"}),t.jsx("td",{children:A.operation||"-"}),t.jsx("td",{children:A.format||"-"}),t.jsx("td",{children:A.is_signed_by_warehouse_storage_magaziner?"Yes":"No"}),t.jsx("td",{children:A.is_signed_by_warehouse_storage_accountant?"Yes":"No"}),t.jsx("td",{children:A.is_signed_by_warehouse_storage_marketer?"Yes":"No"}),t.jsx("td",{children:A.is_signed_by_warehouse_it_chief?"Yes":"No"}),t.jsx("td",{children:A.is_signed_by_warehouse_leader?"Yes":"No"}),t.jsx("td",{children:A.digital_copy?"Yes":"No"})]},A.administrative_certificate_id)})})]})})]})]}):t.jsx(Gs,{to:"/dashboard",replace:!0})},Bj=()=>{var Ne;const{user:r}=fs(),l=(Ne=r==null?void 0:r.roles)==null?void 0:Ne.some(le=>le.role_code==="stock_consumable_responsible"),[c,u]=d.useState(!0),[m,p]=d.useState(null),[h,y]=d.useState(null),[g,v]=d.useState(null),[x,j]=d.useState([]),[M,I]=d.useState([]),[k,H]=d.useState({}),[S,V]=d.useState({}),[se,N]=d.useState({}),R=d.useMemo(()=>(x||[]).filter(le=>(le.status||"").toLowerCase()==="pending"),[x]),W=async()=>{u(!0),y(null),v(null);try{const[le,w]=await Promise.all([Vr.getAll(),Is.getAll()]),z=(le==null?void 0:le.results)||le||[];j(Array.isArray(z)?z:[]),I(Array.isArray(w)?w:[]);const X={};(Array.isArray(z)?z:[]).forEach(F=>{X[F.maintenance_step_item_request_id]={source_room_id:"",destination_room_id:"",stock_item_id:"",consumable_id:""}}),H(X)}catch{y("Failed to fetch item requests inbox")}finally{u(!1)}},K=async le=>{var z,X;const w=le.maintenance_step_item_request_id;p(w),y(null),v(null);try{const F=window.prompt("Rejection note (optional):","")??"",fe={};F!==""&&(fe.note=F),await Vr.reject(w,fe),v(`Request #${w} rejected successfully`),await W()}catch(F){y(((X=(z=F.response)==null?void 0:z.data)==null?void 0:X.error)||"Failed to reject request")}finally{p(null)}};d.useEffect(()=>{l&&W()},[l]);const Y=(le,w)=>{H(z=>({...z,[le]:{...z[le]||{},...w}}))},he=async le=>{try{const w=await Vr.eligibleItems(le.maintenance_step_item_request_id);return Array.isArray(w==null?void 0:w.results)?w.results:[]}catch{return[]}return[]},A=async le=>{const w=le.maintenance_step_item_request_id;N(z=>({...z,[w]:!0}));try{const z=await Vr.eligibleItems(w),X=Array.isArray(z==null?void 0:z.results)?z.results:[];V(F=>({...F,[w]:X}))}catch{V(z=>({...z,[w]:[]}))}finally{N(z=>({...z,[w]:!1}))}},Q=async le=>{const w=le.maintenance_step_item_request_id;se[w]||Array.isArray(S[w])||await A(le)},te=le=>{const w=Number(le);if(!w||Number.isNaN(w))return"";const z=M.find(X=>Number(X.room_id)===w);return z?`${z.room_name} (#${z.room_id})`:`#${w}`},re=async le=>{var X,F;const w=le.maintenance_step_item_request_id,z=k[w]||{};p(w),y(null),v(null);try{if(!z.source_room_id||!z.destination_room_id){y("Source room and destination room are required");return}const fe={source_room_id:Number(z.source_room_id),destination_room_id:Number(z.destination_room_id)};if(le.request_type==="stock_item"){if(!z.stock_item_id){y("stock_item_id is required");return}fe.stock_item_id=Number(z.stock_item_id)}else if(le.request_type==="consumable"){if(!z.consumable_id){y("consumable_id is required");return}fe.consumable_id=Number(z.consumable_id)}else{y("Invalid request type");return}await Vr.fulfill(w,fe),v(`Request #${w} fulfilled successfully`),await W()}catch(fe){y(((F=(X=fe.response)==null?void 0:X.data)==null?void 0:F.error)||"Failed to fulfill request")}finally{p(null)}},xe=async le=>{var z,X;const w=le.maintenance_step_item_request_id;p(w),y(null),v(null);try{const F=await Vr.selectRandom(w);F.request_type==="stock_item"?Y(w,{stock_item_id:F.stock_item_id?String(F.stock_item_id):"",source_room_id:F.source_room_id||""}):F.request_type==="consumable"?Y(w,{consumable_id:F.consumable_id?String(F.consumable_id):"",source_room_id:F.source_room_id||""}):y("Invalid selection response")}catch(F){y(((X=(z=F.response)==null?void 0:z.data)==null?void 0:X.error)||"Failed to select randomly")}finally{p(null)}};return l?c?t.jsx("div",{className:"loading",children:"Loading..."}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"page-header",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"page-title",children:"Item Requests Inbox"}),t.jsx("p",{className:"page-subtitle",children:"Fulfill maintenance step requests for stock items and consumables"})]}),t.jsx("div",{children:t.jsx("button",{className:"btn btn-secondary",onClick:W,children:"Refresh"})})]}),h&&t.jsx("div",{className:"error-message",children:h}),g&&t.jsx("div",{className:"badge badge-success",style:{padding:"var(--space-4)",width:"100%",marginBottom:"var(--space-4)",borderRadius:"var(--radius-md)"},children:g}),t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title",children:"Pending Requests"})}),t.jsx("div",{className:"card-body",children:R.length===0?t.jsx("div",{style:{opacity:.8},children:"No pending requests"}):t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"var(--space-4)"},children:R.map(le=>{const w=le.maintenance_step_item_request_id,z=k[w]||{},X=le.request_type==="stock_item"?le.requested_stock_item_model:le.requested_consumable_model;return t.jsxs("div",{className:"card",style:{border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)"},children:[t.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsxs("div",{className:"card-title",style:{marginBottom:4},children:["Request #",w]}),t.jsxs("div",{style:{fontSize:12,opacity:.85},children:["Type: ",t.jsx("b",{children:le.request_type})," | Step: ",t.jsx("b",{children:le.maintenance_step})," | Requested model id:"," ",t.jsx("b",{children:X||"-"})]})]}),t.jsxs("div",{style:{fontSize:12,opacity:.85},children:["Status: ",t.jsx("b",{children:le.status})]})]}),t.jsxs("div",{className:"card-body",children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"var(--space-4)",marginBottom:"var(--space-4)"},children:[le.request_type==="stock_item"?t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Stock Item"}),t.jsxs("select",{className:"form-input",value:z.stock_item_id,onChange:F=>{const fe=F.target.value,$=(S[w]||[]).find(oe=>String(oe.stock_item_id)===String(fe));Y(w,{stock_item_id:fe,source_room_id:($==null?void 0:$.current_room_id)||""})},onFocus:()=>Q(le),children:[t.jsx("option",{value:"",children:"Select stock item"}),(S[w]||[]).map(F=>t.jsxs("option",{value:F.stock_item_id,children:[F.stock_item_id,F.stock_item_inventory_number?` (${F.stock_item_inventory_number})`:""," - ",te(F.current_room_id)]},F.stock_item_id))]}),t.jsx("div",{style:{fontSize:12,opacity:.75,marginTop:6},children:se[w]?"Loading available items...":"Choose an available item that matches the requested model."})]}):t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Consumable"}),t.jsxs("select",{className:"form-input",value:z.consumable_id,onChange:F=>{const fe=F.target.value,$=(S[w]||[]).find(oe=>String(oe.consumable_id)===String(fe));Y(w,{consumable_id:fe,source_room_id:($==null?void 0:$.current_room_id)||""})},onFocus:()=>Q(le),children:[t.jsx("option",{value:"",children:"Select consumable"}),(S[w]||[]).map(F=>t.jsxs("option",{value:F.consumable_id,children:[F.consumable_id,F.consumable_inventory_number?` (${F.consumable_inventory_number})`:""," - ",te(F.current_room_id)]},F.consumable_id))]}),t.jsx("div",{style:{fontSize:12,opacity:.75,marginTop:6},children:se[w]?"Loading available items...":"Choose an available item that matches the requested model."})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Source Room"}),t.jsxs("select",{className:"form-input",value:z.source_room_id,onChange:()=>{},disabled:!0,children:[t.jsx("option",{value:"",children:"Source room (auto)"}),M.map(F=>t.jsxs("option",{value:F.room_id,children:[F.room_name," (#",F.room_id,")"]},F.room_id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Destination Room"}),t.jsxs("select",{className:"form-input",value:z.destination_room_id,onChange:F=>Y(w,{destination_room_id:F.target.value}),children:[t.jsx("option",{value:"",children:"Select destination room"}),M.map(F=>t.jsxs("option",{value:F.room_id,children:[F.room_name," (#",F.room_id,")"]},F.room_id))]})]})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-3)",alignItems:"center"},children:[t.jsx("button",{className:"btn btn-primary",disabled:m===w,onClick:()=>re(le),children:m===w?"Fulfilling...":"Fulfill"}),t.jsx("button",{className:"btn btn-secondary",disabled:m===w,onClick:()=>K(le),children:m===w?"Rejecting...":"Reject"}),t.jsx("button",{className:"btn btn-secondary",disabled:m===w,onClick:()=>xe(le),children:"Select randomly"}),t.jsx("button",{className:"btn btn-secondary",disabled:m===w,onClick:async()=>{const fe=(await he(le)).slice(0,20).map(C=>le.request_type==="stock_item"?`${C.stock_item_id} - ${C.stock_item_name||""} (model ${C.stock_item_model_id})`:`${C.consumable_id} - ${C.consumable_name||""} (model ${C.consumable_model_id})`).join(`
`);window.alert(fe||"No candidates found (or backend filtering not available).")},children:"Show candidates (top 20)"})]})]})]},w)})})})]})]}):t.jsx(Gs,{to:"/dashboard",replace:!0})},Dj=({maintenanceId:r,maintenancePerformedBy:l,maintenanceEnded:c,isChief:u,onStepsChange:m,canShowEndMaintenanceButton:p,endMaintenanceDisabled:h,onEndMaintenance:y})=>{var $e,ut,ta;const{user:g}=fs(),[v,x]=d.useState([]),[j,M]=d.useState([]),[I,k]=d.useState([]),[H,S]=d.useState([]),[V,se]=d.useState([]),[N,R]=d.useState([]),[W,K]=d.useState(!0),[Y,he]=d.useState(""),[A,Q]=d.useState(!1),[te,re]=d.useState(!1),[xe,Ne]=d.useState(!1),[le,w]=d.useState(null),[z,X]=d.useState(!1),[F,fe]=d.useState([]),[C,$]=d.useState(!1),[oe,ye]=d.useState(!1),[Me,Ae]=d.useState(null),[E,ie]=d.useState(""),[L,O]=d.useState([]),[Se,we]=d.useState(null),[Ke,Ue]=d.useState(""),[ze,Ye]=d.useState(!1),[Fe,ke]=d.useState(!1),[Ee,G]=d.useState(null),[P,_e]=d.useState(null),[Te,T]=d.useState(""),[Re,ee]=d.useState(""),[Ie,We]=d.useState([]),[Qt,lt]=d.useState(!1),[$t,Qe]=d.useState(null),[ba,Ze]=d.useState(!1),[Rt,De]=d.useState(null),[bt,qe]=d.useState({stock_items:[],consumables:[]}),[_a,pt]=d.useState(""),[Yt,ra]=d.useState(""),[la,rt]=d.useState([]),[jt,ja]=d.useState(""),[Na,Kt]=d.useState(!1),[Wt,Mt]=d.useState(!1),[St,hs]=d.useState(!1),[Pt,Ra]=d.useState(null),[ss,Ba]=d.useState([]),[pa,Tt]=d.useState(""),[ft,vt]=d.useState(""),[Xt,$a]=d.useState(""),[Da,Ya]=d.useState(""),[Ma,fa]=d.useState(""),[Gt,Ut]=d.useState(!1),[Bt,va]=d.useState(""),[oa,ht]=d.useState(""),Oa=d.useMemo(()=>["pending","started","pending (waiting for stock item)","pending (waiting for consumable)","In Progress","done","failed (to be sent to a higher level)","cancelled"],[]),ns=d.useMemo(()=>({pending:10,started:20,"pending (waiting for stock item)":30,"pending (waiting for consumable)":30,"In Progress":40,done:50,"failed (to be sent to a higher level)":50,cancelled:50}),[]),Vt=Z=>{const Be=Z==="in progress"?"In Progress":Z,Ve=ns[Be]??ns.pending,et=Oa.filter(qt=>{const zs=ns[qt];return zs==null?!1:zs>=Ve});if(Be==="started")return et.filter(qt=>qt!=="started");if(Be==="In Progress")for(const qt of["pending (waiting for stock item)","pending (waiting for consumable)"])et.includes(qt)||et.unshift(qt);return Be&&!et.includes(Be)&&ns[Be]!=null?[Be,...et]:et},Sa=d.useMemo(()=>{var Z;return((Z=g==null?void 0:g.person)==null?void 0:Z.person_id)===l},[g,l]),Wa=u||Sa,ys=d.useMemo(()=>!Array.isArray(F)||F.length===0?!1:F.some(Z=>{const Be=Z==null?void 0:Z.external_maintenance_status;if(Be)return Be!=="DRAFT"&&Be!=="RECEIVED_BY_COMPANY";const Ve=Z==null?void 0:Z.item_sent_to_external_maintenance_datetime,et=Z==null?void 0:Z.item_received_by_company_datetime;return!!Ve&&!et}),[F]),Ts=d.useMemo(()=>!Array.isArray(F)||F.length===0?!1:F.some(Z=>{const Be=Z==null?void 0:Z.external_maintenance_status;return Be?Be!=="RECEIVED_BY_COMPANY":!(Z==null?void 0:Z.item_received_by_company_datetime)}),[F]),Zs=()=>{w(null),X(!1),Ne(!1),re(!0)},rs=()=>{Ae(null),ie(""),ye(!1),$(!0)},La=()=>{re(!1),Ne(!1),w(null),X(!1)},ha=async Z=>{var Ve,et;Z.preventDefault();const Be=Array.isArray(F)?F[0]:null;if(!(Be!=null&&Be.external_maintenance_id)){Ae({type:"error",text:"No external maintenance found for this maintenance."});return}if(!E){Ae({type:"error",text:"Please select typical step."});return}try{ye(!0),Ae(null),await Yn.createStep(Number(Be.external_maintenance_id),Number(E)),Ae({type:"success",text:"External maintenance step created successfully."}),await be()}catch(qt){console.error(qt),Ae({type:"error",text:((et=(Ve=qt.response)==null?void 0:Ve.data)==null?void 0:et.error)||"Failed to create external maintenance step."})}finally{ye(!1)}},zt=()=>{Q(!1),va(""),ht("")},Ta=()=>{$(!1),ye(!1),Ae(null),ie("")};d.useEffect(()=>{La(),Ta(),zt(),be()},[r]),d.useEffect(()=>{c&&(ea(),zt(),Es(),ga(),Ga())},[c]);const qs=async Z=>{var Be,Ve;if(Z.preventDefault(),!z)try{Ne(!0),w(null),await Yn.createForMaintenance(Number(r)),w({type:"success",text:"External maintenance created successfully."}),X(!0)}catch(et){console.error(et),w({type:"error",text:((Ve=(Be=et.response)==null?void 0:Be.data)==null?void 0:Ve.error)||"Failed to create external maintenance."})}finally{Ne(!1)}},Ia=d.useMemo(()=>{const Z=(Array.isArray(v)?v:[]).map(Ve=>({...Ve,__step_type:"internal",__key:`internal-${Ve.maintenance_step_id}`})),Be=(Array.isArray(j)?j:[]).map(Ve=>({...Ve,__step_type:"external",__key:`external-${Ve.external_maintenance_step_id}`}));return[...Z,...Be]},[v,j]),ae=Z=>Z?Z.end_datetime?Z.is_successful===!0?"done":Z.is_successful===!1?"failed":"done":"In Progress":"-",be=async()=>{try{K(!0);const[Z,Be,Ve,et,qt,zs]=await Promise.all([fn.getAll({maintenance:r}),G_.getAll({maintenance:r}),Z_.getAll(),Wn.getAll({role:"maintenance_technician"}),Yn.getAll({maintenance:r}),W_.getAll()]);x(Z),typeof m=="function"&&m(Array.isArray(Z)?Z:[]),M(Array.isArray(Be)?Be:[]),k(Ve),S(et),fe(Array.isArray(qt)?qt:[]),O(Array.isArray(zs)?zs:[]);try{const xn=await X_.getAll();Ba(Array.isArray(xn)?xn:[])}catch(xn){console.error(xn),Ba([])}const[Bs,bs]=await Promise.all([Qs.getAll(),Xs.getAll()]);se(Array.isArray(Bs)?Bs:[]),R(Array.isArray(bs)?bs:[])}catch(Z){console.error(Z),he("Failed to load steps data")}finally{K(!1)}},Le=async Z=>{var Be,Ve;if(Z.preventDefault(),ys){he("Cannot create maintenance steps while the asset has an ongoing external maintenance.");return}if(Bt)try{await fn.create({maintenance:r,maintenance_typical_step_id:Bt,person_id:oa||(Sa?g.person.person_id:null)}),zt(),be()}catch(et){console.error(et);const qt=(Ve=(Be=et==null?void 0:et.response)==null?void 0:Be.data)==null?void 0:Ve.error;he(qt||"Failed to add step")}},Ge=async(Z,Be)=>{try{if(c){he("Maintenance is ended");return}await fn.patch(Z.maintenance_step_id,{maintenance_step_status:Be}),be()}catch(Ve){console.error(Ve),he("Failed to update step status")}},Dt=Z=>{if(c){he("Maintenance is ended");return}we(Z.maintenance_step_id),Z.maintenance_step_status==="started"?Ue(""):Ue(Z.maintenance_step_status||"")},ea=()=>{we(null),Ue(""),Ye(!1)},Es=()=>{ke(!1),G(null),_e(null),T(""),ee(""),We([]),lt(!1),Qe(null)},ga=()=>{Ze(!1),De(null),qe({stock_items:[],consumables:[]}),pt(""),ra(""),rt([]),ja(""),Kt(!1),Mt(!1)},Ga=()=>{hs(!1),Ra(null),Tt(""),vt(""),$a(""),Ya(""),fa(""),Ut(!1)},gn=Z=>{if(c){he("Maintenance is ended");return}hs(!0),Ra(Z),Tt(""),vt(""),$a(""),Ya(""),fa(""),Ut(!1)},Ua=async()=>{var Z,Be;if(Pt){if(!pa){he("Please select a condition");return}try{Ut(!0),await fn.updateAssetCondition(Pt.maintenance_step_id,{condition_id:Number(pa),notes:ft||null,cosmetic_issues:Xt||null,functional_issues:Da||null,recommendation:Ma||null}),await be(),Ga()}catch(Ve){console.error(Ve),he(((Be=(Z=Ve.response)==null?void 0:Z.data)==null?void 0:Be.error)||"Failed to update asset condition")}finally{Ut(!1)}}},Js=async Z=>{var Be,Ve;if(c){he("Maintenance is ended");return}Ze(!0),De(Z),qe({stock_items:[],consumables:[]}),pt(""),ra(""),rt([]),ja("");try{Kt(!0),await Ge(Z,"In Progress");const[et,qt]=await Promise.all([fn.getComponents(Z.maintenance_step_id),Is.getAll()]);qe({stock_items:Array.isArray(et==null?void 0:et.stock_items)?et.stock_items:[],consumables:Array.isArray(et==null?void 0:et.consumables)?et.consumables:[]}),rt(Array.isArray(qt)?qt:[])}catch(et){console.error(et),he(((Ve=(Be=et.response)==null?void 0:Be.data)==null?void 0:Ve.error)||"Failed to load components"),ga()}finally{Kt(!1)}},Fs=async()=>{var Z,Be;if(Rt){if(!_a||!Yt){he("Please select a component to remove");return}try{Mt(!0);const Ve={component_type:_a,component_id:Number(Yt)};jt&&(Ve.destination_room_id=Number(jt)),await fn.removeComponent(Rt.maintenance_step_id,Ve),await be(),ga()}catch(Ve){console.error(Ve),he(((Be=(Z=Ve.response)==null?void 0:Z.data)==null?void 0:Be.error)||"Failed to remove component")}finally{Mt(!1)}}},D=(Z,Be)=>{ke(!0),G(Be),_e(Z),T(""),ee(""),We([]),lt(!1),Qe(null)},b=async Z=>{try{if(Ye(!0),Ke==="pending (waiting for stock item)"){ea(),D(Z,"stock_item");return}if(Ke==="pending (waiting for consumable)"){ea(),D(Z,"consumable");return}await Ge(Z,Ke),ea()}finally{Ye(!1)}},B=async(Z,Be)=>{try{const Ve=Number(Be);if(!Ve||Number.isNaN(Ve)){We([]);return}if(Z==="stock_item"){const et=await Pa.getByStockItemType(Ve);We(Array.isArray(et)?et:[]);return}if(Z==="consumable"){const et=await es.getByConsumableType(Ve);We(Array.isArray(et)?et:[])}}catch(Ve){console.error(Ve),We([])}},ve=async()=>{var Z,Be;if(!(!P||!Ee)){if(!Re){Qe({type:"error",text:"Please select a model."});return}try{if(lt(!0),Qe(null),Ee==="stock_item")await fn.requestStockItem(P.maintenance_step_id,{requested_stock_item_model_id:Number(Re)});else if(Ee==="consumable")await fn.requestConsumable(P.maintenance_step_id,{requested_consumable_model_id:Number(Re)});else{Qe({type:"error",text:"Invalid request type."});return}Qe({type:"success",text:"Request created successfully."}),await be()}catch(Ve){console.error(Ve),Qe({type:"error",text:((Be=(Z=Ve.response)==null?void 0:Z.data)==null?void 0:Be.error)||"Failed to create request."})}finally{lt(!1)}}};return t.jsxs("div",{className:"maintenance-steps-container p-4 border-t",style:{backgroundColor:"var(--color-bg-secondary)",borderColor:"var(--color-border)"},children:[t.jsx("div",{className:"card",style:{backgroundColor:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)"},children:t.jsxs("div",{className:"card-body p-3",children:[t.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",style:{display:"flex",alignItems:"center",width:"100%"},children:[t.jsx("h3",{className:"text-lg font-bold mb-0",children:"Maintenance Steps"}),t.jsxs("div",{style:{display:"flex",gap:8,marginLeft:"auto",flexWrap:"wrap",justifyContent:"flex-end"},children:[!!p&&t.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{typeof y=="function"&&y()},disabled:!!h,style:{width:"auto",whiteSpace:"nowrap",padding:"0.35rem 0.55rem"},title:"End maintenance","aria-label":"End maintenance",children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M12 2v10"}),t.jsx("path",{d:"M18.4 6.6a9 9 0 1 1-12.8 0"})]})}),Wa&&t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{if(Ts){he("Cannot create a new external maintenance while there is an open one.");return}Zs()},disabled:W||Ts,style:{width:"auto",whiteSpace:"nowrap",padding:"0.35rem 0.55rem"},title:"Create external maintenance","aria-label":"Create external maintenance",children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),t.jsx("path",{d:"M12 8v8"}),t.jsx("path",{d:"M8 12h8"})]})}),t.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>rs(),disabled:W,style:{width:"auto",whiteSpace:"nowrap",padding:"0.35rem 0.55rem"},title:"Create new external maintenance step","aria-label":"Create new external maintenance step",children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),t.jsx("path",{d:"M12 8v8"}),t.jsx("path",{d:"M8 12h8"})]})}),t.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>{if(c){he("Maintenance is ended");return}if(ys){he("Cannot create maintenance steps while the asset has an ongoing external maintenance.");return}Q(!0)},disabled:W||ys||c,style:{width:"auto",whiteSpace:"nowrap",padding:"0.35rem 0.55rem"},title:"Create new maintenance step","aria-label":"Create new maintenance step",children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),t.jsx("path",{d:"M14 2v6h6"}),t.jsx("path",{d:"M12 11v6"}),t.jsx("path",{d:"M9 14h6"})]})})]})]})]}),te&&Wa&&Vl.createPortal(t.jsx("div",{className:"modal-overlay",onClick:()=>La(),children:t.jsxs("div",{className:"modal",onClick:Z=>Z.stopPropagation(),style:{maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Create external maintenance"}),t.jsx("button",{className:"modal-close",onClick:()=>La(),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsxs("form",{onSubmit:qs,style:{display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"modal-body",style:{overflowY:"auto",flex:1,minHeight:0},children:[le&&t.jsx("div",{className:`alert ${le.type==="error"?"alert-error":"alert-success"} mb-4`,children:le.text}),t.jsx("div",{className:"alert alert-info mb-0",children:"This will create the external maintenance record. The asset responsible will later select the external maintenance provider and send the asset."})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>La(),children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:xe||z,children:"Create"})]})]})]})}),document.body),C&&Wa&&Vl.createPortal(t.jsx("div",{className:"modal-overlay",onClick:()=>Ta(),children:t.jsxs("div",{className:"modal",onClick:Z=>Z.stopPropagation(),style:{maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Create new external maintenance step"}),t.jsx("button",{className:"modal-close",onClick:()=>Ta(),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsxs("form",{onSubmit:ha,style:{display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"modal-body",style:{overflowY:"auto",flex:1,minHeight:0},children:[Me&&t.jsx("div",{className:`alert ${Me.type==="error"?"alert-error":"alert-success"} mb-4`,children:Me.text}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Typical step"}),t.jsxs("select",{className:"form-input",value:E,onChange:Z=>ie(Z.target.value),disabled:oe,required:!0,children:[t.jsx("option",{value:"",children:"Select typical step..."}),L.map(Z=>t.jsx("option",{value:Z.external_maintenance_typical_step_id,children:Z.description},Z.external_maintenance_typical_step_id))]})]})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>Ta(),children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:oe,children:oe?"Creating...":"Create"})]})]})]})}),document.body),Y&&t.jsx("div",{className:"alert alert-error mb-4",children:Y}),A&&Wa&&Vl.createPortal(t.jsx("div",{className:"modal-overlay",onClick:()=>zt(),children:t.jsxs("div",{className:"modal",onClick:Z=>Z.stopPropagation(),style:{maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Create new maintenance step"}),t.jsx("button",{className:"modal-close",onClick:()=>zt(),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsxs("form",{onSubmit:Le,style:{display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[t.jsxs("div",{className:"modal-body",style:{overflowY:"auto",flex:1,minHeight:0},children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Typical Step"}),t.jsxs("select",{className:"form-input",value:Bt,onChange:Z=>va(Z.target.value),required:!0,children:[t.jsx("option",{value:"",children:"Select Task..."}),I.map(Z=>t.jsx("option",{value:Z.maintenance_typical_step_id,children:Z.description},Z.maintenance_typical_step_id))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Assign To"}),t.jsxs("select",{className:"form-input",value:oa,onChange:Z=>ht(Z.target.value),required:!0,children:[t.jsx("option",{value:"",children:"Select Technician..."}),H.map(Z=>t.jsxs("option",{value:Z.person_id,children:[Z.first_name," ",Z.last_name]},Z.person_id))]})]})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>zt(),children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:W,children:"Create"})]})]})]})}),document.body),W&&Ia.length===0?t.jsx("div",{className:"text-center py-4",style:{color:"var(--color-text-secondary)",marginTop:12},children:"Loading steps..."}):Ia.length===0?t.jsx("div",{className:"empty-state p-4 text-center rounded border",style:{color:"var(--color-text-secondary)",backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)",marginTop:12},children:t.jsx("p",{children:"No steps added yet."})}):t.jsx("div",{className:"table-container rounded border overflow-hidden",style:{backgroundColor:"var(--color-bg-tertiary)",borderColor:"var(--color-border)",marginTop:12},children:t.jsxs("table",{className:"data-table mb-0",children:[t.jsx("thead",{style:{backgroundColor:"var(--color-bg-secondary)"},children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2",children:"Step"}),t.jsx("th",{className:"px-4 py-2",children:"Level"}),t.jsx("th",{className:"px-4 py-2",children:"Assigned To"}),t.jsx("th",{className:"px-4 py-2",children:"Status"}),t.jsx("th",{className:"px-4 py-2 text-right",children:"Actions"})]})}),t.jsx("tbody",{children:Ia.map(Z=>{var Be,Ve,et,qt,zs,Bs;return t.jsxs("tr",{className:"border-t",style:{borderColor:"var(--color-border)"},children:[t.jsx("td",{className:"px-4 py-2",children:Z.__step_type==="internal"?((Be=Z.maintenance_typical_step)==null?void 0:Be.description)||`Step ${Z.maintenance_step_id}`:Z.external_maintenance_typical_step_description||`External step ${Z.external_maintenance_step_id}`}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("span",{className:"badge badge-info",children:Z.__step_type==="internal"?"Internal":"External"})}),t.jsx("td",{className:"px-4 py-2",children:t.jsx("span",{className:"badge badge-info status-badge",children:Z.__step_type==="internal"?`${((Ve=Z.person)==null?void 0:Ve.first_name)||""} ${((et=Z.person)==null?void 0:et.last_name)||""}`.trim():Z.external_maintenance_provider_name||"External provider"})}),t.jsx("td",{className:"px-4 py-2",children:Z.__step_type==="internal"?Z.maintenance_step_status?t.jsx("span",{className:"badge badge-info",children:Z.maintenance_step_status}):t.jsx("span",{className:"badge badge-warning",children:"-"}):t.jsx("span",{className:"badge badge-info",children:ae(Z)})}),t.jsx("td",{className:"px-4 py-2 text-right",children:Z.__step_type==="internal"&&!c&&(((qt=g==null?void 0:g.person)==null?void 0:qt.person_id)===((zs=Z.person)==null?void 0:zs.person_id)||u)&&t.jsxs("div",{className:"d-flex gap-2 justify-content-end",style:{flexWrap:"wrap",position:"relative"},children:[Z.maintenance_step_status!=="done"&&t.jsx("button",{className:"btn btn-xs btn-secondary",style:{padding:"0.2rem 0.45rem",fontSize:12},onClick:()=>Dt(Z),title:"Update status","aria-label":"Update status",children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M12 20h9"}),t.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})}),Z.maintenance_step_status!=="done"&&t.jsx("button",{className:"btn btn-xs btn-secondary",style:{padding:"0.2rem 0.45rem",fontSize:12},onClick:()=>gn(Z),title:"Update asset condition","aria-label":"Update asset condition",children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M9 18h6"}),t.jsx("path",{d:"M10 22h4"}),t.jsx("path",{d:"M12 2a7 7 0 0 0-4 12.74V17a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-2.26A7 7 0 0 0 12 2z"})]})}),Z.maintenance_step_status!=="done"&&((Bs=Z.maintenance_typical_step)==null?void 0:Bs.operation_type)==="remove"&&t.jsx("button",{className:"btn btn-xs btn-danger",style:{padding:"0.2rem 0.45rem",fontSize:12},onClick:()=>Js(Z),disabled:Na||Wt,title:"Remove component","aria-label":"Remove component",children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("polyline",{points:"3 6 5 6 21 6"}),t.jsx("path",{d:"M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"}),t.jsx("path",{d:"M10 11v6"}),t.jsx("path",{d:"M14 11v6"}),t.jsx("path",{d:"M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"})]})})]})})]},Z.__key)})})]})})]})}),Fe&&P&&t.jsxs("div",{className:"card",style:{position:"fixed",right:20,bottom:20,zIndex:50,width:420,padding:"var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12,alignItems:"center",marginBottom:10},children:[t.jsx("div",{style:{fontWeight:700},children:Ee==="stock_item"?"Request stock item":"Request consumable"}),t.jsx("button",{className:"btn btn-xs btn-secondary",style:{padding:"0.2rem 0.45rem",fontSize:12},onClick:Es,disabled:Qt,children:"Close"})]}),t.jsxs("div",{style:{fontSize:12,opacity:.85,marginBottom:12},children:["Step: ",t.jsx("b",{children:P.maintenance_step_id})]}),t.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[t.jsx("label",{className:"form-label",children:"Type"}),t.jsxs("select",{className:"form-input",value:Te,onChange:async Z=>{const Be=Z.target.value;T(Be),ee(""),Qe(null),await B(Ee,Be)},disabled:Qt,children:[t.jsx("option",{value:"",children:"Select type..."}),(Ee==="stock_item"?V:N).map(Z=>t.jsx("option",{value:Ee==="stock_item"?Z.stock_item_type_id:Z.consumable_type_id,children:Ee==="stock_item"?Z.stock_item_type_label:Z.consumable_type_label},Ee==="stock_item"?Z.stock_item_type_id:Z.consumable_type_id))]})]}),t.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[t.jsx("label",{className:"form-label",children:"Model"}),t.jsxs("select",{className:"form-input",value:Re,onChange:Z=>{ee(Z.target.value),Qe(null)},disabled:Qt||!Te,children:[t.jsx("option",{value:"",children:"Select model..."}),Ie.map(Z=>t.jsxs("option",{value:Ee==="stock_item"?Z.stock_item_model_id:Z.consumable_model_id,children:[Z.model_name,Z.model_code?` (${Z.model_code})`:""]},Ee==="stock_item"?Z.stock_item_model_id:Z.consumable_model_id))]})]}),$t&&t.jsx("div",{className:$t.type==="success"?"badge badge-success":"badge badge-danger",style:{padding:"var(--space-3)",width:"100%",marginBottom:10,borderRadius:"var(--radius-md)",display:"block"},children:$t.text}),t.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"var(--space-2)",marginTop:10},children:t.jsx("button",{className:"btn btn-primary btn-sm",onClick:ve,disabled:Qt||!Re,children:Qt?"Requesting...":"Submit request"})})]}),Se&&Vl.createPortal(t.jsx("div",{className:"modal-overlay",onClick:()=>ea(),children:t.jsxs("div",{className:"modal",onClick:Z=>Z.stopPropagation(),style:{maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Update status"}),t.jsx("button",{className:"modal-close",onClick:()=>ea(),disabled:ze,children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsx("div",{className:"modal-body",style:{overflowY:"auto",flex:1,minHeight:0},children:t.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[t.jsx("label",{className:"form-label",children:"Status"}),t.jsxs("select",{className:"form-input",value:Ke,onChange:Z=>Ue(Z.target.value),disabled:ze,children:[t.jsx("option",{value:"",children:"Select status..."}),Vt(($e=v.find(Z=>Z.maintenance_step_id===Se))==null?void 0:$e.maintenance_step_status).map(Z=>t.jsx("option",{value:Z,children:Z},Z))]})]})}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>ea(),disabled:ze,children:"Cancel"}),t.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{const Z=v.find(Be=>Be.maintenance_step_id===Se);Z&&b(Z)},disabled:ze||!Ke,children:ze?"Saving...":"Save"})]})]})}),document.body),ba&&Rt&&t.jsxs("div",{className:"card",style:{position:"fixed",right:20,bottom:20,zIndex:50,width:520,padding:"var(--space-4)",border:"1px solid var(--color-border)",background:"var(--color-bg-tertiary)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12,alignItems:"center",marginBottom:10},children:[t.jsx("div",{style:{fontWeight:700},children:"Remove component"}),t.jsx("button",{className:"btn btn-xs btn-secondary",style:{padding:"0.2rem 0.45rem",fontSize:12},onClick:ga,disabled:Wt,children:"Close"})]}),t.jsxs("div",{style:{fontSize:12,opacity:.85,marginBottom:12},children:["Step: ",t.jsx("b",{children:Rt.maintenance_step_id})]}),Na?t.jsx("div",{style:{fontSize:13,opacity:.85},children:"Loading components..."}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[t.jsx("label",{className:"form-label",children:"Component"}),t.jsxs("select",{className:"form-input",value:_a&&Yt?`${_a}:${Yt}`:"",onChange:Z=>{const Be=Z.target.value;if(!Be){pt(""),ra("");return}const[Ve,et]=Be.split(":");pt(Ve),ra(et)},children:[t.jsx("option",{value:"",children:"Select component..."}),((ut=bt.stock_items)==null?void 0:ut.length)>0&&t.jsx("optgroup",{label:"Stock items",children:bt.stock_items.map(Z=>t.jsxs("option",{value:`stock_item:${Z.stock_item_id}`,children:[Z.stock_item_inventory_number?`${Z.stock_item_inventory_number} - `:"",Z.stock_item_name||`Stock item ${Z.stock_item_id}`]},`stock_item:${Z.stock_item_id}`))}),((ta=bt.consumables)==null?void 0:ta.length)>0&&t.jsx("optgroup",{label:"Consumables",children:bt.consumables.map(Z=>t.jsxs("option",{value:`consumable:${Z.consumable_id}`,children:[Z.consumable_inventory_number?`${Z.consumable_inventory_number} - `:"",Z.consumable_name||`Consumable ${Z.consumable_id}`]},`consumable:${Z.consumable_id}`))})]})]}),t.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[t.jsx("label",{className:"form-label",children:"Move removed component to (maintenance room)"}),t.jsxs("select",{className:"form-input",value:jt,onChange:Z=>ja(Z.target.value),children:[t.jsx("option",{value:"",children:"Select room..."}),la.map(Z=>t.jsxs("option",{value:Z.room_id,children:[Z.room_name,Z.room_type_label?` (${Z.room_type_label})`:""]},Z.room_id))]})]}),t.jsxs("div",{style:{display:"flex",gap:"var(--space-2)",justifyContent:"flex-end",marginTop:"var(--space-3)"},children:[t.jsx("button",{className:"btn btn-xs btn-secondary",style:{padding:"0.2rem 0.45rem",fontSize:12},onClick:ga,disabled:Wt,children:"Cancel"}),t.jsx("button",{className:"btn btn-xs btn-danger",style:{padding:"0.2rem 0.45rem",fontSize:12},onClick:Fs,disabled:Wt||!_a||!Yt,children:Wt?"Removing...":"Remove"})]})]})]}),St&&Pt&&Vl.createPortal(t.jsx("div",{className:"modal-overlay",onClick:()=>Ga(),children:t.jsxs("div",{className:"modal",onClick:Z=>Z.stopPropagation(),style:{maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Update asset condition"}),t.jsx("button",{className:"modal-close",onClick:()=>Ga(),disabled:Gt,children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsxs("div",{className:"modal-body",style:{overflowY:"auto",flex:1,minHeight:0},children:[t.jsxs("div",{style:{fontSize:12,opacity:.85,marginBottom:12},children:["Step: ",t.jsx("b",{children:Pt.maintenance_step_id})]}),t.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[t.jsx("label",{className:"form-label",children:"Condition"}),t.jsxs("select",{className:"form-input",value:pa,onChange:Z=>Tt(Z.target.value),disabled:Gt,children:[t.jsx("option",{value:"",children:"Select condition..."}),ss.map(Z=>t.jsx("option",{value:Z.condition_id,children:Z.condition_label||Z.condition_code||Z.condition_id},Z.condition_id))]})]}),t.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[t.jsx("label",{className:"form-label",children:"Notes"}),t.jsx("textarea",{className:"form-input",rows:3,value:ft,onChange:Z=>vt(Z.target.value),disabled:Gt})]}),t.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[t.jsx("label",{className:"form-label",children:"Cosmetic issues"}),t.jsx("input",{className:"form-input",value:Xt,onChange:Z=>$a(Z.target.value),disabled:Gt})]}),t.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[t.jsx("label",{className:"form-label",children:"Functional issues"}),t.jsx("input",{className:"form-input",value:Da,onChange:Z=>Ya(Z.target.value),disabled:Gt})]}),t.jsxs("div",{className:"form-group",style:{marginBottom:10},children:[t.jsx("label",{className:"form-label",children:"Recommendation"}),t.jsx("input",{className:"form-input",value:Ma,onChange:Z=>fa(Z.target.value),disabled:Gt})]})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:Ga,disabled:Gt,children:"Cancel"}),t.jsx("button",{type:"button",className:"btn btn-primary",onClick:Ua,disabled:Gt||!pa,children:Gt?"Saving...":"Save"})]})]})}),document.body)]})},Oj=()=>{const r=It(),{maintenanceId:l}=al(),{user:c,isSuperuser:u}=fs(),[m,p]=d.useState(null),[h,y]=d.useState([]),[g,v]=d.useState(!0),[x,j]=d.useState(""),[M,I]=d.useState(!1),[k,H]=d.useState(!1),S=d.useMemo(()=>{var R;return u?!0:((R=c==null?void 0:c.roles)==null?void 0:R.some(W=>W.role_code==="maintenance_chief"||W.role_code==="exploitation_chief"))||!1},[u,c]),V=d.useMemo(()=>{var K;if(S)return!0;const R=(K=c==null?void 0:c.person)==null?void 0:K.person_id,W=m==null?void 0:m.performed_by_person;return!R||!W?!1:Number(R)===Number(W)},[S,c,m]);d.useEffect(()=>{(async()=>{try{v(!0),j("");const W=Number(l);if(!W||Number.isNaN(W)){j("Invalid maintenance id");return}const[K,Y]=await Promise.all([Qr.getById(W),fn.getAll({maintenance:W})]);p(K),y(Array.isArray(Y)?Y:[])}catch(W){console.error(W),j("Failed to load maintenance")}finally{v(!1)}})()},[l]);const se=d.useMemo(()=>{const R=Array.isArray(h)?h:[];if(R.length===0)return!0;const W=new Set(["done","failed (to be sent to a higher level)","cancelled"]);return R.every(K=>W.has(K==null?void 0:K.maintenance_step_status))},[h]),N=async R=>{var W,K;try{if(!l)return;I(!0),j("");const Y=Number(l),he=await Qr.end(Y,{is_successful:R});p(he),H(!1)}catch(Y){console.error(Y),j(((K=(W=Y.response)==null?void 0:W.data)==null?void 0:K.error)||"Failed to end maintenance")}finally{I(!1)}};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"page-header",children:t.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"page-title",children:"Maintenance Steps"}),t.jsxs("p",{className:"page-subtitle",children:["Maintenance #",l,m!=null&&m.asset_name?` - ${m.asset_name}`:""]})]}),t.jsx("div",{className:"d-flex",style:{gap:"0.5rem"},children:t.jsx("button",{className:"btn btn-secondary",onClick:()=>r("/dashboard/maintenances"),title:"Back","aria-label":"Back",children:t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M15 18l-6-6 6-6"})})})})]})}),x&&t.jsx("div",{className:"alert alert-error mb-4",children:x}),g?t.jsxs("div",{className:"empty-state",children:[t.jsx("div",{className:"loading-spinner",style:{margin:"0 auto"}}),t.jsx("p",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading steps..."})]}):t.jsx(Dj,{maintenanceId:Number(l),maintenancePerformedBy:m==null?void 0:m.performed_by_person,maintenanceEnded:!!(m!=null&&m.end_datetime),isChief:S,onStepsChange:R=>y(Array.isArray(R)?R:[]),canShowEndMaintenanceButton:se,canEndMaintenance:V,endMaintenanceDisabled:g||M||!!(m!=null&&m.end_datetime)||!V,onEndMaintenance:()=>H(!0)}),k&&t.jsx("div",{className:"modal-overlay",onClick:()=>M?null:H(!1),children:t.jsxs("div",{className:"modal",onClick:R=>R.stopPropagation(),style:{maxWidth:520},children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"End maintenance"}),t.jsx("button",{className:"modal-close",onClick:()=>M?null:H(!1),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsx("div",{className:"modal-body",style:{display:"flex",flexDirection:"column",gap:10},children:t.jsx("div",{children:"Was the maintenance successful?"})}),t.jsxs("div",{className:"modal-footer",style:{display:"flex",flexDirection:"column",gap:12},children:[t.jsx("button",{className:"btn btn-primary",onClick:()=>N(!0),disabled:M,style:{width:"100%",padding:"12px"},children:"Yes"}),t.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"center"},children:[t.jsx("button",{className:"btn btn-secondary",onClick:()=>N(null),disabled:M,style:{flex:1},children:"I'll decide later"}),t.jsx("button",{className:"btn btn-danger",onClick:()=>N(!1),disabled:M,style:{flex:1},children:"No"})]})]})]})})]})},Lj=()=>{const{user:r,isSuperuser:l}=fs(),c=({label:ze,date:Ye})=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-3)"},children:[t.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:Ye?"var(--color-success)":"var(--color-border)",flexShrink:0}}),t.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("span",{style:{fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)"},children:ze}),t.jsx("span",{style:{fontSize:"var(--font-size-sm)",fontWeight:500,color:Ye?"var(--color-text-primary)":"var(--color-text-muted)"},children:Ye||"Pending"})]})]}),[u,m]=d.useState([]),[p,h]=d.useState(!0),[y,g]=d.useState(""),[v,x]=d.useState(!1),[j,M]=d.useState(null),[I,k]=d.useState(!1),[H,S]=d.useState(null),[V,se]=d.useState([]),[N,R]=d.useState([]),[W,K]=d.useState([]),[Y,he]=d.useState(""),[A,Q]=d.useState(""),[te,re]=d.useState(!1),[xe,Ne]=d.useState(null),[le,w]=d.useState(!1),[z,X]=d.useState(null),[F,fe]=d.useState(!1),[C,$]=d.useState(!1),[oe,ye]=d.useState(null),[Me,Ae]=d.useState(""),E=d.useMemo(()=>{var ze;return l?!0:((ze=r==null?void 0:r.roles)==null?void 0:ze.some(Ye=>Ye.role_code==="asset_responsible"))||!1},[l,r]),ie=async()=>{var ze,Ye;try{h(!0),g("");const Fe=await Yn.getAll();m(Array.isArray(Fe)?Fe:[])}catch(Fe){console.error(Fe),g(((Ye=(ze=Fe.response)==null?void 0:ze.data)==null?void 0:Ye.error)||"Failed to load external maintenances")}finally{h(!1)}},L=async()=>{var ze,Ye;if(j){if(!Me){ye({type:"error",text:"Please select a destination room."});return}try{$(!0),ye(null);const Fe=await Yn.confirmReceivedByCompany(j.external_maintenance_id,Number(Me));ye({type:"success",text:"Confirmed as received by company."}),M(Fe),fe(!1),await ie()}catch(Fe){console.error(Fe),ye({type:"error",text:((Ye=(ze=Fe.response)==null?void 0:ze.data)==null?void 0:Ye.error)||"Failed to confirm received by company."})}finally{$(!1)}}},O=async()=>{var ze,Ye;if(j)try{w(!0),X(null);const Fe=await Yn.confirmSentToCompany(j.external_maintenance_id);X({type:"success",text:"Confirmed as sent to company."}),M(Fe),await ie()}catch(Fe){console.error(Fe),X({type:"error",text:((Ye=(ze=Fe.response)==null?void 0:ze.data)==null?void 0:Ye.error)||"Failed to confirm sent to company."})}finally{w(!1)}},Se=async()=>{var ze,Ye;if(j)try{re(!0),Ne(null);const Fe=await Yn.confirmReceivedByProvider(j.external_maintenance_id);Ne({type:"success",text:"Confirmed as received by maintenance provider."}),M(Fe),await ie()}catch(Fe){console.error(Fe),Ne({type:"error",text:((Ye=(ze=Fe.response)==null?void 0:ze.data)==null?void 0:Ye.error)||"Failed to confirm receipt."})}finally{re(!1)}};d.useEffect(()=>{ie()},[]);const we=ze=>{M(ze),S(null),Ne(null),X(null),he(""),Q(""),fe(!1),$(!1),ye(null),Ae(""),x(!0)},Ke=()=>{M(null),x(!1),k(!1),S(null),re(!1),Ne(null),w(!1),X(null),he(""),Q(""),fe(!1),$(!1),ye(null),Ae("")};d.useEffect(()=>{(async()=>{try{if(!v)return;const[Ye,Fe]=await Promise.all([Y_.getAll(),Is.getAll()]);se(Array.isArray(Ye)?Ye:[]);const ke=Array.isArray(Fe)?Fe:[];K(ke);const Ee=ke.filter(G=>(G==null?void 0:G.room_type_label)==="External Maintenance Center");R(Ee)}catch(Ye){console.error(Ye),se([]),R([]),K([])}})()},[v]);const Ue=async()=>{var ze,Ye;if(j){if(!Y){S({type:"error",text:"Please select provider."});return}if(!A){S({type:"error",text:"Please select destination room."});return}try{k(!0),S(null);const Fe=await Yn.sendToProvider(j.external_maintenance_id,Number(Y),Number(A));S({type:"success",text:"Asset sent to external maintenance provider."}),M(Fe),await ie()}catch(Fe){console.error(Fe),S({type:"error",text:((Ye=(ze=Fe.response)==null?void 0:ze.data)==null?void 0:Ye.error)||"Failed to send to provider."})}finally{k(!1)}}};return E?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"page-header",children:t.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"page-title",children:"External Maintenances"}),t.jsx("p",{className:"page-subtitle",children:"Consult external maintenance records"})]}),t.jsx("button",{className:"btn btn-secondary",onClick:()=>ie(),disabled:p,children:"Refresh"})]})}),y&&t.jsx("div",{className:"alert alert-error mb-4",children:y}),p?t.jsxs("div",{className:"empty-state",children:[t.jsx("div",{className:"loading-spinner",style:{margin:"0 auto"}}),t.jsx("p",{style:{marginTop:"1rem",color:"var(--color-text-secondary)"},children:"Loading external maintenances..."})]}):u.length===0?t.jsx("div",{className:"empty-state",children:t.jsx("p",{children:"No external maintenances found."})}):t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-body",children:t.jsx("div",{className:"table-container",children:t.jsxs("table",{className:"data-table",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"External Maintenance"}),t.jsx("th",{children:"Maintenance"}),t.jsx("th",{children:"Asset"}),t.jsx("th",{className:"text-right",children:"Actions"})]})}),t.jsx("tbody",{children:u.map(ze=>t.jsxs("tr",{children:[t.jsxs("td",{children:["#",ze.external_maintenance_id]}),t.jsxs("td",{children:["#",ze.maintenance]}),t.jsx("td",{children:ze.maintenance_asset_name||ze.maintenance_asset_id||"-"}),t.jsx("td",{className:"text-right",children:t.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>we(ze),children:"View"})})]},ze.external_maintenance_id))})]})})})}),v&&j&&t.jsx("div",{className:"modal-overlay",onClick:()=>Ke(),children:t.jsxs("div",{className:"modal",onClick:ze=>ze.stopPropagation(),style:{maxWidth:680},children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"External Maintenance Details"}),t.jsx("button",{className:"modal-close",onClick:()=>Ke(),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsx("div",{className:"modal-body",style:{padding:"var(--space-5)"},children:t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"var(--space-4)"},children:[t.jsxs("div",{className:"card",style:{background:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-lg)",padding:"var(--space-4)"},children:[t.jsx("div",{style:{fontSize:"var(--font-size-xs)",fontWeight:600,color:"var(--color-text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"var(--space-3)"},children:"Asset Information"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-3)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-muted)",marginBottom:2},children:"External Maintenance ID"}),t.jsxs("div",{style:{fontWeight:500},children:["#",j.external_maintenance_id]})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-muted)",marginBottom:2},children:"Maintenance ID"}),t.jsxs("div",{style:{fontWeight:500},children:["#",j.maintenance]})]}),t.jsxs("div",{style:{gridColumn:"1 / -1"},children:[t.jsx("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--color-text-muted)",marginBottom:2},children:"Asset"}),t.jsx("div",{style:{fontWeight:500},children:j.maintenance_asset_name||j.maintenance_asset_id||"-"})]})]})]}),t.jsxs("div",{className:"card",style:{background:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-lg)",padding:"var(--space-4)"},children:[t.jsx("div",{style:{fontSize:"var(--font-size-xs)",fontWeight:600,color:"var(--color-text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"var(--space-3)"},children:"Timeline"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"var(--space-3)"},children:[t.jsx(c,{label:"Sent to external maintenance",date:j.item_sent_to_external_maintenance_datetime}),t.jsx(c,{label:"Received by maintenance provider",date:j.item_received_by_maintenance_provider_datetime}),t.jsx(c,{label:"Sent to company",date:j.item_sent_to_company_datetime}),t.jsx(c,{label:"Received by company",date:j.item_received_by_company_datetime})]})]})]})}),t.jsxs("div",{style:{padding:"0 var(--space-5) var(--space-5)",display:"flex",flexDirection:"column",gap:"var(--space-4)"},children:[E&&!j.item_sent_to_external_maintenance_datetime&&t.jsxs("div",{className:"card",style:{background:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-lg)",padding:"var(--space-4)"},children:[t.jsx("div",{style:{fontWeight:600,marginBottom:"var(--space-3)"},children:"Send to External Maintenance Provider"}),H&&t.jsx("div",{className:`alert ${H.type==="error"?"alert-error":"alert-success"} mb-3`,children:H.text}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--space-3)"},children:[t.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[t.jsx("label",{className:"form-label",children:"Provider"}),t.jsxs("select",{className:"form-input",value:Y,onChange:ze=>he(ze.target.value),disabled:I||!!j.item_sent_to_external_maintenance_datetime,children:[t.jsx("option",{value:"",children:"Select provider..."}),V.map(ze=>t.jsx("option",{value:ze.external_maintenance_provider_id,children:ze.external_maintenance_provider_name||`Provider ${ze.external_maintenance_provider_id}`},ze.external_maintenance_provider_id))]})]}),t.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[t.jsx("label",{className:"form-label",children:"Destination Room"}),t.jsxs("select",{className:"form-input",value:A,onChange:ze=>Q(ze.target.value),disabled:I||!!j.item_sent_to_external_maintenance_datetime,children:[t.jsx("option",{value:"",children:"Select room..."}),N.map(ze=>t.jsx("option",{value:ze.room_id,children:ze.room_name},ze.room_id))]})]})]}),t.jsx("button",{className:"btn btn-primary",onClick:()=>Ue(),disabled:I||!Y||!A,style:{marginTop:"var(--space-3)"},children:I?"Sending...":"Send"})]}),E&&j.item_sent_to_external_maintenance_datetime&&!j.item_received_by_maintenance_provider_datetime&&t.jsxs("div",{className:"card",style:{background:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-lg)",padding:"var(--space-4)"},children:[t.jsx("div",{style:{fontWeight:600,marginBottom:"var(--space-3)"},children:"Confirm Received by Maintenance Provider"}),xe&&t.jsx("div",{className:`alert ${xe.type==="error"?"alert-error":"alert-success"} mb-3`,children:xe.text}),t.jsx("button",{className:"btn btn-primary",onClick:()=>Se(),disabled:te,children:te?"Confirming...":"Confirm Received"})]}),E&&j.item_received_by_maintenance_provider_datetime&&!j.item_sent_to_company_datetime&&t.jsxs("div",{className:"card",style:{background:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-lg)",padding:"var(--space-4)"},children:[t.jsx("div",{style:{fontWeight:600,marginBottom:"var(--space-3)"},children:"Confirm Asset Sent by External Maintenance Provider"}),z&&t.jsx("div",{className:`alert ${z.type==="error"?"alert-error":"alert-success"} mb-3`,children:z.text}),t.jsx("button",{className:"btn btn-primary",onClick:()=>O(),disabled:le,children:le?"Confirming...":"Confirm Asset Sent"})]}),E&&j.item_sent_to_company_datetime&&!j.item_received_by_company_datetime&&t.jsxs("div",{className:"card",style:{background:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-lg)",padding:"var(--space-4)"},children:[t.jsx("div",{style:{fontWeight:600,marginBottom:"var(--space-3)"},children:"Confirm Asset Received by Company"}),oe&&t.jsx("div",{className:`alert ${oe.type==="error"?"alert-error":"alert-success"} mb-3`,children:oe.text}),t.jsx("button",{className:"btn btn-primary",onClick:()=>{ye(null),Ae(""),fe(!0)},disabled:C,children:"Confirm Asset Received"})]})]}),F&&t.jsx("div",{className:"modal-overlay",onClick:()=>fe(!1),children:t.jsxs("div",{className:"modal",onClick:ze=>ze.stopPropagation(),style:{maxWidth:480},children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"modal-title",children:"Move Asset to Room"}),t.jsx("button",{className:"modal-close",onClick:()=>fe(!1),children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsxs("div",{className:"modal-body",children:[oe&&t.jsx("div",{className:`alert ${oe.type==="error"?"alert-error":"alert-success"} mb-3`,children:oe.text}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{className:"form-label",children:"Destination Room"}),t.jsxs("select",{className:"form-input",value:Me,onChange:ze=>Ae(ze.target.value),disabled:C,children:[t.jsx("option",{value:"",children:"Select room..."}),W.map(ze=>t.jsxs("option",{value:ze.room_id,children:[ze.room_name,ze.room_type_label?` - ${ze.room_type_label}`:""]},ze.room_id))]})]})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{className:"btn btn-secondary",onClick:()=>fe(!1),disabled:C,children:"Cancel"}),t.jsx("button",{className:"btn btn-primary",onClick:()=>L(),disabled:C||!Me,children:C?"Confirming...":"Confirm & Move"})]})]})}),t.jsx("div",{className:"modal-footer",children:t.jsx("button",{className:"btn btn-secondary",onClick:()=>Ke(),children:"Close"})})]})})]}):t.jsx("div",{className:"empty-state",children:t.jsx("p",{children:"You are not allowed to view external maintenances."})})},Ij=({children:r})=>{const{isAuthenticated:l}=fs();return l?r:t.jsx(Gs,{to:"/login",replace:!0})},Uj=({children:r})=>{const{isAuthenticated:l}=fs();return l?t.jsx(Gs,{to:"/dashboard",replace:!0}):r};function qj(){return t.jsx(J_,{children:t.jsx(rx,{children:t.jsxs(Bg,{children:[t.jsx(at,{path:"/login",element:t.jsx(Uj,{children:t.jsx(K_,{})})}),t.jsxs(at,{path:"/dashboard",element:t.jsx(Ij,{children:t.jsx(P_,{})}),children:[t.jsx(at,{index:!0,element:t.jsx(ej,{})}),t.jsx(at,{path:"persons",element:t.jsx(tj,{})}),t.jsx(at,{path:"assets",element:t.jsx(Gs,{to:"/dashboard/assets/types",replace:!0})}),t.jsx(at,{path:"assets/types",element:t.jsx(sj,{})}),t.jsx(at,{path:"assets/types/attributes",element:t.jsx(nj,{})}),t.jsx(at,{path:"assets/models",element:t.jsx(rj,{})}),t.jsx(at,{path:"assets/models/default-composition",element:t.jsx(Rh,{})}),t.jsx(at,{path:"assets/models/:modelId/default-composition",element:t.jsx(Rh,{})}),t.jsx(at,{path:"assets/models/:modelId/compatibility",element:t.jsx(oj,{})}),t.jsx(at,{path:"assets/instances",element:t.jsx(aj,{})}),t.jsx(at,{path:"assets/attribute-definitions",element:t.jsx(lj,{})}),t.jsx(at,{path:"maintenances",element:t.jsx(ij,{})}),t.jsx(at,{path:"maintenances/:maintenanceId/steps",element:t.jsx(Oj,{})}),t.jsx(at,{path:"stock-items",element:t.jsx(Gs,{to:"/dashboard/stock-items/types",replace:!0})}),t.jsx(at,{path:"stock-items/types",element:t.jsx(dj,{})}),t.jsx(at,{path:"stock-items/types/attributes",element:t.jsx(uj,{})}),t.jsx(at,{path:"stock-items/models",element:t.jsx(mj,{})}),t.jsx(at,{path:"stock-items/models/:modelId/compatibility",element:t.jsx(pj,{})}),t.jsx(at,{path:"stock-items/instances",element:t.jsx(cj,{})}),t.jsx(at,{path:"stock-items/attribute-definitions",element:t.jsx(fj,{})}),t.jsx(at,{path:"consumables",element:t.jsx(Gs,{to:"/dashboard/consumables/types",replace:!0})}),t.jsx(at,{path:"consumables/types",element:t.jsx(yj,{})}),t.jsx(at,{path:"consumables/types/attributes",element:t.jsx(bj,{})}),t.jsx(at,{path:"consumables/models",element:t.jsx(vj,{})}),t.jsx(at,{path:"consumables/models/:modelId/compatibility",element:t.jsx(gj,{})}),t.jsx(at,{path:"consumables/instances",element:t.jsx(hj,{})}),t.jsx(at,{path:"consumables/attribute-definitions",element:t.jsx(xj,{})}),t.jsx(at,{path:"my-items",element:t.jsx(Nj,{})}),t.jsx(at,{path:"reports",element:t.jsx(Rj,{})}),t.jsx(at,{path:"rooms",element:t.jsx(_j,{})}),t.jsx(at,{path:"positions",element:t.jsx(jj,{})}),t.jsx(at,{path:"organizational-structure",element:t.jsx(Aj,{})}),t.jsx(at,{path:"attribution-orders",element:t.jsx(Mj,{})}),t.jsx(at,{path:"attribution-orders/assets/:rowId/included-items",element:t.jsx(Mh,{})}),t.jsx(at,{path:"attribution-orders/assets/:rowId/included-items/:itemKind",element:t.jsx(Mh,{})}),t.jsx(at,{path:"company-asset-requests",element:t.jsx(Ej,{})}),t.jsx(at,{path:"administrative-certificates",element:t.jsx(zj,{})}),t.jsx(at,{path:"item-requests-inbox",element:t.jsx(Bj,{})}),t.jsx(at,{path:"external-maintenances",element:t.jsx(Lj,{})})]}),t.jsx(at,{path:"/",element:t.jsx(Gs,{to:"/login",replace:!0})}),t.jsx(at,{path:"*",element:t.jsx(Gs,{to:"/login",replace:!0})})]})})})}Bv.createRoot(document.getElementById("root")).render(t.jsx(d.StrictMode,{children:t.jsx(qj,{})}));
